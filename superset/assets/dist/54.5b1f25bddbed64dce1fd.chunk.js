(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{2461:function(t,n,e){"use strict";e.r(n);var r=e(974),a=e(1100),o=e.n(a),u=e(0),c=e.n(u),s=e(19),i=e(205),f=e(114),l=function(){var t={},n=24,e=8,r=[1,1],a=[],o=[];function u(){function t(t,n){return t.source.y-n.source.y}function n(t,n){return t.target.y-n.target.y}a.forEach(function(e){e.sourceLinks.sort(n),e.targetLinks.sort(t)}),a.forEach(function(t){var n=0,e=0;t.sourceLinks.forEach(function(t){t.sy=n,n+=t.dy}),t.targetLinks.forEach(function(t){t.ty=e,e+=t.dy})})}function c(t){return t.y+t.dy/2}function l(t){return t.value}return t.nodeWidth=function(e){return arguments.length?(n=+e,t):n},t.nodePadding=function(n){return arguments.length?(e=+n,t):e},t.nodes=function(n){return arguments.length?(a=n,t):a},t.links=function(n){return arguments.length?(o=n,t):o},t.size=function(n){return arguments.length?(r=n,t):r},t.layout=function(f){return a.forEach(function(t){t.sourceLinks=[],t.targetLinks=[]}),o.forEach(function(t){var n=t.source,e=t.target;"number"==typeof n&&(n=t.source=a[t.source]),"number"==typeof e&&(e=t.target=a[t.target]),n.sourceLinks.push(t),e.targetLinks.push(t)}),a.forEach(function(t){t.value=Math.max(Object(s.sum)(t.sourceLinks,l),Object(s.sum)(t.targetLinks,l))}),function(){var t,e=a,o=0;for(;e.length;)t=[],e.forEach(function(e){e.x=o,e.dx=n,e.sourceLinks.forEach(function(n){t.indexOf(n.target)<0&&t.push(n.target)})}),e=t,++o;(function(t){a.forEach(function(n){n.sourceLinks.length||(n.x=t-1)})})(o),u=(r[0]-n)/(o-1),a.forEach(function(t){t.x*=u});var u}(),function(t){var n=Object(i.b)().key(function(t){return t.x}).sortKeys(s.ascending).entries(a).map(function(t){return t.values});u=Object(s.min)(n,function(t){return(r[1]-(t.length-1)*e)/Object(s.sum)(t,l)}),n.forEach(function(t){t.forEach(function(t,n){t.y=n,t.dy=t.value*u})}),o.forEach(function(t){t.dy=t.value*u}),y();var u;for(var f=1;t>0;--t)h(f*=.99),y(),d(f),y();function d(t){function e(t){return c(t.source)*t.value}n.forEach(function(n){n.forEach(function(n){if(n.targetLinks.length){var r=Object(s.sum)(n.targetLinks,e)/Object(s.sum)(n.targetLinks,l);n.y+=(r-c(n))*t}})})}function h(t){function e(t){return c(t.target)*t.value}n.slice().reverse().forEach(function(n){n.forEach(function(n){if(n.sourceLinks.length){var r=Object(s.sum)(n.sourceLinks,e)/Object(s.sum)(n.sourceLinks,l);n.y+=(r-c(n))*t}})})}function y(){n.forEach(function(t){var n,a,o,u=0,c=t.length;for(t.sort(g),o=0;o<c;++o)n=t[o],(a=u-n.y)>0&&(n.y+=a),u=n.y+n.dy+e;if((a=u-e-r[1])>0)for(u=n.y-=a,o=c-2;o>=0;--o)n=t[o],(a=n.y+n.dy+e-u)>0&&(n.y-=a),u=n.y})}function g(t,n){return t.y-n.y}}(f),u(),t},t.relayout=function(){return u(),t},t.link=function(){var t=.5;function n(n){var e=n.source.x+n.source.dx,r=n.target.x,a=Object(f.c)(e,r),o=a(t),u=a(1-t),c=n.source.y+n.sy+n.dy/2,s=n.target.y+n.ty+n.dy/2;return"M"+e+","+c+"C"+o+","+c+" "+u+","+s+" "+r+","+s}return n.curvature=function(e){return arguments.length?(t=+e,n):t},n},t},d=e(273),h=e(361),y=e(93),g={data:c.a.arrayOf(c.a.shape({source:c.a.string,target:c.a.string,value:c.a.number})),width:c.a.number,height:c.a.number,colorScheme:c.a.string},p=Object(h.c)(y.a.FLOAT);function v(t,n){function e(t){b.html(function(){return function(t){var n;if(t.sourceLinks)n=t.name+" Value: <span class='emph'>"+p(t.value)+"</span>";else{var e=p(t.value),r=o.a.round(t.value/t.source.value*100,1),a=o.a.round(t.value/t.target.value*100,1);n=["<div class=''>Path Value: <span class='emph'>",e,"</span></div>","<div class='percents'>","<span class='emph'>",Number.isFinite(r)?r:"100","%</span> of ",t.source.name,"<br/>","<span class='emph'>"+(Number.isFinite(a)?a:"--")+"%</span> of ",t.target.name,"target","</div>"].join("")}return n}(t)}).transition().duration(200).style("left",o.a.event.offsetX+10+"px").style("top",o.a.event.offsetY+10+"px").style("opacity",.95)}function r(){b.transition().duration(100).style("opacity",0)}var a=n.data,u=n.width,c=n.height,s=n.colorScheme,i=o.a.select(t);i.classed("superset-legacy-chart-sankey",!0);var f=5,h=5,y=5,g=5,v=u-g-h,m=c-f-y;i.selectAll("*").remove();var k=i.append("svg").attr("width",v+g+h).attr("height",m+f+y).append("g").attr("transform","translate("+g+","+f+")"),b=i.append("div").attr("class","sankey-tooltip").style("opacity",0),x=d.CategoricalColorNamespace.getScale(s),L=l().nodeWidth(15).nodePadding(10).size([v,m]),E=L.link(),O={},j=a.map(function(t){var n=Object.assign({},t);return n.source=O[n.source]||(O[n.source]={name:n.source}),n.target=O[n.target]||(O[n.target]={name:n.target}),n.value=+n.value,n});O=o.a.values(O),L.nodes(O).links(j).layout(32);var w=k.append("g").selectAll(".link").data(j).enter().append("path").attr("class","link").attr("d",E).style("stroke-width",function(t){return Math.max(1,t.dy)}).sort(function(t,n){return n.dy-t.dy}).on("mouseover",e).on("mouseout",r),N=k.append("g").selectAll(".node").data(O).enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).call(o.a.behavior.drag().origin(function(t){return t}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",function(t){o.a.select(this).attr("transform","translate("+t.x+","+(t.y=Math.max(0,Math.min(c-t.dy,o.a.event.y)))+")"),L.relayout(),w.attr("d",E)}));N.append("rect").attr("height",function(t){return t.dy>5?t.dy:5}).attr("width",L.nodeWidth()).style("fill",function(t){var n=t.name||"N/A";return t.color=x(n.replace(/ .*/,"")),t.color}).style("stroke",function(t){return o.a.rgb(t.color).darker(2)}).on("mouseover",e).on("mouseout",r),N.append("text").attr("x",-6).attr("y",function(t){return t.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(t){return t.name}).filter(function(t){return t.x<v/2}).attr("x",6+L.nodeWidth()).attr("text-anchor","start")}v.displayName="Sankey",v.propTypes=g;var m=v;n.default=Object(r.a)(m)}}]);