{"version":3,"file":"8888.fdc76022af49052eedce.entry.js","mappings":"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","sources":["webpack://superset/./src/SqlLab/utils/newQueryTabName.ts","webpack://superset/./src/SqlLab/actions/sqlLab.js","webpack://superset/./src/explore/exploreUtils/index.js","webpack://superset/./src/utils/datasourceUtils.js","webpack://superset/./src/utils/dates.js","webpack://superset/./src/utils/hostNamesConfig.js","webpack://superset/./packages/superset-ui-chart-controls/src/components/InfoTooltipWithTrigger.tsx","webpack://superset/./packages/superset-ui-chart-controls/src/components/Tooltip.tsx","webpack://superset/./packages/superset-ui-core/src/chart/registries/ChartBuildQueryRegistrySingleton.ts","webpack://superset/./packages/superset-ui-core/src/chart/registries/ChartMetadataRegistrySingleton.ts","webpack://superset/./packages/superset-ui-core/src/components/SafeMarkdown.tsx","webpack://superset/./packages/superset-ui-core/src/query/DatasourceKey.ts","webpack://superset/./packages/superset-ui-core/src/query/buildQueryContext.ts","webpack://superset/./packages/superset-ui-core/src/query/processFilters.ts","webpack://superset/./packages/superset-ui-core/src/query/buildQueryObject.ts","webpack://superset/./packages/superset-ui-core/src/query/extractExtras.ts","webpack://superset/./packages/superset-ui-core/src/query/processExtraFormData.ts","webpack://superset/./packages/superset-ui-core/src/query/constants.ts","webpack://superset/./packages/superset-ui-core/src/query/convertFilter.ts","webpack://superset/./packages/superset-ui-core/src/query/extractQueryFields.ts","webpack://superset/./packages/superset-ui-core/src/query/getColumnLabel.ts","webpack://superset/./packages/superset-ui-core/src/query/getMetricLabel.ts","webpack://superset/./packages/superset-ui-core/src/query/getXAxis.ts","webpack://superset/./packages/superset-ui-core/src/query/normalizeTimeColumn.ts","webpack://superset/./packages/superset-ui-core/src/query/types/Column.ts","webpack://superset/./packages/superset-ui-core/src/query/types/Datasource.ts","webpack://superset/./packages/superset-ui-core/src/query/types/Filter.ts","webpack://superset/./packages/superset-ui-core/src/query/types/Metric.ts","webpack://superset/./packages/superset-ui-core/src/query/types/Operator.ts","webpack://superset/./packages/superset-ui-core/src/query/types/QueryFormData.ts","webpack://superset/./packages/superset-ui-core/src/utils/featureFlags.ts","webpack://superset/./packages/superset-ui-core/src/utils/isDefined.ts","webpack://superset/./packages/superset-ui-core/src/utils/removeDuplicates.ts","webpack://superset/./src/SqlLab/components/SaveDatasetModal/index.tsx","webpack://superset/./src/SqlLab/constants.ts","webpack://superset/./src/SqlLab/types.ts","webpack://superset/./src/SqlLab/utils/sqlKeywords.ts","webpack://superset/./src/components/Alert/index.tsx","webpack://superset/./src/components/AsyncAceEditor/index.tsx","webpack://superset/./src/components/AsyncEsmComponent/index.tsx","webpack://superset/./src/components/Collapse/index.tsx","webpack://superset/./src/components/EmptyState/index.tsx","webpack://superset/./src/components/ErrorMessage/ErrorMessageWithStackTrace.tsx","webpack://superset/./src/components/Form/FormItem.tsx","webpack://superset/./src/components/Form/FormLabel.tsx","webpack://superset/./src/assets/images/icons/error.svg?d566","webpack://superset/./src/components/Form/LabeledErrorBoundInput.tsx","webpack://superset/./src/components/Form/Form.tsx","webpack://superset/./src/components/InfoTooltip/index.tsx","webpack://superset/./src/components/Input/index.tsx","webpack://superset/./src/components/Menu/index.tsx","webpack://superset/./src/components/ModalTrigger/index.tsx","webpack://superset/./src/components/Radio/index.tsx","webpack://superset/./src/components/WarningIconWithTooltip/index.tsx","webpack://superset/./src/dashboard/util/constants.ts","webpack://superset/./src/explore/constants.ts","webpack://superset/./src/explore/exploreUtils/formData.ts","webpack://superset/./src/hooks/apiResources/apiResources.ts","webpack://superset/./src/hooks/usePrevious/usePrevious.ts","webpack://superset/./src/logger/LogUtils.ts","webpack://superset/./src/logger/actions/index.ts","webpack://superset/./src/utils/localStorageHelpers.ts","webpack://superset/./src/utils/safeStringify.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { t } from '@superset-ui/core';\nimport { QueryEditor } from '../types';\n\nconst untitledQueryRegex = /^Untitled Query (\\d+)$/; // Literal notation isn't recompiled\nconst untitledQuery = 'Untitled Query ';\n\nexport const newQueryTabName = (\n  queryEditors: QueryEditor[],\n  initialTitle = `${untitledQuery}1`,\n): string => {\n  const resultTitle = t(initialTitle);\n\n  if (queryEditors.length > 0) {\n    const mappedUntitled = queryEditors.filter(qe =>\n      qe.name?.match(untitledQueryRegex),\n    );\n    const untitledQueryNumbers = mappedUntitled.map(\n      qe => +qe.name.replace(untitledQuery, ''),\n    );\n    if (untitledQueryNumbers.length > 0) {\n      // When there are query tabs open, and at least one is called \"Untitled Query #\"\n      // Where # is a valid number\n      const largestNumber: number = Math.max(...untitledQueryNumbers);\n      return t('%s%s', untitledQuery, largestNumber + 1);\n    }\n    return resultTitle;\n  }\n\n  return resultTitle;\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport shortid from 'shortid';\nimport rison from 'rison';\nimport { SupersetClient, t } from '@superset-ui/core';\nimport invert from 'lodash/invert';\nimport mapKeys from 'lodash/mapKeys';\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\n\nimport { now } from 'src/utils/dates';\nimport {\n  addDangerToast as addDangerToastAction,\n  addInfoToast as addInfoToastAction,\n  addSuccessToast as addSuccessToastAction,\n  addWarningToast as addWarningToastAction,\n} from 'src/components/MessageToasts/actions';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport COMMON_ERR_MESSAGES from 'src/utils/errorMessages';\nimport { newQueryTabName } from '../utils/newQueryTabName';\n\nexport const RESET_STATE = 'RESET_STATE';\nexport const ADD_QUERY_EDITOR = 'ADD_QUERY_EDITOR';\nexport const UPDATE_QUERY_EDITOR = 'UPDATE_QUERY_EDITOR';\nexport const QUERY_EDITOR_SAVED = 'QUERY_EDITOR_SAVED';\nexport const CLONE_QUERY_TO_NEW_TAB = 'CLONE_QUERY_TO_NEW_TAB';\nexport const REMOVE_QUERY_EDITOR = 'REMOVE_QUERY_EDITOR';\nexport const MERGE_TABLE = 'MERGE_TABLE';\nexport const REMOVE_TABLES = 'REMOVE_TABLES';\nexport const END_QUERY = 'END_QUERY';\nexport const REMOVE_QUERY = 'REMOVE_QUERY';\nexport const EXPAND_TABLE = 'EXPAND_TABLE';\nexport const COLLAPSE_TABLE = 'COLLAPSE_TABLE';\nexport const QUERY_EDITOR_SETDB = 'QUERY_EDITOR_SETDB';\nexport const QUERY_EDITOR_SET_SCHEMA = 'QUERY_EDITOR_SET_SCHEMA';\nexport const QUERY_EDITOR_SET_SCHEMA_OPTIONS =\n  'QUERY_EDITOR_SET_SCHEMA_OPTIONS';\nexport const QUERY_EDITOR_SET_TABLE_OPTIONS = 'QUERY_EDITOR_SET_TABLE_OPTIONS';\nexport const QUERY_EDITOR_SET_TITLE = 'QUERY_EDITOR_SET_TITLE';\nexport const QUERY_EDITOR_SET_AUTORUN = 'QUERY_EDITOR_SET_AUTORUN';\nexport const QUERY_EDITOR_SET_SQL = 'QUERY_EDITOR_SET_SQL';\nexport const QUERY_EDITOR_SET_QUERY_LIMIT = 'QUERY_EDITOR_SET_QUERY_LIMIT';\nexport const QUERY_EDITOR_SET_TEMPLATE_PARAMS =\n  'QUERY_EDITOR_SET_TEMPLATE_PARAMS';\nexport const QUERY_EDITOR_SET_SELECTED_TEXT = 'QUERY_EDITOR_SET_SELECTED_TEXT';\nexport const QUERY_EDITOR_SET_FUNCTION_NAMES =\n  'QUERY_EDITOR_SET_FUNCTION_NAMES';\nexport const QUERY_EDITOR_PERSIST_HEIGHT = 'QUERY_EDITOR_PERSIST_HEIGHT';\nexport const QUERY_EDITOR_TOGGLE_LEFT_BAR = 'QUERY_EDITOR_TOGGLE_LEFT_BAR';\nexport const MIGRATE_QUERY_EDITOR = 'MIGRATE_QUERY_EDITOR';\nexport const MIGRATE_TAB_HISTORY = 'MIGRATE_TAB_HISTORY';\nexport const MIGRATE_TABLE = 'MIGRATE_TABLE';\nexport const MIGRATE_QUERY = 'MIGRATE_QUERY';\n\nexport const SET_DATABASES = 'SET_DATABASES';\nexport const SET_ACTIVE_QUERY_EDITOR = 'SET_ACTIVE_QUERY_EDITOR';\nexport const LOAD_QUERY_EDITOR = 'LOAD_QUERY_EDITOR';\nexport const SET_TABLES = 'SET_TABLES';\nexport const SET_ACTIVE_SOUTHPANE_TAB = 'SET_ACTIVE_SOUTHPANE_TAB';\nexport const REFRESH_QUERIES = 'REFRESH_QUERIES';\nexport const SET_USER_OFFLINE = 'SET_USER_OFFLINE';\nexport const RUN_QUERY = 'RUN_QUERY';\nexport const START_QUERY = 'START_QUERY';\nexport const STOP_QUERY = 'STOP_QUERY';\nexport const REQUEST_QUERY_RESULTS = 'REQUEST_QUERY_RESULTS';\nexport const QUERY_SUCCESS = 'QUERY_SUCCESS';\nexport const QUERY_FAILED = 'QUERY_FAILED';\nexport const CLEAR_QUERY_RESULTS = 'CLEAR_QUERY_RESULTS';\nexport const REMOVE_DATA_PREVIEW = 'REMOVE_DATA_PREVIEW';\nexport const CHANGE_DATA_PREVIEW_ID = 'CHANGE_DATA_PREVIEW_ID';\n\nexport const START_QUERY_VALIDATION = 'START_QUERY_VALIDATION';\nexport const QUERY_VALIDATION_RETURNED = 'QUERY_VALIDATION_RETURNED';\nexport const QUERY_VALIDATION_FAILED = 'QUERY_VALIDATION_FAILED';\nexport const COST_ESTIMATE_STARTED = 'COST_ESTIMATE_STARTED';\nexport const COST_ESTIMATE_RETURNED = 'COST_ESTIMATE_RETURNED';\nexport const COST_ESTIMATE_FAILED = 'COST_ESTIMATE_FAILED';\n\nexport const CREATE_DATASOURCE_STARTED = 'CREATE_DATASOURCE_STARTED';\nexport const CREATE_DATASOURCE_SUCCESS = 'CREATE_DATASOURCE_SUCCESS';\nexport const CREATE_DATASOURCE_FAILED = 'CREATE_DATASOURCE_FAILED';\n\nexport const addInfoToast = addInfoToastAction;\nexport const addSuccessToast = addSuccessToastAction;\nexport const addDangerToast = addDangerToastAction;\nexport const addWarningToast = addWarningToastAction;\n\nexport const CtasEnum = {\n  TABLE: 'TABLE',\n  VIEW: 'VIEW',\n};\nconst ERR_MSG_CANT_LOAD_QUERY = t(\"The query couldn't be loaded\");\n\n// a map of SavedQuery field names to the different names used client-side,\n// because for now making the names consistent is too complicated\n// so it might as well only happen in one place\nconst queryClientMapping = {\n  id: 'remoteId',\n  db_id: 'dbId',\n  label: 'name',\n  template_parameters: 'templateParams',\n};\nconst queryServerMapping = invert(queryClientMapping);\n\n// uses a mapping like those above to convert object key names to another style\nconst fieldConverter = mapping => obj =>\n  mapKeys(obj, (value, key) => (key in mapping ? mapping[key] : key));\n\nexport const convertQueryToServer = fieldConverter(queryServerMapping);\nexport const convertQueryToClient = fieldConverter(queryClientMapping);\n\nexport function getUpToDateQuery(rootState, queryEditor, key) {\n  const {\n    sqlLab: { unsavedQueryEditor },\n  } = rootState;\n  const id = key ?? queryEditor.id;\n  return {\n    ...queryEditor,\n    ...(id === unsavedQueryEditor.id && unsavedQueryEditor),\n  };\n}\n\nexport function resetState() {\n  return { type: RESET_STATE };\n}\n\nexport function startQueryValidation(query) {\n  Object.assign(query, {\n    id: query.id ? query.id : shortid.generate(),\n  });\n  return { type: START_QUERY_VALIDATION, query };\n}\n\nexport function queryValidationReturned(query, results) {\n  return { type: QUERY_VALIDATION_RETURNED, query, results };\n}\n\nexport function queryValidationFailed(query, message, error) {\n  return { type: QUERY_VALIDATION_FAILED, query, message, error };\n}\n\nexport function updateQueryEditor(alterations) {\n  return { type: UPDATE_QUERY_EDITOR, alterations };\n}\n\nexport function scheduleQuery(query) {\n  return dispatch =>\n    SupersetClient.post({\n      endpoint: '/savedqueryviewapi/api/create',\n      postPayload: query,\n      stringify: false,\n    })\n      .then(() =>\n        dispatch(\n          addSuccessToast(\n            t(\n              'Your query has been scheduled. To see details of your query, navigate to Saved queries',\n            ),\n          ),\n        ),\n      )\n      .catch(() =>\n        dispatch(addDangerToast(t('Your query could not be scheduled'))),\n      );\n}\n\nexport function estimateQueryCost(queryEditor) {\n  return (dispatch, getState) => {\n    const { dbId, schema, sql, selectedText, templateParams } =\n      getUpToDateQuery(getState(), queryEditor);\n    const requestSql = selectedText || sql;\n    const endpoint =\n      schema === null\n        ? `/superset/estimate_query_cost/${dbId}/`\n        : `/superset/estimate_query_cost/${dbId}/${schema}/`;\n    return Promise.all([\n      dispatch({ type: COST_ESTIMATE_STARTED, query: queryEditor }),\n      SupersetClient.post({\n        endpoint,\n        postPayload: {\n          sql: requestSql,\n          templateParams: JSON.parse(templateParams || '{}'),\n        },\n      })\n        .then(({ json }) =>\n          dispatch({ type: COST_ESTIMATE_RETURNED, query: queryEditor, json }),\n        )\n        .catch(response =>\n          getClientErrorObject(response).then(error => {\n            const message =\n              error.error ||\n              error.statusText ||\n              t('Failed at retrieving results');\n            return dispatch({\n              type: COST_ESTIMATE_FAILED,\n              query: queryEditor,\n              error: message,\n            });\n          }),\n        ),\n    ]);\n  };\n}\n\nexport function startQuery(query) {\n  Object.assign(query, {\n    id: query.id ? query.id : shortid.generate(),\n    progress: 0,\n    startDttm: now(),\n    state: query.runAsync ? 'pending' : 'running',\n    cached: false,\n  });\n  return { type: START_QUERY, query };\n}\n\nexport function querySuccess(query, results) {\n  return function (dispatch) {\n    const sqlEditorId = results?.query?.sqlEditorId;\n    const sync =\n      sqlEditorId &&\n      !query.isDataPreview &&\n      isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n        ? SupersetClient.put({\n            endpoint: encodeURI(`/tabstateview/${sqlEditorId}`),\n            postPayload: { latest_query_id: query.id },\n          })\n        : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: QUERY_SUCCESS, query, results }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while storing the latest query id in the backend. ' +\n                'Please contact your administrator if this problem persists.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryFailed(query, msg, link, errors) {\n  return function (dispatch) {\n    const sync =\n      !query.isDataPreview &&\n      isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n        ? SupersetClient.put({\n            endpoint: encodeURI(`/tabstateview/${query.sqlEditorId}`),\n            postPayload: { latest_query_id: query.id },\n          })\n        : Promise.resolve();\n\n    return (\n      sync\n        .catch(() =>\n          dispatch(\n            addDangerToast(\n              t(\n                'An error occurred while storing the latest query id in the backend. ' +\n                  'Please contact your administrator if this problem persists.',\n              ),\n            ),\n          ),\n        )\n        // We should always show the error message, even if we couldn't sync the\n        // state to the backend\n        .then(() => dispatch({ type: QUERY_FAILED, query, msg, link, errors }))\n    );\n  };\n}\n\nexport function stopQuery(query) {\n  return { type: STOP_QUERY, query };\n}\n\nexport function clearQueryResults(query) {\n  return { type: CLEAR_QUERY_RESULTS, query };\n}\n\nexport function removeDataPreview(table) {\n  return { type: REMOVE_DATA_PREVIEW, table };\n}\n\nexport function requestQueryResults(query) {\n  return { type: REQUEST_QUERY_RESULTS, query };\n}\n\nexport function fetchQueryResults(query, displayLimit) {\n  return function (dispatch) {\n    dispatch(requestQueryResults(query));\n\n    const queryParams = rison.encode({\n      key: query.resultsKey,\n      rows: displayLimit || null,\n    });\n\n    return SupersetClient.get({\n      endpoint: `/api/v1/sqllab/results/?q=${queryParams}`,\n      parseMethod: 'json-bigint',\n    })\n      .then(({ json }) => dispatch(querySuccess(query, json)))\n      .catch(response =>\n        getClientErrorObject(response).then(error => {\n          const message =\n            error.error ||\n            error.statusText ||\n            t('Failed at retrieving results');\n\n          return dispatch(\n            queryFailed(query, message, error.link, error.errors),\n          );\n        }),\n      );\n  };\n}\n\nexport function runQuery(query) {\n  return function (dispatch) {\n    dispatch(startQuery(query));\n    const postPayload = {\n      client_id: query.id,\n      database_id: query.dbId,\n      json: true,\n      runAsync: query.runAsync,\n      schema: query.schema,\n      sql: query.sql,\n      sql_editor_id: query.sqlEditorId,\n      tab: query.tab,\n      tmp_table_name: query.tempTable,\n      select_as_cta: query.ctas,\n      ctas_method: query.ctas_method,\n      templateParams: query.templateParams,\n      queryLimit: query.queryLimit,\n      expand_data: true,\n    };\n\n    const search = window.location.search || '';\n    return SupersetClient.post({\n      endpoint: `/api/v1/sqllab/execute/${search}`,\n      body: JSON.stringify(postPayload),\n      headers: { 'Content-Type': 'application/json' },\n      parseMethod: 'json-bigint',\n    })\n      .then(({ json }) => {\n        if (!query.runAsync) {\n          dispatch(querySuccess(query, json));\n        }\n      })\n      .catch(response =>\n        getClientErrorObject(response).then(error => {\n          let message =\n            error.error ||\n            error.message ||\n            error.statusText ||\n            t('Unknown error');\n          if (message.includes('CSRF token')) {\n            message = t(COMMON_ERR_MESSAGES.SESSION_TIMED_OUT);\n          }\n          dispatch(queryFailed(query, message, error.link, error.errors));\n        }),\n      );\n  };\n}\n\nexport function runQueryFromSqlEditor(\n  database,\n  queryEditor,\n  defaultQueryLimit,\n  tempTable,\n  ctas,\n  ctasMethod,\n) {\n  return function (dispatch, getState) {\n    const qe = getUpToDateQuery(getState(), queryEditor, queryEditor.id);\n    const query = {\n      dbId: qe.dbId,\n      sql: qe.selectedText || qe.sql,\n      sqlEditorId: qe.id,\n      tab: qe.name,\n      schema: qe.schema,\n      tempTable,\n      templateParams: qe.templateParams,\n      queryLimit: qe.queryLimit || defaultQueryLimit,\n      runAsync: database ? database.allow_run_async : false,\n      ctas,\n      ctas_method: ctasMethod,\n      updateTabState: !qe.selectedText,\n    };\n    dispatch(runQuery(query));\n  };\n}\n\nexport function reRunQuery(query) {\n  // run Query with a new id\n  return function (dispatch) {\n    dispatch(runQuery({ ...query, id: shortid.generate() }));\n  };\n}\n\nexport function validateQuery(queryEditor, sql) {\n  return function (dispatch, getState) {\n    const {\n      sqlLab: { unsavedQueryEditor },\n    } = getState();\n    const qe = {\n      ...queryEditor,\n      ...(queryEditor.id === unsavedQueryEditor.id && unsavedQueryEditor),\n    };\n\n    const query = {\n      dbId: qe.dbId,\n      sql,\n      sqlEditorId: qe.id,\n      schema: qe.schema,\n      templateParams: qe.templateParams,\n    };\n    dispatch(startQueryValidation(query));\n\n    const postPayload = {\n      schema: query.schema,\n      sql: query.sql,\n      template_params: query.templateParams,\n    };\n\n    return SupersetClient.post({\n      endpoint: `/api/v1/database/${query.dbId}/validate_sql/`,\n      body: JSON.stringify(postPayload),\n      headers: { 'Content-Type': 'application/json' },\n    })\n      .then(({ json }) => dispatch(queryValidationReturned(query, json.result)))\n      .catch(response =>\n        getClientErrorObject(response.result).then(error => {\n          let message = error.error || error.statusText || t('Unknown error');\n          if (message.includes('CSRF token')) {\n            message = t(COMMON_ERR_MESSAGES.SESSION_TIMED_OUT);\n          }\n          dispatch(queryValidationFailed(query, message, error));\n        }),\n      );\n  };\n}\n\nexport function postStopQuery(query) {\n  return function (dispatch) {\n    return SupersetClient.post({\n      endpoint: '/api/v1/query/stop',\n      body: JSON.stringify({ client_id: query.id }),\n      headers: { 'Content-Type': 'application/json' },\n    })\n      .then(() => dispatch(stopQuery(query)))\n      .then(() => dispatch(addSuccessToast(t('Query was stopped.'))))\n      .catch(() =>\n        dispatch(addDangerToast(t('Failed at stopping query. %s', query.id))),\n      );\n  };\n}\n\nexport function setDatabases(databases) {\n  return { type: SET_DATABASES, databases };\n}\n\nfunction migrateTable(table, queryEditorId, dispatch) {\n  return SupersetClient.post({\n    endpoint: encodeURI('/tableschemaview/'),\n    postPayload: { table: { ...table, queryEditorId } },\n  })\n    .then(({ json }) => {\n      const newTable = {\n        ...table,\n        id: json.id,\n        queryEditorId,\n      };\n      return dispatch({ type: MIGRATE_TABLE, oldTable: table, newTable });\n    })\n    .catch(() =>\n      dispatch(\n        addWarningToast(\n          t(\n            'Unable to migrate table schema state to backend. Superset will retry ' +\n              'later. Please contact your administrator if this problem persists.',\n          ),\n        ),\n      ),\n    );\n}\n\nfunction migrateQuery(queryId, queryEditorId, dispatch) {\n  return SupersetClient.post({\n    endpoint: encodeURI(`/tabstateview/${queryEditorId}/migrate_query`),\n    postPayload: { queryId },\n  })\n    .then(() => dispatch({ type: MIGRATE_QUERY, queryId, queryEditorId }))\n    .catch(() =>\n      dispatch(\n        addWarningToast(\n          t(\n            'Unable to migrate query state to backend. Superset will retry later. ' +\n              'Please contact your administrator if this problem persists.',\n          ),\n        ),\n      ),\n    );\n}\n\nexport function migrateQueryEditorFromLocalStorage(\n  queryEditor,\n  tables,\n  queries,\n) {\n  return function (dispatch) {\n    return SupersetClient.post({\n      endpoint: '/tabstateview/',\n      postPayload: { queryEditor },\n    })\n      .then(({ json }) => {\n        const newQueryEditor = {\n          ...queryEditor,\n          id: json.id.toString(),\n        };\n        dispatch({\n          type: MIGRATE_QUERY_EDITOR,\n          oldQueryEditor: queryEditor,\n          newQueryEditor,\n        });\n        dispatch({\n          type: MIGRATE_TAB_HISTORY,\n          oldId: queryEditor.id,\n          newId: newQueryEditor.id,\n        });\n        return Promise.all([\n          ...tables.map(table =>\n            migrateTable(table, newQueryEditor.id, dispatch),\n          ),\n          ...queries.map(query =>\n            migrateQuery(query.id, newQueryEditor.id, dispatch),\n          ),\n        ]);\n      })\n      .catch(() =>\n        dispatch(\n          addWarningToast(\n            t(\n              'Unable to migrate query editor state to backend. Superset will retry ' +\n                'later. Please contact your administrator if this problem persists.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function addQueryEditor(queryEditor) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.post({\n          endpoint: '/tabstateview/',\n          postPayload: { queryEditor },\n        })\n      : Promise.resolve({ json: { id: shortid.generate() } });\n\n    return sync\n      .then(({ json }) => {\n        const newQueryEditor = {\n          ...queryEditor,\n          id: json.id.toString(),\n        };\n        return dispatch({\n          type: ADD_QUERY_EDITOR,\n          queryEditor: newQueryEditor,\n        });\n      })\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'Unable to add a new tab to the backend. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function addNewQueryEditor() {\n  return function (dispatch, getState) {\n    const {\n      sqlLab: {\n        queryEditors,\n        tabHistory,\n        unsavedQueryEditor,\n        defaultDbId,\n        databases,\n      },\n      common,\n    } = getState();\n    const activeQueryEditor = queryEditors.find(\n      qe => qe.id === tabHistory[tabHistory.length - 1],\n    );\n    const dbIds = Object.values(databases).map(database => database.id);\n    const firstDbId = dbIds.length > 0 ? Math.min(...dbIds) : undefined;\n    const { dbId, schema, queryLimit, autorun } = {\n      ...queryEditors[0],\n      ...activeQueryEditor,\n      ...(unsavedQueryEditor.id === activeQueryEditor?.id &&\n        unsavedQueryEditor),\n    };\n    const warning = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? ''\n      : t(\n          '-- Note: Unless you save your query, these tabs will NOT persist if you clear your cookies or change browsers.\\n\\n',\n        );\n\n    const name = newQueryTabName(queryEditors || []);\n\n    return dispatch(\n      addQueryEditor({\n        dbId: dbId || defaultDbId || firstDbId,\n        schema: schema ?? null,\n        autorun: autorun ?? false,\n        sql: `${warning}SELECT ...`,\n        queryLimit: queryLimit || common.conf.DEFAULT_SQLLAB_LIMIT,\n        name,\n      }),\n    );\n  };\n}\n\nexport function cloneQueryToNewTab(query, autorun) {\n  return function (dispatch, getState) {\n    const state = getState();\n    const { queryEditors, tabHistory } = state.sqlLab;\n    const sourceQueryEditor = queryEditors.find(\n      qe => qe.id === tabHistory[tabHistory.length - 1],\n    );\n    const queryEditor = {\n      name: t('Copy of %s', sourceQueryEditor.name),\n      dbId: query.dbId ? query.dbId : null,\n      schema: query.schema ? query.schema : null,\n      autorun,\n      sql: query.sql,\n      queryLimit: sourceQueryEditor.queryLimit,\n      maxRow: sourceQueryEditor.maxRow,\n      templateParams: sourceQueryEditor.templateParams,\n    };\n    return dispatch(addQueryEditor(queryEditor));\n  };\n}\n\nexport function setActiveQueryEditor(queryEditor) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.post({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}/activate`),\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: SET_ACTIVE_QUERY_EDITOR, queryEditor }))\n      .catch(response => {\n        if (response.status !== 404) {\n          return dispatch(\n            addDangerToast(\n              t(\n                'An error occurred while setting the active tab. Please contact ' +\n                  'your administrator.',\n              ),\n            ),\n          );\n        }\n        return dispatch({ type: REMOVE_QUERY_EDITOR, queryEditor });\n      });\n  };\n}\n\nexport function loadQueryEditor(queryEditor) {\n  return { type: LOAD_QUERY_EDITOR, queryEditor };\n}\n\nexport function setTables(tableSchemas) {\n  const tables = tableSchemas\n    .filter(tableSchema => tableSchema.description !== null)\n    .map(tableSchema => {\n      const {\n        columns,\n        selectStar,\n        primaryKey,\n        foreignKeys,\n        indexes,\n        dataPreviewQueryId,\n      } = tableSchema.description;\n      return {\n        dbId: tableSchema.database_id,\n        queryEditorId: tableSchema.tab_state_id.toString(),\n        schema: tableSchema.schema,\n        name: tableSchema.table,\n        expanded: tableSchema.expanded,\n        id: tableSchema.id,\n        dataPreviewQueryId,\n        columns,\n        selectStar,\n        primaryKey,\n        foreignKeys,\n        indexes,\n        isMetadataLoading: false,\n        isExtraMetadataLoading: false,\n      };\n    });\n  return { type: SET_TABLES, tables };\n}\n\nexport function switchQueryEditor(queryEditor, displayLimit) {\n  return function (dispatch) {\n    if (\n      isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) &&\n      queryEditor &&\n      !queryEditor.loaded\n    ) {\n      SupersetClient.get({\n        endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n      })\n        .then(({ json }) => {\n          const loadedQueryEditor = {\n            id: json.id.toString(),\n            loaded: true,\n            name: json.label,\n            sql: json.sql,\n            selectedText: null,\n            latestQueryId: json.latest_query?.id,\n            autorun: json.autorun,\n            dbId: json.database_id,\n            templateParams: json.template_params,\n            schema: json.schema,\n            queryLimit: json.query_limit,\n            remoteId: json.saved_query?.id,\n            validationResult: {\n              id: null,\n              errors: [],\n              completed: false,\n            },\n            hideLeftBar: json.hide_left_bar,\n          };\n          dispatch(loadQueryEditor(loadedQueryEditor));\n          dispatch(setTables(json.table_schemas || []));\n          dispatch(setActiveQueryEditor(loadedQueryEditor));\n          if (json.latest_query && json.latest_query.resultsKey) {\n            dispatch(fetchQueryResults(json.latest_query, displayLimit));\n          }\n        })\n        .catch(response => {\n          if (response.status !== 404) {\n            return dispatch(\n              addDangerToast(t('An error occurred while fetching tab state')),\n            );\n          }\n          return dispatch({ type: REMOVE_QUERY_EDITOR, queryEditor });\n        });\n    } else {\n      dispatch(setActiveQueryEditor(queryEditor));\n    }\n  };\n}\n\nexport function setActiveSouthPaneTab(tabId) {\n  return { type: SET_ACTIVE_SOUTHPANE_TAB, tabId };\n}\n\nexport function toggleLeftBar(queryEditor) {\n  const hideLeftBar = !queryEditor.hideLeftBar;\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { hide_left_bar: hideLeftBar },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() =>\n        dispatch({\n          type: QUERY_EDITOR_TOGGLE_LEFT_BAR,\n          queryEditor,\n          hideLeftBar,\n        }),\n      )\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while hiding the left bar. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function removeQueryEditor(queryEditor) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.delete({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: REMOVE_QUERY_EDITOR, queryEditor }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while removing tab. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function removeAllOtherQueryEditors(queryEditor) {\n  return function (dispatch, getState) {\n    const { sqlLab } = getState();\n    sqlLab.queryEditors?.forEach(otherQueryEditor => {\n      if (otherQueryEditor.id !== queryEditor.id) {\n        dispatch(removeQueryEditor(otherQueryEditor));\n      }\n    });\n  };\n}\n\nexport function removeQuery(query) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.delete({\n          endpoint: encodeURI(\n            `/tabstateview/${query.sqlEditorId}/query/${query.id}`,\n          ),\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: REMOVE_QUERY, query }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while removing query. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetDb(queryEditor, dbId) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { database_id: dbId },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: QUERY_EDITOR_SETDB, queryEditor, dbId }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab database ID. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetSchema(queryEditor, schema) {\n  return function (dispatch) {\n    const sync =\n      isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) &&\n      typeof queryEditor === 'object'\n        ? SupersetClient.put({\n            endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n            postPayload: { schema },\n          })\n        : Promise.resolve();\n\n    return sync\n      .then(() =>\n        dispatch({\n          type: QUERY_EDITOR_SET_SCHEMA,\n          queryEditor: queryEditor || {},\n          schema,\n        }),\n      )\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab schema. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetSchemaOptions(queryEditor, options) {\n  return { type: QUERY_EDITOR_SET_SCHEMA_OPTIONS, queryEditor, options };\n}\n\nexport function queryEditorSetTableOptions(queryEditor, options) {\n  return { type: QUERY_EDITOR_SET_TABLE_OPTIONS, queryEditor, options };\n}\n\nexport function queryEditorSetAutorun(queryEditor, autorun) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { autorun },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() =>\n        dispatch({ type: QUERY_EDITOR_SET_AUTORUN, queryEditor, autorun }),\n      )\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab autorun. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetTitle(queryEditor, name, id) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${id}`),\n          postPayload: { label: name },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() =>\n        dispatch({\n          type: QUERY_EDITOR_SET_TITLE,\n          queryEditor: { ...queryEditor, id },\n          name,\n        }),\n      )\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab name. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function saveQuery(query, clientId) {\n  const { id, ...payload } = convertQueryToServer(query);\n\n  return dispatch =>\n    SupersetClient.post({\n      endpoint: '/api/v1/saved_query/',\n      jsonPayload: convertQueryToServer(payload),\n    })\n      .then(result => {\n        const savedQuery = convertQueryToClient({\n          id: result.json.id,\n          ...result.json.result,\n        });\n        dispatch({\n          type: QUERY_EDITOR_SAVED,\n          query,\n          clientId,\n          result: savedQuery,\n        });\n        dispatch(queryEditorSetTitle(query, query.name, clientId));\n        return savedQuery;\n      })\n      .catch(() =>\n        dispatch(addDangerToast(t('Your query could not be saved'))),\n      );\n}\n\nexport const addSavedQueryToTabState =\n  (queryEditor, savedQuery) => dispatch => {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: `/tabstateview/${queryEditor.id}`,\n          postPayload: { saved_query_id: savedQuery.remoteId },\n        })\n      : Promise.resolve();\n\n    return sync\n      .catch(() => {\n        dispatch(addDangerToast(t('Your query was not properly saved')));\n      })\n      .then(() => {\n        dispatch(addSuccessToast(t('Your query was saved')));\n      });\n  };\n\nexport function updateSavedQuery(query, clientId) {\n  const { id, ...payload } = convertQueryToServer(query);\n\n  return dispatch =>\n    SupersetClient.put({\n      endpoint: `/api/v1/saved_query/${query.remoteId}`,\n      jsonPayload: convertQueryToServer(payload),\n    })\n      .then(() => {\n        dispatch(addSuccessToast(t('Your query was updated')));\n        dispatch(queryEditorSetTitle(query, query.name, clientId));\n      })\n      .catch(e => {\n        const message = t('Your query could not be updated');\n        // eslint-disable-next-line no-console\n        console.error(message, e);\n        dispatch(addDangerToast(message));\n      })\n      .then(() => dispatch(updateQueryEditor(query)));\n}\n\nexport function queryEditorSetSql(queryEditor, sql) {\n  return { type: QUERY_EDITOR_SET_SQL, queryEditor, sql };\n}\n\nexport function queryEditorSetAndSaveSql(targetQueryEditor, sql) {\n  return function (dispatch, getState) {\n    const queryEditor = getUpToDateQuery(getState(), targetQueryEditor);\n    // saved query and set tab state use this action\n    dispatch(queryEditorSetSql(queryEditor, sql));\n    if (isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)) {\n      return SupersetClient.put({\n        endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n        postPayload: { sql, latest_query_id: queryEditor.latestQueryId },\n      }).catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while storing your query in the backend. To ' +\n                'avoid losing your changes, please save your query using the ' +\n                '\"Save Query\" button.',\n            ),\n          ),\n        ),\n      );\n    }\n    return Promise.resolve();\n  };\n}\n\nexport function queryEditorSetQueryLimit(queryEditor, queryLimit) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { query_limit: queryLimit },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() =>\n        dispatch({\n          type: QUERY_EDITOR_SET_QUERY_LIMIT,\n          queryEditor,\n          queryLimit,\n        }),\n      )\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab name. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetTemplateParams(queryEditor, templateParams) {\n  return function (dispatch) {\n    dispatch({\n      type: QUERY_EDITOR_SET_TEMPLATE_PARAMS,\n      queryEditor,\n      templateParams,\n    });\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { template_params: templateParams },\n        })\n      : Promise.resolve();\n\n    return sync.catch(() =>\n      dispatch(\n        addDangerToast(\n          t(\n            'An error occurred while setting the tab template parameters. ' +\n              'Please contact your administrator.',\n          ),\n        ),\n      ),\n    );\n  };\n}\n\nexport function queryEditorSetSelectedText(queryEditor, sql) {\n  return { type: QUERY_EDITOR_SET_SELECTED_TEXT, queryEditor, sql };\n}\n\nexport function mergeTable(table, query, prepend) {\n  return { type: MERGE_TABLE, table, query, prepend };\n}\n\nfunction getTableMetadata(table, query, dispatch) {\n  return SupersetClient.get({\n    endpoint: encodeURI(\n      `/api/v1/database/${query.dbId}/table/${encodeURIComponent(\n        table.name,\n      )}/${encodeURIComponent(table.schema)}/`,\n    ),\n  })\n    .then(({ json }) => {\n      const newTable = {\n        ...table,\n        ...json,\n        expanded: true,\n        isMetadataLoading: false,\n      };\n      dispatch(mergeTable(newTable)); // Merge table to tables in state\n      return newTable;\n    })\n    .catch(() =>\n      Promise.all([\n        dispatch(\n          mergeTable({\n            ...table,\n            isMetadataLoading: false,\n          }),\n        ),\n        dispatch(\n          addDangerToast(t('An error occurred while fetching table metadata')),\n        ),\n      ]),\n    );\n}\n\nfunction getTableExtendedMetadata(table, query, dispatch) {\n  return SupersetClient.get({\n    endpoint: encodeURI(\n      `/api/v1/database/${query.dbId}/table_extra/` +\n        `${encodeURIComponent(table.name)}/${encodeURIComponent(\n          table.schema,\n        )}/`,\n    ),\n  })\n    .then(({ json }) => {\n      dispatch(\n        mergeTable({ ...table, ...json, isExtraMetadataLoading: false }),\n      );\n      return json;\n    })\n    .catch(() =>\n      Promise.all([\n        dispatch(mergeTable({ ...table, isExtraMetadataLoading: false })),\n        dispatch(\n          addDangerToast(t('An error occurred while fetching table metadata')),\n        ),\n      ]),\n    );\n}\n\nexport function addTable(queryEditor, database, tableName, schemaName) {\n  return function (dispatch, getState) {\n    const query = getUpToDateQuery(getState(), queryEditor, queryEditor.id);\n    const table = {\n      dbId: query.dbId,\n      queryEditorId: query.id,\n      schema: schemaName,\n      name: tableName,\n    };\n    dispatch(\n      mergeTable(\n        {\n          ...table,\n          isMetadataLoading: true,\n          isExtraMetadataLoading: true,\n          expanded: true,\n        },\n        null,\n        true,\n      ),\n    );\n\n    return Promise.all([\n      getTableMetadata(table, query, dispatch),\n      getTableExtendedMetadata(table, query, dispatch),\n    ]).then(([newTable, json]) => {\n      const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n        ? SupersetClient.post({\n            endpoint: encodeURI('/tableschemaview/'),\n            postPayload: { table: { ...newTable, ...json } },\n          })\n        : Promise.resolve({ json: { id: shortid.generate() } });\n\n      if (!database.disable_data_preview && database.id === query.dbId) {\n        const dataPreviewQuery = {\n          id: shortid.generate(),\n          dbId: query.dbId,\n          sql: newTable.selectStar,\n          tableName: table.name,\n          sqlEditorId: null,\n          tab: '',\n          runAsync: database.allow_run_async,\n          ctas: false,\n          isDataPreview: true,\n        };\n        Promise.all([\n          dispatch(\n            mergeTable(\n              {\n                ...newTable,\n                dataPreviewQueryId: dataPreviewQuery.id,\n              },\n              dataPreviewQuery,\n            ),\n          ),\n          dispatch(runQuery(dataPreviewQuery)),\n        ]);\n      }\n\n      return sync\n        .then(({ json: resultJson }) =>\n          dispatch(mergeTable({ ...table, id: resultJson.id })),\n        )\n        .catch(() =>\n          dispatch(\n            addDangerToast(\n              t(\n                'An error occurred while fetching table metadata. ' +\n                  'Please contact your administrator.',\n              ),\n            ),\n          ),\n        );\n    });\n  };\n}\n\nexport function changeDataPreviewId(oldQueryId, newQuery) {\n  return { type: CHANGE_DATA_PREVIEW_ID, oldQueryId, newQuery };\n}\n\nexport function reFetchQueryResults(query) {\n  return function (dispatch) {\n    const newQuery = {\n      id: shortid.generate(),\n      dbId: query.dbId,\n      sql: query.sql,\n      tableName: query.tableName,\n      sqlEditorId: null,\n      tab: '',\n      runAsync: false,\n      ctas: false,\n      queryLimit: query.queryLimit,\n      isDataPreview: query.isDataPreview,\n    };\n    dispatch(runQuery(newQuery));\n    dispatch(changeDataPreviewId(query.id, newQuery));\n  };\n}\n\nexport function expandTable(table) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.post({\n          endpoint: encodeURI(`/tableschemaview/${table.id}/expanded`),\n          postPayload: { expanded: true },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: EXPAND_TABLE, table }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while expanding the table schema. ' +\n                'Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function collapseTable(table) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.post({\n          endpoint: encodeURI(`/tableschemaview/${table.id}/expanded`),\n          postPayload: { expanded: false },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: COLLAPSE_TABLE, table }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while collapsing the table schema. ' +\n                'Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function removeTables(tables) {\n  return function (dispatch) {\n    const tablesToRemove = tables?.filter(Boolean) ?? [];\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? Promise.all(\n          tablesToRemove.map(table =>\n            SupersetClient.delete({\n              endpoint: encodeURI(`/tableschemaview/${table.id}`),\n            }),\n          ),\n        )\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: REMOVE_TABLES, tables: tablesToRemove }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while removing the table schema. ' +\n                'Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function refreshQueries(alteredQueries) {\n  return { type: REFRESH_QUERIES, alteredQueries };\n}\n\nexport function setUserOffline(offline) {\n  return { type: SET_USER_OFFLINE, offline };\n}\n\nexport function persistEditorHeight(queryEditor, northPercent, southPercent) {\n  return {\n    type: QUERY_EDITOR_PERSIST_HEIGHT,\n    queryEditor,\n    northPercent,\n    southPercent,\n  };\n}\n\nexport function popStoredQuery(urlId) {\n  return function (dispatch) {\n    return SupersetClient.get({ endpoint: `/kv/${urlId}` })\n      .then(({ json }) =>\n        dispatch(\n          addQueryEditor({\n            name: json.name ? json.name : t('Shared query'),\n            dbId: json.dbId ? parseInt(json.dbId, 10) : null,\n            schema: json.schema ? json.schema : null,\n            autorun: json.autorun ? json.autorun : false,\n            sql: json.sql ? json.sql : 'SELECT ...',\n            templateParams: json.templateParams,\n          }),\n        ),\n      )\n      .catch(() => dispatch(addDangerToast(ERR_MSG_CANT_LOAD_QUERY)));\n  };\n}\nexport function popSavedQuery(saveQueryId) {\n  return function (dispatch) {\n    return SupersetClient.get({\n      endpoint: `/api/v1/saved_query/${saveQueryId}`,\n    })\n      .then(({ json }) => {\n        const queryEditorProps = {\n          ...convertQueryToClient(json.result),\n          dbId: json.result?.database?.id,\n          loaded: true,\n          autorun: false,\n        };\n        return dispatch(addQueryEditor(queryEditorProps));\n      })\n      .catch(() => dispatch(addDangerToast(ERR_MSG_CANT_LOAD_QUERY)));\n  };\n}\nexport function popQuery(queryId) {\n  return function (dispatch) {\n    return SupersetClient.get({\n      endpoint: `/api/v1/query/${queryId}`,\n    })\n      .then(({ json }) => {\n        const queryData = json.result;\n        const queryEditorProps = {\n          dbId: queryData.database.id,\n          schema: queryData.schema,\n          sql: queryData.sql,\n          name: t('Copy of %s', queryData.tab_name),\n          autorun: false,\n        };\n        return dispatch(addQueryEditor(queryEditorProps));\n      })\n      .catch(() => dispatch(addDangerToast(ERR_MSG_CANT_LOAD_QUERY)));\n  };\n}\nexport function popDatasourceQuery(datasourceKey, sql) {\n  return function (dispatch) {\n    const QUERY_TEXT = t('Query');\n    const datasetId = datasourceKey.split('__')[0];\n    return SupersetClient.get({\n      endpoint: `/api/v1/dataset/${datasetId}?q=(keys:!(none))`,\n    })\n      .then(({ json }) =>\n        dispatch(\n          addQueryEditor({\n            name: `${QUERY_TEXT} ${json.result.name}`,\n            dbId: json.result.database.id,\n            schema: json.result.schema,\n            autorun: sql !== undefined,\n            sql: sql || json.result.select_star,\n          }),\n        ),\n      )\n      .catch(() =>\n        dispatch(addDangerToast(t(\"The datasource couldn't be loaded\"))),\n      );\n  };\n}\nexport function createDatasourceStarted() {\n  return { type: CREATE_DATASOURCE_STARTED };\n}\nexport function createDatasourceSuccess(data) {\n  const datasource = `${data.table_id}__table`;\n  return { type: CREATE_DATASOURCE_SUCCESS, datasource };\n}\nexport function createDatasourceFailed(err) {\n  return { type: CREATE_DATASOURCE_FAILED, err };\n}\n\nexport function createDatasource(vizOptions) {\n  return dispatch => {\n    dispatch(createDatasourceStarted());\n    return SupersetClient.post({\n      endpoint: '/superset/sqllab_viz/',\n      postPayload: { data: vizOptions },\n    })\n      .then(({ json }) => {\n        dispatch(createDatasourceSuccess(json));\n\n        return Promise.resolve(json);\n      })\n      .catch(error => {\n        getClientErrorObject(error).then(e => {\n          dispatch(addDangerToast(e.error));\n        });\n        dispatch(\n          createDatasourceFailed(\n            t('An error occurred while creating the data source'),\n          ),\n        );\n\n        return Promise.reject();\n      });\n  };\n}\n\nexport function createCtasDatasource(vizOptions) {\n  return dispatch => {\n    dispatch(createDatasourceStarted());\n    return SupersetClient.post({\n      endpoint: '/api/v1/dataset/get_or_create/',\n      jsonPayload: vizOptions,\n    })\n      .then(({ json }) => {\n        dispatch(createDatasourceSuccess(json.result));\n\n        return json.result;\n      })\n      .catch(() => {\n        const errorMsg = t('An error occurred while creating the data source');\n        dispatch(createDatasourceFailed(errorMsg));\n        return Promise.reject(new Error(errorMsg));\n      });\n  };\n}\n\nexport function queryEditorSetFunctionNames(queryEditor, dbId) {\n  return function (dispatch) {\n    return SupersetClient.get({\n      endpoint: encodeURI(`/api/v1/database/${dbId}/function_names/`),\n    })\n      .then(({ json }) =>\n        dispatch({\n          type: QUERY_EDITOR_SET_FUNCTION_NAMES,\n          queryEditor,\n          functionNames: json.function_names,\n        }),\n      )\n      .catch(err => {\n        if (err.status === 404) {\n          // for databases that have been deleted, just reset the function names\n          dispatch({\n            type: QUERY_EDITOR_SET_FUNCTION_NAMES,\n            queryEditor,\n            functionNames: [],\n          });\n        } else {\n          dispatch(\n            addDangerToast(\n              t('An error occurred while fetching function names.'),\n            ),\n          );\n        }\n      });\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { useCallback, useEffect } from 'react';\n/* eslint camelcase: 0 */\nimport URI from 'urijs';\nimport {\n  buildQueryContext,\n  ensureIsArray,\n  getChartBuildQueryRegistry,\n  getChartMetadataRegistry,\n  SupersetClient,\n} from '@superset-ui/core';\nimport { availableDomains } from 'src/utils/hostNamesConfig';\nimport { safeStringify } from 'src/utils/safeStringify';\nimport { optionLabel } from 'src/utils/common';\nimport { URL_PARAMS } from 'src/constants';\nimport {\n  MULTI_OPERATORS,\n  OPERATOR_ENUM_TO_OPERATOR_TYPE,\n  UNSAVED_CHART_ID,\n} from 'src/explore/constants';\nimport { DashboardStandaloneMode } from 'src/dashboard/util/constants';\n\nexport function getChartKey(explore) {\n  const { slice, form_data } = explore;\n  return slice?.slice_id ?? form_data?.slice_id ?? UNSAVED_CHART_ID;\n}\n\nlet requestCounter = 0;\nexport function getHostName(allowDomainSharding = false) {\n  let currentIndex = 0;\n  if (allowDomainSharding) {\n    currentIndex = requestCounter % availableDomains.length;\n    requestCounter += 1;\n\n    // if domain sharding is enabled, skip main domain for fetching chart API\n    // leave main domain free for other calls like fav star, save change, etc.\n    // to make dashboard be responsive when it's loading large number of charts\n    if (currentIndex === 0) {\n      currentIndex += 1;\n      requestCounter += 1;\n    }\n  }\n  return availableDomains[currentIndex];\n}\n\nexport function getAnnotationJsonUrl(slice_id, force) {\n  if (slice_id === null || slice_id === undefined) {\n    return null;\n  }\n\n  const uri = URI(window.location.search);\n  return uri\n    .pathname('/api/v1/chart/data')\n    .search({\n      form_data: safeStringify({ slice_id }),\n      force,\n    })\n    .toString();\n}\n\nexport function getURIDirectory(endpointType = 'base') {\n  // Building the directory part of the URI\n  if (\n    ['full', 'json', 'csv', 'query', 'results', 'samples'].includes(\n      endpointType,\n    )\n  ) {\n    return '/superset/explore_json/';\n  }\n  return '/explore/';\n}\n\nexport function mountExploreUrl(endpointType, extraSearch = {}, force = false) {\n  const uri = new URI('/');\n  const directory = getURIDirectory(endpointType);\n  const search = uri.search(true);\n  Object.keys(extraSearch).forEach(key => {\n    search[key] = extraSearch[key];\n  });\n  if (endpointType === URL_PARAMS.standalone.name) {\n    if (force) {\n      search.force = '1';\n    }\n    search.standalone = DashboardStandaloneMode.HIDE_NAV;\n  }\n  return uri.directory(directory).search(search).toString();\n}\n\nexport function getChartDataUri({ path, qs, allowDomainSharding = false }) {\n  // The search params from the window.location are carried through,\n  // but can be specified with curUrl (used for unit tests to spoof\n  // the window.location).\n  let uri = new URI({\n    protocol: window.location.protocol.slice(0, -1),\n    hostname: getHostName(allowDomainSharding),\n    port: window.location.port ? window.location.port : '',\n    path,\n  });\n  if (qs) {\n    uri = uri.search(qs);\n  }\n  return uri;\n}\n\n/**\n * This gets the minimal url for the given form data.\n * If there are dashboard overrides present in the form data,\n * they will not be included in the url.\n */\nexport function getExploreUrl({\n  formData,\n  endpointType = 'base',\n  force = false,\n  curUrl = null,\n  requestParams = {},\n  allowDomainSharding = false,\n  method = 'POST',\n}) {\n  if (!formData.datasource) {\n    return null;\n  }\n\n  // label_colors should not pollute the URL\n  // eslint-disable-next-line no-param-reassign\n  delete formData.label_colors;\n\n  let uri = getChartDataUri({ path: '/', allowDomainSharding });\n  if (curUrl) {\n    uri = URI(URI(curUrl).search());\n  }\n\n  const directory = getURIDirectory(endpointType);\n\n  // Building the querystring (search) part of the URI\n  const search = uri.search(true);\n  const { slice_id, extra_filters, adhoc_filters, viz_type } = formData;\n  if (slice_id) {\n    const form_data = { slice_id };\n    if (method === 'GET') {\n      form_data.viz_type = viz_type;\n      if (extra_filters && extra_filters.length) {\n        form_data.extra_filters = extra_filters;\n      }\n      if (adhoc_filters && adhoc_filters.length) {\n        form_data.adhoc_filters = adhoc_filters;\n      }\n    }\n    search.form_data = safeStringify(form_data);\n  }\n  if (force) {\n    search.force = 'true';\n  }\n  if (endpointType === 'csv') {\n    search.csv = 'true';\n  }\n  if (endpointType === URL_PARAMS.standalone.name) {\n    search.standalone = '1';\n  }\n  if (endpointType === 'query') {\n    search.query = 'true';\n  }\n  if (endpointType === 'results') {\n    search.results = 'true';\n  }\n  if (endpointType === 'samples') {\n    search.samples = 'true';\n  }\n  const paramNames = Object.keys(requestParams);\n  if (paramNames.length) {\n    paramNames.forEach(name => {\n      if (requestParams.hasOwnProperty(name)) {\n        search[name] = requestParams[name];\n      }\n    });\n  }\n  return uri.search(search).directory(directory).toString();\n}\n\nexport const shouldUseLegacyApi = formData => {\n  const vizMetadata = getChartMetadataRegistry().get(formData.viz_type);\n  return vizMetadata ? vizMetadata.useLegacyApi : false;\n};\n\nexport const buildV1ChartDataPayload = ({\n  formData,\n  force,\n  resultFormat,\n  resultType,\n  setDataMask,\n  ownState,\n}) => {\n  const buildQuery =\n    getChartBuildQueryRegistry().get(formData.viz_type) ??\n    (buildQueryformData =>\n      buildQueryContext(buildQueryformData, baseQueryObject => [\n        {\n          ...baseQueryObject,\n        },\n      ]));\n  return buildQuery(\n    {\n      ...formData,\n      force,\n      result_format: resultFormat,\n      result_type: resultType,\n    },\n    {\n      ownState,\n      hooks: {\n        setDataMask,\n      },\n    },\n  );\n};\n\nexport const getLegacyEndpointType = ({ resultType, resultFormat }) =>\n  resultFormat === 'csv' ? resultFormat : resultType;\n\nexport const exportChart = ({\n  formData,\n  resultFormat = 'json',\n  resultType = 'full',\n  force = false,\n  ownState = {},\n}) => {\n  let url;\n  let payload;\n  if (shouldUseLegacyApi(formData)) {\n    const endpointType = getLegacyEndpointType({ resultFormat, resultType });\n    url = getExploreUrl({\n      formData,\n      endpointType,\n      allowDomainSharding: false,\n    });\n    payload = formData;\n  } else {\n    url = '/api/v1/chart/data';\n    payload = buildV1ChartDataPayload({\n      formData,\n      force,\n      resultFormat,\n      resultType,\n      ownState,\n    });\n  }\n\n  SupersetClient.postForm(url, { form_data: safeStringify(payload) });\n};\n\nexport const exploreChart = (formData, requestParams) => {\n  const url = getExploreUrl({\n    formData,\n    endpointType: 'base',\n    allowDomainSharding: false,\n    requestParams,\n  });\n  SupersetClient.postForm(url, { form_data: safeStringify(formData) });\n};\n\nexport const useDebouncedEffect = (effect, delay, deps) => {\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const callback = useCallback(effect, deps);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      callback();\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [callback, delay]);\n};\n\nexport const getSimpleSQLExpression = (subject, operator, comparator) => {\n  const isMulti =\n    [...MULTI_OPERATORS]\n      .map(op => OPERATOR_ENUM_TO_OPERATOR_TYPE[op].operation)\n      .indexOf(operator) >= 0;\n  let expression = subject ?? '';\n  if (subject && operator) {\n    expression += ` ${operator}`;\n    const firstValue =\n      isMulti && Array.isArray(comparator) ? comparator[0] : comparator;\n    const comparatorArray = ensureIsArray(comparator);\n    const isString =\n      firstValue !== undefined && Number.isNaN(Number(firstValue));\n    const quote = isString ? \"'\" : '';\n    const [prefix, suffix] = isMulti ? ['(', ')'] : ['', ''];\n    const formattedComparators = comparatorArray\n      .map(val => optionLabel(val))\n      .map(\n        val =>\n          `${quote}${isString ? String(val).replace(\"'\", \"''\") : val}${quote}`,\n      );\n    if (comparatorArray.length > 0) {\n      expression += ` ${prefix}${formattedComparators.join(', ')}${suffix}`;\n    }\n  }\n  return expression;\n};\n\nexport function formatSelectOptions(options) {\n  return options.map(opt => [opt, opt.toString()]);\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport const getDatasourceAsSaveableDataset = source => ({\n  columns: source.columns,\n  name: source?.datasource_name || source?.name || 'Untitled',\n  dbId: source?.database?.id || source?.dbId,\n  sql: source?.sql || '',\n  schema: source?.schema,\n});\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport moment from 'moment';\n\nexport const fDuration = function (t1, t2, format = 'HH:mm:ss.SS') {\n  const diffSec = t2 - t1;\n  const duration = moment(new Date(diffSec));\n  return duration.utc().format(format);\n};\n\nexport const now = function () {\n  // seconds from EPOCH as a float\n  return moment().utc().valueOf();\n};\n\nexport const epochTimeXHoursAgo = function (h) {\n  return moment().subtract(h, 'hours').utc().valueOf();\n};\n\nexport const epochTimeXDaysAgo = function (d) {\n  return moment().subtract(d, 'days').utc().valueOf();\n};\n\nexport const epochTimeXYearsAgo = function (y) {\n  return moment().subtract(y, 'years').utc().valueOf();\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  initFeatureFlags,\n  isFeatureEnabled,\n  FeatureFlag,\n} from 'src/featureFlags';\nimport getBootstrapData from './getBootstrapData';\n\nfunction getDomainsConfig() {\n  const appContainer = document.getElementById('app');\n  if (!appContainer) {\n    return [];\n  }\n\n  const availableDomains = new Set([window.location.hostname]);\n\n  // don't do domain sharding if a certain query param is set\n  const disableDomainSharding =\n    new URLSearchParams(window.location.search).get('disableDomainSharding') ===\n    '1';\n  if (disableDomainSharding) {\n    return Array.from(availableDomains);\n  }\n\n  const bootstrapData = getBootstrapData();\n  // this module is a little special, it may be loaded before index.jsx,\n  // where window.featureFlags get initialized\n  // eslint-disable-next-line camelcase\n  initFeatureFlags(bootstrapData.common.feature_flags);\n\n  if (\n    isFeatureEnabled(FeatureFlag.ALLOW_DASHBOARD_DOMAIN_SHARDING) &&\n    bootstrapData &&\n    bootstrapData.common &&\n    bootstrapData.common.conf &&\n    bootstrapData.common.conf.SUPERSET_WEBSERVER_DOMAINS\n  ) {\n    bootstrapData.common.conf.SUPERSET_WEBSERVER_DOMAINS.forEach(hostName => {\n      availableDomains.add(hostName);\n    });\n  }\n  return Array.from(availableDomains);\n}\n\nexport const availableDomains = getDomainsConfig();\n\nexport const allowCrossDomain = availableDomains.length > 1;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { CSSProperties } from 'react';\nimport { kebabCase } from 'lodash';\nimport { TooltipPlacement } from 'antd/lib/tooltip';\nimport { t } from '@superset-ui/core';\nimport { Tooltip, TooltipProps } from './Tooltip';\n\nexport interface InfoTooltipWithTriggerProps {\n  label?: string;\n  tooltip?: TooltipProps['title'];\n  icon?: string;\n  onClick?: () => void;\n  placement?: TooltipPlacement;\n  bsStyle?: string;\n  className?: string;\n  iconsStyle?: CSSProperties;\n}\n\nexport function InfoTooltipWithTrigger({\n  label,\n  tooltip,\n  bsStyle,\n  onClick,\n  icon = 'info-circle',\n  className = 'text-muted',\n  placement = 'right',\n  iconsStyle = {},\n}: InfoTooltipWithTriggerProps) {\n  const iconClass = `fa fa-${icon} ${className} ${\n    bsStyle ? `text-${bsStyle}` : ''\n  }`;\n  const iconEl = (\n    <i\n      role=\"button\"\n      aria-label={t('Show info tooltip')}\n      tabIndex={0}\n      className={iconClass}\n      style={{ cursor: onClick ? 'pointer' : undefined, ...iconsStyle }}\n      onClick={onClick}\n      onKeyPress={\n        onClick &&\n        (event => {\n          if (event.key === 'Enter' || event.key === ' ') {\n            onClick();\n          }\n        })\n      }\n    />\n  );\n  if (!tooltip) {\n    return iconEl;\n  }\n  return (\n    <Tooltip\n      id={`${kebabCase(label)}-tooltip`}\n      title={tooltip}\n      placement={placement}\n    >\n      {iconEl}\n    </Tooltip>\n  );\n}\n\nexport default InfoTooltipWithTrigger;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport { useTheme, css } from '@superset-ui/core';\nimport { Tooltip as BaseTooltip } from 'antd';\nimport type { TooltipProps } from 'antd/lib/tooltip';\nimport { Global } from '@emotion/react';\n\nexport type { TooltipProps } from 'antd/lib/tooltip';\n\nexport const Tooltip = ({ overlayStyle, color, ...props }: TooltipProps) => {\n  const theme = useTheme();\n  const defaultColor = `${theme.colors.grayscale.dark2}e6`;\n  return (\n    <>\n      {/* Safari hack to hide browser default tooltips */}\n      <Global\n        styles={css`\n          .ant-tooltip-open {\n            display: inline-block;\n            &::after {\n              content: '';\n              display: block;\n            }\n          }\n        `}\n      />\n      <BaseTooltip\n        overlayStyle={{\n          fontSize: theme.typography.sizes.s,\n          lineHeight: '1.6',\n          maxWidth: theme.gridUnit * 62,\n          minWidth: theme.gridUnit * 30,\n          ...overlayStyle,\n        }}\n        // make the tooltip display closer to the label\n        align={{ offset: [0, 1] }}\n        color={defaultColor || color}\n        trigger=\"hover\"\n        placement=\"bottom\"\n        // don't allow hovering over the tooltip\n        mouseLeaveDelay={0}\n        {...props}\n      />\n    </>\n  );\n};\n\nexport default Tooltip;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport {\n  Registry,\n  makeSingleton,\n  OverwritePolicy,\n  QueryContext,\n  SetDataMaskHook,\n  JsonObject,\n} from '../..';\n\n// Ideally this would be <T extends QueryFormData>\nexport type BuildQuery<T = any> = (\n  formData: T,\n  options?: {\n    extras?: {\n      cachedChanges?: any;\n    };\n    ownState?: JsonObject;\n    hooks?: {\n      setDataMask: SetDataMaskHook;\n      setCachedChanges: (newChanges: any) => void;\n    };\n  },\n) => QueryContext;\n\nclass ChartBuildQueryRegistry extends Registry<BuildQuery> {\n  constructor() {\n    super({ name: 'ChartBuildQuery', overwritePolicy: OverwritePolicy.WARN });\n  }\n}\n\nconst getInstance = makeSingleton(ChartBuildQueryRegistry);\n\nexport default getInstance;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { Registry, makeSingleton, OverwritePolicy } from '../..';\nimport ChartMetadata from '../models/ChartMetadata';\n\nclass ChartMetadataRegistry extends Registry<ChartMetadata, ChartMetadata> {\n  constructor() {\n    super({ name: 'ChartMetadata', overwritePolicy: OverwritePolicy.WARN });\n  }\n}\n\nconst getInstance = makeSingleton(ChartMetadataRegistry);\n\nexport default getInstance;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport rehypeSanitize, { defaultSchema } from 'rehype-sanitize';\nimport rehypeRaw from 'rehype-raw';\nimport { merge } from 'lodash';\nimport { FeatureFlag, isFeatureEnabled } from '../utils';\n\ninterface SafeMarkdownProps {\n  source: string;\n  htmlSanitization?: boolean;\n  htmlSchemaOverrides?: typeof defaultSchema;\n}\n\nfunction SafeMarkdown({\n  source,\n  htmlSanitization = true,\n  htmlSchemaOverrides = {},\n}: SafeMarkdownProps) {\n  const displayHtml = isFeatureEnabled(FeatureFlag.DISPLAY_MARKDOWN_HTML);\n  const escapeHtml = isFeatureEnabled(FeatureFlag.ESCAPE_MARKDOWN_HTML);\n\n  const rehypePlugins = useMemo(() => {\n    const rehypePlugins: any = [];\n    if (displayHtml && !escapeHtml) {\n      rehypePlugins.push(rehypeRaw);\n      if (htmlSanitization) {\n        const schema = merge(defaultSchema, htmlSchemaOverrides);\n        rehypePlugins.push([rehypeSanitize, schema]);\n      }\n    }\n    return rehypePlugins;\n  }, [displayHtml, escapeHtml, htmlSanitization, htmlSchemaOverrides]);\n\n  // React Markdown escapes HTML by default\n  return (\n    <ReactMarkdown rehypePlugins={rehypePlugins} skipHtml={!displayHtml}>\n      {source}\n    </ReactMarkdown>\n  );\n}\n\nexport default SafeMarkdown;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { DatasourceType } from './types/Datasource';\n\nexport default class DatasourceKey {\n  readonly id: number;\n\n  readonly type: DatasourceType;\n\n  constructor(key: string) {\n    const [idStr, typeStr] = key.split('__');\n    this.id = parseInt(idStr, 10);\n    this.type = DatasourceType.Table; // default to SqlaTable model\n    this.type = typeStr === 'query' ? DatasourceType.Query : this.type;\n  }\n\n  public toString() {\n    return `${this.id}__${this.type}`;\n  }\n\n  public toObject() {\n    return {\n      id: this.id,\n      type: this.type,\n    };\n  }\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport buildQueryObject from './buildQueryObject';\nimport DatasourceKey from './DatasourceKey';\nimport { QueryFieldAliases, QueryFormData } from './types/QueryFormData';\nimport { QueryContext, QueryObject } from './types/Query';\nimport { SetDataMaskHook } from '../chart';\nimport { JsonObject } from '../connection';\nimport { normalizeTimeColumn } from './normalizeTimeColumn';\nimport { isXAxisSet } from './getXAxis';\n\nconst WRAP_IN_ARRAY = (baseQueryObject: QueryObject) => [baseQueryObject];\n\nexport type BuildFinalQueryObjects = (\n  baseQueryObject: QueryObject,\n) => QueryObject[];\n\nexport default function buildQueryContext(\n  formData: QueryFormData,\n  options?:\n    | {\n        buildQuery?: BuildFinalQueryObjects;\n        queryFields?: QueryFieldAliases;\n        ownState?: JsonObject;\n        hooks?: { setDataMask: SetDataMaskHook };\n      }\n    | BuildFinalQueryObjects,\n): QueryContext {\n  const { queryFields, buildQuery = WRAP_IN_ARRAY } =\n    typeof options === 'function'\n      ? { buildQuery: options, queryFields: {} }\n      : options || {};\n  let queries = buildQuery(buildQueryObject(formData, queryFields));\n  // --- query mutator begin ---\n  // todo(Yongjie): move the query mutator into buildQueryObject instead of buildQueryContext\n  queries.forEach(query => {\n    if (Array.isArray(query.post_processing)) {\n      // eslint-disable-next-line no-param-reassign\n      query.post_processing = query.post_processing.filter(Boolean);\n    }\n  });\n  if (isXAxisSet(formData)) {\n    queries = queries.map(query => normalizeTimeColumn(formData, query));\n  }\n  // --- query mutator end ---\n  return {\n    datasource: new DatasourceKey(formData.datasource).toObject(),\n    force: formData.force || false,\n    queries,\n    form_data: formData,\n    result_format: formData.result_format || 'json',\n    result_type: formData.result_type || 'full',\n  };\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* eslint-disable camelcase */\nimport { QueryFormData } from './types/QueryFormData';\nimport { QueryObjectFilterClause } from './types/Query';\nimport { isSimpleAdhocFilter } from './types/Filter';\nimport convertFilter from './convertFilter';\n\nfunction sanitizeClause(clause: string): string {\n  let sanitizedClause = clause;\n  if (clause.includes('--')) {\n    sanitizedClause = `${clause}\\n`;\n  }\n  return `(${sanitizedClause})`;\n}\n\n/** Logic formerly in viz.py's process_query_filters */\nexport default function processFilters(\n  formData: Partial<QueryFormData>,\n): Partial<QueryFormData> {\n  // Split adhoc_filters into four fields according to\n  // (1) clause (WHERE or HAVING)\n  // (2) expressionType\n  //     2.1 SIMPLE (subject + operator + comparator)\n  //     2.2 SQL (freeform SQL expression))\n  const { adhoc_filters, extras = {}, filters = [], where } = formData;\n  const simpleWhere: QueryObjectFilterClause[] = filters;\n\n  const freeformWhere: string[] = [];\n  if (where) freeformWhere.push(where);\n  const freeformHaving: string[] = [];\n\n  (adhoc_filters || []).forEach(filter => {\n    const { clause } = filter;\n    if (isSimpleAdhocFilter(filter)) {\n      const filterClause = convertFilter(filter);\n      if (clause === 'WHERE') {\n        simpleWhere.push(filterClause);\n      }\n    } else {\n      const { sqlExpression } = filter;\n      if (clause === 'WHERE') {\n        freeformWhere.push(sqlExpression);\n      } else {\n        freeformHaving.push(sqlExpression);\n      }\n    }\n  });\n\n  // some filter-related fields need to go in `extras`\n  extras.having = freeformHaving.map(sanitizeClause).join(' AND ');\n  extras.where = freeformWhere.map(sanitizeClause).join(' AND ');\n\n  return {\n    filters: simpleWhere,\n    extras,\n  };\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* eslint-disable camelcase */\nimport {\n  AdhocFilter,\n  QueryObject,\n  QueryObjectFilterClause,\n  isQueryFormMetric,\n} from './types';\nimport {\n  QueryFieldAliases,\n  QueryFormMetric,\n  QueryFormData,\n} from './types/QueryFormData';\nimport processFilters from './processFilters';\nimport extractExtras from './extractExtras';\nimport extractQueryFields from './extractQueryFields';\nimport { overrideExtraFormData } from './processExtraFormData';\nimport { isDefined } from '../utils';\n\n/**\n * Build the common segments of all query objects (e.g. the granularity field derived from\n * either sql alchemy or druid). The segments specific to each viz type is constructed in the\n * buildQuery method for each viz type (see `wordcloud/buildQuery.ts` for an example).\n * Note the type of the formData argument passed in here is the type of the formData for a\n * specific viz, which is a subtype of the generic formData shared among all viz types.\n */\nexport default function buildQueryObject<T extends QueryFormData>(\n  formData: T,\n  queryFields?: QueryFieldAliases,\n): QueryObject {\n  const {\n    annotation_layers = [],\n    extra_form_data,\n    time_range,\n    since,\n    until,\n    row_limit,\n    row_offset,\n    order_desc,\n    limit,\n    timeseries_limit_metric,\n    granularity,\n    url_params = {},\n    custom_params = {},\n    series_columns,\n    series_limit,\n    series_limit_metric,\n    ...residualFormData\n  } = formData;\n  const {\n    adhoc_filters: appendAdhocFilters = [],\n    filters: appendFilters = [],\n    custom_form_data = {},\n    ...overrides\n  } = extra_form_data || {};\n\n  const numericRowLimit = Number(row_limit);\n  const numericRowOffset = Number(row_offset);\n  const { metrics, columns, orderby } = extractQueryFields(\n    residualFormData,\n    queryFields,\n  );\n\n  // collect all filters for conversion to simple filters/freeform clauses\n  const extras = extractExtras(formData);\n  const { filters: extraFilters } = extras;\n  const filterFormData: {\n    filters: QueryObjectFilterClause[];\n    adhoc_filters: AdhocFilter[];\n  } = {\n    filters: [...extraFilters, ...appendFilters],\n    adhoc_filters: [...(formData.adhoc_filters || []), ...appendAdhocFilters],\n  };\n  const extrasAndfilters = processFilters({\n    ...formData,\n    ...extras,\n    ...filterFormData,\n  });\n  const normalizeSeriesLimitMetric = (metric: QueryFormMetric | undefined) => {\n    if (isQueryFormMetric(metric)) {\n      return metric;\n    }\n    return undefined;\n  };\n\n  let queryObject: QueryObject = {\n    // fallback `null` to `undefined` so they won't be sent to the backend\n    // (JSON.stringify will ignore `undefined`.)\n    time_range: time_range || undefined,\n    since: since || undefined,\n    until: until || undefined,\n    granularity: granularity || undefined,\n    ...extras,\n    ...extrasAndfilters,\n    columns,\n    metrics,\n    orderby,\n    annotation_layers,\n    row_limit:\n      row_limit == null || Number.isNaN(numericRowLimit)\n        ? undefined\n        : numericRowLimit,\n    row_offset:\n      row_offset == null || Number.isNaN(numericRowOffset)\n        ? undefined\n        : numericRowOffset,\n    series_columns,\n    series_limit: series_limit ?? (isDefined(limit) ? Number(limit) : 0),\n    series_limit_metric:\n      normalizeSeriesLimitMetric(series_limit_metric) ??\n      timeseries_limit_metric ??\n      undefined,\n    order_desc: typeof order_desc === 'undefined' ? true : order_desc,\n    url_params: url_params || undefined,\n    custom_params,\n  };\n\n  // override extra form data used by native and cross filters\n  queryObject = overrideExtraFormData(queryObject, overrides);\n\n  return { ...queryObject, custom_form_data };\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* eslint-disable camelcase */\nimport { TimeGranularity, QueryFormData } from '@superset-ui/core';\nimport {\n  AppliedTimeExtras,\n  QueryObjectExtras,\n  QueryObjectFilterClause,\n  TimeColumnConfigKey,\n} from './types';\n\ntype ExtraFilterQueryField = {\n  time_range?: string;\n  granularity_sqla?: string;\n  time_grain_sqla?: TimeGranularity;\n  granularity?: string;\n};\n\ntype ExtractedExtra = ExtraFilterQueryField & {\n  filters: QueryObjectFilterClause[];\n  extras: QueryObjectExtras;\n  applied_time_extras: AppliedTimeExtras;\n};\n\nexport default function extractExtras(formData: QueryFormData): ExtractedExtra {\n  const applied_time_extras: AppliedTimeExtras = {};\n  const filters: QueryObjectFilterClause[] = [];\n  const extras: QueryObjectExtras = {};\n  const extract: ExtractedExtra = {\n    filters,\n    extras,\n    applied_time_extras,\n  };\n\n  const reservedColumnsToQueryField: Record<\n    TimeColumnConfigKey,\n    keyof ExtraFilterQueryField\n  > = {\n    __time_range: 'time_range',\n    __time_col: 'granularity_sqla',\n    __time_grain: 'time_grain_sqla',\n    __granularity: 'granularity',\n  };\n\n  (formData.extra_filters || []).forEach(filter => {\n    if (filter.col in reservedColumnsToQueryField) {\n      const key = filter.col as TimeColumnConfigKey;\n      const queryField = reservedColumnsToQueryField[key];\n      extract[queryField] = filter.val as TimeGranularity;\n      applied_time_extras[key] = filter.val as string;\n    } else {\n      filters.push(filter);\n    }\n  });\n\n  // SQL\n  extras.time_grain_sqla = extract.time_grain_sqla || formData.time_grain_sqla;\n  extract.granularity =\n    extract.granularity_sqla ||\n    formData.granularity ||\n    formData.granularity_sqla;\n  delete extract.granularity_sqla;\n  delete extract.time_grain_sqla;\n\n  return extract;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ExtraFormDataOverride, QueryObject } from './types';\nimport {\n  EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS,\n  EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS,\n} from './constants';\n\nexport function overrideExtraFormData(\n  queryObject: QueryObject,\n  overrideFormData: ExtraFormDataOverride,\n): QueryObject {\n  const overriddenFormData: QueryObject = { ...queryObject };\n  const { extras: overriddenExtras = {} } = overriddenFormData;\n  Object.entries(EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS).forEach(\n    ([key, target]) => {\n      const value = overrideFormData[key as keyof ExtraFormDataOverride];\n      if (value !== undefined) {\n        overriddenFormData[target] = value;\n      }\n    },\n  );\n  EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS.forEach(key => {\n    if (key in overrideFormData) {\n      // @ts-ignore\n      overriddenExtras[key] = overrideFormData[key];\n    }\n  });\n  if (Object.keys(overriddenExtras).length > 0) {\n    overriddenFormData.extras = overriddenExtras;\n  }\n  return overriddenFormData;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  ExtraFormDataAppend,\n  ExtraFormDataOverrideExtras,\n  ExtraFormDataOverrideRegular,\n  ExtraFormDataOverride,\n  QueryObject,\n} from './types';\n\nexport const DTTM_ALIAS = '__timestamp';\nexport const NO_TIME_RANGE = 'No filter';\n\nexport const EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS: (keyof ExtraFormDataOverrideExtras)[] =\n  ['relative_start', 'relative_end', 'time_grain_sqla'];\n\nexport const EXTRA_FORM_DATA_APPEND_KEYS: (keyof ExtraFormDataAppend)[] = [\n  'adhoc_filters',\n  'filters',\n  'interactive_groupby',\n  'interactive_highlight',\n  'interactive_drilldown',\n  'custom_form_data',\n];\n\nexport const EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS: Record<\n  keyof ExtraFormDataOverrideRegular,\n  keyof QueryObject\n> = {\n  granularity: 'granularity',\n  granularity_sqla: 'granularity',\n  time_column: 'time_column',\n  time_grain: 'time_grain',\n  time_range: 'time_range',\n};\n\nexport const EXTRA_FORM_DATA_OVERRIDE_REGULAR_KEYS = Object.keys(\n  EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS,\n) as (keyof ExtraFormDataOverrideRegular)[];\n\nexport const EXTRA_FORM_DATA_OVERRIDE_KEYS: (keyof ExtraFormDataOverride)[] = [\n  ...EXTRA_FORM_DATA_OVERRIDE_REGULAR_KEYS,\n  ...EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS,\n];\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport {\n  SimpleAdhocFilter,\n  isBinaryAdhocFilter,\n  isUnaryAdhocFilter,\n} from './types/Filter';\nimport { QueryObjectFilterClause } from './types/Query';\n\nexport default function convertFilter(\n  filter: SimpleAdhocFilter,\n): QueryObjectFilterClause {\n  const { subject } = filter;\n  if (isUnaryAdhocFilter(filter)) {\n    const { operator } = filter;\n\n    return {\n      col: subject,\n      op: operator,\n    };\n  }\n  if (isBinaryAdhocFilter(filter)) {\n    const { operator } = filter;\n\n    return {\n      col: subject,\n      op: operator,\n      val: filter.comparator,\n    };\n  }\n\n  const { operator } = filter;\n\n  return {\n    col: subject,\n    op: operator,\n    val: filter.comparator,\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t } from '../translation';\nimport { removeDuplicates } from '../utils';\nimport { DTTM_ALIAS } from './constants';\nimport getColumnLabel from './getColumnLabel';\nimport getMetricLabel from './getMetricLabel';\nimport {\n  QueryFields,\n  QueryFormColumn,\n  QueryFormMetric,\n  QueryFormOrderBy,\n  QueryFieldAliases,\n  FormDataResidual,\n  QueryMode,\n} from './types/QueryFormData';\n\n/**\n * Extra SQL query related fields from chart form data.\n * Consolidate field values into arrays.\n *\n * @param formData - the (partial) form data obtained from chart controls.\n * @param aliases - additional field aliases that maps arbitrary field names to\n *                  query field names.\n */\nexport default function extractQueryFields(\n  formData: FormDataResidual,\n  aliases?: QueryFieldAliases,\n): QueryFields {\n  const queryFieldAliases: QueryFieldAliases = {\n    /** These are predefined for backward compatibility */\n    metric: 'metrics',\n    metric_2: 'metrics',\n    secondary_metric: 'metrics',\n    x: 'metrics',\n    y: 'metrics',\n    size: 'metrics',\n    all_columns: 'columns',\n    series: 'groupby',\n    order_by_cols: 'orderby',\n    ...aliases,\n  };\n  const {\n    query_mode: queryMode,\n    include_time: includeTime,\n    ...restFormData\n  } = formData;\n\n  let columns: QueryFormColumn[] = [];\n  let metrics: QueryFormMetric[] = [];\n  let orderby: QueryFormOrderBy[] = [];\n\n  Object.entries(restFormData).forEach(([key, value]) => {\n    // ignore `null` or `undefined` value\n    if (value == null) {\n      return;\n    }\n\n    let normalizedKey: string = queryFieldAliases[key] || key;\n\n    // ignore columns when (specifically) in aggregate mode.\n    // For charts that support both aggregate and raw records mode,\n    // we store both `groupby` and `columns` in `formData`, so users can\n    // switch between modes while retaining the selected options for each.\n    if (queryMode === QueryMode.aggregate && normalizedKey === 'columns') {\n      return;\n    }\n\n    // for the same reason, ignore groupby and metrics in raw records mode\n    if (\n      queryMode === QueryMode.raw &&\n      (normalizedKey === 'groupby' || normalizedKey === 'metrics')\n    ) {\n      return;\n    }\n\n    // groupby has been deprecated in QueryObject: https://github.com/apache/superset/pull/9366\n    if (normalizedKey === 'groupby') {\n      normalizedKey = 'columns';\n    }\n\n    if (normalizedKey === 'metrics') {\n      metrics = metrics.concat(value);\n    } else if (normalizedKey === 'columns') {\n      // currently the columns field only accept pre-defined columns (string shortcut)\n      columns = columns.concat(value);\n    } else if (normalizedKey === 'orderby') {\n      orderby = orderby.concat(value);\n    }\n  });\n\n  if (includeTime && !columns.includes(DTTM_ALIAS)) {\n    columns.unshift(DTTM_ALIAS);\n  }\n\n  return {\n    columns: removeDuplicates(\n      columns.filter(col => col !== ''),\n      getColumnLabel,\n    ),\n    metrics:\n      queryMode === QueryMode.raw\n        ? undefined\n        : removeDuplicates(metrics, getMetricLabel),\n    orderby:\n      orderby.length > 0\n        ? orderby.map(item => {\n            // value can be in the format of `['[\"col1\", true]', '[\"col2\", false]'],\n            // where the option strings come directly from `order_by_choices`.\n            if (typeof item === 'string') {\n              try {\n                return JSON.parse(item);\n              } catch (error) {\n                throw new Error(t('Found invalid orderby options'));\n              }\n            }\n            return item;\n          })\n        : undefined,\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { isPhysicalColumn, QueryFormColumn } from './types';\n\nexport default function getColumnLabel(column: QueryFormColumn): string {\n  if (isPhysicalColumn(column)) {\n    return column;\n  }\n  if (column?.label) {\n    return column.label;\n  }\n  return column?.sqlExpression;\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { QueryFormMetric, isSavedMetric, isAdhocMetricSimple } from './types';\n\nexport default function getMetricLabel(metric: QueryFormMetric): string {\n  if (isSavedMetric(metric)) {\n    return metric;\n  }\n  if (metric.label) {\n    return metric.label;\n  }\n  if (isAdhocMetricSimple(metric)) {\n    return `${metric.aggregate}(${\n      metric.column.columnName || metric.column.column_name\n    })`;\n  }\n  return metric.sqlExpression;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  DTTM_ALIAS,\n  FeatureFlag,\n  isFeatureEnabled,\n  getColumnLabel,\n  isQueryFormColumn,\n  QueryFormData,\n  QueryFormColumn,\n  Optional,\n} from '@superset-ui/core';\n\nexport const isXAxisSet = (formData: QueryFormData) =>\n  isQueryFormColumn(formData.x_axis);\n\nexport const hasGenericChartAxes = isFeatureEnabled(\n  FeatureFlag.GENERIC_CHART_AXES,\n);\n\nexport const getXAxisColumn = (\n  formData: QueryFormData,\n): Optional<QueryFormColumn> => {\n  // The formData should be \"raw form_data\" -- the snake_case version of formData rather than camelCase.\n  if (!(formData.granularity_sqla || formData.x_axis)) {\n    return undefined;\n  }\n\n  if (isXAxisSet(formData)) {\n    return formData.x_axis;\n  }\n  return DTTM_ALIAS;\n};\n\nexport const getXAxisLabel = (formData: QueryFormData): Optional<string> => {\n  const col = getXAxisColumn(formData);\n  if (col) {\n    return getColumnLabel(col);\n  }\n  return undefined;\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport omit from 'lodash/omit';\n\nimport {\n  AdhocColumn,\n  isAdhocColumn,\n  isPhysicalColumn,\n  QueryFormColumn,\n  QueryFormData,\n  QueryObject,\n} from './types';\nimport { isXAxisSet } from './getXAxis';\n\nexport function normalizeTimeColumn(\n  formData: QueryFormData,\n  queryObject: QueryObject,\n): QueryObject {\n  // The formData should be \"raw form_data\" -- the snake_case version of formData rather than camelCase.\n  if (!isXAxisSet(formData)) {\n    return queryObject;\n  }\n\n  const { columns: _columns, extras: _extras } = queryObject;\n  const mutatedColumns: QueryFormColumn[] = [...(_columns || [])];\n  const axisIdx = _columns?.findIndex(\n    col =>\n      (isPhysicalColumn(col) &&\n        isPhysicalColumn(formData.x_axis) &&\n        col === formData.x_axis) ||\n      (isAdhocColumn(col) &&\n        isAdhocColumn(formData.x_axis) &&\n        col.sqlExpression === formData.x_axis.sqlExpression),\n  );\n  if (\n    axisIdx !== undefined &&\n    axisIdx > -1 &&\n    formData.x_axis &&\n    Array.isArray(_columns)\n  ) {\n    if (isAdhocColumn(_columns[axisIdx])) {\n      mutatedColumns[axisIdx] = {\n        timeGrain: _extras?.time_grain_sqla,\n        columnType: 'BASE_AXIS',\n        ...(_columns[axisIdx] as AdhocColumn),\n      };\n    } else {\n      mutatedColumns[axisIdx] = {\n        timeGrain: _extras?.time_grain_sqla,\n        columnType: 'BASE_AXIS',\n        sqlExpression: formData.x_axis,\n        label: formData.x_axis,\n        expressionType: 'SQL',\n      };\n    }\n\n    const newQueryObject = omit(queryObject, [\n      'extras.time_grain_sqla',\n      'is_timeseries',\n    ]);\n    newQueryObject.columns = mutatedColumns;\n\n    return newQueryObject;\n  }\n\n  // fallback, return original queryObject\n  return queryObject;\n}\n","/* eslint-disable camelcase */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { GenericDataType } from './QueryResponse';\nimport { QueryFormColumn } from './QueryFormData';\n\nexport interface AdhocColumn {\n  hasCustomLabel?: boolean;\n  label?: string;\n  optionName?: string;\n  sqlExpression: string;\n  expressionType: 'SQL';\n  columnType?: 'BASE_AXIS' | 'SERIES';\n  timeGrain?: string;\n  datasourceWarning?: boolean;\n}\n\n/**\n * A column that is physically defined in datasource.\n */\nexport type PhysicalColumn = string;\n\n/**\n * Column information defined in datasource.\n */\nexport interface Column {\n  id?: number;\n  type?: string;\n  type_generic?: GenericDataType;\n  column_name: string;\n  groupby?: boolean;\n  is_dttm?: boolean;\n  filterable?: boolean;\n  verbose_name?: string | null;\n  description?: string | null;\n  expression?: string | null;\n  database_expression?: string | null;\n  python_date_format?: string | null;\n\n  // used for advanced_data_type\n  optionName?: string;\n  filterBy?: string;\n  value?: string;\n  advanced_data_type?: string;\n}\n\nexport function isPhysicalColumn(column?: any): column is PhysicalColumn {\n  return typeof column === 'string';\n}\n\nexport function isAdhocColumn(column?: any): column is AdhocColumn {\n  return (\n    typeof column !== 'string' &&\n    column?.sqlExpression !== undefined &&\n    column?.label !== undefined &&\n    (column?.expressionType === undefined || column?.expressionType === 'SQL')\n  );\n}\n\nexport function isQueryFormColumn(column: any): column is QueryFormColumn {\n  return isPhysicalColumn(column) || isAdhocColumn(column);\n}\n\nexport default {};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Column } from './Column';\nimport { Metric } from './Metric';\n\nexport enum DatasourceType {\n  Table = 'table',\n  Query = 'query',\n  Dataset = 'dataset',\n  SlTable = 'sl_table',\n  SavedQuery = 'saved_query',\n}\n\n/**\n * Datasource metadata.\n */\nexport interface Datasource {\n  id: number;\n  name: string;\n  type: DatasourceType;\n  columns: Column[];\n  metrics: Metric[];\n  description?: string;\n  // key is column names (labels)\n  columnFormats?: {\n    [key: string]: string;\n  };\n  verboseMap?: {\n    [key: string]: string;\n  };\n}\n\nexport const DEFAULT_METRICS: Metric[] = [\n  {\n    metric_name: 'COUNT(*)',\n    expression: 'COUNT(*)',\n  },\n];\n\nexport default {};\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport {\n  UnaryOperator,\n  BinaryOperator,\n  SetOperator,\n  isUnaryOperator,\n  isBinaryOperator,\n  isSetOperator,\n} from './Operator';\nimport { TimeGranularity } from '../../time-format';\n\ninterface BaseSimpleAdhocFilter {\n  expressionType: 'SIMPLE';\n  clause: 'WHERE' | 'HAVING';\n  subject: string;\n  timeGrain?: TimeGranularity;\n  isExtra?: boolean;\n}\n\nexport type UnaryAdhocFilter = BaseSimpleAdhocFilter & {\n  operator: UnaryOperator;\n};\n\nexport type BinaryAdhocFilter = BaseSimpleAdhocFilter & {\n  operator: BinaryOperator;\n  comparator: string;\n};\n\nexport type SetAdhocFilter = BaseSimpleAdhocFilter & {\n  operator: SetOperator;\n  comparator: string[];\n};\n\nexport type SimpleAdhocFilter =\n  | UnaryAdhocFilter\n  | BinaryAdhocFilter\n  | SetAdhocFilter;\n\nexport interface FreeFormAdhocFilter {\n  expressionType: 'SQL';\n  clause: 'WHERE' | 'HAVING';\n  sqlExpression: string;\n}\n\nexport type AdhocFilter = SimpleAdhocFilter | FreeFormAdhocFilter;\n\n//---------------------------------------------------\n// Type guards\n//---------------------------------------------------\n\nexport function isSimpleAdhocFilter(\n  filter: AdhocFilter,\n): filter is SimpleAdhocFilter {\n  return filter.expressionType === 'SIMPLE';\n}\n\nexport function isFreeFormAdhocFilter(\n  filter: AdhocFilter,\n): filter is FreeFormAdhocFilter {\n  return filter.expressionType === 'SQL';\n}\n\nexport function isUnaryAdhocFilter(\n  filter: SimpleAdhocFilter,\n): filter is UnaryAdhocFilter {\n  return isUnaryOperator(filter.operator);\n}\n\nexport function isBinaryAdhocFilter(\n  filter: SimpleAdhocFilter,\n): filter is BinaryAdhocFilter {\n  return isBinaryOperator(filter.operator);\n}\n\nexport function isSetAdhocFilter(\n  filter: SimpleAdhocFilter,\n): filter is SetAdhocFilter {\n  return isSetOperator(filter.operator);\n}\n","/* eslint-disable camelcase */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Maybe, QueryFormMetric } from '../../types';\nimport { Column } from './Column';\n\nexport type Aggregate =\n  | 'AVG'\n  | 'COUNT'\n  | 'COUNT_DISTINCT'\n  | 'MAX'\n  | 'MIN'\n  | 'SUM';\n\nexport interface AdhocMetricBase {\n  hasCustomLabel?: boolean;\n  label?: string;\n  optionName?: string;\n}\n\nexport interface AdhocMetricSimple extends AdhocMetricBase {\n  expressionType: 'SIMPLE';\n  column: Omit<Column, 'column_name'> & {\n    column_name?: string;\n    columnName?: string;\n  };\n  aggregate: Aggregate;\n}\n\nexport interface AdhocMetricSQL extends AdhocMetricBase {\n  expressionType: 'SQL';\n  sqlExpression: string;\n}\n\nexport type AdhocMetric = AdhocMetricSimple | AdhocMetricSQL;\n\n/**\n * Select a predefined metric by its `metric_name`.\n */\nexport type SavedMetric = string;\n\n/**\n * Metric definition stored in datasource metadata.\n */\nexport interface Metric {\n  id?: number;\n  metric_name: string;\n  expression?: Maybe<string>;\n  certification_details?: Maybe<string>;\n  certified_by?: Maybe<string>;\n  d3format?: Maybe<string>;\n  description?: Maybe<string>;\n  is_certified?: boolean;\n  verbose_name?: string;\n  warning_markdown?: Maybe<string>;\n  warning_text?: Maybe<string>;\n}\n\nexport function isSavedMetric(metric: any): metric is SavedMetric {\n  return typeof metric === 'string';\n}\n\nexport function isAdhocMetricSimple(metric: any): metric is AdhocMetricSimple {\n  return typeof metric !== 'string' && metric?.expressionType === 'SIMPLE';\n}\n\nexport function isAdhocMetricSQL(metric: any): metric is AdhocMetricSQL {\n  return typeof metric !== 'string' && metric?.expressionType === 'SQL';\n}\n\nexport function isQueryFormMetric(metric: any): metric is QueryFormMetric {\n  return (\n    isSavedMetric(metric) ||\n    isAdhocMetricSimple(metric) ||\n    isAdhocMetricSQL(metric)\n  );\n}\n\nexport default {};\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/** List of operators that do not require another operand */\nconst UNARY_OPERATORS = ['IS NOT NULL', 'IS NULL'] as const;\n\n/** List of operators that require another operand that is a single value */\nconst BINARY_OPERATORS = [\n  '==',\n  '!=',\n  '>',\n  '<',\n  '>=',\n  '<=',\n  'ILIKE',\n  'LIKE',\n  'REGEX',\n  'TEMPORAL_RANGE',\n] as const;\n\n/** List of operators that require another operand that is a set */\nconst SET_OPERATORS = ['IN', 'NOT IN'] as const;\n\n//---------------------------------------------------\n// Derived types\n//---------------------------------------------------\n\n/** An operator that does not require another operand */\nexport type UnaryOperator = typeof UNARY_OPERATORS[number];\n\n/** An operator that requires another operand that is a single value */\nexport type BinaryOperator = typeof BINARY_OPERATORS[number];\n\n/** An operator that require another operand that is a set */\nexport type SetOperator = typeof SET_OPERATORS[number];\n\n//---------------------------------------------------\n// Type guards\n//---------------------------------------------------\n\nconst unaryOperatorSet = new Set<string>(UNARY_OPERATORS);\n\nexport function isUnaryOperator(operator: string): operator is UnaryOperator {\n  return unaryOperatorSet.has(operator);\n}\n\nconst binaryOperatorSet = new Set<string>(BINARY_OPERATORS);\n\nexport function isBinaryOperator(operator: string): operator is BinaryOperator {\n  return binaryOperatorSet.has(operator);\n}\n\nconst setOperatorSet = new Set<string>(SET_OPERATORS);\n\nexport function isSetOperator(operator: string): operator is SetOperator {\n  return setOperatorSet.has(operator);\n}\n","/* eslint-disable camelcase */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * Types for the final QueryContext sent to /api/v1/chart/data.\n */\nimport { AdhocMetric, SavedMetric } from './Metric';\nimport { AdhocFilter } from './Filter';\nimport { BinaryOperator, SetOperator } from './Operator';\nimport { AnnotationLayer } from './AnnotationLayer';\nimport {\n  QueryObject,\n  QueryObjectExtras,\n  QueryObjectFilterClause,\n} from './Query';\nimport { TimeRange } from './Time';\nimport { TimeGranularity } from '../../time-format';\nimport { JsonObject } from '../../connection';\nimport { AdhocColumn, PhysicalColumn } from './Column';\n\n/**\n * Metric definition/reference in query object.\n */\nexport type QueryFormMetric = SavedMetric | AdhocMetric;\n\n/**\n * Column selects in query object (used as dimensions in both groupby or raw\n * query mode). Can be either reference to physical column or expression.\n */\nexport type QueryFormColumn = PhysicalColumn | AdhocColumn;\n\n/**\n * Order query results by columns.\n * Format: [metric/column, is_ascending].\n */\nexport type QueryFormOrderBy =\n  | [QueryFormColumn | QueryFormMetric | {}, boolean]\n  | [];\n\nexport interface FormDataResidual {\n  [key: string]: any;\n}\n\nexport enum QueryMode {\n  aggregate = 'aggregate',\n  raw = 'raw',\n}\n\n/**\n * Query form fields related to SQL query and data outputs.\n */\nexport interface QueryFields {\n  columns?: QueryFormColumn[];\n  metrics?: QueryFormMetric[];\n  orderby?: QueryFormOrderBy[];\n}\n\n/**\n * Name of query fields.\n */\nexport type QueryField = keyof QueryFields;\n\n/**\n * Map of arbitrary control field names to query field names\n * (one of 'metrics' | 'columns' | 'groupby').\n *\n * Note that `groupby` is only added here because it is will be handled when\n * processing aliases but will not be sent to final objects. See `extraQueryFields.ts`.\n */\nexport type QueryFieldAliases = {\n  [key: string]: QueryField | 'groupby';\n};\n\n/**\n * Filter value for adhoc filters from dashboard FilterBox.\n * Currently only Binary and Set filters are supported.\n */\nexport type QueryFormExtraFilter = {\n  col: string;\n} & (\n  | {\n      op: BinaryOperator;\n      val: string;\n    }\n  | {\n      op: SetOperator;\n      val: string[];\n    }\n);\n\n/** These properties will be appended to those pre-existing in the form data/query object */\nexport type ExtraFormDataAppend = {\n  adhoc_filters?: AdhocFilter[];\n  filters?: QueryObjectFilterClause[];\n  /** These properties are for dynamic cross chart interaction */\n  interactive_drilldown?: string[];\n  interactive_groupby?: string[];\n  interactive_highlight?: string[];\n  /** This property can be used to pass non-standard form data between viz components */\n  custom_form_data?: JsonObject;\n};\n\n/** These parameters override properties in the extras parameter in the form data/query object.\n * Not all keys of QueryObjectExtras are supported here to ensure that freeform where and having\n * filter clauses can't be overridden */\nexport type ExtraFormDataOverrideExtras = Pick<\n  QueryObjectExtras,\n  'relative_start' | 'relative_end' | 'time_grain_sqla'\n>;\n\n/** These parameters override those already present in the form data/query object */\nexport type ExtraFormDataOverrideRegular = Partial<\n  Pick<SqlaFormData, 'granularity_sqla'>\n> &\n  Partial<Pick<SqlaFormData, 'granularity'>> &\n  Partial<Pick<BaseFormData, 'time_range'>> &\n  Partial<Pick<QueryObject, 'time_column' | 'time_grain'>>;\n\n/** These parameters override those already present in the form data/query object */\nexport type ExtraFormDataOverride = ExtraFormDataOverrideRegular &\n  ExtraFormDataOverrideExtras;\n\nexport type ExtraFormData = ExtraFormDataAppend & ExtraFormDataOverride;\n\n// Type signature for formData shared by all viz types\n// It will be gradually filled out as we build out the query object\n\nexport interface BaseFormData extends TimeRange, FormDataResidual {\n  /** datasource identifier ${id}_${type} */\n  datasource: string;\n  /**\n   * visualization type\n   * - necessary if you use the plugin and want to use\n   * buildQuery function from the plugin.\n   * This must match the key used when registering the plugin.\n   * - not necessary if you do not plan to use the\n   * buildQuery function from the plugin.\n   * Can put \"custom\" (or any string) in this field in that case.\n   */\n  viz_type: string;\n  metrics?: QueryFormMetric[];\n  where?: string;\n  columns?: QueryFormColumn[];\n  groupby?: QueryFormColumn[];\n  all_columns?: QueryFormColumn[];\n  /** list of filters */\n  adhoc_filters?: AdhocFilter[] | null;\n  extra_filters?: QueryFormExtraFilter[] | null;\n  extra_form_data?: ExtraFormData;\n  /** order descending */\n  order_desc?: boolean;\n  /** limit number of time series\n   *  deprecated - use series_limit instead */\n  limit?: number;\n  /** limit number of row in the results */\n  row_limit?: string | number | null;\n  /** row offset for server side pagination */\n  row_offset?: string | number | null;\n  /** The metric used to order timeseries for limiting\n   *  deprecated - use series_limit_metric instead */\n  timeseries_limit_metric?: QueryFormMetric;\n  /** Force refresh */\n  force?: boolean;\n  result_format?: string;\n  result_type?: string;\n  annotation_layers?: AnnotationLayer[];\n  url_params?: Record<string, string>;\n  custom_params?: Record<string, string>;\n  /** limit number of series */\n  series_columns?: QueryFormColumn[];\n  series_limit?: number;\n  series_limit_metric?: QueryFormMetric;\n}\n\n/**\n * Form data for SQLAlchemy based datasources.\n */\nexport interface SqlaFormData extends BaseFormData {\n  /**\n   * Name of the Time Column. Time column is optional.\n   */\n  granularity?: string;\n  granularity_sqla?: string;\n  time_grain_sqla?: TimeGranularity;\n  having?: string;\n}\n\nexport type QueryFormData = SqlaFormData;\n\n//---------------------------------------------------\n// Type guards\n//---------------------------------------------------\n\nexport default {};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n// We can codegen the enum definition based on a list of supported flags that we\n// check into source control. We're hardcoding the supported flags for now.\nexport enum FeatureFlag {\n  // PLEASE KEEP THE LIST SORTED ALPHABETICALLY\n  ALERTS_ATTACH_REPORTS = 'ALERTS_ATTACH_REPORTS',\n  ALERT_REPORTS = 'ALERT_REPORTS',\n  ALLOW_DASHBOARD_DOMAIN_SHARDING = 'ALLOW_DASHBOARD_DOMAIN_SHARDING',\n  ALLOW_FULL_CSV_EXPORT = 'ALLOW_FULL_CSV_EXPORT',\n  CLIENT_CACHE = 'CLIENT_CACHE',\n  DASHBOARD_CROSS_FILTERS = 'DASHBOARD_CROSS_FILTERS',\n  DASHBOARD_EDIT_CHART_IN_NEW_TAB = 'DASHBOARD_EDIT_CHART_IN_NEW_TAB',\n  DASHBOARD_FILTERS_EXPERIMENTAL = 'DASHBOARD_FILTERS_EXPERIMENTAL',\n  CONFIRM_DASHBOARD_DIFF = 'CONFIRM_DASHBOARD_DIFF',\n  DASHBOARD_NATIVE_FILTERS = 'DASHBOARD_NATIVE_FILTERS',\n  DASHBOARD_NATIVE_FILTERS_SET = 'DASHBOARD_NATIVE_FILTERS_SET',\n  DASHBOARD_VIRTUALIZATION = 'DASHBOARD_VIRTUALIZATION',\n  DASHBOARD_RBAC = 'DASHBOARD_RBAC',\n  DATAPANEL_CLOSED_BY_DEFAULT = 'DATAPANEL_CLOSED_BY_DEFAULT',\n  DISABLE_DATASET_SOURCE_EDIT = 'DISABLE_DATASET_SOURCE_EDIT',\n  DISABLE_LEGACY_DATASOURCE_EDITOR = 'DISABLE_LEGACY_DATASOURCE_EDITOR',\n  DISPLAY_MARKDOWN_HTML = 'DISPLAY_MARKDOWN_HTML',\n  DRILL_TO_DETAIL = 'DRILL_TO_DETAIL',\n  DYNAMIC_PLUGINS = 'DYNAMIC_PLUGINS',\n  EMBEDDABLE_CHARTS = 'EMBEDDABLE_CHARTS',\n  EMBEDDED_SUPERSET = 'EMBEDDED_SUPERSET',\n  ENABLE_ADVANCED_DATA_TYPES = 'ENABLE_ADVANCED_DATA_TYPES',\n  ENABLE_DND_WITH_CLICK_UX = 'ENABLE_DND_WITH_CLICK_UX',\n  ENABLE_EXPLORE_DRAG_AND_DROP = 'ENABLE_EXPLORE_DRAG_AND_DROP',\n  ENABLE_JAVASCRIPT_CONTROLS = 'ENABLE_JAVASCRIPT_CONTROLS',\n  ENABLE_TEMPLATE_PROCESSING = 'ENABLE_TEMPLATE_PROCESSING',\n  ENABLE_TEMPLATE_REMOVE_FILTERS = 'ENABLE_TEMPLATE_REMOVE_FILTERS',\n  ESCAPE_MARKDOWN_HTML = 'ESCAPE_MARKDOWN_HTML',\n  ESTIMATE_QUERY_COST = 'ESTIMATE_QUERY_COST',\n  FORCE_DATABASE_CONNECTIONS_SSL = 'FORCE_DATABASE_CONNECTIONS_SSL',\n  GENERIC_CHART_AXES = 'GENERIC_CHART_AXES',\n  GLOBAL_ASYNC_QUERIES = 'GLOBAL_ASYNC_QUERIES',\n  HORIZONTAL_FILTER_BAR = 'HORIZONTAL_FILTER_BAR',\n  LISTVIEWS_DEFAULT_CARD_VIEW = 'LISTVIEWS_DEFAULT_CARD_VIEW',\n  SCHEDULED_QUERIES = 'SCHEDULED_QUERIES',\n  SHARE_QUERIES_VIA_KV_STORE = 'SHARE_QUERIES_VIA_KV_STORE',\n  SQLLAB_BACKEND_PERSISTENCE = 'SQLLAB_BACKEND_PERSISTENCE',\n  SQL_VALIDATORS_BY_ENGINE = 'SQL_VALIDATORS_BY_ENGINE',\n  THUMBNAILS = 'THUMBNAILS',\n  USE_ANALAGOUS_COLORS = 'USE_ANALAGOUS_COLORS',\n  TAGGING_SYSTEM = 'TAGGING_SYSTEM',\n  UX_BETA = 'UX_BETA',\n  VERSIONED_EXPORT = 'VERSIONED_EXPORT',\n  SSH_TUNNELING = 'SSH_TUNNELING',\n}\nexport type ScheduleQueriesProps = {\n  JSONSCHEMA: {\n    [key: string]: string;\n  };\n  UISCHEMA: {\n    [key: string]: string;\n  };\n  VALIDATION: {\n    [key: string]: string;\n  };\n};\nexport type FeatureFlagMap = {\n  [key in Exclude<FeatureFlag, FeatureFlag.SCHEDULED_QUERIES>]?: boolean;\n} & {\n  SCHEDULED_QUERIES?: ScheduleQueriesProps;\n};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\ndeclare global {\n  interface Window {\n    featureFlags: FeatureFlagMap;\n  }\n}\n\nexport function isFeatureEnabled(feature: FeatureFlag): boolean {\n  try {\n    return !!window.featureFlags[feature];\n  } catch (error) {\n    console.error(`Failed to query feature flag ${feature}`);\n  }\n  return false;\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nexport default function isDefined<T>(x: T): x is NonNullable<T> {\n  return x !== null && x !== undefined;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/**\n * Remove duplicate items from a list.\n */\nexport function removeDuplicates<T>(\n  items: T[],\n  hash?: (item: T) => unknown,\n): T[] {\n  if (hash) {\n    const seen = new Set();\n    return items.filter(x => {\n      const itemHash = hash(x);\n      if (seen.has(itemHash)) return false;\n      seen.add(itemHash);\n      return true;\n    });\n  }\n  return [...new Set(items)];\n}\n\nexport default removeDuplicates;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useCallback, useState } from 'react';\nimport { Radio } from 'src/components/Radio';\nimport { RadioChangeEvent, AsyncSelect } from 'src/components';\nimport { Input } from 'src/components/Input';\nimport StyledModal from 'src/components/Modal';\nimport Button from 'src/components/Button';\nimport {\n  styled,\n  t,\n  SupersetClient,\n  JsonResponse,\n  JsonObject,\n  QueryResponse,\n  QueryFormData,\n} from '@superset-ui/core';\nimport { useSelector, useDispatch } from 'react-redux';\nimport moment from 'moment';\nimport rison from 'rison';\nimport { createDatasource } from 'src/SqlLab/actions/sqlLab';\nimport { addDangerToast } from 'src/components/MessageToasts/actions';\nimport { UserWithPermissionsAndRoles as User } from 'src/types/bootstrapTypes';\nimport {\n  DatasetRadioState,\n  EXPLORE_CHART_DEFAULT,\n  DatasetOwner,\n  SqlLabExploreRootState,\n  getInitialState,\n  SqlLabRootState,\n} from 'src/SqlLab/types';\nimport { mountExploreUrl } from 'src/explore/exploreUtils';\nimport { postFormData } from 'src/explore/exploreUtils/formData';\nimport { URL_PARAMS } from 'src/constants';\nimport { SelectValue } from 'antd/lib/select';\nimport { isEmpty, isString } from 'lodash';\n\ninterface QueryDatabase {\n  id?: number;\n}\n\nexport type ExploreQuery = QueryResponse & {\n  database?: QueryDatabase | null | undefined;\n};\n\nexport interface ISimpleColumn {\n  name?: string | null;\n  type?: string | null;\n  is_dttm?: boolean | null;\n}\n\nexport type Database = {\n  backend: string;\n  id: number;\n  parameter: object;\n};\n\nexport interface ISaveableDatasource {\n  columns: ISimpleColumn[];\n  name: string;\n  dbId: number;\n  sql: string;\n  templateParams?: string | object | null;\n  schema?: string | null;\n  database?: Database;\n}\n\ninterface SaveDatasetModalProps {\n  visible: boolean;\n  onHide: () => void;\n  buttonTextOnSave: string;\n  buttonTextOnOverwrite: string;\n  modalDescription?: string;\n  datasource: ISaveableDatasource;\n  openWindow?: boolean;\n  formData?: Omit<QueryFormData, 'datasource'>;\n}\n\nconst Styles = styled.div`\n  .sdm-body {\n    margin: 0 8px;\n  }\n  .sdm-input {\n    margin-left: 45px;\n    width: 401px;\n  }\n  .sdm-autocomplete {\n    width: 401px;\n    align-self: center;\n  }\n  .sdm-radio {\n    display: block;\n    height: 30px;\n    margin: 10px 0px;\n    line-height: 30px;\n  }\n  .sdm-overwrite-msg {\n    margin: 7px;\n  }\n  .sdm-overwrite-container {\n    flex: 1 1 auto;\n    display: flex;\n  }\n`;\n\nconst updateDataset = async (\n  dbId: number,\n  datasetId: number,\n  sql: string,\n  columns: Array<Record<string, any>>,\n  owners: [number],\n  overrideColumns: boolean,\n) => {\n  const endpoint = `api/v1/dataset/${datasetId}?override_columns=${overrideColumns}`;\n  const headers = { 'Content-Type': 'application/json' };\n  const body = JSON.stringify({\n    sql,\n    columns,\n    owners,\n    database_id: dbId,\n  });\n\n  const data: JsonResponse = await SupersetClient.put({\n    endpoint,\n    headers,\n    body,\n  });\n  return data.json.result;\n};\n\nconst UNTITLED = t('Untitled Dataset');\n\nexport const SaveDatasetModal = ({\n  visible,\n  onHide,\n  buttonTextOnSave,\n  buttonTextOnOverwrite,\n  modalDescription,\n  datasource,\n  openWindow = true,\n  formData = {},\n}: SaveDatasetModalProps) => {\n  const defaultVizType = useSelector<SqlLabRootState, string>(\n    state => state.common?.conf?.DEFAULT_VIZ_TYPE || 'table',\n  );\n\n  const getDefaultDatasetName = () =>\n    `${datasource?.name || UNTITLED} ${moment().format('MM/DD/YYYY HH:mm:ss')}`;\n  const [datasetName, setDatasetName] = useState(getDefaultDatasetName());\n  const [newOrOverwrite, setNewOrOverwrite] = useState(\n    DatasetRadioState.SAVE_NEW,\n  );\n  const [shouldOverwriteDataset, setShouldOverwriteDataset] = useState(false);\n  const [datasetToOverwrite, setDatasetToOverwrite] = useState<\n    Record<string, any>\n  >({});\n  const [selectedDatasetToOverwrite, setSelectedDatasetToOverwrite] = useState<\n    SelectValue | undefined\n  >(undefined);\n\n  const user = useSelector<SqlLabExploreRootState, User>(user =>\n    getInitialState(user),\n  );\n  const dispatch = useDispatch<(dispatch: any) => Promise<JsonObject>>();\n\n  const createWindow = (url: string) => {\n    if (openWindow) {\n      window.open(url, '_blank', 'noreferrer');\n    } else {\n      window.location.href = url;\n    }\n  };\n  const formDataWithDefaults = {\n    ...EXPLORE_CHART_DEFAULT,\n    ...(formData || {}),\n  };\n  const handleOverwriteDataset = async () => {\n    // if user wants to overwrite a dataset we need to prompt them\n    if (!shouldOverwriteDataset) {\n      setShouldOverwriteDataset(true);\n      return;\n    }\n    const [, key] = await Promise.all([\n      updateDataset(\n        datasource?.dbId,\n        datasetToOverwrite?.datasetid,\n        datasource?.sql,\n        datasource?.columns?.map(\n          (d: { name: string; type: string; is_dttm: boolean }) => ({\n            column_name: d.name,\n            type: d.type,\n            is_dttm: d.is_dttm,\n          }),\n        ),\n        datasetToOverwrite?.owners?.map((o: DatasetOwner) => o.id),\n        true,\n      ),\n      postFormData(datasetToOverwrite.datasetid, 'table', {\n        ...formDataWithDefaults,\n        datasource: `${datasetToOverwrite.datasetid}__table`,\n        ...(defaultVizType === 'table' && {\n          all_columns: datasource?.columns?.map(column => column.name),\n        }),\n      }),\n    ]);\n\n    const url = mountExploreUrl(null, {\n      [URL_PARAMS.formDataKey.name]: key,\n    });\n    createWindow(url);\n\n    setShouldOverwriteDataset(false);\n    setDatasetName(getDefaultDatasetName());\n    onHide();\n  };\n\n  const loadDatasetOverwriteOptions = useCallback(\n    async (input = '') => {\n      const { userId } = user;\n      const queryParams = rison.encode({\n        filters: [\n          {\n            col: 'table_name',\n            opr: 'ct',\n            value: input,\n          },\n          {\n            col: 'owners',\n            opr: 'rel_m_m',\n            value: userId,\n          },\n        ],\n        order_column: 'changed_on_delta_humanized',\n        order_direction: 'desc',\n      });\n\n      return SupersetClient.get({\n        endpoint: `/api/v1/dataset?q=${queryParams}`,\n      }).then(response => ({\n        data: response.json.result.map(\n          (r: { table_name: string; id: number; owners: [DatasetOwner] }) => ({\n            value: r.table_name,\n            label: r.table_name,\n            datasetid: r.id,\n            owners: r.owners,\n          }),\n        ),\n        totalCount: response.json.count,\n      }));\n    },\n    [user],\n  );\n\n  const handleSaveInDataset = () => {\n    const selectedColumns = datasource?.columns ?? [];\n\n    // The filters param is only used to test jinja templates.\n    // Remove the special filters entry from the templateParams\n    // before saving the dataset.\n    let templateParams;\n    if (isString(datasource?.templateParams)) {\n      const p = JSON.parse(datasource.templateParams);\n      /* eslint-disable-next-line no-underscore-dangle */\n      if (p._filters) {\n        /* eslint-disable-next-line no-underscore-dangle */\n        delete p._filters;\n        // eslint-disable-next-line no-param-reassign\n        templateParams = JSON.stringify(p);\n      }\n    }\n\n    dispatch(\n      createDatasource({\n        schema: datasource.schema,\n        sql: datasource.sql,\n        dbId: datasource.dbId || datasource?.database?.id,\n        templateParams,\n        datasourceName: datasetName,\n        columns: selectedColumns,\n      }),\n    )\n      .then((data: { table_id: number }) =>\n        postFormData(data.table_id, 'table', {\n          ...formDataWithDefaults,\n          datasource: `${data.table_id}__table`,\n          ...(defaultVizType === 'table' && {\n            all_columns: selectedColumns.map(column => column.name),\n          }),\n        }),\n      )\n      .then((key: string) => {\n        const url = mountExploreUrl(null, {\n          [URL_PARAMS.formDataKey.name]: key,\n        });\n        createWindow(url);\n        setDatasetName(getDefaultDatasetName());\n        onHide();\n      })\n      .catch(() => {\n        addDangerToast(t('An error occurred saving dataset'));\n      });\n  };\n\n  const handleOverwriteDatasetOption = (value: SelectValue, option: any) => {\n    setDatasetToOverwrite(option);\n    setSelectedDatasetToOverwrite(value);\n  };\n\n  const handleDatasetNameChange = (e: React.FormEvent<HTMLInputElement>) => {\n    // @ts-expect-error\n    setDatasetName(e.target.value);\n  };\n\n  const handleOverwriteCancel = () => {\n    setShouldOverwriteDataset(false);\n    setDatasetToOverwrite({});\n  };\n\n  const disableSaveAndExploreBtn =\n    (newOrOverwrite === DatasetRadioState.SAVE_NEW &&\n      datasetName.length === 0) ||\n    (newOrOverwrite === DatasetRadioState.OVERWRITE_DATASET &&\n      isEmpty(selectedDatasetToOverwrite));\n\n  const filterAutocompleteOption = (\n    inputValue: string,\n    option: { value: string; datasetid: number },\n  ) => option.value.toLowerCase().includes(inputValue.toLowerCase());\n\n  return (\n    <StyledModal\n      show={visible}\n      title={t('Save or Overwrite Dataset')}\n      onHide={onHide}\n      footer={\n        <>\n          {newOrOverwrite === DatasetRadioState.SAVE_NEW && (\n            <Button\n              disabled={disableSaveAndExploreBtn}\n              buttonStyle=\"primary\"\n              onClick={handleSaveInDataset}\n            >\n              {buttonTextOnSave}\n            </Button>\n          )}\n          {newOrOverwrite === DatasetRadioState.OVERWRITE_DATASET && (\n            <>\n              {shouldOverwriteDataset && (\n                <Button onClick={handleOverwriteCancel}>{t('Back')}</Button>\n              )}\n              <Button\n                className=\"md\"\n                buttonStyle=\"primary\"\n                onClick={handleOverwriteDataset}\n                disabled={disableSaveAndExploreBtn}\n              >\n                {buttonTextOnOverwrite}\n              </Button>\n            </>\n          )}\n        </>\n      }\n    >\n      <Styles>\n        {!shouldOverwriteDataset && (\n          <div className=\"sdm-body\">\n            {modalDescription && (\n              <div className=\"sdm-prompt\">{modalDescription}</div>\n            )}\n            <Radio.Group\n              onChange={(e: RadioChangeEvent) => {\n                setNewOrOverwrite(Number(e.target.value));\n              }}\n              value={newOrOverwrite}\n            >\n              <Radio className=\"sdm-radio\" value={1}>\n                {t('Save as new')}\n                <Input\n                  className=\"sdm-input\"\n                  value={datasetName}\n                  onChange={handleDatasetNameChange}\n                  disabled={newOrOverwrite !== 1}\n                />\n              </Radio>\n              <div className=\"sdm-overwrite-container\">\n                <Radio className=\"sdm-radio\" value={2}>\n                  {t('Overwrite existing')}\n                </Radio>\n                <div className=\"sdm-autocomplete\">\n                  <AsyncSelect\n                    allowClear\n                    showSearch\n                    placeholder={t('Select or type dataset name')}\n                    ariaLabel={t('Existing dataset')}\n                    onChange={handleOverwriteDatasetOption}\n                    options={input => loadDatasetOverwriteOptions(input)}\n                    value={selectedDatasetToOverwrite}\n                    filterOption={filterAutocompleteOption}\n                    disabled={newOrOverwrite !== 2}\n                    getPopupContainer={() => document.body}\n                  />\n                </div>\n              </div>\n            </Radio.Group>\n          </div>\n        )}\n        {shouldOverwriteDataset && (\n          <div className=\"sdm-overwrite-msg\">\n            {t('Are you sure you want to overwrite this dataset?')}\n          </div>\n        )}\n      </Styles>\n    </StyledModal>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t } from '@superset-ui/core';\n\nexport const STATE_TYPE_MAP = {\n  offline: 'danger',\n  failed: 'danger',\n  pending: 'info',\n  fetching: 'info',\n  running: 'warning',\n  stopped: 'danger',\n  success: 'success',\n};\n\nexport const STATE_TYPE_MAP_LOCALIZED = {\n  offline: t('offline'),\n  failed: t('failed'),\n  pending: t('pending'),\n  fetching: t('fetching'),\n  running: t('running'),\n  stopped: t('stopped'),\n  success: t('success'),\n};\n\nexport const STATUS_OPTIONS = {\n  success: 'success',\n  failed: 'failed',\n  running: 'running',\n  offline: 'offline',\n  pending: 'pending',\n};\n\nexport const STATUS_OPTIONS_LOCALIZED = {\n  success: t('success'),\n  failed: t('failed'),\n  running: t('running'),\n  offline: t('offline'),\n  pending: t('pending'),\n};\n\nexport const TIME_OPTIONS = [\n  'now',\n  '1 hour ago',\n  '1 day ago',\n  '7 days ago',\n  '28 days ago',\n  '90 days ago',\n  '1 year ago',\n];\n\n// SqlEditor layout constants\nexport const SQL_EDITOR_GUTTER_HEIGHT = 5;\nexport const SQL_EDITOR_GUTTER_MARGIN = 3;\nexport const SQL_TOOLBAR_HEIGHT = 51;\nexport const SQL_EDITOR_LEFTBAR_WIDTH = 400;\nexport const SQL_EDITOR_PADDING = 10;\nexport const INITIAL_NORTH_PERCENT = 30;\nexport const INITIAL_SOUTH_PERCENT = 70;\nexport const SET_QUERY_EDITOR_SQL_DEBOUNCE_MS = 2000;\nexport const VALIDATION_DEBOUNCE_MS = 600;\nexport const WINDOW_RESIZE_THROTTLE_MS = 100;\n\n// kilobyte storage\nexport const KB_STORAGE = 1024;\nexport const BYTES_PER_CHAR = 2;\n\n// browser's localStorage max usage constants\nexport const LOCALSTORAGE_MAX_QUERY_AGE_MS = 24 * 60 * 60 * 1000; // 24 hours\nexport const LOCALSTORAGE_MAX_USAGE_KB = 5 * 1024; // 5M\nexport const LOCALSTORAGE_WARNING_THRESHOLD = 0.9;\nexport const LOCALSTORAGE_WARNING_MESSAGE_THROTTLE_MS = 8000; // danger type toast duration\n\n// autocomplete score weights\nexport const SQL_KEYWORD_AUTOCOMPLETE_SCORE = 100;\nexport const SQL_FUNCTIONS_AUTOCOMPLETE_SCORE = 90;\nexport const SCHEMA_AUTOCOMPLETE_SCORE = 60;\nexport const TABLE_AUTOCOMPLETE_SCORE = 55;\nexport const COLUMN_AUTOCOMPLETE_SCORE = 50;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { JsonObject, QueryResponse } from '@superset-ui/core';\nimport { SupersetError } from 'src/components/ErrorMessage/types';\nimport { UserWithPermissionsAndRoles } from 'src/types/bootstrapTypes';\nimport { ToastType } from 'src/components/MessageToasts/types';\nimport { RootState } from 'src/dashboard/types';\nimport { DropdownButtonProps } from 'src/components/DropdownButton';\nimport { ButtonProps } from 'src/components/Button';\n\nexport type QueryButtonProps = DropdownButtonProps | ButtonProps;\n\n// Object as Dictionary (associative array) with Query id as the key and type Query as the value\nexport type QueryDictionary = {\n  [id: string]: QueryResponse;\n};\n\nexport interface QueryEditor {\n  id: string;\n  dbId?: number;\n  name: string;\n  schema: string;\n  autorun: boolean;\n  sql: string;\n  remoteId: number | null;\n  tableOptions: any[];\n  schemaOptions?: SchemaOption[];\n  functionNames: string[];\n  validationResult?: {\n    completed: boolean;\n    errors: SupersetError[];\n  };\n  hideLeftBar?: boolean;\n  latestQueryId?: string | null;\n  templateParams?: string;\n  selectedText?: string;\n  queryLimit?: number;\n  description?: string;\n}\n\nexport type toastState = {\n  id: string;\n  toastType: ToastType;\n  text: string;\n  duration: number;\n  noDuplicate: boolean;\n};\n\nexport type SqlLabRootState = {\n  sqlLab: {\n    activeSouthPaneTab: string | number; // default is string; action.newQuery.id is number\n    alerts: any[];\n    databases: Record<string, any>;\n    dbConnect: boolean;\n    offline: boolean;\n    queries: Record<string, QueryResponse>;\n    queryEditors: QueryEditor[];\n    tabHistory: string[]; // default is activeTab ? [activeTab.id.toString()] : []\n    tables: Record<string, any>[];\n    queriesLastUpdate: number;\n    user: UserWithPermissionsAndRoles;\n    errorMessage: string | null;\n    unsavedQueryEditor: Partial<QueryEditor>;\n    queryCostEstimates?: Record<string, QueryCostEstimate>;\n  };\n  localStorageUsageInKilobytes: number;\n  messageToasts: toastState[];\n  common: {\n    flash_messages: string[];\n    conf: JsonObject;\n  };\n};\n\nexport type SqlLabExploreRootState = SqlLabRootState | RootState;\n\nexport const getInitialState = (state: SqlLabExploreRootState) => {\n  if (state.hasOwnProperty('sqlLab')) {\n    const {\n      sqlLab: { user },\n    } = state as SqlLabRootState;\n    return user;\n  }\n\n  const { user } = state as RootState;\n  return user as UserWithPermissionsAndRoles;\n};\n\nexport enum DatasetRadioState {\n  SAVE_NEW = 1,\n  OVERWRITE_DATASET = 2,\n}\n\nexport const EXPLORE_CHART_DEFAULT = {\n  metrics: [],\n  groupby: [],\n  time_range: 'No filter',\n  row_limit: 1000,\n};\n\nexport interface DatasetOwner {\n  first_name: string;\n  id: number;\n  last_name: string;\n  username: string;\n}\n\nexport interface DatasetOptionAutocomplete {\n  value: string;\n  datasetId: number;\n  owners: [DatasetOwner];\n}\n\nexport interface SchemaOption {\n  value: string;\n  label: string;\n  title: string;\n}\n\nexport interface QueryCostEstimate {\n  completed: string;\n  cost: Record<string, any>[];\n  error: string;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SQL_KEYWORD_AUTOCOMPLETE_SCORE } from '../constants';\n\nconst SQL_KEYWORDS = [\n  'AND',\n  'AS',\n  'ASC',\n  'AVG',\n  'BY',\n  'CASE',\n  'COUNT',\n  'CREATE',\n  'CROSS',\n  'DATABASE',\n  'DEFAULT',\n  'DELETE',\n  'DESC',\n  'DISTINCT',\n  'DROP',\n  'ELSE',\n  'END',\n  'FOREIGN',\n  'FROM',\n  'GRANT',\n  'GROUP',\n  'HAVING',\n  'IF',\n  'INNER',\n  'INSERT',\n  'JOIN',\n  'KEY',\n  'LEFT',\n  'LIMIT',\n  'MAX',\n  'MIN',\n  'NATURAL',\n  'NOT',\n  'NULL',\n  'OFFSET',\n  'ON',\n  'OR',\n  'ORDER',\n  'OUTER',\n  'PRIMARY',\n  'REFERENCES',\n  'RIGHT',\n  'SELECT',\n  'SUM',\n  'TABLE',\n  'THEN',\n  'TYPE',\n  'UNION',\n  'UPDATE',\n  'WHEN',\n  'WHERE',\n];\n\nconst SQL_DATA_TYPES = [\n  'BIGINT',\n  'BINARY',\n  'BIT',\n  'CHAR',\n  'DATE',\n  'DECIMAL',\n  'DOUBLE',\n  'FLOAT',\n  'INT',\n  'INTEGER',\n  'MONEY',\n  'NUMBER',\n  'NUMERIC',\n  'REAL',\n  'SET',\n  'TEXT',\n  'TIMESTAMP',\n  'VARCHAR',\n];\n\nconst allKeywords = SQL_KEYWORDS.concat(SQL_DATA_TYPES);\n\nconst sqlKeywords = allKeywords.map(keyword => ({\n  meta: 'sql',\n  name: keyword,\n  score: SQL_KEYWORD_AUTOCOMPLETE_SCORE,\n  value: keyword,\n}));\n\nexport default sqlKeywords;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { PropsWithChildren } from 'react';\nimport AntdAlert, { AlertProps as AntdAlertProps } from 'antd/lib/alert';\nimport { useTheme } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\n\nexport type AlertProps = PropsWithChildren<\n  AntdAlertProps & { roomBelow?: boolean }\n>;\n\nexport default function Alert(props: AlertProps) {\n  const {\n    type = 'info',\n    description,\n    showIcon = true,\n    closable = true,\n    roomBelow = false,\n    children,\n  } = props;\n\n  const theme = useTheme();\n  const { colors, typography, gridUnit } = theme;\n  const { alert, error, info, success } = colors;\n\n  let baseColor = info;\n  let AlertIcon = Icons.InfoSolid;\n  if (type === 'error') {\n    baseColor = error;\n    AlertIcon = Icons.ErrorSolid;\n  } else if (type === 'warning') {\n    baseColor = alert;\n    AlertIcon = Icons.AlertSolid;\n  } else if (type === 'success') {\n    baseColor = success;\n    AlertIcon = Icons.CircleCheckSolid;\n  }\n\n  return (\n    <AntdAlert\n      role=\"alert\"\n      showIcon={showIcon}\n      icon={<AlertIcon aria-label={`${type} icon`} />}\n      closeText={closable && <Icons.XSmall aria-label=\"close icon\" />}\n      css={{\n        marginBottom: roomBelow ? gridUnit * 4 : 0,\n        padding: `${gridUnit * 2}px ${gridUnit * 3}px`,\n        alignItems: 'flex-start',\n        border: 0,\n        backgroundColor: baseColor.light2,\n        '& .ant-alert-icon': {\n          marginRight: gridUnit * 2,\n        },\n        '& .ant-alert-message': {\n          color: baseColor.dark2,\n          fontSize: typography.sizes.m,\n          fontWeight: description\n            ? typography.weights.bold\n            : typography.weights.normal,\n        },\n        '& .ant-alert-description': {\n          color: baseColor.dark2,\n          fontSize: typography.sizes.m,\n        },\n      }}\n      {...props}\n    >\n      {children}\n    </AntdAlert>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { forwardRef } from 'react';\nimport {\n  Editor as OrigEditor,\n  IEditSession,\n  Position,\n  TextMode as OrigTextMode,\n} from 'brace';\nimport AceEditor, { IAceEditorProps } from 'react-ace';\nimport { acequire } from 'ace-builds/src-noconflict/ace';\nimport AsyncEsmComponent, {\n  PlaceholderProps,\n} from 'src/components/AsyncEsmComponent';\n\nexport interface AceCompleterKeywordData {\n  name: string;\n  value: string;\n  score: number;\n  meta: string;\n}\n\nexport type TextMode = OrigTextMode & { $id: string };\n\nexport interface AceCompleter {\n  insertMatch: (\n    data?: Editor | { value: string } | string,\n    options?: AceCompleterKeywordData,\n  ) => void;\n}\n\nexport type Editor = OrigEditor & {\n  completer: AceCompleter;\n  completers: AceCompleter[];\n};\n\nexport interface AceCompleterKeyword extends AceCompleterKeywordData {\n  completer?: AceCompleter;\n}\n\n/**\n * Async loaders to import brace modules. Must manually create call `import(...)`\n * promises because webpack can only analyze async imports statically.\n */\nconst aceModuleLoaders = {\n  'mode/sql': () => import('brace/mode/sql'),\n  'mode/markdown': () => import('brace/mode/markdown'),\n  'mode/css': () => import('brace/mode/css'),\n  'mode/json': () => import('brace/mode/json'),\n  'mode/yaml': () => import('brace/mode/yaml'),\n  'mode/html': () => import('brace/mode/html'),\n  'mode/javascript': () => import('brace/mode/javascript'),\n  'theme/textmate': () => import('brace/theme/textmate'),\n  'theme/github': () => import('brace/theme/github'),\n  'ext/language_tools': () => import('brace/ext/language_tools'),\n  'ext/searchbox': () => import('brace/ext/searchbox'),\n};\n\nexport type AceModule = keyof typeof aceModuleLoaders;\n\nexport type AsyncAceEditorProps = IAceEditorProps & {\n  keywords?: AceCompleterKeyword[];\n};\n\nexport type AceEditorMode = 'sql';\nexport type AceEditorTheme = 'textmate' | 'github';\nexport type AsyncAceEditorOptions = {\n  defaultMode?: AceEditorMode;\n  defaultTheme?: AceEditorTheme;\n  defaultTabSize?: number;\n  placeholder?: React.ComponentType<\n    PlaceholderProps & Partial<IAceEditorProps>\n  > | null;\n};\n\n/**\n * Get an async AceEditor with automatical loading of specified ace modules.\n */\nexport default function AsyncAceEditor(\n  aceModules: AceModule[],\n  {\n    defaultMode,\n    defaultTheme,\n    defaultTabSize = 2,\n    placeholder,\n  }: AsyncAceEditorOptions = {},\n) {\n  return AsyncEsmComponent(async () => {\n    const { default: ReactAceEditor } = await import('react-ace');\n\n    await Promise.all(aceModules.map(x => aceModuleLoaders[x]()));\n\n    const inferredMode =\n      defaultMode ||\n      aceModules.find(x => x.startsWith('mode/'))?.replace('mode/', '');\n    const inferredTheme =\n      defaultTheme ||\n      aceModules.find(x => x.startsWith('theme/'))?.replace('theme/', '');\n\n    return forwardRef<AceEditor, AsyncAceEditorProps>(\n      function ExtendedAceEditor(\n        {\n          keywords,\n          mode = inferredMode,\n          theme = inferredTheme,\n          tabSize = defaultTabSize,\n          defaultValue = '',\n          ...props\n        },\n        ref,\n      ) {\n        if (keywords) {\n          const langTools = acequire('ace/ext/language_tools');\n          const completer = {\n            getCompletions: (\n              editor: AceEditor,\n              session: IEditSession,\n              pos: Position,\n              prefix: string,\n              callback: (error: null, wordList: object[]) => void,\n            ) => {\n              // If the prefix starts with a number, don't try to autocomplete\n              if (!Number.isNaN(parseInt(prefix, 10))) {\n                return;\n              }\n              if ((session.getMode() as TextMode).$id === `ace/mode/${mode}`) {\n                callback(null, keywords);\n              }\n            },\n          };\n          langTools.setCompleters([completer]);\n        }\n        return (\n          <ReactAceEditor\n            ref={ref}\n            mode={mode}\n            theme={theme}\n            tabSize={tabSize}\n            defaultValue={defaultValue}\n            {...props}\n          />\n        );\n      },\n    );\n  }, placeholder);\n}\n\nexport const SQLEditor = AsyncAceEditor([\n  'mode/sql',\n  'theme/github',\n  'ext/language_tools',\n  'ext/searchbox',\n]);\n\nexport const FullSQLEditor = AsyncAceEditor(\n  ['mode/sql', 'theme/github', 'ext/language_tools', 'ext/searchbox'],\n  {\n    // a custom placeholder in SQL lab for less jumpy re-renders\n    placeholder: () => {\n      const gutterBackground = '#e8e8e8'; // from ace-github theme\n      return (\n        <div\n          style={{\n            height: '100%',\n          }}\n        >\n          <div\n            style={{ width: 41, height: '100%', background: gutterBackground }}\n          />\n          {/* make it possible to resize the placeholder */}\n          <div className=\"ace_content\" />\n        </div>\n      );\n    },\n  },\n);\n\nexport const MarkdownEditor = AsyncAceEditor([\n  'mode/markdown',\n  'theme/textmate',\n]);\n\nexport const TextAreaEditor = AsyncAceEditor([\n  'mode/markdown',\n  'mode/sql',\n  'mode/json',\n  'mode/html',\n  'mode/javascript',\n  'theme/textmate',\n]);\n\nexport const CssEditor = AsyncAceEditor(['mode/css', 'theme/github']);\n\nexport const JsonEditor = AsyncAceEditor(['mode/json', 'theme/github']);\n\n/**\n * JSON or Yaml config editor.\n */\nexport const ConfigEditor = AsyncAceEditor([\n  'mode/json',\n  'mode/yaml',\n  'theme/github',\n]);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  CSSProperties,\n  useEffect,\n  useState,\n  RefObject,\n  forwardRef,\n} from 'react';\nimport Loading from '../Loading';\n\nexport type PlaceholderProps = {\n  showLoadingForImport?: boolean;\n  width?: string | number;\n  height?: string | number;\n  placeholderStyle?: CSSProperties;\n} & {\n  [key: string]: any;\n};\n\nfunction DefaultPlaceholder({\n  width,\n  height,\n  showLoadingForImport = false,\n  placeholderStyle: style,\n}: PlaceholderProps) {\n  return (\n    // since `width` defaults to 100%, we can display the placeholder once\n    // height is specified.\n    (height && (\n      <div key=\"async-asm-placeholder\" style={{ width, height, ...style }}>\n        {showLoadingForImport && <Loading position=\"floating\" />}\n      </div>\n    )) ||\n    // `|| null` is for in case of height=0.\n    null\n  );\n}\n\n/**\n * Asynchronously import an ES module as a React component, render a placeholder\n * first (if provided) and re-render once import is complete.\n */\nexport default function AsyncEsmComponent<\n  P = PlaceholderProps,\n  M = React.ComponentType<P> | { default: React.ComponentType<P> },\n>(\n  /**\n   * A promise generator that returns the React component to render.\n   */\n  loadComponent: Promise<M> | (() => Promise<M>),\n  /**\n   * Placeholder while still importing.\n   */\n  placeholder: React.ComponentType<\n    PlaceholderProps & Partial<P>\n  > | null = DefaultPlaceholder,\n) {\n  // component props + placeholder props\n  type FullProps = P & PlaceholderProps;\n  let promise: Promise<M> | undefined;\n  let component: React.ComponentType<FullProps>;\n\n  /**\n   * Safely wait for promise, make sure the loader function only execute once.\n   */\n  function waitForPromise() {\n    if (!promise) {\n      // load component on initialization\n      promise =\n        loadComponent instanceof Promise ? loadComponent : loadComponent();\n    }\n    if (!component) {\n      promise.then(result => {\n        component = ((result as { default?: React.ComponentType<P> }).default ||\n          result) as React.ComponentType<FullProps>;\n      });\n    }\n    return promise;\n  }\n\n  type AsyncComponent = React.ForwardRefExoticComponent<\n    React.PropsWithoutRef<FullProps> &\n      React.RefAttributes<React.ComponentType<FullProps>>\n  > & {\n    preload?: typeof waitForPromise;\n  };\n\n  const AsyncComponent: AsyncComponent = forwardRef(function AsyncComponent(\n    props: FullProps,\n    ref: RefObject<React.ComponentType<FullProps>>,\n  ) {\n    const [loaded, setLoaded] = useState(component !== undefined);\n    useEffect(() => {\n      let isMounted = true;\n      if (!loaded) {\n        // update state to trigger a re-render\n        waitForPromise().then(() => {\n          if (isMounted) {\n            setLoaded(true);\n          }\n        });\n      }\n      return () => {\n        isMounted = false;\n      };\n    });\n    const Component = component || placeholder;\n    return Component ? (\n      // placeholder does not get the ref\n      <Component ref={Component === component ? ref : null} {...props} />\n    ) : null;\n  });\n  // preload the async component before rendering\n  AsyncComponent.preload = waitForPromise;\n\n  return AsyncComponent as AsyncComponent & {\n    preload: typeof waitForPromise;\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { styled } from '@superset-ui/core';\nimport { Collapse as AntdCollapse } from 'antd';\nimport { CollapseProps as AntdCollapseProps } from 'antd/lib/collapse';\n\nexport interface CollapseProps extends AntdCollapseProps {\n  light?: boolean;\n  bigger?: boolean;\n  bold?: boolean;\n  animateArrows?: boolean;\n}\n\nconst Collapse = Object.assign(\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  styled(({ light, bigger, bold, animateArrows, ...props }: CollapseProps) => (\n    <AntdCollapse {...props} />\n  ))`\n    .ant-collapse-item {\n      .ant-collapse-header {\n        font-weight: ${({ bold, theme }) =>\n          bold\n            ? theme.typography.weights.bold\n            : theme.typography.weights.normal};\n        font-size: ${({ bigger, theme }) =>\n          bigger ? `${theme.gridUnit * 4}px` : 'inherit'};\n\n        .ant-collapse-arrow svg {\n          transition: ${({ animateArrows }) =>\n            animateArrows ? 'transform 0.24s' : 'none'};\n        }\n\n        ${({ expandIconPosition }) =>\n          expandIconPosition &&\n          expandIconPosition === 'right' &&\n          `\n            .anticon.anticon-right.ant-collapse-arrow > svg {\n              transform: rotate(90deg) !important;\n            }\n          `}\n\n        ${({ light, theme }) =>\n          light &&\n          `\n            color: ${theme.colors.grayscale.light4};\n            .ant-collapse-arrow svg {\n              color: ${theme.colors.grayscale.light4};\n            }\n          `}\n\n        ${({ ghost, bordered, theme }) =>\n          ghost &&\n          bordered &&\n          `\n            border-bottom: 1px solid ${theme.colors.grayscale.light3};\n          `}\n      }\n      .ant-collapse-content {\n        .ant-collapse-content-box {\n          .loading.inline {\n            margin: ${({ theme }) => theme.gridUnit * 12}px auto;\n            display: block;\n          }\n        }\n      }\n    }\n    .ant-collapse-item-active {\n      .ant-collapse-header {\n        ${({ expandIconPosition }) =>\n          expandIconPosition &&\n          expandIconPosition === 'right' &&\n          `\n            .anticon.anticon-right.ant-collapse-arrow > svg {\n              transform: rotate(-90deg) !important;\n            }\n          `}\n      }\n    }\n  `,\n  {\n    Panel: AntdCollapse.Panel,\n  },\n);\n\nexport default Collapse;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { ReactNode, SyntheticEvent } from 'react';\nimport { styled, css, SupersetTheme, t } from '@superset-ui/core';\nimport { Empty } from 'src/components';\nimport Button from 'src/components/Button';\n\nexport enum EmptyStateSize {\n  Small,\n  Medium,\n  Big,\n}\n\nexport interface EmptyStateSmallProps {\n  title: ReactNode;\n  description?: ReactNode;\n  image?: ReactNode;\n}\n\nexport interface EmptyStateProps extends EmptyStateSmallProps {\n  buttonText?: ReactNode;\n  buttonAction?: React.MouseEventHandler<HTMLElement>;\n  className?: string;\n}\n\nexport interface ImageContainerProps {\n  image: ReactNode;\n  size: EmptyStateSize;\n}\n\nconst EmptyStateContainer = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n    align-items: center;\n    justify-content: center;\n    padding: ${theme.gridUnit * 4}px;\n    text-align: center;\n\n    & .ant-empty-image svg {\n      width: auto;\n    }\n\n    & a,\n    & span[role='button'] {\n      color: inherit;\n      text-decoration: underline;\n      &:hover {\n        color: ${theme.colors.grayscale.base};\n      }\n    }\n  `}\n`;\n\nconst TextContainer = styled.div``;\n\nconst Title = styled.p`\n  ${({ theme }) => css`\n    font-size: ${theme.typography.sizes.m}px;\n    color: ${theme.colors.grayscale.light1};\n    margin: ${theme.gridUnit * 2}px 0 0 0;\n    font-weight: ${theme.typography.weights.bold};\n  `}\n`;\n\nconst BigTitle = styled(Title)`\n  ${({ theme }) => css`\n    font-size: ${theme.typography.sizes.l}px;\n    color: ${theme.colors.grayscale.light1};\n    margin-top: ${theme.gridUnit * 4}px;\n  `}\n`;\n\nconst Description = styled.p`\n  ${({ theme }) => css`\n    font-size: ${theme.typography.sizes.s}px;\n    color: ${theme.colors.grayscale.light1};\n    margin: ${theme.gridUnit * 2}px 0 0 0;\n  `}\n`;\n\nconst BigDescription = styled(Description)`\n  ${({ theme }) => css`\n    font-size: ${theme.typography.sizes.m}px;\n  `}\n`;\n\nconst SmallDescription = styled(Description)`\n  ${({ theme }) => css`\n    margin-top: ${theme.gridUnit}px;\n    line-height: 1.2;\n  `}\n`;\n\nconst ActionButton = styled(Button)`\n  ${({ theme }) => css`\n    margin-top: ${theme.gridUnit * 4}px;\n    z-index: 1;\n  `}\n`;\n\nconst getImage = (image: string | ReactNode) =>\n  typeof image === 'string' ? `/static/assets/images/${image}` : image;\n\nconst getImageHeight = (size: EmptyStateSize) => {\n  switch (size) {\n    case EmptyStateSize.Small:\n      return { height: '50px' };\n    case EmptyStateSize.Medium:\n      return { height: '80px' };\n    case EmptyStateSize.Big:\n      return { height: '150px' };\n    default:\n      return { height: '50px' };\n  }\n};\n\nconst ImageContainer = ({ image, size }: ImageContainerProps) => (\n  <Empty\n    description={false}\n    image={getImage(image)}\n    imageStyle={getImageHeight(size)}\n  />\n);\n\nconst handleMouseDown = (e: SyntheticEvent) => {\n  e.preventDefault();\n  e.stopPropagation();\n};\n\nexport const EmptyStateBig = ({\n  title,\n  image,\n  description,\n  buttonAction,\n  buttonText,\n  className,\n}: EmptyStateProps) => (\n  <EmptyStateContainer className={className}>\n    {image && <ImageContainer image={image} size={EmptyStateSize.Big} />}\n    <TextContainer\n      css={(theme: SupersetTheme) =>\n        css`\n          max-width: ${theme.gridUnit * 150}px;\n        `\n      }\n    >\n      <BigTitle>{title}</BigTitle>\n      {description && <BigDescription>{description}</BigDescription>}\n      {buttonAction && buttonText && (\n        <ActionButton\n          buttonStyle=\"primary\"\n          onClick={buttonAction}\n          onMouseDown={handleMouseDown}\n        >\n          {buttonText}\n        </ActionButton>\n      )}\n    </TextContainer>\n  </EmptyStateContainer>\n);\n\nexport const EmptyStateMedium = ({\n  title,\n  image,\n  description,\n  buttonAction,\n  buttonText,\n}: EmptyStateProps) => (\n  <EmptyStateContainer>\n    {image && <ImageContainer image={image} size={EmptyStateSize.Medium} />}\n    <TextContainer\n      css={(theme: SupersetTheme) =>\n        css`\n          max-width: ${theme.gridUnit * 100}px;\n        `\n      }\n    >\n      <Title>{title}</Title>\n      {description && <Description>{description}</Description>}\n      {buttonText && buttonAction && (\n        <ActionButton\n          buttonStyle=\"primary\"\n          onClick={buttonAction}\n          onMouseDown={handleMouseDown}\n        >\n          {buttonText}\n        </ActionButton>\n      )}\n    </TextContainer>\n  </EmptyStateContainer>\n);\n\nexport const EmptyStateSmall = ({\n  title,\n  image,\n  description,\n}: EmptyStateSmallProps) => (\n  <EmptyStateContainer>\n    {image && <ImageContainer image={image} size={EmptyStateSize.Small} />}\n    <TextContainer\n      css={(theme: SupersetTheme) =>\n        css`\n          max-width: ${theme.gridUnit * 75}px;\n        `\n      }\n    >\n      <Title>{title}</Title>\n      {description && <SmallDescription>{description}</SmallDescription>}\n    </TextContainer>\n  </EmptyStateContainer>\n);\n\nconst TRANSLATIONS = {\n  NO_DATABASES_MATCH_TITLE: t('No databases match your search'),\n  NO_DATABASES_AVAILABLE_TITLE: t('There are no databases available'),\n  MANAGE_YOUR_DATABASES_TEXT: t('Manage your databases'),\n  HERE_TEXT: t('here'),\n};\n\nexport const emptyStateComponent = (emptyResultsWithSearch: boolean) => (\n  <EmptyStateSmall\n    image=\"empty.svg\"\n    title={\n      emptyResultsWithSearch\n        ? TRANSLATIONS.NO_DATABASES_MATCH_TITLE\n        : TRANSLATIONS.NO_DATABASES_AVAILABLE_TITLE\n    }\n    description={\n      <p>\n        {TRANSLATIONS.MANAGE_YOUR_DATABASES_TEXT}{' '}\n        <a href=\"/databaseview/list\">{TRANSLATIONS.HERE_TEXT}</a>\n      </p>\n    }\n  />\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\nimport getErrorMessageComponentRegistry from './getErrorMessageComponentRegistry';\nimport { SupersetError, ErrorSource } from './types';\nimport ErrorAlert from './ErrorAlert';\n\nconst DEFAULT_TITLE = t('Unexpected error');\n\ntype Props = {\n  title?: string;\n  error?: SupersetError;\n  link?: string;\n  subtitle?: React.ReactNode;\n  copyText?: string;\n  stackTrace?: string;\n  source?: ErrorSource;\n  description?: string;\n  errorMitigationFunction?: () => void;\n};\n\nexport default function ErrorMessageWithStackTrace({\n  title = DEFAULT_TITLE,\n  error,\n  subtitle,\n  copyText,\n  link,\n  stackTrace,\n  source,\n  description,\n}: Props) {\n  // Check if a custom error message component was registered for this message\n  if (error) {\n    const ErrorMessageComponent = getErrorMessageComponentRegistry().get(\n      error.error_type,\n    );\n    if (ErrorMessageComponent) {\n      return (\n        <ErrorMessageComponent\n          error={error}\n          source={source}\n          subtitle={subtitle}\n        />\n      );\n    }\n  }\n\n  return (\n    <ErrorAlert\n      level=\"warning\"\n      title={title}\n      subtitle={subtitle}\n      copyText={copyText}\n      description={description}\n      source={source}\n      body={\n        link || stackTrace ? (\n          <>\n            {link && (\n              <a href={link} target=\"_blank\" rel=\"noopener noreferrer\">\n                (Request Access)\n              </a>\n            )}\n            <br />\n            {stackTrace && <pre>{stackTrace}</pre>}\n          </>\n        ) : undefined\n      }\n    />\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport Form from 'antd/lib/form';\nimport { styled } from '@superset-ui/core';\n\nconst StyledItem = styled(Form.Item)`\n  ${({ theme }) => `\n    .ant-form-item-label {\n      padding-bottom: ${theme.gridUnit}px;\n      & > label {\n        text-transform: uppercase;\n        font-size: ${theme.typography.sizes.s}px;\n        color: ${theme.colors.grayscale.base};\n\n        &.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n          &::before {\n            display: none;\n          }\n          &::after {\n            display: inline-block;\n            color: ${theme.colors.error.base};\n            font-size: ${theme.typography.sizes.s}px;\n            content: '*';\n          }\n        }\n      }\n    }\n  `}\n`;\n\nexport default StyledItem;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { ReactNode } from 'react';\nimport { styled } from '@superset-ui/core';\n\nexport type FormLabelProps = {\n  children: ReactNode;\n  htmlFor?: string;\n  required?: boolean;\n  className?: string;\n};\n\nconst Label = styled.label`\n  text-transform: uppercase;\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n  margin-bottom: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst RequiredLabel = styled.label`\n  text-transform: uppercase;\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n  margin-bottom: ${({ theme }) => theme.gridUnit}px;\n  &::after {\n    display: inline-block;\n    margin-left: ${({ theme }) => theme.gridUnit}px;\n    color: ${({ theme }) => theme.colors.error.base};\n    font-size: ${({ theme }) => theme.typography.sizes.m}px;\n    content: '*';\n  }\n`;\n\nexport default function FormLabel({\n  children,\n  htmlFor,\n  required = false,\n  className,\n}: FormLabelProps) {\n  const StyledLabel = required ? RequiredLabel : Label;\n  return (\n    <StyledLabel htmlFor={htmlFor} className={className}>\n      {children}\n    </StyledLabel>\n  );\n}\n","var _path;\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgError(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M12 7a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1zm0 8a1 1 0 100 2 1 1 0 000-2zm9.71-7.44l-5.27-5.27a1.05 1.05 0 00-.71-.29H8.27a1.05 1.05 0 00-.71.29L2.29 7.56a1.05 1.05 0 00-.29.71v7.46c.004.265.107.518.29.71l5.27 5.27c.192.183.445.286.71.29h7.46a1.05 1.05 0 00.71-.29l5.27-5.27a1.05 1.05 0 00.29-.71V8.27a1.05 1.05 0 00-.29-.71zM20 15.31L15.31 20H8.69L4 15.31V8.69L8.69 4h6.62L20 8.69v6.62z\",\n    fill: \"currentColor\"\n  })));\n}\n\nexport default SvgError;","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { Input, Tooltip } from 'antd';\nimport { styled, css, SupersetTheme, t } from '@superset-ui/core';\nimport InfoTooltip from 'src/components/InfoTooltip';\nimport Icons from 'src/components/Icons';\nimport errorIcon from 'src/assets/images/icons/error.svg';\nimport FormItem from './FormItem';\nimport FormLabel from './FormLabel';\n\nexport interface LabeledErrorBoundInputProps {\n  label?: string;\n  validationMethods:\n    | { onBlur: (value: any) => void }\n    | { onChange: (value: any) => void };\n  errorMessage?: string | null;\n  helpText?: string;\n  required?: boolean;\n  hasTooltip?: boolean;\n  tooltipText?: string | null;\n  id?: string;\n  classname?: string;\n  visibilityToggle?: boolean;\n  [x: string]: any;\n}\n\nconst StyledInput = styled(Input)`\n  margin: ${({ theme }) => `${theme.gridUnit}px 0 ${theme.gridUnit * 2}px`};\n`;\n\nconst StyledInputPassword = styled(Input.Password)`\n  margin: ${({ theme }) => `${theme.gridUnit}px 0 ${theme.gridUnit * 2}px`};\n`;\n\nconst alertIconStyles = (theme: SupersetTheme, hasError: boolean) => css`\n  .ant-form-item-children-icon {\n    display: none;\n  }\n  ${hasError &&\n  `.ant-form-item-control-input-content {\n      position: relative;\n      &:after {\n        content: ' ';\n        display: inline-block;\n        background: ${theme.colors.error.base};\n        mask: url(${errorIcon});\n        mask-size: cover;\n        width: ${theme.gridUnit * 4}px;\n        height: ${theme.gridUnit * 4}px;\n        position: absolute;\n        right: ${theme.gridUnit * 1.25}px;\n        top: ${theme.gridUnit * 2.75}px;\n      }\n    }`}\n`;\n\nconst StyledFormGroup = styled('div')`\n  input::-webkit-outer-spin-button,\n  input::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n  margin-bottom: ${({ theme }) => theme.gridUnit * 3}px;\n  .ant-form-item {\n    margin-bottom: 0;\n  }\n`;\n\nconst StyledAlignment = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst StyledFormLabel = styled(FormLabel)`\n  margin-bottom: 0;\n`;\n\nconst iconReset = css`\n  &.anticon > * {\n    line-height: 0;\n  }\n`;\n\nconst LabeledErrorBoundInput = ({\n  label,\n  validationMethods,\n  errorMessage,\n  helpText,\n  required = false,\n  hasTooltip = false,\n  tooltipText,\n  id,\n  className,\n  visibilityToggle,\n  ...props\n}: LabeledErrorBoundInputProps) => (\n  <StyledFormGroup className={className}>\n    <StyledAlignment>\n      <StyledFormLabel htmlFor={id} required={required}>\n        {label}\n      </StyledFormLabel>\n      {hasTooltip && (\n        <InfoTooltip tooltip={`${tooltipText}`} viewBox=\"0 -1 24 24\" />\n      )}\n    </StyledAlignment>\n    <FormItem\n      css={(theme: SupersetTheme) => alertIconStyles(theme, !!errorMessage)}\n      validateTrigger={Object.keys(validationMethods)}\n      validateStatus={errorMessage ? 'error' : 'success'}\n      help={errorMessage || helpText}\n      hasFeedback={!!errorMessage}\n    >\n      {visibilityToggle || props.name === 'password' ? (\n        <StyledInputPassword\n          {...props}\n          {...validationMethods}\n          iconRender={visible =>\n            visible ? (\n              <Tooltip title={t('Hide password.')}>\n                <Icons.EyeInvisibleOutlined iconSize=\"m\" css={iconReset} />\n              </Tooltip>\n            ) : (\n              <Tooltip title={t('Show password.')}>\n                <Icons.EyeOutlined\n                  iconSize=\"m\"\n                  css={iconReset}\n                  data-test=\"icon-eye\"\n                />\n              </Tooltip>\n            )\n          }\n          role=\"textbox\"\n        />\n      ) : (\n        <StyledInput {...props} {...validationMethods} />\n      )}\n    </FormItem>\n  </StyledFormGroup>\n);\n\nexport default LabeledErrorBoundInput;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport AntdForm, { FormProps } from 'antd/lib/form';\nimport { styled } from '@superset-ui/core';\n\nconst StyledForm = styled(AntdForm)`\n  &.ant-form label {\n    font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  }\n  .ant-form-item {\n    margin-bottom: ${({ theme }) => theme.gridUnit * 4}px;\n  }\n`;\n\nexport default function Form(props: FormProps) {\n  return <StyledForm {...props} />;\n}\n\nexport type { FormProps };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport { styled } from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\n\nexport interface InfoTooltipProps {\n  className?: string;\n  tooltip: string;\n  placement?:\n    | 'bottom'\n    | 'left'\n    | 'right'\n    | 'top'\n    | 'topLeft'\n    | 'topRight'\n    | 'bottomLeft'\n    | 'bottomRight'\n    | 'leftTop'\n    | 'leftBottom'\n    | 'rightTop'\n    | 'rightBottom'\n    | undefined;\n  trigger?: string | Array<string>;\n  overlayStyle?: any;\n  bgColor?: string;\n  viewBox?: string;\n}\n\nconst StyledTooltip = styled(Tooltip)`\n  cursor: pointer;\n  path:first-of-type {\n    fill: ${({ theme }) => theme.colors.grayscale.base};\n  }\n`;\n\nconst StyledTooltipTitle = styled.span`\n  display: -webkit-box;\n  -webkit-line-clamp: 20;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst defaultOverlayStyle = {\n  fontSize: '12px',\n  lineHeight: '16px',\n};\n\nconst defaultColor = 'rgba(0,0,0,0.9)';\n\nexport default function InfoTooltip({\n  tooltip,\n  placement = 'right',\n  trigger = 'hover',\n  overlayStyle = defaultOverlayStyle,\n  bgColor = defaultColor,\n  viewBox = '0 -2 24 24',\n}: InfoTooltipProps) {\n  return (\n    <StyledTooltip\n      title={<StyledTooltipTitle>{tooltip}</StyledTooltipTitle>}\n      placement={placement}\n      trigger={trigger}\n      overlayStyle={overlayStyle}\n      color={bgColor}\n    >\n      <Icons.InfoSolidSmall className=\"info-solid-small\" viewBox={viewBox} />\n    </StyledTooltip>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled } from '@superset-ui/core';\nimport { Input as AntdInput, InputNumber as AntdInputNumber } from 'antd';\n\nexport const Input = styled(AntdInput)`\n  border: 1px solid ${({ theme }) => theme.colors.secondary.light3};\n  border-radius: ${({ theme }) => theme.borderRadius}px;\n`;\n\nexport const InputNumber = styled(AntdInputNumber)`\n  border: 1px solid ${({ theme }) => theme.colors.secondary.light3};\n  border-radius: ${({ theme }) => theme.borderRadius}px;\n`;\n\nexport const TextArea = styled(AntdInput.TextArea)`\n  border: 1px solid ${({ theme }) => theme.colors.secondary.light3};\n  border-radius: ${({ theme }) => theme.borderRadius}px;\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled } from '@superset-ui/core';\nimport { Menu as AntdMenu } from 'antd';\nimport { MenuProps as AntdMenuProps } from 'antd/lib/menu';\n\nexport type MenuProps = AntdMenuProps;\n\nconst MenuItem = styled(AntdMenu.Item)`\n  > a {\n    text-decoration: none;\n  }\n\n  &.ant-menu-item {\n    height: ${({ theme }) => theme.gridUnit * 8}px;\n    line-height: ${({ theme }) => theme.gridUnit * 8}px;\n    a {\n      border-bottom: none;\n      transition: background-color ${({ theme }) => theme.transitionTiming}s;\n      &:after {\n        content: '';\n        position: absolute;\n        bottom: -3px;\n        left: 50%;\n        width: 0;\n        height: 3px;\n        opacity: 0;\n        transform: translateX(-50%);\n        transition: all ${({ theme }) => theme.transitionTiming}s;\n        background-color: ${({ theme }) => theme.colors.primary.base};\n      }\n      &:focus {\n        border-bottom: none;\n        background-color: transparent;\n        @media (max-width: 767px) {\n          background-color: ${({ theme }) => theme.colors.primary.light5};\n        }\n      }\n    }\n  }\n\n  &.ant-menu-item,\n  &.ant-dropdown-menu-item {\n    span[role='button'] {\n      display: inline-block;\n      width: 100%;\n    }\n    transition-duration: 0s;\n  }\n`;\n\nconst StyledNav = styled(AntdMenu)`\n  line-height: 51px;\n  border: none;\n\n  & > .ant-menu-item,\n  & > .ant-menu-submenu {\n    vertical-align: inherit;\n    &:hover {\n      color: ${({ theme }) => theme.colors.grayscale.dark1};\n    }\n  }\n\n  &:not(.ant-menu-dark) > .ant-menu-submenu,\n  &:not(.ant-menu-dark) > .ant-menu-item {\n    &:hover {\n      border-bottom: none;\n    }\n  }\n\n  &:not(.ant-menu-dark) > .ant-menu-submenu,\n  &:not(.ant-menu-dark) > .ant-menu-item {\n    margin: 0px;\n  }\n\n  & > .ant-menu-item > a {\n    padding: ${({ theme }) => theme.gridUnit * 4}px;\n  }\n`;\n\nconst StyledSubMenu = styled(AntdMenu.SubMenu)`\n  color: ${({ theme }) => theme.colors.grayscale.dark1};\n  border-bottom: none;\n  .ant-menu-submenu-open,\n  .ant-menu-submenu-active {\n    background-color: ${({ theme }) => theme.colors.primary.light5};\n    .ant-menu-submenu-title {\n      color: ${({ theme }) => theme.colors.grayscale.dark1};\n      background-color: ${({ theme }) => theme.colors.primary.light5};\n      border-bottom: none;\n      margin: 0;\n      &:after {\n        opacity: 1;\n        width: calc(100% - 1);\n      }\n    }\n  }\n  .ant-menu-submenu-title {\n    position: relative;\n    top: ${({ theme }) => -theme.gridUnit - 3}px;\n    &:after {\n      content: '';\n      position: absolute;\n      bottom: -3px;\n      left: 50%;\n      width: 0;\n      height: 3px;\n      opacity: 0;\n      transform: translateX(-50%);\n      transition: all ${({ theme }) => theme.transitionTiming}s;\n      background-color: ${({ theme }) => theme.colors.primary.base};\n    }\n  }\n  .ant-menu-submenu-arrow {\n    top: 67%;\n  }\n  & > .ant-menu-submenu-title {\n    padding: 0 ${({ theme }) => theme.gridUnit * 6}px 0\n      ${({ theme }) => theme.gridUnit * 3}px !important;\n    span[role='img'] {\n      position: absolute;\n      right: ${({ theme }) => -theme.gridUnit + -2}px;\n      top: ${({ theme }) => theme.gridUnit * 5.25}px;\n      svg {\n        font-size: ${({ theme }) => theme.gridUnit * 6}px;\n        color: ${({ theme }) => theme.colors.grayscale.base};\n      }\n    }\n    & > span {\n      position: relative;\n      top: 7px;\n    }\n    &:hover {\n      color: ${({ theme }) => theme.colors.primary.base};\n    }\n  }\n`;\n\nexport declare type MenuMode =\n  | 'vertical'\n  | 'vertical-left'\n  | 'vertical-right'\n  | 'horizontal'\n  | 'inline';\n\nexport const Menu = Object.assign(AntdMenu, {\n  Item: MenuItem,\n});\n\nexport const MainNav = Object.assign(StyledNav, {\n  Item: MenuItem,\n  SubMenu: StyledSubMenu,\n  Divider: AntdMenu.Divider,\n  ItemGroup: AntdMenu.ItemGroup,\n});\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport Modal from 'src/components/Modal';\nimport Button from 'src/components/Button';\n\ninterface ModalTriggerProps {\n  dialogClassName?: string;\n  triggerNode: React.ReactNode;\n  modalTitle?: string;\n  modalBody?: React.ReactNode; // not required because it can be generated by beforeOpen\n  modalFooter?: React.ReactNode;\n  beforeOpen?: Function;\n  onExit?: Function;\n  isButton?: boolean;\n  className?: string;\n  tooltip?: string;\n  width?: string;\n  maxWidth?: string;\n  responsive?: boolean;\n  resizable?: boolean;\n  resizableConfig?: any;\n  draggable?: boolean;\n  draggableConfig?: any;\n  destroyOnClose?: boolean;\n}\n\nexport interface ModalTriggerRef {\n  current: {\n    close: Function;\n    open: Function;\n  };\n}\n\nconst ModalTrigger = React.forwardRef(\n  (props: ModalTriggerProps, ref: ModalTriggerRef | null) => {\n    const [showModal, setShowModal] = useState(false);\n    const {\n      beforeOpen = () => {},\n      onExit = () => {},\n      isButton = false,\n      resizable = false,\n      draggable = false,\n      className = '',\n      tooltip,\n      modalFooter,\n      triggerNode,\n      destroyOnClose = true,\n      modalBody,\n      draggableConfig = {},\n      resizableConfig = {},\n      modalTitle,\n      responsive,\n      width,\n      maxWidth,\n    } = props;\n\n    const close = () => {\n      setShowModal(false);\n      onExit?.();\n    };\n\n    const open = (e: React.MouseEvent) => {\n      e.preventDefault();\n      beforeOpen?.();\n      setShowModal(true);\n    };\n\n    if (ref) {\n      ref.current = { close, open }; // eslint-disable-line\n    }\n\n    /* eslint-disable jsx-a11y/interactive-supports-focus */\n    return (\n      <>\n        {isButton && (\n          <Button\n            className=\"modal-trigger\"\n            data-test=\"btn-modal-trigger\"\n            tooltip={tooltip}\n            onClick={open}\n          >\n            {triggerNode}\n          </Button>\n        )}\n        {!isButton && (\n          <span data-test=\"span-modal-trigger\" onClick={open} role=\"button\">\n            {triggerNode}\n          </span>\n        )}\n        <Modal\n          className={className}\n          show={showModal}\n          onHide={close}\n          title={modalTitle}\n          footer={modalFooter}\n          hideFooter={!modalFooter}\n          width={width}\n          maxWidth={maxWidth}\n          responsive={responsive}\n          resizable={resizable}\n          resizableConfig={resizableConfig}\n          draggable={draggable}\n          draggableConfig={draggableConfig}\n          destroyOnClose={destroyOnClose}\n        >\n          {modalBody}\n        </Modal>\n      </>\n    );\n  },\n);\n\nexport default ModalTrigger;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled } from '@superset-ui/core';\nimport { Radio as AntdRadio } from 'antd';\n\nconst StyledRadio = styled(AntdRadio)`\n  .ant-radio-inner {\n    top: -1px;\n    left: 2px;\n    width: ${({ theme }) => theme.gridUnit * 4}px;\n    height: ${({ theme }) => theme.gridUnit * 4}px;\n    border-width: 2px;\n    border-color: ${({ theme }) => theme.colors.grayscale.light2};\n  }\n\n  .ant-radio.ant-radio-checked {\n    .ant-radio-inner {\n      border-width: ${({ theme }) => theme.gridUnit + 1}px;\n      border-color: ${({ theme }) => theme.colors.primary.base};\n    }\n\n    .ant-radio-inner::after {\n      background-color: ${({ theme }) => theme.colors.grayscale.light5};\n      top: 0;\n      left: 0;\n      width: ${({ theme }) => theme.gridUnit + 2}px;\n      height: ${({ theme }) => theme.gridUnit + 2}px;\n    }\n  }\n\n  .ant-radio:hover,\n  .ant-radio:focus {\n    .ant-radio-inner {\n      border-color: ${({ theme }) => theme.colors.primary.dark1};\n    }\n  }\n`;\nconst StyledGroup = styled(AntdRadio.Group)`\n  font-size: inherit;\n`;\n\nexport const Radio = Object.assign(StyledRadio, {\n  Group: StyledGroup,\n  Button: AntdRadio.Button,\n});\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { useTheme, SafeMarkdown } from '@superset-ui/core';\nimport Icons, { IconType } from 'src/components/Icons';\nimport { Tooltip } from 'src/components/Tooltip';\n\nexport interface WarningIconWithTooltipProps {\n  warningMarkdown: string;\n  size?: IconType['iconSize'];\n}\n\nfunction WarningIconWithTooltip({\n  warningMarkdown,\n  size,\n}: WarningIconWithTooltipProps) {\n  const theme = useTheme();\n  return (\n    <Tooltip\n      id=\"warning-tooltip\"\n      title={<SafeMarkdown source={warningMarkdown} />}\n    >\n      <Icons.AlertSolid\n        iconColor={theme.colors.alert.base}\n        iconSize={size}\n        css={{ marginRight: theme.gridUnit * 2 }}\n      />\n    </Tooltip>\n  );\n}\n\nexport default WarningIconWithTooltip;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n// Ids\nexport const DASHBOARD_GRID_ID = 'GRID_ID';\nexport const DASHBOARD_HEADER_ID = 'HEADER_ID';\nexport const DASHBOARD_ROOT_ID = 'ROOT_ID';\nexport const DASHBOARD_VERSION_KEY = 'DASHBOARD_VERSION_KEY';\n\nexport const NEW_COMPONENTS_SOURCE_ID = 'NEW_COMPONENTS_SOURCE_ID';\nexport const NEW_CHART_ID = 'NEW_CHART_ID';\nexport const NEW_COLUMN_ID = 'NEW_COLUMN_ID';\nexport const NEW_DIVIDER_ID = 'NEW_DIVIDER_ID';\nexport const NEW_HEADER_ID = 'NEW_HEADER_ID';\nexport const NEW_MARKDOWN_ID = 'NEW_MARKDOWN_ID';\nexport const NEW_ROW_ID = 'NEW_ROW_ID';\nexport const NEW_TAB_ID = 'NEW_TAB_ID';\nexport const NEW_TABS_ID = 'NEW_TABS_ID';\nexport const NEW_DYNAMIC_COMPONENT = 'NEW_DYNAMIC_COMPONENT';\n\n// grid constants\nexport const DASHBOARD_ROOT_DEPTH = 0;\nexport const GRID_BASE_UNIT = 8;\nexport const GRID_GUTTER_SIZE = 2 * GRID_BASE_UNIT;\nexport const GRID_COLUMN_COUNT = 12;\nexport const GRID_MIN_COLUMN_COUNT = 1;\nexport const GRID_MIN_ROW_UNITS = 5;\nexport const GRID_MAX_ROW_UNITS = 100;\nexport const GRID_MIN_ROW_HEIGHT = GRID_GUTTER_SIZE;\nexport const GRID_DEFAULT_CHART_WIDTH = 4;\n\n// Header types\nexport const SMALL_HEADER = 'SMALL_HEADER';\nexport const MEDIUM_HEADER = 'MEDIUM_HEADER';\nexport const LARGE_HEADER = 'LARGE_HEADER';\n\n// Style types\nexport const BACKGROUND_WHITE = 'BACKGROUND_WHITE';\nexport const BACKGROUND_TRANSPARENT = 'BACKGROUND_TRANSPARENT';\n\n// undo-redo\nexport const UNDO_LIMIT = 50;\n\n// save dash options\nexport const SAVE_TYPE_OVERWRITE = 'overwrite';\nexport const SAVE_TYPE_OVERWRITE_CONFIRMED = 'overwriteConfirmed';\nexport const SAVE_TYPE_NEWDASHBOARD = 'newDashboard';\n\n// default dashboard layout data size limit\n// could be overwritten by server-side config\nexport const DASHBOARD_POSITION_DATA_LIMIT = 65535;\n\n// in-component element types: can be added into\n// directPathToChild, used for in dashboard navigation and focus\nexport const IN_COMPONENT_ELEMENT_TYPES = ['LABEL'];\n\n// filter scope selector filter fields pane root id\nexport const ALL_FILTERS_ROOT = 'ALL_FILTERS_ROOT';\n\nexport enum DashboardStandaloneMode {\n  NONE = 0,\n  HIDE_NAV = 1,\n  HIDE_NAV_AND_TITLE = 2,\n  REPORT = 3,\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t } from '@superset-ui/core';\n\nexport const AGGREGATES = {\n  AVG: 'AVG',\n  COUNT: 'COUNT',\n  COUNT_DISTINCT: 'COUNT_DISTINCT',\n  MAX: 'MAX',\n  MIN: 'MIN',\n  SUM: 'SUM',\n};\nexport const AGGREGATES_OPTIONS = Object.values(AGGREGATES);\n\nexport enum Operators {\n  EQUALS = 'EQUALS',\n  NOT_EQUALS = 'NOT_EQUALS',\n  LESS_THAN = 'LESS_THAN',\n  LESS_THAN_OR_EQUAL = 'LESS_THAN_OR_EQUAL',\n  GREATER_THAN = 'GREATER_THAN',\n  GREATER_THAN_OR_EQUAL = 'GREATER_THAN_OR_EQUAL',\n  IN = 'IN',\n  NOT_IN = 'NOT_IN',\n  LIKE = 'LIKE',\n  ILIKE = 'ILIKE',\n  REGEX = 'REGEX',\n  IS_NOT_NULL = 'IS_NOT_NULL',\n  IS_NULL = 'IS_NULL',\n  LATEST_PARTITION = 'LATEST_PARTITION',\n  IS_TRUE = 'IS_TRUE',\n  IS_FALSE = 'IS_FALSE',\n  TEMPORAL_RANGE = 'TEMPORAL_RANGE',\n}\n\nexport interface OperatorType {\n  display: string;\n  operation: string;\n}\n\nexport const OPERATOR_ENUM_TO_OPERATOR_TYPE: {\n  [key in Operators]: OperatorType;\n} = {\n  [Operators.EQUALS]: { display: t('Equal to (=)'), operation: '==' },\n  [Operators.NOT_EQUALS]: { display: t('Not equal to ()'), operation: '!=' },\n  [Operators.LESS_THAN]: { display: t('Less than (<)'), operation: '<' },\n  [Operators.LESS_THAN_OR_EQUAL]: {\n    display: t('Less or equal (<=)'),\n    operation: '<=',\n  },\n  [Operators.GREATER_THAN]: { display: t('Greater than (>)'), operation: '>' },\n  [Operators.GREATER_THAN_OR_EQUAL]: {\n    display: t('Greater or equal (>=)'),\n    operation: '>=',\n  },\n  [Operators.IN]: { display: t('In'), operation: 'IN' },\n  [Operators.NOT_IN]: { display: t('Not in'), operation: 'NOT IN' },\n  [Operators.LIKE]: { display: t('Like'), operation: 'LIKE' },\n  [Operators.ILIKE]: {\n    display: t('Like (case insensitive)'),\n    operation: 'ILIKE',\n  },\n  [Operators.REGEX]: { display: t('Regex'), operation: 'REGEX' },\n  [Operators.IS_NOT_NULL]: {\n    display: t('Is not null'),\n    operation: 'IS NOT NULL',\n  },\n  [Operators.IS_NULL]: { display: t('Is null'), operation: 'IS NULL' },\n  [Operators.LATEST_PARTITION]: {\n    display: t('use latest_partition template'),\n    operation: 'LATEST PARTITION',\n  },\n  [Operators.IS_TRUE]: { display: t('Is true'), operation: '==' },\n  [Operators.IS_FALSE]: { display: t('Is false'), operation: '==' },\n  [Operators.TEMPORAL_RANGE]: {\n    display: t('TEMPORAL_RANGE'),\n    operation: 'TEMPORAL_RANGE',\n  },\n};\n\nexport const OPERATORS_OPTIONS = Object.values(Operators) as Operators[];\n\nexport const TABLE_ONLY_OPERATORS = [Operators.LIKE, Operators.ILIKE];\nexport const HAVING_OPERATORS = [\n  Operators.EQUALS,\n  Operators.NOT_EQUALS,\n  Operators.LESS_THAN,\n  Operators.LESS_THAN_OR_EQUAL,\n  Operators.GREATER_THAN,\n  Operators.GREATER_THAN_OR_EQUAL,\n];\nexport const MULTI_OPERATORS = new Set([Operators.IN, Operators.NOT_IN]);\n// CUSTOM_OPERATORS will show operator in simple mode,\n// but will generate customized sqlExpression\nexport const CUSTOM_OPERATORS = new Set([\n  Operators.LATEST_PARTITION,\n  Operators.TEMPORAL_RANGE,\n]);\n// DISABLE_INPUT_OPERATORS will disable filter value input\n// in adhocFilter control\nexport const DISABLE_INPUT_OPERATORS = [\n  Operators.IS_NOT_NULL,\n  Operators.IS_NULL,\n  Operators.LATEST_PARTITION,\n  Operators.IS_TRUE,\n  Operators.IS_FALSE,\n];\n\nexport const sqlaAutoGeneratedMetricNameRegex =\n  /^(sum|min|max|avg|count|count_distinct)__.*$/i;\nexport const sqlaAutoGeneratedMetricRegex =\n  /^(LONG|DOUBLE|FLOAT)?(SUM|AVG|MAX|MIN|COUNT)\\([A-Z0-9_.\"]*\\)$/i;\nexport const druidAutoGeneratedMetricRegex =\n  /^(LONG|DOUBLE|FLOAT)?(SUM|MAX|MIN|COUNT)\\([A-Z0-9_.\"]*\\)$/i;\n\nexport const TIME_FILTER_LABELS = {\n  time_range: t('Time range'),\n  granularity_sqla: t('Time column'),\n  time_grain_sqla: t('Time grain'),\n  granularity: t('Time granularity'),\n};\n\nexport const FILTER_CONFIG_ATTRIBUTES = {\n  CLEARABLE: 'clearable',\n  DEFAULT_VALUE: 'defaultValue',\n  MULTIPLE: 'multiple',\n  SEARCH_ALL_OPTIONS: 'searchAllOptions',\n  SORT_ASCENDING: 'asc',\n  SORT_METRIC: 'metric',\n};\n\nexport const FILTER_OPTIONS_LIMIT = 1000;\n\n/**\n * Map control names to their key in extra_filters\n */\nexport const TIME_FILTER_MAP = {\n  time_range: '__time_range',\n  granularity_sqla: '__time_col',\n  time_grain_sqla: '__time_grain',\n  granularity: '__granularity',\n};\n\nexport const POPOVER_INITIAL_HEIGHT = 240;\nexport const POPOVER_INITIAL_WIDTH = 320;\nexport const UNRESIZABLE_POPOVER_WIDTH = 296;\n\nexport const UNSAVED_CHART_ID = 0;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { omit } from 'lodash';\nimport { SupersetClient, JsonObject } from '@superset-ui/core';\n\ntype Payload = {\n  datasource_id: number;\n  datasource_type: string;\n  form_data: string;\n  chart_id?: number;\n};\n\nconst TEMPORARY_CONTROLS = ['url_params'];\n\nexport const sanitizeFormData = (formData: JsonObject): JsonObject =>\n  omit(formData, TEMPORARY_CONTROLS);\n\nconst assembleEndpoint = (key?: string, tabId?: string) => {\n  let endpoint = 'api/v1/explore/form_data';\n  if (key) {\n    endpoint = endpoint.concat(`/${key}`);\n  }\n  if (tabId) {\n    endpoint = endpoint.concat(`?tab_id=${tabId}`);\n  }\n  return endpoint;\n};\n\nconst assemblePayload = (\n  datasourceId: number,\n  datasourceType: string,\n  formData: JsonObject,\n  chartId?: number,\n) => {\n  const payload: Payload = {\n    datasource_id: datasourceId,\n    datasource_type: datasourceType,\n    form_data: JSON.stringify(sanitizeFormData(formData)),\n  };\n  if (chartId) {\n    payload.chart_id = chartId;\n  }\n  return payload;\n};\n\nexport const postFormData = (\n  datasourceId: number,\n  datasourceType: string,\n  formData: JsonObject,\n  chartId?: number,\n  tabId?: string,\n): Promise<string> =>\n  SupersetClient.post({\n    endpoint: assembleEndpoint(undefined, tabId),\n    jsonPayload: assemblePayload(\n      datasourceId,\n      datasourceType,\n      formData,\n      chartId,\n    ),\n  }).then(r => r.json.key);\n\nexport const putFormData = (\n  datasourceId: number,\n  datasourceType: string,\n  key: string,\n  formData: JsonObject,\n  chartId?: number,\n  tabId?: string,\n): Promise<string> =>\n  SupersetClient.put({\n    endpoint: assembleEndpoint(key, tabId),\n    jsonPayload: assemblePayload(\n      datasourceId,\n      datasourceType,\n      formData,\n      chartId,\n    ),\n  }).then(r => r.json.message);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { makeApi } from '@superset-ui/core';\nimport { useEffect, useMemo, useRef, useState } from 'react';\n\nexport enum ResourceStatus {\n  LOADING = 'loading',\n  COMPLETE = 'complete',\n  ERROR = 'error',\n}\n\n/**\n * An object containing the data fetched from the API,\n * as well as loading and error info\n */\nexport type Resource<T> = LoadingState | CompleteState<T> | ErrorState;\n\n// Trying out something a little different: a separate type per status.\n// This should let Typescript know whether a Resource has a result or error.\n// It's possible that I'm expecting too much from Typescript here.\n// If this ends up causing problems, we can change the type to:\n//\n// export type Resource<T> = {\n//   status: ResourceStatus;\n//   result: null | T;\n//   error: null | Error;\n// }\n\ntype LoadingState = {\n  status: ResourceStatus.LOADING;\n  result: null;\n  error: null;\n};\n\ntype CompleteState<T> = {\n  status: ResourceStatus.COMPLETE;\n  result: T;\n  error: null;\n};\n\ntype ErrorState = {\n  status: ResourceStatus.ERROR;\n  result: null;\n  error: Error;\n};\n\nconst initialState: LoadingState = {\n  status: ResourceStatus.LOADING,\n  result: null,\n  error: null,\n};\n\n/**\n * A general-purpose hook to fetch the response from an endpoint.\n * Returns the full response body from the API, including metadata.\n *\n * Note: You likely want {useApiV1Resource} instead of this!\n *\n * TODO Store the state in redux or something, share state between hook instances.\n *\n * TODO Include a function in the returned resource object to refresh the data.\n *\n * A core design decision here is composition > configuration,\n * and every hook should only have one job.\n * Please address new needs with new hooks if possible,\n * rather than adding config options to this hook.\n *\n * @param endpoint The url where the resource is located.\n */\nexport function useApiResourceFullBody<RESULT>(\n  endpoint: string,\n): Resource<RESULT> {\n  const [resource, setResource] = useState<Resource<RESULT>>(initialState);\n  const cancelRef = useRef<() => void>(() => {});\n\n  useEffect(() => {\n    // If refresh is implemented, this will need to change.\n    // The previous values should stay during refresh.\n    setResource(initialState);\n\n    // when this effect runs, the endpoint has changed.\n    // cancel any current calls so that state doesn't get messed up.\n    cancelRef.current();\n    let cancelled = false;\n    cancelRef.current = () => {\n      cancelled = true;\n    };\n\n    const fetchResource = makeApi<{}, RESULT>({\n      method: 'GET',\n      endpoint,\n    });\n\n    fetchResource({})\n      .then(result => {\n        if (!cancelled) {\n          setResource({\n            status: ResourceStatus.COMPLETE,\n            result,\n            error: null,\n          });\n        }\n      })\n      .catch(error => {\n        if (!cancelled) {\n          setResource({\n            status: ResourceStatus.ERROR,\n            result: null,\n            error,\n          });\n        }\n      });\n\n    // Cancel the request when the component un-mounts\n    return () => {\n      cancelled = true;\n    };\n  }, [endpoint]);\n\n  return resource;\n}\n\n/**\n * For when you want to transform the result of an api resource hook before using it.\n *\n * @param resource the Resource object returned from useApiV1Resource\n * @param transformFn a callback that transforms the result object into the shape you want.\n * Make sure to use a persistent function for this so it doesn't constantly recalculate!\n */\nexport function useTransformedResource<IN, OUT>(\n  resource: Resource<IN>,\n  transformFn: (result: IN) => OUT,\n): Resource<OUT> {\n  return useMemo(() => {\n    if (resource.status !== ResourceStatus.COMPLETE) {\n      // While incomplete, there is no result - no need to transform.\n      return resource;\n    }\n    try {\n      return {\n        ...resource,\n        result: transformFn(resource.result),\n      };\n    } catch (e) {\n      return {\n        status: ResourceStatus.ERROR,\n        result: null,\n        error: e,\n      };\n    }\n  }, [resource, transformFn]);\n}\n\n// returns the \"result\" field from a fetched API v1 endpoint\nconst extractInnerResult = <T>(responseBody: { result: T }) =>\n  responseBody.result;\n\n/**\n * A general-purpose hook to fetch a Superset resource from a v1 API endpoint.\n * Handles request lifecycle and async logic so you don't have to.\n *\n * This returns the data under the \"result\" field in the API response body.\n * If you need the full response body, use {useFullApiResource} instead.\n *\n * @param endpoint The url where the resource is located.\n */\nexport function useApiV1Resource<RESULT>(endpoint: string): Resource<RESULT> {\n  return useTransformedResource(\n    useApiResourceFullBody<{ result: RESULT }>(endpoint),\n    extractInnerResult,\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { useEffect, useRef } from 'react';\n\n/**\n * Pass in a piece of state.\n * This hook returns what the value of that state was in the previous render.\n * Returns undefined (or whatever value you specify) the first time.\n */\nexport function usePrevious<T>(value: T): T | undefined;\nexport function usePrevious<T, INIT>(value: T, initialValue: INIT): T | INIT;\nexport function usePrevious<T>(value: T, initialValue?: any): T {\n  const previous = useRef<T>(initialValue);\n  useEffect(() => {\n    // useEffect runs after the render completes\n    previous.current = value;\n  }, [value]);\n  return previous.current;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n// Log event names ------------------------------------------------------------\nexport const LOG_ACTIONS_LOAD_CHART = 'load_chart';\nexport const LOG_ACTIONS_RENDER_CHART = 'render_chart';\nexport const LOG_ACTIONS_HIDE_BROWSER_TAB = 'hide_browser_tab';\n\nexport const LOG_ACTIONS_MOUNT_DASHBOARD = 'mount_dashboard';\nexport const LOG_ACTIONS_MOUNT_EXPLORER = 'mount_explorer';\n\nexport const LOG_ACTIONS_SELECT_DASHBOARD_TAB = 'select_dashboard_tab';\nexport const LOG_ACTIONS_FORCE_REFRESH_CHART = 'force_refresh_chart';\nexport const LOG_ACTIONS_CHANGE_EXPLORE_CONTROLS = 'change_explore_controls';\nexport const LOG_ACTIONS_TOGGLE_EDIT_DASHBOARD = 'toggle_edit_dashboard';\nexport const LOG_ACTIONS_FORCE_REFRESH_DASHBOARD = 'force_refresh_dashboard';\nexport const LOG_ACTIONS_PERIODIC_RENDER_DASHBOARD =\n  'periodic_render_dashboard';\nexport const LOG_ACTIONS_EXPLORE_DASHBOARD_CHART = 'explore_dashboard_chart';\nexport const LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART =\n  'export_csv_dashboard_chart';\nexport const LOG_ACTIONS_CHANGE_DASHBOARD_FILTER = 'change_dashboard_filter';\nexport const LOG_ACTIONS_DATASET_CREATION_EMPTY_CANCELLATION =\n  'dataset_creation_empty_cancellation';\nexport const LOG_ACTIONS_DATASET_CREATION_DATABASE_CANCELLATION =\n  'dataset_creation_database_cancellation';\nexport const LOG_ACTIONS_DATASET_CREATION_SCHEMA_CANCELLATION =\n  'dataset_creation_schema_cancellation';\nexport const LOG_ACTIONS_DATASET_CREATION_TABLE_CANCELLATION =\n  'dataset_creation_table_cancellation';\nexport const LOG_ACTIONS_DATASET_CREATION_SUCCESS = 'dataset_creation_success';\nexport const LOG_ACTIONS_SPA_NAVIGATION = 'spa_navigation';\nexport const LOG_ACTIONS_CONFIRM_OVERWRITE_DASHBOARD_METADATA =\n  'confirm_overwrite_dashboard_metadata';\nexport const LOG_ACTIONS_DASHBOARD_DOWNLOAD_AS_IMAGE =\n  'dashboard_download_as_image';\nexport const LOG_ACTIONS_CHART_DOWNLOAD_AS_IMAGE = 'chart_download_as_image';\nexport const LOG_ACTIONS_SQLLAB_WARN_LOCAL_STORAGE_USAGE =\n  'sqllab_warn_local_storage_usage';\n\n// Log event types --------------------------------------------------------------\nexport const LOG_EVENT_TYPE_TIMING = new Set([\n  LOG_ACTIONS_LOAD_CHART,\n  LOG_ACTIONS_RENDER_CHART,\n  LOG_ACTIONS_HIDE_BROWSER_TAB,\n]);\nexport const LOG_EVENT_TYPE_USER = new Set([\n  LOG_ACTIONS_MOUNT_DASHBOARD,\n  LOG_ACTIONS_SELECT_DASHBOARD_TAB,\n  LOG_ACTIONS_EXPLORE_DASHBOARD_CHART,\n  LOG_ACTIONS_FORCE_REFRESH_CHART,\n  LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART,\n  LOG_ACTIONS_CHANGE_DASHBOARD_FILTER,\n  LOG_ACTIONS_CHANGE_EXPLORE_CONTROLS,\n  LOG_ACTIONS_TOGGLE_EDIT_DASHBOARD,\n  LOG_ACTIONS_FORCE_REFRESH_DASHBOARD,\n  LOG_ACTIONS_PERIODIC_RENDER_DASHBOARD,\n  LOG_ACTIONS_MOUNT_EXPLORER,\n  LOG_ACTIONS_CONFIRM_OVERWRITE_DASHBOARD_METADATA,\n  LOG_ACTIONS_DASHBOARD_DOWNLOAD_AS_IMAGE,\n  LOG_ACTIONS_CHART_DOWNLOAD_AS_IMAGE,\n]);\n\nexport const LOG_EVENT_DATASET_TYPE_DATASET_CREATION = [\n  LOG_ACTIONS_DATASET_CREATION_EMPTY_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_DATABASE_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_SCHEMA_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_TABLE_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_SUCCESS,\n];\n\nexport const Logger = {\n  timeOriginOffset: 0,\n\n  markTimeOrigin() {\n    this.timeOriginOffset = window.performance.now();\n  },\n\n  // note that this returns ms since last navigation, NOT ms since epoch\n  getTimestamp() {\n    return Math.round(window.performance.now() - this.timeOriginOffset);\n  },\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Dispatch } from 'redux';\n\nexport const LOG_EVENT = 'LOG_EVENT';\n\nexport function logEvent(eventName: string, eventData: Record<string, any>) {\n  return (dispatch: Dispatch) =>\n    dispatch({\n      type: LOG_EVENT,\n      payload: {\n        eventName,\n        eventData,\n      },\n    });\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { TableTab } from 'src/views/CRUD/types';\nimport { DashboardContextForExplore } from 'src/types/DashboardContextForExplore';\n\nexport enum LocalStorageKeys {\n  /**\n   * START LEGACY LOCAL STORAGE KEYS\n   *\n   * Do not follow the patterns here for key names. Keys should instead be namespaced to avoid\n   * collisions.\n   *\n   * TODO: Update all local storage keys to follow the new pattern. This is a breaking change,\n   * and therefore should be done in a major release.\n   */\n  filter_box_transition_snoozed_at = 'filter_box_transition_snoozed_at',\n  db = 'db',\n  chart_split_sizes = 'chart_split_sizes',\n  controls_width = 'controls_width',\n  datasource_width = 'datasource_width',\n  is_datapanel_open = 'is_datapanel_open',\n  homepage_chart_filter = 'homepage_chart_filter',\n  homepage_dashboard_filter = 'homepage_dashboard_filter',\n  homepage_collapse_state = 'homepage_collapse_state',\n  homepage_activity_filter = 'homepage_activity_filter',\n  datasetname_set_successful = 'datasetname_set_successful',\n  /** END LEGACY LOCAL STORAGE KEYS */\n\n  /**\n   * New local storage keys should be namespaced to avoid collisions. Keys should be named in the\n   * form [namespace]__[key].\n   *\n   * Example:\n   * sqllab__is_autocomplete_enabled\n   */\n  sqllab__is_autocomplete_enabled = 'sqllab__is_autocomplete_enabled',\n  explore__data_table_original_formatted_time_columns = 'explore__data_table_original_formatted_time_columns',\n  dashboard__custom_filter_bar_widths = 'dashboard__custom_filter_bar_widths',\n  dashboard__explore_context = 'dashboard__explore_context',\n  common__resizable_sidebar_widths = 'common__resizable_sidebar_widths',\n}\n\nexport type LocalStorageValues = {\n  filter_box_transition_snoozed_at: Record<number, number>;\n  db: object | null;\n  chart_split_sizes: [number, number];\n  controls_width: number;\n  datasource_width: number;\n  is_datapanel_open: boolean;\n  homepage_chart_filter: TableTab;\n  homepage_dashboard_filter: TableTab;\n  homepage_collapse_state: string[];\n  datasetname_set_successful: boolean;\n  homepage_activity_filter: TableTab | null;\n  sqllab__is_autocomplete_enabled: boolean;\n  explore__data_table_original_formatted_time_columns: Record<string, string[]>;\n  dashboard__custom_filter_bar_widths: Record<string, number>;\n  dashboard__explore_context: Record<string, DashboardContextForExplore>;\n  common__resizable_sidebar_widths: Record<string, number>;\n};\n\n/*\n * This function should not be used directly, as it doesn't provide any type safety or any\n * guarantees that the globally namespaced localstorage key is correct.\n *\n * Instead, use getItem and setItem. Any legacy uses should be updated/migrated in future\n * Superset versions (as they may require breaking changes).\n * */\nexport function dangerouslyGetItemDoNotUse(\n  key: string,\n  defaultValue: any,\n): any {\n  try {\n    const value = localStorage.getItem(key);\n    if (value === null) {\n      return defaultValue;\n    }\n    return JSON.parse(value);\n  } catch {\n    return defaultValue;\n  }\n}\n\n/*\n * This function should not be used directly, as it doesn't provide any type safety or any\n * guarantees that the globally namespaced localstorage key is correct.\n *\n * Instead, use getItem and setItem. Any legacy uses should be updated/migrated in future\n * Superset versions (as they may require breaking changes).\n * */\nexport function dangerouslySetItemDoNotUse(key: string, value: any): void {\n  try {\n    localStorage.setItem(key, JSON.stringify(value));\n  } catch {\n    // Catch in case localStorage is unavailable\n  }\n}\n\nexport function getItem<K extends LocalStorageKeys>(\n  key: K,\n  defaultValue: LocalStorageValues[K],\n): LocalStorageValues[K] {\n  return dangerouslyGetItemDoNotUse(key, defaultValue);\n}\n\nexport function setItem<K extends LocalStorageKeys>(\n  key: K,\n  value: LocalStorageValues[K],\n): void {\n  dangerouslySetItemDoNotUse(key, value);\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * A Stringify function that will not crash when it runs into circular JSON references,\n * unlike JSON.stringify. Any circular references are simply omitted, as if there had\n * been no data present\n * @param object any JSON object to be stringified\n */\nexport function safeStringify(object: any): string {\n  const cache = new Set();\n  return JSON.stringify(object, (key, value) => {\n    if (typeof value === 'object' && value !== null) {\n      if (cache.has(value)) {\n        // We've seen this object before\n        try {\n          // Quick deep copy to duplicate if this is a repeat rather than a circle.\n          return JSON.parse(JSON.stringify(value));\n        } catch (err) {\n          // Discard key if value cannot be duplicated.\n          return; // eslint-disable-line consistent-return\n        }\n      }\n      // Store the value in our cache.\n      cache.add(value);\n    }\n    return value;\n  });\n}\n"],"names":["untitledQueryRegex","untitledQuery","RESET_STATE","ADD_QUERY_EDITOR","UPDATE_QUERY_EDITOR","QUERY_EDITOR_SAVED","CLONE_QUERY_TO_NEW_TAB","REMOVE_QUERY_EDITOR","MERGE_TABLE","REMOVE_TABLES","END_QUERY","REMOVE_QUERY","EXPAND_TABLE","COLLAPSE_TABLE","QUERY_EDITOR_SETDB","QUERY_EDITOR_SET_SCHEMA","QUERY_EDITOR_SET_SCHEMA_OPTIONS","QUERY_EDITOR_SET_TABLE_OPTIONS","QUERY_EDITOR_SET_TITLE","QUERY_EDITOR_SET_AUTORUN","QUERY_EDITOR_SET_SQL","QUERY_EDITOR_SET_QUERY_LIMIT","QUERY_EDITOR_SET_TEMPLATE_PARAMS","QUERY_EDITOR_SET_SELECTED_TEXT","QUERY_EDITOR_SET_FUNCTION_NAMES","QUERY_EDITOR_PERSIST_HEIGHT","QUERY_EDITOR_TOGGLE_LEFT_BAR","MIGRATE_QUERY_EDITOR","MIGRATE_TAB_HISTORY","MIGRATE_TABLE","MIGRATE_QUERY","SET_DATABASES","SET_ACTIVE_QUERY_EDITOR","LOAD_QUERY_EDITOR","SET_TABLES","SET_ACTIVE_SOUTHPANE_TAB","REFRESH_QUERIES","SET_USER_OFFLINE","RUN_QUERY","START_QUERY","STOP_QUERY","REQUEST_QUERY_RESULTS","QUERY_SUCCESS","QUERY_FAILED","CLEAR_QUERY_RESULTS","REMOVE_DATA_PREVIEW","CHANGE_DATA_PREVIEW_ID","START_QUERY_VALIDATION","QUERY_VALIDATION_RETURNED","QUERY_VALIDATION_FAILED","COST_ESTIMATE_STARTED","COST_ESTIMATE_RETURNED","COST_ESTIMATE_FAILED","CREATE_DATASOURCE_STARTED","CREATE_DATASOURCE_SUCCESS","CREATE_DATASOURCE_FAILED","addInfoToast","addInfoToastAction","addSuccessToast","addSuccessToastAction","addDangerToast","addDangerToastAction","addWarningToast","addWarningToastAction","CtasEnum","TABLE","VIEW","ERR_MSG_CANT_LOAD_QUERY","t","queryClientMapping","id","db_id","label","template_parameters","fieldConverter","mapping","obj","mapKeys","value","key","convertQueryToServer","invert","convertQueryToClient","getUpToDateQuery","rootState","queryEditor","sqlLab","unsavedQueryEditor","resetState","type","startQueryValidation","query","Object","assign","shortid","queryValidationReturned","results","queryValidationFailed","message","error","updateQueryEditor","alterations","scheduleQuery","dispatch","SupersetClient","endpoint","postPayload","stringify","then","catch","estimateQueryCost","getState","dbId","schema","sql","selectedText","templateParams","requestSql","Promise","all","JSON","parse","json","response","getClientErrorObject","statusText","startQuery","progress","startDttm","now","state","runAsync","cached","querySuccess","sqlEditorId","isDataPreview","isFeatureEnabled","FeatureFlag","encodeURI","latest_query_id","resolve","queryFailed","msg","link","errors","stopQuery","clearQueryResults","removeDataPreview","table","requestQueryResults","fetchQueryResults","displayLimit","queryParams","rison","resultsKey","rows","parseMethod","runQuery","client_id","database_id","sql_editor_id","tab","tmp_table_name","tempTable","select_as_cta","ctas","ctas_method","queryLimit","expand_data","search","window","location","body","headers","COMMON_ERR_MESSAGES","runQueryFromSqlEditor","database","defaultQueryLimit","ctasMethod","qe","name","allow_run_async","updateTabState","reRunQuery","validateQuery","template_params","result","postStopQuery","setDatabases","databases","migrateQueryEditorFromLocalStorage","tables","queries","newQueryEditor","toString","oldQueryEditor","oldId","newId","map","queryEditorId","newTable","oldTable","migrateTable","queryId","migrateQuery","addQueryEditor","addNewQueryEditor","queryEditors","tabHistory","defaultDbId","common","activeQueryEditor","find","length","dbIds","values","firstDbId","Math","min","undefined","autorun","warning","initialTitle","resultTitle","untitledQueryNumbers","filter","match","replace","largestNumber","max","newQueryTabName","conf","DEFAULT_SQLLAB_LIMIT","cloneQueryToNewTab","sourceQueryEditor","maxRow","setActiveQueryEditor","status","loadQueryEditor","setTables","tableSchemas","tableSchema","description","columns","selectStar","primaryKey","foreignKeys","indexes","dataPreviewQueryId","tab_state_id","expanded","isMetadataLoading","isExtraMetadataLoading","switchQueryEditor","loaded","loadedQueryEditor","latestQueryId","latest_query","query_limit","remoteId","saved_query","validationResult","completed","hideLeftBar","hide_left_bar","table_schemas","setActiveSouthPaneTab","tabId","toggleLeftBar","removeQueryEditor","removeAllOtherQueryEditors","forEach","otherQueryEditor","removeQuery","queryEditorSetDb","queryEditorSetSchema","queryEditorSetSchemaOptions","options","queryEditorSetTableOptions","queryEditorSetAutorun","queryEditorSetTitle","saveQuery","clientId","payload","jsonPayload","savedQuery","addSavedQueryToTabState","saved_query_id","updateSavedQuery","e","console","queryEditorSetSql","queryEditorSetAndSaveSql","targetQueryEditor","queryEditorSetQueryLimit","queryEditorSetTemplateParams","queryEditorSetSelectedText","mergeTable","prepend","getTableMetadata","encodeURIComponent","getTableExtendedMetadata","addTable","tableName","schemaName","sync","disable_data_preview","dataPreviewQuery","resultJson","changeDataPreviewId","oldQueryId","newQuery","reFetchQueryResults","expandTable","collapseTable","removeTables","tablesToRemove","Boolean","refreshQueries","alteredQueries","setUserOffline","offline","persistEditorHeight","northPercent","southPercent","popStoredQuery","urlId","parseInt","popSavedQuery","saveQueryId","queryEditorProps","popQuery","queryData","tab_name","popDatasourceQuery","datasourceKey","QUERY_TEXT","datasetId","split","select_star","createDatasourceStarted","createDatasourceSuccess","data","datasource","table_id","createDatasourceFailed","err","createDatasource","vizOptions","reject","createCtasDatasource","errorMsg","Error","queryEditorSetFunctionNames","functionNames","function_names","getChartKey","explore","slice","form_data","slice_id","UNSAVED_CHART_ID","requestCounter","getHostName","allowDomainSharding","currentIndex","availableDomains","getAnnotationJsonUrl","force","URI","pathname","safeStringify","getURIDirectory","endpointType","mountExploreUrl","extraSearch","uri","directory","keys","URL_PARAMS","standalone","DashboardStandaloneMode","getChartDataUri","path","qs","protocol","hostname","port","getExploreUrl","formData","curUrl","requestParams","method","label_colors","extra_filters","adhoc_filters","viz_type","csv","samples","paramNames","hasOwnProperty","shouldUseLegacyApi","vizMetadata","getChartMetadataRegistry","get","useLegacyApi","buildV1ChartDataPayload","resultFormat","resultType","setDataMask","ownState","getChartBuildQueryRegistry","buildQueryformData","buildQueryContext","baseQueryObject","result_format","result_type","hooks","getLegacyEndpointType","exportChart","url","exploreChart","useDebouncedEffect","effect","delay","deps","callback","useCallback","useEffect","handler","setTimeout","clearTimeout","getSimpleSQLExpression","subject","operator","comparator","isMulti","MULTI_OPERATORS","op","OPERATOR_ENUM_TO_OPERATOR_TYPE","operation","indexOf","expression","firstValue","Array","isArray","comparatorArray","ensureIsArray","isString","Number","isNaN","quote","prefix","suffix","formattedComparators","val","optionLabel","String","join","formatSelectOptions","opt","getDatasourceAsSaveableDataset","source","datasource_name","fDuration","t1","t2","format","diffSec","moment","Date","utc","valueOf","document","getElementById","Set","URLSearchParams","from","bootstrapData","getBootstrapData","initFeatureFlags","feature_flags","SUPERSET_WEBSERVER_DOMAINS","hostName","add","getDomainsConfig","allowCrossDomain","InfoTooltipWithTrigger","tooltip","bsStyle","onClick","icon","className","placement","iconsStyle","iconClass","iconEl","role","tabIndex","style","cursor","onKeyPress","event","title","Tooltip","overlayStyle","color","props","theme","useTheme","defaultColor","colors","grayscale","dark2","styles","css","fontSize","typography","sizes","s","lineHeight","maxWidth","gridUnit","minWidth","align","offset","trigger","mouseLeaveDelay","ChartBuildQueryRegistry","Registry","constructor","super","overwritePolicy","OverwritePolicy","makeSingleton","ChartMetadataRegistry","htmlSanitization","htmlSchemaOverrides","displayHtml","escapeHtml","rehypePlugins","useMemo","push","rehypeRaw","defaultSchema","rehypeSanitize","skipHtml","DatasourceKey","idStr","typeStr","this","DatasourceType","toObject","WRAP_IN_ARRAY","queryFields","buildQuery","buildQueryObject","post_processing","isXAxisSet","normalizeTimeColumn","sanitizeClause","clause","sanitizedClause","annotation_layers","extra_form_data","time_range","since","until","row_limit","row_offset","order_desc","limit","timeseries_limit_metric","granularity","url_params","custom_params","series_columns","series_limit","series_limit_metric","residualFormData","appendAdhocFilters","filters","appendFilters","custom_form_data","overrides","numericRowLimit","numericRowOffset","metrics","orderby","extractQueryFields","extras","applied_time_extras","extract","reservedColumnsToQueryField","__time_range","__time_col","__time_grain","__granularity","col","time_grain_sqla","granularity_sqla","extractExtras","extraFilters","filterFormData","extrasAndfilters","where","simpleWhere","freeformWhere","freeformHaving","isSimpleAdhocFilter","filterClause","convertFilter","sqlExpression","having","processFilters","queryObject","isDefined","metric","isQueryFormMetric","normalizeSeriesLimitMetric","overrideFormData","overriddenFormData","overriddenExtras","entries","EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS","target","EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS","overrideExtraFormData","DTTM_ALIAS","NO_TIME_RANGE","EXTRA_FORM_DATA_APPEND_KEYS","time_column","time_grain","EXTRA_FORM_DATA_OVERRIDE_REGULAR_KEYS","EXTRA_FORM_DATA_OVERRIDE_KEYS","isUnaryAdhocFilter","isBinaryAdhocFilter","aliases","queryFieldAliases","metric_2","secondary_metric","x","y","size","all_columns","series","order_by_cols","query_mode","queryMode","include_time","includeTime","restFormData","normalizedKey","QueryMode","concat","unshift","removeDuplicates","getColumnLabel","getMetricLabel","item","column","isPhysicalColumn","isSavedMetric","isAdhocMetricSimple","aggregate","columnName","column_name","isQueryFormColumn","x_axis","hasGenericChartAxes","getXAxisColumn","getXAxisLabel","_columns","_extras","mutatedColumns","axisIdx","findIndex","isAdhocColumn","timeGrain","columnType","expressionType","newQueryObject","omit","DEFAULT_METRICS","metric_name","isFreeFormAdhocFilter","isUnaryOperator","isBinaryOperator","isSetAdhocFilter","isSetOperator","isAdhocMetricSQL","unaryOperatorSet","has","binaryOperatorSet","setOperatorSet","feature","featureFlags","items","hash","seen","itemHash","Styles","styled","updateDataset","async","owners","overrideColumns","UNTITLED","SaveDatasetModal","visible","onHide","buttonTextOnSave","buttonTextOnOverwrite","modalDescription","openWindow","defaultVizType","useSelector","DEFAULT_VIZ_TYPE","getDefaultDatasetName","datasetName","setDatasetName","useState","newOrOverwrite","setNewOrOverwrite","DatasetRadioState","shouldOverwriteDataset","setShouldOverwriteDataset","datasetToOverwrite","setDatasetToOverwrite","selectedDatasetToOverwrite","setSelectedDatasetToOverwrite","user","getInitialState","useDispatch","createWindow","open","href","formDataWithDefaults","EXPLORE_CHART_DEFAULT","loadDatasetOverwriteOptions","input","userId","opr","order_column","order_direction","r","table_name","datasetid","totalCount","count","disableSaveAndExploreBtn","show","footer","disabled","buttonStyle","selectedColumns","p","_filters","datasourceName","postFormData","d","is_dttm","o","onChange","allowClear","showSearch","placeholder","ariaLabel","option","filterOption","inputValue","toLowerCase","getPopupContainer","STATE_TYPE_MAP","failed","pending","fetching","running","stopped","success","STATE_TYPE_MAP_LOCALIZED","STATUS_OPTIONS","STATUS_OPTIONS_LOCALIZED","SQL_EDITOR_GUTTER_HEIGHT","SQL_EDITOR_GUTTER_MARGIN","SQL_TOOLBAR_HEIGHT","SQL_EDITOR_LEFTBAR_WIDTH","SQL_EDITOR_PADDING","INITIAL_NORTH_PERCENT","INITIAL_SOUTH_PERCENT","SET_QUERY_EDITOR_SQL_DEBOUNCE_MS","VALIDATION_DEBOUNCE_MS","WINDOW_RESIZE_THROTTLE_MS","KB_STORAGE","BYTES_PER_CHAR","LOCALSTORAGE_MAX_QUERY_AGE_MS","LOCALSTORAGE_MAX_USAGE_KB","LOCALSTORAGE_WARNING_THRESHOLD","LOCALSTORAGE_WARNING_MESSAGE_THROTTLE_MS","SQL_KEYWORD_AUTOCOMPLETE_SCORE","SQL_FUNCTIONS_AUTOCOMPLETE_SCORE","SCHEMA_AUTOCOMPLETE_SCORE","TABLE_AUTOCOMPLETE_SCORE","COLUMN_AUTOCOMPLETE_SCORE","groupby","keyword","meta","score","Alert","showIcon","closable","roomBelow","children","alert","info","baseColor","AlertIcon","Icons","closeText","marginBottom","padding","alignItems","border","backgroundColor","light2","marginRight","m","fontWeight","weights","bold","normal","aceModuleLoaders","AsyncAceEditor","aceModules","defaultMode","defaultTheme","defaultTabSize","AsyncEsmComponent","default","ReactAceEditor","inferredMode","startsWith","inferredTheme","forwardRef","ref","keywords","mode","tabSize","defaultValue","completer","getCompletions","editor","session","pos","getMode","$id","acequire","setCompleters","SQLEditor","FullSQLEditor","height","width","background","MarkdownEditor","TextAreaEditor","CssEditor","JsonEditor","ConfigEditor","DefaultPlaceholder","showLoadingForImport","placeholderStyle","position","loadComponent","promise","component","waitForPromise","AsyncComponent","setLoaded","isMounted","Component","preload","light","bigger","animateArrows","expandIconPosition","light4","ghost","bordered","light3","Panel","AntdCollapse","EmptyStateSize","EmptyStateContainer","base","TextContainer","Title","light1","BigTitle","l","Description","BigDescription","SmallDescription","ActionButton","Button","getImage","image","getImageHeight","Small","Medium","Big","ImageContainer","imageStyle","handleMouseDown","preventDefault","stopPropagation","EmptyStateBig","buttonAction","buttonText","onMouseDown","EmptyStateMedium","EmptyStateSmall","TRANSLATIONS","NO_DATABASES_MATCH_TITLE","NO_DATABASES_AVAILABLE_TITLE","MANAGE_YOUR_DATABASES_TEXT","HERE_TEXT","emptyStateComponent","emptyResultsWithSearch","DEFAULT_TITLE","ErrorMessageWithStackTrace","subtitle","copyText","stackTrace","ErrorMessageComponent","getErrorMessageComponentRegistry","error_type","level","rel","Form","Label","RequiredLabel","FormLabel","htmlFor","required","StyledLabel","_path","_extends","bind","i","arguments","prototype","call","apply","viewBox","fill","xmlns","fillRule","clipRule","StyledInput","Input","StyledInputPassword","StyledFormGroup","StyledAlignment","StyledFormLabel","iconReset","validationMethods","errorMessage","helpText","hasTooltip","tooltipText","visibilityToggle","InfoTooltip","FormItem","hasError","errorIcon","alertIconStyles","validateTrigger","validateStatus","help","hasFeedback","iconRender","iconSize","StyledForm","AntdForm","StyledTooltip","StyledTooltipTitle","defaultOverlayStyle","bgColor","AntdInput","secondary","borderRadius","InputNumber","AntdInputNumber","TextArea","MenuItem","AntdMenu","transitionTiming","primary","light5","StyledNav","dark1","StyledSubMenu","Menu","Item","MainNav","SubMenu","Divider","ItemGroup","React","showModal","setShowModal","beforeOpen","onExit","isButton","resizable","draggable","modalFooter","triggerNode","destroyOnClose","modalBody","draggableConfig","resizableConfig","modalTitle","responsive","close","current","hideFooter","StyledRadio","AntdRadio","StyledGroup","Radio","Group","warningMarkdown","iconColor","DASHBOARD_GRID_ID","DASHBOARD_HEADER_ID","DASHBOARD_ROOT_ID","DASHBOARD_VERSION_KEY","NEW_COMPONENTS_SOURCE_ID","NEW_CHART_ID","NEW_COLUMN_ID","NEW_DIVIDER_ID","NEW_HEADER_ID","NEW_MARKDOWN_ID","NEW_ROW_ID","NEW_TAB_ID","NEW_TABS_ID","NEW_DYNAMIC_COMPONENT","DASHBOARD_ROOT_DEPTH","GRID_BASE_UNIT","GRID_GUTTER_SIZE","GRID_COLUMN_COUNT","GRID_MIN_COLUMN_COUNT","GRID_MIN_ROW_UNITS","GRID_DEFAULT_CHART_WIDTH","SMALL_HEADER","MEDIUM_HEADER","LARGE_HEADER","BACKGROUND_WHITE","BACKGROUND_TRANSPARENT","UNDO_LIMIT","SAVE_TYPE_OVERWRITE","SAVE_TYPE_OVERWRITE_CONFIRMED","SAVE_TYPE_NEWDASHBOARD","DASHBOARD_POSITION_DATA_LIMIT","IN_COMPONENT_ELEMENT_TYPES","ALL_FILTERS_ROOT","AGGREGATES","AVG","COUNT","COUNT_DISTINCT","MAX","MIN","SUM","AGGREGATES_OPTIONS","Operators","EQUALS","display","NOT_EQUALS","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","IN","NOT_IN","LIKE","ILIKE","REGEX","IS_NOT_NULL","IS_NULL","LATEST_PARTITION","IS_TRUE","IS_FALSE","TEMPORAL_RANGE","OPERATORS_OPTIONS","HAVING_OPERATORS","CUSTOM_OPERATORS","DISABLE_INPUT_OPERATORS","sqlaAutoGeneratedMetricRegex","TIME_FILTER_LABELS","FILTER_CONFIG_ATTRIBUTES","CLEARABLE","DEFAULT_VALUE","MULTIPLE","SEARCH_ALL_OPTIONS","SORT_ASCENDING","SORT_METRIC","FILTER_OPTIONS_LIMIT","TIME_FILTER_MAP","POPOVER_INITIAL_HEIGHT","POPOVER_INITIAL_WIDTH","UNRESIZABLE_POPOVER_WIDTH","TEMPORARY_CONTROLS","sanitizeFormData","assembleEndpoint","assemblePayload","datasourceId","datasourceType","chartId","datasource_id","datasource_type","chart_id","putFormData","ResourceStatus","initialState","LOADING","useTransformedResource","resource","transformFn","COMPLETE","ERROR","extractInnerResult","responseBody","useApiV1Resource","setResource","cancelRef","useRef","cancelled","makeApi","fetchResource","useApiResourceFullBody","usePrevious","initialValue","previous","LOG_ACTIONS_LOAD_CHART","LOG_ACTIONS_RENDER_CHART","LOG_ACTIONS_HIDE_BROWSER_TAB","LOG_ACTIONS_MOUNT_DASHBOARD","LOG_ACTIONS_MOUNT_EXPLORER","LOG_ACTIONS_SELECT_DASHBOARD_TAB","LOG_ACTIONS_FORCE_REFRESH_CHART","LOG_ACTIONS_CHANGE_EXPLORE_CONTROLS","LOG_ACTIONS_TOGGLE_EDIT_DASHBOARD","LOG_ACTIONS_FORCE_REFRESH_DASHBOARD","LOG_ACTIONS_PERIODIC_RENDER_DASHBOARD","LOG_ACTIONS_EXPLORE_DASHBOARD_CHART","LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART","LOG_ACTIONS_CHANGE_DASHBOARD_FILTER","LOG_ACTIONS_DATASET_CREATION_EMPTY_CANCELLATION","LOG_ACTIONS_DATASET_CREATION_DATABASE_CANCELLATION","LOG_ACTIONS_DATASET_CREATION_SCHEMA_CANCELLATION","LOG_ACTIONS_DATASET_CREATION_TABLE_CANCELLATION","LOG_ACTIONS_DATASET_CREATION_SUCCESS","LOG_ACTIONS_SPA_NAVIGATION","LOG_ACTIONS_CONFIRM_OVERWRITE_DASHBOARD_METADATA","LOG_ACTIONS_DASHBOARD_DOWNLOAD_AS_IMAGE","LOG_ACTIONS_CHART_DOWNLOAD_AS_IMAGE","LOG_ACTIONS_SQLLAB_WARN_LOCAL_STORAGE_USAGE","LOG_EVENT_TYPE_TIMING","Logger","timeOriginOffset","markTimeOrigin","performance","getTimestamp","round","LOG_EVENT","logEvent","eventName","eventData","LocalStorageKeys","dangerouslyGetItemDoNotUse","localStorage","getItem","dangerouslySetItemDoNotUse","setItem","object","cache"],"sourceRoot":""}