{"version":3,"file":"e4cf5490d1f2dcefa90f.chunk.js","mappings":"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","sources":["webpack://superset/./plugins/legacy-preset-chart-deckgl/src/components/BootstrapSliderWrapper.jsx","webpack://superset/./plugins/legacy-preset-chart-deckgl/src/components/PlaySlider.jsx","webpack://superset/./plugins/legacy-preset-chart-deckgl/src/AnimatableDeckGLContainer.jsx","webpack://superset/./plugins/legacy-preset-chart-deckgl/src/components/Tooltip.tsx","webpack://superset/./plugins/legacy-preset-chart-deckgl/src/DeckGLContainer.jsx","webpack://superset/./plugins/legacy-preset-chart-deckgl/src/TooltipRow.jsx","webpack://superset/./plugins/legacy-preset-chart-deckgl/src/layers/common.jsx","webpack://superset/./plugins/legacy-preset-chart-deckgl/src/utils/colors.js","webpack://superset/./plugins/legacy-preset-chart-deckgl/src/utils/sandbox.js","webpack://superset/./plugins/legacy-preset-chart-deckgl/src/utils/time.js","webpack://superset/./plugins/legacy-preset-chart-deckgl/src/utils/computeBoundsFromPoints.ts","webpack://superset/./plugins/legacy-preset-chart-deckgl/src/utils/fitViewport.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport 'bootstrap-slider/dist/css/bootstrap-slider.min.css';\nimport { styled } from '@superset-ui/core';\n\nconst StyledSlider = styled.div`\n  ${({ theme }) => `\n    .slider-selection {\n      background: ${theme.colors.grayscale.light2};\n    }\n    .slider-handle {\n      background: ${theme.colors.grayscale.light1};\n    }\n  `}\n`;\n\nexport default function BootstrapSliderWrapper(props) {\n  return (\n    <StyledSlider>\n      <ReactBootstrapSlider {...props} />\n    </StyledSlider>\n  );\n}\n","/* eslint-disable react/jsx-sort-default-props */\n/* eslint-disable react/sort-prop-types */\n/* eslint-disable react/jsx-handler-names */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable no-negated-condition */\n/* eslint-disable react/forbid-prop-types */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Mousetrap from 'mousetrap';\nimport { t, styled } from '@superset-ui/core';\nimport BootstrapSliderWrapper from './BootstrapSliderWrapper';\n\nconst StyledSlider = styled.div`\n  ${({ theme }) => `\n    display: flex;\n    height: 40px;\n    width: 100%;\n    margin: 0;\n\n    .play-slider-controls {\n      flex: 0 0 80px;\n      text-align: middle;\n    }\n\n    .play-slider-scrobbler {\n      flex: 1;\n    }\n\n    .slider.slider-horizontal {\n      width: 100% !important;\n    }\n\n    .slider-button {\n      color: ${theme.colors.grayscale.light1};\n      margin-right: ${theme.gridUnit}px;\n    }\n\n    div.slider > div.tooltip.tooltip-main.top.in {\n      margin-left: 0 !important;\n    }\n  `}\n`;\n\nconst propTypes = {\n  start: PropTypes.number.isRequired,\n  step: PropTypes.number.isRequired,\n  end: PropTypes.number.isRequired,\n  values: PropTypes.array.isRequired,\n  onChange: PropTypes.func,\n  loopDuration: PropTypes.number,\n  maxFrames: PropTypes.number,\n  orientation: PropTypes.oneOf(['horizontal', 'vertical']),\n  reversed: PropTypes.bool,\n  disabled: PropTypes.bool,\n  range: PropTypes.bool,\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  loopDuration: 15000,\n  maxFrames: 100,\n  orientation: 'horizontal',\n  reversed: false,\n  disabled: false,\n  range: true,\n};\n\nexport default class PlaySlider extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = { intervalId: null };\n\n    const range = props.end - props.start;\n    const frames = Math.min(props.maxFrames, range / props.step);\n    const width = range / frames;\n    this.intervalMilliseconds = props.loopDuration / frames;\n    this.increment =\n      width < props.step ? props.step : width - (width % props.step);\n\n    this.onChange = this.onChange.bind(this);\n    this.play = this.play.bind(this);\n    this.pause = this.pause.bind(this);\n    this.stepBackward = this.stepBackward.bind(this);\n    this.stepForward = this.stepForward.bind(this);\n    this.getPlayClass = this.getPlayClass.bind(this);\n    this.formatter = this.formatter.bind(this);\n  }\n\n  componentDidMount() {\n    Mousetrap.bind(['space'], this.play);\n  }\n\n  componentWillUnmount() {\n    Mousetrap.unbind(['space']);\n  }\n\n  onChange(event) {\n    this.props.onChange(event.target.value);\n    if (this.state.intervalId != null) {\n      this.pause();\n    }\n  }\n\n  getPlayClass() {\n    if (this.state.intervalId == null) {\n      return 'fa fa-play fa-lg slider-button';\n    }\n\n    return 'fa fa-pause fa-lg slider-button';\n  }\n\n  play() {\n    if (this.props.disabled) {\n      return;\n    }\n    if (this.state.intervalId != null) {\n      this.pause();\n    } else {\n      const id = setInterval(this.stepForward, this.intervalMilliseconds);\n      this.setState({ intervalId: id });\n    }\n  }\n\n  pause() {\n    clearInterval(this.state.intervalId);\n    this.setState({ intervalId: null });\n  }\n\n  stepForward() {\n    const { start, end, step, values, disabled } = this.props;\n\n    if (disabled) {\n      return;\n    }\n\n    const currentValues = Array.isArray(values)\n      ? values\n      : [values, values + step];\n    const nextValues = currentValues.map(value => value + this.increment);\n    const carriageReturn = nextValues[1] > end ? nextValues[0] - start : 0;\n\n    this.props.onChange(nextValues.map(value => value - carriageReturn));\n  }\n\n  stepBackward() {\n    const { start, end, step, values, disabled } = this.props;\n\n    if (disabled) {\n      return;\n    }\n\n    const currentValues = Array.isArray(values)\n      ? values\n      : [values, values + step];\n    const nextValues = currentValues.map(value => value - this.increment);\n    const carriageReturn = nextValues[0] < start ? end - nextValues[1] : 0;\n\n    this.props.onChange(nextValues.map(value => value + carriageReturn));\n  }\n\n  formatter(values) {\n    if (this.props.disabled) {\n      return t('Data has no time steps');\n    }\n\n    let parts = values;\n    if (!Array.isArray(values)) {\n      parts = [values];\n    } else if (values[0] === values[1]) {\n      parts = [values[0]];\n    }\n\n    return parts.map(value => new Date(value).toUTCString()).join(' : ');\n  }\n\n  render() {\n    const { start, end, step, orientation, reversed, disabled, range, values } =\n      this.props;\n\n    return (\n      <StyledSlider>\n        <div className=\"play-slider-controls padded\">\n          <i\n            className=\"fa fa-step-backward fa-lg slider-button \"\n            onClick={this.stepBackward}\n          />\n          <i className={this.getPlayClass()} onClick={this.play} />\n          <i\n            className=\"fa fa-step-forward fa-lg slider-button \"\n            onClick={this.stepForward}\n          />\n        </div>\n        <div className=\"play-slider-scrobbler padded\">\n          <BootstrapSliderWrapper\n            value={range ? values : values[0]}\n            range={range}\n            formatter={this.formatter}\n            change={this.onChange}\n            min={start}\n            max={end}\n            step={step}\n            orientation={orientation}\n            reversed={reversed}\n            disabled={disabled ? 'disabled' : 'enabled'}\n          />\n        </div>\n      </StyledSlider>\n    );\n  }\n}\n\nPlaySlider.propTypes = propTypes;\nPlaySlider.defaultProps = defaultProps;\n","/* eslint-disable react/jsx-sort-default-props */\n/* eslint-disable react/sort-prop-types */\n/* eslint-disable react/forbid-prop-types */\n/* eslint-disable react/require-default-props */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { DeckGLContainerStyledWrapper } from './DeckGLContainer';\nimport PlaySlider from './components/PlaySlider';\n\nconst PLAYSLIDER_HEIGHT = 20; // px\n\nconst propTypes = {\n  getLayers: PropTypes.func.isRequired,\n  start: PropTypes.number.isRequired,\n  end: PropTypes.number.isRequired,\n  getStep: PropTypes.func,\n  values: PropTypes.array.isRequired,\n  aggregation: PropTypes.bool,\n  disabled: PropTypes.bool,\n  viewport: PropTypes.object.isRequired,\n  children: PropTypes.node,\n  mapStyle: PropTypes.string,\n  mapboxApiAccessToken: PropTypes.string.isRequired,\n  setControlValue: PropTypes.func,\n  onValuesChange: PropTypes.func,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n};\n\nconst defaultProps = {\n  aggregation: false,\n  disabled: false,\n  mapStyle: 'light',\n  setControlValue: () => {},\n  onValuesChange: () => {},\n};\n\nexport default class AnimatableDeckGLContainer extends React.PureComponent {\n  containerRef = React.createRef();\n\n  setTooltip = tooltip => {\n    const { current } = this.containerRef;\n    if (current) {\n      current.setTooltip(tooltip);\n    }\n  };\n\n  render() {\n    const {\n      start,\n      end,\n      getStep,\n      disabled,\n      aggregation,\n      children,\n      getLayers,\n      values,\n      onValuesChange,\n      viewport,\n      setControlValue,\n      mapStyle,\n      mapboxApiAccessToken,\n      height,\n      width,\n    } = this.props;\n    const layers = getLayers(values);\n\n    return (\n      <div>\n        <DeckGLContainerStyledWrapper\n          ref={this.containerRef}\n          viewport={viewport}\n          layers={layers}\n          setControlValue={setControlValue}\n          mapStyle={mapStyle}\n          mapboxApiAccessToken={mapboxApiAccessToken}\n          bottomMargin={disabled ? 0 : PLAYSLIDER_HEIGHT}\n          width={width}\n          height={height}\n        />\n        {!disabled && (\n          <PlaySlider\n            start={start}\n            end={end}\n            step={getStep(start)}\n            values={values}\n            range={!aggregation}\n            onChange={onValuesChange}\n          />\n        )}\n        {children}\n      </div>\n    );\n  }\n}\n\nAnimatableDeckGLContainer.propTypes = propTypes;\nAnimatableDeckGLContainer.defaultProps = defaultProps;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { styled } from '@superset-ui/core';\nimport React, { useMemo } from 'react';\nimport { filterXSS } from 'xss';\n\nexport type TooltipProps = {\n  tooltip:\n    | {\n        x: number;\n        y: number;\n        content: string;\n      }\n    | null\n    | undefined;\n};\n\nconst StyledDiv = styled.div<{ top: number; left: number }>`\n  ${({ theme, top, left }) => `\n    position: absolute;\n    top: ${top}px;\n    left: ${left}px;\n    padding: ${theme.gridUnit * 2}px;\n    margin: ${theme.gridUnit * 2}px;\n    background: ${theme.colors.grayscale.dark2};\n    color: ${theme.colors.grayscale.light5};\n    maxWidth: 300px;\n    fontSize: ${theme.typography.sizes.s}px;\n    zIndex: 9;\n    pointerEvents: none;\n  `}\n`;\n\nexport default function Tooltip(props: TooltipProps) {\n  const { tooltip } = props;\n  if (typeof tooltip === 'undefined' || tooltip === null) {\n    return null;\n  }\n\n  const { x, y, content } = tooltip;\n\n  if (typeof content === 'string') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const contentHtml = useMemo(\n      () => ({\n        __html: filterXSS(content, { stripIgnoreTag: true }),\n      }),\n      [content],\n    );\n    return (\n      <StyledDiv top={y} left={x}>\n        <div\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={contentHtml}\n        />\n      </StyledDiv>\n    );\n  }\n\n  return (\n    <StyledDiv top={y} left={x}>\n      {content}\n    </StyledDiv>\n  );\n}\n","/* eslint-disable react/jsx-sort-default-props */\n/* eslint-disable react/sort-prop-types */\n/* eslint-disable react/jsx-handler-names */\n/* eslint-disable react/forbid-prop-types */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { isEqual } from 'lodash';\nimport { StaticMap } from 'react-map-gl';\nimport DeckGL from 'deck.gl';\nimport { styled } from '@superset-ui/core';\nimport Tooltip from './components/Tooltip';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\nconst TICK = 250; // milliseconds\n\nconst propTypes = {\n  viewport: PropTypes.object.isRequired,\n  layers: PropTypes.array.isRequired,\n  setControlValue: PropTypes.func,\n  mapStyle: PropTypes.string,\n  mapboxApiAccessToken: PropTypes.string.isRequired,\n  children: PropTypes.node,\n  bottomMargin: PropTypes.number,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  onViewportChange: PropTypes.func,\n};\nconst defaultProps = {\n  mapStyle: 'light',\n  setControlValue: () => {},\n  children: null,\n  bottomMargin: 0,\n};\n\nexport class DeckGLContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.tick = this.tick.bind(this);\n    this.onViewStateChange = this.onViewStateChange.bind(this);\n    // This has to be placed after this.tick is bound to this\n    this.state = {\n      timer: setInterval(this.tick, TICK),\n      tooltip: null,\n      viewState: props.viewport,\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (!isEqual(nextProps.viewport, this.props.viewport)) {\n      this.setState({ viewState: nextProps.viewport });\n    }\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.state.timer);\n  }\n\n  onViewStateChange({ viewState }) {\n    this.setState({ viewState, lastUpdate: Date.now() });\n  }\n\n  tick() {\n    // Rate limiting updating viewport controls as it triggers lotsa renders\n    const { lastUpdate } = this.state;\n    if (lastUpdate && Date.now() - lastUpdate > TICK) {\n      const setCV = this.props.setControlValue;\n      if (setCV) {\n        setCV('viewport', this.state.viewState);\n      }\n      this.setState({ lastUpdate: null });\n    }\n  }\n\n  layers() {\n    // Support for layer factory\n    if (this.props.layers.some(l => typeof l === 'function')) {\n      return this.props.layers.map(l => (typeof l === 'function' ? l() : l));\n    }\n\n    return this.props.layers;\n  }\n\n  setTooltip = tooltip => {\n    this.setState({ tooltip });\n  };\n\n  render() {\n    const { children, bottomMargin, height, width } = this.props;\n    const { viewState, tooltip } = this.state;\n    const adjustedHeight = height - bottomMargin;\n\n    const layers = this.layers();\n\n    return (\n      <>\n        <div style={{ position: 'relative', width, height: adjustedHeight }}>\n          <DeckGL\n            initWebGLParameters\n            controller\n            width={width}\n            height={adjustedHeight}\n            layers={layers}\n            viewState={viewState}\n            glOptions={{ preserveDrawingBuffer: true }}\n            onViewStateChange={this.onViewStateChange}\n          >\n            <StaticMap\n              preserveDrawingBuffer\n              mapStyle={this.props.mapStyle}\n              mapboxApiAccessToken={this.props.mapboxApiAccessToken}\n            />\n          </DeckGL>\n          {children}\n        </div>\n        <Tooltip tooltip={tooltip} />\n      </>\n    );\n  }\n}\n\nDeckGLContainer.propTypes = propTypes;\nDeckGLContainer.defaultProps = defaultProps;\n\nexport const DeckGLContainerStyledWrapper = styled(DeckGLContainer)`\n  .deckgl-tooltip > div {\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n};\n\nexport default class TooltipRow extends React.PureComponent {\n  render() {\n    const { label, value } = this.props;\n\n    return (\n      <div>\n        {label}\n        <strong>{value}</strong>\n      </div>\n    );\n  }\n}\n\nTooltipRow.propTypes = propTypes;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport * as d3array from 'd3-array';\nimport sandboxedEval from '../utils/sandbox';\n\nexport function commonLayerProps(\n  formData,\n  setTooltip,\n  setTooltipContent,\n  onSelect,\n) {\n  const fd = formData;\n  let onHover;\n  let tooltipContentGenerator = setTooltipContent;\n  if (fd.js_tooltip) {\n    tooltipContentGenerator = sandboxedEval(fd.js_tooltip);\n  }\n  if (tooltipContentGenerator) {\n    onHover = o => {\n      if (o.picked) {\n        setTooltip({\n          content: tooltipContentGenerator(o),\n          x: o.x,\n          y: o.y,\n        });\n      } else {\n        setTooltip(null);\n      }\n    };\n  }\n  let onClick;\n  if (fd.js_onclick_href) {\n    onClick = o => {\n      const href = sandboxedEval(fd.js_onclick_href)(o);\n      window.open(href);\n    };\n  } else if (fd.table_filter && onSelect !== undefined) {\n    onClick = o => onSelect(o.object[fd.line_column]);\n  }\n\n  return {\n    onClick,\n    onHover,\n    pickable: Boolean(onHover),\n  };\n}\n\nconst percentiles = {\n  p1: 0.01,\n  p5: 0.05,\n  p95: 0.95,\n  p99: 0.99,\n};\n\n/* Get an a stat function that operates on arrays, aligns with control=js_agg_function  */\nexport function getAggFunc(type = 'sum', accessor = null) {\n  if (type === 'count') {\n    return arr => arr.length;\n  }\n  let d3func;\n  if (type in percentiles) {\n    d3func = (arr, acc) => {\n      let sortedArr;\n      if (accessor) {\n        sortedArr = arr.sort((o1, o2) =>\n          d3array.ascending(accessor(o1), accessor(o2)),\n        );\n      } else {\n        sortedArr = arr.sort(d3array.ascending);\n      }\n\n      return d3array.quantile(sortedArr, percentiles[type], acc);\n    };\n  } else {\n    d3func = d3array[type];\n  }\n  if (!accessor) {\n    return arr => d3func(arr);\n  }\n\n  return arr => d3func(arr.map(x => accessor(x)));\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { rgb } from 'd3-color';\n\n// eslint-disable-next-line import/prefer-default-export\nexport function hexToRGB(hex, alpha = 255) {\n  if (!hex) {\n    return [0, 0, 0, alpha];\n  }\n  const { r, g, b } = rgb(hex);\n\n  return [r, g, b, alpha];\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n// A safe alternative to JS's eval\nimport vm from 'vm';\nimport _ from 'underscore';\nimport * as d3array from 'd3-array';\nimport * as colors from './colors';\n\n// Objects exposed here should be treated like a public API\n// if `underscore` had backwards incompatible changes in a future release, we'd\n// have to be careful about bumping the library as those changes could break user charts\nconst GLOBAL_CONTEXT = {\n  console,\n  _,\n  colors,\n  d3array,\n};\n\n// Copied/modified from https://github.com/hacksparrow/safe-eval/blob/master/index.js\nexport default function sandboxedEval(code, context, opts) {\n  const sandbox = {};\n  const resultKey = `SAFE_EVAL_${Math.floor(Math.random() * 1000000)}`;\n  sandbox[resultKey] = {};\n  const codeToEval = `${resultKey}=${code}`;\n  const sandboxContext = { ...GLOBAL_CONTEXT, ...context };\n  Object.keys(sandboxContext).forEach(key => {\n    sandbox[key] = sandboxContext[key];\n  });\n  try {\n    vm.runInNewContext(codeToEval, sandbox, opts);\n\n    return sandbox[resultKey];\n  } catch (error) {\n    return () => error;\n  }\n}\n","/* eslint-disable no-negated-condition */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport moment from 'moment';\n\n// array with the minimum values of each part of a timestamp -- note that\n// months are zero-indexed in JavaScript\nconst truncatePartTo = [\n  1, // year\n  0, // month\n  1, // day\n  0, // hour\n  0, // minute\n  0, // second\n  0, // millisecond\n];\n\nexport function truncate(timestamp, step) {\n  /*\n   * Truncate timestamp down to duration resolution.\n   */\n  const lowerBound = moment(timestamp).subtract(step);\n  const explodedTimestamp = timestamp.toArray();\n  const explodedLowerBound = lowerBound.toArray();\n\n  const firstDiffIndex = explodedTimestamp\n    .map((part, i) => explodedLowerBound[i] !== part)\n    .indexOf(true);\n  const dateParts = explodedTimestamp.map((part, i) => {\n    if (i === firstDiffIndex) {\n      // truncate down to closest `truncatePartTo[i] + n * step`\n      const difference = part - explodedLowerBound[i];\n\n      return part - ((part - truncatePartTo[i]) % difference);\n    }\n    if (i < firstDiffIndex || firstDiffIndex === -1) {\n      return part;\n    }\n\n    return truncatePartTo[i];\n  });\n\n  return moment(dateParts);\n}\n\nfunction getStepSeconds(step, start) {\n  /* Return number of seconds in a step.\n   *\n   * The step might be ambiguous, eg, \"1 month\" has a variable number of\n   * seconds, which is why we need to know the start time.\n   */\n  const startMilliseconds = parseInt(moment(start).format('x'), 10);\n  const endMilliseconds = parseInt(moment(start).add(step).format('x'), 10);\n\n  return endMilliseconds - startMilliseconds;\n}\n\nexport function getPlaySliderParams(timestamps, timeGrain) {\n  const minTimestamp = moment(\n    Number(timestamps.reduce((a, b) => (a < b ? a : b))),\n  );\n  const maxTimestamp = moment(\n    Number(timestamps.reduce((a, b) => (a > b ? a : b))),\n  );\n  let step;\n  let reference;\n\n  if (timeGrain.includes('/')) {\n    // Here, time grain is a time interval instead of a simple duration, either\n    // `reference/duration` or `duration/reference`. We need to parse the\n    // duration and make sure that start and end are in the right places. For\n    // example, if `reference` is a Saturday and `duration` is 1 week (P1W)\n    // then both start and end should be Saturdays.\n    const parts = timeGrain.split('/', 2);\n    if (parts[0].endsWith('Z')) {\n      // ISO string\n      reference = moment(parts[0]);\n      step = moment.duration(parts[1]);\n    } else {\n      reference = moment(parts[1]);\n      step = moment.duration(parts[0]);\n    }\n  } else {\n    step = moment.duration(timeGrain);\n    reference = truncate(minTimestamp, step);\n  }\n\n  // find the largest `reference + n * step` smaller than the minimum timestamp\n  let start;\n  const minValue = minTimestamp.valueOf();\n  for (start = reference.clone(); start.valueOf() < minValue; ) {\n    start.add(step);\n  }\n  for (; start.valueOf() > minValue; ) {\n    start.subtract(step);\n  }\n\n  // find the smallest `reference + n * step` larger than the maximum timestamp\n  let end;\n  const maxValue = maxTimestamp.valueOf();\n  for (end = reference.clone(); end.valueOf() > maxValue; ) {\n    end.subtract(step);\n  }\n  for (; end.valueOf() < maxValue; ) {\n    end.add(step);\n  }\n\n  const values =\n    timeGrain != null ? [start, start.clone().add(step)] : [start, end];\n  const disabled = timestamps.every(timestamp => timestamp === null);\n\n  return {\n    start: parseInt(start.format('x'), 10),\n    end: parseInt(end.format('x'), 10),\n    getStep: getStepSeconds.bind(this, step),\n    values: values.map(v => parseInt(v.format('x'), 10)),\n    disabled,\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { extent as d3Extent } from 'd3-array';\nimport { Point, Range } from '../types';\n\nconst LAT_LIMIT: Range = [-90, 90];\nconst LNG_LIMIT: Range = [-180, 180];\n\n/**\n * Expand a coordinate range by `padding` and within limits, if needed\n */\nfunction expandIfNeeded(\n  [curMin, curMax]: Range,\n  [minBound, maxBound]: Range,\n  padding = 0.25,\n) {\n  return curMin < curMax\n    ? [curMin, curMax]\n    : [\n        Math.max(minBound, curMin - padding),\n        Math.min(maxBound, curMax + padding),\n      ];\n}\n\nexport default function computeBoundsFromPoints(\n  points: Point[],\n): [Point, Point] {\n  const latBounds = expandIfNeeded(\n    d3Extent(points, (x: Point) => x[1]) as Range,\n    LAT_LIMIT,\n  );\n  const lngBounds = expandIfNeeded(\n    d3Extent(points, (x: Point) => x[0]) as Range,\n    LNG_LIMIT,\n  );\n  return [\n    [lngBounds[0], latBounds[0]],\n    [lngBounds[1], latBounds[1]],\n  ];\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { fitBounds } from '@math.gl/web-mercator';\nimport computeBoundsFromPoints from './computeBoundsFromPoints';\nimport { Point } from '../types';\n\nexport type Viewport = {\n  longitude: number;\n  latitude: number;\n  zoom: number;\n  bearing?: number;\n  pitch?: number;\n};\n\nexport type FitViewportOptions = {\n  points: Point[];\n  width: number;\n  height: number;\n  minExtent?: number;\n  maxZoom?: number;\n  offset?: [number, number];\n  padding?: number;\n};\n\nexport default function fitViewport(\n  originalViewPort: Viewport,\n  {\n    points,\n    width,\n    height,\n    minExtent,\n    maxZoom,\n    offset,\n    padding = 20,\n  }: FitViewportOptions,\n) {\n  const { bearing, pitch } = originalViewPort;\n  const bounds = computeBoundsFromPoints(points);\n\n  try {\n    return {\n      ...fitBounds({\n        bounds,\n        width,\n        height,\n        minExtent,\n        maxZoom,\n        offset,\n        padding,\n      }),\n      bearing,\n      pitch,\n    };\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error('Could not fit viewport', error);\n  }\n\n  return originalViewPort;\n}\n"],"names":["StyledSlider","styled","theme","colors","grayscale","light2","light1","BootstrapSliderWrapper","props","gridUnit","propTypes","start","PropTypes","step","end","values","onChange","loopDuration","maxFrames","orientation","reversed","disabled","range","PlaySlider","React","constructor","super","this","state","intervalId","frames","Math","min","width","intervalMilliseconds","increment","bind","play","pause","stepBackward","stepForward","getPlayClass","formatter","componentDidMount","Mousetrap","componentWillUnmount","event","target","value","id","setInterval","setState","clearInterval","nextValues","Array","isArray","map","carriageReturn","t","parts","Date","toUTCString","join","render","className","onClick","change","max","defaultProps","getLayers","getStep","aggregation","viewport","children","mapStyle","mapboxApiAccessToken","setControlValue","onValuesChange","height","AnimatableDeckGLContainer","containerRef","setTooltip","tooltip","current","layers","DeckGLContainer","ref","bottomMargin","StyledDiv","top","left","dark2","light5","typography","sizes","s","Tooltip","x","y","content","contentHtml","useMemo","__html","filterXSS","stripIgnoreTag","dangerouslySetInnerHTML","onViewportChange","tick","onViewStateChange","timer","viewState","UNSAFE_componentWillReceiveProps","nextProps","lastUpdate","now","setCV","some","l","adjustedHeight","style","position","initWebGLParameters","controller","glOptions","preserveDrawingBuffer","DeckGLContainerStyledWrapper","label","TooltipRow","commonLayerProps","formData","setTooltipContent","onSelect","fd","onHover","tooltipContentGenerator","js_tooltip","sandboxedEval","o","picked","js_onclick_href","href","window","open","table_filter","undefined","object","line_column","pickable","Boolean","percentiles","p1","p5","p95","p99","getAggFunc","type","accessor","arr","length","d3func","acc","sortedArr","sort","o1","o2","d3array","hexToRGB","hex","alpha","r","g","b","rgb","GLOBAL_CONTEXT","console","_","code","context","opts","sandbox","resultKey","floor","random","codeToEval","sandboxContext","Object","keys","forEach","key","vm","error","truncatePartTo","getStepSeconds","startMilliseconds","parseInt","moment","format","add","getPlaySliderParams","timestamps","timeGrain","minTimestamp","Number","reduce","a","maxTimestamp","reference","split","endsWith","timestamp","lowerBound","subtract","explodedTimestamp","toArray","explodedLowerBound","firstDiffIndex","part","i","indexOf","dateParts","difference","truncate","minValue","valueOf","clone","maxValue","every","v","LAT_LIMIT","LNG_LIMIT","expandIfNeeded","padding","curMin","curMax","minBound","maxBound","fitViewport","originalViewPort","points","minExtent","maxZoom","offset","bearing","pitch","bounds","latBounds","d3Extent","lngBounds","computeBoundsFromPoints","fitBounds"],"sourceRoot":""}