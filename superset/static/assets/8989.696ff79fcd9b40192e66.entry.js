"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[8989],{48989:(e,t,o)=>{o.r(t),o.d(t,{COLUMN_NAME_ALIASES:()=>j.DS,COMPARATOR:()=>fe.O9,ColumnOption:()=>de.E,ColumnTypeLabel:()=>me.j,D3_FORMAT_DOCS:()=>Y.YD,D3_FORMAT_OPTIONS:()=>Y.F6,D3_NUMBER_FORMAT_DESCRIPTION_PERCENTAGE_TEXT:()=>Y.u6,D3_NUMBER_FORMAT_DESCRIPTION_VALUES_TEXT:()=>Y.pj,D3_TIME_FORMAT_DOCS:()=>Y.oq,D3_TIME_FORMAT_OPTIONS:()=>Y.HC,DATASET_TIME_COLUMN_OPTION:()=>j.LU,DEFAULT_NUMBER_FORMAT:()=>Y.Ul,DEFAULT_TIME_FORMAT:()=>Y._r,InfoTooltipWithTrigger:()=>ue.V,MULTIPLE_VALUE_COMPARATORS:()=>fe.vD,MetricOption:()=>Re.m,QUERY_TIME_COLUMN_OPTION:()=>j.CV,QueryModeLabel:()=>j.cm,TIME_COMPARISON_SEPARATOR:()=>ce.K,TIME_FILTER_LABELS:()=>j.m_,TestDataset:()=>ye,__hack__reexport__:()=>Oe.M,boxplotOperator:()=>re.F,columnChoices:()=>q.Z,contributionModeControl:()=>U,contributionOperator:()=>ae.I,datePickerInAdhocFilterMixin:()=>Te.sy,defineSavedMetrics:()=>X.R,expandControlConfig:()=>G.q,expandControlType:()=>G.$,flattenOperator:()=>ie.k,formatSelectOptions:()=>R.m,formatSelectOptionsForRange:()=>R.B,getColorFormatters:()=>H.ni,getColorFunction:()=>H.E2,getMetricOffsetsMap:()=>le.O,getOpacity:()=>H.Km,getStandardizedControls:()=>Q.u,getTemporalColumns:()=>w.X,isColumnMeta:()=>fe.xN,isControlPanelSectionConfig:()=>fe.D_,isDataset:()=>fe.It,isDerivedSeries:()=>_e.m,isQueryResponse:()=>fe.JQ,isSavedExpression:()=>fe.zy,isStandardizedFormData:()=>fe.pp,isTemporalColumn:()=>w.x,isTimeComparison:()=>se.H,mainMetric:()=>W,pivotOperator:()=>ee.H,prophetOperator:()=>ne.D,renameOperator:()=>oe.N,resampleOperator:()=>te.X,rollingWindowOperator:()=>K.V,round:()=>H.NM,sections:()=>Ne,sharedControlComponents:()=>Oe.Z,sharedControls:()=>Ee.ZP,sortOperator:()=>$.C,temporalColumnMixin:()=>Te.V7,timeCompareOperator:()=>z.N,timeComparePivotOperator:()=>J.O,withDndFallback:()=>pe.pO,xAxisMixin:()=>Te.P2,xAxisSortAscControl:()=>F,xAxisSortControl:()=>V});var a={};o.r(a),o.d(a,{FORECAST_DEFAULT_DATA:()=>N,TITLE_MARGIN_OPTIONS:()=>C,TITLE_POSITION_OPTIONS:()=>A,advancedAnalyticsControls:()=>p,annotationLayers:()=>O,annotations:()=>d,annotationsAndLayersControls:()=>T,colorScheme:()=>u,datasourceAndVizType:()=>c,echartsTimeSeriesQuery:()=>Z,echartsTimeSeriesQueryWithXAxisSort:()=>B,forecastIntervalControls:()=>S,genericTime:()=>s,legacyRegularTime:()=>_,legacyTimeseriesTime:()=>l,titleControls:()=>g});var n=o(55867),r=o(11146);const i={label:(0,n.t)("Time"),expanded:!0,description:(0,n.t)("Time related form attributes")},l={...i,controlSetRows:[["granularity"],["granularity_sqla"],["time_grain_sqla"],["time_range"]]},s=r.O6?{controlSetRows:[]}:{...i,controlSetRows:[["granularity_sqla"],["time_grain_sqla"],["time_range"]]},_=r.O6?{controlSetRows:[]}:{...i,controlSetRows:[["granularity_sqla"],["time_range"]]},c={label:(0,n.t)("Datasource & Chart Type"),expanded:!0,controlSetRows:[["datasource"],["viz_type"],[{name:"slice_id",config:{type:"HiddenControl",label:(0,n.t)("Chart ID"),hidden:!0,description:(0,n.t)("The id of the active chart")}},{name:"cache_timeout",config:{type:"HiddenControl",label:(0,n.t)("Cache Timeout (seconds)"),hidden:!0,description:(0,n.t)("The number of seconds before expiring the cache")}},{name:"url_params",config:{type:"HiddenControl",label:(0,n.t)("URL Parameters"),hidden:!0,description:(0,n.t)("Extra url parameters for use in Jinja templated queries")}},{name:"custom_params",config:{type:"HiddenControl",label:(0,n.t)("Extra Parameters"),hidden:!0,description:(0,n.t)("Extra parameters that any plugins can choose to set for use in Jinja templated queries")}}]]},u={label:(0,n.t)("Color Scheme"),controlSetRows:[["color_scheme"]]},d={label:(0,n.t)("Annotations and Layers"),tabOverride:"data",expanded:!0,controlSetRows:[[{name:"annotation_layers",config:{type:"AnnotationLayerControl",label:"",default:[],description:(0,n.t)("Annotation Layers"),renderTrigger:!0}}]]};o(67294);var m=o(62363),R=o(6126),E=o(11965);const p={label:(0,n.t)("Advanced analytics"),tabOverride:"data",description:(0,n.t)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[(0,E.tZ)("div",{className:"section-header"},(0,n.t)("Rolling window"))],[{name:"rolling_type",config:{type:"SelectControl",label:(0,n.t)("Rolling function"),default:null,choices:[[null,(0,n.t)("None")]].concat((0,R.m)(Object.values(m.su))),description:(0,n.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}}],[{name:"rolling_periods",config:{type:"TextControl",label:(0,n.t)("Periods"),isInt:!0,description:(0,n.t)("Defines the size of the rolling window function, relative to the time granularity selected"),visibility:(e,t)=>{var o,a;let{controls:n}=e,{name:r}=t;const i=r.endsWith("_b")?"rolling_type_b":"rolling_type";return Boolean(null==(o=n[i])?void 0:o.value)&&(null==(a=n[i])?void 0:a.value)!==m.su.Cumsum}}}],[{name:"min_periods",config:{type:"TextControl",label:(0,n.t)("Min periods"),isInt:!0,description:(0,n.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods'),visibility:(e,t)=>{var o,a;let{controls:n}=e,{name:r}=t;const i=r.endsWith("_b")?"rolling_type_b":"rolling_type";return Boolean(null==(o=n[i])?void 0:o.value)&&(null==(a=n[i])?void 0:a.value)!==m.su.Cumsum}}}],[(0,E.tZ)("div",{className:"section-header"},(0,n.t)("Time comparison"))],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,n.t)("Time shift"),choices:[["1 day ago",(0,n.t)("1 day ago")],["1 week ago",(0,n.t)("1 week ago")],["28 days ago",(0,n.t)("28 days ago")],["30 days ago",(0,n.t)("30 days ago")],["52 weeks ago",(0,n.t)("52 weeks ago")],["1 year ago",(0,n.t)("1 year ago")],["104 weeks ago",(0,n.t)("104 weeks ago")],["2 years ago",(0,n.t)("2 years ago")],["156 weeks ago",(0,n.t)("156 weeks ago")],["3 years ago",(0,n.t)("3 years ago")]],description:(0,n.t)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example:  24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}}],[{name:"comparison_type",config:{type:"SelectControl",label:(0,n.t)("Calculation type"),default:"values",choices:[[m.wj.Values,(0,n.t)("Actual values")],[m.wj.Difference,(0,n.t)("Difference")],[m.wj.Percentage,(0,n.t)("Percentage change")],[m.wj.Ratio,(0,n.t)("Ratio")]],description:(0,n.t)("How to display time shifts: as individual lines; as the difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[(0,E.tZ)("div",{className:"section-header"},(0,n.t)("Resample"))],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,n.t)("Rule"),default:null,choices:[["1T",(0,n.t)("1 minutely frequency")],["1H",(0,n.t)("1 hourly frequency")],["1D",(0,n.t)("1 calendar day frequency")],["7D",(0,n.t)("7 calendar day frequency")],["1MS",(0,n.t)("1 month start frequency")],["1M",(0,n.t)("1 month end frequency")],["1AS",(0,n.t)("1 year start frequency")],["1A",(0,n.t)("1 year end frequency")]],description:(0,n.t)("Pandas resample rule")}}],[{name:"resample_method",config:{type:"SelectControl",label:(0,n.t)("Fill method"),default:null,choices:[["asfreq",(0,n.t)("Null imputation")],["zerofill",(0,n.t)("Zero imputation")],["linear",(0,n.t)("Linear interpolation")],["ffill",(0,n.t)("Forward values")],["bfill",(0,n.t)("Backward values")],["median",(0,n.t)("Median values")],["mean",(0,n.t)("Mean values")],["sum",(0,n.t)("Sum values")]],description:(0,n.t)("Pandas resample method")}}]]},O=[],T={label:(0,n.t)("Annotations and Layers"),expanded:!1,tabOverride:"data",controlSetRows:[[{name:"annotation_layers",config:{type:"AnnotationLayerControl",label:"",default:O,description:(0,n.t)("Annotation Layers"),renderTrigger:!1}}]]};var f=o(75294),y=o(99298);const N={forecastEnabled:!1,forecastInterval:.8,forecastPeriods:10,forecastSeasonalityDaily:null,forecastSeasonalityWeekly:null,forecastSeasonalityYearly:null},S={label:(0,n.t)("Predictive Analytics"),expanded:!1,controlSetRows:[[{name:"forecastEnabled",config:{type:"CheckboxControl",label:(0,n.t)("Enable forecast"),renderTrigger:!1,default:N.forecastEnabled,description:(0,n.t)("Enable forecasting")}}],[{name:"forecastPeriods",config:{type:"TextControl",label:(0,n.t)("Forecast periods"),validators:[f.Z],default:N.forecastPeriods,description:(0,n.t)("How many periods into the future do we want to predict")}}],[{name:"forecastInterval",config:{type:"TextControl",label:(0,n.t)("Confidence interval"),validators:[y.Z],default:N.forecastInterval,description:(0,n.t)("Width of the confidence interval. Should be between 0 and 1")}}],[{name:"forecastSeasonalityYearly",config:{type:"SelectControl",freeForm:!0,label:(0,n.t)("Yearly seasonality"),choices:[[null,(0,n.t)("default")],[!0,(0,n.t)("Yes")],[!1,(0,n.t)("No")]],default:N.forecastSeasonalityYearly,description:(0,n.t)("Should yearly seasonality be applied. An integer value will specify Fourier order of seasonality.")}}],[{name:"forecastSeasonalityWeekly",config:{type:"SelectControl",freeForm:!0,label:(0,n.t)("Weekly seasonality"),choices:[[null,(0,n.t)("default")],[!0,(0,n.t)("Yes")],[!1,(0,n.t)("No")]],default:N.forecastSeasonalityWeekly,description:(0,n.t)("Should weekly seasonality be applied. An integer value will specify Fourier order of seasonality.")}}],[{name:"forecastSeasonalityDaily",config:{type:"SelectControl",freeForm:!0,label:(0,n.t)("Daily seasonality"),choices:[[null,(0,n.t)("default")],[!0,(0,n.t)("Yes")],[!1,(0,n.t)("No")]],default:N.forecastSeasonalityDaily,description:(0,n.t)("Should daily seasonality be applied. An integer value will specify Fourier order of seasonality.")}}]]},C=[15,30,50,75,100,125,150,200],A=[["Left",(0,n.t)("Left")],["Top",(0,n.t)("Top")]],g={label:(0,n.t)("Chart Title"),tabOverride:"customize",expanded:!0,controlSetRows:[[(0,E.tZ)("div",{className:"section-header"},(0,n.t)("X Axis"))],[{name:"x_axis_title",config:{type:"TextControl",label:(0,n.t)("X Axis Title"),renderTrigger:!0,default:"",description:(0,n.t)("Changing this control takes effect instantly")}}],[{name:"x_axis_title_margin",config:{type:"SelectControl",freeForm:!0,clearable:!0,label:(0,n.t)("X AXIS TITLE BOTTOM MARGIN"),renderTrigger:!0,default:C[0],choices:(0,R.m)(C),description:(0,n.t)("Changing this control takes effect instantly")}}],[(0,E.tZ)("div",{className:"section-header"},(0,n.t)("Y Axis"))],[{name:"y_axis_title",config:{type:"TextControl",label:(0,n.t)("Y Axis Title"),renderTrigger:!0,default:"",description:(0,n.t)("Changing this control takes effect instantly")}}],[{name:"y_axis_title_margin",config:{type:"SelectControl",freeForm:!0,clearable:!0,label:(0,n.t)("Y AXIS TITLE MARGIN"),renderTrigger:!0,default:C[0],choices:(0,R.m)(C),description:(0,n.t)("Changing this control takes effect instantly")}}],[{name:"y_axis_title_position",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,n.t)("Y AXIS TITLE POSITION"),renderTrigger:!0,default:A[0][0],choices:A,description:(0,n.t)("Changing this control takes effect instantly")}}]]};var I=o(78580),v=o.n(I),h=o(43716),b=o(37731),D=o(10581),M=o(55786),x=o(56652),L=o(1111),w=o(45211);const U={name:"contributionMode",config:{type:"SelectControl",label:(0,n.t)("Contribution Mode"),default:null,choices:[[null,(0,n.t)("None")],[h.YC.Row,(0,n.t)("Row")],[h.YC.Column,(0,n.t)("Series")]],description:(0,n.t)("Calculate contribution per series or row")}},P=e=>{var t,o,a,n;let{controls:r}=e;return(0,b.Z)(null==r||null==(t=r.x_axis)?void 0:t.value)&&!(0,w.x)((0,D.Z)(null==r||null==(o=r.x_axis)?void 0:o.value),null==r||null==(a=r.datasource)?void 0:a.datasource)&&Array.isArray(null==r||null==(n=r.groupby)?void 0:n.value)&&0===r.groupby.value.length},V={name:"x_axis_sort",config:{type:"XAxisSortControl",label:(0,n.t)("X-Axis Sort By"),description:(0,n.t)("Whether to sort descending or ascending on the X-Axis."),shouldMapStateToProps:(e,t)=>{var o,a,n,r,i,l,s,_;const c=[(0,D.Z)(null==e||null==(o=e.controls)||null==(a=o.x_axis)?void 0:a.value),...(0,M.Z)(null==e||null==(n=e.controls)||null==(r=n.metrics)?void 0:r.value).map((e=>(0,x.Z)(e)))],u=[(0,D.Z)(null==t||null==(i=t.controls)||null==(l=i.x_axis)?void 0:l.value),...(0,M.Z)(null==t||null==(s=t.controls)||null==(_=s.metrics)?void 0:_.value).map((e=>(0,x.Z)(e)))];return!(0,L.Z)(c,u)},mapStateToProps:(e,t)=>{var o,a,n,r;let{controls:i}=e;const l=[(0,D.Z)(null==i||null==(o=i.x_axis)?void 0:o.value),...(0,M.Z)(null==i||null==(a=i.metrics)?void 0:a.value).map((e=>(0,x.Z)(e)))].filter(Boolean);return{shouldReset:!("string"==typeof t.value&&v()(l).call(l,t.value)&&!(0,w.x)((0,D.Z)(null==i||null==(n=i.x_axis)?void 0:n.value),null==i||null==(r=i.datasource)?void 0:r.datasource)),options:l.map((e=>({value:e,label:e})))}},visibility:P}},F={name:"x_axis_sort_asc",config:{type:"CheckboxControl",label:(0,n.t)("X-Axis Sort Ascending"),default:!0,description:(0,n.t)("Whether to sort descending or ascending on the X-Axis."),visibility:P}},k=[["metrics"],["groupby"],[U],["adhoc_filters"],["limit"],["timeseries_limit_metric"],["order_desc"],["row_limit"],["truncate_metric"],["show_empty_columns"]],Z={label:(0,n.t)("Query"),expanded:!0,controlSetRows:[[r.O6?"x_axis":null],[r.O6?"time_grain_sqla":null],...k]},B={label:(0,n.t)("Query"),expanded:!0,controlSetRows:[[r.O6?"x_axis":null],[r.O6?"time_grain_sqla":null],[r.O6?V:null],[r.O6?F:null],...k]};var Y=o(58842),G=o(89368),H=o(9609);function W(e){let t;return e&&e.length>0&&(e.forEach((e=>{"count"===e.metric_name&&(t="count")})),t||(t=e[0].metric_name)),t}var q=o(75781),X=o(19835),Q=o(20002),j=o(35622),K=o(97490),z=o(60955),J=o(92155),$=o(44928),ee=o(4098),te=o(99343),oe=o(19546),ae=o(69862),ne=o(37701),re=o(20884),ie=o(63038),le=o(6219),se=o(73739),_e=o(27751),ce=o(14920),ue=o(9882),de=o(65634),me=o(63351),Re=o(51384),Ee=o(39650),pe=o(53769),Oe=o(356),Te=o(83389),fe=o(38575);const ye={column_format:{},columns:[{advanced_data_type:void 0,certification_details:null,certified_by:null,column_name:"num",description:null,expression:"",filterable:!0,groupby:!0,id:332,is_certified:!1,is_dttm:!1,python_date_format:null,type:"BIGINT",type_generic:0,verbose_name:null,warning_markdown:null},{advanced_data_type:void 0,certification_details:null,certified_by:null,column_name:"gender",description:null,expression:"",filterable:!0,groupby:!0,id:330,is_certified:!1,is_dttm:!1,python_date_format:null,type:"VARCHAR(16)",type_generic:1,verbose_name:"",warning_markdown:null},{advanced_data_type:void 0,certification_details:null,certified_by:null,column_name:"state",description:null,expression:"",filterable:!0,groupby:!0,id:333,is_certified:!1,is_dttm:!1,python_date_format:null,type:"VARCHAR(10)",type_generic:1,verbose_name:null,warning_markdown:null},{advanced_data_type:void 0,certification_details:null,certified_by:null,column_name:"ds",description:null,expression:"",filterable:!0,groupby:!0,id:329,is_certified:!1,is_dttm:!0,python_date_format:null,type:"TIMESTAMP WITHOUT TIME ZONE",type_generic:2,verbose_name:null,warning_markdown:null},{advanced_data_type:void 0,certification_details:null,certified_by:null,column_name:"name",description:null,expression:"",filterable:!0,groupby:!0,id:331,is_certified:!1,is_dttm:!1,python_date_format:null,type:"VARCHAR(255)",type_generic:1,verbose_name:null,warning_markdown:null}],datasource_name:"birth_names",description:null,granularity_sqla:"ds",id:2,main_dttm_col:"ds",metrics:[{certification_details:null,certified_by:null,d3format:null,description:null,expression:"COUNT(*)",id:7,is_certified:!1,metric_name:"count",verbose_name:"COUNT(*)",warning_markdown:"",warning_text:null}],name:"public.birth_names",order_by_choices:[],owners:[{first_name:"admin",id:1,last_name:"user",username:"admin"}],type:o(46078).i9.Dataset,uid:"2__table",verbose_map:{}},Ne=a},20884:(e,t,o)=>{o.d(t,{F:()=>l});var a=o(55786),n=o(10581),r=o(56652);const i=/(\d+)\/(\d+) percentiles/,l=(e,t)=>{const{groupby:o,whiskerOptions:l}=e;if(l){let e,s;const _=i.exec(l);if("Tukey"!==l&&l)if("Min/max (no outliers)"===l)e="min/max";else{if(!_)throw new Error(`Unsupported whisker type: ${l}`);e="percentile",s=[parseInt(_[1],10),parseInt(_[2],10)]}else e="tukey";return{operation:"boxplot",options:{whisker_type:e,percentiles:s,groupby:(0,a.Z)(o).map(n.Z),metrics:(0,a.Z)(t.metrics).map(r.Z)}}}}},69862:(e,t,o)=>{o.d(t,{I:()=>a});const a=(e,t)=>{if(e.contributionMode)return{operation:"contribution",options:{orientation:e.contributionMode}}}},63038:(e,t,o)=>{o.d(t,{k:()=>a});const a=(e,t)=>({operation:"flatten"})},4098:(e,t,o)=>{o.d(t,{H:()=>l});var a=o(55786),n=o(56652),r=o(11146),i=o(10581);const l=(e,t)=>{const o=(0,a.Z)(t.metrics).map(n.Z),l=(0,r.M8)(e),s=t.series_columns||t.columns;if(l&&o.length)return{operation:"pivot",options:{index:[l],columns:(0,a.Z)(s).map(i.Z),aggregates:Object.fromEntries(o.map((e=>[e,{operator:"mean"}]))),drop_missing_columns:!(null!=e&&e.show_empty_columns)}}}},37701:(e,t,o)=>{o.d(t,{D:()=>n});var a=o(11146);const n=(e,t)=>{const o=(0,a.M8)(e);if(e.forecastEnabled&&o)return{operation:"prophet",options:{time_grain:e.time_grain_sqla,periods:parseInt(e.forecastPeriods,10),confidence_interval:parseFloat(e.forecastInterval),yearly_seasonality:e.forecastSeasonalityYearly,weekly_seasonality:e.forecastSeasonalityWeekly,daily_seasonality:e.forecastSeasonalityDaily,index:o}}}},19546:(e,t,o)=>{o.d(t,{N:()=>u});var a=o(78580),n=o.n(a),r=o(55786),i=o(11146),l=o(62363),s=o(56652),_=o(73739),c=o(6219);const u=(e,t)=>{var o;const a=(0,r.Z)(t.metrics),u=(0,r.Z)(t.series_columns||t.columns),{truncate_metric:d}=e,m=(0,i.M8)(e);if(1===a.length&&u.length>0&&m&&(!(0,_.H)(e,t)||!n()(o=[l.wj.Difference,l.wj.Ratio,l.wj.Percentage]).call(o,e.comparison_type))&&void 0!==d&&d){const o=[];if((0,_.H)(e,t)&&e.comparison_type===l.wj.Values){const a=(0,c.O)(e,t),i=(0,r.Z)(e.time_compare);[...a.keys()].forEach((e=>{const t=i.find((t=>n()(e).call(e,t)));o.push([e,t])}))}return o.push([(0,s.Z)(a[0]),null]),{operation:"rename",options:{columns:Object.fromEntries(o),level:0,inplace:!0}}}}},99343:(e,t,o)=>{o.d(t,{X:()=>a});const a=(e,t)=>{const o="zerofill"===e.resample_method,a=o?"asfreq":e.resample_method,n=e.resample_rule;if(a&&n)return{operation:"resample",options:{method:a,rule:n,fill_value:o?0:null}}}},97490:(e,t,o)=>{o.d(t,{V:()=>c});var a=o(78580),n=o.n(a),r=o(55786),i=o(62363),l=o(77675),s=o(73739),_=o(6219);const c=(e,t)=>{var o;let a;if((0,s.H)(e,t)){const o=(0,_.O)(e,t);a=[...Array.from(o.values()),...Array.from(o.keys())]}else a=(0,r.Z)(t.metrics).map((e=>"string"==typeof e?e:e.label));const c=Object.fromEntries(a.map((e=>[e,e])));return e.rolling_type===i.su.Cumsum?{operation:"cum",options:{operator:"sum",columns:c}}:n()(o=[i.su.Sum,i.su.Mean,i.su.Std]).call(o,e.rolling_type)?{operation:"rolling",options:{rolling_type:e.rolling_type,window:(0,l.Z)(e.rolling_periods,1),min_periods:(0,l.Z)(e.min_periods,0),columns:c}}:void 0}},44928:(e,t,o)=>{o.d(t,{C:()=>u});var a=o(41609),n=o.n(a),r=o(78580),i=o.n(r),l=o(11146),s=o(55786),_=o(56652),c=o(37731);const u=(e,t)=>{const o=[(0,l.M8)(e),...(0,s.Z)(e.metrics).map((e=>(0,_.Z)(e)))].filter(Boolean);if(l.O6&&(0,c.Z)(null==e?void 0:e.x_axis_sort)&&(0,c.Z)(null==e?void 0:e.x_axis_sort_asc)&&i()(o).call(o,e.x_axis_sort)&&n()(e.groupby))return e.x_axis_sort===(0,l.M8)(e)?{operation:"sort",options:{is_sort_index:!0,ascending:e.x_axis_sort_asc}}:{operation:"sort",options:{by:e.x_axis_sort,ascending:e.x_axis_sort_asc}}}},60955:(e,t,o)=>{o.d(t,{N:()=>i});var a=o(62363),n=o(6219),r=o(73739);const i=(e,t)=>{const o=e.comparison_type,i=(0,n.O)(e,t);if((0,r.H)(e,t)&&o!==a.wj.Values)return{operation:"compare",options:{source_columns:Array.from(i.values()),compare_columns:Array.from(i.keys()),compare_type:o,drop_original_columns:!0}}}},92155:(e,t,o)=>{o.d(t,{O:()=>s});var a=o(11146),n=o(55786),r=o(10581),i=o(6219),l=o(73739);const s=(e,t)=>{const o=(0,i.O)(e,t),s=(0,a.M8)(e),_=t.series_columns||t.columns;if((0,l.H)(e,t)&&s){const t=Object.fromEntries([...o.values(),...o.keys()].map((e=>[e,{operator:"mean"}])));return{operation:"pivot",options:{index:[s],columns:(0,n.Z)(_).map(r.Z),drop_missing_columns:!(null!=e&&e.show_empty_columns),aggregates:t}}}}},14920:(e,t,o)=>{o.d(t,{K:()=>a});const a="__"},6219:(e,t,o)=>{o.d(t,{O:()=>i});var a=o(55786),n=o(56652),r=o(14920);const i=(e,t)=>{const o=(0,a.Z)(t.metrics),i=(0,a.Z)(e.time_compare),l=o.map(n.Z),s=new Map;return l.forEach((e=>{i.forEach((t=>{s.set([e,t].join(r.K),e)}))})),s}},27751:(e,t,o)=>{o.d(t,{m:()=>l});var a=o(47037),n=o.n(a),r=o(62363),i=o(55786);const l=(e,t)=>{if(t.comparison_type!==r.wj.Values)return!1;const o=(0,i.Z)(null==t?void 0:t.time_compare);return!!n()(e.name)&&!!o.find((t=>e.name.endsWith(t)))}},73739:(e,t,o)=>{o.d(t,{H:()=>l});var a=o(78580),n=o.n(a),r=o(62363),i=o(6219);const l=(e,t)=>{var o;const a=e.comparison_type,l=(0,i.O)(e,t);return n()(o=Object.values(r.wj)).call(o,a)&&l.size>0}},75781:(e,t,o)=>{o.d(t,{Z:()=>r});var a=o(55786),n=o(38575);function r(e){return(0,n.It)(e)&&(0,n.xN)(e.columns[0])?e.columns.map((e=>[e.column_name,e.verbose_name||e.column_name])).sort(((e,t)=>e[1].toLowerCase()>t[1].toLowerCase()?1:-1)):(0,n.JQ)(e)?(0,a.Z)(e.columns).map((e=>[e.name,e.name])).sort(((e,t)=>e[1].toLowerCase()>t[1].toLowerCase()?1:-1)):[]}},9609:(e,t,o)=>{o.d(t,{NM:()=>s,Km:()=>_,E2:()=>c,ni:()=>u});var a=o(78580),n=o.n(a),r=o(30845),i=o(25130),l=o(38575);const s=function(e,t){return void 0===t&&(t=0),Number(`${Math.round(Number(`${e}e+${t}`))}e-${t}`)},_=function(e,t,o,a,n){return void 0===a&&(a=.05),void 0===n&&(n=1),o===t?n:Math.min(n,s(Math.abs((n-a)/(o-t)*(e-t))+a,2))},c=(e,t)=>{let o,{operator:a,targetValue:r,targetValueLeft:s,targetValueRight:c,colorScheme:u}=e,d=.05;if(void 0===a||void 0===u)return()=>{};if(n()(l.vD).call(l.vD,a)&&(void 0===s||void 0===c))return()=>{};if(a!==l.O9.NONE&&!n()(l.vD).call(l.vD,a)&&void 0===r)return()=>{};switch(a){case l.O9.NONE:d=0,o=(e,t)=>{const o=Math.min(...t),a=Math.max(...t);return e>=o&&e<=a&&{cutoffValue:o,extremeValue:a}};break;case l.O9.GREATER_THAN:o=(e,t)=>e>r&&{cutoffValue:r,extremeValue:Math.max(...t)};break;case l.O9.LESS_THAN:o=(e,t)=>e<r&&{cutoffValue:r,extremeValue:Math.min(...t)};break;case l.O9.GREATER_OR_EQUAL:o=(e,t)=>e>=r&&{cutoffValue:r,extremeValue:Math.max(...t)};break;case l.O9.LESS_OR_EQUAL:o=(e,t)=>e<=r&&{cutoffValue:r,extremeValue:Math.min(...t)};break;case l.O9.EQUAL:o=e=>e===r&&{cutoffValue:r,extremeValue:r};break;case l.O9.NOT_EQUAL:o=(e,t)=>{if(e===r)return!1;const o=Math.max(...t),a=Math.min(...t);return{cutoffValue:r,extremeValue:Math.abs(r-a)>Math.abs(o-r)?a:o}};break;case l.O9.BETWEEN:o=e=>e>s&&e<c&&{cutoffValue:s,extremeValue:c};break;case l.O9.BETWEEN_OR_EQUAL:o=e=>e>=s&&e<=c&&{cutoffValue:s,extremeValue:c};break;case l.O9.BETWEEN_OR_LEFT_EQUAL:o=e=>e>=s&&e<c&&{cutoffValue:s,extremeValue:c};break;case l.O9.BETWEEN_OR_RIGHT_EQUAL:o=e=>e>s&&e<=c&&{cutoffValue:s,extremeValue:c};break;default:o=()=>!1}return e=>{const a=o(e,t);if(!1===a)return;const{cutoffValue:n,extremeValue:r}=a;return(0,i.Zf)(u,_(e,n,r,d,1))}},u=(0,r.Z)(((e,t)=>{var o;return null!=(o=null==e?void 0:e.reduce(((e,o)=>(void 0!==(null==o?void 0:o.column)&&((null==o?void 0:o.operator)===l.O9.NONE||void 0!==(null==o?void 0:o.operator)&&(n()(l.vD).call(l.vD,null==o?void 0:o.operator)?void 0!==(null==o?void 0:o.targetValueLeft)&&void 0!==(null==o?void 0:o.targetValueRight):void 0!==(null==o?void 0:o.targetValue)))&&e.push({column:null==o?void 0:o.column,getColorFromValue:c(o,t.map((e=>e[o.column])))}),e)),[]))?o:[]}))},43716:(e,t,o)=>{o.d(t,{C5:()=>n,WN:()=>r,Tb:()=>i,sn:()=>l,yv:()=>s,Qn:()=>_,eh:()=>c,pY:()=>u,YC:()=>d,ZP:()=>m});var a=o(46078);const n={FRONTEND_CSRF_ERROR:"FRONTEND_CSRF_ERROR",FRONTEND_NETWORK_ERROR:"FRONTEND_NETWORK_ERROR",FRONTEND_TIMEOUT_ERROR:"FRONTEND_TIMEOUT_ERROR",GENERIC_DB_ENGINE_ERROR:"GENERIC_DB_ENGINE_ERROR",COLUMN_DOES_NOT_EXIST_ERROR:"COLUMN_DOES_NOT_EXIST_ERROR",TABLE_DOES_NOT_EXIST_ERROR:"TABLE_DOES_NOT_EXIST_ERROR",SCHEMA_DOES_NOT_EXIST_ERROR:"SCHEMA_DOES_NOT_EXIST_ERROR",CONNECTION_INVALID_USERNAME_ERROR:"CONNECTION_INVALID_USERNAME_ERROR",CONNECTION_INVALID_PASSWORD_ERROR:"CONNECTION_INVALID_PASSWORD_ERROR",CONNECTION_INVALID_HOSTNAME_ERROR:"CONNECTION_INVALID_HOSTNAME_ERROR",CONNECTION_PORT_CLOSED_ERROR:"CONNECTION_PORT_CLOSED_ERROR",CONNECTION_INVALID_PORT_ERROR:"CONNECTION_INVALID_PORT_ERROR",CONNECTION_HOST_DOWN_ERROR:"CONNECTION_HOST_DOWN_ERROR",CONNECTION_ACCESS_DENIED_ERROR:"CONNECTION_ACCESS_DENIED_ERROR",CONNECTION_UNKNOWN_DATABASE_ERROR:"CONNECTION_UNKNOWN_DATABASE_ERROR",CONNECTION_DATABASE_PERMISSIONS_ERROR:"CONNECTION_DATABASE_PERMISSIONS_ERROR",CONNECTION_MISSING_PARAMETERS_ERRORS:"CONNECTION_MISSING_PARAMETERS_ERRORS",OBJECT_DOES_NOT_EXIST_ERROR:"OBJECT_DOES_NOT_EXIST_ERROR",SYNTAX_ERROR:"SYNTAX_ERROR",VIZ_GET_DF_ERROR:"VIZ_GET_DF_ERROR",UNKNOWN_DATASOURCE_TYPE_ERROR:"UNKNOWN_DATASOURCE_TYPE_ERROR",FAILED_FETCHING_DATASOURCE_INFO_ERROR:"FAILED_FETCHING_DATASOURCE_INFO_ERROR",TABLE_SECURITY_ACCESS_ERROR:"TABLE_SECURITY_ACCESS_ERROR",DATASOURCE_SECURITY_ACCESS_ERROR:"DATASOURCE_SECURITY_ACCESS_ERROR",DATABASE_SECURITY_ACCESS_ERROR:"DATABASE_SECURITY_ACCESS_ERROR",QUERY_SECURITY_ACCESS_ERROR:"QUERY_SECURITY_ACCESS_ERROR",MISSING_OWNERSHIP_ERROR:"MISSING_OWNERSHIP_ERROR",BACKEND_TIMEOUT_ERROR:"BACKEND_TIMEOUT_ERROR",DATABASE_NOT_FOUND_ERROR:"DATABASE_NOT_FOUND_ERROR",MISSING_TEMPLATE_PARAMS_ERROR:"MISSING_TEMPLATE_PARAMS_ERROR",INVALID_TEMPLATE_PARAMS_ERROR:"INVALID_TEMPLATE_PARAMS_ERROR",RESULTS_BACKEND_NOT_CONFIGURED_ERROR:"RESULTS_BACKEND_NOT_CONFIGURED_ERROR",DML_NOT_ALLOWED_ERROR:"DML_NOT_ALLOWED_ERROR",INVALID_CTAS_QUERY_ERROR:"INVALID_CTAS_QUERY_ERROR",INVALID_CVAS_QUERY_ERROR:"INVALID_CVAS_QUERY_ERROR",SQLLAB_TIMEOUT_ERROR:"SQLLAB_TIMEOUT_ERROR",RESULTS_BACKEND_ERROR:"RESULTS_BACKEND_ERROR",ASYNC_WORKERS_ERROR:"ASYNC_WORKERS_ERROR",GENERIC_COMMAND_ERROR:"GENERIC_COMMAND_ERROR",GENERIC_BACKEND_ERROR:"GENERIC_BACKEND_ERROR",INVALID_PAYLOAD_FORMAT_ERROR:"INVALID_PAYLOAD_FORMAT_ERROR",INVALID_PAYLOAD_SCHEMA_ERROR:"INVALID_PAYLOAD_SCHEMA_ERROR"},r={TABLE:"TABLE",VIEW:"VIEW"};var i;!function(e){e.STARTED="started",e.STOPPED="stopped",e.FAILED="failed",e.PENDING="pending",e.RUNNING="running",e.SCHEDULED="scheduled",e.SUCCESS="success",e.FETCHING="fetching",e.TIMED_OUT="timed_out"}(i||(i={}));const l=[i.RUNNING,i.STARTED,i.PENDING,i.FETCHING,i.SCHEDULED],s=[i.STOPPED,i.FAILED,i.SUCCESS,i.TIMED_OUT],_={id:"clientId2353",dbId:1,sql:"SELECT * FROM something",sqlEditorId:"dfsadfs",tab:"unimportant",tempTable:"",ctas:!1,cached:!1,errorMessage:null,extra:{progress:null},isDataPreview:!1,progress:0,resultsKey:null,state:i.SUCCESS,tempSchema:null,trackingUrl:null,templateParams:null,rows:42,queryLimit:100,limitingFactor:"",endDttm:1476910579693,duration:"",startDttm:1476910566092.96,time:{},user:{},userId:1,db:{},started:"",querylink:{},queryId:1,executedSql:"",output:"",actions:{},type:a.i9.Query,columns:[{name:"Column 1",type:"STRING",is_dttm:!1},{name:"Column 3",type:"STRING",is_dttm:!1},{name:"Column 2",type:"TIMESTAMP",is_dttm:!0}]},c={results:{displayLimitReached:!1,columns:[{name:"Column 1",type:"STRING",is_dttm:!1},{name:"Column 3",type:"STRING",is_dttm:!1},{name:"Column 2",type:"TIMESTAMP",is_dttm:!0}],data:[{"Column 1":"a","Column 2":"b","Column 3":"2014-11-11T00:00:00"}],expanded_columns:[],selected_columns:[{name:"Column 1",type:"STRING",is_dttm:!1},{name:"Column 3",type:"STRING",is_dttm:!1},{name:"Column 2",type:"TIMESTAMP",is_dttm:!0}],query:{limit:6}}},u={..._,...c};var d;!function(e){e.Row="row",e.Column="column"}(d||(d={}));const m={}},77675:(e,t,o)=>{function a(e,t){const o=parseInt(String(e),10),a=void 0===t?NaN:t;return Number.isNaN(o)?a:o}o.d(t,{Z:()=>a})}}]);
//# sourceMappingURL=8989.696ff79fcd9b40192e66.entry.js.map