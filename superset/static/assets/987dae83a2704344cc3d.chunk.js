(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[6357],{86357:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>v}),n(67294);var a=n(43323),r=n(11965),l=n(51995),i=n(15078),o=n.n(i),s=n(45697),c=n.n(s),d=(n(81896),n(32383)),u=n(67190),h=n(45636),g=n(45511);const p={data:c().shape({records:c().arrayOf(c().shape({x:c().string,y:c().string,v:c().number,perc:c().number,rank:c().number})),extents:c().arrayOf(c().number)}),width:c().number,height:c().number,bottomMargin:c().oneOfType([c().string,c().number]),colorScheme:c().string,columnX:c().string,columnY:c().string,leftMargin:c().oneOfType([c().string,c().number]),metric:c().oneOfType([c().string,c().object]),normalized:c().bool,numberFormat:c().string,showLegend:c().bool,showPercentage:c().bool,showValues:c().bool,sortXAxis:c().string,sortYAxis:c().string,xScaleInterval:c().number,yScaleInterval:c().number,yAxisBounds:c().arrayOf(c().number)};function f(t,e){return t>e?1:-1}function m(t,e){const{data:n,width:a,height:r,bottomMargin:l,canvasImageRendering:i,colorScheme:s,columnX:c,columnY:p,leftMargin:m,metric:x,normalized:y,numberFormat:v,showLegend:b,showPercentage:w,showValues:_,sortXAxis:$,sortYAxis:k,xScaleInterval:z,yScaleInterval:C,yAxisBounds:T}=e,{records:B,extents:A}=n,S={top:10,right:10,bottom:35,left:35};let O=!0,L=!0,E=6;const M=(0,u.JB)(v);function P(t,e,n){let a={};const r={};B.forEach((e=>{a[e[t]]=(a[e[t]]||0)+e.v,r[e[t]]=e[t]}));const l=Object.keys(r).map((t=>r[t]));return"alpha_asc"===n?a=l.sort(f):"alpha_desc"===n?a=l.sort(f).reverse():"value_desc"===n?a=Object.keys(a).sort(((t,e)=>a[t]>a[e]?-1:1)):"value_asc"===n&&(a=Object.keys(a).sort(((t,e)=>a[e]>a[t]?-1:1))),"y"===t&&e&&a.reverse(),e?o().scale.ordinal().domain(a).rangeBands(e):o().scale.ordinal().domain(a).range(o().range(a.length))}t.innerHTML="";const F={};!function(){let t=1,e=1;B.forEach((n=>{"number"==typeof n.y&&(E=7),t=Math.max(t,n.x&&n.x.toString().length||1),e=Math.max(e,n.y&&n.y.toString().length||1)})),S.left="auto"===m?Math.ceil(Math.max(S.left,E*e)):m,b&&(S.right+=40),S.bottom="auto"===l?Math.ceil(Math.max(S.bottom,4.5*t)):l}();let U=a-(S.left+S.right),N=r-(S.bottom+S.top);const R=()=>{S.left="auto"===m?35:m,U=a-(S.left+S.right),O=!1};U<150&&R(),(N<150||U<150)&&(S.bottom="auto"===l?35:l,N=r-(S.bottom+S.top),L=!1),O&&N<150&&R();const I=(0,u.JB)(h.Z.PERCENT),Z=P("x",null,$),D=P("y",null,k),W=P("x",[0,U],$),j=P("y",[N,0],k),X=[W.domain().length,j.domain().length],H=T[0]||0,V=T[1]||1,Y=(0,g.Z)().get(s).createLinearScale([H,V]),q=[o().scale.linear().domain([0,X[0]]).range([0,U]),o().scale.linear().domain([0,X[1]]).range([0,N])],J=o().select(t);J.classed("superset-legacy-chart-heatmap",!0);const K=J.append("canvas").attr("width",X[0]).attr("height",X[1]).style("width",`${U}px`).style("height",`${N}px`).style("image-rendering",i).style("left",`${S.left}px`).style("top",`${S.top}px`).style("position","absolute"),G=J.append("svg").attr("width",a).attr("height",r).attr("class","heatmap-container").style("position","relative");if(_&&G.selectAll("rect").data(B).enter().append("g").attr("transform",`translate(${S.left}, ${S.top})`).append("text").attr("transform",(t=>`translate(${W(t.x)}, ${j(t.y)})`)).attr("y",j.rangeBand()/2).attr("x",W.rangeBand()/2).attr("text-anchor","middle").attr("dy",".35em").text((t=>M(t.v))).attr("font-size",Math.min(j.rangeBand(),W.rangeBand())/3+"px").attr("fill",(t=>t.v>=A[1]/2?"white":"black")),b){const t=o().legend.color().labelFormat(M).scale(Y).shapePadding(0).cells(10).shapeWidth(10).shapeHeight(10).labelOffset(3);G.append("g").attr("transform",`translate(${a-40}, ${S.top})`).call(t)}const Q=(0,d.Z)().attr("class","d3-tip").offset((function(){const t=o().mouse(this),e=t[0]-U/2;return[t[1]-20,e]})).html((function(){let t="";const e=o().mouse(this),n=Math.floor(q[0].invert(e[0])),a=Math.floor(q[1].invert(e[1])),r="object"==typeof x?x.label:x;if(n in F&&a in F[n]){const e=F[n][a];t+=`<div><b>${c}: </b>${e.x}<div>`,t+=`<div><b>${p}: </b>${e.y}<div>`,t+=`<div><b>${r}: </b>${M(e.v)}<div>`,w&&(t+=`<div><b>%: </b>${I(y?e.rank:e.perc)}<div>`),Q.style("display",null)}else Q.style("display","none");return t}));if(G.append("g").attr("transform",`translate(${S.left}, ${S.top})`).append("rect").classed("background-rect",!0).on("mousemove",Q.show).on("mouseout",Q.hide).attr("width",U).attr("height",N).call(Q),L){const t=o().svg.axis().scale(W).outerTickSize(0).tickValues(W.domain().filter(((t,e)=>!(e%z)))).orient("bottom");G.append("g").attr("class","x axis").attr("transform",`translate(${S.left},${S.top+N})`).call(t).selectAll("text").attr("x",-4).attr("y",10).attr("dy","0.3em").style("text-anchor","end").attr("transform","rotate(-45)")}if(O){const t=o().svg.axis().scale(j).outerTickSize(0).tickValues(j.domain().filter(((t,e)=>!(e%C)))).orient("left");G.append("g").attr("class","y axis").attr("transform",`translate(${S.left},${S.top})`).call(t)}!function(t){const e=t.select(".x.axis").node();e&&e.getBoundingClientRect().x+4<t.node().getBoundingClientRect().x&&t.selectAll(".x.axis").selectAll("text").attr("transform","rotate(-90)").attr("x",-6).attr("y",0).attr("dy","0.3em")}(J);const tt=K.node().getContext("2d");tt.imageSmoothingEnabled=!1,function(){const t=new Image,e=tt.createImageData(X[0],X[1]),n={};B.forEach((t=>{const e=o().rgb(Y(y?t.rank:t.perc)),a=Z(t.x),r=D(t.y);n[a+r*Z.domain().length]=e,void 0===F[a]&&(F[a]={}),void 0===F[a][r]&&(F[a][r]=t)}));let a=0;for(let t=0;t<X[0]*X[1];t+=1){let r=n[t],l=255;void 0===r&&(r=o().rgb("#F00"),l=0),e.data[a+0]=r.r,e.data[a+1]=r.g,e.data[a+2]=r.b,e.data[a+3]=l,a+=4}tt.putImageData(e,0,0),t.src=K.node().toDataURL()}()}m.displayName="Heatmap",m.propTypes=p;const x=m,y=(0,a.Z)(x),v=(0,l.iK)((t=>{let{className:e,...n}=t;return(0,r.tZ)("div",{className:e},(0,r.tZ)(r.xB,{styles:t=>r.iv`
        .d3-tip {
          line-height: 1;
          padding: ${3*t.gridUnit}px;
          background: ${t.colors.grayscale.dark2};
          color: ${t.colors.grayscale.light5};
          border-radius: 4px;
          pointer-events: none;
          z-index: 1000;
          font-size: ${t.typography.sizes.s}px;
        }

        /* Creates a small triangle extender for the tooltip */
        .d3-tip:after {
          box-sizing: border-box;
          display: inline;
          font-size: ${t.typography.sizes.xs};
          width: 100%;
          line-height: 1;
          color: ${t.colors.grayscale.dark2};
          position: absolute;
          pointer-events: none;
        }

        /* Northward tooltips */
        .d3-tip.n:after {
          content: '\\25BC';
          margin: -${t.gridUnit}px 0 0 0;
          top: 100%;
          left: 0;
          text-align: center;
        }

        /* Eastward tooltips */
        .d3-tip.e:after {
          content: '\\25C0';
          margin: -${t.gridUnit}px 0 0 0;
          top: 50%;
          left: -${2*t.gridUnit}px;
        }

        /* Southward tooltips */
        .d3-tip.s:after {
          content: '\\25B2';
          margin: 0;
          top: -${2*t.gridUnit}px;
          left: 0;
          text-align: center;
        }

        /* Westward tooltips */
        .d3-tip.w:after {
          content: '\\25B6';
          margin: -${t.gridUnit}px 0 0 0px;
          top: 50%;
          left: 100%;
        }
      `}),(0,r.tZ)(y,n))}))`
  ${t=>{let{theme:e}=t;return`\n    .superset-legacy-chart-heatmap {\n      position: relative;\n      top: 0;\n      left: 0;\n      height: 100%;\n    }\n\n    .superset-legacy-chart-heatmap .axis text {\n      font-size: ${e.typography.sizes.xs}px;\n      text-rendering: optimizeLegibility;\n    }\n\n    .superset-legacy-chart-heatmap .background-rect {\n      stroke: ${e.colors.grayscale.light2};\n      fill-opacity: 0;\n      pointer-events: all;\n    }\n\n    .superset-legacy-chart-heatmap .axis path,\n    .superset-legacy-chart-heatmap .axis line {\n      fill: none;\n      stroke: ${e.colors.grayscale.light2};\n      shape-rendering: crispEdges;\n    }\n\n    .superset-legacy-chart-heatmap canvas,\n    .superset-legacy-chart-heatmap img {\n      image-rendering: optimizeSpeed; /* Older versions of FF */\n      image-rendering: -moz-crisp-edges; /* FF 6.0+ */\n      image-rendering: -webkit-optimize-contrast; /* Safari */\n      image-rendering: -o-crisp-edges; /* OS X & Windows Opera (12.02+) */\n      image-rendering: pixelated; /* Awesome future-browsers */\n      -ms-interpolation-mode: nearest-neighbor; /* IE */\n    }\n\n    .superset-legacy-chart-heatmap .legendCells text {\n      font-size: ${e.typography.sizes.xs}px;\n      font-weight: ${e.typography.weights.normal};\n      opacity: 0;\n    }\n\n    .superset-legacy-chart-heatmap .legendCells .cell:first-child text {\n      opacity: 1;\n    }\n\n    .superset-legacy-chart-heatmap .legendCells .cell:last-child text {\n      opacity: 1;\n    }\n\n    .dashboard .superset-legacy-chart-heatmap .axis text {\n      font-size: ${e.typography.sizes.xs}px;\n      opacity: ${e.opacity.heavy};\n    }\n  `}}
`},81896:(t,e,n)=>{var a=n(15078);a.legend=n(54510),t.exports=a},54510:(t,e,n)=>{t.exports={color:n(47e3),size:n(28734),symbol:n(84238)}},47e3:(t,e,n)=>{var a=n(8424);t.exports=function(){var t,e=d3.scale.linear(),n="rect",r=15,l=15,i=10,o=2,s=[5],c=[],d="",u=!1,h="",g=d3.format(".01f"),p=10,f="middle",m="to",x="vertical",y=!1,v=d3.dispatch("cellover","cellout","cellclick");function b(b){var w=a.d3_calcType(e,y,s,c,g,m),_=b.selectAll("g").data([e]);_.enter().append("g").attr("class",d+"legendCells");var $=_.selectAll("."+d+"cell").data(w.data),k=$.enter().append("g",".cell").attr("class",d+"cell").style("opacity",1e-6),z=(k.append(n).attr("class",d+"swatch"),$.select("g."+d+"cell "+n));a.d3_addEvents(k,v),$.exit().transition().style("opacity",0).remove(),a.d3_drawShapes(n,z,l,r,i,t),a.d3_addText(_,k,w.labels,d);var C=$.select("text"),T=z[0].map((function(t){return t.getBBox()}));u?z.attr("class",(function(t){return d+"swatch "+w.feature(t)})):"line"==n?z.style("stroke",w.feature):z.style("fill",w.feature);var B,A,S="start"==f?0:"middle"==f?.5:1;"vertical"===x?(B=function(t,e){return"translate(0, "+e*(T[e].height+o)+")"},A=function(t,e){return"translate("+(T[e].width+T[e].x+p)+","+(T[e].y+T[e].height/2+5)+")"}):"horizontal"===x&&(B=function(t,e){return"translate("+e*(T[e].width+o)+",0)"},A=function(t,e){return"translate("+(T[e].width*S+T[e].x)+","+(T[e].height+T[e].y+p+8)+")"}),a.d3_placement(x,$,B,C,A,f),a.d3_title(b,_,h,d),$.transition().style("opacity",1)}return b.scale=function(t){return arguments.length?(e=t,b):e},b.cells=function(t){return arguments.length?((t.length>1||t>=2)&&(s=t),b):s},b.shape=function(e,a){return arguments.length?(("rect"==e||"circle"==e||"line"==e||"path"==e&&"string"==typeof a)&&(n=e,t=a),b):n},b.shapeWidth=function(t){return arguments.length?(r=+t,b):r},b.shapeHeight=function(t){return arguments.length?(l=+t,b):l},b.shapeRadius=function(t){return arguments.length?(i=+t,b):i},b.shapePadding=function(t){return arguments.length?(o=+t,b):o},b.labels=function(t){return arguments.length?(c=t,b):c},b.labelAlign=function(t){return arguments.length?("start"!=t&&"end"!=t&&"middle"!=t||(f=t),b):f},b.labelFormat=function(t){return arguments.length?(g=t,b):g},b.labelOffset=function(t){return arguments.length?(p=+t,b):p},b.labelDelimiter=function(t){return arguments.length?(m=t,b):m},b.useClass=function(t){return arguments.length?(!0!==t&&!1!==t||(u=t),b):u},b.orient=function(t){return arguments.length?("horizontal"!=(t=t.toLowerCase())&&"vertical"!=t||(x=t),b):x},b.ascending=function(t){return arguments.length?(y=!!t,b):y},b.classPrefix=function(t){return arguments.length?(d=t,b):d},b.title=function(t){return arguments.length?(h=t,b):h},d3.rebind(b,v,"on"),b}},8424:t=>{t.exports={d3_identity:function(t){return t},d3_mergeLabels:function(t,e){if(0===e.length)return t;t=t||[];for(var n=e.length;n<t.length;n++)e.push(t[n]);return e},d3_linearLegend:function(t,e,n){var a=[];if(e.length>1)a=e;else for(var r=t.domain(),l=(r[r.length-1]-r[0])/(e-1),i=0;i<e;i++)a.push(r[0]+i*l);var o=a.map(n);return{data:a,labels:o,feature:function(e){return t(e)}}},d3_quantLegend:function(t,e,n){var a=t.range().map((function(a){var r=t.invertExtent(a);return e(r[0]),e(r[1]),e(r[0])+" "+n+" "+e(r[1])}));return{data:t.range(),labels:a,feature:this.d3_identity}},d3_ordinalLegend:function(t){return{data:t.domain(),labels:t.domain(),feature:function(e){return t(e)}}},d3_drawShapes:function(t,e,n,a,r,l){"rect"===t?e.attr("height",n).attr("width",a):"circle"===t?e.attr("r",r):"line"===t?e.attr("x1",0).attr("x2",a).attr("y1",0).attr("y2",0):"path"===t&&e.attr("d",l)},d3_addText:function(t,e,n,a){e.append("text").attr("class",a+"label"),t.selectAll("g."+a+"cell text."+a+"label").data(n).text(this.d3_identity)},d3_calcType:function(t,e,n,a,r,l){var i=t.ticks?this.d3_linearLegend(t,n,r):t.invertExtent?this.d3_quantLegend(t,r,l):this.d3_ordinalLegend(t);return i.labels=this.d3_mergeLabels(i.labels,a),e&&(i.labels=this.d3_reverse(i.labels),i.data=this.d3_reverse(i.data)),i},d3_reverse:function(t){for(var e=[],n=0,a=t.length;n<a;n++)e[n]=t[a-n-1];return e},d3_placement:function(t,e,n,a,r,l){e.attr("transform",n),a.attr("transform",r),"horizontal"===t&&a.style("text-anchor",l)},d3_addEvents:function(t,e){var n=this;t.on("mouseover.legend",(function(t){n.d3_cellOver(e,t,this)})).on("mouseout.legend",(function(t){n.d3_cellOut(e,t,this)})).on("click.legend",(function(t){n.d3_cellClick(e,t,this)}))},d3_cellOver:function(t,e,n){t.cellover.call(n,e)},d3_cellOut:function(t,e,n){t.cellout.call(n,e)},d3_cellClick:function(t,e,n){t.cellclick.call(n,e)},d3_title:function(t,e,n,a){if(""!==n){t.selectAll("text."+a+"legendTitle").data([n]).enter().append("text").attr("class",a+"legendTitle"),t.selectAll("text."+a+"legendTitle").text(n);var r=t.select("."+a+"legendTitle").map((function(t){return t[0].getBBox().height}))[0],l=-e.map((function(t){return t[0].getBBox().x}))[0];e.attr("transform","translate("+l+","+(r+10)+")")}}}},28734:(t,e,n)=>{var a=n(8424);t.exports=function(){var t,e=d3.scale.linear(),n="rect",r=15,l=2,i=[5],o=[],s="",c="",d=d3.format(".01f"),u=10,h="middle",g="to",p="vertical",f=!1,m=d3.dispatch("cellover","cellout","cellclick");function x(x){var y=a.d3_calcType(e,f,i,o,d,g),v=x.selectAll("g").data([e]);v.enter().append("g").attr("class",s+"legendCells");var b=v.selectAll("."+s+"cell").data(y.data),w=b.enter().append("g",".cell").attr("class",s+"cell").style("opacity",1e-6),_=(w.append(n).attr("class",s+"swatch"),b.select("g."+s+"cell "+n));a.d3_addEvents(w,m),b.exit().transition().style("opacity",0).remove(),"line"===n?(a.d3_drawShapes(n,_,0,r),_.attr("stroke-width",y.feature)):a.d3_drawShapes(n,_,y.feature,y.feature,y.feature,t),a.d3_addText(v,w,y.labels,s);var $,k,z=b.select("text"),C=_[0].map((function(t,a){var r=t.getBBox(),l=e(y.data[a]);return"line"===n&&"horizontal"===p?r.height=r.height+l:"line"===n&&"vertical"===p&&(r.width=r.width),r})),T=d3.max(C,(function(t){return t.height+t.y})),B=d3.max(C,(function(t){return t.width+t.x})),A="start"==h?0:"middle"==h?.5:1;"vertical"===p?($=function(t,e){var n=d3.sum(C.slice(0,e+1),(function(t){return t.height}));return"translate(0, "+(n+e*l)+")"},k=function(t,e){return"translate("+(B+u)+","+(C[e].y+C[e].height/2+5)+")"}):"horizontal"===p&&($=function(t,e){var n=d3.sum(C.slice(0,e+1),(function(t){return t.width}));return"translate("+(n+e*l)+",0)"},k=function(t,e){return"translate("+(C[e].width*A+C[e].x)+","+(T+u)+")"}),a.d3_placement(p,b,$,z,k,h),a.d3_title(x,v,c,s),b.transition().style("opacity",1)}return x.scale=function(t){return arguments.length?(e=t,x):e},x.cells=function(t){return arguments.length?((t.length>1||t>=2)&&(i=t),x):i},x.shape=function(e,a){return arguments.length?("rect"!=e&&"circle"!=e&&"line"!=e||(n=e,t=a),x):n},x.shapeWidth=function(t){return arguments.length?(r=+t,x):r},x.shapePadding=function(t){return arguments.length?(l=+t,x):l},x.labels=function(t){return arguments.length?(o=t,x):o},x.labelAlign=function(t){return arguments.length?("start"!=t&&"end"!=t&&"middle"!=t||(h=t),x):h},x.labelFormat=function(t){return arguments.length?(d=t,x):d},x.labelOffset=function(t){return arguments.length?(u=+t,x):u},x.labelDelimiter=function(t){return arguments.length?(g=t,x):g},x.orient=function(t){return arguments.length?("horizontal"!=(t=t.toLowerCase())&&"vertical"!=t||(p=t),x):p},x.ascending=function(t){return arguments.length?(f=!!t,x):f},x.classPrefix=function(t){return arguments.length?(s=t,x):s},x.title=function(t){return arguments.length?(c=t,x):c},d3.rebind(x,m,"on"),x}},84238:(t,e,n)=>{var a=n(8424);t.exports=function(){var t=d3.scale.linear(),e="path",n=5,r=[5],l=[],i="",o="",s=d3.format(".01f"),c="middle",d=10,u="to",h="vertical",g=!1,p=d3.dispatch("cellover","cellout","cellclick");function f(f){var m=a.d3_calcType(t,g,r,l,s,u),x=f.selectAll("g").data([t]);x.enter().append("g").attr("class",i+"legendCells");var y=x.selectAll("."+i+"cell").data(m.data),v=y.enter().append("g",".cell").attr("class",i+"cell").style("opacity",1e-6),b=(v.append(e).attr("class",i+"swatch"),y.select("g."+i+"cell "+e));a.d3_addEvents(v,p),y.exit().transition().style("opacity",0).remove(),a.d3_drawShapes(e,b,15,15,10,m.feature),a.d3_addText(x,v,m.labels,i);var w,_,$=y.select("text"),k=b[0].map((function(t){return t.getBBox()})),z=d3.max(k,(function(t){return t.height})),C=d3.max(k,(function(t){return t.width})),T="start"==c?0:"middle"==c?.5:1;"vertical"===h?(w=function(t,e){return"translate(0, "+e*(z+n)+")"},_=function(t,e){return"translate("+(C+d)+","+(k[e].y+k[e].height/2+5)+")"}):"horizontal"===h&&(w=function(t,e){return"translate("+e*(C+n)+",0)"},_=function(t,e){return"translate("+(k[e].width*T+k[e].x)+","+(z+d)+")"}),a.d3_placement(h,y,w,$,_,c),a.d3_title(f,x,o,i),y.transition().style("opacity",1)}return f.scale=function(e){return arguments.length?(t=e,f):t},f.cells=function(t){return arguments.length?((t.length>1||t>=2)&&(r=t),f):r},f.shapePadding=function(t){return arguments.length?(n=+t,f):n},f.labels=function(t){return arguments.length?(l=t,f):l},f.labelAlign=function(t){return arguments.length?("start"!=t&&"end"!=t&&"middle"!=t||(c=t),f):c},f.labelFormat=function(t){return arguments.length?(s=t,f):s},f.labelOffset=function(t){return arguments.length?(d=+t,f):d},f.labelDelimiter=function(t){return arguments.length?(u=t,f):u},f.orient=function(t){return arguments.length?("horizontal"!=(t=t.toLowerCase())&&"vertical"!=t||(h=t),f):h},f.ascending=function(t){return arguments.length?(g=!!t,f):g},f.classPrefix=function(t){return arguments.length?(i=t,f):i},f.title=function(t){return arguments.length?(o=t,f):o},d3.rebind(f,p,"on"),f}},43323:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var a=n(67294),r=n(11965);function l(t,e){class n extends a.Component{constructor(t){super(t),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=e&&e.componentWillUnmount&&e.componentWillUnmount.bind(this)()}setContainerRef(t){this.container=t}execute(){this.container&&t(this.container,this.props)}render(){const{id:t,className:e}=this.props;return(0,r.tZ)("div",{ref:this.setContainerRef,id:t,className:e})}}const l=n;return t.displayName&&(l.displayName=t.displayName),t.propTypes&&(l.propTypes={...l.propTypes,...t.propTypes}),t.defaultProps&&(l.defaultProps=t.defaultProps),n}}}]);
//# sourceMappingURL=987dae83a2704344cc3d.chunk.js.map
