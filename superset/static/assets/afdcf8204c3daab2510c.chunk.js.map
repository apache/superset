{"version":3,"file":"afdcf8204c3daab2510c.chunk.js","mappings":"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","sources":["webpack://superset/./packages/superset-ui-core/src/color/index.ts","webpack://superset/./packages/superset-ui-core/src/dimension/computeMaxFontSize.ts","webpack://superset/./packages/superset-ui-core/src/dimension/getTextDimension.ts","webpack://superset/./packages/superset-ui-core/src/dimension/svg/LazyFactory.ts","webpack://superset/./packages/superset-ui-core/src/dimension/svg/constants.ts","webpack://superset/./packages/superset-ui-core/src/dimension/svg/createHiddenSvgNode.ts","webpack://superset/./packages/superset-ui-core/src/dimension/svg/createTextNode.ts","webpack://superset/./packages/superset-ui-core/src/dimension/svg/factories.ts","webpack://superset/./packages/superset-ui-core/src/dimension/svg/getBBoxCeil.ts","webpack://superset/./packages/superset-ui-core/src/dimension/svg/updateTextNode.ts","webpack://superset/./plugins/plugin-chart-echarts/src/BigNumber/BigNumberViz.tsx","webpack://superset/./plugins/plugin-chart-echarts/src/components/Echart.tsx"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport * as CategoricalColorNamespace from './CategoricalColorNamespace';\n\nexport { CategoricalColorNamespace };\nexport { default as CategoricalColorScale } from './CategoricalColorScale';\nexport { default as CategoricalScheme } from './CategoricalScheme';\nexport * from './CategoricalScheme';\nexport { default as getCategoricalSchemeRegistry } from './CategoricalSchemeRegistrySingleton';\nexport { default as ColorScheme } from './ColorScheme';\nexport * from './ColorScheme';\nexport { default as getSequentialSchemeRegistry } from './SequentialSchemeRegistrySingleton';\nexport { default as SequentialScheme } from './SequentialScheme';\nexport * from './SequentialScheme';\nexport { default as ColorSchemeRegistry } from './ColorSchemeRegistry';\nexport * from './colorSchemes';\nexport * from './utils';\nexport {\n  default as getSharedLabelColor,\n  SharedLabelColor,\n  SharedLabelColorSource,\n} from './SharedLabelColorSingleton';\n\nexport const BRAND_COLOR = '#00A699';\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport getTextDimension, { GetTextDimensionInput } from './getTextDimension';\nimport { Dimension } from './types';\n\nfunction decreaseSizeUntil(\n  startSize: number,\n  computeDimension: (size: number) => Dimension,\n  condition: (dimension: Dimension) => boolean,\n): number {\n  let size = startSize;\n  let dimension = computeDimension(size);\n\n  while (!condition(dimension)) {\n    size -= 1;\n\n    // Here if the size goes below zero most likely is because it\n    // has additional style applied in which case we assume the user\n    // knows what it's doing and we just let them use that.\n    // Visually it works, although it could have another\n    // check in place.\n    if (size < 0) {\n      size = startSize;\n      break;\n    }\n\n    dimension = computeDimension(size);\n  }\n\n  return size;\n}\n\nexport default function computeMaxFontSize(\n  input: GetTextDimensionInput & {\n    maxWidth?: number;\n    maxHeight?: number;\n    idealFontSize?: number;\n  },\n) {\n  const { idealFontSize, maxWidth, maxHeight, style, ...rest } = input;\n\n  let size: number;\n  if (idealFontSize !== undefined && idealFontSize !== null) {\n    size = idealFontSize;\n  } else if (maxHeight === undefined || maxHeight === null) {\n    throw new Error(\n      'You must specify at least one of maxHeight or idealFontSize',\n    );\n  } else {\n    size = Math.floor(maxHeight);\n  }\n\n  function computeDimension(fontSize: number) {\n    return getTextDimension({\n      ...rest,\n      style: { ...style, fontSize: `${fontSize}px` },\n    });\n  }\n\n  if (maxWidth !== undefined && maxWidth !== null) {\n    size = decreaseSizeUntil(\n      size,\n      computeDimension,\n      dim => dim.width > 0 && dim.width <= maxWidth,\n    );\n  }\n\n  if (maxHeight !== undefined && maxHeight !== null) {\n    size = decreaseSizeUntil(\n      size,\n      computeDimension,\n      dim => dim.height > 0 && dim.height <= maxHeight,\n    );\n  }\n\n  return size;\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { TextStyle, Dimension } from './types';\nimport updateTextNode from './svg/updateTextNode';\nimport getBBoxCeil from './svg/getBBoxCeil';\nimport { hiddenSvgFactory, textFactory } from './svg/factories';\n\nexport interface GetTextDimensionInput {\n  className?: string;\n  container?: HTMLElement;\n  style?: TextStyle;\n  text: string;\n}\n\nexport default function getTextDimension(\n  input: GetTextDimensionInput,\n  defaultDimension?: Dimension,\n): Dimension {\n  const { text, className, style, container } = input;\n\n  // Empty string\n  if (text.length === 0) {\n    return { height: 0, width: 0 };\n  }\n\n  const svgNode = hiddenSvgFactory.createInContainer(container);\n  const textNode = textFactory.createInContainer(svgNode);\n  updateTextNode(textNode, { className, style, text });\n  const dimension = getBBoxCeil(textNode, defaultDimension);\n\n  // The nodes are added to the DOM briefly only to make getBBox works.\n  // (If not added to DOM getBBox will always return 0x0.)\n  // After that the svg nodes are not needed.\n  // We delay its removal in case there are subsequent calls to this function\n  // that can reuse the svg nodes.\n  // Experiments have shown that reusing existing nodes\n  // instead of deleting and adding new ones can save lot of time.\n  setTimeout(() => {\n    textFactory.removeFromContainer(svgNode);\n    hiddenSvgFactory.removeFromContainer(container);\n  }, 500);\n\n  return dimension;\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nexport default class LazyFactory<T extends HTMLElement | SVGElement> {\n  private activeNodes = new Map<\n    HTMLElement | SVGElement,\n    {\n      counter: number;\n      node: T;\n    }\n  >();\n\n  private factoryFn: () => T;\n\n  constructor(factoryFn: () => T) {\n    this.factoryFn = factoryFn;\n  }\n\n  createInContainer(container: HTMLElement | SVGElement = document.body) {\n    if (this.activeNodes.has(container)) {\n      const entry = this.activeNodes.get(container)!;\n      entry.counter += 1;\n\n      return entry.node;\n    }\n\n    const node = this.factoryFn();\n    container.append(node);\n    this.activeNodes.set(container, { counter: 1, node });\n\n    return node;\n  }\n\n  removeFromContainer(container: HTMLElement | SVGElement = document.body) {\n    if (this.activeNodes.has(container)) {\n      const entry = this.activeNodes.get(container)!;\n      entry.counter -= 1;\n      if (entry.counter === 0) {\n        container.removeChild(entry.node);\n        this.activeNodes.delete(container);\n      }\n    }\n  }\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n// eslint-disable-next-line import/prefer-default-export\nexport const SVG_NS = 'http://www.w3.org/2000/svg';\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { SVG_NS } from './constants';\n\nexport default function createHiddenSvgNode() {\n  const svgNode = document.createElementNS(SVG_NS, 'svg');\n  svgNode.style.position = 'absolute'; // so it won't disrupt page layout\n  svgNode.style.top = '-100%';\n  svgNode.style.left = '-100%';\n  svgNode.style.width = '0'; // no dimensions\n  svgNode.style.height = '0';\n  svgNode.style.opacity = '0'; // not visible\n  svgNode.style.pointerEvents = 'none'; // won't capture mouse events\n\n  return svgNode;\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { SVG_NS } from './constants';\n\nexport default function createTextNode() {\n  return document.createElementNS(SVG_NS, 'text');\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport LazyFactory from './LazyFactory';\nimport createHiddenSvgNode from './createHiddenSvgNode';\nimport createTextNode from './createTextNode';\n\nexport const hiddenSvgFactory = new LazyFactory(createHiddenSvgNode);\nexport const textFactory = new LazyFactory(createTextNode);\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { Dimension } from '../types';\n\nconst DEFAULT_DIMENSION = { height: 20, width: 100 };\n\nexport default function getBBoxCeil(\n  node: SVGGraphicsElement,\n  defaultDimension: Dimension = DEFAULT_DIMENSION,\n) {\n  const { width, height } = node.getBBox ? node.getBBox() : defaultDimension;\n\n  return {\n    height: Math.ceil(height),\n    width: Math.ceil(width),\n  };\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { TextStyle } from '../types';\n\nconst STYLE_FIELDS: (keyof TextStyle)[] = [\n  'font',\n  'fontWeight',\n  'fontStyle',\n  'fontSize',\n  'fontFamily',\n  'letterSpacing',\n];\n\nexport default function updateTextNode(\n  node: SVGTextElement,\n  {\n    className,\n    style = {},\n    text,\n  }: {\n    className?: string;\n    style?: TextStyle;\n    text?: string;\n  } = {},\n) {\n  const textNode = node;\n\n  if (textNode.textContent !== text) {\n    textNode.textContent = typeof text === 'undefined' ? null : text;\n  }\n  if (textNode.getAttribute('class') !== className) {\n    textNode.setAttribute('class', className ?? '');\n  }\n\n  // Clear style\n  // Note: multi-word property names are hyphenated and not camel-cased.\n  textNode.style.removeProperty('font');\n  textNode.style.removeProperty('font-weight');\n  textNode.style.removeProperty('font-style');\n  textNode.style.removeProperty('font-size');\n  textNode.style.removeProperty('font-family');\n  textNode.style.removeProperty('letter-spacing');\n\n  // Apply new style\n  // Note: the font field will auto-populate other font fields when applicable.\n  STYLE_FIELDS.filter(\n    (field: keyof TextStyle) =>\n      typeof style[field] !== 'undefined' && style[field] !== null,\n  ).forEach((field: keyof TextStyle) => {\n    textNode.style[field] = `${style[field]}`;\n  });\n\n  return textNode;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { MouseEvent } from 'react';\nimport {\n  t,\n  getNumberFormatter,\n  smartDateVerboseFormatter,\n  computeMaxFontSize,\n  BRAND_COLOR,\n  styled,\n  BinaryQueryObjectFilterClause,\n} from '@superset-ui/core';\nimport Echart from '../components/Echart';\nimport { BigNumberVizProps } from './types';\nimport { EventHandlers } from '../types';\n\nconst defaultNumberFormatter = getNumberFormatter();\n\nconst PROPORTION = {\n  // text size: proportion of the chart container sans trendline\n  KICKER: 0.1,\n  HEADER: 0.3,\n  SUBHEADER: 0.125,\n  // trendline size: proportion of the whole chart container\n  TRENDLINE: 0.3,\n};\n\nclass BigNumberVis extends React.PureComponent<BigNumberVizProps> {\n  static defaultProps = {\n    className: '',\n    headerFormatter: defaultNumberFormatter,\n    formatTime: smartDateVerboseFormatter,\n    headerFontSize: PROPORTION.HEADER,\n    kickerFontSize: PROPORTION.KICKER,\n    mainColor: BRAND_COLOR,\n    showTimestamp: false,\n    showTrendLine: false,\n    startYAxisAtZero: true,\n    subheader: '',\n    subheaderFontSize: PROPORTION.SUBHEADER,\n    timeRangeFixed: false,\n  };\n\n  getClassName() {\n    const { className, showTrendLine, bigNumberFallback } = this.props;\n    const names = `superset-legacy-chart-big-number ${className} ${\n      bigNumberFallback ? 'is-fallback-value' : ''\n    }`;\n    if (showTrendLine) return names;\n    return `${names} no-trendline`;\n  }\n\n  createTemporaryContainer() {\n    const container = document.createElement('div');\n    container.className = this.getClassName();\n    container.style.position = 'absolute'; // so it won't disrupt page layout\n    container.style.opacity = '0'; // and not visible\n    return container;\n  }\n\n  renderFallbackWarning() {\n    const { bigNumberFallback, formatTime, showTimestamp } = this.props;\n    if (!formatTime || !bigNumberFallback || showTimestamp) return null;\n    return (\n      <span\n        className=\"alert alert-warning\"\n        role=\"alert\"\n        title={t(\n          `Last available value seen on %s`,\n          formatTime(bigNumberFallback[0]),\n        )}\n      >\n        {t('Not up to date')}\n      </span>\n    );\n  }\n\n  renderKicker(maxHeight: number) {\n    const { timestamp, showTimestamp, formatTime, width } = this.props;\n    if (\n      !formatTime ||\n      !showTimestamp ||\n      typeof timestamp === 'string' ||\n      typeof timestamp === 'boolean'\n    )\n      return null;\n\n    const text = timestamp === null ? '' : formatTime(timestamp);\n\n    const container = this.createTemporaryContainer();\n    document.body.append(container);\n    const fontSize = computeMaxFontSize({\n      text,\n      maxWidth: width,\n      maxHeight,\n      className: 'kicker',\n      container,\n    });\n    container.remove();\n\n    return (\n      <div\n        className=\"kicker\"\n        style={{\n          fontSize,\n          height: maxHeight,\n        }}\n      >\n        {text}\n      </div>\n    );\n  }\n\n  renderHeader(maxHeight: number) {\n    const { bigNumber, headerFormatter, width } = this.props;\n    // @ts-ignore\n    const text = bigNumber === null ? t('No data') : headerFormatter(bigNumber);\n\n    const container = this.createTemporaryContainer();\n    document.body.append(container);\n    const fontSize = computeMaxFontSize({\n      text,\n      maxWidth: width - 8, // Decrease 8px for more precise font size\n      maxHeight,\n      className: 'header-line',\n      container,\n    });\n    container.remove();\n\n    const onContextMenu = (e: MouseEvent<HTMLDivElement>) => {\n      if (this.props.onContextMenu) {\n        e.preventDefault();\n        this.props.onContextMenu(e.nativeEvent.clientX, e.nativeEvent.clientY);\n      }\n    };\n\n    return (\n      <div\n        className=\"header-line\"\n        style={{\n          fontSize,\n          height: maxHeight,\n        }}\n        onContextMenu={onContextMenu}\n      >\n        {text}\n      </div>\n    );\n  }\n\n  renderSubheader(maxHeight: number) {\n    const { bigNumber, subheader, width, bigNumberFallback } = this.props;\n    let fontSize = 0;\n\n    const NO_DATA_OR_HASNT_LANDED = t(\n      'No data after filtering or data is NULL for the latest time record',\n    );\n    const NO_DATA = t(\n      'Try applying different filters or ensuring your datasource has data',\n    );\n    let text = subheader;\n    if (bigNumber === null) {\n      text = bigNumberFallback ? NO_DATA : NO_DATA_OR_HASNT_LANDED;\n    }\n    if (text) {\n      const container = this.createTemporaryContainer();\n      document.body.append(container);\n      fontSize = computeMaxFontSize({\n        text,\n        maxWidth: width,\n        maxHeight,\n        className: 'subheader-line',\n        container,\n      });\n      container.remove();\n\n      return (\n        <div\n          className=\"subheader-line\"\n          style={{\n            fontSize,\n            height: maxHeight,\n          }}\n        >\n          {text}\n        </div>\n      );\n    }\n    return null;\n  }\n\n  renderTrendline(maxHeight: number) {\n    const { width, trendLineData, echartOptions, refs } = this.props;\n\n    // if can't find any non-null values, no point rendering the trendline\n    if (!trendLineData?.some(d => d[1] !== null)) {\n      return null;\n    }\n\n    const eventHandlers: EventHandlers = {\n      contextmenu: eventParams => {\n        if (this.props.onContextMenu) {\n          eventParams.event.stop();\n          const { data } = eventParams;\n          if (data) {\n            const pointerEvent = eventParams.event.event;\n            const drillToDetailFilters: BinaryQueryObjectFilterClause[] = [];\n            drillToDetailFilters.push({\n              col: this.props.formData?.granularitySqla,\n              grain: this.props.formData?.timeGrainSqla,\n              op: '==',\n              val: data[0],\n              formattedVal: this.props.xValueFormatter?.(data[0]),\n            });\n            this.props.onContextMenu(\n              pointerEvent.clientX,\n              pointerEvent.clientY,\n              { drillToDetail: drillToDetailFilters },\n            );\n          }\n        }\n      },\n    };\n\n    return (\n      echartOptions && (\n        <Echart\n          refs={refs}\n          width={Math.floor(width)}\n          height={maxHeight}\n          echartOptions={echartOptions}\n          eventHandlers={eventHandlers}\n        />\n      )\n    );\n  }\n\n  render() {\n    const {\n      showTrendLine,\n      height,\n      kickerFontSize,\n      headerFontSize,\n      subheaderFontSize,\n    } = this.props;\n    const className = this.getClassName();\n\n    if (showTrendLine) {\n      const chartHeight = Math.floor(PROPORTION.TRENDLINE * height);\n      const allTextHeight = height - chartHeight;\n\n      return (\n        <div className={className}>\n          <div className=\"text-container\" style={{ height: allTextHeight }}>\n            {this.renderFallbackWarning()}\n            {this.renderKicker(\n              Math.ceil(\n                (kickerFontSize || 0) * (1 - PROPORTION.TRENDLINE) * height,\n              ),\n            )}\n            {this.renderHeader(\n              Math.ceil(headerFontSize * (1 - PROPORTION.TRENDLINE) * height),\n            )}\n            {this.renderSubheader(\n              Math.ceil(\n                subheaderFontSize * (1 - PROPORTION.TRENDLINE) * height,\n              ),\n            )}\n          </div>\n          {this.renderTrendline(chartHeight)}\n        </div>\n      );\n    }\n\n    return (\n      <div className={className} style={{ height }}>\n        {this.renderFallbackWarning()}\n        {this.renderKicker((kickerFontSize || 0) * height)}\n        {this.renderHeader(Math.ceil(headerFontSize * height))}\n        {this.renderSubheader(Math.ceil(subheaderFontSize * height))}\n      </div>\n    );\n  }\n}\n\nexport default styled(BigNumberVis)`\n  ${({ theme }) => `\n    font-family: ${theme.typography.families.sansSerif};\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: flex-start;\n\n    &.no-trendline .subheader-line {\n      padding-bottom: 0.3em;\n    }\n\n    .text-container {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: flex-start;\n      .alert {\n        font-size: ${theme.typography.sizes.s};\n        margin: -0.5em 0 0.4em;\n        line-height: 1;\n        padding: ${theme.gridUnit}px;\n        border-radius: ${theme.gridUnit}px;\n      }\n    }\n\n    .kicker {\n      line-height: 1em;\n      padding-bottom: 2em;\n    }\n\n    .header-line {\n      position: relative;\n      line-height: 1em;\n      span {\n        position: absolute;\n        bottom: 0;\n      }\n    }\n\n    .subheader-line {\n      line-height: 1em;\n      padding-bottom: 0;\n    }\n\n    &.is-fallback-value {\n      .kicker,\n      .header-line,\n      .subheader-line {\n        opacity: ${theme.opacity.mediumHeavy};\n      }\n    }\n  `}\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  useRef,\n  useEffect,\n  useMemo,\n  forwardRef,\n  useImperativeHandle,\n  useLayoutEffect,\n  useCallback,\n} from 'react';\nimport { styled } from '@superset-ui/core';\nimport { ECharts, init } from 'echarts';\nimport { EchartsHandler, EchartsProps, EchartsStylesProps } from '../types';\n\nconst Styles = styled.div<EchartsStylesProps>`\n  height: ${({ height }) => height};\n  width: ${({ width }) => width};\n`;\n\nfunction Echart(\n  {\n    width,\n    height,\n    echartOptions,\n    eventHandlers,\n    zrEventHandlers,\n    selectedValues = {},\n    refs,\n  }: EchartsProps,\n  ref: React.Ref<EchartsHandler>,\n) {\n  const divRef = useRef<HTMLDivElement>(null);\n  if (refs) {\n    // eslint-disable-next-line no-param-reassign\n    refs.divRef = divRef;\n  }\n  const chartRef = useRef<ECharts>();\n  const currentSelection = useMemo(\n    () => Object.keys(selectedValues) || [],\n    [selectedValues],\n  );\n  const previousSelection = useRef<string[]>([]);\n\n  useImperativeHandle(ref, () => ({\n    getEchartInstance: () => chartRef.current,\n  }));\n\n  useEffect(() => {\n    if (!divRef.current) return;\n    if (!chartRef.current) {\n      chartRef.current = init(divRef.current);\n    }\n\n    Object.entries(eventHandlers || {}).forEach(([name, handler]) => {\n      chartRef.current?.off(name);\n      chartRef.current?.on(name, handler);\n    });\n\n    Object.entries(zrEventHandlers || {}).forEach(([name, handler]) => {\n      chartRef.current?.getZr().off(name);\n      chartRef.current?.getZr().on(name, handler);\n    });\n\n    chartRef.current.setOption(echartOptions, true);\n  }, [echartOptions, eventHandlers, zrEventHandlers]);\n\n  // highlighting\n  useEffect(() => {\n    if (!chartRef.current) return;\n    chartRef.current.dispatchAction({\n      type: 'downplay',\n      dataIndex: previousSelection.current.filter(\n        value => !currentSelection.includes(value),\n      ),\n    });\n    if (currentSelection.length) {\n      chartRef.current.dispatchAction({\n        type: 'highlight',\n        dataIndex: currentSelection,\n      });\n    }\n    previousSelection.current = currentSelection;\n  }, [currentSelection]);\n\n  const handleSizeChange = useCallback(\n    ({ width, height }: { width: number; height: number }) => {\n      if (chartRef.current) {\n        chartRef.current.resize({ width, height });\n      }\n    },\n    [],\n  );\n\n  // did mount\n  useEffect(() => {\n    handleSizeChange({ width, height });\n    return () => chartRef.current?.dispose();\n  }, []);\n\n  useLayoutEffect(() => {\n    handleSizeChange({ width, height });\n  }, [width, height, handleSizeChange]);\n\n  return <Styles ref={divRef} height={height} width={width} />;\n}\n\nexport default forwardRef(Echart);\n"],"names":["BRAND_COLOR","decreaseSizeUntil","startSize","computeDimension","condition","size","dimension","computeMaxFontSize","input","idealFontSize","maxWidth","maxHeight","style","rest","Error","Math","floor","fontSize","getTextDimension","dim","width","height","defaultDimension","text","className","container","length","svgNode","hiddenSvgFactory","textNode","textFactory","updateTextNode","getBBoxCeil","setTimeout","LazyFactory","constructor","factoryFn","activeNodes","Map","this","createInContainer","document","body","has","entry","get","counter","node","append","set","removeFromContainer","removeChild","delete","SVG_NS","createHiddenSvgNode","createElementNS","position","top","left","opacity","pointerEvents","createTextNode","DEFAULT_DIMENSION","getBBox","ceil","STYLE_FIELDS","textContent","getAttribute","setAttribute","removeProperty","filter","field","forEach","defaultNumberFormatter","getNumberFormatter","PROPORTION","BigNumberVis","React","getClassName","showTrendLine","bigNumberFallback","props","names","createTemporaryContainer","createElement","renderFallbackWarning","formatTime","showTimestamp","role","title","t","renderKicker","timestamp","remove","renderHeader","bigNumber","headerFormatter","onContextMenu","e","preventDefault","nativeEvent","clientX","clientY","renderSubheader","subheader","NO_DATA_OR_HASNT_LANDED","NO_DATA","renderTrendline","trendLineData","echartOptions","refs","some","d","eventHandlers","contextmenu","eventParams","event","stop","data","pointerEvent","drillToDetailFilters","push","col","formData","granularitySqla","grain","timeGrainSqla","op","val","formattedVal","xValueFormatter","drillToDetail","render","kickerFontSize","headerFontSize","subheaderFontSize","chartHeight","allTextHeight","defaultProps","smartDateVerboseFormatter","mainColor","startYAxisAtZero","timeRangeFixed","styled","theme","typography","families","sansSerif","sizes","s","gridUnit","mediumHeavy","Styles","Echart","ref","zrEventHandlers","selectedValues","divRef","useRef","chartRef","currentSelection","useMemo","Object","keys","previousSelection","useImperativeHandle","getEchartInstance","current","useEffect","init","entries","name","handler","off","on","getZr","setOption","dispatchAction","type","dataIndex","value","handleSizeChange","useCallback","resize","dispose","useLayoutEffect","forwardRef"],"sourceRoot":""}