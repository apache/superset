{"version":3,"file":"4b78570a5638ef07bcaf.chunk.js","mappings":"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","sources":["webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/composite-layer.js","webpack://superset/./plugins/legacy-preset-chart-deckgl/src/components/Legend.jsx"],"sourcesContent":["import Layer from './layer';\nimport debug from '../debug';\nimport { flatten } from '../utils/flatten';\nconst TRACE_RENDER_LAYERS = 'compositeLayer.renderLayers';\nexport default class CompositeLayer extends Layer {\n  get isComposite() {\n    return true;\n  }\n\n  get isLoaded() {\n    return super.isLoaded && this.getSubLayers().every(layer => layer.isLoaded);\n  }\n\n  getSubLayers() {\n    return this.internalState && this.internalState.subLayers || [];\n  }\n\n  initializeState() {}\n\n  setState(updateObject) {\n    super.setState(updateObject);\n    this.setNeedsUpdate();\n  }\n\n  getPickingInfo({\n    info\n  }) {\n    const {\n      object\n    } = info;\n    const isDataWrapped = object && object.__source && object.__source.parent && object.__source.parent.id === this.id;\n\n    if (!isDataWrapped) {\n      return info;\n    }\n\n    info.object = object.__source.object;\n    info.index = object.__source.index;\n    return info;\n  }\n\n  renderLayers() {\n    return null;\n  }\n\n  filterSubLayer(context) {\n    return true;\n  }\n\n  shouldRenderSubLayer(id, data) {\n    const {\n      _subLayerProps: overridingProps\n    } = this.props;\n    return data && data.length || overridingProps && overridingProps[id];\n  }\n\n  getSubLayerClass(id, DefaultLayerClass) {\n    const {\n      _subLayerProps: overridingProps\n    } = this.props;\n    return overridingProps && overridingProps[id] && overridingProps[id].type || DefaultLayerClass;\n  }\n\n  getSubLayerRow(row, sourceObject, sourceObjectIndex) {\n    row.__source = {\n      parent: this,\n      object: sourceObject,\n      index: sourceObjectIndex\n    };\n    return row;\n  }\n\n  getSubLayerAccessor(accessor) {\n    if (typeof accessor === 'function') {\n      const objectInfo = {\n        data: this.props.data,\n        target: []\n      };\n      return (x, i) => {\n        if (x && x.__source) {\n          objectInfo.index = x.__source.index;\n          return accessor(x.__source.object, objectInfo);\n        }\n\n        return accessor(x, i);\n      };\n    }\n\n    return accessor;\n  }\n\n  getSubLayerProps(sublayerProps = {}) {\n    const {\n      opacity,\n      pickable,\n      visible,\n      parameters,\n      getPolygonOffset,\n      highlightedObjectIndex,\n      autoHighlight,\n      highlightColor,\n      coordinateSystem,\n      coordinateOrigin,\n      wrapLongitude,\n      positionFormat,\n      modelMatrix,\n      extensions,\n      fetch,\n      _subLayerProps: overridingProps\n    } = this.props;\n    const newProps = {\n      opacity,\n      pickable,\n      visible,\n      parameters,\n      getPolygonOffset,\n      highlightedObjectIndex,\n      autoHighlight,\n      highlightColor,\n      coordinateSystem,\n      coordinateOrigin,\n      wrapLongitude,\n      positionFormat,\n      modelMatrix,\n      extensions,\n      fetch\n    };\n    const overridingSublayerProps = overridingProps && overridingProps[sublayerProps.id];\n    const overridingSublayerTriggers = overridingSublayerProps && overridingSublayerProps.updateTriggers;\n    const sublayerId = sublayerProps.id || 'sublayer';\n\n    if (overridingSublayerProps) {\n      const propTypes = this.constructor._propTypes;\n      const subLayerPropTypes = sublayerProps.type ? sublayerProps.type._propTypes : {};\n\n      for (const key in overridingSublayerProps) {\n        const propType = subLayerPropTypes[key] || propTypes[key];\n\n        if (propType && propType.type === 'accessor') {\n          overridingSublayerProps[key] = this.getSubLayerAccessor(overridingSublayerProps[key]);\n        }\n      }\n    }\n\n    Object.assign(newProps, sublayerProps, overridingSublayerProps);\n    newProps.id = \"\".concat(this.props.id, \"-\").concat(sublayerId);\n    newProps.updateTriggers = {\n      all: this.props.updateTriggers.all,\n      ...sublayerProps.updateTriggers,\n      ...overridingSublayerTriggers\n    };\n\n    for (const extension of extensions) {\n      const passThroughProps = extension.getSubLayerProps.call(this, extension);\n\n      if (passThroughProps) {\n        Object.assign(newProps, passThroughProps, {\n          updateTriggers: Object.assign(newProps.updateTriggers, passThroughProps.updateTriggers)\n        });\n      }\n    }\n\n    return newProps;\n  }\n\n  _updateAutoHighlight(info) {\n    for (const layer of this.getSubLayers()) {\n      layer.updateAutoHighlight(info);\n    }\n  }\n\n  _getAttributeManager() {\n    return null;\n  }\n\n  _renderLayers() {\n    let {\n      subLayers\n    } = this.internalState;\n    const shouldUpdate = !subLayers || this.needsUpdate();\n\n    if (shouldUpdate) {\n      subLayers = this.renderLayers();\n      subLayers = flatten(subLayers, Boolean);\n      this.internalState.subLayers = subLayers;\n    }\n\n    debug(TRACE_RENDER_LAYERS, this, shouldUpdate, subLayers);\n\n    for (const layer of subLayers) {\n      layer.parent = this;\n    }\n  }\n\n}\nCompositeLayer.layerName = 'CompositeLayer';\n//# sourceMappingURL=composite-layer.js.map","/* eslint-disable react/jsx-sort-default-props */\n/* eslint-disable react/sort-prop-types */\n/* eslint-disable jsx-a11y/anchor-is-valid */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { formatNumber, styled } from '@superset-ui/core';\n\nconst StyledLegend = styled.div`\n  ${({ theme }) => `\n    font-size: ${theme.typography.sizes.s}px;\n    position: absolute;\n    background: ${theme.colors.grayscale.light5};\n    box-shadow: 0 0 ${theme.gridUnit}px ${theme.colors.grayscale.light2};\n    margin: ${theme.gridUnit * 6}px;\n    padding: ${theme.gridUnit * 3}px ${theme.gridUnit * 5}px;\n    outline: none;\n    overflow-y: scroll;\n    max-height: 200px;\n\n    & ul {\n      list-style: none;\n      padding-left: 0;\n      margin: 0;\n\n      & li a {\n        color: ${theme.colors.grayscale.base};\n        text-decoration: none;\n\n        & span {\n          margin-right: ${theme.gridUnit * 3}px;\n        }\n      }\n    }\n  `}\n`;\n\nconst categoryDelimiter = ' - ';\n\nconst propTypes = {\n  categories: PropTypes.object,\n  forceCategorical: PropTypes.bool,\n  format: PropTypes.string,\n  position: PropTypes.oneOf([null, 'tl', 'tr', 'bl', 'br']),\n  showSingleCategory: PropTypes.func,\n  toggleCategory: PropTypes.func,\n};\n\nconst defaultProps = {\n  categories: {},\n  forceCategorical: false,\n  format: null,\n  position: 'tr',\n  showSingleCategory: () => {},\n  toggleCategory: () => {},\n};\n\nexport default class Legend extends React.PureComponent {\n  format(value) {\n    if (!this.props.format || this.props.forceCategorical) {\n      return value;\n    }\n\n    const numValue = parseFloat(value);\n\n    return formatNumber(this.props.format, numValue);\n  }\n\n  formatCategoryLabel(k) {\n    if (!this.props.format) {\n      return k;\n    }\n\n    if (k.includes(categoryDelimiter)) {\n      const values = k.split(categoryDelimiter);\n\n      return (\n        this.format(values[0]) + categoryDelimiter + this.format(values[1])\n      );\n    }\n\n    return this.format(k);\n  }\n\n  render() {\n    if (\n      Object.keys(this.props.categories).length === 0 ||\n      this.props.position === null\n    ) {\n      return null;\n    }\n\n    const categories = Object.entries(this.props.categories).map(([k, v]) => {\n      const style = { color: `rgba(${v.color.join(', ')})` };\n      const icon = v.enabled ? '\\u25FC' : '\\u25FB';\n\n      return (\n        <li key={k}>\n          <a\n            href=\"#\"\n            onClick={() => this.props.toggleCategory(k)}\n            onDoubleClick={() => this.props.showSingleCategory(k)}\n          >\n            <span style={style}>{icon}</span> {this.formatCategoryLabel(k)}\n          </a>\n        </li>\n      );\n    });\n\n    const vertical = this.props.position.charAt(0) === 't' ? 'top' : 'bottom';\n    const horizontal = this.props.position.charAt(1) === 'r' ? 'right' : 'left';\n    const style = {\n      position: 'absolute',\n      [vertical]: '0px',\n      [horizontal]: '10px',\n    };\n\n    return (\n      <StyledLegend style={style}>\n        <ul>{categories}</ul>\n      </StyledLegend>\n    );\n  }\n}\n\nLegend.propTypes = propTypes;\nLegend.defaultProps = defaultProps;\n"],"names":["CompositeLayer","isComposite","isLoaded","super","this","getSubLayers","every","layer","internalState","subLayers","initializeState","setState","updateObject","setNeedsUpdate","getPickingInfo","info","object","__source","parent","id","index","renderLayers","filterSubLayer","context","shouldRenderSubLayer","data","_subLayerProps","overridingProps","props","length","getSubLayerClass","DefaultLayerClass","type","getSubLayerRow","row","sourceObject","sourceObjectIndex","getSubLayerAccessor","accessor","objectInfo","target","x","i","getSubLayerProps","sublayerProps","opacity","pickable","visible","parameters","getPolygonOffset","highlightedObjectIndex","autoHighlight","highlightColor","coordinateSystem","coordinateOrigin","wrapLongitude","positionFormat","modelMatrix","extensions","fetch","newProps","overridingSublayerProps","overridingSublayerTriggers","updateTriggers","sublayerId","propTypes","constructor","_propTypes","subLayerPropTypes","key","propType","Object","assign","concat","all","extension","passThroughProps","call","_updateAutoHighlight","updateAutoHighlight","_getAttributeManager","_renderLayers","shouldUpdate","needsUpdate","Boolean","layerName","StyledLegend","styled","theme","typography","sizes","s","colors","grayscale","light5","gridUnit","light2","base","categoryDelimiter","categories","PropTypes","forceCategorical","format","position","showSingleCategory","toggleCategory","Legend","React","value","numValue","parseFloat","formatNumber","formatCategoryLabel","k","values","split","render","keys","entries","map","v","style","color","join","icon","enabled","href","onClick","onDoubleClick","charAt","defaultProps"],"sourceRoot":""}