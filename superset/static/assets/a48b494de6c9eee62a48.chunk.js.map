{"version":3,"file":"a48b494de6c9eee62a48.chunk.js","mappings":"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","sources":["webpack://superset/./plugins/legacy-plugin-chart-parallel-coordinates/src/vendor/parcoords/d3.parcoords.js","webpack://superset/./plugins/legacy-plugin-chart-parallel-coordinates/src/ParallelCoordinates.js","webpack://superset/./plugins/legacy-plugin-chart-parallel-coordinates/src/vendor/parcoords/divgrid.js","webpack://superset/./plugins/legacy-plugin-chart-parallel-coordinates/src/ReactParallelCoordinates.jsx","webpack://superset/./node_modules/core-js/internals/define-built-in-accessor.js","webpack://superset/./node_modules/core-js/internals/regexp-flags.js","webpack://superset/./node_modules/core-js/modules/es.regexp.flags.js","webpack://superset/./packages/superset-ui-core/src/chart/components/reactify.tsx"],"sourcesContent":["/* [LICENSE TBD] */\n/* eslint-disable */\nexport default function (config) {\n  var __ = {\n    data: [],\n    highlighted: [],\n    dimensions: [],\n    dimensionTitles: {},\n    dimensionTitleRotation: 0,\n    types: {},\n    brushed: false,\n    brushedColor: null,\n    alphaOnBrushed: 0.0,\n    mode: 'default',\n    rate: 20,\n    width: 600,\n    height: 300,\n    margin: { top: 24, right: 0, bottom: 12, left: 0 },\n    nullValueSeparator: 'undefined', // set to \"top\" or \"bottom\"\n    nullValueSeparatorPadding: { top: 8, right: 0, bottom: 8, left: 0 },\n    color: '#069',\n    composite: 'source-over',\n    alpha: 0.7,\n    bundlingStrength: 0.5,\n    bundleDimension: null,\n    smoothness: 0.0,\n    showControlPoints: false,\n    hideAxis: [],\n  };\n\n  extend(__, config);\n\n  var pc = function (selection) {\n    selection = pc.selection = d3.select(selection);\n\n    __.width = selection[0][0].clientWidth;\n    __.height = selection[0][0].clientHeight;\n\n    // canvas data layers\n    ['marks', 'foreground', 'brushed', 'highlight'].forEach(function (layer) {\n      canvas[layer] = selection.append('canvas').attr('class', layer)[0][0];\n      ctx[layer] = canvas[layer].getContext('2d');\n    });\n\n    // svg tick and brush layers\n    pc.svg = selection\n      .append('svg')\n      .attr('width', __.width)\n      .attr('height', __.height)\n      .append('svg:g')\n      .attr(\n        'transform',\n        'translate(' + __.margin.left + ',' + __.margin.top + ')',\n      );\n\n    return pc;\n  };\n  var events = d3.dispatch.apply(\n      this,\n      [\n        'render',\n        'resize',\n        'highlight',\n        'brush',\n        'brushend',\n        'axesreorder',\n      ].concat(d3.keys(__)),\n    ),\n    w = function () {\n      return __.width - __.margin.right - __.margin.left;\n    },\n    h = function () {\n      return __.height - __.margin.top - __.margin.bottom;\n    },\n    flags = {\n      brushable: false,\n      reorderable: false,\n      axes: false,\n      interactive: false,\n      debug: false,\n    },\n    xscale = d3.scale.ordinal(),\n    yscale = {},\n    dragging = {},\n    line = d3.svg.line(),\n    axis = d3.svg.axis().orient('left').ticks(5),\n    g, // groups for axes, brushes\n    ctx = {},\n    canvas = {},\n    clusterCentroids = [];\n\n  // side effects for setters\n  var side_effects = d3.dispatch\n    .apply(this, d3.keys(__))\n    .on('composite', function (d) {\n      ctx.foreground.globalCompositeOperation = d.value;\n      ctx.brushed.globalCompositeOperation = d.value;\n    })\n    .on('alpha', function (d) {\n      ctx.foreground.globalAlpha = d.value;\n      ctx.brushed.globalAlpha = d.value;\n    })\n    .on('brushedColor', function (d) {\n      ctx.brushed.strokeStyle = d.value;\n    })\n    .on('width', function (d) {\n      pc.resize();\n    })\n    .on('height', function (d) {\n      pc.resize();\n    })\n    .on('margin', function (d) {\n      pc.resize();\n    })\n    .on('rate', function (d) {\n      brushedQueue.rate(d.value);\n      foregroundQueue.rate(d.value);\n    })\n    .on('dimensions', function (d) {\n      xscale.domain(__.dimensions);\n      if (flags.interactive) {\n        pc.render().updateAxes();\n      }\n    })\n    .on('bundleDimension', function (d) {\n      if (!__.dimensions.length) pc.detectDimensions();\n      if (!(__.dimensions[0] in yscale)) pc.autoscale();\n      if (typeof d.value === 'number') {\n        if (d.value < __.dimensions.length) {\n          __.bundleDimension = __.dimensions[d.value];\n        } else if (d.value < __.hideAxis.length) {\n          __.bundleDimension = __.hideAxis[d.value];\n        }\n      } else {\n        __.bundleDimension = d.value;\n      }\n\n      __.clusterCentroids = compute_cluster_centroids(__.bundleDimension);\n    })\n    .on('hideAxis', function (d) {\n      if (!__.dimensions.length) pc.detectDimensions();\n      pc.dimensions(without(__.dimensions, d.value));\n    });\n\n  // expose the state of the chart\n  pc.state = __;\n  pc.flags = flags;\n\n  // create getter/setters\n  getset(pc, __, events);\n\n  // expose events\n  d3.rebind(pc, events, 'on');\n\n  // getter/setter with event firing\n  function getset(obj, state, events) {\n    d3.keys(state).forEach(function (key) {\n      obj[key] = function (x) {\n        if (!arguments.length) {\n          return state[key];\n        }\n        var old = state[key];\n        state[key] = x;\n        side_effects[key].call(pc, { value: x, previous: old });\n        events[key].call(pc, { value: x, previous: old });\n        return obj;\n      };\n    });\n  }\n\n  function extend(target, source) {\n    for (var key in source) {\n      target[key] = source[key];\n    }\n    return target;\n  }\n\n  function without(arr, item) {\n    return arr.filter(function (elem) {\n      return item.indexOf(elem) === -1;\n    });\n  }\n  /** adjusts an axis' default range [h()+1, 1] if a NullValueSeparator is set */\n  function getRange() {\n    if (__.nullValueSeparator == 'bottom') {\n      return [\n        h() +\n          1 -\n          __.nullValueSeparatorPadding.bottom -\n          __.nullValueSeparatorPadding.top,\n        1,\n      ];\n    } else if (__.nullValueSeparator == 'top') {\n      return [\n        h() + 1,\n        1 +\n          __.nullValueSeparatorPadding.bottom +\n          __.nullValueSeparatorPadding.top,\n      ];\n    }\n    return [h() + 1, 1];\n  }\n\n  pc.autoscale = function () {\n    // yscale\n    var defaultScales = {\n      date: function (k) {\n        var extent = d3.extent(__.data, function (d) {\n          return d[k] ? d[k].getTime() : null;\n        });\n\n        // special case if single value\n        if (extent[0] === extent[1]) {\n          return d3.scale.ordinal().domain([extent[0]]).rangePoints(getRange());\n        }\n\n        return d3.time.scale().domain(extent).range(getRange());\n      },\n      number: function (k) {\n        var extent = d3.extent(__.data, function (d) {\n          return +d[k];\n        });\n\n        // special case if single value\n        if (extent[0] === extent[1]) {\n          return d3.scale.ordinal().domain([extent[0]]).rangePoints(getRange());\n        }\n\n        return d3.scale.linear().domain(extent).range(getRange());\n      },\n      string: function (k) {\n        var counts = {},\n          domain = [];\n\n        // Let's get the count for each value so that we can sort the domain based\n        // on the number of items for each value.\n        __.data.map(function (p) {\n          if (p[k] === undefined && __.nullValueSeparator !== 'undefined') {\n            return; // null values will be drawn beyond the horizontal null value separator!\n          }\n          if (counts[p[k]] === undefined) {\n            counts[p[k]] = 1;\n          } else {\n            counts[p[k]] = counts[p[k]] + 1;\n          }\n        });\n\n        domain = Object.getOwnPropertyNames(counts).sort(function (a, b) {\n          return counts[a] - counts[b];\n        });\n\n        return d3.scale.ordinal().domain(domain).rangePoints(getRange());\n      },\n    };\n\n    __.dimensions.forEach(function (k) {\n      yscale[k] = defaultScales[__.types[k]](k);\n    });\n\n    __.hideAxis.forEach(function (k) {\n      yscale[k] = defaultScales[__.types[k]](k);\n    });\n\n    // xscale\n    xscale.rangePoints([0, w()], 1);\n\n    // canvas sizes\n    pc.selection\n      .selectAll('canvas')\n      .style('margin-top', __.margin.top + 'px')\n      .style('margin-left', __.margin.left + 'px')\n      .attr('width', w() + 2)\n      .attr('height', h() + 2);\n\n    // default styles, needs to be set when canvas width changes\n    ctx.foreground.strokeStyle = __.color;\n    ctx.foreground.lineWidth = 1.4;\n    ctx.foreground.globalCompositeOperation = __.composite;\n    ctx.foreground.globalAlpha = __.alpha;\n    ctx.brushed.strokeStyle = __.brushedColor;\n    ctx.brushed.lineWidth = 1.4;\n    ctx.brushed.globalCompositeOperation = __.composite;\n    ctx.brushed.globalAlpha = __.alpha;\n    ctx.highlight.lineWidth = 3;\n\n    return this;\n  };\n\n  pc.scale = function (d, domain) {\n    yscale[d].domain(domain);\n\n    return this;\n  };\n\n  pc.flip = function (d) {\n    //yscale[d].domain().reverse();         // does not work\n    yscale[d].domain(yscale[d].domain().reverse()); // works\n\n    return this;\n  };\n\n  pc.commonScale = function (global, type) {\n    var t = type || 'number';\n    if (typeof global === 'undefined') {\n      global = true;\n    }\n\n    // scales of the same type\n    var scales = __.dimensions.concat(__.hideAxis).filter(function (p) {\n      return __.types[p] == t;\n    });\n\n    if (global) {\n      var extent = d3.extent(\n        scales\n          .map(function (p, i) {\n            return yscale[p].domain();\n          })\n          .reduce(function (a, b) {\n            return a.concat(b);\n          }),\n      );\n\n      scales.forEach(function (d) {\n        yscale[d].domain(extent);\n      });\n    } else {\n      scales.forEach(function (k) {\n        yscale[k].domain(\n          d3.extent(__.data, function (d) {\n            return +d[k];\n          }),\n        );\n      });\n    }\n\n    // update centroids\n    if (__.bundleDimension !== null) {\n      pc.bundleDimension(__.bundleDimension);\n    }\n\n    return this;\n  };\n  pc.detectDimensions = function () {\n    pc.types(pc.detectDimensionTypes(__.data));\n    pc.dimensions(d3.keys(pc.types()));\n    return this;\n  };\n\n  // a better \"typeof\" from this post: http://stackoverflow.com/questions/7390426/better-way-to-get-type-of-a-javascript-variable\n  pc.toType = function (v) {\n    return {}.toString\n      .call(v)\n      .match(/\\s([a-zA-Z]+)/)[1]\n      .toLowerCase();\n  };\n\n  // try to coerce to number before returning type\n  pc.toTypeCoerceNumbers = function (v) {\n    if (parseFloat(v) == v && v != null) {\n      return 'number';\n    }\n    return pc.toType(v);\n  };\n\n  // attempt to determine types of each dimension based on first row of data\n  pc.detectDimensionTypes = function (data) {\n    var types = {};\n    d3.keys(data[0]).forEach(function (col) {\n      types[col] = pc.toTypeCoerceNumbers(data[0][col]);\n    });\n    return types;\n  };\n  pc.render = function () {\n    // try to autodetect dimensions and create scales\n    if (!__.dimensions.length) pc.detectDimensions();\n    if (!(__.dimensions[0] in yscale)) pc.autoscale();\n\n    pc.render[__.mode]();\n\n    events.render.call(this);\n    return this;\n  };\n\n  pc.renderBrushed = function () {\n    if (!__.dimensions.length) pc.detectDimensions();\n    if (!(__.dimensions[0] in yscale)) pc.autoscale();\n\n    pc.renderBrushed[__.mode]();\n\n    events.render.call(this);\n    return this;\n  };\n\n  function isBrushed() {\n    if (__.brushed && __.brushed.length !== __.data.length) return true;\n\n    var object = brush.currentMode().brushState();\n\n    for (var key in object) {\n      if (object.hasOwnProperty(key)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  pc.render.default = function () {\n    pc.clear('foreground');\n    pc.clear('highlight');\n\n    pc.renderBrushed.default();\n\n    __.data.forEach(path_foreground);\n  };\n\n  var foregroundQueue = d3\n    .renderQueue(path_foreground)\n    .rate(50)\n    .clear(function () {\n      pc.clear('foreground');\n      pc.clear('highlight');\n    });\n\n  pc.render.queue = function () {\n    pc.renderBrushed.queue();\n\n    foregroundQueue(__.data);\n  };\n\n  pc.renderBrushed.default = function () {\n    pc.clear('brushed');\n\n    if (isBrushed()) {\n      __.brushed.forEach(path_brushed);\n    }\n  };\n\n  var brushedQueue = d3\n    .renderQueue(path_brushed)\n    .rate(50)\n    .clear(function () {\n      pc.clear('brushed');\n    });\n\n  pc.renderBrushed.queue = function () {\n    if (isBrushed()) {\n      brushedQueue(__.brushed);\n    } else {\n      brushedQueue([]); // This is needed to clear the currently brushed items\n    }\n  };\n  function compute_cluster_centroids(d) {\n    var clusterCentroids = d3.map();\n    var clusterCounts = d3.map();\n    // determine clusterCounts\n    __.data.forEach(function (row) {\n      var scaled = yscale[d](row[d]);\n      if (!clusterCounts.has(scaled)) {\n        clusterCounts.set(scaled, 0);\n      }\n      var count = clusterCounts.get(scaled);\n      clusterCounts.set(scaled, count + 1);\n    });\n\n    __.data.forEach(function (row) {\n      __.dimensions.map(function (p, i) {\n        var scaled = yscale[d](row[d]);\n        if (!clusterCentroids.has(scaled)) {\n          var map = d3.map();\n          clusterCentroids.set(scaled, map);\n        }\n        if (!clusterCentroids.get(scaled).has(p)) {\n          clusterCentroids.get(scaled).set(p, 0);\n        }\n        var value = clusterCentroids.get(scaled).get(p);\n        value += yscale[p](row[p]) / clusterCounts.get(scaled);\n        clusterCentroids.get(scaled).set(p, value);\n      });\n    });\n\n    return clusterCentroids;\n  }\n\n  function compute_centroids(row) {\n    var centroids = [];\n\n    var p = __.dimensions;\n    var cols = p.length;\n    var a = 0.5; // center between axes\n    for (var i = 0; i < cols; ++i) {\n      // centroids on 'real' axes\n      var x = position(p[i]);\n      var y = yscale[p[i]](row[p[i]]);\n      centroids.push($V([x, y]));\n\n      // centroids on 'virtual' axes\n      if (i < cols - 1) {\n        var cx = x + a * (position(p[i + 1]) - x);\n        var cy = y + a * (yscale[p[i + 1]](row[p[i + 1]]) - y);\n        if (__.bundleDimension !== null) {\n          var leftCentroid = __.clusterCentroids\n            .get(yscale[__.bundleDimension](row[__.bundleDimension]))\n            .get(p[i]);\n          var rightCentroid = __.clusterCentroids\n            .get(yscale[__.bundleDimension](row[__.bundleDimension]))\n            .get(p[i + 1]);\n          var centroid = 0.5 * (leftCentroid + rightCentroid);\n          cy = centroid + (1 - __.bundlingStrength) * (cy - centroid);\n        }\n        centroids.push($V([cx, cy]));\n      }\n    }\n\n    return centroids;\n  }\n\n  function compute_control_points(centroids) {\n    var cols = centroids.length;\n    var a = __.smoothness;\n    var cps = [];\n\n    cps.push(centroids[0]);\n    cps.push(\n      $V([\n        centroids[0].e(1) + a * 2 * (centroids[1].e(1) - centroids[0].e(1)),\n        centroids[0].e(2),\n      ]),\n    );\n    for (var col = 1; col < cols - 1; ++col) {\n      var mid = centroids[col];\n      var left = centroids[col - 1];\n      var right = centroids[col + 1];\n\n      var diff = left.subtract(right);\n      cps.push(mid.add(diff.x(a)));\n      cps.push(mid);\n      cps.push(mid.subtract(diff.x(a)));\n    }\n    cps.push(\n      $V([\n        centroids[cols - 1].e(1) +\n          a * 2 * (centroids[cols - 2].e(1) - centroids[cols - 1].e(1)),\n        centroids[cols - 1].e(2),\n      ]),\n    );\n    cps.push(centroids[cols - 1]);\n\n    return cps;\n  }\n\n  pc.shadows = function () {\n    flags.shadows = true;\n    pc.alphaOnBrushed(0.1);\n    pc.render();\n    return this;\n  };\n\n  // draw dots with radius r on the axis line where data intersects\n  pc.axisDots = function (r) {\n    var r = r || 0.1;\n    var ctx = pc.ctx.marks;\n    var startAngle = 0;\n    var endAngle = 2 * Math.PI;\n    ctx.globalAlpha = d3.min([1 / Math.pow(__.data.length, 1 / 2), 1]);\n    __.data.forEach(function (d) {\n      __.dimensions.map(function (p, i) {\n        ctx.beginPath();\n        ctx.arc(position(p), yscale[p](d[p]), r, startAngle, endAngle);\n        ctx.stroke();\n        ctx.fill();\n      });\n    });\n    return this;\n  };\n\n  // draw single cubic bezier curve\n  function single_curve(d, ctx) {\n    var centroids = compute_centroids(d);\n    var cps = compute_control_points(centroids);\n\n    ctx.moveTo(cps[0].e(1), cps[0].e(2));\n    for (var i = 1; i < cps.length; i += 3) {\n      if (__.showControlPoints) {\n        for (var j = 0; j < 3; j += 1) {\n          ctx.fillRect(cps[i + j].e(1), cps[i + j].e(2), 2, 2);\n        }\n      }\n      ctx.bezierCurveTo(\n        cps[i].e(1),\n        cps[i].e(2),\n        cps[i + 1].e(1),\n        cps[i + 1].e(2),\n        cps[i + 2].e(1),\n        cps[i + 2].e(2),\n      );\n    }\n  }\n\n  // draw single polyline\n  function color_path(d, ctx) {\n    ctx.beginPath();\n    if (\n      (__.bundleDimension !== null && __.bundlingStrength > 0) ||\n      __.smoothness > 0\n    ) {\n      single_curve(d, ctx);\n    } else {\n      single_path(d, ctx);\n    }\n    ctx.stroke();\n  }\n\n  // draw many polylines of the same color\n  function paths(data, ctx) {\n    ctx.clearRect(-1, -1, w() + 2, h() + 2);\n    ctx.beginPath();\n    data.forEach(function (d) {\n      if (\n        (__.bundleDimension !== null && __.bundlingStrength > 0) ||\n        __.smoothness > 0\n      ) {\n        single_curve(d, ctx);\n      } else {\n        single_path(d, ctx);\n      }\n    });\n    ctx.stroke();\n  }\n\n  // returns the y-position just beyond the separating null value line\n  function getNullPosition() {\n    if (__.nullValueSeparator == 'bottom') {\n      return h() + 1;\n    } else if (__.nullValueSeparator == 'top') {\n      return 1;\n    } else {\n      console.log(\n        \"A value is NULL, but nullValueSeparator is not set; set it to 'bottom' or 'top'.\",\n      );\n    }\n    return h() + 1;\n  }\n\n  function single_path(d, ctx) {\n    __.dimensions.map(function (p, i) {\n      if (i == 0) {\n        ctx.moveTo(\n          position(p),\n          typeof d[p] == 'undefined' ? getNullPosition() : yscale[p](d[p]),\n        );\n      } else {\n        ctx.lineTo(\n          position(p),\n          typeof d[p] == 'undefined' ? getNullPosition() : yscale[p](d[p]),\n        );\n      }\n    });\n  }\n\n  function path_brushed(d, i) {\n    if (__.brushedColor !== null) {\n      ctx.brushed.strokeStyle = d3.functor(__.brushedColor)(d, i);\n    } else {\n      ctx.brushed.strokeStyle = d3.functor(__.color)(d, i);\n    }\n    return color_path(d, ctx.brushed);\n  }\n\n  function path_foreground(d, i) {\n    ctx.foreground.strokeStyle = d3.functor(__.color)(d, i);\n    return color_path(d, ctx.foreground);\n  }\n\n  function path_highlight(d, i) {\n    ctx.highlight.strokeStyle = d3.functor(__.color)(d, i);\n    return color_path(d, ctx.highlight);\n  }\n  pc.clear = function (layer) {\n    ctx[layer].clearRect(0, 0, w() + 2, h() + 2);\n\n    // This will make sure that the foreground items are transparent\n    // without the need for changing the opacity style of the foreground canvas\n    // as this would stop the css styling from working\n    if (layer === 'brushed' && isBrushed()) {\n      ctx.brushed.fillStyle = pc.selection.style('background-color');\n      ctx.brushed.globalAlpha = 1 - __.alphaOnBrushed;\n      ctx.brushed.fillRect(0, 0, w() + 2, h() + 2);\n      ctx.brushed.globalAlpha = __.alpha;\n    }\n    return this;\n  };\n\n  d3.rebind(\n    pc,\n    axis,\n    'ticks',\n    'orient',\n    'tickValues',\n    'tickSubdivide',\n    'tickSize',\n    'tickPadding',\n    'tickFormat',\n  );\n\n  function flipAxisAndUpdatePCP(dimension) {\n    var g = pc.svg.selectAll('.dimension');\n\n    pc.flip(dimension);\n\n    d3.select(this.parentElement)\n      .transition()\n      .duration(1100)\n      .call(axis.scale(yscale[dimension]));\n\n    pc.render();\n  }\n\n  function rotateLabels() {\n    var delta = d3.event.deltaY;\n    delta = delta < 0 ? -5 : delta;\n    delta = delta > 0 ? 5 : delta;\n\n    __.dimensionTitleRotation += delta;\n    pc.svg\n      .selectAll('text.label')\n      .attr(\n        'transform',\n        'translate(0,-5) rotate(' + __.dimensionTitleRotation + ')',\n      );\n    d3.event.preventDefault();\n  }\n\n  function dimensionLabels(d) {\n    return d in __.dimensionTitles ? __.dimensionTitles[d] : d; // dimension display names\n  }\n\n  pc.createAxes = function () {\n    if (g) pc.removeAxes();\n\n    // Add a group element for each dimension.\n    g = pc.svg\n      .selectAll('.dimension')\n      .data(__.dimensions, function (d) {\n        return d;\n      })\n      .enter()\n      .append('svg:g')\n      .attr('class', 'dimension')\n      .attr('transform', function (d) {\n        return 'translate(' + xscale(d) + ')';\n      });\n\n    // Add an axis and title.\n    g.append('svg:g')\n      .attr('class', 'axis')\n      .attr('transform', 'translate(0,0)')\n      .each(function (d) {\n        d3.select(this).call(axis.scale(yscale[d]));\n      })\n      .append('svg:text')\n      .attr({\n        'text-anchor': 'middle',\n        y: 0,\n        transform: 'translate(0,-5) rotate(' + __.dimensionTitleRotation + ')',\n        x: 0,\n        class: 'label',\n      })\n      .text(dimensionLabels)\n      .on('dblclick', flipAxisAndUpdatePCP)\n      .on('wheel', rotateLabels);\n\n    if (__.nullValueSeparator == 'top') {\n      pc.svg\n        .append('line')\n        .attr('x1', 0)\n        .attr('y1', 1 + __.nullValueSeparatorPadding.top)\n        .attr('x2', w())\n        .attr('y2', 1 + __.nullValueSeparatorPadding.top)\n        .attr('stroke-width', 1)\n        .attr('stroke', '#777')\n        .attr('fill', 'none')\n        .attr('shape-rendering', 'crispEdges');\n    } else if (__.nullValueSeparator == 'bottom') {\n      pc.svg\n        .append('line')\n        .attr('x1', 0)\n        .attr('y1', h() + 1 - __.nullValueSeparatorPadding.bottom)\n        .attr('x2', w())\n        .attr('y2', h() + 1 - __.nullValueSeparatorPadding.bottom)\n        .attr('stroke-width', 1)\n        .attr('stroke', '#777')\n        .attr('fill', 'none')\n        .attr('shape-rendering', 'crispEdges');\n    }\n\n    flags.axes = true;\n    return this;\n  };\n\n  pc.removeAxes = function () {\n    g.remove();\n    return this;\n  };\n\n  pc.updateAxes = function () {\n    var g_data = pc.svg.selectAll('.dimension').data(__.dimensions);\n\n    // Enter\n    g_data\n      .enter()\n      .append('svg:g')\n      .attr('class', 'dimension')\n      .attr('transform', function (p) {\n        return 'translate(' + position(p) + ')';\n      })\n      .style('opacity', 0)\n      .append('svg:g')\n      .attr('class', 'axis')\n      .attr('transform', 'translate(0,0)')\n      .each(function (d) {\n        d3.select(this).call(axis.scale(yscale[d]));\n      })\n      .append('svg:text')\n      .attr({\n        'text-anchor': 'middle',\n        y: 0,\n        transform: 'translate(0,-5) rotate(' + __.dimensionTitleRotation + ')',\n        x: 0,\n        class: 'label',\n      })\n      .text(dimensionLabels)\n      .on('dblclick', flipAxisAndUpdatePCP)\n      .on('wheel', rotateLabels);\n\n    // Update\n    g_data.attr('opacity', 0);\n    g_data\n      .select('.axis')\n      .transition()\n      .duration(1100)\n      .each(function (d) {\n        d3.select(this).call(axis.scale(yscale[d]));\n      });\n    g_data\n      .select('.label')\n      .transition()\n      .duration(1100)\n      .text(dimensionLabels)\n      .attr(\n        'transform',\n        'translate(0,-5) rotate(' + __.dimensionTitleRotation + ')',\n      );\n\n    // Exit\n    g_data.exit().remove();\n\n    g = pc.svg.selectAll('.dimension');\n    g.transition()\n      .duration(1100)\n      .attr('transform', function (p) {\n        return 'translate(' + position(p) + ')';\n      })\n      .style('opacity', 1);\n\n    pc.svg\n      .selectAll('.axis')\n      .transition()\n      .duration(1100)\n      .each(function (d) {\n        d3.select(this).call(axis.scale(yscale[d]));\n      });\n\n    if (flags.brushable) pc.brushable();\n    if (flags.reorderable) pc.reorderable();\n    if (pc.brushMode() !== 'None') {\n      var mode = pc.brushMode();\n      pc.brushMode('None');\n      pc.brushMode(mode);\n    }\n    return this;\n  };\n\n  // Jason Davies, http://bl.ocks.org/1341281\n  pc.reorderable = function () {\n    if (!g) pc.createAxes();\n\n    g.style('cursor', 'move').call(\n      d3.behavior\n        .drag()\n        .on('dragstart', function (d) {\n          dragging[d] = this.__origin__ = xscale(d);\n        })\n        .on('drag', function (d) {\n          dragging[d] = Math.min(\n            w(),\n            Math.max(0, (this.__origin__ += d3.event.dx)),\n          );\n          __.dimensions.sort(function (a, b) {\n            return position(a) - position(b);\n          });\n          xscale.domain(__.dimensions);\n          pc.render();\n          g.attr('transform', function (d) {\n            return 'translate(' + position(d) + ')';\n          });\n        })\n        .on('dragend', function (d) {\n          // Let's see if the order has changed and send out an event if so.\n          var i = 0,\n            j = __.dimensions.indexOf(d),\n            elem = this,\n            parent = this.parentElement;\n\n          while ((elem = elem.previousElementSibling) != null) ++i;\n          if (i !== j) {\n            events.axesreorder.call(pc, __.dimensions);\n            // We now also want to reorder the actual dom elements that represent\n            // the axes. That is, the g.dimension elements. If we don't do this,\n            // we get a weird and confusing transition when updateAxes is called.\n            // This is due to the fact that, initially the nth g.dimension element\n            // represents the nth axis. However, after a manual reordering,\n            // without reordering the dom elements, the nth dom elements no longer\n            // necessarily represents the nth axis.\n            //\n            // i is the original index of the dom element\n            // j is the new index of the dom element\n            if (i > j) {\n              // Element moved left\n              parent.insertBefore(this, parent.children[j - 1]);\n            } else {\n              // Element moved right\n              if (j + 1 < parent.children.length) {\n                parent.insertBefore(this, parent.children[j + 1]);\n              } else {\n                parent.appendChild(this);\n              }\n            }\n          }\n\n          delete this.__origin__;\n          delete dragging[d];\n          d3.select(this)\n            .transition()\n            .attr('transform', 'translate(' + xscale(d) + ')');\n          pc.render();\n        }),\n    );\n    flags.reorderable = true;\n    return this;\n  };\n\n  // Reorder dimensions, such that the highest value (visually) is on the left and\n  // the lowest on the right. Visual values are determined by the data values in\n  // the given row.\n  pc.reorder = function (rowdata) {\n    var dims = __.dimensions.slice(0);\n    __.dimensions.sort(function (a, b) {\n      var pixelDifference = yscale[a](rowdata[a]) - yscale[b](rowdata[b]);\n\n      // Array.sort is not necessarily stable, this means that if pixelDifference is zero\n      // the ordering of dimensions might change unexpectedly. This is solved by sorting on\n      // variable name in that case.\n      if (pixelDifference === 0) {\n        return a.localeCompare(b);\n      } // else\n      return pixelDifference;\n    });\n\n    // NOTE: this is relatively cheap given that:\n    // number of dimensions < number of data items\n    // Thus we check equality of order to prevent rerendering when this is the case.\n    var reordered = false;\n    dims.some(function (val, index) {\n      reordered = val !== __.dimensions[index];\n      return reordered;\n    });\n\n    if (reordered) {\n      xscale.domain(__.dimensions);\n      var highlighted = __.highlighted.slice(0);\n      pc.unhighlight();\n\n      g.transition()\n        .duration(1500)\n        .attr('transform', function (d) {\n          return 'translate(' + xscale(d) + ')';\n        });\n      pc.render();\n\n      // pc.highlight() does not check whether highlighted is length zero, so we do that here.\n      if (highlighted.length !== 0) {\n        pc.highlight(highlighted);\n      }\n    }\n  };\n\n  // pairs of adjacent dimensions\n  pc.adjacent_pairs = function (arr) {\n    var ret = [];\n    for (var i = 0; i < arr.length - 1; i += 1) {\n      ret.push([arr[i], arr[i + 1]]);\n    }\n    return ret;\n  };\n\n  var brush = {\n    modes: {\n      None: {\n        install: function (pc) {}, // Nothing to be done.\n        uninstall: function (pc) {}, // Nothing to be done.\n        selected: function () {\n          return [];\n        }, // Nothing to return\n        brushState: function () {\n          return {};\n        },\n      },\n    },\n    mode: 'None',\n    predicate: 'AND',\n    currentMode: function () {\n      return this.modes[this.mode];\n    },\n  };\n\n  // This function can be used for 'live' updates of brushes. That is, during the\n  // specification of a brush, this method can be called to update the view.\n  //\n  // @param newSelection - The new set of data items that is currently contained\n  //                       by the brushes\n  function brushUpdated(newSelection) {\n    __.brushed = newSelection;\n    events.brush.call(pc, __.brushed);\n    pc.renderBrushed();\n  }\n\n  function brushPredicate(predicate) {\n    if (!arguments.length) {\n      return brush.predicate;\n    }\n\n    predicate = String(predicate).toUpperCase();\n    if (predicate !== 'AND' && predicate !== 'OR') {\n      throw 'Invalid predicate ' + predicate;\n    }\n\n    brush.predicate = predicate;\n    __.brushed = brush.currentMode().selected();\n    pc.renderBrushed();\n    return pc;\n  }\n\n  pc.brushModes = function () {\n    return Object.getOwnPropertyNames(brush.modes);\n  };\n\n  pc.brushMode = function (mode) {\n    if (arguments.length === 0) {\n      return brush.mode;\n    }\n\n    if (pc.brushModes().indexOf(mode) === -1) {\n      throw 'pc.brushmode: Unsupported brush mode: ' + mode;\n    }\n\n    // Make sure that we don't trigger unnecessary events by checking if the mode\n    // actually changes.\n    if (mode !== brush.mode) {\n      // When changing brush modes, the first thing we need to do is clearing any\n      // brushes from the current mode, if any.\n      if (brush.mode !== 'None') {\n        pc.brushReset();\n      }\n\n      // Next, we need to 'uninstall' the current brushMode.\n      brush.modes[brush.mode].uninstall(pc);\n      // Finally, we can install the requested one.\n      brush.mode = mode;\n      brush.modes[brush.mode].install();\n      if (mode === 'None') {\n        delete pc.brushPredicate;\n      } else {\n        pc.brushPredicate = brushPredicate;\n      }\n    }\n\n    return pc;\n  };\n\n  // brush mode: 1D-Axes\n\n  (function () {\n    var brushes = {};\n\n    function is_brushed(p) {\n      return !brushes[p].empty();\n    }\n\n    // data within extents\n    function selected() {\n      var actives = __.dimensions.filter(is_brushed),\n        extents = actives.map(function (p) {\n          return brushes[p].extent();\n        });\n\n      // We don't want to return the full data set when there are no axes brushed.\n      // Actually, when there are no axes brushed, by definition, no items are\n      // selected. So, let's avoid the filtering and just return false.\n      //if (actives.length === 0) return false;\n\n      // Resolves broken examples for now. They expect to get the full dataset back from empty brushes\n      if (actives.length === 0) return __.data;\n\n      // test if within range\n      var within = {\n        date: function (d, p, dimension) {\n          if (typeof yscale[p].rangePoints === 'function') {\n            // if it is ordinal\n            return (\n              extents[dimension][0] <= yscale[p](d[p]) &&\n              yscale[p](d[p]) <= extents[dimension][1]\n            );\n          } else {\n            return (\n              extents[dimension][0] <= d[p] && d[p] <= extents[dimension][1]\n            );\n          }\n        },\n        number: function (d, p, dimension) {\n          if (typeof yscale[p].rangePoints === 'function') {\n            // if it is ordinal\n            return (\n              extents[dimension][0] <= yscale[p](d[p]) &&\n              yscale[p](d[p]) <= extents[dimension][1]\n            );\n          } else {\n            return (\n              extents[dimension][0] <= d[p] && d[p] <= extents[dimension][1]\n            );\n          }\n        },\n        string: function (d, p, dimension) {\n          return (\n            extents[dimension][0] <= yscale[p](d[p]) &&\n            yscale[p](d[p]) <= extents[dimension][1]\n          );\n        },\n      };\n\n      return __.data.filter(function (d) {\n        switch (brush.predicate) {\n          case 'AND':\n            return actives.every(function (p, dimension) {\n              return within[__.types[p]](d, p, dimension);\n            });\n          case 'OR':\n            return actives.some(function (p, dimension) {\n              return within[__.types[p]](d, p, dimension);\n            });\n          default:\n            throw 'Unknown brush predicate ' + __.brushPredicate;\n        }\n      });\n    }\n\n    function brushExtents(extents) {\n      if (typeof extents === 'undefined') {\n        var extents = {};\n        __.dimensions.forEach(function (d) {\n          var brush = brushes[d];\n          if (brush !== undefined && !brush.empty()) {\n            var extent = brush.extent();\n            extent.sort(d3.ascending);\n            extents[d] = extent;\n          }\n        });\n        return extents;\n      } else {\n        //first get all the brush selections\n        var brushSelections = {};\n        g.selectAll('.brush').each(function (d) {\n          brushSelections[d] = d3.select(this);\n        });\n\n        // loop over each dimension and update appropriately (if it was passed in through extents)\n        __.dimensions.forEach(function (d) {\n          if (extents[d] === undefined) {\n            return;\n          }\n\n          var brush = brushes[d];\n          if (brush !== undefined) {\n            //update the extent\n            brush.extent(extents[d]);\n\n            //redraw the brush\n            brush(brushSelections[d]);\n\n            //fire some events\n            brush.event(brushSelections[d]);\n          }\n        });\n\n        //redraw the chart\n        pc.renderBrushed();\n      }\n    }\n    function brushFor(axis) {\n      var brush = d3.svg.brush();\n\n      brush\n        .y(yscale[axis])\n        .on('brushstart', function () {\n          if (d3.event.sourceEvent !== null) {\n            d3.event.sourceEvent.stopPropagation();\n          }\n        })\n        .on('brush', function () {\n          brushUpdated(selected());\n        })\n        .on('brushend', function () {\n          events.brushend.call(pc, __.brushed);\n        });\n\n      brushes[axis] = brush;\n      return brush;\n    }\n    function brushReset(dimension) {\n      __.brushed = false;\n      if (g) {\n        g.selectAll('.brush').each(function (d) {\n          d3.select(this).call(brushes[d].clear());\n        });\n        pc.renderBrushed();\n      }\n      return this;\n    }\n\n    function install() {\n      if (!g) pc.createAxes();\n\n      // Add and store a brush for each axis.\n      g.append('svg:g')\n        .attr('class', 'brush')\n        .each(function (d) {\n          d3.select(this).call(brushFor(d));\n        })\n        .selectAll('rect')\n        .style('visibility', null)\n        .attr('x', -15)\n        .attr('width', 30);\n\n      pc.brushExtents = brushExtents;\n      pc.brushReset = brushReset;\n      return pc;\n    }\n\n    brush.modes['1D-axes'] = {\n      install: install,\n      uninstall: function () {\n        g.selectAll('.brush').remove();\n        brushes = {};\n        delete pc.brushExtents;\n        delete pc.brushReset;\n      },\n      selected: selected,\n      brushState: brushExtents,\n    };\n  })();\n  // brush mode: 2D-strums\n  // bl.ocks.org/syntagmatic/5441022\n\n  (function () {\n    var strums = {},\n      strumRect;\n\n    function drawStrum(strum, activePoint) {\n      var svg = pc.selection.select('svg').select('g#strums'),\n        id = strum.dims.i,\n        points = [strum.p1, strum.p2],\n        line = svg.selectAll('line#strum-' + id).data([strum]),\n        circles = svg.selectAll('circle#strum-' + id).data(points),\n        drag = d3.behavior.drag();\n\n      line\n        .enter()\n        .append('line')\n        .attr('id', 'strum-' + id)\n        .attr('class', 'strum');\n\n      line\n        .attr('x1', function (d) {\n          return d.p1[0];\n        })\n        .attr('y1', function (d) {\n          return d.p1[1];\n        })\n        .attr('x2', function (d) {\n          return d.p2[0];\n        })\n        .attr('y2', function (d) {\n          return d.p2[1];\n        })\n        .attr('stroke', 'black')\n        .attr('stroke-width', 2);\n\n      drag\n        .on('drag', function (d, i) {\n          var ev = d3.event;\n          i = i + 1;\n          strum['p' + i][0] = Math.min(\n            Math.max(strum.minX + 1, ev.x),\n            strum.maxX,\n          );\n          strum['p' + i][1] = Math.min(Math.max(strum.minY, ev.y), strum.maxY);\n          drawStrum(strum, i - 1);\n        })\n        .on('dragend', onDragEnd());\n\n      circles\n        .enter()\n        .append('circle')\n        .attr('id', 'strum-' + id)\n        .attr('class', 'strum');\n\n      circles\n        .attr('cx', function (d) {\n          return d[0];\n        })\n        .attr('cy', function (d) {\n          return d[1];\n        })\n        .attr('r', 5)\n        .style('opacity', function (d, i) {\n          return activePoint !== undefined && i === activePoint ? 0.8 : 0;\n        })\n        .on('mouseover', function () {\n          d3.select(this).style('opacity', 0.8);\n        })\n        .on('mouseout', function () {\n          d3.select(this).style('opacity', 0);\n        })\n        .call(drag);\n    }\n\n    function dimensionsForPoint(p) {\n      var dims = { i: -1, left: undefined, right: undefined };\n      __.dimensions.some(function (dim, i) {\n        if (xscale(dim) < p[0]) {\n          var next = __.dimensions[i + 1];\n          dims.i = i;\n          dims.left = dim;\n          dims.right = next;\n          return false;\n        }\n        return true;\n      });\n\n      if (dims.left === undefined) {\n        // Event on the left side of the first axis.\n        dims.i = 0;\n        dims.left = __.dimensions[0];\n        dims.right = __.dimensions[1];\n      } else if (dims.right === undefined) {\n        // Event on the right side of the last axis\n        dims.i = __.dimensions.length - 1;\n        dims.right = dims.left;\n        dims.left = __.dimensions[__.dimensions.length - 2];\n      }\n\n      return dims;\n    }\n\n    function onDragStart() {\n      // First we need to determine between which two axes the sturm was started.\n      // This will determine the freedom of movement, because a strum can\n      // logically only happen between two axes, so no movement outside these axes\n      // should be allowed.\n      return function () {\n        var p = d3.mouse(strumRect[0][0]),\n          dims,\n          strum;\n\n        p[0] = p[0] - __.margin.left;\n        p[1] = p[1] - __.margin.top;\n\n        (dims = dimensionsForPoint(p)),\n          (strum = {\n            p1: p,\n            dims: dims,\n            minX: xscale(dims.left),\n            maxX: xscale(dims.right),\n            minY: 0,\n            maxY: h(),\n          });\n\n        strums[dims.i] = strum;\n        strums.active = dims.i;\n\n        // Make sure that the point is within the bounds\n        strum.p1[0] = Math.min(Math.max(strum.minX, p[0]), strum.maxX);\n        strum.p2 = strum.p1.slice();\n      };\n    }\n\n    function onDrag() {\n      return function () {\n        var ev = d3.event,\n          strum = strums[strums.active];\n\n        // Make sure that the point is within the bounds\n        strum.p2[0] = Math.min(\n          Math.max(strum.minX + 1, ev.x - __.margin.left),\n          strum.maxX,\n        );\n        strum.p2[1] = Math.min(\n          Math.max(strum.minY, ev.y - __.margin.top),\n          strum.maxY,\n        );\n        drawStrum(strum, 1);\n      };\n    }\n\n    function containmentTest(strum, width) {\n      var p1 = [strum.p1[0] - strum.minX, strum.p1[1] - strum.minX],\n        p2 = [strum.p2[0] - strum.minX, strum.p2[1] - strum.minX],\n        m1 = 1 - width / p1[0],\n        b1 = p1[1] * (1 - m1),\n        m2 = 1 - width / p2[0],\n        b2 = p2[1] * (1 - m2);\n\n      // test if point falls between lines\n      return function (p) {\n        var x = p[0],\n          y = p[1],\n          y1 = m1 * x + b1,\n          y2 = m2 * x + b2;\n\n        if (y > Math.min(y1, y2) && y < Math.max(y1, y2)) {\n          return true;\n        }\n\n        return false;\n      };\n    }\n\n    function selected() {\n      var ids = Object.getOwnPropertyNames(strums),\n        brushed = __.data;\n\n      // Get the ids of the currently active strums.\n      ids = ids.filter(function (d) {\n        return !isNaN(d);\n      });\n\n      function crossesStrum(d, id) {\n        var strum = strums[id],\n          test = containmentTest(strum, strums.width(id)),\n          d1 = strum.dims.left,\n          d2 = strum.dims.right,\n          y1 = yscale[d1],\n          y2 = yscale[d2],\n          point = [y1(d[d1]) - strum.minX, y2(d[d2]) - strum.minX];\n        return test(point);\n      }\n\n      if (ids.length === 0) {\n        return brushed;\n      }\n\n      return brushed.filter(function (d) {\n        switch (brush.predicate) {\n          case 'AND':\n            return ids.every(function (id) {\n              return crossesStrum(d, id);\n            });\n          case 'OR':\n            return ids.some(function (id) {\n              return crossesStrum(d, id);\n            });\n          default:\n            throw 'Unknown brush predicate ' + __.brushPredicate;\n        }\n      });\n    }\n\n    function removeStrum() {\n      var strum = strums[strums.active],\n        svg = pc.selection.select('svg').select('g#strums');\n\n      delete strums[strums.active];\n      strums.active = undefined;\n      svg.selectAll('line#strum-' + strum.dims.i).remove();\n      svg.selectAll('circle#strum-' + strum.dims.i).remove();\n    }\n\n    function onDragEnd() {\n      return function () {\n        var brushed = __.data,\n          strum = strums[strums.active];\n\n        // Okay, somewhat unexpected, but not totally unsurprising, a mousclick is\n        // considered a drag without move. So we have to deal with that case\n        if (\n          strum &&\n          strum.p1[0] === strum.p2[0] &&\n          strum.p1[1] === strum.p2[1]\n        ) {\n          removeStrum(strums);\n        }\n\n        brushed = selected(strums);\n        strums.active = undefined;\n        __.brushed = brushed;\n        pc.renderBrushed();\n        events.brushend.call(pc, __.brushed);\n      };\n    }\n\n    function brushReset(strums) {\n      return function () {\n        var ids = Object.getOwnPropertyNames(strums).filter(function (d) {\n          return !isNaN(d);\n        });\n\n        ids.forEach(function (d) {\n          strums.active = d;\n          removeStrum(strums);\n        });\n        onDragEnd(strums)();\n      };\n    }\n\n    function install() {\n      var drag = d3.behavior.drag();\n\n      // Map of current strums. Strums are stored per segment of the PC. A segment,\n      // being the area between two axes. The left most area is indexed at 0.\n      strums.active = undefined;\n      // Returns the width of the PC segment where currently a strum is being\n      // placed. NOTE: even though they are evenly spaced in our current\n      // implementation, we keep for when non-even spaced segments are supported as\n      // well.\n      strums.width = function (id) {\n        var strum = strums[id];\n\n        if (strum === undefined) {\n          return undefined;\n        }\n\n        return strum.maxX - strum.minX;\n      };\n\n      pc.on('axesreorder.strums', function () {\n        var ids = Object.getOwnPropertyNames(strums).filter(function (d) {\n          return !isNaN(d);\n        });\n\n        // Checks if the first dimension is directly left of the second dimension.\n        function consecutive(first, second) {\n          var length = __.dimensions.length;\n          return __.dimensions.some(function (d, i) {\n            return d === first\n              ? i + i < length && __.dimensions[i + 1] === second\n              : false;\n          });\n        }\n\n        if (ids.length > 0) {\n          // We have some strums, which might need to be removed.\n          ids.forEach(function (d) {\n            var dims = strums[d].dims;\n            strums.active = d;\n            // If the two dimensions of the current strum are not next to each other\n            // any more, than we'll need to remove the strum. Otherwise we keep it.\n            if (!consecutive(dims.left, dims.right)) {\n              removeStrum(strums);\n            }\n          });\n          onDragEnd(strums)();\n        }\n      });\n\n      // Add a new svg group in which we draw the strums.\n      pc.selection\n        .select('svg')\n        .append('g')\n        .attr('id', 'strums')\n        .attr(\n          'transform',\n          'translate(' + __.margin.left + ',' + __.margin.top + ')',\n        );\n\n      // Install the required brushReset function\n      pc.brushReset = brushReset(strums);\n\n      drag\n        .on('dragstart', onDragStart(strums))\n        .on('drag', onDrag(strums))\n        .on('dragend', onDragEnd(strums));\n\n      // NOTE: The styling needs to be done here and not in the css. This is because\n      //       for 1D brushing, the canvas layers should not listen to\n      //       pointer-events.\n      strumRect = pc.selection\n        .select('svg')\n        .insert('rect', 'g#strums')\n        .attr('id', 'strum-events')\n        .attr('x', __.margin.left)\n        .attr('y', __.margin.top)\n        .attr('width', w())\n        .attr('height', h() + 2)\n        .style('opacity', 0)\n        .call(drag);\n    }\n\n    brush.modes['2D-strums'] = {\n      install: install,\n      uninstall: function () {\n        pc.selection.select('svg').select('g#strums').remove();\n        pc.selection.select('svg').select('rect#strum-events').remove();\n        pc.on('axesreorder.strums', undefined);\n        delete pc.brushReset;\n\n        strumRect = undefined;\n      },\n      selected: selected,\n      brushState: function () {\n        return strums;\n      },\n    };\n  })();\n\n  // brush mode: 1D-Axes with multiple extents\n  // requires d3.svg.multibrush\n\n  (function () {\n    if (typeof d3.svg.multibrush !== 'function') {\n      return;\n    }\n    var brushes = {};\n\n    function is_brushed(p) {\n      return !brushes[p].empty();\n    }\n\n    // data within extents\n    function selected() {\n      var actives = __.dimensions.filter(is_brushed),\n        extents = actives.map(function (p) {\n          return brushes[p].extent();\n        });\n\n      // We don't want to return the full data set when there are no axes brushed.\n      // Actually, when there are no axes brushed, by definition, no items are\n      // selected. So, let's avoid the filtering and just return false.\n      //if (actives.length === 0) return false;\n\n      // Resolves broken examples for now. They expect to get the full dataset back from empty brushes\n      if (actives.length === 0) return __.data;\n\n      // test if within range\n      var within = {\n        date: function (d, p, dimension, b) {\n          if (typeof yscale[p].rangePoints === 'function') {\n            // if it is ordinal\n            return b[0] <= yscale[p](d[p]) && yscale[p](d[p]) <= b[1];\n          } else {\n            return b[0] <= d[p] && d[p] <= b[1];\n          }\n        },\n        number: function (d, p, dimension, b) {\n          if (typeof yscale[p].rangePoints === 'function') {\n            // if it is ordinal\n            return b[0] <= yscale[p](d[p]) && yscale[p](d[p]) <= b[1];\n          } else {\n            return b[0] <= d[p] && d[p] <= b[1];\n          }\n        },\n        string: function (d, p, dimension, b) {\n          return b[0] <= yscale[p](d[p]) && yscale[p](d[p]) <= b[1];\n        },\n      };\n\n      return __.data.filter(function (d) {\n        switch (brush.predicate) {\n          case 'AND':\n            return actives.every(function (p, dimension) {\n              return extents[dimension].some(function (b) {\n                return within[__.types[p]](d, p, dimension, b);\n              });\n            });\n          case 'OR':\n            return actives.some(function (p, dimension) {\n              return extents[dimension].some(function (b) {\n                return within[__.types[p]](d, p, dimension, b);\n              });\n            });\n          default:\n            throw 'Unknown brush predicate ' + __.brushPredicate;\n        }\n      });\n    }\n\n    function brushExtents() {\n      var extents = {};\n      __.dimensions.forEach(function (d) {\n        var brush = brushes[d];\n        if (brush !== undefined && !brush.empty()) {\n          var extent = brush.extent();\n          extents[d] = extent;\n        }\n      });\n      return extents;\n    }\n\n    function brushFor(axis) {\n      var brush = d3.svg.multibrush();\n\n      brush\n        .y(yscale[axis])\n        .on('brushstart', function () {\n          if (d3.event.sourceEvent !== null) {\n            d3.event.sourceEvent.stopPropagation();\n          }\n        })\n        .on('brush', function () {\n          brushUpdated(selected());\n        })\n        .on('brushend', function () {\n          // d3.svg.multibrush clears extents just before calling 'brushend'\n          // so we have to update here again.\n          // This fixes issue #103 for now, but should be changed in d3.svg.multibrush\n          // to avoid unnecessary computation.\n          brushUpdated(selected());\n          events.brushend.call(pc, __.brushed);\n        })\n        .extentAdaption(function (selection) {\n          selection.style('visibility', null).attr('x', -15).attr('width', 30);\n        })\n        .resizeAdaption(function (selection) {\n          selection.selectAll('rect').attr('x', -15).attr('width', 30);\n        });\n\n      brushes[axis] = brush;\n      return brush;\n    }\n\n    function brushReset(dimension) {\n      __.brushed = false;\n      if (g) {\n        g.selectAll('.brush').each(function (d) {\n          d3.select(this).call(brushes[d].clear());\n        });\n        pc.renderBrushed();\n      }\n      return this;\n    }\n\n    function install() {\n      if (!g) pc.createAxes();\n\n      // Add and store a brush for each axis.\n      g.append('svg:g')\n        .attr('class', 'brush')\n        .each(function (d) {\n          d3.select(this).call(brushFor(d));\n        })\n        .selectAll('rect')\n        .style('visibility', null)\n        .attr('x', -15)\n        .attr('width', 30);\n\n      pc.brushExtents = brushExtents;\n      pc.brushReset = brushReset;\n      return pc;\n    }\n\n    brush.modes['1D-axes-multi'] = {\n      install: install,\n      uninstall: function () {\n        g.selectAll('.brush').remove();\n        brushes = {};\n        delete pc.brushExtents;\n        delete pc.brushReset;\n      },\n      selected: selected,\n      brushState: brushExtents,\n    };\n  })();\n  // brush mode: angular\n  // code based on 2D.strums.js\n\n  (function () {\n    var arcs = {},\n      strumRect;\n\n    function drawStrum(arc, activePoint) {\n      var svg = pc.selection.select('svg').select('g#arcs'),\n        id = arc.dims.i,\n        points = [arc.p2, arc.p3],\n        line = svg.selectAll('line#arc-' + id).data([\n          { p1: arc.p1, p2: arc.p2 },\n          { p1: arc.p1, p2: arc.p3 },\n        ]),\n        circles = svg.selectAll('circle#arc-' + id).data(points),\n        drag = d3.behavior.drag(),\n        path = svg.selectAll('path#arc-' + id).data([arc]);\n\n      path\n        .enter()\n        .append('path')\n        .attr('id', 'arc-' + id)\n        .attr('class', 'arc')\n        .style('fill', 'orange')\n        .style('opacity', 0.5);\n\n      path\n        .attr('d', arc.arc)\n        .attr('transform', 'translate(' + arc.p1[0] + ',' + arc.p1[1] + ')');\n\n      line\n        .enter()\n        .append('line')\n        .attr('id', 'arc-' + id)\n        .attr('class', 'arc');\n\n      line\n        .attr('x1', function (d) {\n          return d.p1[0];\n        })\n        .attr('y1', function (d) {\n          return d.p1[1];\n        })\n        .attr('x2', function (d) {\n          return d.p2[0];\n        })\n        .attr('y2', function (d) {\n          return d.p2[1];\n        })\n        .attr('stroke', 'black')\n        .attr('stroke-width', 2);\n\n      drag\n        .on('drag', function (d, i) {\n          var ev = d3.event,\n            angle = 0;\n\n          i = i + 2;\n\n          arc['p' + i][0] = Math.min(Math.max(arc.minX + 1, ev.x), arc.maxX);\n          arc['p' + i][1] = Math.min(Math.max(arc.minY, ev.y), arc.maxY);\n\n          angle = i === 3 ? arcs.startAngle(id) : arcs.endAngle(id);\n\n          if (\n            (arc.startAngle < Math.PI &&\n              arc.endAngle < Math.PI &&\n              angle < Math.PI) ||\n            (arc.startAngle >= Math.PI &&\n              arc.endAngle >= Math.PI &&\n              angle >= Math.PI)\n          ) {\n            if (i === 2) {\n              arc.endAngle = angle;\n              arc.arc.endAngle(angle);\n            } else if (i === 3) {\n              arc.startAngle = angle;\n              arc.arc.startAngle(angle);\n            }\n          }\n\n          drawStrum(arc, i - 2);\n        })\n        .on('dragend', onDragEnd());\n\n      circles\n        .enter()\n        .append('circle')\n        .attr('id', 'arc-' + id)\n        .attr('class', 'arc');\n\n      circles\n        .attr('cx', function (d) {\n          return d[0];\n        })\n        .attr('cy', function (d) {\n          return d[1];\n        })\n        .attr('r', 5)\n        .style('opacity', function (d, i) {\n          return activePoint !== undefined && i === activePoint ? 0.8 : 0;\n        })\n        .on('mouseover', function () {\n          d3.select(this).style('opacity', 0.8);\n        })\n        .on('mouseout', function () {\n          d3.select(this).style('opacity', 0);\n        })\n        .call(drag);\n    }\n\n    function dimensionsForPoint(p) {\n      var dims = { i: -1, left: undefined, right: undefined };\n      __.dimensions.some(function (dim, i) {\n        if (xscale(dim) < p[0]) {\n          var next = __.dimensions[i + 1];\n          dims.i = i;\n          dims.left = dim;\n          dims.right = next;\n          return false;\n        }\n        return true;\n      });\n\n      if (dims.left === undefined) {\n        // Event on the left side of the first axis.\n        dims.i = 0;\n        dims.left = __.dimensions[0];\n        dims.right = __.dimensions[1];\n      } else if (dims.right === undefined) {\n        // Event on the right side of the last axis\n        dims.i = __.dimensions.length - 1;\n        dims.right = dims.left;\n        dims.left = __.dimensions[__.dimensions.length - 2];\n      }\n\n      return dims;\n    }\n\n    function onDragStart() {\n      // First we need to determine between which two axes the arc was started.\n      // This will determine the freedom of movement, because a arc can\n      // logically only happen between two axes, so no movement outside these axes\n      // should be allowed.\n      return function () {\n        var p = d3.mouse(strumRect[0][0]),\n          dims,\n          arc;\n\n        p[0] = p[0] - __.margin.left;\n        p[1] = p[1] - __.margin.top;\n\n        (dims = dimensionsForPoint(p)),\n          (arc = {\n            p1: p,\n            dims: dims,\n            minX: xscale(dims.left),\n            maxX: xscale(dims.right),\n            minY: 0,\n            maxY: h(),\n            startAngle: undefined,\n            endAngle: undefined,\n            arc: d3.svg.arc().innerRadius(0),\n          });\n\n        arcs[dims.i] = arc;\n        arcs.active = dims.i;\n\n        // Make sure that the point is within the bounds\n        arc.p1[0] = Math.min(Math.max(arc.minX, p[0]), arc.maxX);\n        arc.p2 = arc.p1.slice();\n        arc.p3 = arc.p1.slice();\n      };\n    }\n\n    function onDrag() {\n      return function () {\n        var ev = d3.event,\n          arc = arcs[arcs.active];\n\n        // Make sure that the point is within the bounds\n        arc.p2[0] = Math.min(\n          Math.max(arc.minX + 1, ev.x - __.margin.left),\n          arc.maxX,\n        );\n        arc.p2[1] = Math.min(\n          Math.max(arc.minY, ev.y - __.margin.top),\n          arc.maxY,\n        );\n        arc.p3 = arc.p2.slice();\n        drawStrum(arc, 1);\n      };\n    }\n\n    // some helper functions\n    function hypothenuse(a, b) {\n      return Math.sqrt(a * a + b * b);\n    }\n\n    var rad = (function () {\n      var c = Math.PI / 180;\n      return function (angle) {\n        return angle * c;\n      };\n    })();\n\n    var deg = (function () {\n      var c = 180 / Math.PI;\n      return function (angle) {\n        return angle * c;\n      };\n    })();\n\n    // [0, 2*PI] -> [-PI/2, PI/2]\n    var signedAngle = function (angle) {\n      var ret = angle;\n      if (angle > Math.PI) {\n        ret = angle - 1.5 * Math.PI;\n        ret = angle - 1.5 * Math.PI;\n      } else {\n        ret = angle - 0.5 * Math.PI;\n        ret = angle - 0.5 * Math.PI;\n      }\n      return -ret;\n    };\n\n    /**\n     * angles are stored in radians from in [0, 2*PI], where 0 in 12 o'clock.\n     * However, one can only select lines from 0 to PI, so we compute the\n     * 'signed' angle, where 0 is the horizontal line (3 o'clock), and +/- PI/2\n     * are 12 and 6 o'clock respectively.\n     */\n    function containmentTest(arc) {\n      var startAngle = signedAngle(arc.startAngle);\n      var endAngle = signedAngle(arc.endAngle);\n\n      if (startAngle > endAngle) {\n        var tmp = startAngle;\n        startAngle = endAngle;\n        endAngle = tmp;\n      }\n\n      // test if segment angle is contained in angle interval\n      return function (a) {\n        if (a >= startAngle && a <= endAngle) {\n          return true;\n        }\n\n        return false;\n      };\n    }\n\n    function selected() {\n      var ids = Object.getOwnPropertyNames(arcs),\n        brushed = __.data;\n\n      // Get the ids of the currently active arcs.\n      ids = ids.filter(function (d) {\n        return !isNaN(d);\n      });\n\n      function crossesStrum(d, id) {\n        var arc = arcs[id],\n          test = containmentTest(arc),\n          d1 = arc.dims.left,\n          d2 = arc.dims.right,\n          y1 = yscale[d1],\n          y2 = yscale[d2],\n          a = arcs.width(id),\n          b = y1(d[d1]) - y2(d[d2]),\n          c = hypothenuse(a, b),\n          angle = Math.asin(b / c); // rad in [-PI/2, PI/2]\n        return test(angle);\n      }\n\n      if (ids.length === 0) {\n        return brushed;\n      }\n\n      return brushed.filter(function (d) {\n        switch (brush.predicate) {\n          case 'AND':\n            return ids.every(function (id) {\n              return crossesStrum(d, id);\n            });\n          case 'OR':\n            return ids.some(function (id) {\n              return crossesStrum(d, id);\n            });\n          default:\n            throw 'Unknown brush predicate ' + __.brushPredicate;\n        }\n      });\n    }\n\n    function removeStrum() {\n      var arc = arcs[arcs.active],\n        svg = pc.selection.select('svg').select('g#arcs');\n\n      delete arcs[arcs.active];\n      arcs.active = undefined;\n      svg.selectAll('line#arc-' + arc.dims.i).remove();\n      svg.selectAll('circle#arc-' + arc.dims.i).remove();\n      svg.selectAll('path#arc-' + arc.dims.i).remove();\n    }\n\n    function onDragEnd() {\n      return function () {\n        var brushed = __.data,\n          arc = arcs[arcs.active];\n\n        // Okay, somewhat unexpected, but not totally unsurprising, a mousclick is\n        // considered a drag without move. So we have to deal with that case\n        if (arc && arc.p1[0] === arc.p2[0] && arc.p1[1] === arc.p2[1]) {\n          removeStrum(arcs);\n        }\n\n        if (arc) {\n          var angle = arcs.startAngle(arcs.active);\n\n          arc.startAngle = angle;\n          arc.endAngle = angle;\n          arc.arc\n            .outerRadius(arcs.length(arcs.active))\n            .startAngle(angle)\n            .endAngle(angle);\n        }\n\n        brushed = selected(arcs);\n        arcs.active = undefined;\n        __.brushed = brushed;\n        pc.renderBrushed();\n        events.brushend.call(pc, __.brushed);\n      };\n    }\n\n    function brushReset(arcs) {\n      return function () {\n        var ids = Object.getOwnPropertyNames(arcs).filter(function (d) {\n          return !isNaN(d);\n        });\n\n        ids.forEach(function (d) {\n          arcs.active = d;\n          removeStrum(arcs);\n        });\n        onDragEnd(arcs)();\n      };\n    }\n\n    function install() {\n      var drag = d3.behavior.drag();\n\n      // Map of current arcs. arcs are stored per segment of the PC. A segment,\n      // being the area between two axes. The left most area is indexed at 0.\n      arcs.active = undefined;\n      // Returns the width of the PC segment where currently a arc is being\n      // placed. NOTE: even though they are evenly spaced in our current\n      // implementation, we keep for when non-even spaced segments are supported as\n      // well.\n      arcs.width = function (id) {\n        var arc = arcs[id];\n\n        if (arc === undefined) {\n          return undefined;\n        }\n\n        return arc.maxX - arc.minX;\n      };\n\n      // returns angles in [-PI/2, PI/2]\n      angle = function (p1, p2) {\n        var a = p1[0] - p2[0],\n          b = p1[1] - p2[1],\n          c = hypothenuse(a, b);\n\n        return Math.asin(b / c);\n      };\n\n      // returns angles in [0, 2 * PI]\n      arcs.endAngle = function (id) {\n        var arc = arcs[id];\n        if (arc === undefined) {\n          return undefined;\n        }\n        var sAngle = angle(arc.p1, arc.p2),\n          uAngle = -sAngle + Math.PI / 2;\n\n        if (arc.p1[0] > arc.p2[0]) {\n          uAngle = 2 * Math.PI - uAngle;\n        }\n\n        return uAngle;\n      };\n\n      arcs.startAngle = function (id) {\n        var arc = arcs[id];\n        if (arc === undefined) {\n          return undefined;\n        }\n\n        var sAngle = angle(arc.p1, arc.p3),\n          uAngle = -sAngle + Math.PI / 2;\n\n        if (arc.p1[0] > arc.p3[0]) {\n          uAngle = 2 * Math.PI - uAngle;\n        }\n\n        return uAngle;\n      };\n\n      arcs.length = function (id) {\n        var arc = arcs[id];\n\n        if (arc === undefined) {\n          return undefined;\n        }\n\n        var a = arc.p1[0] - arc.p2[0],\n          b = arc.p1[1] - arc.p2[1],\n          c = hypothenuse(a, b);\n\n        return c;\n      };\n\n      pc.on('axesreorder.arcs', function () {\n        var ids = Object.getOwnPropertyNames(arcs).filter(function (d) {\n          return !isNaN(d);\n        });\n\n        // Checks if the first dimension is directly left of the second dimension.\n        function consecutive(first, second) {\n          var length = __.dimensions.length;\n          return __.dimensions.some(function (d, i) {\n            return d === first\n              ? i + i < length && __.dimensions[i + 1] === second\n              : false;\n          });\n        }\n\n        if (ids.length > 0) {\n          // We have some arcs, which might need to be removed.\n          ids.forEach(function (d) {\n            var dims = arcs[d].dims;\n            arcs.active = d;\n            // If the two dimensions of the current arc are not next to each other\n            // any more, than we'll need to remove the arc. Otherwise we keep it.\n            if (!consecutive(dims.left, dims.right)) {\n              removeStrum(arcs);\n            }\n          });\n          onDragEnd(arcs)();\n        }\n      });\n\n      // Add a new svg group in which we draw the arcs.\n      pc.selection\n        .select('svg')\n        .append('g')\n        .attr('id', 'arcs')\n        .attr(\n          'transform',\n          'translate(' + __.margin.left + ',' + __.margin.top + ')',\n        );\n\n      // Install the required brushReset function\n      pc.brushReset = brushReset(arcs);\n\n      drag\n        .on('dragstart', onDragStart(arcs))\n        .on('drag', onDrag(arcs))\n        .on('dragend', onDragEnd(arcs));\n\n      // NOTE: The styling needs to be done here and not in the css. This is because\n      //       for 1D brushing, the canvas layers should not listen to\n      //       pointer-events.\n      strumRect = pc.selection\n        .select('svg')\n        .insert('rect', 'g#arcs')\n        .attr('id', 'arc-events')\n        .attr('x', __.margin.left)\n        .attr('y', __.margin.top)\n        .attr('width', w())\n        .attr('height', h() + 2)\n        .style('opacity', 0)\n        .call(drag);\n    }\n\n    brush.modes['angular'] = {\n      install: install,\n      uninstall: function () {\n        pc.selection.select('svg').select('g#arcs').remove();\n        pc.selection.select('svg').select('rect#arc-events').remove();\n        pc.on('axesreorder.arcs', undefined);\n        delete pc.brushReset;\n\n        strumRect = undefined;\n      },\n      selected: selected,\n      brushState: function () {\n        return arcs;\n      },\n    };\n  })();\n\n  pc.interactive = function () {\n    flags.interactive = true;\n    return this;\n  };\n\n  // expose a few objects\n  pc.xscale = xscale;\n  pc.yscale = yscale;\n  pc.ctx = ctx;\n  pc.canvas = canvas;\n  pc.g = function () {\n    return g;\n  };\n\n  // rescale for height, width and margins\n  // TODO currently assumes chart is brushable, and destroys old brushes\n  pc.resize = function () {\n    // selection size\n    pc.selection\n      .select('svg')\n      .attr('width', __.width)\n      .attr('height', __.height);\n    pc.svg.attr(\n      'transform',\n      'translate(' + __.margin.left + ',' + __.margin.top + ')',\n    );\n\n    // FIXME: the current brush state should pass through\n    if (flags.brushable) pc.brushReset();\n\n    // scales\n    pc.autoscale();\n\n    // axes, destroys old brushes.\n    if (g) pc.createAxes();\n    if (flags.brushable) pc.brushable();\n    if (flags.reorderable) pc.reorderable();\n\n    events.resize.call(this, {\n      width: __.width,\n      height: __.height,\n      margin: __.margin,\n    });\n    return this;\n  };\n\n  // highlight an array of data\n  pc.highlight = function (data) {\n    if (arguments.length === 0) {\n      return __.highlighted;\n    }\n\n    __.highlighted = data;\n    pc.clear('highlight');\n    d3.selectAll([canvas.foreground, canvas.brushed]).classed('faded', true);\n    data.forEach(path_highlight);\n    events.highlight.call(this, data);\n    return this;\n  };\n\n  // clear highlighting\n  pc.unhighlight = function () {\n    __.highlighted = [];\n    pc.clear('highlight');\n    d3.selectAll([canvas.foreground, canvas.brushed]).classed('faded', false);\n    return this;\n  };\n\n  // calculate 2d intersection of line a->b with line c->d\n  // points are objects with x and y properties\n  pc.intersection = function (a, b, c, d) {\n    return {\n      x:\n        ((a.x * b.y - a.y * b.x) * (c.x - d.x) -\n          (a.x - b.x) * (c.x * d.y - c.y * d.x)) /\n        ((a.x - b.x) * (c.y - d.y) - (a.y - b.y) * (c.x - d.x)),\n      y:\n        ((a.x * b.y - a.y * b.x) * (c.y - d.y) -\n          (a.y - b.y) * (c.x * d.y - c.y * d.x)) /\n        ((a.x - b.x) * (c.y - d.y) - (a.y - b.y) * (c.x - d.x)),\n    };\n  };\n\n  function position(d) {\n    var v = dragging[d];\n    return v == null ? xscale(d) : v;\n  }\n  pc.version = '0.7.0';\n  // this descriptive text should live with other introspective methods\n  pc.toString = function () {\n    return (\n      'Parallel Coordinates: ' +\n      __.dimensions.length +\n      ' dimensions (' +\n      d3.keys(__.data[0]).length +\n      ' total) , ' +\n      __.data.length +\n      ' rows'\n    );\n  };\n\n  return pc;\n}\n\nd3.renderQueue = function (func) {\n  var _queue = [], // data to be rendered\n    _rate = 10, // number of calls per frame\n    _clear = function () {}, // clearing function\n    _i = 0; // current iteration\n\n  var rq = function (data) {\n    if (data) rq.data(data);\n    rq.invalidate();\n    _clear();\n    rq.render();\n  };\n\n  rq.render = function () {\n    _i = 0;\n    var valid = true;\n    rq.invalidate = function () {\n      valid = false;\n    };\n\n    function doFrame() {\n      if (!valid) return true;\n      if (_i > _queue.length) return true;\n\n      // Typical d3 behavior is to pass a data item *and* its index. As the\n      // render queue splits the original data set, we'll have to be slightly\n      // more carefull about passing the correct index with the data item.\n      var end = Math.min(_i + _rate, _queue.length);\n      for (var i = _i; i < end; i += 1) {\n        func(_queue[i], i);\n      }\n      _i += _rate;\n    }\n\n    d3.timer(doFrame);\n  };\n\n  rq.data = function (data) {\n    rq.invalidate();\n    _queue = data.slice(0);\n    return rq;\n  };\n\n  rq.rate = function (value) {\n    if (!arguments.length) return _rate;\n    _rate = value;\n    return rq;\n  };\n\n  rq.remaining = function () {\n    return _queue.length - _i;\n  };\n\n  // clear the canvas\n  rq.clear = function (func) {\n    if (!arguments.length) {\n      _clear();\n      return rq;\n    }\n    _clear = func;\n    return rq;\n  };\n\n  rq.invalidate = function () {};\n\n  return rq;\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable react/sort-prop-types */\nimport d3 from 'd3';\nimport PropTypes from 'prop-types';\nimport { getSequentialSchemeRegistry } from '@superset-ui/core';\n\nimport parcoords from './vendor/parcoords/d3.parcoords';\nimport divgrid from './vendor/parcoords/divgrid';\n\nconst propTypes = {\n  // Standard tabular data [{ fieldName1: value1, fieldName2: value2 }]\n  data: PropTypes.arrayOf(PropTypes.object),\n  width: PropTypes.number,\n  height: PropTypes.number,\n  colorMetric: PropTypes.string,\n  includeSeries: PropTypes.bool,\n  linearColorScheme: PropTypes.string,\n  metrics: PropTypes.arrayOf(PropTypes.string),\n  series: PropTypes.string,\n  showDatatable: PropTypes.bool,\n};\n\nfunction ParallelCoordinates(element, props) {\n  const {\n    data,\n    width,\n    height,\n    colorMetric,\n    includeSeries,\n    linearColorScheme,\n    metrics,\n    series,\n    showDatatable,\n  } = props;\n\n  const cols = includeSeries ? [series].concat(metrics) : metrics;\n\n  const ttypes = {};\n  ttypes[series] = 'string';\n  metrics.forEach(v => {\n    ttypes[v] = 'number';\n  });\n\n  const colorScale = colorMetric\n    ? getSequentialSchemeRegistry()\n        .get(linearColorScheme)\n        .createLinearScale(d3.extent(data, d => d[colorMetric]))\n    : () => 'grey';\n  const color = d => colorScale(d[colorMetric]);\n  const container = d3\n    .select(element)\n    .classed('superset-legacy-chart-parallel-coordinates', true);\n  container.selectAll('*').remove();\n  const effHeight = showDatatable ? height / 2 : height;\n\n  const div = container\n    .append('div')\n    .style('height', `${effHeight}px`)\n    .classed('parcoords', true);\n\n  const chart = parcoords()(div.node())\n    .width(width)\n    .color(color)\n    .alpha(0.5)\n    .composite('darken')\n    .height(effHeight)\n    .data(data)\n    .dimensions(cols)\n    .types(ttypes)\n    .render()\n    .createAxes()\n    .shadows()\n    .reorderable()\n    .brushMode('1D-axes');\n\n  if (showDatatable) {\n    // create data table, row hover highlighting\n    const grid = divgrid();\n    container\n      .append('div')\n      .style('height', `${effHeight}px`)\n      .datum(data)\n      .call(grid)\n      .classed('parcoords grid', true)\n      .selectAll('.row')\n      .on({\n        mouseover(d) {\n          chart.highlight([d]);\n        },\n        mouseout: chart.unhighlight,\n      });\n    // update data table on brush event\n    chart.on('brush', d => {\n      d3.select('.grid')\n        .datum(d)\n        .call(grid)\n        .selectAll('.row')\n        .on({\n          mouseover(dd) {\n            chart.highlight([dd]);\n          },\n          mouseout: chart.unhighlight,\n        });\n    });\n  }\n}\n\nParallelCoordinates.displayName = 'ParallelCoordinates';\nParallelCoordinates.propTypes = propTypes;\n\nexport default ParallelCoordinates;\n","/* [LICENSE TBD] */\n/* eslint-disable */\n// from http://bl.ocks.org/3687826\nexport default function (config) {\n  var columns = [];\n\n  var dg = function (selection) {\n    if (columns.length == 0) columns = d3.keys(selection.data()[0][0]);\n\n    // header\n    selection\n      .selectAll('.header')\n      .data([true])\n      .enter()\n      .append('div')\n      .attr('class', 'header');\n\n    var header = selection.select('.header').selectAll('.cell').data(columns);\n\n    header\n      .enter()\n      .append('div')\n      .attr('class', function (d, i) {\n        return 'col-' + i;\n      })\n      .classed('cell', true);\n\n    selection.selectAll('.header .cell').text(function (d) {\n      return d;\n    });\n\n    header.exit().remove();\n\n    // rows\n    var rows = selection.selectAll('.row').data(function (d) {\n      return d;\n    });\n\n    rows.enter().append('div').attr('class', 'row');\n\n    rows.exit().remove();\n\n    var cells = selection\n      .selectAll('.row')\n      .selectAll('.cell')\n      .data(function (d) {\n        return columns.map(function (col) {\n          return d[col];\n        });\n      });\n\n    // cells\n    cells\n      .enter()\n      .append('div')\n      .attr('class', function (d, i) {\n        return 'col-' + i;\n      })\n      .classed('cell', true);\n\n    cells.exit().remove();\n\n    selection.selectAll('.cell').text(function (d) {\n      return d;\n    });\n\n    return dg;\n  };\n\n  dg.columns = function (_) {\n    if (!arguments.length) return columns;\n    columns = _;\n    return this;\n  };\n\n  return dg;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { styled, reactify, addAlpha } from '@superset-ui/core';\nimport PropTypes from 'prop-types';\nimport Component from './ParallelCoordinates';\n\nconst ReactComponent = reactify(Component);\n\nconst ParallelCoordinates = ({ className, ...otherProps }) => (\n  <div className={className}>\n    <ReactComponent {...otherProps} />\n  </div>\n);\n\nParallelCoordinates.propTypes = {\n  className: PropTypes.string.isRequired,\n};\n\nexport default styled(ParallelCoordinates)`\n  ${({ theme }) => `\n    .superset-legacy-chart-parallel-coordinates {\n      div.grid {\n        overflow: auto;\n        div.row {\n          &:hover {\n            background-color: ${theme.colors.grayscale.light2};\n          }\n        }\n      }\n    }\n    .parcoords svg,\n    .parcoords canvas {\n      font-size: ${theme.typography.sizes.s}px;\n      position: absolute;\n    }\n    .parcoords > canvas {\n      pointer-events: none;\n    }\n\n    .parcoords text.label {\n      font: 100%;\n      font-size: ${theme.typography.sizes.s}px;\n      cursor: drag;\n    }\n    .parcoords rect.background {\n      fill: transparent;\n    }\n    .parcoords rect.background:hover {\n      fill: ${addAlpha(theme.colors.grayscale.base, 0.2)};\n    }\n    .parcoords .resize rect {\n      fill: ${addAlpha(theme.colors.grayscale.dark2, 0.1)};\n    }\n    .parcoords rect.extent {\n      fill: ${addAlpha(theme.colors.grayscale.light5, 0.25)};\n      stroke: ${addAlpha(theme.colors.grayscale.dark2, 0.6)};\n    }\n    .parcoords .axis line,\n    .parcoords .axis path {\n      fill: none;\n      stroke: ${theme.colors.grayscale.dark1};\n      shape-rendering: crispEdges;\n    }\n    .parcoords canvas {\n      opacity: 1;\n      -moz-transition: opacity 0.3s;\n      -webkit-transition: opacity 0.3s;\n      -o-transition: opacity 0.3s;\n    }\n    .parcoords canvas.faded {\n      opacity: ${theme.opacity.mediumLight};\n    }\n    .parcoords {\n      -webkit-touch-callout: none;\n      -webkit-user-select: none;\n      -khtml-user-select: none;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      user-select: none;\n      background-color: ${theme.colors.grayscale.light5};\n    }\n\n    /* data table styles */\n    .parcoords .row,\n    .parcoords .header {\n      clear: left;\n      font-size: ${theme.typography.sizes.s}px;\n      line-height: 18px;\n      height: 18px;\n      margin: 0px;\n    }\n    .parcoords .row:nth-child(odd) {\n      background: ${addAlpha(theme.colors.grayscale.dark2, 0.05)};\n    }\n    .parcoords .header {\n      font-weight: ${theme.typography.weights.bold};\n    }\n    .parcoords .cell {\n      float: left;\n      overflow: hidden;\n      white-space: nowrap;\n      width: 100px;\n      height: 18px;\n    }\n    .parcoords .col-0 {\n      width: 180px;\n    }\n  `}\n`;\n","var makeBuiltIn = require('../internals/make-built-in');\nvar defineProperty = require('../internals/object-define-property');\n\nmodule.exports = function (target, name, descriptor) {\n  if (descriptor.get) makeBuiltIn(descriptor.get, name, { getter: true });\n  if (descriptor.set) makeBuiltIn(descriptor.set, name, { setter: true });\n  return defineProperty.f(target, name, descriptor);\n};\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.hasIndices) result += 'd';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.unicodeSets) result += 'v';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","var global = require('../internals/global');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar regExpFlags = require('../internals/regexp-flags');\nvar fails = require('../internals/fails');\n\n// babel-minify and Closure Compiler transpiles RegExp('.', 'd') -> /./d and it causes SyntaxError\nvar RegExp = global.RegExp;\nvar RegExpPrototype = RegExp.prototype;\n\nvar FORCED = DESCRIPTORS && fails(function () {\n  var INDICES_SUPPORT = true;\n  try {\n    RegExp('.', 'd');\n  } catch (error) {\n    INDICES_SUPPORT = false;\n  }\n\n  var O = {};\n  // modern V8 bug\n  var calls = '';\n  var expected = INDICES_SUPPORT ? 'dgimsy' : 'gimsy';\n\n  var addGetter = function (key, chr) {\n    // eslint-disable-next-line es-x/no-object-defineproperty -- safe\n    Object.defineProperty(O, key, { get: function () {\n      calls += chr;\n      return true;\n    } });\n  };\n\n  var pairs = {\n    dotAll: 's',\n    global: 'g',\n    ignoreCase: 'i',\n    multiline: 'm',\n    sticky: 'y'\n  };\n\n  if (INDICES_SUPPORT) pairs.hasIndices = 'd';\n\n  for (var key in pairs) addGetter(key, pairs[key]);\n\n  // eslint-disable-next-line es-x/no-object-getownpropertydescriptor -- safe\n  var result = Object.getOwnPropertyDescriptor(RegExpPrototype, 'flags').get.call(O);\n\n  return result !== expected || calls !== expected;\n});\n\n// `RegExp.prototype.flags` getter\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nif (FORCED) defineBuiltInAccessor(RegExpPrototype, 'flags', {\n  configurable: true,\n  get: regExpFlags\n});\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\n\n// TODO: Note that id and className can collide between Props and ReactifyProps\n// leading to (likely) unexpected behaviors. We should either require Props to not\n// contain an id/className, or not combine them (via intersection), instead preferring\n// wrapping (composition). As an example:\n// interface MyProps {\n//   id: number;\n// }\n// function myRender(container: HTMLDivElement, props: Readonly<MyProps>): void {\n//   props.id // unusable: id is string & number\n// }\n// new (reactify(myRender))({ id: 5 }); // error: id has to be string & number\n\nexport type ReactifyProps = {\n  id?: string;\n  className?: string;\n};\n\n// TODO: add more React lifecycle callbacks as needed\nexport type LifeCycleCallbacks = {\n  componentWillUnmount?: () => void;\n};\n\nexport interface RenderFuncType<Props> {\n  (container: HTMLDivElement, props: Readonly<Props & ReactifyProps>): void;\n  displayName?: string;\n  defaultProps?: Partial<Props & ReactifyProps>;\n  propTypes?: React.WeakValidationMap<Props & ReactifyProps>;\n}\n\nexport default function reactify<Props extends object>(\n  renderFn: RenderFuncType<Props>,\n  callbacks?: LifeCycleCallbacks,\n): React.ComponentClass<Props & ReactifyProps> {\n  class ReactifiedComponent extends React.Component<Props & ReactifyProps> {\n    container?: HTMLDivElement;\n\n    constructor(props: Props & ReactifyProps) {\n      super(props);\n      this.setContainerRef = this.setContainerRef.bind(this);\n    }\n\n    componentDidMount() {\n      this.execute();\n    }\n\n    componentDidUpdate() {\n      this.execute();\n    }\n\n    componentWillUnmount() {\n      this.container = undefined;\n      if (callbacks?.componentWillUnmount) {\n        callbacks.componentWillUnmount.bind(this)();\n      }\n    }\n\n    setContainerRef(ref: HTMLDivElement) {\n      this.container = ref;\n    }\n\n    execute() {\n      if (this.container) {\n        renderFn(this.container, this.props);\n      }\n    }\n\n    render() {\n      const { id, className } = this.props;\n\n      return <div ref={this.setContainerRef} id={id} className={className} />;\n    }\n  }\n\n  const ReactifiedClass: React.ComponentClass<Props & ReactifyProps> =\n    ReactifiedComponent;\n\n  if (renderFn.displayName) {\n    ReactifiedClass.displayName = renderFn.displayName;\n  }\n  // eslint-disable-next-line react/forbid-foreign-prop-types\n  if (renderFn.propTypes) {\n    ReactifiedClass.propTypes = {\n      ...ReactifiedClass.propTypes,\n      ...renderFn.propTypes,\n    };\n  }\n  if (renderFn.defaultProps) {\n    ReactifiedClass.defaultProps = renderFn.defaultProps;\n  }\n\n  return ReactifiedComponent;\n}\n"],"names":["config","__","data","highlighted","dimensions","dimensionTitles","dimensionTitleRotation","types","brushed","brushedColor","alphaOnBrushed","mode","rate","width","height","margin","top","right","bottom","left","nullValueSeparator","nullValueSeparatorPadding","color","composite","alpha","bundlingStrength","bundleDimension","smoothness","showControlPoints","hideAxis","target","source","key","extend","g","pc","selection","d3","select","clientWidth","clientHeight","forEach","layer","canvas","append","attr","ctx","getContext","svg","events","dispatch","apply","this","concat","keys","w","h","flags","brushable","reorderable","axes","interactive","debug","xscale","scale","ordinal","yscale","dragging","axis","line","orient","ticks","side_effects","on","d","foreground","globalCompositeOperation","value","globalAlpha","strokeStyle","resize","brushedQueue","foregroundQueue","domain","render","updateAxes","length","detectDimensions","autoscale","clusterCentroids","map","clusterCounts","row","scaled","has","set","count","get","p","i","compute_cluster_centroids","arr","item","filter","elem","indexOf","getRange","isBrushed","object","brush","currentMode","brushState","hasOwnProperty","state","obj","x","arguments","old","call","previous","getset","rebind","defaultScales","date","k","extent","getTime","rangePoints","time","range","number","linear","string","counts","undefined","Object","getOwnPropertyNames","sort","a","b","selectAll","style","lineWidth","highlight","flip","reverse","commonScale","global","type","t","scales","reduce","detectDimensionTypes","toType","v","toString","match","toLowerCase","toTypeCoerceNumbers","parseFloat","col","renderBrushed","default","clear","path_foreground","renderQueue","queue","path_brushed","color_path","beginPath","centroids","cols","position","y","push","$V","cx","cy","centroid","compute_centroids","cps","e","mid","diff","subtract","add","compute_control_points","moveTo","j","fillRect","bezierCurveTo","single_curve","getNullPosition","lineTo","single_path","stroke","console","log","functor","path_highlight","flipAxisAndUpdatePCP","dimension","parentElement","transition","duration","rotateLabels","delta","event","deltaY","preventDefault","dimensionLabels","shadows","axisDots","r","marks","endAngle","Math","PI","min","pow","arc","fill","clearRect","fillStyle","createAxes","removeAxes","enter","each","transform","class","text","remove","g_data","exit","brushMode","behavior","drag","__origin__","max","dx","parent","previousElementSibling","axesreorder","insertBefore","children","appendChild","reorder","rowdata","dims","slice","pixelDifference","localeCompare","reordered","some","val","index","unhighlight","adjacent_pairs","ret","modes","None","install","uninstall","selected","predicate","brushUpdated","newSelection","brushPredicate","String","toUpperCase","brushModes","brushReset","brushes","is_brushed","empty","actives","extents","within","every","brushExtents","ascending","brushSelections","sourceEvent","stopPropagation","brushend","brushFor","strumRect","strums","drawStrum","strum","activePoint","id","points","p1","p2","circles","ev","minX","maxX","minY","maxY","onDragEnd","onDrag","active","ids","crossesStrum","test","m1","b1","m2","b2","y1","y2","containmentTest","d1","d2","isNaN","removeStrum","first","second","mouse","dim","next","dimensionsForPoint","insert","multibrush","extentAdaption","resizeAdaption","arcs","p3","path","angle","startAngle","hypothenuse","sqrt","signedAngle","tmp","c","asin","outerRadius","uAngle","innerRadius","classed","intersection","version","func","_queue","_rate","_clear","_i","rq","invalidate","valid","timer","end","remaining","propTypes","PropTypes","colorMetric","includeSeries","linearColorScheme","metrics","series","showDatatable","ParallelCoordinates","element","props","ttypes","colorScale","getSequentialSchemeRegistry","createLinearScale","container","effHeight","div","chart","parcoords","node","grid","columns","dg","header","rows","cells","_","datum","mouseover","mouseout","dd","displayName","ReactComponent","reactify","Component","className","otherProps","styled","theme","colors","grayscale","light2","typography","sizes","s","addAlpha","base","dark2","light5","dark1","opacity","mediumLight","weights","bold","makeBuiltIn","defineProperty","module","exports","name","descriptor","getter","setter","f","anObject","that","result","hasIndices","ignoreCase","multiline","dotAll","unicode","unicodeSets","sticky","DESCRIPTORS","defineBuiltInAccessor","regExpFlags","fails","RegExp","RegExpPrototype","prototype","INDICES_SUPPORT","error","O","calls","expected","addGetter","chr","pairs","getOwnPropertyDescriptor","configurable","renderFn","callbacks","ReactifiedComponent","React","constructor","super","setContainerRef","bind","componentDidMount","execute","componentDidUpdate","componentWillUnmount","ref","ReactifiedClass","defaultProps"],"sourceRoot":""}