"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[5181],{45181:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a=n(67294),l=n(55786),r=n(10581),o=n(62720),u=n(55867),i=n(16355),s=n(23279),c=n.n(s),p=n(90057),d=n(4715),f=n(27600),h=n(85633),v=n(52004),S=n(74448),m=n(56080),g=n(11965);function b(e,t){switch(t.type){case"ownState":return e.ownState={...e.ownState,...t.ownState},e;case"filterState":return e.extraFormData=t.extraFormData,e.__cache=t.__cache,e.filterState={...e.filterState,...t.filterState},e;default:return e}}function y(e){const{coltypeMap:t,data:n,filterState:s,formData:y,height:w,isRefreshing:C,width:F,setDataMask:O,setHoveredFilter:M,unsetHoveredFilter:E,setFocusedFilter:N,unsetFocusedFilter:Z,setFilterActive:k,appSection:T,showOverflow:x,parentRef:A,inputRef:L,filterBarOrientation:_}=e,{enableEmptyFilter:R,multiSelect:D,showSearch:I,inverseSelection:j,defaultToFirstItem:$,searchAllOptions:J}=y,P=(0,a.useMemo)((()=>(0,l.Z)(y.groupby).map(r.Z)),[y.groupby]),[B]=P,[G]=(0,a.useState)(t),[H,K]=(0,p.C)(b,{extraFormData:{},filterState:s}),V=t[B],W=(0,a.useMemo)((()=>(0,m.EG)({timeFormatter:o.Z})),[]),q=(0,a.useCallback)((e=>{const t=R&&!j&&!(null!=e&&e.length),n=j&&null!=e&&e.length?(0,u.t)(" (excluded)"):"";K({type:"filterState",__cache:s,extraFormData:(0,m.vb)(B,e,t,j),filterState:{...s,label:null!=e&&e.length?`${(e||[]).map((e=>W(e,V))).join(", ")}${n}`:void 0,value:T===i.Tr.FILTER_CONFIG_MODAL&&$?void 0:e}})}),[T,B,V,$,K,R,j,JSON.stringify(s),W]);(0,a.useEffect)((()=>{q(s.value)}),[JSON.stringify(s.value)]);const Q=T===i.Tr.FILTER_CONFIG_MODAL&&$,U=(0,a.useCallback)(c()((e=>{K({type:"ownState",ownState:{coltypeMap:G,search:e}})}),f.M$),[]),z=(0,a.useCallback)((e=>{J&&U(e)}),[U,J]),X=(0,a.useCallback)((()=>{J&&K({type:"ownState",ownState:{coltypeMap:G,search:null}})}),[K,G,J]),Y=(0,a.useCallback)((()=>{X(),Z()}),[X,Z]),ee=(0,a.useCallback)((e=>{const t=null===e?[null]:(0,l.Z)(e);0===t.length?q(null):q(t)}),[q]);(0,a.useEffect)((()=>{if($&&void 0===s.value){const e=n[0]?P.map((e=>n[0][e])):null;void 0!==(null==e?void 0:e[0])&&q(e)}else q(Q?null:s.value)}),[B,Q,$,R,j,q,n,P,JSON.stringify(s)]),(0,a.useEffect)((()=>{O(H)}),[JSON.stringify(H)]);const te=0===n.length?(0,u.t)("No data"):(0,u.tn)("%s option","%s options",n.length,n.length),ne=(0,a.useMemo)((()=>{if(s.validateMessage)return(0,g.tZ)(S.Am,{status:s.validateStatus},s.validateMessage)}),[s.validateMessage,s.validateStatus]),ae=(0,a.useMemo)((()=>{const e=[];return n.forEach((t=>{const[n]=P.map((e=>t[e]));e.push({label:W(n,V),value:n})})),e}),[n,V,P,W]),le=(0,a.useCallback)(((e,t)=>{const n=(0,h.mj)("label");return y.sortAscending?n(e,t):n(t,e)}),[y.sortAscending]);return(0,g.tZ)(S.un,{height:w,width:F},(0,g.tZ)(S.jp,{validateStatus:s.validateStatus,extra:ne},(0,g.tZ)(d.Ph,{allowClear:!0,allowNewOptions:!0,value:s.value||[],disabled:Q,getPopupContainer:x?()=>(null==A?void 0:A.current)||document.body:e=>(null==e?void 0:e.parentNode)||document.body,showSearch:I,mode:D?"multiple":"single",placeholder:te,onSearch:z,onSelect:X,onBlur:Y,onFocus:N,onMouseEnter:M,onMouseLeave:E,onChange:ee,ref:L,loading:C,oneLine:_===v.B.HORIZONTAL,invertSelection:j,options:ae,sortComparator:le,onDropdownVisibleChange:k})))}},74448:(e,t,n)=>{n.d(t,{un:()=>r,jp:()=>o,Am:()=>u});var a=n(51995),l=n(4591);const r=a.iK.div`
  min-height: ${e=>{let{height:t}=e;return t}}px;
  width: ${e=>{let{width:t}=e;return t}}px;
`,o=(0,a.iK)(l.Z)`
  &.ant-row.ant-form-item {
    margin: 0;
  }
`,u=a.iK.div`
  color: ${e=>{var t;let{theme:n,status:a="error"}=e;return null==(t=n.colors[a])?void 0:t.base}};
`},56080:(e,t,n)=>{n.d(t,{vb:()=>r,WO:()=>o,EG:()=>u});var a=n(88889),l=n(54076);const r=function(e,t,n,a){void 0===n&&(n=!1),void 0===a&&(a=!1);const l={};return n?l.adhoc_filters=[{expressionType:"SQL",clause:"WHERE",sqlExpression:"1 = 0"}]:null!=t&&0!==t.length&&(l.filters=[{col:e,op:a?"NOT IN":"IN",val:t}]),l},o=(e,t,n)=>{const a=[];return null!=t&&t!==n&&a.push({col:e,op:">=",val:t}),null!=n&&n!==t&&a.push({col:e,op:"<=",val:n}),null!=n&&null!=t&&n===t&&a.push({col:e,op:"==",val:n}),a.length?{filters:a}:{}};function u(e){let{timeFormatter:t,numberFormatter:n}=void 0===e?{}:e;return(e,r)=>{if(null==e)return l.li;if("boolean"==typeof e)return e?l.Tb:l.jy;if(r===a.Z.BOOLEAN)try{return JSON.parse(String(e).toLowerCase())?l.Tb:l.jy}catch{return l.jy}return"string"==typeof e?e:t&&r===a.Z.TEMPORAL?t(e):n&&"number"==typeof e&&r===a.Z.NUMERIC?n(e):String(e)}}},90057:(e,t,n)=>{n.d(t,{x:()=>r,C:()=>o});var a=n(18172),l=n(67294);function r(e){var t=(0,l.useState)((function(){return(0,a.vV)("function"==typeof e?e():e,!0)})),n=t[1];return[t[0],(0,l.useCallback)((function(e){n("function"==typeof e?(0,a.ZP)(e):(0,a.vV)(e))}),[])]}function o(e,t,n){var r=(0,l.useMemo)((function(){return(0,a.ZP)(e)}),[e]);return(0,l.useReducer)(r,t,n)}}}]);
//# sourceMappingURL=5b26643f606977e9ed54.chunk.js.map
