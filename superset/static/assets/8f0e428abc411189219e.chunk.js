"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[5051],{25051:(t,e,n)=>{n.r(e),n.d(e,{default:()=>k}),n(67294);var r=n(43323),i=n(51995),a=n(78580),o=n.n(a),s=n(15078),l=n.n(s),c=n(45697),p=n.n(c),h=n(71939),d=n(67190),u=n(51115),f=n(28062);const g=p().shape({name:p().string,val:p().number.isRequired}),m={name:p().string,val:p().number.isRequired,children:p().arrayOf(p().oneOfType([p().shape((y=()=>m,()=>y().apply(void 0,arguments))),g]))};var y;const v=p().oneOfType([p().shape(m),g]),x={data:p().arrayOf(v),width:p().number,height:p().number,colorScheme:p().string,dateTimeFormat:p().string,equalDateSize:p().bool,levels:p().arrayOf(p().string),metrics:p().arrayOf(p().oneOfType([p().string,p().object])),numberFormat:p().string,partitionLimit:p().number,partitionThreshold:p().number,timeSeriesOption:p().string,useLogScale:p().bool,useRichTooltip:p().bool};function b(t,e){var n;const{width:r,height:i,data:a,colorScheme:s,dateTimeFormat:c,equalDateSize:p,levels:g,useLogScale:m=!1,metrics:y=[],numberFormat:v,partitionLimit:x,partitionThreshold:b,useRichTooltip:$,timeSeriesOption:w="not_time",sliceId:T}=e,k=l().select(t);k.classed("superset-legacy-chart-partition",!0);const N=w,A=o()(n=["adv_anal","time_series"]).call(n,N),O=(0,d.JB)(v),S=(0,u.bt)(c),R=f.getScale(s);k.selectAll("*").remove();const C=k.append("div").classed("partition-tooltip",!0);function U(t){return o()(y).call(y,t.data.name)&&A}function Z(t){return t?A&&1===t?"Date":g[t-(A?2:1)]:"Metric"}function z(e,n){const o=n[e],s=r,c=i/a.length,d=l().scale.linear().range([0,s]),u=l().scale.linear().range([0,c]),f=k.append("div").attr("class","chart").style("width",`${s}px`).style("height",`${c}px`).append("svg:svg").attr("width",s).attr("height",c);e!==a.length-1&&a.length>1&&f.style("padding-bottom","3px"),0!==e&&a.length>1&&f.style("padding-top","3px");const g=(0,h.ZP)(o);function y(e,n){let r="<table>";if($){const t=function(t){const e=[t];let n=t;for(;n.parent;)e.push(n.parent),n=n.parent;return e}(n);t.reverse().forEach((t=>{r+="<tbody>",r+=`<tr><td><div style='border: 2px solid transparent;background-color: ${t.color};'></div></td><td>${Z(t.depth)}</td><td>${t.name}</td><td>${t.disp}</td></tr>`}))}else r+=`<thead><tr><td colspan="3"><strong>${Z(n.depth)}</strong></td></tr></thead><tbody>`,r+=`<tr><td><div style='border: thin solid grey; background-color: ${n.color};'></div></td><td>${n.name}</td><td>${n.disp}</td></tr>`;r+="</tbody></table>";const[i,a]=l().mouse(t);e.html(r).style("left",`${i+15}px`).style("top",`${a}px`)}g.eachAfter((t=>{t.disp=t.data.val,t.value=t.disp<0?-t.disp:t.disp,t.weight=t.value,t.name=t.data.name,t.parent&&U(t.parent)&&(t.weight=p?1:t.value,t.value=t.name,t.name=S(t.name)),m&&(t.weight=Math.log(t.weight+1)),t.disp=t.disp&&!Number.isNaN(t.disp)&&Number.isFinite(t.disp)?O(t.disp):""})),g.sort(((t,e)=>{const n=e.value-t.value;return 0===n?e.name>t.name?1:-1:n})),b&&b>=0&&g.each((t=>{if(t.sum=t.children&&t.children.reduce(((t,e)=>t+e.weight),0)||1,t.children)if(U(t)){if(p)return;const e=[];for(let n=1;n<t.children.length;n+=1)t.children[n].weight/t.sum<b&&e.push(n);for(let n=e.length-1;n>=0;n-=1)t.children.splice(e[n],1)}else{let e;for(e=1;e<t.children.length&&!(t.children[e].weight/t.sum<b);e+=1);t.children=t.children.slice(0,e)}})),x&&x>=0&&g.each((t=>{t.children&&t.children.length>x&&(U(t)||(t.children=t.children.slice(0,x)))})),g.eachAfter((t=>{t.sum=t.children&&t.children.reduce(((t,e)=>t+e.weight),0)||1}));const v=function(t){const e=[],n=1/(t.height+1);let r=null;return t.each((t=>{t.y=n*t.depth,t.dy=n,t.parent?(t.x=r.depth===t.parent.depth?0:r.x+r.dx,t.dx=t.weight/t.parent.sum*t.parent.dx):(t.x=0,t.dx=1),r=t,e.push(t)})),e}(g);let w=s/g.dx,N=c/1;function A(t){return`translate(8,${t.dx*N/2})`}const z=f.selectAll("g").data(v).enter().append("svg:g").attr("transform",(t=>`translate(${d(t.y)},${u(t.x)})`)).on("mouseover",(t=>{C.interrupt().transition().duration(100).style("opacity",.9),y(C,t)})).on("mousemove",(t=>{y(C,t)})).on("mouseout",(()=>{C.interrupt().transition().duration(250).style("opacity",0)}));z.on("click",(function t(e){if(!e.children)return!!e.parent&&t(e.parent);w=(e.y?s-40:s)/(1-e.y),N=c/e.dx,d.domain([e.y,1]).range([e.y?40:0,s]),u.domain([e.x,e.x+e.dx]);const n=z.transition().duration(l().event.altKey?7500:750).attr("transform",(t=>`translate(${d(t.y)},${u(t.x)})`));return n.select("rect").attr("width",e.dy*w).attr("height",(t=>t.dx*N)),n.select("text").attr("transform",A).style("opacity",(t=>t.dx*N>12?1:0)),l().event.stopPropagation(),!0})),z.append("svg:rect").attr("width",g.dy*w).attr("height",(t=>t.dx*N)),z.append("svg:text").attr("transform",A).attr("dy","0.35em").style("opacity",(t=>t.dx*N>12?1:0)).text((t=>t.disp?`${t.name}: ${t.disp}`:t.name)),z.selectAll("rect").style("fill",(t=>(t.color=R(t.name,T),t.color)))}for(let t=0;t<a.length;t+=1)z(t,a)}b.displayName="Icicle",b.propTypes=x;const $=b;var w=n(11965);const T=(0,r.Z)($),k=(0,i.iK)((t=>{let{className:e,...n}=t;return(0,w.tZ)("div",{className:e},(0,w.tZ)(T,n))}))`
  ${t=>{let{theme:e}=t;return`\n    .superset-legacy-chart-partition {\n      position: relative;\n    }\n\n    .superset-legacy-chart-partition .chart {\n      display: block;\n      margin: auto;\n      font-size: ${e.typography.sizes.s}px;\n    }\n\n    .superset-legacy-chart-partition rect {\n      stroke: ${e.colors.grayscale.light2};\n      fill: ${e.colors.grayscale.light1};\n      fill-opacity: ${e.opacity.heavy};\n      transition: fill-opacity 180ms linear;\n      cursor: pointer;\n    }\n\n    .superset-legacy-chart-partition rect:hover {\n      fill-opacity: 1;\n    }\n\n    .superset-legacy-chart-partition g text {\n      font-weight: ${e.typography.weights.bold};\n      fill: ${e.colors.grayscale.dark1};\n    }\n\n    .superset-legacy-chart-partition g:hover text {\n      fill: ${e.colors.grayscale.dark2};\n    }\n\n    .superset-legacy-chart-partition .partition-tooltip {\n      position: absolute;\n      top: 0;\n      left: 0;\n      opacity: 0;\n      padding: ${e.gridUnit}px;\n      pointer-events: none;\n      background-color: ${e.colors.grayscale.dark2};\n      border-radius: ${e.gridUnit}px;\n    }\n\n    .partition-tooltip td {\n      padding-left: ${e.gridUnit}px;\n      font-size: ${e.typography.sizes.s}px;\n      color: ${e.colors.grayscale.light5};\n    }\n  `}}
`},71939:(t,e,n)=>{function r(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function i(t,e){var n,r,i,o,c,p=new l(t),h=+t.value&&(p.value=t.value),d=[p];for(null==e&&(e=a);n=d.pop();)if(h&&(n.value=+n.data.value),(i=e(n.data))&&(c=i.length))for(n.children=new Array(c),o=c-1;o>=0;--o)d.push(r=n.children[o]=new l(i[o])),r.parent=n,r.depth=n.depth+1;return p.eachBefore(s)}function a(t){return t.children}function o(t){t.data=t.data.data}function s(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function l(t){this.data=t,this.depth=this.height=0,this.parent=null}n.d(e,{ZP:()=>i}),l.prototype=i.prototype={constructor:l,count:function(){return this.eachAfter(r)},each:function(t){var e,n,r,i,a=this,o=[a];do{for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(t){for(var e,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n]);for(;i=o.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return i(this).eachBefore(o)}}},43323:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(67294),i=n(11965);function a(t,e){class n extends r.Component{constructor(t){super(t),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=e&&e.componentWillUnmount&&e.componentWillUnmount.bind(this)()}setContainerRef(t){this.container=t}execute(){this.container&&t(this.container,this.props)}render(){const{id:t,className:e}=this.props;return(0,i.tZ)("div",{ref:this.setContainerRef,id:t,className:e})}}const a=n;return t.displayName&&(a.displayName=t.displayName),t.propTypes&&(a.propTypes={...a.propTypes,...t.propTypes}),t.defaultProps&&(a.defaultProps=t.defaultProps),n}}}]);
//# sourceMappingURL=8f0e428abc411189219e.chunk.js.map
