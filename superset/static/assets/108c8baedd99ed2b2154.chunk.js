(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[8041],{28041:(t,e,n)=>{var r;(r={dev:!1}).tooltip=r.tooltip||{},r.utils=r.utils||{},r.models=r.models||{},r.charts={},r.logs={},r.dom={},"undefined"==typeof d3&&(d3=n(15078)),r.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),r.dev&&(r.dispatch.on("render_start",(function(t){r.logs.startTime=+new Date})),r.dispatch.on("render_end",(function(t){r.logs.endTime=+new Date,r.logs.totalTime=r.logs.endTime-r.logs.startTime,r.log("total",r.logs.totalTime)}))),r.log=function(){if(r.dev&&window.console&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(r.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]},r.deprecated=function(t,e){console&&console.warn&&console.warn("nvd3 warning: `"+t+"` has been deprecated. ",e||"")},r.render=function(t){t=t||1,r.render.active=!0,r.dispatch.render_start();var e=function(){for(var n,i,o=0;o<t&&(i=r.render.queue[o]);o++)n=i.generate(),typeof i.callback==typeof Function&&i.callback(n);r.render.queue.splice(0,o),r.render.queue.length?setTimeout(e):(r.dispatch.render_end(),r.render.active=!1)};setTimeout(e)},r.render.active=!1,r.render.queue=[],r.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),r.render.queue.push(t),r.render.active||r.render()},t.exports=r,"undefined"!=typeof window&&(window.nv=r),r.dom.write=function(t){return void 0!==window.fastdom?fastdom.mutate(t):t()},r.dom.read=function(t){return void 0!==window.fastdom?fastdom.measure(t):t()},r.interactiveGuideline=function(){"use strict";var t={left:0,top:0},e=null,n=null,i=d3.scale.linear(),o=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),a=!0,s=null,l=r.models.tooltip(),u=window.ActiveXObject;function c(d){d.each((function(d){var f=d3.select(this),p=e||960,h=n||400,v=f.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([d]);function g(){var e=d3.event.clientX-this.getBoundingClientRect().left,n=d3.event.clientY-this.getBoundingClientRect().top,r=!0,a=!1;if(u&&(e=d3.event.offsetX,n=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(r=!1),d3.event.target.className.baseVal.match("nv-legend")&&(a=!0)),r&&(e-=t.left,n-=t.top),"mouseout"===d3.event.type||e<0||n<0||e>p||n>h||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||a){if(u&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(l.nvPointerEventsClass)))return;return o.elementMouseout({mouseX:e,mouseY:n}),c.renderGuideLine(null),void l.hidden(!0)}l.hidden(!1);var s=void 0;if("function"==typeof i.rangeBands){var d=d3.bisect(i.range(),e)-1;if(!(i.range()[d]+i.rangeBand()>=e))return o.elementMouseout({mouseX:e,mouseY:n}),c.renderGuideLine(null),void l.hidden(!0);s=i.domain()[d3.bisect(i.range(),e)-1]}else s=i.invert(e);o.elementMousemove({mouseX:e,mouseY:n,pointXValue:s}),"dblclick"===d3.event.type&&o.elementDblclick({mouseX:e,mouseY:n,pointXValue:s}),"click"===d3.event.type&&o.elementClick({mouseX:e,mouseY:n,pointXValue:s}),"mousedown"===d3.event.type&&o.elementMouseDown({mouseX:e,mouseY:n,pointXValue:s}),"mouseup"===d3.event.type&&o.elementMouseUp({mouseX:e,mouseY:n,pointXValue:s})}v.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine"),s&&(s.on("touchmove",g).on("mousemove",g,!0).on("mouseout",g,!0).on("mousedown",g,!0).on("mouseup",g,!0).on("dblclick",g).on("click",g),c.guideLine=null,c.renderGuideLine=function(t){a&&(c.guideLine&&c.guideLine.attr("x1")===t||r.dom.write((function(){var e=v.select(".nv-interactiveGuideLine").selectAll("line").data(null!=t?[r.utils.NaNtoZero(t)]:[],String);e.enter().append("line").attr("class","nv-guideline").attr("x1",(function(t){return t})).attr("x2",(function(t){return t})).attr("y1",h).attr("y2",0),e.exit().remove()})))})}))}return l.duration(0).hideDelay(0).hidden(!1),c.dispatch=o,c.tooltip=l,c.margin=function(e){return arguments.length?(t.top=void 0!==e.top?e.top:t.top,t.left=void 0!==e.left?e.left:t.left,c):t},c.width=function(t){return arguments.length?(e=t,c):e},c.height=function(t){return arguments.length?(n=t,c):n},c.xScale=function(t){return arguments.length?(i=t,c):i},c.showGuideLine=function(t){return arguments.length?(a=t,c):a},c.svgContainer=function(t){return arguments.length?(s=t,c):s},c},r.interactiveBisect=function(t,e,n){"use strict";if(!(t instanceof Array))return null;var r;r="function"!=typeof n?function(t){return t.x}:n;var i=d3.bisector((function(t,e){return r(t)-e})).left,o=d3.max([0,i(t,e)-1]),a=r(t[o]);if(void 0===a&&(a=o),a===e)return o;var s=d3.min([o+1,t.length-1]),l=r(t[s]);return void 0===l&&(l=s),Math.abs(l-e)>=Math.abs(a-e)?o:s},r.nearestValueIndex=function(t,e,n){"use strict";var r=1/0,i=null;return t.forEach((function(t,o){var a=Math.abs(e-t);null!=t&&a<=r&&a<n&&(r=a,i=o)})),i},r.models.tooltip=function(){"use strict";var t="nvtooltip-"+Math.floor(1e5*Math.random()),e=null,n="w",i=25,o=0,a=null,s=!0,l=200,u=null,c={left:null,top:null},d=!0,f=100,p=!0,h="nv-pointer-events-none",v=function(t,e,n){return t},g=function(t){return t},m=function(t,e){return t},y=function(t,e){if(null===t)return"";var n=d3.select(document.createElement("table"));p&&n.selectAll("thead").data([t]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(g(t.value));var r=n.selectAll("tbody").data([t]).enter().append("tbody").selectAll("tr").data((function(t){return t.series})).enter().append("tr").classed("highlight",(function(t){return t.highlight}));r.append("td").classed("legend-color-guide",!0).append("div").style("background-color",(function(t){return t.color})),r.append("td").classed("key",!0).classed("total",(function(t){return!!t.total})).html((function(t,e){return m(t.key,e)})),r.append("td").classed("value",!0).html((function(t,e){return v(t.value,e,t)})),r.filter((function(t,e){return void 0!==t.percent})).append("td").classed("percent",!0).html((function(t,e){return"("+d3.format("%")(t.percent)+")"})),r.selectAll("td").each((function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]);d3.select(this).style("border-bottom-color",e(.6)).style("border-top-color",e(.6))}}));var i=n.node().outerHTML;return void 0!==t.footer&&(i+="<div class='footer'>"+t.footer+"</div>"),i},x=function(){var t={left:null!==d3.event?d3.event.clientX:0,top:null!==d3.event?d3.event.clientY:0};if("none"!=getComputedStyle(document.body).transform){var e=document.body.getBoundingClientRect();t.left-=e.left,t.top-=e.top}return t};function b(){if(d&&function(t){if(t&&t.series){if(r.utils.isArray(t.series))return!0;if(r.utils.isObject(t.series))return t.series=[t.series],!0}return!1}(e))return r.dom.write((function(){u&&u.node()||((u=d3.select(document.body).selectAll("#"+t).data([1])).enter().append("div").attr("class","nvtooltip "+(a||"xy-tooltip")).attr("id",t).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed(h,!0).classed(h,!0),u.exit().remove());var o=y(e,u.node());o&&(u.node().innerHTML=o),r.dom.read((function(){var t=x(),e=function(t){var e,r,o,a=u.node().offsetHeight,s=u.node().offsetWidth,l=document.documentElement.clientWidth,c=document.documentElement.clientHeight;switch(n){case"e":e=-s-i,r=-a/2,t.left+e<0&&(e=i),(o=t.top+r)<0&&(r-=o),(o=t.top+r+a)>c&&(r-=o-c);break;case"w":e=i,r=-a/2,t.left+e+s>l&&(e=-s-i),(o=t.top+r)<0&&(r-=o),(o=t.top+r+a)>c&&(r-=o-c);break;case"n":e=-s/2-5,r=i,t.top+r+a>c&&(r=-a-i),(o=t.left+e)<0&&(e-=o),(o=t.left+e+s)>l&&(e-=o-l);break;case"s":e=-s/2,r=-a-i,t.top+r<0&&(r=i),(o=t.left+e)<0&&(e-=o),(o=t.left+e+s)>l&&(e-=o-l);break;case"center":e=-s/2,r=-a/2;break;default:e=0,r=0}return{left:e,top:r}}(t),r=t.left+e.left,o=t.top+e.top;if(s)u.interrupt().transition().delay(l).duration(0).style("opacity",0);else{var a="translate("+c.left+"px, "+c.top+"px)",d="translate("+Math.round(r)+"px, "+Math.round(o)+"px)",p=d3.interpolateString(a,d),h=u.style("opacity")<.1;u.interrupt().transition().duration(h?0:f).styleTween("transform",(function(t){return p}),"important").styleTween("-webkit-transform",(function(t){return p})).style("-ms-transform",d).style("opacity",1)}c.left=r,c.top=o}))})),b}return b.nvPointerEventsClass=h,b.options=r.utils.optionsFunc.bind(b),b._options=Object.create({},{duration:{get:function(){return f},set:function(t){f=t}},gravity:{get:function(){return n},set:function(t){n=t}},distance:{get:function(){return i},set:function(t){i=t}},snapDistance:{get:function(){return o},set:function(t){o=t}},classes:{get:function(){return a},set:function(t){a=t}},enabled:{get:function(){return d},set:function(t){d=t}},hideDelay:{get:function(){return l},set:function(t){l=t}},contentGenerator:{get:function(){return y},set:function(t){y=t}},valueFormatter:{get:function(){return v},set:function(t){v=t}},headerFormatter:{get:function(){return g},set:function(t){g=t}},keyFormatter:{get:function(){return m},set:function(t){m=t}},headerEnabled:{get:function(){return p},set:function(t){p=t}},position:{get:function(){return x},set:function(t){x=t}},chartContainer:{get:function(){return document.body},set:function(t){r.deprecated("chartContainer","feature removed after 1.8.3")}},fixedTop:{get:function(){return null},set:function(t){r.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(t){r.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return s},set:function(t){s!=t&&(s=!!t,b())}},data:{get:function(){return e},set:function(t){t.point&&(t.value=t.point.x,t.series=t.series||{},t.series.value=t.point.y,t.series.color=t.point.color||t.series.color),e=t}},node:{get:function(){return u.node()},set:function(t){}},id:{get:function(){return t},set:function(t){}}}),r.utils.initOptions(b),b},r.utils.windowSize=function(){var t={width:640,height:480};return window.innerWidth&&window.innerHeight?(t.width=window.innerWidth,t.height=window.innerHeight,t):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight,t):document.body&&document.body.offsetWidth?(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight,t):t},r.utils.isArray=Array.isArray,r.utils.isObject=function(t){return null!==t&&"object"==typeof t},r.utils.isFunction=function(t){return"function"==typeof t},r.utils.isDate=function(t){return"[object Date]"===toString.call(t)},r.utils.isNumber=function(t){return!isNaN(t)&&"number"==typeof t},r.utils.windowResize=function(t){return window.addEventListener?window.addEventListener("resize",t):r.log("ERROR: Failed to bind to window.resize with: ",t),{callback:t,clear:function(){window.removeEventListener("resize",t)}}},r.utils.getColor=function(t){if(void 0===t)return r.utils.defaultColor();if(r.utils.isArray(t)){var e=d3.scale.ordinal().range(t);return function(t,n){var r=void 0===n?t:n;return t.color||e(r)}}return t},r.utils.defaultColor=function(){return r.utils.getColor(d3.scale.category20().range())},r.utils.customTheme=function(t,e,n){e=e||function(t){return t.key};var i=(n=n||d3.scale.category20().range()).length;return function(o,a){var s=e(o);return r.utils.isFunction(t[s])?t[s]():void 0!==t[s]?t[s]:(i||(i=n.length),n[i-=1])}},r.utils.pjax=function(t,e){var n=function(n){d3.html(n,(function(n){var i=d3.select(e).node();i.parentNode.replaceChild(d3.select(n).select(e).node(),i),r.utils.pjax(t,e)}))};d3.selectAll(t).on("click",(function(){history.pushState(this.href,this.textContent,this.href),n(this.href),d3.event.preventDefault()})),d3.select(window).on("popstate",(function(){d3.event.state&&n(d3.event.state)}))},r.utils.calcApproxTextWidth=function(t){if(r.utils.isFunction(t.style)&&r.utils.isFunction(t.text)){var e=parseInt(t.style("font-size").replace("px",""),10),n=t.text().length;return r.utils.NaNtoZero(n*e*.5)}return 0},r.utils.NaNtoZero=function(t){return!r.utils.isNumber(t)||isNaN(t)||null===t||t===1/0||t===-1/0?0:t},d3.selection.prototype.watchTransition=function(t){var e=[this].concat([].slice.call(arguments,1));return t.transition.apply(t,e)},r.utils.renderWatch=function(t,e){if(!(this instanceof r.utils.renderWatch))return new r.utils.renderWatch(t,e);var n=void 0!==e?e:250,i=[],o=this;this.models=function(t){return(t=[].slice.call(arguments,0)).forEach((function(t){var e;t.__rendered=!1,(e=t).dispatch.on("renderEnd",(function(t){e.__rendered=!0,o.renderEnd("model")})),i.indexOf(t)<0&&i.push(t)})),this},this.reset=function(t){void 0!==t&&(n=t),i=[]},this.transition=function(t,e,r){if(r=(e=arguments.length>1?[].slice.call(arguments,1):[]).length>1?e.pop():void 0!==n?n:250,t.__rendered=!1,i.indexOf(t)<0&&i.push(t),0===r)return t.__rendered=!0,t.delay=function(){return this},t.duration=function(){return this},t;0===t.length||t.every((function(t){return!t.length}))?t.__rendered=!0:t.__rendered=!1;var a=0;return t.transition().duration(r).each((function(){++a})).each("end",(function(n,r){0==--a&&(t.__rendered=!0,o.renderEnd.apply(this,e))}))},this.renderEnd=function(){i.every((function(t){return t.__rendered}))&&(i.forEach((function(t){t.__rendered=!1})),t.renderEnd.apply(this,arguments))}},r.utils.deepExtend=function(t){var e=arguments.length>1?[].slice.call(arguments,1):[];e.forEach((function(e){for(var n in e){var i=r.utils.isArray(t[n]),o=r.utils.isObject(t[n]),a=r.utils.isObject(e[n]);o&&!i&&a?r.utils.deepExtend(t[n],e[n]):t[n]=e[n]}}))},r.utils.state=function(){if(!(this instanceof r.utils.state))return new r.utils.state;var t={},e=function(){},n=function(){return{}},i=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",(function(t){e(t,!0)})),this.getter=function(t){return n=t,this},this.setter=function(t,n){return n||(n=function(){}),e=function(e,r){t(e),r&&n()},this},this.init=function(t){i=i||{},r.utils.deepExtend(i,t)};var o=function(){var e=n();if(JSON.stringify(e)===JSON.stringify(t))return!1;for(var r in e)void 0===t[r]&&(t[r]={}),t[r]=e[r];return!0};this.update=function(){i&&(e(i,!1),i=null),o.call(this)&&this.dispatch.change(t)}},r.utils.optionsFunc=function(t){return t&&d3.map(t).forEach(function(t,e){r.utils.isFunction(this[t])&&this[t](e)}.bind(this)),this},r.utils.calcTicksX=function(t,e){for(var n=1,i=0;i<e.length;i+=1){var o=e[i]&&e[i].values?e[i].values.length:0;n=o>n?o:n}return r.log("Requested number of ticks: ",t),r.log("Calculated max values to be: ",n),t=(t=t>n?t=n-1:t)<1?1:t,t=Math.floor(t),r.log("Calculating tick count as: ",t),t},r.utils.calcTicksY=function(t,e,n){if(n){for(var i=1,o=0;o<e.length;o+=1)for(var a,s=e[o]&&e[o].values?e[o].values:[],l=0;l<s.length;l+=1)i=(a=s[l]&&n(s[l])?n(s[l]):0)>i?a:i;return r.log("Requested number of ticks: ",t),r.log("Calculated max values to be: ",i),t=(t=t>i?i-1:t)<1?1:t,t=Math.floor(t),r.log("Calculating tick count as: ",t),t}return r.utils.calcTicksX(t,e)},r.utils.initOption=function(t,e){t._calls&&t._calls[e]?t[e]=t._calls[e]:(t[e]=function(n){return arguments.length?(t._overrides[e]=!0,t._options[e]=n,t):t._options[e]},t["_"+e]=function(n){return arguments.length?(t._overrides[e]||(t._options[e]=n),t):t._options[e]})},r.utils.initOptions=function(t){t._overrides=t._overrides||{};var e=Object.getOwnPropertyNames(t._options||{}),n=Object.getOwnPropertyNames(t._calls||{});for(var i in e=e.concat(n))r.utils.initOption(t,e[i])},r.utils.inheritOptionsD3=function(t,e,n){t._d3options=n.concat(t._d3options||[]),t._d3options=(t._d3options||[]).filter((function(t,e,n){return n.indexOf(t)===e})),n.unshift(e),n.unshift(t),d3.rebind.apply(this,n)},r.utils.arrayUnique=function(t){return t.sort().filter((function(e,n){return!n||e!=t[n-1]}))},r.utils.symbolMap=d3.map(),r.utils.symbol=function(){var t,e=64;function n(n,i){var o=t.call(this,n,i),a=e.call(this,n,i);return-1!==d3.svg.symbolTypes.indexOf(o)?d3.svg.symbol().type(o).size(a)():r.utils.symbolMap.get(o)(a)}return n.type=function(e){return arguments.length?(t=d3.functor(e),n):t},n.size=function(t){return arguments.length?(e=d3.functor(t),n):e},n},r.utils.inheritOptions=function(t,e){var n=Object.getOwnPropertyNames(e._options||{}),i=Object.getOwnPropertyNames(e._calls||{}),o=e._inherited||[],a=e._d3options||[],s=n.concat(i).concat(o).concat(a);s.unshift(e),s.unshift(t),d3.rebind.apply(this,s),t._inherited=r.utils.arrayUnique(n.concat(i).concat(o).concat(n).concat(t._inherited||[])),t._d3options=r.utils.arrayUnique(a.concat(t._d3options||[]))},r.utils.initSVG=function(t){t.classed({"nvd3-svg":!0})},r.utils.sanitizeHeight=function(t,e){return t||parseInt(e.style("height"),10)||400},r.utils.sanitizeWidth=function(t,e){return t||parseInt(e.style("width"),10)||960},r.utils.availableHeight=function(t,e,n){return Math.max(0,r.utils.sanitizeHeight(t,e)-n.top-n.bottom)},r.utils.availableWidth=function(t,e,n){return Math.max(0,r.utils.sanitizeWidth(t,e)-n.left-n.right)},r.utils.noData=function(t,e){var n=t.options(),i=n.margin(),o=n.noData(),a=null==o?["No Data Available."]:[o],s=r.utils.availableHeight(null,e,i),l=r.utils.availableWidth(null,e,i),u=i.left+l/2,c=i.top+s/2;e.selectAll("g").remove();var d=e.selectAll(".nv-noData").data(a);d.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),d.attr("x",u).attr("y",c).text((function(t){return t}))},r.utils.wrapTicks=function(t,e){t.each((function(){for(var t,n=d3.select(this),r=n.text().split(/\s+/).reverse(),i=[],o=0,a=n.attr("y"),s=parseFloat(n.attr("dy")),l=n.text(null).append("tspan").attr("x",0).attr("y",a).attr("dy",s+"em");t=r.pop();)i.push(t),l.text(i.join(" ")),l.node().getComputedTextLength()>e&&(i.pop(),l.text(i.join(" ")),i=[t],l=n.append("tspan").attr("x",0).attr("y",a).attr("dy",1.1*++o+s+"em").text(t))}))},r.utils.arrayEquals=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!r.arrayEquals(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0},r.utils.pointIsInArc=function(t,e,n){var r=n.innerRadius()(e),i=n.outerRadius()(e),o=n.startAngle()(e),a=n.endAngle()(e),s=t.x*t.x+t.y*t.y,l=Math.atan2(t.x,-t.y);return l=l<0?l+2*Math.PI:l,r*r<=s&&s<=i*i&&o<=l&&l<=a},r.models.axis=function(){"use strict";var t,e,n=d3.svg.axis(),i=d3.scale.linear(),o={top:0,right:0,bottom:0,left:0},a=75,s=60,l=null,u=!0,c=0,d=!0,f=!1,p=!1,h=null,v=0,g=void 0,m=250,y=d3.dispatch("renderEnd");n.scale(i).orient("bottom").tickFormat((function(t){return t}));var x=r.utils.renderWatch(y,m);function b(s){return x.reset(),s.each((function(s){var m=d3.select(this);r.utils.initSVG(m);var y=m.selectAll("g.nv-wrap.nv-axis").data([s]),b=(y.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g"),y.select("g"));null!==h?n.ticks(h):"top"!=n.orient()&&"bottom"!=n.orient()||n.ticks(Math.abs(i.range()[1]-i.range()[0])/100),b.watchTransition(x,"axis").call(n),e=e||n.scale();var k=n.tickFormat();null==k&&(k=e.tickFormat());var w,M,A,C=b.selectAll("text.nv-axislabel").data([l||null]);switch(C.exit().remove(),void 0!==g&&b.selectAll("g").select("text").style("font-size",g),n.orient()){case"top":w=v+36,C.enter().append("text").attr("class","nv-axislabel"),A=0,1===i.range().length?A=p?2*i.range()[0]+i.rangeBand():0:2===i.range().length?A=p?i.range()[0]+i.range()[1]+i.rangeBand():i.range()[1]:i.range().length>2&&(A=i.range()[i.range().length-1]+(i.range()[1]-i.range()[0])),C.attr("text-anchor","middle").attr("y",-w).attr("x",A/2),u&&((M=y.selectAll("g.nv-axisMaxMin").data(i.domain())).enter().append("g").attr("class",(function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")})).append("text"),M.exit().remove(),M.attr("transform",(function(t,e){return"translate("+r.utils.NaNtoZero(i(t))+",0)"})).select("text").attr("dy","-0.5em").attr("y",-n.tickPadding()).attr("text-anchor","middle").text((function(e,n){var r=(t||k)(e);return(""+r).match("NaN")?"":r})),M.watchTransition(x,"min-max top").attr("transform",(function(t,e){return"translate("+r.utils.NaNtoZero(i.range()[e])+",0)"})));break;case"bottom":w=v+36;var S=30,W=0,F=b.selectAll("g").select("text"),E="";if(c%360){F.attr("transform",""),F.each((function(t,e){var n=this.getBoundingClientRect(),r=n.width;W=n.height,r>S&&(S=r)})),E="rotate("+c+" 0,"+(W/2+n.tickPadding())+")";var O=Math.abs(Math.sin(c*Math.PI/180));w=(O?O*S:S)+30,F.attr("transform",E).style("text-anchor",c%360>0?"start":"end")}else f?F.attr("transform",(function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"})):F.attr("transform","translate(0,0)");C.enter().append("text").attr("class","nv-axislabel"),A=0,1===i.range().length?A=p?2*i.range()[0]+i.rangeBand():0:2===i.range().length?A=p?i.range()[0]+i.range()[1]+i.rangeBand():i.range()[1]:i.range().length>2&&(A=i.range()[i.range().length-1]+(i.range()[1]-i.range()[0])),C.attr("text-anchor","middle").attr("y",w).attr("x",A/2),u&&((M=y.selectAll("g.nv-axisMaxMin").data([i.domain()[0],i.domain()[i.domain().length-1]])).enter().append("g").attr("class",(function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")})).append("text"),M.exit().remove(),M.attr("transform",(function(t,e){return"translate("+r.utils.NaNtoZero(i(t)+(p?i.rangeBand()/2:0))+",0)"})).select("text").attr("dy",".71em").attr("y",n.tickPadding()).attr("transform",E).style("text-anchor",c?c%360>0?"start":"end":"middle").text((function(e,n){var r=(t||k)(e);return(""+r).match("NaN")?"":r})),M.watchTransition(x,"min-max bottom").attr("transform",(function(t,e){return"translate("+r.utils.NaNtoZero(i(t)+(p?i.rangeBand()/2:0))+",0)"})));break;case"right":C.enter().append("text").attr("class","nv-axislabel"),C.style("text-anchor",d?"middle":"begin").attr("transform",d?"rotate(90)":"").attr("y",d?12-Math.max(o.right,a)-(v||0):-10).attr("x",d?d3.max(i.range())/2:n.tickPadding()),u&&((M=y.selectAll("g.nv-axisMaxMin").data(i.domain())).enter().append("g").attr("class",(function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")})).append("text").style("opacity",0),M.exit().remove(),M.attr("transform",(function(t,e){return"translate(0,"+r.utils.NaNtoZero(i(t))+")"})).select("text").attr("dy",".32em").attr("y",0).attr("x",n.tickPadding()).style("text-anchor","start").text((function(e,n){var r=(t||k)(e);return(""+r).match("NaN")?"":r})),M.watchTransition(x,"min-max right").attr("transform",(function(t,e){return"translate(0,"+r.utils.NaNtoZero(i.range()[e])+")"})).select("text").style("opacity",1));break;case"left":C.enter().append("text").attr("class","nv-axislabel"),C.style("text-anchor",d?"middle":"end").attr("transform",d?"rotate(-90)":"").attr("y",d?25-Math.max(o.left,a)-(v||0):-10).attr("x",d?-d3.max(i.range())/2:-n.tickPadding()),u&&((M=y.selectAll("g.nv-axisMaxMin").data(i.domain())).enter().append("g").attr("class",(function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")})).append("text").style("opacity",0),M.exit().remove(),M.attr("transform",(function(t,n){return"translate(0,"+r.utils.NaNtoZero(e(t))+")"})).select("text").attr("dy",".32em").attr("y",0).attr("x",-n.tickPadding()).attr("text-anchor","end").text((function(e,n){var r=(t||k)(e);return(""+r).match("NaN")?"":r})),M.watchTransition(x,"min-max right").attr("transform",(function(t,e){return"translate(0,"+r.utils.NaNtoZero(i.range()[e])+")"})).select("text").style("opacity",1))}if(C.text((function(t){return t})),!u||"left"!==n.orient()&&"right"!==n.orient()||(b.selectAll("g").each((function(t,e){d3.select(this).select("text").attr("opacity",1),(i(t)<i.range()[1]+10||i(t)>i.range()[0]-10)&&((t>1e-10||t<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))})),i.domain()[0]==i.domain()[1]&&0==i.domain()[0]&&y.selectAll("g.nv-axisMaxMin").style("opacity",(function(t,e){return e?0:1}))),u&&("top"===n.orient()||"bottom"===n.orient())){var D=[];y.selectAll("g.nv-axisMaxMin").each((function(t,e){try{e?D.push(i(t)-this.getBoundingClientRect().width-4):D.push(i(t)+this.getBoundingClientRect().width+4)}catch(n){e?D.push(i(t)-4):D.push(i(t)+4)}})),b.selectAll("g").each((function(t,e){(i(t)<D[0]||i(t)>D[1])&&(t>1e-10||t<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())}))}b.selectAll(".tick").filter((function(t){return!parseFloat(Math.round(1e5*t)/1e6)&&void 0!==t})).classed("zero",!0),e=i.copy()})),x.renderEnd("axis immediate"),b}return b.axis=n,b.dispatch=y,b.options=r.utils.optionsFunc.bind(b),b._options=Object.create({},{axisLabelDistance:{get:function(){return v},set:function(t){v=t}},staggerLabels:{get:function(){return f},set:function(t){f=t}},rotateLabels:{get:function(){return c},set:function(t){c=t}},rotateYLabel:{get:function(){return d},set:function(t){d=t}},showMaxMin:{get:function(){return u},set:function(t){u=t}},axisLabel:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return s},set:function(t){s=t}},ticks:{get:function(){return h},set:function(t){h=t}},width:{get:function(){return a},set:function(t){a=t}},fontSize:{get:function(){return g},set:function(t){g=t}},tickFormatMaxMin:{get:function(){return t},set:function(e){t=e}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},duration:{get:function(){return m},set:function(t){m=t,x.reset(m)}},scale:{get:function(){return i},set:function(t){i=t,n.scale(i),p="function"==typeof i.rangeBands,r.utils.inheritOptionsD3(b,i,["domain","range","rangeBand","rangeBands"])}}}),r.utils.initOptions(b),r.utils.inheritOptionsD3(b,n,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),r.utils.inheritOptionsD3(b,i,["domain","range","rangeBand","rangeBands"]),b},r.models.boxPlot=function(){"use strict";var t,e,n,i,o,a,s={top:0,right:0,bottom:0,left:0},l=960,u=500,c=Math.floor(1e4*Math.random()),d=d3.scale.ordinal(),f=d3.scale.linear(),p=function(t){return t.label},h=function(t){return t.values.Q1},v=function(t){return t.values.Q2},g=function(t){return t.values.Q3},m=function(t){return t.values.whisker_low},y=function(t){return t.values.whisker_high},x=function(t){return t.color},b=function(t){return t.values.outliers},k=function(t,e,n){return t},w=function(t,e,n){return t},M=function(t,e,n){},A=r.utils.defaultColor(),C=null,S=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),W=250,F=null,E=r.utils.renderWatch(S,W);function O(c){return E.reset(),c.each((function(c){var O=l-s.left-s.right,D=u-s.top-s.bottom;C=d3.select(this),r.utils.initSVG(C),d.domain(t||c.map((function(t,e){return p(t,e)}))).rangeBands(e||[0,O],.1);var N=[];if(!n){var _=[];c.forEach((function(t,e){var n=h(t),r=g(t),i=m(t),o=y(t),a=b(t);a&&a.forEach((function(t,e){_.push(k(t,e,void 0))})),i&&_.push(i),n&&_.push(n),r&&_.push(r),o&&_.push(o)})),N=[d3.min(_),d3.max(_)]}f.domain(n||N),f.range(i||[D,0]),o=o||d,a=a||f.copy().range([f(0),f(0)]);var T=C.selectAll("g.nv-wrap").data([c]);T.enter().append("g").attr("class","nvd3 nv-wrap"),T.attr("transform","translate("+s.left+","+s.top+")");var L=T.selectAll(".nv-boxplot").data((function(t){return t})),B=L.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);L.attr("class","nv-boxplot").attr("transform",(function(t,e,n){return"translate("+(d(p(t,e))+.05*d.rangeBand())+", 0)"})).classed("hover",(function(t){return t.hover})),L.watchTransition(E,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay((function(t,e){return e*W/c.length})).attr("transform",(function(t,e){return"translate("+(d(p(t,e))+.05*d.rangeBand())+", 0)"})),L.exit().remove(),B.each((function(t,e){var n=d3.select(this);[m,y].forEach((function(r){if(void 0!==r(t)&&null!==r(t)){var i=r===m?"low":"high";n.append("line").style("stroke",x(t)||A(t,e)).attr("class","nv-boxplot-whisker nv-boxplot-"+i),n.append("line").style("stroke",x(t)||A(t,e)).attr("class","nv-boxplot-tick nv-boxplot-"+i)}}))}));var P=function(){return null===F?.9*d.rangeBand():Math.min(75,.9*d.rangeBand())},I=function(){return.45*d.rangeBand()-P()/2},z=function(){return.45*d.rangeBand()+P()/2};[m,y].forEach((function(t){var e=t===m?"low":"high",n=t===m?h:g;L.select("line.nv-boxplot-whisker.nv-boxplot-"+e).watchTransition(E,"nv-boxplot: boxplots").attr("x1",.45*d.rangeBand()).attr("y1",(function(e,n){return f(t(e))})).attr("x2",.45*d.rangeBand()).attr("y2",(function(t,e){return f(n(t))})),L.select("line.nv-boxplot-tick.nv-boxplot-"+e).watchTransition(E,"nv-boxplot: boxplots").attr("x1",I).attr("y1",(function(e,n){return f(t(e))})).attr("x2",z).attr("y2",(function(e,n){return f(t(e))}))})),[m,y].forEach((function(t){var e=t===m?"low":"high";B.selectAll(".nv-boxplot-"+e).on("mouseover",(function(e,n,r){d3.select(this).classed("hover",!0),S.elementMouseover({series:{key:t(e),color:x(e)||A(e,r)},e:d3.event})})).on("mouseout",(function(e,n,r){d3.select(this).classed("hover",!1),S.elementMouseout({series:{key:t(e),color:x(e)||A(e,r)},e:d3.event})})).on("mousemove",(function(t,e){S.elementMousemove({e:d3.event})}))})),B.append("rect").attr("class","nv-boxplot-box").on("mouseover",(function(t,e){d3.select(this).classed("hover",!0),S.elementMouseover({key:p(t),value:p(t),series:[{key:"Q3",value:g(t),color:x(t)||A(t,e)},{key:"Q2",value:v(t),color:x(t)||A(t,e)},{key:"Q1",value:h(t),color:x(t)||A(t,e)}],data:t,index:e,e:d3.event})})).on("mouseout",(function(t,e){d3.select(this).classed("hover",!1),S.elementMouseout({key:p(t),value:p(t),series:[{key:"Q3",value:g(t),color:x(t)||A(t,e)},{key:"Q2",value:v(t),color:x(t)||A(t,e)},{key:"Q1",value:h(t),color:x(t)||A(t,e)}],data:t,index:e,e:d3.event})})).on("mousemove",(function(t,e){S.elementMousemove({e:d3.event})})),L.select("rect.nv-boxplot-box").watchTransition(E,"nv-boxplot: boxes").attr("y",(function(t,e){return f(g(t))})).attr("width",P).attr("x",I).attr("height",(function(t,e){return Math.abs(f(g(t))-f(h(t)))||1})).style("fill",(function(t,e){return x(t)||A(t,e)})).style("stroke",(function(t,e){return x(t)||A(t,e)})),B.append("line").attr("class","nv-boxplot-median"),L.select("line.nv-boxplot-median").watchTransition(E,"nv-boxplot: boxplots line").attr("x1",I).attr("y1",(function(t,e){return f(v(t))})).attr("x2",z).attr("y2",(function(t,e){return f(v(t))}));var V=L.selectAll(".nv-boxplot-outlier").data((function(t){return b(t)||[]}));V.enter().append("circle").style("fill",(function(t,e,n){return M(t,e,n)||A(t,n)})).style("stroke",(function(t,e,n){return M(t,e,n)||A(t,n)})).style("z-index",9e3).on("mouseover",(function(t,e,n){d3.select(this).classed("hover",!0),S.elementMouseover({series:{key:w(t,e,n),color:M(t,e,n)||A(t,n)},e:d3.event})})).on("mouseout",(function(t,e,n){d3.select(this).classed("hover",!1),S.elementMouseout({series:{key:w(t,e,n),color:M(t,e,n)||A(t,n)},e:d3.event})})).on("mousemove",(function(t,e){S.elementMousemove({e:d3.event})})),V.attr("class","nv-boxplot-outlier"),V.watchTransition(E,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*d.rangeBand()).attr("cy",(function(t,e,n){return f(k(t,e,n))})).attr("r","3"),V.exit().remove(),o=d.copy(),a=f.copy()})),E.renderEnd("nv-boxplot immediate"),O}return O.dispatch=S,O.options=r.utils.optionsFunc.bind(O),O._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return u},set:function(t){u=t}},maxBoxWidth:{get:function(){return F},set:function(t){F=t}},x:{get:function(){return p},set:function(t){p=t}},q1:{get:function(){return h},set:function(t){h=t}},q2:{get:function(){return v},set:function(t){v=t}},q3:{get:function(){return g},set:function(t){g=t}},wl:{get:function(){return m},set:function(t){m=t}},wh:{get:function(){return y},set:function(t){y=t}},itemColor:{get:function(){return x},set:function(t){x=t}},outliers:{get:function(){return b},set:function(t){b=t}},outlierValue:{get:function(){return k},set:function(t){k=t}},outlierLabel:{get:function(){return w},set:function(t){w=t}},outlierColor:{get:function(){return M},set:function(t){M=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return t},set:function(e){t=e}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return e},set:function(t){e=t}},yRange:{get:function(){return i},set:function(t){i=t}},id:{get:function(){return c},set:function(t){c=t}},y:{get:function(){return console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead."),{}},set:function(t){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.")}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},color:{get:function(){return A},set:function(t){A=r.utils.getColor(t)}},duration:{get:function(){return W},set:function(t){W=t,E.reset(W)}}}),r.utils.initOptions(O),O},r.models.boxPlotChart=function(){"use strict";var t,e,n=r.models.boxPlot(),i=r.models.axis(),o=r.models.axis(),a={top:15,right:10,bottom:50,left:60},s=null,l=null,u=r.utils.getColor(),c=!0,d=!0,f=!1,p=!1,h=r.models.tooltip(),v="No Data Available.",g=d3.dispatch("beforeUpdate","renderEnd"),m=250;i.orient("bottom").showMaxMin(!1).tickFormat((function(t){return t})),o.orient(f?"right":"left").tickFormat(d3.format(",.1f")),h.duration(0);var y=r.utils.renderWatch(g,m);function x(u){return y.reset(),y.models(n),c&&y.models(i),d&&y.models(o),u.each((function(u){var h=d3.select(this);r.utils.initSVG(h);var y=(s||parseInt(h.style("width"))||960)-a.left-a.right,b=(l||parseInt(h.style("height"))||400)-a.top-a.bottom;if(x.update=function(){g.beforeUpdate(),h.transition().duration(m).call(x)},x.container=this,!u||!u.length){var k=h.selectAll(".nv-noData").data([v]);return k.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),k.attr("x",a.left+y/2).attr("y",a.top+b/2).text((function(t){return t})),x}h.selectAll(".nv-noData").remove(),t=n.xScale(),e=n.yScale().clamp(!0);var w=h.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([u]),M=w.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),A=M.append("defs"),C=w.select("g");if(M.append("g").attr("class","nv-x nv-axis"),M.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),M.append("g").attr("class","nv-barsWrap"),C.attr("transform","translate("+a.left+","+a.top+")"),f&&C.select(".nv-y.nv-axis").attr("transform","translate("+y+",0)"),n.width(y).height(b),C.select(".nv-barsWrap").datum(u.filter((function(t){return!t.disabled}))).transition().call(n),A.append("clipPath").attr("id","nv-x-label-clip-"+n.id()).append("rect"),C.select("#nv-x-label-clip-"+n.id()+" rect").attr("width",t.rangeBand()*(p?2:1)).attr("height",16).attr("x",-t.rangeBand()/(p?1:2)),c){i.scale(t).ticks(r.utils.calcTicksX(y/100,u)).tickSize(-b,0),C.select(".nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),C.select(".nv-x.nv-axis").call(i);var S=C.select(".nv-x.nv-axis").selectAll("g");p&&S.selectAll("text").attr("transform",(function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"}))}d&&(o.scale(e).ticks(Math.floor(b/36)).tickSize(-y,0),C.select(".nv-y.nv-axis").call(o)),C.select(".nv-zeroLine line").attr("x1",0).attr("x2",y).attr("y1",e(0)).attr("y2",e(0))})),y.renderEnd("nv-boxplot chart immediate"),x}return n.dispatch.on("elementMouseover.tooltip",(function(t){h.data(t).hidden(!1)})),n.dispatch.on("elementMouseout.tooltip",(function(t){h.data(t).hidden(!0)})),n.dispatch.on("elementMousemove.tooltip",(function(t){h()})),x.dispatch=g,x.boxplot=n,x.xAxis=i,x.yAxis=o,x.tooltip=h,x.options=r.utils.optionsFunc.bind(x),x._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},staggerLabels:{get:function(){return p},set:function(t){p=t}},showXAxis:{get:function(){return c},set:function(t){c=t}},showYAxis:{get:function(){return d},set:function(t){d=t}},tooltipContent:{get:function(){return h},set:function(t){h=t}},noData:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},duration:{get:function(){return m},set:function(t){m=t,y.reset(m),n.duration(m),i.duration(m),o.duration(m)}},color:{get:function(){return u},set:function(t){u=r.utils.getColor(t),n.color(u)}},rightAlignYAxis:{get:function(){return f},set:function(t){f=t,o.orient(t?"right":"left")}}}),r.utils.inheritOptions(x,n),r.utils.initOptions(x),x},r.models.bullet=function(){"use strict";var t={top:0,right:0,bottom:0,left:0},e="left",n=!1,i=function(t){return t.ranges},o=function(t){return t.markers?t.markers:[]},a=function(t){return t.markerLines?t.markerLines:[0]},s=function(t){return t.measures},l=function(t){return t.rangeLabels?t.rangeLabels:[]},u=function(t){return t.markerLabels?t.markerLabels:[]},c=function(t){return t.markerLineLabels?t.markerLineLabels:[]},d=function(t){return t.measureLabels?t.measureLabels:[]},f=[0],p=380,h=30,v=null,g=null,m=r.utils.getColor(["#1f77b4"]),y=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),x=["Maximum","Mean","Minimum"],b=["Max","Avg","Min"],k=1e3;function w(t,e){var n=t.slice();t.sort((function(t,r){var i=n.indexOf(t),o=n.indexOf(r);return d3.descending(e[i],e[o])}))}function M(e){return e.each((function(e,g){var M=p-t.left-t.right,A=h-t.top-t.bottom;v=d3.select(this),r.utils.initSVG(v);var C=i.call(this,e,g).slice(),S=o.call(this,e,g).slice(),W=a.call(this,e,g).slice(),F=s.call(this,e,g).slice(),E=l.call(this,e,g).slice(),O=u.call(this,e,g).slice(),D=c.call(this,e,g).slice(),N=d.call(this,e,g).slice();w(E,C),w(O,S),w(D,W),w(N,F),C.sort(d3.descending),S.sort(d3.descending),W.sort(d3.descending),F.sort(d3.descending);var _=d3.scale.linear().domain(d3.extent(d3.merge([f,C]))).range(n?[M,0]:[0,M]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(_.range()),this.__chart__=_,d3.min(C),d3.max(C),C[1];for(var T=v.selectAll("g.nv-wrap.nv-bullet").data([e]),L=T.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),B=T.select("g"),P=(g=0,C.length);g<P;g++){var I="nv-range nv-range"+g;g<=2&&(I=I+" nv-range"+b[g]),L.append("rect").attr("class",I)}L.append("rect").attr("class","nv-measure"),T.attr("transform","translate("+t.left+","+t.top+")");var z=function(t){return Math.abs(_(t)-_(0))},V=function(t){return _(t<0?t:0)};for(g=0,P=C.length;g<P;g++){var j=C[g];B.select("rect.nv-range"+g).datum(j).attr("height",A).transition().duration(k).attr("width",z(j)).attr("x",V(j))}B.select("rect.nv-measure").style("fill",m).attr("height",A/3).attr("y",A/3).on("mouseover",(function(){y.elementMouseover({value:F[0],label:N[0]||"Current",color:d3.select(this).style("fill")})})).on("mousemove",(function(){y.elementMousemove({value:F[0],label:N[0]||"Current",color:d3.select(this).style("fill")})})).on("mouseout",(function(){y.elementMouseout({value:F[0],label:N[0]||"Current",color:d3.select(this).style("fill")})})).transition().duration(k).attr("width",F<0?_(0)-_(F[0]):_(F[0])-_(0)).attr("x",V(F));var G=A/6,H=S.map((function(t,e){return{value:t,label:O[e]}}));L.selectAll("path.nv-markerTriangle").data(H).enter().append("path").attr("class","nv-markerTriangle").attr("d","M0,"+G+"L"+G+","+-G+" "+-G+","+-G+"Z").on("mouseover",(function(t){y.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[_(t.value),A/2]})})).on("mousemove",(function(t){y.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){y.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})})),B.selectAll("path.nv-markerTriangle").data(H).transition().duration(k).attr("transform",(function(t){return"translate("+_(t.value)+","+A/2+")"}));var Y=W.map((function(t,e){return{value:t,label:D[e]}}));L.selectAll("line.nv-markerLine").data(Y).enter().append("line").attr("cursor","").attr("class","nv-markerLine").attr("x1",(function(t){return _(t.value)})).attr("y1","2").attr("x2",(function(t){return _(t.value)})).attr("y2",A-2).on("mouseover",(function(t){y.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[_(t.value),A/2]})})).on("mousemove",(function(t){y.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){y.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})})),B.selectAll("line.nv-markerLine").data(Y).transition().duration(k).attr("x1",(function(t){return _(t.value)})).attr("x2",(function(t){return _(t.value)})),T.selectAll(".nv-range").on("mouseover",(function(t,e){var n=E[e]||x[e];y.elementMouseover({value:t,label:n,color:d3.select(this).style("fill")})})).on("mousemove",(function(){y.elementMousemove({value:F[0],label:N[0]||"Previous",color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){var n=E[e]||x[e];y.elementMouseout({value:t,label:n,color:d3.select(this).style("fill")})}))})),M}return M.dispatch=y,M.options=r.utils.optionsFunc.bind(M),M._options=Object.create({},{ranges:{get:function(){return i},set:function(t){i=t}},markers:{get:function(){return o},set:function(t){o=t}},measures:{get:function(){return s},set:function(t){s=t}},forceX:{get:function(){return f},set:function(t){f=t}},width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return h},set:function(t){h=t}},tickFormat:{get:function(){return g},set:function(t){g=t}},duration:{get:function(){return k},set:function(t){k=t}},margin:{get:function(){return t},set:function(e){t.top=void 0!==e.top?e.top:t.top,t.right=void 0!==e.right?e.right:t.right,t.bottom=void 0!==e.bottom?e.bottom:t.bottom,t.left=void 0!==e.left?e.left:t.left}},orient:{get:function(){return e},set:function(t){n="right"==(e=t)||"bottom"==e}},color:{get:function(){return m},set:function(t){m=r.utils.getColor(t)}}}),r.utils.initOptions(M),M},r.models.bulletChart=function(){"use strict";var t=r.models.bullet(),e=r.models.tooltip(),n="left",i=!1,o={top:5,right:40,bottom:20,left:120},a=function(t){return t.ranges},s=function(t){return t.markers?t.markers:[]},l=function(t){return t.measures},u=null,c=55,d=null,f=null,p=null,h=d3.dispatch();function v(e){return e.each((function(n,p){var h=d3.select(this);r.utils.initSVG(h);var g=r.utils.availableWidth(u,h,o),m=c-o.top-o.bottom;if(v.update=function(){v(e)},v.container=this,!n||!a.call(this,n,p))return r.utils.noData(v,h),v;h.selectAll(".nv-noData").remove();var y=a.call(this,n,p).slice().sort(d3.descending),x=s.call(this,n,p).slice().sort(d3.descending),b=l.call(this,n,p).slice().sort(d3.descending),k=h.selectAll("g.nv-wrap.nv-bulletChart").data([n]),w=k.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),M=k.select("g");w.append("g").attr("class","nv-bulletWrap"),w.append("g").attr("class","nv-titles"),k.attr("transform","translate("+o.left+","+o.top+")");var A=d3.scale.linear().domain([0,Math.max(y[0],x[0]||0,b[0])]).range(i?[g,0]:[0,g]),C=this.__chart__||d3.scale.linear().domain([0,1/0]).range(A.range());this.__chart__=A;var S=w.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(c-o.top-o.bottom)/2+")");S.append("text").attr("class","nv-title").text((function(t){return t.title})),S.append("text").attr("class","nv-subtitle").attr("dy","1em").text((function(t){return t.subtitle})),t.width(g).height(m);var W=M.select(".nv-bulletWrap");d3.transition(W).call(t);var F=d||A.tickFormat(g/100),E=M.selectAll("g.nv-tick").data(A.ticks(f||g/50),(function(t){return this.textContent||F(t)})),O=E.enter().append("g").attr("class","nv-tick").attr("transform",(function(t){return"translate("+C(t)+",0)"})).style("opacity",1e-6);O.append("line").attr("y1",m).attr("y2",7*m/6),O.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*m/6).text(F);var D=d3.transition(E).transition().duration(t.duration()).attr("transform",(function(t){return"translate("+A(t)+",0)"})).style("opacity",1);D.select("line").attr("y1",m).attr("y2",7*m/6),D.select("text").attr("y",7*m/6),d3.transition(E.exit()).transition().duration(t.duration()).attr("transform",(function(t){return"translate("+A(t)+",0)"})).style("opacity",1e-6).remove()})),d3.timer.flush(),v}return e.duration(0).headerEnabled(!1),t.dispatch.on("elementMouseover.tooltip",(function(t){t.series={key:t.label,value:t.value,color:t.color},e.data(t).hidden(!1)})),t.dispatch.on("elementMouseout.tooltip",(function(t){e.hidden(!0)})),t.dispatch.on("elementMousemove.tooltip",(function(t){e()})),v.bullet=t,v.dispatch=h,v.tooltip=e,v.options=r.utils.optionsFunc.bind(v),v._options=Object.create({},{ranges:{get:function(){return a},set:function(t){a=t}},markers:{get:function(){return s},set:function(t){s=t}},measures:{get:function(){return l},set:function(t){l=t}},width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},tickFormat:{get:function(){return d},set:function(t){d=t}},ticks:{get:function(){return f},set:function(t){f=t}},noData:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},orient:{get:function(){return n},set:function(t){i="right"==(n=t)||"bottom"==n}}}),r.utils.inheritOptions(v,t),r.utils.initOptions(v),v},r.models.candlestickBar=function(){"use strict";var t,e,n,i,o,a={top:0,right:0,bottom:0,left:0},s=null,l=null,u=Math.floor(1e4*Math.random()),c=d3.scale.linear(),d=d3.scale.linear(),f=function(t){return t.x},p=function(t){return t.y},h=function(t){return t.open},v=function(t){return t.close},g=function(t){return t.high},m=function(t){return t.low},y=[],x=[],b=!1,k=!0,w=r.utils.defaultColor(),M=!1,A=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function C(w){return w.each((function(w){t=d3.select(this);var M=r.utils.availableWidth(s,t,a),C=r.utils.availableHeight(l,t,a);r.utils.initSVG(t);var S=M/w[0].values.length*.45;c.domain(e||d3.extent(w[0].values.map(f).concat(y))),b?c.range(i||[.5*M/w[0].values.length,M*(w[0].values.length-.5)/w[0].values.length]):c.range(i||[5+S/2,M-S/2-5]),d.domain(n||[d3.min(w[0].values.map(m).concat(x)),d3.max(w[0].values.map(g).concat(x))]).range(o||[C,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1]));var W=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([w[0].values]),F=W.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),E=F.append("defs"),O=F.append("g"),D=W.select("g");O.append("g").attr("class","nv-ticks"),W.attr("transform","translate("+a.left+","+a.top+")"),t.on("click",(function(t,e){A.chartClick({data:t,index:e,pos:d3.event,id:u})})),E.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),W.select("#nv-chart-clip-path-"+u+" rect").attr("width",M).attr("height",C),D.attr("clip-path",k?"url(#nv-chart-clip-path-"+u+")":"");var N=W.select(".nv-ticks").selectAll(".nv-tick").data((function(t){return t}));N.exit().remove();var _=N.enter().append("g");N.attr("class",(function(t,e,n){return(h(t,e)>v(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e})),_.append("line").attr("class","nv-candlestick-lines").attr("transform",(function(t,e){return"translate("+c(f(t,e))+",0)"})).attr("x1",0).attr("y1",(function(t,e){return d(g(t,e))})).attr("x2",0).attr("y2",(function(t,e){return d(m(t,e))})),_.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",(function(t,e){return"translate("+(c(f(t,e))-S/2)+","+(d(p(t,e))-(h(t,e)>v(t,e)?d(v(t,e))-d(h(t,e)):0))+")"})).attr("x",0).attr("y",0).attr("width",S).attr("height",(function(t,e){var n=h(t,e),r=v(t,e);return n>r?d(r)-d(n):d(n)-d(r)})),N.select(".nv-candlestick-lines").transition().attr("transform",(function(t,e){return"translate("+c(f(t,e))+",0)"})).attr("x1",0).attr("y1",(function(t,e){return d(g(t,e))})).attr("x2",0).attr("y2",(function(t,e){return d(m(t,e))})),N.select(".nv-candlestick-rects").transition().attr("transform",(function(t,e){return"translate("+(c(f(t,e))-S/2)+","+(d(p(t,e))-(h(t,e)>v(t,e)?d(v(t,e))-d(h(t,e)):0))+")"})).attr("x",0).attr("y",0).attr("width",S).attr("height",(function(t,e){var n=h(t,e),r=v(t,e);return n>r?d(r)-d(n):d(n)-d(r)}))})),C}return C.highlightPoint=function(e,n){C.clearHighlights(),t.select(".nv-candlestickBar .nv-tick-0-"+e).classed("hover",n)},C.clearHighlights=function(){t.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},C.dispatch=A,C.options=r.utils.optionsFunc.bind(C),C._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceX:{get:function(){return y},set:function(t){y=t}},forceY:{get:function(){return x},set:function(t){x=t}},padData:{get:function(){return b},set:function(t){b=t}},clipEdge:{get:function(){return k},set:function(t){k=t}},id:{get:function(){return u},set:function(t){u=t}},interactive:{get:function(){return M},set:function(t){M=t}},x:{get:function(){return f},set:function(t){f=t}},y:{get:function(){return p},set:function(t){p=t}},open:{get:function(){return h()},set:function(t){h=t}},close:{get:function(){return v()},set:function(t){v=t}},high:{get:function(){return g},set:function(t){g=t}},low:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return a},set:function(t){a.top=null!=t.top?t.top:a.top,a.right=null!=t.right?t.right:a.right,a.bottom=null!=t.bottom?t.bottom:a.bottom,a.left=null!=t.left?t.left:a.left}},color:{get:function(){return w},set:function(t){w=r.utils.getColor(t)}}}),r.utils.initOptions(C),C},r.models.cumulativeLineChart=function(){"use strict";var t,e,n=r.models.line(),i=r.models.axis(),o=r.models.axis(),a=r.models.legend(),s=r.models.legend(),l=r.interactiveGuideline(),u=r.models.tooltip(),c={top:30,right:30,bottom:50,left:60},d=null,f=r.utils.defaultColor(),p=null,h=null,v=!0,g=!0,m=!0,y=!1,x=!0,b=!1,k=!0,w=n.id(),M=r.utils.state(),A=null,C=null,S=function(t){return t.average},W=d3.dispatch("stateChange","changeState","renderEnd"),F=250,E=!1;M.index=0,M.rescaleY=k,i.orient("bottom").tickPadding(7),o.orient(y?"right":"left"),u.valueFormatter((function(t,e){return o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)})),s.updateState(!1);var O,D=d3.scale.linear(),N={i:0,x:0},_=r.utils.renderWatch(W,F);function T(u){return _.reset(),_.models(n),g&&_.models(i),m&&_.models(o),u.each((function(u){var C=d3.select(this);r.utils.initSVG(C),C.classed("nv-chart-"+w,!0);var _,P=r.utils.availableWidth(p,C,c),I=r.utils.availableHeight(h,C,c);if(T.update=function(){0===F?C.call(T):C.transition().duration(F).call(T)},T.container=this,M.setter(function(t){return function(e){void 0!==e.index&&(N.i=e.index),void 0!==e.rescaleY&&(k=e.rescaleY),void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(u),T.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled})),index:N.i,rescaleY:k}}}(u)).update(),M.disabled=u.map((function(t){return!!t.disabled})),!A)for(_ in A={},M)M[_]instanceof Array?A[_]=M[_].slice(0):A[_]=M[_];var z=d3.behavior.drag().on("dragstart",(function(t,e){d3.select(T.container).style("cursor","ew-resize")})).on("drag",(function(t,e){N.x=d3.event.x,N.i=Math.round(D.invert(N.x)),Q()})).on("dragend",(function(t,e){d3.select(T.container).style("cursor","auto"),M.index=N.i,W.stateChange(M)}));if(!(u&&u.length&&u.filter((function(t){return t.values.length})).length))return r.utils.noData(T,C),T;C.selectAll(".nv-noData").remove(),t=n.xScale(),e=n.yScale(),D.domain([0,u[0].values.length-1]).range([0,P]).clamp(!0),u=function(t,e){return L||(L=n.y()),e.map((function(e,n){if(!e.values)return e;var r=e.values[t];if(null==r)return e;var i=L(r,t);return Math.abs(i)<1e-5&&!E?(e.tempDisabled=!0,e):(e.tempDisabled=!1,e.values=e.values.map((function(t,e){return t.display={y:(L(t,e)-i)/i},t})),e)}))}(N.i,u),void 0===O&&(O=B(u)),k?n.yDomain(null):(n.yDomain(O),n.clipEdge(!0));var V=b?"none":"all",j=C.selectAll("g.nv-wrap.nv-cumulativeLine").data([u]),G=j.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),H=j.select("g");if(G.append("g").attr("class","nv-interactive"),G.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),G.append("g").attr("class","nv-y nv-axis"),G.append("g").attr("class","nv-background"),G.append("g").attr("class","nv-linesWrap").style("pointer-events",V),G.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),G.append("g").attr("class","nv-legendWrap"),G.append("g").attr("class","nv-controlsWrap"),v?(a.width(P),H.select(".nv-legendWrap").datum(u).call(a),d||a.height()===c.top||(c.top=a.height(),I=r.utils.availableHeight(h,C,c)),H.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")):H.select(".nv-legendWrap").selectAll("*").remove(),x){var Y=[{key:"Re-scale y-axis",disabled:!k}];s.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),H.select(".nv-controlsWrap").datum(Y).attr("transform","translate(0,"+-c.top+")").call(s)}else H.select(".nv-controlsWrap").selectAll("*").remove();j.attr("transform","translate("+c.left+","+c.top+")"),y&&H.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)");var R=u.filter((function(t){return t.tempDisabled}));j.select(".tempDisabled").remove(),R.length&&j.append("text").attr("class","tempDisabled").attr("x",P/2).attr("y","-.71em").style("text-anchor","end").text(R.map((function(t){return t.key})).join(", ")+" values cannot be calculated for this time period."),b&&(l.width(P).height(I).margin({left:c.left,top:c.top}).svgContainer(C).xScale(t),j.select(".nv-interactive").call(l)),G.select(".nv-background").append("rect"),H.select(".nv-background rect").attr("width",P).attr("height",I),n.y((function(t){return t.display.y})).width(P).height(I).color(u.map((function(t,e){return t.color||f(t,e)})).filter((function(t,e){return!u[e].disabled&&!u[e].tempDisabled})));var X=H.select(".nv-linesWrap").datum(u.filter((function(t){return!t.disabled&&!t.tempDisabled})));X.call(n),u.forEach((function(t,e){t.seriesIndex=e}));var q=u.filter((function(t){return!t.disabled&&!!S(t)})),Z=H.select(".nv-avgLinesWrap").selectAll("line").data(q,(function(t){return t.key})),K=function(t){var n=e(S(t));return n<0?0:n>I?I:n};Z.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",(function(t,e){return n.color()(t,t.seriesIndex)})).attr("x1",0).attr("x2",P).attr("y1",K).attr("y2",K),Z.style("stroke-opacity",(function(t){var n=e(S(t));return n<0||n>I?0:1})).attr("x1",0).attr("x2",P).attr("y1",K).attr("y2",K),Z.exit().remove();var U=X.selectAll(".nv-indexLine").data([N]);function Q(){U.data([N]);var t=T.duration();T.duration(0),T.update(),T.duration(t)}U.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(z),U.attr("transform",(function(t){return"translate("+D(t.i)+",0)"})).attr("height",I),g&&(i.scale(t)._ticks(r.utils.calcTicksX(P/70,u)).tickSize(-I,0),H.select(".nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),H.select(".nv-x.nv-axis").call(i)),m&&(o.scale(e)._ticks(r.utils.calcTicksY(I/36,u)).tickSize(-P,0),H.select(".nv-y.nv-axis").call(o)),H.select(".nv-background rect").on("click",(function(){N.x=d3.mouse(this)[0],N.i=Math.round(D.invert(N.x)),M.index=N.i,W.stateChange(M),Q()})),n.dispatch.on("elementClick",(function(t){N.i=t.pointIndex,N.x=D(N.i),M.index=N.i,W.stateChange(M),Q()})),s.dispatch.on("legendClick",(function(t,e){t.disabled=!t.disabled,k=!t.disabled,M.rescaleY=k,k||(O=B(u)),W.stateChange(M),T.update()})),a.dispatch.on("stateChange",(function(t){for(var e in t)M[e]=t[e];W.stateChange(M),T.update()})),l.dispatch.on("elementMousemove",(function(t){n.clearHighlights();var e,a,s,c=[];if(u.filter((function(t,e){return t.seriesIndex=e,!(t.disabled||t.tempDisabled)})).forEach((function(i,o){a=r.interactiveBisect(i.values,t.pointXValue,T.x()),n.highlightPoint(o,a,!0);var l=i.values[a];void 0!==l&&(void 0===e&&(e=l),void 0===s&&(s=T.xScale()(T.x()(l,a))),c.push({key:i.key,value:T.y()(l,a),color:f(i,i.seriesIndex)}))})),c.length>2){var d=T.yScale().invert(t.mouseY),p=.03*Math.abs(T.yScale().domain()[0]-T.yScale().domain()[1]),h=r.nearestValueIndex(c.map((function(t){return t.value})),d,p);null!==h&&(c[h].highlight=!0)}var v=i.tickFormat()(T.x()(e,a),a);l.tooltip.valueFormatter((function(t,e){return o.tickFormat()(t)})).data({value:v,series:c})(),l.renderGuideLine(s)})),l.dispatch.on("elementMouseout",(function(t){n.clearHighlights()})),W.on("changeState",(function(t){void 0!==t.disabled&&(u.forEach((function(e,n){e.disabled=t.disabled[n]})),M.disabled=t.disabled),void 0!==t.index&&(N.i=t.index,N.x=D(N.i),M.index=t.index,U.data([N])),void 0!==t.rescaleY&&(k=t.rescaleY),T.update()}))})),_.renderEnd("cumulativeLineChart immediate"),T}n.dispatch.on("elementMouseover.tooltip",(function(t){var e={x:T.x()(t.point),y:T.y()(t.point),color:t.point.color};t.point=e,u.data(t).hidden(!1)})),n.dispatch.on("elementMouseout.tooltip",(function(t){u.hidden(!0)}));var L=null;function B(t){var e=t.filter((function(t){return!(t.disabled||t.tempDisabled)})).map((function(t,e){return d3.extent(t.values,(function(t){return t.display.y}))}));return[d3.min(e,(function(t){return t[0]})),d3.max(e,(function(t){return t[1]}))]}return T.dispatch=W,T.lines=n,T.legend=a,T.controls=s,T.xAxis=i,T.yAxis=o,T.interactiveLayer=l,T.state=M,T.tooltip=u,T.options=r.utils.optionsFunc.bind(T),T._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return h},set:function(t){h=t}},showControls:{get:function(){return x},set:function(t){x=t}},showLegend:{get:function(){return v},set:function(t){v=t}},average:{get:function(){return S},set:function(t){S=t}},defaultState:{get:function(){return A},set:function(t){A=t}},noData:{get:function(){return C},set:function(t){C=t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return m},set:function(t){m=t}},noErrorCheck:{get:function(){return E},set:function(t){E=t}},rescaleY:{get:function(){return k},set:function(t){k=t,T.state.rescaleY=t}},margin:{get:function(){return c},set:function(t){void 0!==t.top&&(c.top=t.top,d=t.top),c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},color:{get:function(){return f},set:function(t){f=r.utils.getColor(t),a.color(f)}},useInteractiveGuideline:{get:function(){return b},set:function(t){b=t,!0===t&&(T.interactive(!1),T.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return y},set:function(t){y=t,o.orient(t?"right":"left")}},duration:{get:function(){return F},set:function(t){F=t,n.duration(F),i.duration(F),o.duration(F),_.reset(F)}}}),r.utils.inheritOptions(T,n),r.utils.initOptions(T),T},r.models.differenceChart=function(){"use strict";var t=void 0,e=r.models.multiChart(),n=r.models.focus(r.models.line()),i=function(t){return void 0!==t.y0?t.y0:t.y},o=function(t){return t.x},a="x",s=function(t){return t.y},l=null,u=null,c=null,d=null,f={top:30,right:50,bottom:20,left:70},p={top:0,right:0,bottom:0,left:0},h=!0,v="linear",g=1,m=d3.time.scale(),y=d3.time.format.multi([["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",function(){return!0}]]);function x(o){o.each((function(o){t=d3.select(this);var a=(o||[]).filter((function(t){return!t.disabled}));if(!o||!a.length)return r.utils.noData(x,t),x;var s=b(o),h=r.utils.availableHeight(c,t,f)-n.height(),g=r.utils.availableWidth(d,t,f);t.attr("class","nv-differenceChart"),r.utils.initSVG(t),x.container=this,e.margin(f).color(d3.scale.category10().range()).y(i).width(d).height(h).interpolate(v).useInteractiveGuideline(!0),e.interactiveLayer.tooltip.valueFormatter((function(t,e,n){if(n.key===u||n.key===l){var r=Math.abs(n.data.y0-n.data.y1);return 0===r?"-":r}return t})),e.stack1.areaY1((function(t){return e.stack1.scatter.yScale()(t.display.y)})),e.stack1.transformData((function(t){t.display={y:t.y1,y0:t.y0}})),e.xAxis.scale(m),e.xAxis.tickFormat(y);var k=s.filter((function(t){return!t.disabled})).map((function(t){return t.values})),w=d3.extent(d3.merge(k),(function(t){return function(t){return t.x}(t)}));e.xAxis.domain(w).range([0,g]);var M=d3.extent(d3.merge(k),(function(t){return i(t)}));return e.yDomain1(M),e.yAxis1.tickFormat(d3.format(",.1f")),e.yAxis2.tickFormat(d3.format(",.1f")),n.width(g),n.margin(p),n.xScale(m.copy()),n.xAxis.tickFormat(y),n.xAxis.rotateLabels(0),t.append("g").attr("class","nv-focusWrap").style("display","initial").attr("transform","translate("+f.left+", "+(h+n.margin().top)+")").datum(s.filter((function(t){return"line"===t.type}))).call(n),t.datum(s).call(e),n.dispatch.on("onBrush",(function(n){var r=s.map((function(t){var e=-1,r=-1;t.values.some((function(t,i){return-1===e&&t.x>=n[0]&&(e=i),-1===r&&t.x>=n[1]&&(r=i,!0)}));for(var i=t.values.slice(e,r),o=0;i.length<2&&o<5;)e-=1,r+=1,i=t.values.slice(e,r),o++;return Object.assign({},t,{values:i})}));t.datum(r),e.xAxis.domain(n),e.update()})),x.update=function(){t.selectAll("*").remove(),t.transition().duration(300).call(x)},x}))}function b(t){var e=t.slice(0),n=e.every((function(t){return t.processed})),r=e.filter((function(t){return"actual"===t.type})),i=e.filter((function(t){return"expected"===t.type}));if(n)return e;if(!r.length||!i.length)return[];var c=i[0].key+" minus "+r[0].key+" (Predicted > Actual)",d=i[0].key+" minus "+r[0].key+" (Predicted < Actual)",f=[{key:l||c,type:"area",values:[],yAxis:1,color:"rgba(44,160,44,.9)",processed:!0,noHighlightSeries:!0},{key:u||d,type:"area",values:[],yAxis:1,color:"rgba(234,39,40,.9)",processed:!0,noHighlightSeries:!0},{key:r[0].key,type:"line",values:[],yAxis:1,color:"#666666",processed:!0,strokeWidth:g}];h&&(f[3]={key:i[0].key,type:"line",values:[],yAxis:1,color:"#aec7e8",processed:!0,strokeWidth:g});var p=r[0].values.reduce((function(t,e,n){return t[o(e)]=s(e),t}),{}),v=i[0].values.reduce((function(t,e,n){return t[o(e)]=s(e),t}),{});return Object.keys(p).forEach((function(t,e){var n=p[t],r=v[t],i={};i[a]=t;var s=o(i),l=r-n;isNaN(l)?(f[1].values[e]={x:s,y0:n,y1:n},f[0].values[e]={x:s,y0:n,y1:n}):l<0?(f[1].values[e]={x:s,y0:n,y1:r},f[0].values[e]={x:s,y0:n,y1:n}):(f[0].values[e]={x:s,y0:n,y1:r},f[1].values[e]={x:s,y0:n,y1:n}),f[2].values[e]={x:s,y:n},h&&(f[3].values[e]={x:s,y:r})})),f}return x.options=r.utils.optionsFunc.bind(x),x._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return c},set:function(t){c=t}},strokeWidth:{get:function(){return g},set:function(t){g=t}},x:{get:function(){return o},set:function(t){o=t}},keyForXValue:{get:function(){return a},set:function(t){a=t}},y:{get:function(){return s},set:function(t){s=t}},xScale:{get:function(){return m},set:function(t){m=t}},keyForActualLessThanPredicted:{get:function(){return l},set:function(t){l=t}},keyForActualGreaterThanPredicted:{get:function(){return u},set:function(t){u=t}},showPredictedLine:{get:function(){return h},set:function(t){h=t}},tickFormat:{get:function(){return y},set:function(t){y=t}},interpolate:{get:function(){return v},set:function(t){v=t}},focusMargin:{get:function(){return p},set:function(t){p.top=void 0!==t.top?t.top:p.top,p.right=void 0!==t.right?t.right:p.right,p.bottom=void 0!==t.bottom?t.bottom:p.bottom,p.left=void 0!==t.left?t.left:p.left}},margin:{get:function(){return f},set:function(t){f.top=void 0!==t.top?t.top:f.top,f.right=void 0!==t.right?t.right:f.right,f.bottom=void 0!==t.bottom?t.bottom:f.bottom,f.left=void 0!==t.left?t.left:f.left}}}),x.xAxis=e.xAxis,x.yAxis=e.yAxis1,x.multiChart=e,x.focus=n,x.processData=b,r.utils.inheritOptions(x,e),r.utils.initOptions(x),x},r.models.discreteBar=function(){"use strict";var t,e,n,i,o,a,s,l={top:0,right:0,bottom:0,left:0},u=960,c=500,d=Math.floor(1e4*Math.random()),f=d3.scale.ordinal(),p=d3.scale.linear(),h=function(t){return t.x},v=function(t){return t.y},g=[0],m=r.utils.defaultColor(),y=0,x=!1,b=d3.format(",.2f"),k=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),w="discreteBar",M=250,A=r.utils.renderWatch(k,M);function C(d){return A.reset(),d.each((function(d){var M=u-l.left-l.right,C=c-l.top-l.bottom;t=d3.select(this),r.utils.initSVG(t),d.forEach((function(t,e){t.values.forEach((function(t){t.series=e}))}));var S=e&&n?[]:d.map((function(t){return t.values.map((function(t,e){return{x:h(t,e),y:v(t,e),y0:t.y0}}))}));f.domain(e||d3.merge(S).map((function(t){return t.x}))).rangeBands(i||[0,M],.1),p.domain(n||d3.extent(d3.merge(S).map((function(t){return t.y})).concat(g))),x?p.range(o||[C-(p.domain()[0]<0?12:0),p.domain()[1]>0?12:0]):p.range(o||[C,0]),a=a||f,s=s||p.copy().range([p(0),p(0)]);var W=t.selectAll("g.nv-wrap.nv-discretebar").data([d]),F=W.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");W.select("g"),F.append("g").attr("class","nv-groups"),W.attr("transform","translate("+l.left+","+l.top+")");var E=W.select(".nv-groups").selectAll(".nv-group").data((function(t){return t}),(function(t){return t.key}));E.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),E.exit().watchTransition(A,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),E.attr("class",(function(t,e){return"nv-group nv-series-"+e})).classed("hover",(function(t){return t.hover})),E.watchTransition(A,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var O=E.selectAll("g.nv-bar").data((function(t){return t.values}));O.exit().remove();var D=O.enter().append("g").attr("transform",(function(t,e,n){return"translate("+(f(h(t,e))+.05*f.rangeBand())+", "+p(0)+")"})).on("mouseover",(function(t,e){d3.select(this).classed("hover",!0),k.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){d3.select(this).classed("hover",!1),k.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})})).on("mousemove",(function(t,e){k.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})})).on("click",(function(t,e){k.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()})).on("dblclick",(function(t,e){k.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}));D.append("rect").attr("height",0).attr("width",.9*f.rangeBand()/d.length),x?(D.append("text").attr("text-anchor","middle"),O.select("text").text((function(t,e){return b(v(t,e))})).watchTransition(A,"discreteBar: bars text").attr("x",.9*f.rangeBand()/2).attr("y",(function(t,e){return v(t,e)<0?p(v(t,e))-p(0)+12:-4}))):O.selectAll("text").remove(),O.attr("class",(function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"})).style("fill",(function(t,e){return t.color||m(t,e)})).style("stroke",(function(t,e){return t.color||m(t,e)})).select("rect").attr("rx",y).attr("class",w).watchTransition(A,"discreteBar: bars rect").attr("width",.9*f.rangeBand()/d.length),O.watchTransition(A,"discreteBar: bars").attr("transform",(function(t,e){return"translate("+(f(h(t,e))+.05*f.rangeBand())+", "+(v(t,e)<0?p(0):p(0)-p(v(t,e))<1?p(0)-1:p(v(t,e)))+")"})).select("rect").attr("height",(function(t,e){return Math.max(Math.abs(p(v(t,e))-p(0)),1)})),a=f.copy(),s=p.copy()})),A.renderEnd("discreteBar immediate"),C}return C.dispatch=k,C.options=r.utils.optionsFunc.bind(C),C._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},forceY:{get:function(){return g},set:function(t){g=t}},showValues:{get:function(){return x},set:function(t){x=t}},cornerRadius:{get:function(){return y},set:function(t){y=t}},x:{get:function(){return h},set:function(t){h=t}},y:{get:function(){return v},set:function(t){v=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return p},set:function(t){p=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},valueFormat:{get:function(){return b},set:function(t){b=t}},id:{get:function(){return d},set:function(t){d=t}},rectClass:{get:function(){return w},set:function(t){w=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},color:{get:function(){return m},set:function(t){m=r.utils.getColor(t)}},duration:{get:function(){return M},set:function(t){M=t,A.reset(M)}}}),r.utils.initOptions(C),C},r.models.discreteBarChart=function(){"use strict";var t,e,n=r.models.discreteBar(),i=r.models.axis(),o=r.models.axis(),a=r.models.legend(),s=r.models.tooltip(),l={top:15,right:10,bottom:50,left:60},u=null,c=null,d=null,f=r.utils.getColor(),p=!1,h=!0,v=!0,g=!1,m=!1,y=!1,x=0,b=null,k=d3.dispatch("beforeUpdate","renderEnd"),w=250;i.orient("bottom").showMaxMin(!1).tickFormat((function(t){return t})),o.orient(g?"right":"left").tickFormat(d3.format(",.1f")),s.duration(0).headerEnabled(!1).valueFormatter((function(t,e){return o.tickFormat()(t,e)})).keyFormatter((function(t,e){return i.tickFormat()(t,e)}));var M=r.utils.renderWatch(k,w);function A(s){return M.reset(),M.models(n),h&&M.models(i),v&&M.models(o),s.each((function(s){var f=d3.select(this);r.utils.initSVG(f);var b=r.utils.availableWidth(c,f,l),M=r.utils.availableHeight(d,f,l);if(A.update=function(){k.beforeUpdate(),f.transition().duration(w).call(A)},A.container=this,!(s&&s.length&&s.filter((function(t){return t.values.length})).length))return r.utils.noData(A,f),A;f.selectAll(".nv-noData").remove(),t=n.xScale(),e=n.yScale().clamp(!0);var C=f.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([s]),S=C.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),W=S.append("defs"),F=C.select("g");if(S.append("g").attr("class","nv-x nv-axis"),S.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),S.append("g").attr("class","nv-barsWrap"),S.append("g").attr("class","nv-legendWrap"),F.attr("transform","translate("+l.left+","+l.top+")"),p?(a.width(b),F.select(".nv-legendWrap").datum(s).call(a),u||a.height()===l.top||(l.top=a.height(),M=r.utils.availableHeight(d,f,l)),C.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")):F.select(".nv-legendWrap").selectAll("*").remove(),g&&F.select(".nv-y.nv-axis").attr("transform","translate("+b+",0)"),n.width(b).height(M),F.select(".nv-barsWrap").datum(s.filter((function(t){return!t.disabled}))).transition().call(n),W.append("clipPath").attr("id","nv-x-label-clip-"+n.id()).append("rect"),F.select("#nv-x-label-clip-"+n.id()+" rect").attr("width",t.rangeBand()*(m?2:1)).attr("height",16).attr("x",-t.rangeBand()/(m?1:2)),h){i.scale(t)._ticks(r.utils.calcTicksX(b/100,s)).tickSize(-M,0),F.select(".nv-x.nv-axis").attr("transform","translate(0,"+(e.range()[0]+(n.showValues()&&e.domain()[0]<0?16:0))+")"),F.select(".nv-x.nv-axis").call(i);var E=F.select(".nv-x.nv-axis").selectAll("g");m&&E.selectAll("text").attr("transform",(function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})),x&&E.selectAll(".tick text").attr("transform","rotate("+x+" 0,0)").style("text-anchor",x>0?"start":"end"),y&&F.selectAll(".tick text").call(r.utils.wrapTicks,A.xAxis.rangeBand())}v&&(o.scale(e)._ticks(r.utils.calcTicksY(M/36,s,n.y())).tickSize(-b,0),F.select(".nv-y.nv-axis").call(o)),F.select(".nv-zeroLine line").attr("x1",0).attr("x2",g?-b:b).attr("y1",e(0)).attr("y2",e(0))})),M.renderEnd("discreteBar chart immediate"),A}return n.dispatch.on("elementMouseover.tooltip",(function(t){t.series={key:A.x()(t.data),value:A.y()(t.data),color:t.color},s.data(t).hidden(!1)})),n.dispatch.on("elementMouseout.tooltip",(function(t){s.hidden(!0)})),n.dispatch.on("elementMousemove.tooltip",(function(t){s()})),A.dispatch=k,A.discretebar=n,A.legend=a,A.xAxis=i,A.yAxis=o,A.tooltip=s,A.options=r.utils.optionsFunc.bind(A),A._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},showLegend:{get:function(){return p},set:function(t){p=t}},staggerLabels:{get:function(){return m},set:function(t){m=t}},rotateLabels:{get:function(){return x},set:function(t){x=t}},wrapLabels:{get:function(){return y},set:function(t){y=!!t}},showXAxis:{get:function(){return h},set:function(t){h=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},noData:{get:function(){return b},set:function(t){b=t}},margin:{get:function(){return l},set:function(t){void 0!==t.top&&(l.top=t.top,u=t.top),l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return w},set:function(t){w=t,M.reset(w),n.duration(w),i.duration(w),o.duration(w)}},color:{get:function(){return f},set:function(t){f=r.utils.getColor(t),n.color(f),a.color(f)}},rightAlignYAxis:{get:function(){return g},set:function(t){g=t,o.orient(t?"right":"left")}}}),r.utils.inheritOptions(A,n),r.utils.initOptions(A),A},r.models.distribution=function(){"use strict";var t,e={top:0,right:0,bottom:0,left:0},n=400,i=8,o="x",a=function(t){return t[o]},s=r.utils.defaultColor(),l=d3.scale.linear(),u=250,c=d3.dispatch("renderEnd"),d=r.utils.renderWatch(c,u);function f(n){return d.reset(),n.each((function(n){"x"===o?(e.left,e.right):(e.top,e.bottom);var u="x"==o?"y":"x",c=d3.select(this);r.utils.initSVG(c),t=t||l;var f=c.selectAll("g.nv-distribution").data([n]),p=(f.enter().append("g").attr("class","nvd3 nv-distribution").append("g"),f.select("g"));f.attr("transform","translate("+e.left+","+e.top+")");var h=p.selectAll("g.nv-dist").data((function(t){return t}),(function(t){return t.key}));h.enter().append("g"),h.attr("class",(function(t,e){return"nv-dist nv-series-"+e})).style("stroke",(function(t,e){return s(t,e)}));var v=h.selectAll("line.nv-dist"+o).data((function(t){return t.values}));v.enter().append("line").attr(o+"1",(function(e,n){return t(a(e,n))})).attr(o+"2",(function(e,n){return t(a(e,n))})),d.transition(h.exit().selectAll("line.nv-dist"+o),"dist exit").attr(o+"1",(function(t,e){return l(a(t,e))})).attr(o+"2",(function(t,e){return l(a(t,e))})).style("stroke-opacity",0).remove(),v.attr("class",(function(t,e){return"nv-dist"+o+" nv-dist"+o+"-"+e})).attr(u+"1",0).attr(u+"2",i),d.transition(v,"dist").attr(o+"1",(function(t,e){return l(a(t,e))})).attr(o+"2",(function(t,e){return l(a(t,e))})),t=l.copy()})),d.renderEnd("distribution immediate"),f}return f.options=r.utils.optionsFunc.bind(f),f.dispatch=c,f.margin=function(t){return arguments.length?(e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left,f):e},f.width=function(t){return arguments.length?(n=t,f):n},f.axis=function(t){return arguments.length?(o=t,f):o},f.size=function(t){return arguments.length?(i=t,f):i},f.getData=function(t){return arguments.length?(a=d3.functor(t),f):a},f.scale=function(t){return arguments.length?(l=t,f):l},f.color=function(t){return arguments.length?(s=r.utils.getColor(t),f):s},f.duration=function(t){return arguments.length?(u=t,d.reset(u),f):u},f},r.models.distroPlot=function(){"use strict";var t,e,n,i,o,a={top:0,right:0,bottom:0,left:0},s=960,l=500,u=Math.floor(1e4*Math.random()),c=d3.scale.ordinal(),d=d3.scale.linear(),f=function(t){return t.label},p=function(t){return t.value},h=function(t){return t.color},v=function(t){return t.values.q1},g=function(t){return t.values.q2},m=function(t){return t.values.q3},y=function(t){return("mean"==O?x(t):g(t))+t.values.notch},x=function(t){return t.values.mean},b=function(t){return t.values.wl[S]},k=function(t){return t.values.wu[S]},w=function(t){return t.values.min},M=function(t){return t.values.max},A=function(t){return t.values.dev},C=!1,S="iqr",W=!1,F=!1,E=!1,O=!1,D=!0,N=.7,_=!0,T="scott",L=!0,B=50,P=3,I=r.utils.defaultColor(),z=null,V=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),j=250,G=null;function H(t,e){void 0===e&&(e="scott");var n=function(t){var e=t.sort(d3.ascending),n=(d3.quantile(e,.75)-d3.quantile(e,.25))/1.349;return d3.min([d3.deviation(e),n])}(t),r=t.length;return"scott"===e?Math.pow(1.059*n*r,-.2):Math.pow(.9*n*r,-.2)}function Y(t){function e(t,e){var n,r=t.map((function(t){return E&&K.add(E(t)),p(t)})).sort(d3.ascending),i=d3.quantile(r,.25),o=d3.quantile(r,.75),a=o-i,s=o+1.5*a,l=i-1.5*a,u={iqr:d3.max([d3.min(r),d3.min(r.filter((function(t){return t>l})))]),minmax:d3.min(r),stddev:d3.mean(r)-d3.deviation(r)},c={iqr:d3.min([d3.max(r),d3.max(r.filter((function(t){return t<s})))]),minmax:d3.max(r),stddev:d3.mean(r)+d3.deviation(r)},f=d3.median(r),h=d3.mean(r),v=[];void 0!==d3.beeswarm?(v=d3.beeswarm().data(t.map((function(t){return p(t)}))).radius(P+1).orientation("vertical").side("symmetric").distributeOn((function(t){return d(t)})).arrange()).map((function(n,r){n.key=e,n.object_constancy=t[r].object_constancy,n.isOutlier=n.datum<u.iqr||n.datum>c.iqr,n.isOutlierStdDev=n.datum<u.stddev||n.datum>c.stddev,n.randX=Math.random()*N*(1==Math.floor(2*Math.random())?1:-1)})):r.forEach((function(t,n){v.push({object_constancy:t.object_constancy,datum:t,key:e,isOutlier:t<u.iqr||t>c.iqr,isOutlierStdDev:t<u.stddev||t>c.stddev,randX:Math.random()*N*(1==Math.floor(2*Math.random())?1:-1)})})),isNaN(parseFloat(T))&&(n=-1!=["scott","silverman"].indexOf(T)?H(r,T):H(r));var g,m,y,x=(y=n,g=function(t){return Math.abs(t/=y)<=1?.75*(1-t*t)/y:0},m=d.ticks(B),function(t){return m.map((function(e){var n=d3.mean(t,(function(t){return g(e-t)}));return{x:e,y:n}}))}),b=L?function(t,e){if(e[0]===e[1])return t;var n=t.reduce((function(t,n){return n.x>=e[0]&&n.x<=e[1]&&t.push(n),t}),[]);return e[0]<n[0].x&&n.unshift({x:e[0],y:n[0].y}),e[1]>n[n.length-1].x&&n.push({x:e[1],y:n[n.length-1].y}),n}(x(r),d3.extent(r)):x(r),k=d3.scale.linear().domain([0,d3.max(b,(function(t){return t.y}))]).clamp(!0);U.push(k);var w={count:r.length,num_outlier:v.filter((function(t){return t.isOutlier})).length,sum:d3.sum(r),mean:h,q1:i,q2:f,q3:o,wl:u,wu:c,iqr:a,min:d3.min(r),max:d3.max(r),dev:d3.deviation(r),observations:v,key:e,kde:b,notch:1.57*a/Math.sqrt(r.length)};return E&&Q.push({key:e,values:w}),w}var n;if(t.forEach((function(t,e){t.object_constancy=e+"_"+p(t)+"_"+f(t)})),E){K=d3.set();var r=d3.nest().key((function(t){return f(t)})).key((function(t){return E(t)})).rollup((function(t){return e(t,f(t[0]))})).entries(t);K=K.values();for(var i=r.map((function(t){return t.key})),o=[],a=0;a<i.length;a++)for(var s=0;s<K.length;s++)o.push(i[a]+"_"+K[s]);K=o,n=[],r.forEach((function(t){t.values.forEach((function(e){e.key=t.key+"_"+e.key})),n.push.apply(n,t.values)}))}else n=d3.nest().key((function(t){return f(t)})).rollup((function(t,n){return e(t)})).entries(t);return n}function R(t){return"iqr"==S&&t.isOutlier||"stddev"==S&&t.isOutlierStdDev}var X,q,Z,K=d3.set(),U=[],Q=[],J=r.utils.renderWatch(V,j);function $(u){return J.reset(),u.each((function(u){q=s-a.left-a.right,Z=l-a.top-a.bottom,z=d3.select(this),r.utils.initSVG(z),d.domain(i||d3.extent(u.map((function(t){return p(t)})))).nice().range(o||[Z,0]),void 0===X&&(X=Y(u)),c.rangeBands(n||[0,q],.1).domain(e||E&&!_?K:X.map((function(t){return t.key})));var f=z.selectAll("g.nv-wrap").data([X]);f.enter().append("g").attr("class","nvd3 nv-wrap"),f.watchTransition(J,"nv-wrap: wrap").attr("transform","translate("+a.left+","+a.top+")");var S,N=f.selectAll(".nv-distroplot-x-group").data((function(t){return t}));N.each((function(t,e){d3.select(this).selectAll("line.nv-distroplot-middle").datum(t)})),S=N.enter().append("g").attr("class","nv-distroplot-x-group").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).style("fill",(function(t,e){return h(t)||I(t,e)})).style("stroke",(function(t,e){return h(t)||I(t,e)})),N.exit().remove();var T=function(){return c.rangeBand()},L=function(){return d3.min([G,.9*T()])},B=function(){return L()/2},j=function(){return B()-L()/2},H=function(){return B()-L()/5},Q=function(){return B()+L()/5};S.attr("transform",(function(t){return"translate("+(c(t.key)+.5*(T()-L()))+", 0)"})),N.watchTransition(J,"nv-distroplot-x-group: distroplots").style("stroke-opacity",1).style("fill-opacity",.5).attr("transform",(function(t){return"translate("+(c(t.key)+.5*(T()-L()))+", 0)"})),U.map((function(t){t.range([L()/2,0])})),t||(D=!1,C||(C="random")),S.each((function(t,e){var n=d3.select(this);[b,k].forEach((function(t){var e=t===b?"low":"high";n.append("line").style("opacity",(function(){return W?"1":"0"})).attr("class","nv-distroplot-whisker nv-distroplot-"+e),n.append("line").style("opacity",(function(){return W?"0":"1"})).attr("class","nv-distroplot-tick nv-distroplot-"+e)}))})),[b,k].forEach((function(e){var n=e===b?"low":"high",r=e===b?v:m;N.select("line.nv-distroplot-whisker.nv-distroplot-"+n).watchTransition(J,"nv-distroplot-x-group: distroplots").attr("x1",B()).attr("y1",(function(n){return d("violin"!=t?e(n):g(n))})).attr("x2",B()).attr("y2",(function(e){return d("box"==t?r(e):g(e))})).style("opacity",(function(){return W?"0":"1"})),N.select("line.nv-distroplot-tick.nv-distroplot-"+n).watchTransition(J,"nv-distroplot-x-group: distroplots").attr("x1",(function(e){return"violin"!=t?H():B()})).attr("y1",(function(n,r){return d("violin"!=t?e(n):g(n))})).attr("x2",(function(e){return"violin"!=t?Q():B()})).attr("y2",(function(n,r){return d("violin"!=t?e(n):g(n))})).style("opacity",(function(){return W?"0":"1"}))})),[b,k].forEach((function(t){var e=t===b?"low":"high";S.selectAll(".nv-distroplot-"+e).on("mouseover",(function(n,r,i){d3.select(this.parentNode).selectAll("line.nv-distroplot-"+e).classed("hover",!0),V.elementMouseover({value:"low"==e?"Lower whisker":"Upper whisker",series:{key:t(n).toFixed(2),color:h(n)||I(n,i)},e:d3.event})})).on("mouseout",(function(n,r,i){d3.select(this.parentNode).selectAll("line.nv-distroplot-"+e).classed("hover",!1),V.elementMouseout({value:"low"==e?"Lower whisker":"Upper whisker",series:{key:t(n).toFixed(2),color:h(n)||I(n,i)},e:d3.event})})).on("mousemove",(function(t,e){V.elementMousemove({e:d3.event})}))})),S.each((function(t,e){var n=d3.select(this);["left","right"].forEach((function(t){["line","area"].forEach((function(e){n.append("path").attr("class","nv-distribution-"+e+" nv-distribution-"+t).attr("transform","rotate(90,0,0)   translate(0,"+("left"==t?-L():0)+")"+("left"==t?"":" scale(1,-1)"))}))})),S.selectAll(".nv-distribution-line").style("fill","none"),S.selectAll(".nv-distribution-area").style("stroke","none").style("opacity",.7)})),N.each((function(e,n){var r=d3.select(this),i="box"==t?function(t,e,n,r){var i,o="mean"==O?x(r):g(r);return F?[{x:n,y:d(v(r))},{x:t,y:d(v(r))},{x:t,y:d((i=r,("mean"==O?x(i):g(i))-i.values.notch))},{x:e,y:d(o)},{x:t,y:d(y(r))},{x:t,y:d(m(r))},{x:n,y:d(m(r))}]:[{x:n,y:d(v(r))},{x:t,y:d(v(r))},{x:t,y:d(o)},{x:t,y:d(o)},{x:t,y:d(o)},{x:t,y:d(m(r))},{x:n,y:d(m(r))}]}(j(),H(),B(),e):e.values.kde;r.selectAll("path").datum(i);var o=U[n],a="box"==t?"linear":"basis";"box"==t||"violin"==t?["left","right"].forEach((function(e){N.selectAll(".nv-distribution-line.nv-distribution-"+e).attr("d",d3.svg.line().x((function(e){return"box"==t?e.y:d(e.x)})).y((function(e){return"box"==t?e.x:o(e.y)})).interpolate(a)).attr("transform","rotate(90,0,0)   translate(0,"+("left"==e?-L():0)+")"+("left"==e?"":" scale(1,-1)")).style("opacity",t?"1":"0"),N.selectAll(".nv-distribution-area.nv-distribution-"+e).attr("d",d3.svg.area().x((function(e){return"box"==t?e.y:d(e.x)})).y((function(e){return"box"==t?e.x:o(e.y)})).y0(L()/2).interpolate(a)).attr("transform","rotate(90,0,0)   translate(0,"+("left"==e?-L():0)+")"+("left"==e?"":" scale(1,-1)")).style("opacity",t?"1":"0")})):(N.selectAll(".nv-distribution-area").watchTransition(J,"nv-distribution-area: distroplots").style("opacity",t?"1":"0"),N.selectAll(".nv-distribution-line").watchTransition(J,"nv-distribution-line: distroplots").style("opacity",t?"1":"0"))})),N.selectAll("path").on("mouseover",(function(t,e,n){t=d3.select(this.parentNode).datum(),d3.select(this).classed("hover",!0),V.elementMouseover({key:t.key,value:"Group "+t.key+" stats",series:[{key:"max",value:M(t).toFixed(2),color:h(t)||I(t,n)},{key:"Q3",value:m(t).toFixed(2),color:h(t)||I(t,n)},{key:"Q2",value:g(t).toFixed(2),color:h(t)||I(t,n)},{key:"Q1",value:v(t).toFixed(2),color:h(t)||I(t,n)},{key:"min",value:w(t).toFixed(2),color:h(t)||I(t,n)},{key:"mean",value:x(t).toFixed(2),color:h(t)||I(t,n)},{key:"std. dev.",value:A(t).toFixed(2),color:h(t)||I(t,n)},{key:"count",value:t.values.count,color:h(t)||I(t,n)},{key:"num. outliers",value:t.values.num_outlier,color:h(t)||I(t,n)}],data:t,index:e,e:d3.event})})).on("mouseout",(function(t,e,n){d3.select(this).classed("hover",!1),t=d3.select(this.parentNode).datum(),V.elementMouseout({key:t.key,value:"Group "+t.key+" stats",series:[{key:"max",value:M(t).toFixed(2),color:h(t)||I(t,n)},{key:"Q3",value:m(t).toFixed(2),color:h(t)||I(t,n)},{key:"Q2",value:g(t).toFixed(2),color:h(t)||I(t,n)},{key:"Q1",value:v(t).toFixed(2),color:h(t)||I(t,n)},{key:"min",value:w(t).toFixed(2),color:h(t)||I(t,n)},{key:"mean",value:x(t).toFixed(2),color:h(t)||I(t,n)},{key:"std. dev.",value:A(t).toFixed(2),color:h(t)||I(t,n)},{key:"count",value:t.values.count,color:h(t)||I(t,n)},{key:"num. outliers",value:t.values.num_outlier,color:h(t)||I(t,n)}],data:t,index:e,e:d3.event})})).on("mousemove",(function(t,e){V.elementMousemove({e:d3.event})})),S.append("line").attr("class",(function(t){return"nv-distroplot-middle"})),N.selectAll("line.nv-distroplot-middle").watchTransition(J,"nv-distroplot-x-group: distroplots line").attr("x1",F?H:"violin"!=t?j:H()).attr("y1",(function(t,e,n){return d("mean"==O?x(t):g(t))})).attr("x2",F?Q:"violin"!=t?function(){return B()+L()/2}:Q()).attr("y2",(function(t,e){return d("mean"==O?x(t):g(t))})).style("opacity",O?"1":"0"),N.selectAll(".nv-distroplot-middle").on("mouseover",(function(t,e,n){if(0!=d3.select(this).style("opacity")){var r=d3.select(this.parentNode).style("fill");d3.select(this).classed("hover",!0),V.elementMouseover({value:"mean"==O?"Mean":"Median",series:{key:"mean"==O?x(t).toFixed(2):g(t).toFixed(2),color:r},e:d3.event})}})).on("mouseout",(function(t,e,n){if(0!=d3.select(this).style("opacity")){d3.select(this).classed("hover",!1);var r=d3.select(this.parentNode).style("fill");V.elementMouseout({value:"mean"==O?"Mean":"Median",series:{key:"mean"==O?x(t).toFixed(2):g(t).toFixed(2),color:r},e:d3.event})}})).on("mousemove",(function(t,e){V.elementMousemove({e:d3.event})}));var $=N.selectAll("g.nv-distroplot-observation").data((function(t){return function(t){return t.values.observations}(t)}),(function(t){return t.object_constancy})),tt=$.enter().append("g").attr("class","nv-distroplot-observation");tt.append("circle").style({opacity:0}),tt.append("line").style("stroke-width",1).style({stroke:d3.rgb(85,85,85),opacity:0}),$.exit().remove(),$.attr("class",(function(e){return"nv-distroplot-observation "+(R(e)&&"box"==t?"nv-distroplot-outlier":"nv-distroplot-non-outlier")})),"line"==C?N.selectAll("g.nv-distroplot-observation line").watchTransition(J,"nv-distrolot-x-group: nv-distoplot-observation").attr("x1",H()+L()/4).attr("x2",Q()-L()/4).attr("y1",(function(t){return d(t.datum)})).attr("y2",(function(t){return d(t.datum)})):(N.selectAll("g.nv-distroplot-observation circle").watchTransition(J,"nv-distroplot: nv-distroplot-observation").attr("cy",(function(t){return d(t.datum)})).attr("r",P),N.selectAll("g.nv-distroplot-observation circle").watchTransition(J,"nv-distroplot: nv-distroplot-observation").attr("cx",(function(t){return"swarm"==C?t.x+L()/2:"random"==C?L()/2+t.randX*L()/2:L()/2}))),!1!==C&&(D?(N.selectAll(".nv-distroplot-outlier "+("line"==C?"line":"circle")).watchTransition(J,"nv-distroplot: nv-distroplot-observation").style("opacity",1),N.selectAll(".nv-distroplot-non-outlier "+("line"==C?"line":"circle")).watchTransition(J,"nv-distroplot: nv-distroplot-observation").style("opacity",0)):N.selectAll("line"==C?"line":"circle").watchTransition(J,"nv-distroplot: nv-distroplot-observation").style("opacity",1)),N.selectAll(".nv-distroplot-observation"+("line"==C?" circle":" line")).watchTransition(J,"nv-distroplot: nv-distoplot-observation").style("opacity",0),N.selectAll(".nv-distroplot-observation").on("mouseover",(function(e,n,r){var i=d3.select(this);if(!D||"box"!=t||R(e)){var o=d3.select(this.parentNode).style("fill");i.classed("hover",!0),V.elementMouseover({value:"box"==t&&R(e)?"Outlier":"Observation",series:{key:e.datum.toFixed(2),color:o},e:d3.event})}})).on("mouseout",(function(e,n,r){var i=d3.select(this),o=d3.select(this.parentNode).style("fill");i.classed("hover",!1),V.elementMouseout({value:"box"==t&&R(e)?"Outlier":"Observation",series:{key:e.datum.toFixed(2),color:o},e:d3.event})})).on("mousemove",(function(t,e){V.elementMousemove({e:d3.event})}))})),J.renderEnd("nv-distroplot-x-group immediate"),$}return $.dispatch=V,$.options=r.utils.optionsFunc.bind($),$._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},maxBoxWidth:{get:function(){return G},set:function(t){G=t}},x:{get:function(){return f},set:function(t){f=t}},y:{get:function(){return p},set:function(t){p=t}},plotType:{get:function(){return t},set:function(e){t=e}},observationType:{get:function(){return C},set:function(t){C=t}},whiskerDef:{get:function(){return S},set:function(t){S=t}},notchBox:{get:function(){return F},set:function(t){F=t}},hideWhiskers:{get:function(){return W},set:function(t){W=t}},colorGroup:{get:function(){return E},set:function(t){E=t}},centralTendency:{get:function(){return O},set:function(t){O=t}},bandwidth:{get:function(){return T},set:function(t){T=t}},clampViolin:{get:function(){return L},set:function(t){L=t}},resolution:{get:function(){return B},set:function(t){B=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return d},set:function(t){d=t}},showOnlyOutliers:{get:function(){return D},set:function(t){D=t}},jitter:{get:function(){return N},set:function(t){N=t}},squash:{get:function(){return _},set:function(t){_=t}},pointSize:{get:function(){return P},set:function(t){P=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return n},set:function(t){n=t}},yRange:{get:function(){return o},set:function(t){o=t}},recalcData:{get:function(){X=Y(z.datum())}},itemColor:{get:function(){return h},set:function(t){h=t}},id:{get:function(){return u},set:function(t){u=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},color:{get:function(){return I},set:function(t){I=r.utils.getColor(t)}},duration:{get:function(){return j},set:function(t){j=t,J.reset(j)}}}),r.utils.initOptions($),$},r.models.distroPlotChart=function(){"use strict";var t,e,n=r.models.distroPlot(),i=r.models.axis(),o=r.models.axis(),a={top:25,right:10,bottom:40,left:60},s=null,l=null,u=r.utils.getColor(),c=!0,d=!0,f=!1,p=!1,h=!1,v=!1,g=r.models.tooltip(),m="No Data Available.",y=d3.dispatch("stateChange","beforeUpdate","renderEnd"),x=500;i.orient("bottom").showMaxMin(!1).tickFormat((function(t){return t})),o.orient(f?"right":"left").tickFormat(d3.format(",.1f")),g.duration(0);var b,k,w,M,A,C,S,W=r.utils.renderWatch(y,x);function F(t,e){var n=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(e);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(t[o]!==e[o])return!1}return!0}function E(u){return W.reset(),W.models(n),c&&W.models(i),d&&W.models(o),u.each((function(u){var h=d3.select(this);r.utils.initSVG(h);var v=(s||parseInt(h.style("width"))||960)-a.left-a.right,g=(l||parseInt(h.style("height"))||400)-a.top-a.bottom;if(void 0===S&&(S=JSON.parse(JSON.stringify(u))),E.update=function(){y.beforeUpdate();var t,e=n.options();(b!==e.colorGroup()||k!==e.x()||w!==e.y()||A!==e.bandwidth()||M!==e.resolution()||C!==e.clampViolin()||!function(t,e){if(t.length!==e.length)return!1;for(var n=t.length;n--;)if("object_constancy"in t[n]&&delete t[n].object_constancy,"object_constancy"in e[n]&&delete e[n].object_constancy,!F(t[n],e[n]))return!1;return!0}(t=u,S)&&(S=JSON.parse(JSON.stringify(t)),!0))&&n.recalcData(),h.transition().duration(x).call(E)},E.container=this,"function"!=typeof d3.beeswarm&&"swarm"==E.options().observationType())return a.left,m='Please include the library https://github.com/Kcnarf/d3-beeswarm to use "swarm".',r.utils.noData(E,h),E;if(!u||!u.length)return r.utils.noData(E,h),E;h.selectAll(".nv-noData").remove(),t=n.xScale(),e=n.yScale().clamp(!0);var O=h.selectAll("g.nv-wrap.nv-distroPlot").data([u]),D=O.enter().append("g").attr("class","nvd3 nv-wrap nv-distroPlot").append("g"),N=D.append("defs"),_=O.select("g");if(D.append("g").attr("class","nv-x nv-axis"),D.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),D.append("g").attr("class","nv-distroWrap"),D.attr("transform","translate("+a.left+","+a.top+")"),_.watchTransition(W,"nv-wrap: wrap").attr("transform","translate("+a.left+","+a.top+")"),f&&_.select(".nv-y.nv-axis").attr("transform","translate("+v+",0)"),n.width(v).height(g),_.select(".nv-distroWrap").datum(u).transition().call(n),N.append("clipPath").attr("id","nv-x-label-clip-"+n.id()).append("rect"),_.select("#nv-x-label-clip-"+n.id()+" rect").attr("width",t.rangeBand()*(p?2:1)).attr("height",16).attr("x",-t.rangeBand()/(p?1:2)),c){i.scale(t).ticks(r.utils.calcTicksX(v/100,u)).tickSize(-g,0),_.select(".nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),_.select(".nv-x.nv-axis").call(i);var T=_.select(".nv-x.nv-axis").selectAll("g");p&&T.selectAll("text").attr("transform",(function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"}))}d&&(o.scale(e).ticks(Math.floor(g/36)).tickSize(-v,0),_.select(".nv-y.nv-axis").call(o)),_.select(".nv-zeroLine line").attr("x1",0).attr("x2",v).attr("y1",e(0)).attr("y2",e(0)),b=n.options().colorGroup(),k=n.options().x(),w=n.options().y(),A=n.options().bandwidth(),M=n.options().resolution(),C=n.options().clampViolin()})),W.renderEnd("nv-distroplot chart immediate"),E}return a.top,n.dispatch.on("elementMouseover.tooltip",(function(t){g.data(t).hidden(!1)})),n.dispatch.on("elementMouseout.tooltip",(function(t){g.data(t).hidden(!0)})),n.dispatch.on("elementMousemove.tooltip",(function(t){g()})),E.dispatch=y,E.distroplot=n,E.xAxis=i,E.yAxis=o,E.tooltip=g,E.options=r.utils.optionsFunc.bind(E),E._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},staggerLabels:{get:function(){return p},set:function(t){p=t}},showXAxis:{get:function(){return c},set:function(t){c=t}},showYAxis:{get:function(){return d},set:function(t){d=t}},tooltipContent:{get:function(){return g},set:function(t){g=t}},noData:{get:function(){return m},set:function(t){m=t}},defaultState:{get:function(){return defaultState},set:function(t){defaultState=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},duration:{get:function(){return x},set:function(t){x=t,W.reset(x),n.duration(x),i.duration(x),o.duration(x)}},color:{get:function(){return u},set:function(t){u=r.utils.getColor(t),n.color(u)}},rightAlignYAxis:{get:function(){return f},set:function(t){f=t,o.orient(t?"right":"left")}},xLabel:{get:function(){return h},set:function(t){h=t,i.axisLabel(h)}},yLabel:{get:function(){return v},set:function(t){v=t,o.axisLabel(v)}}}),r.utils.inheritOptions(E,n),r.utils.initOptions(E),E},r.models.focus=function(t){"use strict";t=t||r.models.line();var e,n,i=r.models.axis(),o=r.models.axis(),a=d3.svg.brush(),s={top:10,right:0,bottom:30,left:0},l=r.utils.defaultColor(),u=null,c=70,d=!0,f=!1,p=!1,h=null,v=250,g=d3.dispatch("brush","onBrush","renderEnd"),m=!0;t.interactive(!1),t.pointActive((function(t){return!1}));var y=r.utils.renderWatch(g,v);function x(b){return y.reset(),y.models(t),d&&y.models(i),f&&y.models(o),b.each((function(y){var b=d3.select(this);r.utils.initSVG(b);var k=r.utils.availableWidth(u,b,s),w=c-s.top-s.bottom;x.update=function(){0===v?b.call(x):b.transition().duration(v).call(x)},x.container=this,e=t.xScale(),n=t.yScale();var M=b.selectAll("g.nv-focus").data([y]),A=M.enter().append("g").attr("class","nvd3 nv-focus").append("g"),C=M.select("g");M.attr("transform","translate("+s.left+","+s.top+")"),A.append("g").attr("class","nv-background").append("rect"),A.append("g").attr("class","nv-x nv-axis"),A.append("g").attr("class","nv-y nv-axis"),A.append("g").attr("class","nv-contentWrap"),A.append("g").attr("class","nv-brushBackground"),A.append("g").attr("class","nv-x nv-brush"),p&&C.select(".nv-y.nv-axis").attr("transform","translate("+k+",0)"),C.select(".nv-background rect").attr("width",k).attr("height",w),t.width(k).height(w).color(y.map((function(t,e){return t.color||l(t,e)})).filter((function(t,e){return!y[e].disabled})));var S=C.select(".nv-contentWrap").datum(y.filter((function(t){return!t.disabled})));d3.transition(S).call(t),a.x(e).on("brush",(function(){O(m)})),a.on("brushend",(function(){m||g.onBrush(a.empty()?e.domain():a.extent())})),h&&a.extent(h);var W=C.select(".nv-brushBackground").selectAll("g").data([h||a.extent()]),F=W.enter().append("g");F.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",w),F.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",w);var E=C.select(".nv-x.nv-brush").call(a);function O(t){h=a.empty()?null:a.extent();var n=a.empty()?e.domain():a.extent();g.brush({extent:n,brush:a}),a.empty()||a.extent(h),W.data([a.empty()?e.domain():h]).each((function(t,n){var r=e(t[0])-e.range()[0],i=k-e(t[1]);d3.select(this).select(".left").attr("width",r<0?0:r),d3.select(this).select(".right").attr("x",e(t[1])).attr("width",i<0?0:i)})),t&&g.onBrush(n)}E.selectAll("rect").attr("height",w),E.selectAll(".resize").append("path").attr("d",(function(t){var e=+("e"==t),n=e?1:-1,r=w/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)})),O(!0),C.select(".nv-background rect").attr("width",k).attr("height",w),d&&(i.scale(e)._ticks(r.utils.calcTicksX(k/100,y)).tickSize(-w,0),C.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),d3.transition(C.select(".nv-x.nv-axis")).call(i)),f&&(o.scale(n)._ticks(r.utils.calcTicksY(w/36,y)).tickSize(-k,0),d3.transition(C.select(".nv-y.nv-axis")).call(o)),C.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")")})),y.renderEnd("focus immediate"),x}return x.dispatch=g,x.content=t,x.brush=a,x.xAxis=i,x.yAxis=o,x.options=r.utils.optionsFunc.bind(x),x._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},showXAxis:{get:function(){return d},set:function(t){d=t}},showYAxis:{get:function(){return f},set:function(t){f=t}},brushExtent:{get:function(){return h},set:function(t){h=t}},syncBrushing:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},duration:{get:function(){return v},set:function(e){v=e,y.reset(v),t.duration(v),i.duration(v),o.duration(v)}},color:{get:function(){return l},set:function(e){l=r.utils.getColor(e),t.color(l)}},interpolate:{get:function(){return t.interpolate()},set:function(e){t.interpolate(e)}},xTickFormat:{get:function(){return i.tickFormat()},set:function(t){i.tickFormat(t)}},yTickFormat:{get:function(){return o.tickFormat()},set:function(t){o.tickFormat(t)}},x:{get:function(){return t.x()},set:function(e){t.x(e)}},y:{get:function(){return t.y()},set:function(e){t.y(e)}},rightAlignYAxis:{get:function(){return p},set:function(t){p=t,o.orient(p?"right":"left")}}}),r.utils.inheritOptions(x,t),r.utils.initOptions(x),x},r.models.forceDirectedGraph=function(){"use strict";var t={top:2,right:0,bottom:2,left:0},e=400,n=32,i=null,o=d3.dispatch("renderEnd"),a=r.utils.getColor(["#000"]),s=r.models.tooltip(),l=null,u=.1,c=.9,d=30,f=-120,p=.1,h=.8,v=.1,g=5,m=function(t){},y=function(t){},x=d3.functor(0),b=d3.functor(0),k=r.utils.renderWatch(o);function w(o){return k.reset(),o.each((function(o){i=d3.select(this),r.utils.initSVG(i);var l=r.utils.availableWidth(e,i,t),x=r.utils.availableHeight(n,i,t);if(i.attr("width",l).attr("height",x),!(o&&o.links&&o.nodes))return r.utils.noData(w,i),w;i.selectAll(".nv-noData").remove(),i.selectAll("*").remove();var b=new Set;o.nodes.forEach((function(t){Object.keys(t).forEach((function(t){b.add(t)}))}));var k=d3.layout.force().nodes(o.nodes).links(o.links).size([l,x]).linkStrength(u).friction(c).linkDistance(d).charge(f).gravity(p).theta(h).alpha(v).start(),M=i.selectAll(".link").data(o.links).enter().append("line").attr("class","nv-force-link").style("stroke-width",(function(t){return Math.sqrt(t.value)})),A=i.selectAll(".node").data(o.nodes).enter().append("g").attr("class","nv-force-node").call(k.drag);A.append("circle").attr("r",g).style("fill",(function(t){return a(t)})).on("mouseover",(function(t){i.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.py),i.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.px);var e=a(t);t.series=[],b.forEach((function(n){t.series.push({color:e,key:n,value:t[n]})})),s.data(t).hidden(!1)})).on("mouseout",(function(t){s.hidden(!0)})),s.headerFormatter((function(t){return"Node"})),y(M),m(A),k.on("tick",(function(){M.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),A.attr("transform",(function(t){return"translate("+t.x+", "+t.y+")"}))}))})),w}return w.options=r.utils.optionsFunc.bind(w),w._options=Object.create({},{width:{get:function(){return e},set:function(t){e=t}},height:{get:function(){return n},set:function(t){n=t}},linkStrength:{get:function(){return u},set:function(t){u=t}},friction:{get:function(){return c},set:function(t){c=t}},linkDist:{get:function(){return d},set:function(t){d=t}},charge:{get:function(){return f},set:function(t){f=t}},gravity:{get:function(){return p},set:function(t){p=t}},theta:{get:function(){return h},set:function(t){h=t}},alpha:{get:function(){return v},set:function(t){v=t}},radius:{get:function(){return g},set:function(t){g=t}},x:{get:function(){return x},set:function(t){x=d3.functor(t)}},y:{get:function(){return b},set:function(t){b=d3.functor(t)}},margin:{get:function(){return t},set:function(e){t.top=void 0!==e.top?e.top:t.top,t.right=void 0!==e.right?e.right:t.right,t.bottom=void 0!==e.bottom?e.bottom:t.bottom,t.left=void 0!==e.left?e.left:t.left}},color:{get:function(){return a},set:function(t){a=r.utils.getColor(t)}},noData:{get:function(){return l},set:function(t){l=t}},nodeExtras:{get:function(){return m},set:function(t){m=t}},linkExtras:{get:function(){return y},set:function(t){y=t}}}),w.dispatch=o,w.tooltip=s,r.utils.initOptions(w),w},r.models.furiousLegend=function(){"use strict";var t={top:5,right:0,bottom:5,left:0},e=400,n=20,i=function(t){return t.key},o=function(t){return t},a=r.utils.getColor(),s=20,l=!0,u=28,c=!0,d=!0,f=!1,p=!1,h=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),v="classic";function g(m){function y(t,e){return"furious"!=v?"#000":p?t.disengaged?a(t,e):"#fff":p?void 0:t.disabled?a(t,e):"#fff"}function x(t,e){return p&&"furious"==v?t.disengaged?"#fff":a(t,e):t.disabled?"#fff":a(t,e)}return m.each((function(g){var m=e-t.left-t.right,b=d3.select(this);r.utils.initSVG(b);var k=b.selectAll("g.nv-legend").data([g]),w=(k.enter().append("g").attr("class","nvd3 nv-legend").append("g"),k.select("g"));k.attr("transform","translate("+t.left+","+t.top+")");var M,A=w.selectAll(".nv-series").data((function(t){return"furious"!=v?t:t.filter((function(t){return!!p||!t.disengaged}))})),C=A.enter().append("g").attr("class","nv-series");"classic"==v?(C.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),M=A.select("circle")):"furious"==v&&(C.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),M=A.select("rect"),C.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),A.select(".nv-check-box").each((function(t,e){d3.select(this).selectAll("path").attr("stroke",y(t,e))}))),C.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var S,W=A.select("text.nv-legend-text");switch(A.on("mouseover",(function(t,e){h.legendMouseover(t,e)})).on("mouseout",(function(t,e){h.legendMouseout(t,e)})).on("click",(function(t,e){h.legendClick(t,e);var n=A.data();if(d){if("classic"==v)f?(n.forEach((function(t){t.disabled=!0})),t.disabled=!1):(t.disabled=!t.disabled,n.every((function(t){return t.disabled}))&&n.forEach((function(t){t.disabled=!1})));else if("furious"==v)if(p)t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled;else if(!p){t.disabled=!t.disabled,t.userDisabled=t.disabled;var r=n.filter((function(t){return!t.disengaged}));r.every((function(t){return t.userDisabled}))&&n.forEach((function(t){t.disabled=t.userDisabled=!1}))}h.stateChange({disabled:n.map((function(t){return!!t.disabled})),disengaged:n.map((function(t){return!!t.disengaged}))})}})).on("dblclick",(function(t,e){if(("furious"!=v||!p)&&(h.legendDblclick(t,e),d)){var n=A.data();n.forEach((function(t){t.disabled=!0,"furious"==v&&(t.userDisabled=t.disabled)})),t.disabled=!1,"furious"==v&&(t.userDisabled=t.disabled),h.stateChange({disabled:n.map((function(t){return!!t.disabled}))})}})),A.classed("nv-disabled",(function(t){return t.userDisabled})),A.exit().remove(),W.attr("fill",y).text((function(t){return o(i(t))})),v){case"furious":S=23;break;case"classic":S=20}if(l){var F=[];A.each((function(t,e){var n,a;if(o(i(t))&&o(i(t)).length>s){var l=o(i(t)).substring(0,s);n=d3.select(this).select("text").text(l+"..."),d3.select(this).append("svg:title").text(o(i(t)))}else n=d3.select(this).select("text");try{if((a=n.node().getComputedTextLength())<=0)throw Error()}catch(t){a=r.utils.calcApproxTextWidth(n)}F.push(a+u)}));for(var E=0,O=0,D=[];O<m&&E<F.length;)D[E]=F[E],O+=F[E++];for(0===E&&(E=1);O>m&&E>1;){D=[],E--;for(var N=0;N<F.length;N++)F[N]>(D[N%E]||0)&&(D[N%E]=F[N]);O=D.reduce((function(t,e,n,r){return t+e}))}for(var _=[],T=0,L=0;T<E;T++)_[T]=L,L+=D[T];A.attr("transform",(function(t,e){return"translate("+_[e%E]+","+(5+Math.floor(e/E)*S)+")"})),c?w.attr("transform","translate("+(e-t.right-O)+","+t.top+")"):w.attr("transform","translate(0,"+t.top+")"),n=t.top+t.bottom+Math.ceil(F.length/E)*S}else{var B,P=5,I=5,z=0;A.attr("transform",(function(n,r){var i=d3.select(this).select("text").node().getComputedTextLength()+u;return B=I,e<t.left+t.right+B+i&&(I=B=5,P+=S),(I+=i)>z&&(z=I),"translate("+B+","+P+")"})),w.attr("transform","translate("+(e-t.right-z)+","+t.top+")"),n=t.top+t.bottom+P+15}"furious"==v&&M.attr("width",(function(t,e){return W[0][e].getComputedTextLength()+27})).attr("height",18).attr("y",-9).attr("x",-15),M.style("fill",x).style("stroke",(function(t,e){return t.color||a(t,e)}))})),g}return g.dispatch=h,g.options=r.utils.optionsFunc.bind(g),g._options=Object.create({},{width:{get:function(){return e},set:function(t){e=t}},height:{get:function(){return n},set:function(t){n=t}},key:{get:function(){return i},set:function(t){i=t}},keyFormatter:{get:function(){return o},set:function(t){o=t}},align:{get:function(){return l},set:function(t){l=t}},rightAlign:{get:function(){return c},set:function(t){c=t}},maxKeyLength:{get:function(){return s},set:function(t){s=t}},padding:{get:function(){return u},set:function(t){u=t}},updateState:{get:function(){return d},set:function(t){d=t}},radioButtonMode:{get:function(){return f},set:function(t){f=t}},expanded:{get:function(){return p},set:function(t){p=t}},vers:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return t},set:function(e){t.top=void 0!==e.top?e.top:t.top,t.right=void 0!==e.right?e.right:t.right,t.bottom=void 0!==e.bottom?e.bottom:t.bottom,t.left=void 0!==e.left?e.left:t.left}},color:{get:function(){return a},set:function(t){a=r.utils.getColor(t)}}}),r.utils.initOptions(g),g},r.models.heatMap=function(){"use strict";var t,e,n,i,o,a,s,l,u,c={top:0,right:0,bottom:0,left:0},d=960,f=500,p=Math.floor(1e4*Math.random()),h=d3.scale.ordinal(),v=d3.scale.ordinal(),g=!1,m=function(t){return t.x},y=function(t){return t.y},x=function(t){return t.value},b=!0,k=function(t){return"number"==typeof t?t.toFixed(0):t},w=!1,M=2,A=4,C=!1,S=!0,W=r.utils.defaultColor(),F=r.utils.defaultColor(),E="#bcbcbc",O="",D=5,N=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),_=250,T=function(t){return H/3},L=function(t){return Y/3},B=!1;function P(t){var e=d3.median(t),n=t.map((function(t){return Math.abs(t-e)}));return d3.median(n)}function I(t){var e=C?ot(t):x(t);return z()&&!isNaN(e)||void 0!==e?g(e):E}function z(){return"number"==typeof U[0]}function V(t){Z={},K={},U=[],Q=[],J=[],$=[];var e,n=[],r={},i=0,o=0,l=0;t.forEach((function(t){var u,c,d,f=m(t),p=y(t),h=x(t);f in Z||(Z[f]=i,i++,r[f]={},"function"==typeof a&&Q.push(a(t))),p in K||(K[p]=o,o++,r[f][p]={},"function"==typeof s&&J.push(s(t))),-1==U.indexOf(h)&&U.push(h),t._cellPos={idx:l,ix:Z[f],iy:K[p]},l++,u=$,c=e=[f,p],d=JSON.stringify(c),u.some((function(t){return JSON.stringify(t)===d}))?-1==n.indexOf(f+p)&&(n.push(f+p),console.warn("The row/column position "+f+"/"+p+" has multiple values; ensure each cell has only a single value.")):($.push(e),r[f][p]=t)})),U=U.sort();var u=[];return Object.keys(K).forEach((function(t){Object.keys(Z).forEach((function(e){var n=r[e][t];if(n)u.push(n);else{var i={idx:l,ix:Z[e],iy:K[t]};l++,u.push({_cellPos:i})}}))})),C?function(t){if(-1!=["centerRow","robustCenterRow","centerScaleRow","robustCenterScaleRow","centerColumn","robustCenterColumn","centerScaleColumn","robustCenterScaleColumn","centerAll","robustCenterAll","centerScaleAll","robustCenterScaleAll"].indexOf(C)){Object.keys(Z),Object.keys(K);var e=!!C.includes("Scale"),n=C.includes("robust")?"median":"mean",r=C.includes("Row")?"row":C.includes("Column")?"col":null,i=function(t,e){var n={};return t.forEach((function(t,r){"row"==e?(it(t)in n||(n[it(t)]=[]),n[it(t)].push(x(t))):"col"==e?(rt(t)in n||(n[rt(t)]=[]),n[rt(t)].push(x(t))):null==e&&(0 in n||(n[0]=[]),n[0].push(x(t)))})),n}(t,r),o={},a={};for(var s in i)o[s]="mean"==n?d3.mean(i[s]):d3.median(i[s]),e&&(a[s]="mean"==n?d3.deviation(i[s]):P(i[s]));t.forEach((function(t,n){if(z()){if("row"==r)var i=it(t);else"col"==r?i=rt(t):null==r&&(i=0);var s=x(t)-o[i];t._cellPos.norm=e?s/a[i]:s}else t._cellPos.norm=x(t)}))}else C=!1;return t}(u):u}function j(){d3.selectAll(".cell-hover").classed("cell-hover",!1),d3.selectAll(".no-hover").classed("no-hover",!1),d3.selectAll(".row-hover").classed("row-hover",!1),d3.selectAll(".column-hover").classed("column-hover",!1)}var G,H,Y,R=function(t){var e=k(C?ot(t):x(t));return z()&&!isNaN(e)||void 0!==e?e:O};function X(t){return Object.keys(t).sort((function(e,n){return t[e]-t[n]}))}function q(t,e){return Object.keys(t).filter((function(n){return t[n]===e}))[0]}var Z={},K={},U=[],Q=[],J=[],$=[],tt=r.utils.renderWatch(N,_),et=["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],nt=function(t){return t._cellPos},rt=function(t){return nt(t).ix},it=function(t){return nt(t).iy},ot=function(t){return nt(t).norm},at=function(t){return nt(t).idx};function st(p){return tt.reset(),p.each((function(p){G=V(p);var m=d-c.left-c.right,y=f-c.top-c.bottom;Y=m/Object.keys(Z).length,H=w?Y/w:y/Object.keys(K).length,w&&(y=H*Object.keys(K).length-c.top-c.bottom),t=d3.select(this),r.utils.initSVG(t),h.domain(e||X(Z)).rangeBands(i||[0,m-A/2]),v.domain(n||X(K)).rangeBands(o||[0,y-A/2]),(g=z()?d3.scale.quantize():d3.scale.ordinal()).domain(u||(z()?C?d3.extent(G,(function(t){return ot(t)})):d3.extent(U):z()?void 0:U)).range(l||et);var k=t.selectAll("g.nv-heatMapWrap").data([G]),E=k.enter().append("g").attr("class","nvd3 nv-heatMapWrap");E.append("g").attr("class","cellWrap"),k.watchTransition(tt,"nv-wrap: heatMapWrap").attr("transform","translate("+c.left+","+c.top+")"),E.append("g").attr("class","cellGrid").style("opacity",1e-6);var O=k.select(".cellGrid").selectAll(".gridLines.verticalGrid").data(Object.values(Z).concat([Object.values(Z).length]));O.enter().append("line").attr("class","gridLines verticalGrid"),O.exit().remove();var _=k.select(".cellGrid").selectAll(".gridLines.horizontalGrid").data(Object.values(K).concat([Object.values(K).length]));_.enter().append("line").attr("class","gridLines horizontalGrid"),_.exit().remove();var P=k.select(".cellWrap").selectAll(".nv-cell").data((function(t){return t}),(function(t){return at(t)})),$=(E.append("g").attr("class","xMetaWrap").attr("transform",(function(){return"translate(0,"+(-T()-A-D)+")"})),k.select(".xMetaWrap").selectAll(".x-meta").data(Q)),nt=($.enter().append("rect").attr("class","x-meta meta").attr("width",Y-A).attr("height",T()).attr("transform","translate(0,0)").attr("fill",(function(t){return W(t)})),E.append("g").attr("class","yMetaWrap").attr("transform",(function(t,e){return"translate("+(-L()-A-D)+",0)"})),k.select(".yMetaWrap").selectAll(".y-meta").data(J));nt.enter().append("rect").attr("class","y-meta meta").attr("width",L()).attr("height",H-A).attr("transform",(function(t,e){return"translate(0,0)"})).attr("fill",(function(t,e){return F(t)})),$.exit().remove(),nt.exit().remove();var st=P.enter().append("g").style("opacity",1e-6).attr("transform",(function(t){return"translate(0,"+it(t)*H+")"})).attr("data-row",(function(t){return it(t)})).attr("data-column",(function(t){return rt(t)}));st.append("rect"),st.append("text").attr("text-anchor","middle").attr("dy",4).attr("class","cell-text"),P.selectAll("rect").watchTransition(tt,"heatMap: rect").attr("width",Y-A).attr("height",H-A).attr("rx",M).attr("ry",M).style("stroke",(function(t){return I(t)})),P.attr("class",(function(t){return isNaN(x(t))?"nv-cell cell-missing":"nv-cell"})).watchTransition(tt,"heatMap: cells").style({opacity:1,fill:function(t){return I(t)}}).attr("transform",(function(t){return"translate("+rt(t)*Y+","+it(t)*H+")"})).attr("class",(function(t){return isNaN(x(t))?"nv-cell cell-missing":"nv-cell"})),P.exit().remove(),P.selectAll("text").watchTransition(tt,"heatMap: cells text").text((function(t){return R(t)})).attr("x",(function(t){return(Y-A)/2})).attr("y",(function(t){return(H-A)/2})).style("fill",(function(t){return function(t){if(S){var e=d3.rgb(t);return(299*e.r+587*e.g+114*e.b)/1e3>=128?"#404040":"#EDEDED"}return"black"}(I(t))})).style("opacity",(function(){return b?1:0})),k.selectAll(".verticalGrid").watchTransition(tt,"heatMap: gridLines").attr("y1",0).attr("y2",y-A).attr("x1",(function(t){return t*Y-A/2})).attr("x2",(function(t){return t*Y-A/2}));var lt=Object.keys(K).length;k.selectAll(".horizontalGrid").watchTransition(tt,"heatMap: gridLines").attr("x1",(function(t){return 0==t||t==lt?-A:0})).attr("x2",(function(t){return 0==t||t==lt?m:m-A})).attr("y1",(function(t){return t*H-A/2})).attr("y2",(function(t){return t*H-A/2})),k.select(".cellGrid").watchTransition(tt,"heatMap: gridLines").style({"stroke-width":A,opacity:function(){return B?1:1e-6}}),k.selectAll(".x-meta"),k.selectAll(".y-meta");var ut=k.selectAll(".meta");$.watchTransition(tt,"heatMap: xMetaRect").attr("width",Y-A).attr("height",T()).attr("transform",(function(t,e){return"translate("+e*Y+",0)"})),nt.watchTransition(tt,"heatMap: yMetaRect").attr("width",L()).attr("height",H-A).attr("transform",(function(t,e){return"translate(0,"+e*H+")"})),k.select(".xMetaWrap").watchTransition(tt,"heatMap: xMetaWrap").attr("transform",(function(t,e){return"translate(0,"+(-T()-A-D)+")"})).style("opacity",(function(){return!1!==a?1:0})),k.select(".yMetaWrap").watchTransition(tt,"heatMap: yMetaWrap").attr("transform",(function(t,e){return"translate("+(-L()-A-D)+",0)"})).style("opacity",(function(){return!1!==s?1:0})),P.on("mouseover",(function(t,e){var n=at(t),r=rt(t),i=it(t);d3.selectAll(".nv-cell").each((function(t){n==at(t)?(d3.select(this).classed("cell-hover",!0),d3.select(this).classed("no-hover",!1)):(d3.select(this).classed("no-hover",!0),d3.select(this).classed("cell-hover",!1)),r==rt(t)&&(d3.select(this).classed("no-hover",!1),d3.select(this).classed("column-hover",!0)),i==it(t)&&(d3.select(this).classed("no-hover",!1),d3.select(this).classed("row-hover",!0))})),d3.selectAll(".x-meta").each((function(t,e){e==r?(d3.select(this).classed("cell-hover",!0),d3.select(this).classed("no-hover",!1)):(d3.select(this).classed("no-hover",!0),d3.select(this).classed("cell-hover",!1))})),d3.selectAll(".y-meta").each((function(t,e){e==i?(d3.select(this).classed("cell-hover",!0),d3.select(this).classed("no-hover",!1)):(d3.select(this).classed("no-hover",!0),d3.select(this).classed("cell-hover",!1))})),N.elementMouseover({value:q(Z,r)+" & "+q(K,i),series:{value:R(t),color:d3.select(this).select("rect").style("fill")},e:d3.event})})).on("mouseout",(function(t,e){d3.select(this).select("rect").node().getBBox();var n=d3.mouse(d3.select(".nv-heatMap").node()),r=n[0],i=n[1];(r+A>=m||i+A>=y||r<0||i<0)&&(j(),N.elementMouseout({e:d3.event}))})).on("mousemove",(function(t,e){N.elementMousemove({e:d3.event})})),ut.on("mouseover",(function(t,e){var n=-1!=d3.select(this).attr("class").indexOf("x-meta");d3.selectAll(".nv-cell").each((function(t){n&&e==rt(t)?(d3.select(this).classed("column-hover",!0),d3.select(this).classed("no-hover",!1)):n||e-Q.length!=it(t)?(d3.select(this).classed("no-hover",!0),d3.select(this).classed("column-hover",!1),d3.select(this).classed("row-hover",!1)):(d3.select(this).classed("row-hover",!0),d3.select(this).classed("no-hover",!1)),d3.select(this).classed("cell-hover",!1)})),d3.selectAll(".meta").classed("no-hover",!0),d3.select(this).classed("cell-hover",!0),d3.select(this).classed("no-hover",!1),N.elementMouseover({value:n?"Column meta":"Row meta",series:{value:t,color:d3.select(this).style("fill")}})})).on("mouseout",(function(t,e){var n=-1!=d3.select(this).attr("class").indexOf("x-meta"),r=(d3.select(this).node().getBBox(),d3.mouse(d3.select(n?".xMetaWrap":".yMetaWrap").node())),i=r[0],o=r[1];(o<0||i<0||n&&i+A>=m||!n&&o+A>=y)&&(j(),N.elementMouseout({e:d3.event}))})).on("mousemove",(function(t,e){N.elementMousemove({e:d3.event})}))})),tt.renderEnd("heatMap immediate"),st}return st.dispatch=N,st.options=r.utils.optionsFunc.bind(st),st._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return f},set:function(t){f=t}},showCellValues:{get:function(){return b},set:function(t){b=t}},x:{get:function(){return m},set:function(t){m=t}},y:{get:function(){return y},set:function(t){y=t}},cellValue:{get:function(){return x},set:function(t){x=t}},missingDataColor:{get:function(){return E},set:function(t){E=t}},missingDataLabel:{get:function(){return O},set:function(t){O=t}},xScale:{get:function(){return h},set:function(t){h=t}},yScale:{get:function(){return v},set:function(t){v=t}},colorScale:{get:function(){return g},set:function(t){g=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},colorRange:{get:function(){return l},set:function(t){l=t}},colorDomain:{get:function(){return u},set:function(t){u=t}},xMeta:{get:function(){return a},set:function(t){a=t}},yMeta:{get:function(){return s},set:function(t){s=t}},xMetaColorScale:{get:function(){return color},set:function(t){color=r.utils.getColor(t)}},yMetaColorScale:{get:function(){return color},set:function(t){color=r.utils.getColor(t)}},cellAspectRatio:{get:function(){return w},set:function(t){w=t}},cellRadius:{get:function(){return M},set:function(t){M=t}},cellHeight:{get:function(){return H}},cellWidth:{get:function(){return Y}},normalize:{get:function(){return C},set:function(t){C=t}},cellBorderWidth:{get:function(){return A},set:function(t){A=t}},highContrastText:{get:function(){return S},set:function(t){S=t}},cellValueFormat:{get:function(){return k},set:function(t){k=t}},id:{get:function(){return p},set:function(t){p=t}},metaOffset:{get:function(){return D},set:function(t){D=t}},xMetaHeight:{get:function(){return T},set:function(t){T=t}},yMetaWidth:{get:function(){return L},set:function(t){L=t}},showGrid:{get:function(){return B},set:function(t){B=t}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return _},set:function(t){_=t,tt.reset(_)}}}),r.utils.initOptions(st),st},r.models.heatMapChart=function(){"use strict";var t,e,n=r.models.heatMap(),i=r.models.legend(),o=(r.models.legend(),r.models.legend(),r.models.tooltip()),a=r.models.axis(),s=r.models.axis(),l={top:20,right:10,bottom:50,left:60},u=null,c=null,d=(r.utils.getColor(),!0),f=!1,p=!0,h=!0,v="left",g="top",m=0,y=null,x=d3.dispatch("beforeUpdate","renderEnd"),b=250;a.orient(g).showMaxMin(!1).tickFormat((function(t){return t})),s.orient(v).showMaxMin(!1).tickFormat((function(t){return t})),o.duration(0).headerEnabled(!0).keyFormatter((function(t,e){return a.tickFormat()(t,e)}));var k=r.utils.renderWatch(x,b);function w(o){return k.reset(),k.models(n),k.models(a),k.models(s),o.each((function(o){var y=d3.select(this);r.utils.initSVG(y);var M=r.utils.availableWidth(u,y,l),A=r.utils.availableHeight(c,y,l);if(w.update=function(){x.beforeUpdate(),y.transition().duration(b).call(w)},w.container=this,!o||!o.length)return r.utils.noData(w,y),w;y.selectAll(".nv-noData").remove(),t=n.xScale(),e=n.yScale();var C=y.selectAll("g.nv-wrap").data([o]),S=C.enter().append("g").attr("class","nvd3 nv-wrap").append("g"),W=C.select("g");S.append("g").attr("class","nv-heatMap"),S.append("g").attr("class","nv-legendWrap"),S.append("g").attr("class","nv-x nv-axis"),S.append("g").attr("class","nv-y nv-axis"),W.attr("transform","translate("+l.left+","+l.top+")"),n.width(M).height(A),W.select(".nv-heatMap").datum(o.filter((function(t){return!t.disabled}))).transition().call(n),n.cellAspectRatio()&&(A=n.cellHeight()*e.domain().length,n.height(A)),a.scale(t)._ticks(r.utils.calcTicksX(M/100,o)).tickSize(-A,0);var F=W.select(".nv-x.nv-axis");F.call(a).watchTransition(k,"heatMap: axisX").selectAll(".tick").style("opacity",(function(){return p?1:0})),F.selectAll("g").selectAll(".tick text").attr("transform",(function(t,e,n){return"translate(0, "+(f?n%2==0?"5":"17":"0")+") rotate("+(0!=m?m:"0")+" 0,0)"})).style("text-anchor",m>0?"start":m<0?"end":"middle");var E=-5;if("function"==typeof n.xMeta()&&(F.selectAll("text").style("text-anchor","middle"),E=-n.xMetaHeight()()/2-n.metaOffset()+3),"bottom"==g){if(F.watchTransition(k,"heatMap: axisX").attr("transform","translate(0,"+(A-E)+")"),!1!==n.xMeta()){var O=A+n.metaOffset()+n.cellBorderWidth();W.select(".xMetaWrap").watchTransition(k,"heatMap: xMetaWrap").attr("transform",(function(t,e){return"translate(0,"+O+")"}))}}else F.watchTransition(k,"heatMap: axisX").attr("transform","translate(0,"+E+")");s.scale(e)._ticks(r.utils.calcTicksY(A/36,o)).tickSize(-M,0);var D=W.select(".nv-y.nv-axis");D.call(s).watchTransition(k,"heatMap: axisY").selectAll(".tick").style("opacity",(function(){return h?1:0}));var N=-5;"function"==typeof n.yMeta()&&(D.selectAll("text").style("text-anchor","middle"),N=-n.yMetaWidth()()/2-n.metaOffset()),"right"==v?(D.attr("transform","translate("+(M-N)+",0)"),!1!==n.yMeta()&&(O=M+n.metaOffset()+n.cellBorderWidth(),W.select(".yMetaWrap").watchTransition(k,"heatMap: yMetaWrap").attr("transform",(function(t,e){return"translate("+O+",0)"})))):D.attr("transform","translate("+N+",0)");var _=W.select(".nv-legendWrap");i.width(M).color(n.colorScale().range());var T,L,B=(L=n.colorScale(),T="string"==typeof L.domain()[0]?L.domain():L.range().map((function(t){var e=L.invertExtent(t);return null===e[0]&&(e[0]=L.domain()[0]),null===e[1]&&(e[1]=L.domain()[1]),e})),T).map((function(t){return Array.isArray(t)?{key:t[0].toFixed(1)+" - "+t[1].toFixed(1)}:{key:t}}));_.datum(B).call(i).attr("transform","translate(0,"+("top"==g?A:-30)+")"),_.watchTransition(k,"heatMap: nv-legendWrap").style("opacity",(function(){return d?1:0}))})),d3.selectAll(".nv-axis").selectAll("line").style("stroke-opacity",0),d3.select(".nv-y").select("path.domain").remove(),k.renderEnd("heatMap chart immediate"),w}return n.dispatch.on("elementMouseover.tooltip",(function(t){o.data(t).hidden(!1)})),n.dispatch.on("elementMouseout.tooltip",(function(t){o.hidden(!0)})),n.dispatch.on("elementMousemove.tooltip",(function(t){o()})),w.dispatch=x,w.heatMap=n,w.legend=i,w.xAxis=a,w.yAxis=s,w.tooltip=o,w.options=r.utils.optionsFunc.bind(w),w._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},showLegend:{get:function(){return d},set:function(t){d=t}},noData:{get:function(){return y},set:function(t){y=t}},showXAxis:{get:function(){return p},set:function(t){p=t}},showYAxis:{get:function(){return h},set:function(t){h=t}},staggerLabels:{get:function(){return f},set:function(t){f=t}},rotateLabels:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return l},set:function(t){void 0!==t.top&&(l.top=t.top,t.top),l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return b},set:function(t){b=t,k.reset(b),n.duration(b),a.duration(b),s.duration(b)}},alignYAxis:{get:function(){return v},set:function(t){v=t,s.orient(t)}},alignXAxis:{get:function(){return g},set:function(t){g=t,a.orient(t)}}}),r.utils.inheritOptions(w,n),r.utils.initOptions(w),w},r.models.historicalBar=function(){"use strict";var t,e,n,i,o={top:0,right:0,bottom:0,left:0},a=null,s=null,l=Math.floor(1e4*Math.random()),u=null,c=d3.scale.linear(),d=d3.scale.linear(),f=function(t){return t.x},p=function(t){return t.y},h=[],v=[0],g=!1,m=!0,y=r.utils.defaultColor(),x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),b=!0,k=r.utils.renderWatch(x,0);function w(M){return M.each((function(w){k.reset(),u=d3.select(this);var M=r.utils.availableWidth(a,u,o),A=r.utils.availableHeight(s,u,o);r.utils.initSVG(u),c.domain(t||d3.extent(w[0].values.map(f).concat(h))),g?c.range(n||[.5*M/w[0].values.length,M*(w[0].values.length-.5)/w[0].values.length]):c.range(n||[0,M]),d.domain(e||d3.extent(w[0].values.map(p).concat(v))).range(i||[A,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1]));var C=u.selectAll("g.nv-wrap.nv-historicalBar-"+l).data([w[0].values]),S=C.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+l),W=S.append("defs"),F=S.append("g"),E=C.select("g");F.append("g").attr("class","nv-bars"),C.attr("transform","translate("+o.left+","+o.top+")"),u.on("click",(function(t,e){x.chartClick({data:t,index:e,pos:d3.event,id:l})})),W.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect"),C.select("#nv-chart-clip-path-"+l+" rect").attr("width",M).attr("height",A),E.attr("clip-path",m?"url(#nv-chart-clip-path-"+l+")":"");var O=C.select(".nv-bars").selectAll(".nv-bar").data((function(t){return t}),(function(t,e){return f(t,e)}));O.exit().remove(),O.enter().append("rect").attr("x",0).attr("y",(function(t,e){return r.utils.NaNtoZero(d(Math.max(0,p(t,e))))})).attr("height",(function(t,e){return r.utils.NaNtoZero(Math.abs(d(p(t,e))-d(0)))})).attr("transform",(function(t,e){return"translate("+(c(f(t,e))-M/w[0].values.length*.45)+",0)"})).on("mouseover",(function(t,e){b&&(d3.select(this).classed("hover",!0),x.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")}))})).on("mouseout",(function(t,e){b&&(d3.select(this).classed("hover",!1),x.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")}))})).on("mousemove",(function(t,e){b&&x.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})})).on("click",(function(t,e){b&&(x.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation())})).on("dblclick",(function(t,e){b&&(x.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())})),O.attr("fill",(function(t,e){return y(t,e)})).attr("class",(function(t,e,n){return(p(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e})).watchTransition(k,"bars").attr("transform",(function(t,e){return"translate("+(c(f(t,e))-M/w[0].values.length*.45)+",0)"})).attr("width",M/w[0].values.length*.9),O.watchTransition(k,"bars").attr("y",(function(t,e){var n=p(t,e)<0?d(0):d(0)-d(p(t,e))<1?d(0)-1:d(p(t,e));return r.utils.NaNtoZero(n)})).attr("height",(function(t,e){return r.utils.NaNtoZero(Math.max(Math.abs(d(p(t,e))-d(0)),1))}))})),k.renderEnd("historicalBar immediate"),w}return w.highlightPoint=function(t,e){u.select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},w.clearHighlights=function(){u.select(".nv-bars .nv-bar.hover").classed("hover",!1)},w.dispatch=x,w.options=r.utils.optionsFunc.bind(w),w._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},forceX:{get:function(){return h},set:function(t){h=t}},forceY:{get:function(){return v},set:function(t){v=t}},padData:{get:function(){return g},set:function(t){g=t}},x:{get:function(){return f},set:function(t){f=t}},y:{get:function(){return p},set:function(t){p=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return t},set:function(e){t=e}},yDomain:{get:function(){return e},set:function(t){e=t}},xRange:{get:function(){return n},set:function(t){n=t}},yRange:{get:function(){return i},set:function(t){i=t}},clipEdge:{get:function(){return m},set:function(t){m=t}},id:{get:function(){return l},set:function(t){l=t}},interactive:{get:function(){return b},set:function(t){b=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return y},set:function(t){y=r.utils.getColor(t)}}}),r.utils.initOptions(w),w},r.models.historicalBarChart=function(t){"use strict";var e,n,i=t||r.models.historicalBar(),o=r.models.axis(),a=r.models.axis(),s=r.models.legend(),l=r.interactiveGuideline(),u=r.models.tooltip(),c={top:30,right:90,bottom:50,left:90},d=null,f=r.utils.defaultColor(),p=null,h=null,v=!1,g=!0,m=!0,y=!1,x=!1,b={},k=null,w=null,M=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),A=250;o.orient("bottom").tickPadding(7),a.orient(y?"right":"left"),u.duration(0).headerEnabled(!1).valueFormatter((function(t,e){return a.tickFormat()(t,e)})).headerFormatter((function(t,e){return o.tickFormat()(t,e)}));var C=r.utils.renderWatch(M,0);function S(t){return t.each((function(u){C.reset(),C.models(i),g&&C.models(o),m&&C.models(a);var w=d3.select(this);r.utils.initSVG(w);var W,F=r.utils.availableWidth(p,w,c),E=r.utils.availableHeight(h,w,c);if(S.update=function(){w.transition().duration(A).call(S)},S.container=this,b.disabled=u.map((function(t){return!!t.disabled})),!k)for(W in k={},b)b[W]instanceof Array?k[W]=b[W].slice(0):k[W]=b[W];if(!(u&&u.length&&u.filter((function(t){return t.values.length})).length))return r.utils.noData(S,w),S;w.selectAll(".nv-noData").remove(),e=i.xScale(),n=i.yScale();var O=w.selectAll("g.nv-wrap.nv-historicalBarChart").data([u]),D=O.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),N=O.select("g");D.append("g").attr("class","nv-x nv-axis"),D.append("g").attr("class","nv-y nv-axis"),D.append("g").attr("class","nv-barsWrap"),D.append("g").attr("class","nv-legendWrap"),D.append("g").attr("class","nv-interactive"),v?(s.width(F),N.select(".nv-legendWrap").datum(u).call(s),d||s.height()===c.top||(c.top=s.height(),E=r.utils.availableHeight(h,w,c)),O.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")):N.select(".nv-legendWrap").selectAll("*").remove(),O.attr("transform","translate("+c.left+","+c.top+")"),y&&N.select(".nv-y.nv-axis").attr("transform","translate("+F+",0)"),x&&(l.width(F).height(E).margin({left:c.left,top:c.top}).svgContainer(w).xScale(e),O.select(".nv-interactive").call(l)),i.width(F).height(E).color(u.map((function(t,e){return t.color||f(t,e)})).filter((function(t,e){return!u[e].disabled}))),N.select(".nv-barsWrap").datum(u.filter((function(t){return!t.disabled}))).transition().call(i),g&&(o.scale(e)._ticks(r.utils.calcTicksX(F/100,u)).tickSize(-E,0),N.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),N.select(".nv-x.nv-axis").transition().call(o)),m&&(a.scale(n)._ticks(r.utils.calcTicksY(E/36,u)).tickSize(-F,0),N.select(".nv-y.nv-axis").transition().call(a)),l.dispatch.on("elementMousemove",(function(t){i.clearHighlights();var e,n,s,c=[];u.filter((function(t,e){return t.seriesIndex=e,!t.disabled})).forEach((function(o,a){n=r.interactiveBisect(o.values,t.pointXValue,S.x()),i.highlightPoint(n,!0);var l=o.values[n];void 0!==l&&(void 0===e&&(e=l),void 0===s&&(s=S.xScale()(S.x()(l,n))),c.push({key:o.key,value:S.y()(l,n),color:f(o,o.seriesIndex),data:o.values[n]}))}));var d=o.tickFormat()(S.x()(e,n));l.tooltip.valueFormatter((function(t,e){return a.tickFormat()(t)})).data({value:d,index:n,series:c})(),l.renderGuideLine(s)})),l.dispatch.on("elementMouseout",(function(t){M.tooltipHide(),i.clearHighlights()})),s.dispatch.on("legendClick",(function(e,n){e.disabled=!e.disabled,u.filter((function(t){return!t.disabled})).length||u.map((function(t){return t.disabled=!1,O.selectAll(".nv-series").classed("disabled",!1),t})),b.disabled=u.map((function(t){return!!t.disabled})),M.stateChange(b),t.transition().call(S)})),s.dispatch.on("legendDblclick",(function(t){u.forEach((function(t){t.disabled=!0})),t.disabled=!1,b.disabled=u.map((function(t){return!!t.disabled})),M.stateChange(b),S.update()})),M.on("changeState",(function(t){void 0!==t.disabled&&(u.forEach((function(e,n){e.disabled=t.disabled[n]})),b.disabled=t.disabled),S.update()}))})),C.renderEnd("historicalBarChart immediate"),S}return i.dispatch.on("elementMouseover.tooltip",(function(t){t.series={key:S.x()(t.data),value:S.y()(t.data),color:t.color},u.data(t).hidden(!1)})),i.dispatch.on("elementMouseout.tooltip",(function(t){u.hidden(!0)})),i.dispatch.on("elementMousemove.tooltip",(function(t){u()})),S.dispatch=M,S.bars=i,S.legend=s,S.xAxis=o,S.yAxis=a,S.interactiveLayer=l,S.tooltip=u,S.options=r.utils.optionsFunc.bind(S),S._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return v},set:function(t){v=t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return m},set:function(t){m=t}},defaultState:{get:function(){return k},set:function(t){k=t}},noData:{get:function(){return w},set:function(t){w=t}},margin:{get:function(){return c},set:function(t){void 0!==t.top&&(c.top=t.top,d=t.top),c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},color:{get:function(){return f},set:function(t){f=r.utils.getColor(t),s.color(f),i.color(f)}},duration:{get:function(){return A},set:function(t){A=t,C.reset(A),a.duration(A),o.duration(A)}},rightAlignYAxis:{get:function(){return y},set:function(t){y=t,a.orient(t?"right":"left")}},useInteractiveGuideline:{get:function(){return x},set:function(t){x=t,!0===t&&S.interactive(!1)}}}),r.utils.inheritOptions(S,i),r.utils.initOptions(S),S},r.models.ohlcBarChart=function(){var t=r.models.historicalBarChart(r.models.ohlcBar());return t.useInteractiveGuideline(!0),t.interactiveLayer.tooltip.contentGenerator((function(e){var n=e.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+e.value+"</h3><table><tr><td>open:</td><td>"+t.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+t.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+t.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+t.yAxis.tickFormat()(n.low)+"</td></tr></table>"})),t},r.models.candlestickBarChart=function(){var t=r.models.historicalBarChart(r.models.candlestickBar());return t.useInteractiveGuideline(!0),t.interactiveLayer.tooltip.contentGenerator((function(e){var n=e.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+e.value+"</h3><table><tr><td>open:</td><td>"+t.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+t.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+t.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+t.yAxis.tickFormat()(n.low)+"</td></tr></table>"})),t},r.models.legend=function(){"use strict";var t={top:5,right:0,bottom:5,left:0},e=400,n=20,i=function(t){return t.key},o=function(t){return t},a=r.utils.getColor(),s=20,l=!0,u=32,c=!0,d=!0,f=!0,p=!1,h=!1,v=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),g="classic";function m(y){function x(t,e){return"furious"!=g?"#000":h?t.disengaged?"#000":"#fff":h?void 0:(t.color||(t.color=a(t,e)),t.disabled?t.color:"#fff")}function b(t,e){return h&&"furious"==g&&t.disengaged?"#eee":t.color||a(t,e)}function k(t,e){return h&&"furious"==g?1:t.disabled?0:1}return y.each((function(a){var m=e-t.left-t.right,y=d3.select(this);r.utils.initSVG(y);var w=y.selectAll("g.nv-legend").data([a]),M=w.enter().append("g").attr("class","nvd3 nv-legend").append("g"),A=w.select("g");c?w.attr("transform","translate("+-t.right+","+t.top+")"):w.attr("transform","translate("+t.left+","+t.top+")");var C,S,W=A.selectAll(".nv-series").data((function(t){return"furious"!=g?t:t.filter((function(t){return!!h||!t.disengaged}))})),F=W.enter().append("g").attr("class","nv-series");switch(g){case"furious":S=23;break;case"classic":S=20}"classic"==g?(F.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),C=W.select(".nv-legend-symbol")):"furious"==g&&(F.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),C=W.select(".nv-legend-symbol"),F.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),W.select(".nv-check-box").each((function(t,e){d3.select(this).selectAll("path").attr("stroke",x(t,e))}))),F.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var E=W.select("text.nv-legend-text");W.on("mouseover",(function(t,e){v.legendMouseover(t,e)})).on("mouseout",(function(t,e){v.legendMouseout(t,e)})).on("click",(function(t,e){v.legendClick(t,e);var n=W.data();if(d){if("classic"==g)p?(n.forEach((function(t){t.disabled=!0})),t.disabled=!1):(t.disabled=!t.disabled,n.every((function(t){return t.disabled}))&&n.forEach((function(t){t.disabled=!1})));else if("furious"==g)if(h)t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled;else if(!h){t.disabled=!t.disabled,t.userDisabled=t.disabled;var r=n.filter((function(t){return!t.disengaged}));r.every((function(t){return t.userDisabled}))&&n.forEach((function(t){t.disabled=t.userDisabled=!1}))}v.stateChange({disabled:n.map((function(t){return!!t.disabled})),disengaged:n.map((function(t){return!!t.disengaged}))})}})).on("dblclick",(function(t,e){if(f){if("furious"==g&&h)return;if(v.legendDblclick(t,e),d){var n=W.data();n.forEach((function(t){t.disabled=!0,"furious"==g&&(t.userDisabled=t.disabled)})),t.disabled=!1,"furious"==g&&(t.userDisabled=t.disabled),v.stateChange({disabled:n.map((function(t){return!!t.disabled}))})}}})),W.classed("nv-disabled",(function(t){return t.userDisabled})),W.exit().remove(),E.attr("fill",x).text((function(t){return o(i(t))}));var O=0;if(l){var D=[];W.each((function(t,e){var n,a;if(o(i(t))&&o(i(t)).length>s){var l=o(i(t)).substring(0,s);n=d3.select(this).select("text").text(l+"..."),d3.select(this).append("svg:title").text(o(i(t)))}else n=d3.select(this).select("text");try{if((a=n.node().getComputedTextLength())<=0)throw Error()}catch(t){a=r.utils.calcApproxTextWidth(n)}D.push(a+u)}));var N=0,_=[];for(O=0;O<m&&N<D.length;)_[N]=D[N],O+=D[N++];for(0===N&&(N=1);O>m&&N>1;){_=[],N--;for(var T=0;T<D.length;T++)D[T]>(_[T%N]||0)&&(_[T%N]=D[T]);O=_.reduce((function(t,e,n,r){return t+e}))}for(var L=[],B=0,P=0;B<N;B++)L[B]=P,P+=_[B];W.attr("transform",(function(t,e){return"translate("+L[e%N]+","+(5+Math.floor(e/N)*S)+")"})),c?A.attr("transform","translate("+(e-t.right-O)+","+t.top+")"):A.attr("transform","translate(0,"+t.top+")"),n=t.top+t.bottom+Math.ceil(D.length/N)*S}else{var I,z=5,V=5,j=0;W.attr("transform",(function(n,r){var i=d3.select(this).select("text").node().getComputedTextLength()+u;return I=V,e<t.left+t.right+I+i&&(V=I=5,z+=S),(V+=i)>j&&(j=V),O<I+j&&(O=I+j),"translate("+I+","+z+")"})),A.attr("transform","translate("+(e-t.right-j)+","+t.top+")"),n=t.top+t.bottom+z+15}"furious"==g&&(C.attr("width",(function(t,e){return E[0][e].getComputedTextLength()+27})).attr("height",18).attr("y",-9).attr("x",-15),M.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),A.select(".nv-legend-bg").transition().duration(300).attr("x",-S).attr("width",O+S-12).attr("height",n+10).attr("y",-t.top-10).attr("opacity",h?1:0)),C.style("fill",b).style("fill-opacity",k).style("stroke",b)})),m}return m.dispatch=v,m.options=r.utils.optionsFunc.bind(m),m._options=Object.create({},{width:{get:function(){return e},set:function(t){e=t}},height:{get:function(){return n},set:function(t){n=t}},key:{get:function(){return i},set:function(t){i=t}},keyFormatter:{get:function(){return o},set:function(t){o=t}},align:{get:function(){return l},set:function(t){l=t}},maxKeyLength:{get:function(){return s},set:function(t){s=t}},rightAlign:{get:function(){return c},set:function(t){c=t}},padding:{get:function(){return u},set:function(t){u=t}},updateState:{get:function(){return d},set:function(t){d=t}},enableDoubleClick:{get:function(){return f},set:function(t){f=t}},radioButtonMode:{get:function(){return p},set:function(t){p=t}},expanded:{get:function(){return h},set:function(t){h=t}},vers:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return t},set:function(e){t.top=void 0!==e.top?e.top:t.top,t.right=void 0!==e.right?e.right:t.right,t.bottom=void 0!==e.bottom?e.bottom:t.bottom,t.left=void 0!==e.left?e.left:t.left}},color:{get:function(){return a},set:function(t){a=r.utils.getColor(t)}}}),r.utils.initOptions(m),m},r.models.line=function(){"use strict";var t,e,n=r.models.scatter(),i={top:0,right:0,bottom:0,left:0},o=960,a=500,s=null,l=r.utils.defaultColor(),u=function(t){return t.x},c=function(t){return t.y},d=function(t,e){return!isNaN(c(t,e))&&null!==c(t,e)},f=function(t){return t.area},p=!1,h="linear",v=250,g=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");n.pointSize(16).pointDomain([16,256]);var m,y,x=r.utils.renderWatch(g,v);function b(v){return x.reset(),x.models(n),v.each((function(v){s=d3.select(this);var g=r.utils.availableWidth(o,s,i),b=r.utils.availableHeight(a,s,i);r.utils.initSVG(s),t=n.xScale(),e=n.yScale(),m=m||t,y=y||e;var k=s.selectAll("g.nv-wrap.nv-line").data([v]),w=k.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),M=w.append("defs"),A=w.append("g"),C=k.select("g");A.append("g").attr("class","nv-groups"),A.append("g").attr("class","nv-scatterWrap"),k.attr("transform","translate("+i.left+","+i.top+")"),n.width(g).height(b);var S=k.select(".nv-scatterWrap");S.call(n),M.append("clipPath").attr("id","nv-edge-clip-"+n.id()).append("rect"),k.select("#nv-edge-clip-"+n.id()+" rect").attr("width",g).attr("height",b>0?b:0),C.attr("clip-path",p?"url(#nv-edge-clip-"+n.id()+")":""),S.attr("clip-path",p?"url(#nv-edge-clip-"+n.id()+")":"");var W=k.select(".nv-groups").selectAll(".nv-group").data((function(t){return t}),(function(t){return t.key}));W.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",(function(t){return t.strokeWidth||1.5})).style("fill-opacity",1e-6),W.exit().remove(),W.attr("class",(function(t,e){return(t.classed||"")+" nv-group nv-series-"+e})).classed("hover",(function(t){return t.hover})).style("fill",(function(t,e){return l(t,e)})).style("stroke",(function(t,e){return l(t,e)})),W.watchTransition(x,"line: groups").style("stroke-opacity",1).style("fill-opacity",(function(t){return t.fillOpacity||.5}));var F=W.selectAll("path.nv-area").data((function(t){return f(t)?[t]:[]}));F.enter().append("path").attr("class","nv-area").attr("d",(function(t){return d3.svg.area().interpolate(h).defined(d).x((function(t,e){return r.utils.NaNtoZero(m(u(t,e)))})).y0((function(t,e){return r.utils.NaNtoZero(y(c(t,e)))})).y1((function(t,n){return y(e.domain()[0]<=0?e.domain()[1]>=0?0:e.domain()[1]:e.domain()[0])})).apply(this,[t.values])})),W.exit().selectAll("path.nv-area").remove(),F.watchTransition(x,"line: areaPaths").attr("d",(function(n){return d3.svg.area().interpolate(h).defined(d).x((function(e,n){return r.utils.NaNtoZero(t(u(e,n)))})).y0((function(t,n){return r.utils.NaNtoZero(e(c(t,n)))})).y1((function(t,n){return e(e.domain()[0]<=0?e.domain()[1]>=0?0:e.domain()[1]:e.domain()[0])})).apply(this,[n.values])}));var E=W.selectAll("path.nv-line").data((function(t){return[t.values]}));E.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(h).defined(d).x((function(t,e){return r.utils.NaNtoZero(m(u(t,e)))})).y((function(t,e){return r.utils.NaNtoZero(y(c(t,e)))}))),E.watchTransition(x,"line: linePaths").attr("d",d3.svg.line().interpolate(h).defined(d).x((function(e,n){return r.utils.NaNtoZero(t(u(e,n)))})).y((function(t,n){return r.utils.NaNtoZero(e(c(t,n)))}))),m=t.copy(),y=e.copy()})),x.renderEnd("line immediate"),b}return b.dispatch=g,b.scatter=n,n.dispatch.on("elementClick",(function(){g.elementClick.apply(this,arguments)})),n.dispatch.on("elementMouseover",(function(){g.elementMouseover.apply(this,arguments)})),n.dispatch.on("elementMouseout",(function(){g.elementMouseout.apply(this,arguments)})),b.options=r.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},defined:{get:function(){return d},set:function(t){d=t}},interpolate:{get:function(){return h},set:function(t){h=t}},clipEdge:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},duration:{get:function(){return v},set:function(t){v=t,x.reset(v),n.duration(v)}},isArea:{get:function(){return f},set:function(t){f=d3.functor(t)}},x:{get:function(){return u},set:function(t){u=t,n.x(t)}},y:{get:function(){return c},set:function(t){c=t,n.y(t)}},color:{get:function(){return l},set:function(t){l=r.utils.getColor(t),n.color(l)}}}),r.utils.inheritOptions(b,n),r.utils.initOptions(b),b},r.models.lineChart=function(){"use strict";var t,e,n=r.models.line(),i=r.models.axis(),o=r.models.axis(),a=r.models.legend(),s=r.interactiveGuideline(),l=r.models.tooltip(),u=r.models.focus(r.models.line()),c={top:30,right:20,bottom:50,left:60},d=null,f=r.utils.defaultColor(),p=null,h=null,v=!0,g="top",m=!0,y=!0,x=!1,b=!1,k=!1,w=r.utils.state(),M=null,A=null,C=d3.dispatch("stateChange","changeState","renderEnd"),S=250;i.orient("bottom").tickPadding(7),o.orient(x?"right":"left"),n.clipEdge(!0).duration(0),l.valueFormatter((function(t,e){return o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)})),s.tooltip.valueFormatter((function(t,e){return o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)}));var W=r.utils.renderWatch(C,S);function F(l){return W.reset(),W.models(n),m&&W.models(i),y&&W.models(o),l.each((function(l){var A=d3.select(this);r.utils.initSVG(A);var W,E=r.utils.availableWidth(p,A,c),O=r.utils.availableHeight(h,A,c)-(k?u.height():0);if(F.update=function(){0===S?A.call(F):A.transition().duration(S).call(F)},F.container=this,w.setter(function(t){return function(e){void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(l),F.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled}))}}}(l)).update(),w.disabled=l.map((function(t){return!!t.disabled})),!M)for(W in M={},w)w[W]instanceof Array?M[W]=w[W].slice(0):M[W]=w[W];if(!(l&&l.length&&l.filter((function(t){return t.values.length})).length))return r.utils.noData(F,A),F;A.selectAll(".nv-noData").remove(),u.dispatch.on("onBrush",(function(t){z(t)})),t=n.xScale(),e=n.yScale();var D=A.selectAll("g.nv-wrap.nv-lineChart").data([l]),N=D.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),_=D.select("g");N.append("g").attr("class","nv-legendWrap");var T=N.append("g").attr("class","nv-focus");T.append("g").attr("class","nv-background").append("rect"),T.append("g").attr("class","nv-x nv-axis"),T.append("g").attr("class","nv-y nv-axis"),T.append("g").attr("class","nv-linesWrap"),T.append("g").attr("class","nv-interactive"),N.append("g").attr("class","nv-focusWrap"),v?(a.width(E),_.select(".nv-legendWrap").datum(l).call(a),"bottom"===g?(c.bottom=i.height()+a.height(),O=r.utils.availableHeight(h,A,c),_.select(".nv-legendWrap").attr("transform","translate(0,"+(O+i.height())+")")):"top"===g&&(d||a.height()===c.top||(c.top=a.height(),O=r.utils.availableHeight(h,A,c)-(k?u.height():0)),D.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")"))):_.select(".nv-legendWrap").selectAll("*").remove(),D.attr("transform","translate("+c.left+","+c.top+")"),x&&_.select(".nv-y.nv-axis").attr("transform","translate("+E+",0)"),b&&(s.width(E).height(O).margin({left:c.left,top:c.top}).svgContainer(A).xScale(t),D.select(".nv-interactive").call(s)),_.select(".nv-focus .nv-background rect").attr("width",E).attr("height",O),n.width(E).height(O).color(l.map((function(t,e){return t.color||f(t,e)})).filter((function(t,e){return!l[e].disabled})));var L=_.select(".nv-linesWrap").datum(l.filter((function(t){return!t.disabled})));function B(){m&&_.select(".nv-focus .nv-x.nv-axis").transition().duration(S).call(i)}function P(){y&&_.select(".nv-focus .nv-y.nv-axis").transition().duration(S).call(o)}if(m&&i.scale(t)._ticks(r.utils.calcTicksX(E/100,l)).tickSize(-O,0),y&&o.scale(e)._ticks(r.utils.calcTicksY(O/36,l)).tickSize(-E,0),_.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+O+")"),k||null!==u.brush.extent()){u.width(E),_.select(".nv-focusWrap").style("display",k?"initial":"none").attr("transform","translate(0,"+(O+c.bottom+u.margin().top)+")").call(u);var I=u.brush.empty()?u.xDomain():u.brush.extent();null!==I&&z(I)}else L.transition().call(n),B(),P();function z(t){_.select(".nv-focus .nv-linesWrap").datum(l.filter((function(t){return!t.disabled})).map((function(e,r){return{key:e.key,area:e.area,classed:e.classed,values:e.values.filter((function(e,r){return n.x()(e,r)>=t[0]&&n.x()(e,r)<=t[1]})),disableTooltip:e.disableTooltip}}))).transition().duration(S).call(n),B(),P()}a.dispatch.on("stateChange",(function(t){for(var e in t)w[e]=t[e];C.stateChange(w),F.update()})),s.dispatch.on("elementMousemove",(function(e){n.clearHighlights();var i,a,c,d=[];if(l.filter((function(t,e){return t.seriesIndex=e,!t.disabled&&!t.disableTooltip})).forEach((function(o,s){var l=null!==u.brush.extent()?u.brush.empty()?u.xScale().domain():u.brush.extent():t.domain(),p=o.values.filter((function(t,e){return l[0]<=l[1]?n.x()(t,e)>=l[0]&&n.x()(t,e)<=l[1]:n.x()(t,e)>=l[1]&&n.x()(t,e)<=l[0]}));if(p.length>0){var h=p[a=r.interactiveBisect(p,e.pointXValue,n.x())],v=F.y()(h,a);if(null!==v&&n.highlightPoint(s,o.values.indexOf(h),!0),void 0===h)return;void 0===i&&(i=h),void 0===c&&(c=F.xScale()(F.x()(h,a))),d.push({key:o.key,value:v,color:f(o,o.seriesIndex),data:h})}})),d.length>2){var p=F.yScale().invert(e.mouseY),h=.03*Math.abs(F.yScale().domain()[0]-F.yScale().domain()[1]),v=r.nearestValueIndex(d.map((function(t){return t.value})),p,h);null!==v&&(d[v].highlight=!0)}void 0!==a&&(s.tooltip.valueFormatter(s.tooltip.valueFormatter()||function(t,e){return null==t?"N/A":o.tickFormat()(t)}).data({value:F.x()(i,a),index:a,series:d})(),s.renderGuideLine(c))})),s.dispatch.on("elementClick",(function(t){var e,i=[];l.filter((function(t,e){return t.seriesIndex=e,!t.disabled})).forEach((function(n){var o=r.interactiveBisect(n.values,t.pointXValue,F.x()),a=n.values[o];if(void 0!==a){void 0===e&&(e=F.xScale()(F.x()(a,o)));var s=F.yScale()(F.y()(a,o));i.push({point:a,pointIndex:o,pos:[e,s],seriesIndex:n.seriesIndex,series:n})}})),n.dispatch.elementClick(i)})),s.dispatch.on("elementMouseout",(function(t){n.clearHighlights()})),C.on("changeState",(function(t){void 0!==t.disabled&&l.length===t.disabled.length&&(l.forEach((function(e,n){e.disabled=t.disabled[n]})),w.disabled=t.disabled),F.update()}))})),W.renderEnd("lineChart immediate"),F}return n.dispatch.on("elementMouseover.tooltip",(function(t){t.series.disableTooltip||l.data(t).hidden(!1)})),n.dispatch.on("elementMouseout.tooltip",(function(t){l.hidden(!0)})),F.dispatch=C,F.lines=n,F.legend=a,F.focus=u,F.xAxis=i,F.x2Axis=u.xAxis,F.yAxis=o,F.y2Axis=u.yAxis,F.interactiveLayer=s,F.tooltip=l,F.state=w,F.dispatch=C,F.options=r.utils.optionsFunc.bind(F),F._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return v},set:function(t){v=t}},legendPosition:{get:function(){return g},set:function(t){g=t}},showXAxis:{get:function(){return m},set:function(t){m=t}},showYAxis:{get:function(){return y},set:function(t){y=t}},defaultState:{get:function(){return M},set:function(t){M=t}},noData:{get:function(){return A},set:function(t){A=t}},focusEnable:{get:function(){return k},set:function(t){k=t}},focusHeight:{get:function(){return u.height()},set:function(t){u.height(t)}},focusShowAxisX:{get:function(){return u.showXAxis()},set:function(t){u.showXAxis(t)}},focusShowAxisY:{get:function(){return u.showYAxis()},set:function(t){u.showYAxis(t)}},brushExtent:{get:function(){return u.brushExtent()},set:function(t){u.brushExtent(t)}},focusMargin:{get:function(){return u.margin},set:function(t){void 0!==t.top&&(c.top=t.top,d=t.top),u.margin.right=void 0!==t.right?t.right:u.margin.right,u.margin.bottom=void 0!==t.bottom?t.bottom:u.margin.bottom,u.margin.left=void 0!==t.left?t.left:u.margin.left}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return S},set:function(t){S=t,W.reset(S),n.duration(S),u.duration(S),i.duration(S),o.duration(S)}},color:{get:function(){return f},set:function(t){f=r.utils.getColor(t),a.color(f),n.color(f),u.color(f)}},interpolate:{get:function(){return n.interpolate()},set:function(t){n.interpolate(t),u.interpolate(t)}},xTickFormat:{get:function(){return i.tickFormat()},set:function(t){i.tickFormat(t),u.xTickFormat(t)}},yTickFormat:{get:function(){return o.tickFormat()},set:function(t){o.tickFormat(t),u.yTickFormat(t)}},x:{get:function(){return n.x()},set:function(t){n.x(t),u.x(t)}},y:{get:function(){return n.y()},set:function(t){n.y(t),u.y(t)}},rightAlignYAxis:{get:function(){return x},set:function(t){x=t,o.orient(x?"right":"left")}},useInteractiveGuideline:{get:function(){return b},set:function(t){(b=t)&&(n.interactive(!1),n.useVoronoi(!1))}}}),r.utils.inheritOptions(F,n),r.utils.initOptions(F),F},r.models.lineWithFocusChart=function(){return r.models.lineChart().margin({bottom:30}).focusEnable(!0)},r.models.linePlusBarChart=function(){"use strict";var t,e,n,i,o,a,s,l=r.models.line(),u=r.models.line(),c=r.models.historicalBar(),d=r.models.historicalBar(),f=r.models.axis(),p=r.models.axis(),h=r.models.axis(),v=r.models.axis(),g=r.models.axis(),m=r.models.axis(),y=r.models.legend(),x=d3.svg.brush(),b=r.models.tooltip(),k={top:30,right:30,bottom:30,left:60},w=null,M={top:0,right:30,bottom:20,left:60},A=null,C=null,S=function(t){return t.x},W=function(t){return t.y},F=r.utils.defaultColor(),E=!0,O=!0,D=!1,N=!0,_=50,T=null,L=null,B=d3.dispatch("brush","stateChange","changeState"),P=0,I=r.utils.state(),z=null,V=" (left axis)",j=" (right axis)",G=!1;l.clipEdge(!0),u.interactive(!1),u.pointActive((function(t){return!1})),f.orient("bottom").tickPadding(5),h.orient("left"),v.orient("right"),p.orient("bottom").tickPadding(5),g.orient("left"),m.orient("right"),b.headerEnabled(!0).headerFormatter((function(t,e){return f.tickFormat()(t,e)}));var H=function(t){return t.every((function(t){return t.disabled}))};function Y(b){return b.each((function(b){var L=d3.select(this);r.utils.initSVG(L);var R,X=r.utils.availableWidth(A,L,k),q=r.utils.availableHeight(C,L,k)-(O?_:0),Z=_-M.top-M.bottom;if(Y.update=function(){L.transition().duration(P).call(Y)},Y.container=this,I.setter(function(t){return function(e){void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(b),Y.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled}))}}}(b)).update(),I.disabled=b.map((function(t){return!!t.disabled})),!z)for(R in z={},I)I[R]instanceof Array?z[R]=I[R].slice(0):z[R]=I[R];if(!(b&&b.length&&b.filter((function(t){return t.values.length})).length))return r.utils.noData(Y,L),Y;L.selectAll(".nv-noData").remove();var K=b.filter((function(t){return!t.disabled&&t.bar})),U=b.filter((function(t){return!t.bar}));e=K.length&&!G?c.xScale():l.xScale(),n=p.scale(),i=G?l.yScale():c.yScale(),o=G?c.yScale():l.yScale(),a=G?u.yScale():d.yScale(),s=G?d.yScale():u.yScale();var Q=b.filter((function(t){return!t.disabled&&(G?!t.bar:t.bar)})).map((function(t){return t.values.map((function(t,e){return{x:S(t,e),y:W(t,e)}}))})),J=b.filter((function(t){return!t.disabled&&(G?t.bar:!t.bar)})).map((function(t){return t.values.map((function(t,e){return{x:S(t,e),y:W(t,e)}}))}));e.range([0,X]),n.domain(d3.extent(d3.merge(Q.concat(J)),(function(t){return t.x}))).range([0,X]);var $=L.selectAll("g.nv-wrap.nv-linePlusBar").data([b]),tt=$.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),et=$.select("g");tt.append("g").attr("class","nv-legendWrap");var nt=tt.append("g").attr("class","nv-focus");nt.append("g").attr("class","nv-x nv-axis"),nt.append("g").attr("class","nv-y1 nv-axis"),nt.append("g").attr("class","nv-y2 nv-axis"),nt.append("g").attr("class","nv-barsWrap"),nt.append("g").attr("class","nv-linesWrap");var rt=tt.append("g").attr("class","nv-context");if(rt.append("g").attr("class","nv-x nv-axis"),rt.append("g").attr("class","nv-y1 nv-axis"),rt.append("g").attr("class","nv-y2 nv-axis"),rt.append("g").attr("class","nv-barsWrap"),rt.append("g").attr("class","nv-linesWrap"),rt.append("g").attr("class","nv-brushBackground"),rt.append("g").attr("class","nv-x nv-brush"),E){var it=y.align()?X/2:X,ot=y.align()?it:0;y.width(it),et.select(".nv-legendWrap").datum(b.map((function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=G?t.originalKey+(t.bar?j:V):t.originalKey+(t.bar?V:j),t}))).call(y),w||y.height()===k.top||(k.top=y.height(),q=r.utils.availableHeight(C,L,k)-_),et.select(".nv-legendWrap").attr("transform","translate("+ot+","+-k.top+")")}else et.select(".nv-legendWrap").selectAll("*").remove();$.attr("transform","translate("+k.left+","+k.top+")"),et.select(".nv-context").style("display",O?"initial":"none"),d.width(X).height(Z).color(b.map((function(t,e){return t.color||F(t,e)})).filter((function(t,e){return!b[e].disabled&&b[e].bar}))),u.width(X).height(Z).color(b.map((function(t,e){return t.color||F(t,e)})).filter((function(t,e){return!b[e].disabled&&!b[e].bar})));var at=et.select(".nv-context .nv-barsWrap").datum(K.length?K:[{values:[]}]),st=et.select(".nv-context .nv-linesWrap").datum(H(U)?[{values:[]}]:U.filter((function(t){return!t.disabled})));et.select(".nv-context").attr("transform","translate(0,"+(q+k.bottom+M.top)+")"),at.transition().call(d),st.transition().call(u),N&&(p._ticks(r.utils.calcTicksX(X/100,b)).tickSize(-Z,0),et.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),et.select(".nv-context .nv-x.nv-axis").transition().call(p)),D&&(g.scale(a)._ticks(Z/36).tickSize(-X,0),m.scale(s)._ticks(Z/36).tickSize(K.length?0:-X,0),et.select(".nv-context .nv-y3.nv-axis").style("opacity",K.length?1:0).attr("transform","translate(0,"+n.range()[0]+")"),et.select(".nv-context .nv-y2.nv-axis").style("opacity",U.length?1:0).attr("transform","translate("+n.range()[1]+",0)"),et.select(".nv-context .nv-y1.nv-axis").transition().call(g),et.select(".nv-context .nv-y2.nv-axis").transition().call(m)),x.x(n).on("brush",dt),T&&x.extent(T);var lt=et.select(".nv-brushBackground").selectAll("g").data([T||x.extent()]),ut=lt.enter().append("g");ut.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",Z),ut.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",Z);var ct=et.select(".nv-x.nv-brush").call(x);function dt(){T=x.empty()?null:x.extent(),t=x.empty()?n.domain():x.extent(),B.brush({extent:t,brush:x}),x.empty()||x.extent(T),lt.data([x.empty()?n.domain():T]).each((function(t,e){var r=n(t[0])-n.range()[0],i=n.range()[1]-n(t[1]);d3.select(this).select(".left").attr("width",r<0?0:r),d3.select(this).select(".right").attr("x",n(t[1])).attr("width",i<0?0:i)})),c.width(X).height(q).color(b.map((function(t,e){return t.color||F(t,e)})).filter((function(t,e){return!b[e].disabled&&b[e].bar}))),l.width(X).height(q).color(b.map((function(t,e){return t.color||F(t,e)})).filter((function(t,e){return!b[e].disabled&&!b[e].bar})));var a=et.select(".nv-focus .nv-barsWrap").datum(K.length?K.map((function(e,n){return{key:e.key,values:e.values.filter((function(e,n){return c.x()(e,n)>=t[0]&&c.x()(e,n)<=t[1]}))}})):[{values:[]}]),s=et.select(".nv-focus .nv-linesWrap").datum(H(U)?[{values:[]}]:U.filter((function(t){return!t.disabled})).map((function(e,n){return{area:e.area,fillOpacity:e.fillOpacity,strokeWidth:e.strokeWidth,key:e.key,values:e.values.filter((function(e,n){return l.x()(e,n)>=t[0]&&l.x()(e,n)<=t[1]}))}})));e=K.length&&!G?c.xScale():l.xScale(),f.scale(e)._ticks(r.utils.calcTicksX(X/100,b)).tickSize(-q,0),f.domain([Math.ceil(t[0]),Math.floor(t[1])]),et.select(".nv-x.nv-axis").transition().duration(P).call(f),a.transition().duration(P).call(c),s.transition().duration(P).call(l),et.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),h.scale(i)._ticks(r.utils.calcTicksY(q/36,b)).tickSize(-X,0),v.scale(o)._ticks(r.utils.calcTicksY(q/36,b)),G?v.tickSize(U.length?0:-X,0):v.tickSize(K.length?0:-X,0);var u=K.length?1:0,d=U.length&&!H(U)?1:0,p=G?d:u,g=G?u:d;et.select(".nv-focus .nv-y1.nv-axis").style("opacity",p),et.select(".nv-focus .nv-y2.nv-axis").style("opacity",g).attr("transform","translate("+e.range()[1]+",0)"),et.select(".nv-focus .nv-y1.nv-axis").transition().duration(P).call(h),et.select(".nv-focus .nv-y2.nv-axis").transition().duration(P).call(v)}ct.selectAll("rect").attr("height",Z),ct.selectAll(".resize").append("path").attr("d",(function(t){var e=+("e"==t),n=e?1:-1,r=Z/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)})),y.dispatch.on("stateChange",(function(t){for(var e in t)I[e]=t[e];B.stateChange(I),Y.update()})),B.on("changeState",(function(t){void 0!==t.disabled&&(b.forEach((function(e,n){e.disabled=t.disabled[n]})),I.disabled=t.disabled),Y.update()})),dt()})),Y}return l.dispatch.on("elementMouseover.tooltip",(function(t){b.duration(100).valueFormatter((function(t,e){return(G?{main:h,focus:g}:{main:v,focus:m}).main.tickFormat()(t,e)})).data(t).hidden(!1)})),l.dispatch.on("elementMouseout.tooltip",(function(t){b.hidden(!0)})),c.dispatch.on("elementMouseover.tooltip",(function(t){t.value=Y.x()(t.data),t.series={value:Y.y()(t.data),color:t.color},b.duration(0).valueFormatter((function(t,e){return(G?{main:v,focus:m}:{main:h,focus:g}).main.tickFormat()(t,e)})).data(t).hidden(!1)})),c.dispatch.on("elementMouseout.tooltip",(function(t){b.hidden(!0)})),c.dispatch.on("elementMousemove.tooltip",(function(t){b()})),Y.dispatch=B,Y.legend=y,Y.lines=l,Y.lines2=u,Y.bars=c,Y.bars2=d,Y.xAxis=f,Y.x2Axis=p,Y.y1Axis=h,Y.y2Axis=v,Y.y3Axis=g,Y.y4Axis=m,Y.tooltip=b,Y.options=r.utils.optionsFunc.bind(Y),Y._options=Object.create({},{width:{get:function(){return A},set:function(t){A=t}},height:{get:function(){return C},set:function(t){C=t}},showLegend:{get:function(){return E},set:function(t){E=t}},brushExtent:{get:function(){return T},set:function(t){T=t}},noData:{get:function(){return L},set:function(t){L=t}},focusEnable:{get:function(){return O},set:function(t){O=t}},focusHeight:{get:function(){return _},set:function(t){_=t}},focusShowAxisX:{get:function(){return N},set:function(t){N=t}},focusShowAxisY:{get:function(){return D},set:function(t){D=t}},legendLeftAxisHint:{get:function(){return V},set:function(t){V=t}},legendRightAxisHint:{get:function(){return j},set:function(t){j=t}},margin:{get:function(){return k},set:function(t){void 0!==t.top&&(k.top=t.top,w=t.top),k.right=void 0!==t.right?t.right:k.right,k.bottom=void 0!==t.bottom?t.bottom:k.bottom,k.left=void 0!==t.left?t.left:k.left}},focusMargin:{get:function(){return M},set:function(t){M.top=void 0!==t.top?t.top:M.top,M.right=void 0!==t.right?t.right:M.right,M.bottom=void 0!==t.bottom?t.bottom:M.bottom,M.left=void 0!==t.left?t.left:M.left}},duration:{get:function(){return P},set:function(t){P=t}},color:{get:function(){return F},set:function(t){F=r.utils.getColor(t),y.color(F)}},x:{get:function(){return S},set:function(t){S=t,l.x(t),u.x(t),c.x(t),d.x(t)}},y:{get:function(){return W},set:function(t){W=t,l.y(t),u.y(t),c.y(t),d.y(t)}},switchYAxisOrder:{get:function(){return G},set:function(t){if(G!==t){var e=h;h=v,v=e;var n=g;g=m,m=n}G=t,h.orient("left"),v.orient("right"),g.orient("left"),m.orient("right")}}}),r.utils.inheritOptions(Y,l),r.utils.initOptions(Y),Y},r.models.multiBar=function(){"use strict";var t,e,n,i,o,a,s,l={top:0,right:0,bottom:0,left:0},u=960,c=500,d=d3.scale.ordinal(),f=d3.scale.linear(),p=Math.floor(1e4*Math.random()),h=null,v=function(t){return t.x},g=function(t){return t.y},m=[0],y=!0,x=!1,b="zero",k=r.utils.defaultColor(),w=!1,M=null,A=500,C=.1,S=.75,W=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),F=r.utils.renderWatch(W,A),E=0;function O(D){return F.reset(),D.each((function(O){var D=u-l.left-l.right,N=c-l.top-l.bottom;h=d3.select(this),r.utils.initSVG(h);var _=0;if(w&&O.length&&(w=[{values:O[0].values.map((function(t){return{x:t.x,y:0,series:t.series,size:.01}}))}]),x){var T=d3.layout.stack().offset(b).values((function(t){return t.values})).y(g)(!O.length&&w?w:O);T.forEach((function(t,e){t.nonStackable?(O[e].nonStackableSeries=_++,T[e]=O[e]):e>0&&T[e-1].nonStackable&&T[e].values.map((function(t,n){t.y0-=T[e-1].values[n].y,t.y1=t.y0+t.y}))})),O=T}O.forEach((function(t,e){t.values.forEach((function(n){n.series=e,n.key=t.key}))})),x&&O.length>0&&O[0].values.map((function(t,e){var n=0,r=0;O.map((function(t,i){if(!O[i].nonStackable){var o=t.values[e];o.size=Math.abs(o.y),o.y<0?(o.y1=r,r-=o.size):(o.y1=o.size+n,n+=o.size)}}))}));var L=e&&n?[]:O.map((function(t,e){return t.values.map((function(t,n){return{x:v(t,n),y:g(t,n),y0:t.y0,y1:t.y1,idx:e}}))}));d.domain(e||d3.merge(L).map((function(t){return t.x}))).rangeBands(i||[0,D],C),f.domain(n||d3.extent(d3.merge(L).map((function(t){var e=t.y;return x&&!O[t.idx].nonStackable&&(e=t.y>0?t.y1:t.y1+t.y),e})).concat(m))).range(o||[N,0]),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]):d.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1])),a=a||d,s=s||f;var B=h.selectAll("g.nv-wrap.nv-multibar").data([O]),P=B.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),I=P.append("defs"),z=P.append("g"),V=B.select("g");z.append("g").attr("class","nv-groups"),B.attr("transform","translate("+l.left+","+l.top+")"),I.append("clipPath").attr("id","nv-edge-clip-"+p).append("rect"),B.select("#nv-edge-clip-"+p+" rect").attr("width",D).attr("height",N),V.attr("clip-path",y?"url(#nv-edge-clip-"+p+")":"");var j=B.select(".nv-groups").selectAll(".nv-group").data((function(t){return t}),(function(t,e){return e}));j.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var G=F.transition(j.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,A)).attr("y",(function(t,e,n){var r=s(0)||0;return x&&O[t.series]&&!O[t.series].nonStackable&&(r=s(t.y0)),r})).attr("height",0).remove();G.delay&&G.delay((function(t,e){return e*(A/(E+1))-e})),j.attr("class",(function(t,e){return"nv-group nv-series-"+e})).classed("hover",(function(t){return t.hover})).style("fill",(function(t,e){return k(t,e)})).style("stroke",(function(t,e){return k(t,e)})),j.style("stroke-opacity",1).style("fill-opacity",S);var H=j.selectAll("rect.nv-bar").data((function(t){return w&&!O.length?w.values:t.values}));H.exit().remove(),H.enter().append("rect").attr("class",(function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"})).attr("x",(function(t,e,n){return x&&!O[n].nonStackable?0:n*d.rangeBand()/O.length})).attr("y",(function(t,e,n){return s(x&&!O[n].nonStackable?t.y0:0)||0})).attr("height",0).attr("width",(function(t,e,n){return d.rangeBand()/(x&&!O[n].nonStackable?1:O.length)})).attr("transform",(function(t,e){return"translate("+d(v(t,e))+",0)"})),H.style("fill",(function(t,e,n){return k(t,n,e)})).style("stroke",(function(t,e,n){return k(t,n,e)})).on("mouseover",(function(t,e,n){d3.select(this).classed("hover",!0),W.elementMouseover({data:t,index:e,series:O[n],color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e,n){d3.select(this).classed("hover",!1),W.elementMouseout({data:t,index:e,series:O[n],color:d3.select(this).style("fill")})})).on("mousemove",(function(t,e,n){W.elementMousemove({data:t,index:e,series:O[n],color:d3.select(this).style("fill")})})).on("click",(function(t,e,n){W.elementClick({data:t,index:e,series:O[n],color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()})).on("dblclick",(function(t,e,n){W.elementDblClick({data:t,index:e,series:O[n],color:d3.select(this).style("fill")}),d3.event.stopPropagation()})),H.attr("class",(function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"})).attr("transform",(function(t,e){return"translate("+d(v(t,e))+",0)"})),M&&(t||(t=O.map((function(){return!0}))),H.style("fill",(function(e,n,r){return d3.rgb(M(e,n)).darker(t.map((function(t,e){return e})).filter((function(e,n){return!t[n]}))[r]).toString()})).style("stroke",(function(e,n,r){return d3.rgb(M(e,n)).darker(t.map((function(t,e){return e})).filter((function(e,n){return!t[n]}))[r]).toString()})));var Y=H.watchTransition(F,"multibar",Math.min(250,A)).delay((function(t,e){return e*A/O[0].values.length}));x?Y.attr("y",(function(t,e,n){return O[n].nonStackable?g(t,e)<0?f(0):f(0)-f(g(t,e))<-1?f(0)-1:f(g(t,e))||0:f(t.y1)})).attr("height",(function(t,e,n){return O[n].nonStackable?Math.max(Math.abs(f(g(t,e))-f(0)),0)||0:Math.max(Math.abs(f(t.y+t.y0)-f(t.y0)),0)})).attr("x",(function(t,e,n){var r=0;return O[n].nonStackable&&(r=t.series*d.rangeBand()/O.length,O.length!==_&&(r=O[n].nonStackableSeries*d.rangeBand()/(2*_))),r})).attr("width",(function(t,e,n){if(O[n].nonStackable){var r=d.rangeBand()/_;return O.length!==_&&(r=d.rangeBand()/(2*_)),r}return d.rangeBand()})):Y.attr("x",(function(t,e){return t.series*d.rangeBand()/O.length})).attr("width",d.rangeBand()/O.length).attr("y",(function(t,e){return g(t,e)<0?f(0):f(0)-f(g(t,e))<1?f(0)-1:f(g(t,e))||0})).attr("height",(function(t,e){return Math.max(Math.abs(f(g(t,e))-f(0)),1)||0})),a=d.copy(),s=f.copy(),O[0]&&O[0].values&&(E=O[0].values.length)})),F.renderEnd("multibar immediate"),O}return O.dispatch=W,O.options=r.utils.optionsFunc.bind(O),O._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return v},set:function(t){v=t}},y:{get:function(){return g},set:function(t){g=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceY:{get:function(){return m},set:function(t){m=t}},stacked:{get:function(){return x},set:function(t){x=t}},stackOffset:{get:function(){return b},set:function(t){b=t}},clipEdge:{get:function(){return y},set:function(t){y=t}},disabled:{get:function(){return t},set:function(e){t=e}},id:{get:function(){return p},set:function(t){p=t}},hideable:{get:function(){return w},set:function(t){w=t}},groupSpacing:{get:function(){return C},set:function(t){C=t}},fillOpacity:{get:function(){return S},set:function(t){S=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return A},set:function(t){A=t,F.reset(A)}},color:{get:function(){return k},set:function(t){k=r.utils.getColor(t)}},barColor:{get:function(){return M},set:function(t){M=t?r.utils.getColor(t):null}}}),r.utils.initOptions(O),O},r.models.multiBarChart=function(){"use strict";var t,e,n=r.models.multiBar(),i=r.models.axis(),o=r.models.axis(),a=r.interactiveGuideline(),s=r.models.legend(),l=r.models.legend(),u=r.models.tooltip(),c={top:30,right:20,bottom:50,left:60},d=null,f=null,p=null,h=r.utils.defaultColor(),v=!0,g={},m=!0,y=null,x=!0,b=!0,k=!1,w=!0,M=!1,A=!1,C=0,S=r.utils.state(),W=null,F=null,E=d3.dispatch("stateChange","changeState","renderEnd"),O=function(){return v?180:0},D=250,N=!1;S.stacked=!1,n.stacked(!1),i.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat((function(t){return t})),o.orient(k?"right":"left").tickFormat(d3.format(",.1f")),u.duration(0).valueFormatter((function(t,e){return o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)})),a.tooltip.valueFormatter((function(t,e){return null==t?"N/A":o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)})),a.tooltip.valueFormatter((function(t,e){return null==t?"N/A":o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)})),a.tooltip.duration(0).valueFormatter((function(t,e){return o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)})),l.updateState(!1);var _=r.utils.renderWatch(E),T=!1;function L(F){return _.reset(),_.models(n),x&&_.models(i),b&&_.models(o),F.each((function(F){var _=d3.select(this);r.utils.initSVG(_);var B,P=r.utils.availableWidth(f,_,c),I=r.utils.availableHeight(p,_,c);if(L.update=function(){0===D?_.call(L):_.transition().duration(D).call(L)},L.container=this,S.setter(function(t){return function(e){void 0!==e.stacked&&(T=e.stacked),void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(F),L.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled})),stacked:T}}}(F)).update(),S.disabled=F.map((function(t){return!!t.disabled})),!W)for(B in W={},S)S[B]instanceof Array?W[B]=S[B].slice(0):W[B]=S[B];if(!(F&&F.length&&F.filter((function(t){return t.values.length})).length))return r.utils.noData(L,_),L;_.selectAll(".nv-noData").remove(),t=n.xScale(),e=n.yScale();var z=_.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([F]),V=z.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),j=z.select("g");if(V.append("g").attr("class","nv-x nv-axis"),V.append("g").attr("class","nv-y nv-axis"),V.append("g").attr("class","nv-barsWrap"),V.append("g").attr("class","nv-legendWrap"),V.append("g").attr("class","nv-controlsWrap"),V.append("g").attr("class","nv-interactive"),m?"bottom"===y?(s.width(P-c.right),j.select(".nv-legendWrap").datum(F).call(s),c.bottom=i.height()+s.height(),I=r.utils.availableHeight(p,_,c),j.select(".nv-legendWrap").attr("transform","translate(0,"+(I+i.height())+")")):(s.width(P-O()),j.select(".nv-legendWrap").datum(F).call(s),d||s.height()===c.top||(c.top=s.height(),I=r.utils.availableHeight(p,_,c)),j.select(".nv-legendWrap").attr("transform","translate("+O()+","+-c.top+")")):j.select(".nv-legendWrap").selectAll("*").remove(),v){var G=[{key:g.grouped||"Grouped",disabled:n.stacked()},{key:g.stacked||"Stacked",disabled:!n.stacked()}];l.width(O()).color(["#444","#444","#444"]),j.select(".nv-controlsWrap").datum(G).attr("transform","translate(0,"+-c.top+")").call(l)}else j.select(".nv-controlsWrap").selectAll("*").remove();if(z.attr("transform","translate("+c.left+","+c.top+")"),k&&j.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)"),n.disabled(F.map((function(t){return t.disabled}))).width(P).height(I).color(F.map((function(t,e){return t.color||h(t,e)})).filter((function(t,e){return!F[e].disabled}))),j.select(".nv-barsWrap").datum(F.filter((function(t){return!t.disabled}))).call(n),x){i.scale(t)._ticks(r.utils.calcTicksX(P/100,F)).tickSize(-I,0),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),j.select(".nv-x.nv-axis").call(i);var H=j.select(".nv-x.nv-axis > g").selectAll("g");if(H.selectAll("line, text").style("opacity",1),M){var Y=function(t,e){return"translate("+t+","+e+")"};H.selectAll("text").attr("transform",(function(t,e,n){return Y(0,n%2==0?5:17)}));var R=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;j.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",(function(t,e){return Y(0,0===e||R%2!=0?17:5)}))}A&&j.selectAll(".tick text").call(r.utils.wrapTicks,L.xAxis.rangeBand()),w&&H.filter((function(t,e){return e%Math.ceil(F[0].values.length/(P/100))!=0})).selectAll("text, line").style("opacity",0),C&&H.selectAll(".tick text").attr("transform","rotate("+C+" 0,0)").style("text-anchor",C>0?"start":"end"),j.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}b&&(o.scale(e)._ticks(r.utils.calcTicksY(I/36,F)).tickSize(-P,0),j.select(".nv-y.nv-axis").call(o)),N&&(a.width(P).height(I).margin({left:c.left,top:c.top}).svgContainer(_).xScale(t),z.select(".nv-interactive").call(a)),s.dispatch.on("stateChange",(function(t){for(var e in t)S[e]=t[e];E.stateChange(S),L.update()})),l.dispatch.on("legendClick",(function(t,e){if(t.disabled){switch(G=G.map((function(t){return t.disabled=!0,t})),t.disabled=!1,t.key){case"Grouped":case g.grouped:n.stacked(!1);break;case"Stacked":case g.stacked:n.stacked(!0)}S.stacked=n.stacked(),E.stateChange(S),L.update()}})),E.on("changeState",(function(t){void 0!==t.disabled&&(F.forEach((function(e,n){e.disabled=t.disabled[n]})),S.disabled=t.disabled),void 0!==t.stacked&&(n.stacked(t.stacked),S.stacked=t.stacked,T=t.stacked),L.update()})),N?(a.dispatch.on("elementMousemove",(function(e){if(null!=e.pointXValue){var n,r,i,o,s=[];F.filter((function(t,e){return t.seriesIndex=e,!t.disabled})).forEach((function(a,l){r=t.domain().indexOf(e.pointXValue);var u=a.values[r];void 0!==u&&(o=u.x,void 0===n&&(n=u),void 0===i&&(i=e.mouseX),s.push({key:a.key,value:L.y()(u,r),color:h(a,a.seriesIndex),data:a.values[r]}))})),a.tooltip.data({value:o,index:r,series:s})(),a.renderGuideLine(i)}})),a.dispatch.on("elementMouseout",(function(t){a.tooltip.hidden(!0)}))):(n.dispatch.on("elementMouseover.tooltip",(function(t){t.value=L.x()(t.data),t.series={key:t.data.key,value:L.y()(t.data),color:t.color},u.data(t).hidden(!1)})),n.dispatch.on("elementMouseout.tooltip",(function(t){u.hidden(!0)})),n.dispatch.on("elementMousemove.tooltip",(function(t){u()})))})),_.renderEnd("multibarchart immediate"),L}return L.dispatch=E,L.multibar=n,L.legend=s,L.controls=l,L.xAxis=i,L.yAxis=o,L.state=S,L.tooltip=u,L.interactiveLayer=a,L.options=r.utils.optionsFunc.bind(L),L._options=Object.create({},{width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return p},set:function(t){p=t}},showLegend:{get:function(){return m},set:function(t){m=t}},legendPosition:{get:function(){return y},set:function(t){y=t}},showControls:{get:function(){return v},set:function(t){v=t}},controlLabels:{get:function(){return g},set:function(t){g=t}},showXAxis:{get:function(){return x},set:function(t){x=t}},showYAxis:{get:function(){return b},set:function(t){b=t}},defaultState:{get:function(){return W},set:function(t){W=t}},noData:{get:function(){return F},set:function(t){F=t}},reduceXTicks:{get:function(){return w},set:function(t){w=t}},rotateLabels:{get:function(){return C},set:function(t){C=t}},staggerLabels:{get:function(){return M},set:function(t){M=t}},wrapLabels:{get:function(){return A},set:function(t){A=!!t}},margin:{get:function(){return c},set:function(t){void 0!==t.top&&(c.top=t.top,d=t.top),c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return D},set:function(t){D=t,n.duration(D),i.duration(D),o.duration(D),_.reset(D)}},color:{get:function(){return h},set:function(t){h=r.utils.getColor(t),s.color(h)}},rightAlignYAxis:{get:function(){return k},set:function(t){k=t,o.orient(k?"right":"left")}},useInteractiveGuideline:{get:function(){return N},set:function(t){N=t}},barColor:{get:function(){return n.barColor},set:function(t){n.barColor(t),s.color((function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()}))}}}),r.utils.inheritOptions(L,n),r.utils.initOptions(L),L},r.models.multiBarHorizontal=function(){"use strict";var t,e,n,i,o,a,s,l={top:0,right:0,bottom:0,left:0},u=960,c=500,d=Math.floor(1e4*Math.random()),f=null,p=d3.scale.ordinal(),h=d3.scale.linear(),v=function(t){return t.x},g=function(t){return t.y},m=function(t){return t.yErr},y=[0],x=r.utils.defaultColor(),b=null,k=!1,w=!1,M=60,A=.1,C=.75,S=d3.format(",.2f"),W=250,F=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),E=r.utils.renderWatch(F,W);function O(d){return E.reset(),d.each((function(d){var W=u-l.left-l.right,O=c-l.top-l.bottom;f=d3.select(this),r.utils.initSVG(f),k&&(d=d3.layout.stack().offset("zero").values((function(t){return t.values})).y(g)(d)),d.forEach((function(t,e){t.values.forEach((function(n){n.series=e,n.key=t.key}))})),k&&d[0].values.map((function(t,e){var n=0,r=0;d.map((function(t){var i=t.values[e];i.size=Math.abs(i.y),i.y<0?(i.y1=r-i.size,r-=i.size):(i.y1=n,n+=i.size)}))}));var D=e&&n?[]:d.map((function(t){return t.values.map((function(t,e){return{x:v(t,e),y:g(t,e),y0:t.y0,y1:t.y1}}))}));p.domain(e||d3.merge(D).map((function(t){return t.x}))).rangeBands(i||[0,O],A),h.domain(n||d3.extent(d3.merge(D).map((function(t){return k?t.y>0?t.y1+t.y:t.y1:t.y})).concat(y))),w&&!k?h.range(o||[h.domain()[0]<0?M:0,W-(h.domain()[1]>0?M:0)]):h.range(o||[0,W]),a=a||p,s=s||d3.scale.linear().domain(h.domain()).range([h(0),h(0)]);var N=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([d]),_=N.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),T=(_.append("defs"),_.append("g"));N.select("g"),T.append("g").attr("class","nv-groups"),N.attr("transform","translate("+l.left+","+l.top+")");var L=N.select(".nv-groups").selectAll(".nv-group").data((function(t){return t}),(function(t,e){return e}));L.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),L.exit().watchTransition(E,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),L.attr("class",(function(t,e){return"nv-group nv-series-"+e})).classed("hover",(function(t){return t.hover})).style("fill",(function(t,e){return x(t,e)})).style("stroke",(function(t,e){return x(t,e)})),L.watchTransition(E,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",C);var B=L.selectAll("g.nv-bar").data((function(t){return t.values}));B.exit().remove();var P=B.enter().append("g").attr("transform",(function(t,e,n){return"translate("+s(k?t.y0:0)+","+(k?0:n*p.rangeBand()/d.length+p(v(t,e)))+")"}));P.append("rect").attr("width",0).attr("height",p.rangeBand()/(k?1:d.length)),B.on("mouseover",(function(t,e){d3.select(this).classed("hover",!0),F.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){d3.select(this).classed("hover",!1),F.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){F.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})})).on("mousemove",(function(t,e){F.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})})).on("click",(function(t,e){F.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()})).on("dblclick",(function(t,e){F.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()})),m(d[0],0)&&(P.append("polyline"),B.select("polyline").attr("fill","none").attr("points",(function(t,e){var n=m(t,e),r=.8*p.rangeBand()/(2*(k?1:d.length));return[[(n=(n=n.length?n:[-Math.abs(n),Math.abs(n)]).map((function(n){return h(n+(g(t,e)<0?0:g(t,e)))-h(0)})))[0],-r],[n[0],r],[n[0],0],[n[1],0],[n[1],-r],[n[1],r]].map((function(t){return t.join(",")})).join(" ")})).attr("transform",(function(t,e){return"translate(0, "+p.rangeBand()/(2*(k?1:d.length))+")"}))),P.append("text"),w&&!k?(B.select("text").attr("text-anchor",(function(t,e){return g(t,e)<0?"end":"start"})).attr("y",p.rangeBand()/(2*d.length)).attr("dy",".32em").text((function(t,e){var n=S(g(t,e)),r=m(t,e);return void 0===r?n:r.length?n+"+"+S(Math.abs(r[1]))+"-"+S(Math.abs(r[0])):n+""+S(Math.abs(r))})),B.watchTransition(E,"multibarhorizontal: bars").select("text").attr("x",(function(t,e){return g(t,e)<0?-4:h(g(t,e))-h(0)+4}))):B.selectAll("text").text(""),B.selectAll("text.nv-bar-label").text(""),B.attr("class",(function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"})),b&&(t||(t=d.map((function(){return!0}))),B.style("fill",(function(e,n,r){return d3.rgb(b(e,n)).darker(t.map((function(t,e){return e})).filter((function(e,n){return!t[n]}))[r]).toString()})).style("stroke",(function(e,n,r){return d3.rgb(b(e,n)).darker(t.map((function(t,e){return e})).filter((function(e,n){return!t[n]}))[r]).toString()}))),k?B.watchTransition(E,"multibarhorizontal: bars").attr("transform",(function(t,e){return"translate("+h(t.y1)+","+p(v(t,e))+")"})).select("rect").attr("width",(function(t,e){return Math.abs(h(g(t,e)+t.y0)-h(t.y0))||0})).attr("height",p.rangeBand()):B.watchTransition(E,"multibarhorizontal: bars").attr("transform",(function(t,e){return"translate("+(g(t,e)<0?h(g(t,e)):h(0))+","+(t.series*p.rangeBand()/d.length+p(v(t,e)))+")"})).select("rect").attr("height",p.rangeBand()/d.length).attr("width",(function(t,e){return Math.max(Math.abs(h(g(t,e))-h(0)),1)||0})),a=p.copy(),s=h.copy()})),E.renderEnd("multibarHorizontal immediate"),O}return O.dispatch=F,O.options=r.utils.optionsFunc.bind(O),O._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return v},set:function(t){v=t}},y:{get:function(){return g},set:function(t){g=t}},yErr:{get:function(){return m},set:function(t){m=t}},xScale:{get:function(){return p},set:function(t){p=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceY:{get:function(){return y},set:function(t){y=t}},stacked:{get:function(){return k},set:function(t){k=t}},showValues:{get:function(){return w},set:function(t){w=t}},disabled:{get:function(){return t},set:function(e){t=e}},id:{get:function(){return d},set:function(t){d=t}},valueFormat:{get:function(){return S},set:function(t){S=t}},valuePadding:{get:function(){return M},set:function(t){M=t}},groupSpacing:{get:function(){return A},set:function(t){A=t}},fillOpacity:{get:function(){return C},set:function(t){C=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return W},set:function(t){W=t,E.reset(W)}},color:{get:function(){return x},set:function(t){x=r.utils.getColor(t)}},barColor:{get:function(){return b},set:function(t){b=t?r.utils.getColor(t):null}}}),r.utils.initOptions(O),O},r.models.multiBarHorizontalChart=function(){"use strict";var t,e,n=r.models.multiBarHorizontal(),i=r.models.axis(),o=r.models.axis(),a=r.models.legend().height(30),s=r.models.legend().height(30),l=r.models.tooltip(),u={top:30,right:20,bottom:50,left:60},c=null,d=null,f=null,p=r.utils.defaultColor(),h=!0,v="top",g={},m=!0,y="top",x=!0,b=!0,k=!1,w=r.utils.state(),M=null,A=null,C=d3.dispatch("stateChange","changeState","renderEnd"),S=function(){return h?180:0},W=250;w.stacked=!1,n.stacked(k),i.orient("left").tickPadding(5).showMaxMin(!1).tickFormat((function(t){return t})),o.orient("bottom").tickFormat(d3.format(",.1f")),l.duration(0).valueFormatter((function(t,e){return o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)})),s.updateState(!1);var F=r.utils.renderWatch(C,W);function E(l){return F.reset(),F.models(n),x&&F.models(i),b&&F.models(o),l.each((function(l){var A=d3.select(this);r.utils.initSVG(A);var F,O=r.utils.availableWidth(d,A,u),D=r.utils.availableHeight(f,A,u);if(E.update=function(){A.transition().duration(W).call(E)},E.container=this,k=n.stacked(),w.setter(function(t){return function(e){void 0!==e.stacked&&(k=e.stacked),void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(l),E.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled})),stacked:k}}}(l)).update(),w.disabled=l.map((function(t){return!!t.disabled})),!M)for(F in M={},w)w[F]instanceof Array?M[F]=w[F].slice(0):M[F]=w[F];if(!(l&&l.length&&l.filter((function(t){return t.values.length})).length))return r.utils.noData(E,A),E;A.selectAll(".nv-noData").remove(),t=n.xScale(),e=n.yScale().clamp(!0);var N=A.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([l]),_=N.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),T=N.select("g");if(_.append("g").attr("class","nv-x nv-axis"),_.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),_.append("g").attr("class","nv-barsWrap"),_.append("g").attr("class","nv-legendWrap"),_.append("g").attr("class","nv-controlsWrap"),m?(a.width(O-S()),T.select(".nv-legendWrap").datum(l).call(a),"bottom"===y?(u.bottom=i.height()+a.height(),D=r.utils.availableHeight(f,A,u),T.select(".nv-legendWrap").attr("transform","translate("+S()+","+(D+i.height())+")")):"top"===y&&(c||a.height()===u.top||(u.top=a.height(),D=r.utils.availableHeight(f,A,u)),T.select(".nv-legendWrap").attr("transform","translate("+S()+","+-u.top+")"))):T.select(".nv-legendWrap").selectAll("*").remove(),h){var L=[{key:g.grouped||"Grouped",disabled:n.stacked()},{key:g.stacked||"Stacked",disabled:!n.stacked()}];s.width(S()).color(["#444","#444","#444"]),"bottom"===v?(u.bottom=i.height()+a.height(),D=r.utils.availableHeight(f,A,u),T.select(".nv-controlsWrap").datum(L).attr("transform","translate(0,"+(D+i.height())+")").call(s)):"top"===v&&T.select(".nv-controlsWrap").datum(L).attr("transform","translate(0,"+-u.top+")").call(s)}else T.select(".nv-controlsWrap").selectAll("*").remove();N.attr("transform","translate("+u.left+","+u.top+")"),n.disabled(l.map((function(t){return t.disabled}))).width(O).height(D).color(l.map((function(t,e){return t.color||p(t,e)})).filter((function(t,e){return!l[e].disabled}))),T.select(".nv-barsWrap").datum(l.filter((function(t){return!t.disabled}))).transition().call(n),x&&(i.scale(t)._ticks(r.utils.calcTicksY(D/24,l)).tickSize(-O,0),T.select(".nv-x.nv-axis").call(i),T.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text")),b&&(o.scale(e)._ticks(r.utils.calcTicksX(O/100,l)).tickSize(-D,0),T.select(".nv-y.nv-axis").attr("transform","translate(0,"+D+")"),T.select(".nv-y.nv-axis").call(o)),T.select(".nv-zeroLine line").attr("x1",e(0)).attr("x2",e(0)).attr("y1",0).attr("y2",-D),a.dispatch.on("stateChange",(function(t){for(var e in t)w[e]=t[e];C.stateChange(w),E.update()})),s.dispatch.on("legendClick",(function(t,e){if(t.disabled){switch(L=L.map((function(t){return t.disabled=!0,t})),t.disabled=!1,t.key){case"Grouped":case g.grouped:n.stacked(!1);break;case"Stacked":case g.stacked:n.stacked(!0)}w.stacked=n.stacked(),C.stateChange(w),k=n.stacked(),E.update()}})),C.on("changeState",(function(t){void 0!==t.disabled&&(l.forEach((function(e,n){e.disabled=t.disabled[n]})),w.disabled=t.disabled),void 0!==t.stacked&&(n.stacked(t.stacked),w.stacked=t.stacked,k=t.stacked),E.update()}))})),F.renderEnd("multibar horizontal chart immediate"),E}return n.dispatch.on("elementMouseover.tooltip",(function(t){t.value=E.x()(t.data),t.series={key:t.data.key,value:E.y()(t.data),color:t.color},l.data(t).hidden(!1)})),n.dispatch.on("elementMouseout.tooltip",(function(t){l.hidden(!0)})),n.dispatch.on("elementMousemove.tooltip",(function(t){l()})),E.dispatch=C,E.multibar=n,E.legend=a,E.controls=s,E.xAxis=i,E.yAxis=o,E.state=w,E.tooltip=l,E.options=r.utils.optionsFunc.bind(E),E._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return f},set:function(t){f=t}},showLegend:{get:function(){return m},set:function(t){m=t}},legendPosition:{get:function(){return y},set:function(t){y=t}},controlsPosition:{get:function(){return v},set:function(t){v=t}},showControls:{get:function(){return h},set:function(t){h=t}},controlLabels:{get:function(){return g},set:function(t){g=t}},showXAxis:{get:function(){return x},set:function(t){x=t}},showYAxis:{get:function(){return b},set:function(t){b=t}},defaultState:{get:function(){return M},set:function(t){M=t}},noData:{get:function(){return A},set:function(t){A=t}},margin:{get:function(){return u},set:function(t){void 0!==t.top&&(u.top=t.top,c=t.top),u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return W},set:function(t){W=t,F.reset(W),n.duration(W),i.duration(W),o.duration(W)}},color:{get:function(){return p},set:function(t){p=r.utils.getColor(t),a.color(p)}},barColor:{get:function(){return n.barColor},set:function(t){n.barColor(t),a.color((function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()}))}}}),r.utils.inheritOptions(E,n),r.utils.initOptions(E),E},r.models.multiChart=function(){"use strict";var t,e,n={top:30,right:20,bottom:50,left:60},i=null,o=r.utils.defaultColor(),a=null,s=null,l=!0,u=null,c=function(t){return t.x},d=function(t){return t.y},f="linear",p=!0,h=r.interactiveGuideline(),v=!1,g=" (right axis)",m=250,y=d3.scale.linear(),x=d3.scale.linear(),b=d3.scale.linear(),k=r.models.line().yScale(x).duration(m),w=r.models.line().yScale(b).duration(m),M=r.models.scatter().yScale(x).duration(m),A=r.models.scatter().yScale(b).duration(m),C=r.models.multiBar().stacked(!1).yScale(x).duration(m),S=r.models.multiBar().stacked(!1).yScale(b).duration(m),W=r.models.stackedArea().yScale(x).duration(m),F=r.models.stackedArea().yScale(b).duration(m),E=r.models.axis().scale(y).orient("bottom").tickPadding(5).duration(m),O=r.models.axis().scale(x).orient("left").duration(m),D=r.models.axis().scale(b).orient("right").duration(m),N=r.models.legend().height(30),_=r.models.tooltip(),T=d3.dispatch(),L=[k,w,M,A,C,S,W,F];function B(u){return u.each((function(u){var p=d3.select(this);r.utils.initSVG(p),B.update=function(){p.transition().call(B)},B.container=this;var m=r.utils.availableWidth(a,p,n),T=r.utils.availableHeight(s,p,n),P=u.filter((function(t){return"line"==t.type&&1==t.yAxis})),I=u.filter((function(t){return"line"==t.type&&2==t.yAxis})),z=u.filter((function(t){return"scatter"==t.type&&1==t.yAxis})),V=u.filter((function(t){return"scatter"==t.type&&2==t.yAxis})),j=u.filter((function(t){return"bar"==t.type&&1==t.yAxis})),G=u.filter((function(t){return"bar"==t.type&&2==t.yAxis})),H=u.filter((function(t){return"area"==t.type&&1==t.yAxis})),Y=u.filter((function(t){return"area"==t.type&&2==t.yAxis}));if(!(u&&u.length&&u.filter((function(t){return t.values.length})).length))return r.utils.noData(B,p),B;p.selectAll(".nv-noData").remove();var R=u.filter((function(t){return!t.disabled&&1==t.yAxis})).map((function(t){return t.values.map((function(t,e){return{x:c(t),y:d(t)}}))})),X=u.filter((function(t){return!t.disabled&&2==t.yAxis})).map((function(t){return t.values.map((function(t,e){return{x:c(t),y:d(t)}}))}));y.domain(d3.extent(d3.merge(R.concat(X)),(function(t){return t.x}))).range([0,m]);var q=p.selectAll("g.wrap.multiChart").data([u]),Z=q.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");Z.append("g").attr("class","nv-x nv-axis"),Z.append("g").attr("class","nv-y1 nv-axis"),Z.append("g").attr("class","nv-y2 nv-axis"),Z.append("g").attr("class","stack1Wrap"),Z.append("g").attr("class","stack2Wrap"),Z.append("g").attr("class","bars1Wrap"),Z.append("g").attr("class","bars2Wrap"),Z.append("g").attr("class","scatters1Wrap"),Z.append("g").attr("class","scatters2Wrap"),Z.append("g").attr("class","lines1Wrap"),Z.append("g").attr("class","lines2Wrap"),Z.append("g").attr("class","legendWrap"),Z.append("g").attr("class","nv-interactive");var K=q.select("g"),U=u.map((function(t,e){return u[e].color||o(t,e)}));if(l){var Q=N.align()?m/2:m,J=N.align()?Q:0;N.width(Q),N.color(U),K.select(".legendWrap").datum(u.map((function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":g),t}))).call(N),i||N.height()===n.top||(n.top=N.height(),T=r.utils.availableHeight(s,p,n)),K.select(".legendWrap").attr("transform","translate("+J+","+-n.top+")")}else K.select(".legendWrap").selectAll("*").remove();k.width(m).height(T).interpolate(f).color(U.filter((function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"line"==u[e].type}))),w.width(m).height(T).interpolate(f).color(U.filter((function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"line"==u[e].type}))),M.width(m).height(T).color(U.filter((function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"scatter"==u[e].type}))),A.width(m).height(T).color(U.filter((function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"scatter"==u[e].type}))),C.width(m).height(T).color(U.filter((function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"bar"==u[e].type}))),S.width(m).height(T).color(U.filter((function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"bar"==u[e].type}))),W.width(m).height(T).interpolate(f).color(U.filter((function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"area"==u[e].type}))),F.width(m).height(T).interpolate(f).color(U.filter((function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"area"==u[e].type}))),K.attr("transform","translate("+n.left+","+n.top+")");var $=K.select(".lines1Wrap").datum(P.filter((function(t){return!t.disabled}))),tt=K.select(".scatters1Wrap").datum(z.filter((function(t){return!t.disabled}))),et=K.select(".bars1Wrap").datum(j.filter((function(t){return!t.disabled}))),nt=K.select(".stack1Wrap").datum(H.filter((function(t){return!t.disabled}))),rt=K.select(".lines2Wrap").datum(I.filter((function(t){return!t.disabled}))),it=K.select(".scatters2Wrap").datum(V.filter((function(t){return!t.disabled}))),ot=K.select(".bars2Wrap").datum(G.filter((function(t){return!t.disabled}))),at=K.select(".stack2Wrap").datum(Y.filter((function(t){return!t.disabled}))),st=[];C.stacked()&&j.length&&(st=j.filter((function(t){return!t.disabled})).map((function(t){return t.values}))).length>0&&(st=st.reduce((function(t,e){return t.map((function(t,n){return{x:t.x,y:t.y+e[n].y}}))}))),j.length&&st.push({x:0,y:0});var lt=[];function ut(t){return d3.transpose(t).map((function(t){return t.map((function(t){return t.y}))})).map((function(t){return d3.sum(t)}))}if(S.stacked()&&G.length&&(lt=G.filter((function(t){return!t.disabled})).map((function(t){return t.values}))).length>0&&(lt=lt.reduce((function(t,e){return t.map((function(t,n){return{x:t.x,y:t.y+e[n].y}}))}))),G.length&&lt.push({x:0,y:0}),x.domain(t||d3.extent(d3.merge(R).concat(st),(function(t){return t.y}))).range([0,T]),b.domain(e||d3.extent(d3.merge(X).concat(lt),(function(t){return t.y}))).range([0,T]),k.yDomain(x.domain()),M.yDomain(x.domain()),C.stacked()){var ct=x.domain([0,d3.max(ut(R))]).range([0,T]);C.yDomain(ct.domain())}else C.yDomain(x.domain());if(W.yDomain(x.domain()),w.yDomain(b.domain()),A.yDomain(b.domain()),S.stacked()){var dt=b.domain([0,d3.max(ut(X))]).range([0,T]);S.yDomain(dt.domain())}else S.yDomain(b.domain());function ft(t){var e=2===t.series.yAxis?D:O;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color,key:t.series.key},_.duration(0).headerFormatter((function(t,e){return E.tickFormat()(t,e)})).valueFormatter((function(t,n){return e.tickFormat()(t,n)})).data(t).hidden(!1)}function pt(t){var e=2===t.series.yAxis?D:O;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color,key:t.series.key},_.duration(100).headerFormatter((function(t,e){return E.tickFormat()(t,e)})).valueFormatter((function(t,n){return e.tickFormat()(t,n)})).data(t).hidden(!1)}function ht(t){var e=2===t.series.yAxis?D:O;t.point.x=W.x()(t.point),t.point.y=W.y()(t.point),_.duration(0).headerFormatter((function(t,e){return E.tickFormat()(t,e)})).valueFormatter((function(t,n){return e.tickFormat()(t,n)})).data(t).hidden(!1)}function vt(t){var e=2===t.series.yAxis?D:O;t.value=C.x()(t.data),t.series={value:C.y()(t.data),color:t.color,key:t.data.key},_.duration(0).headerFormatter((function(t,e){return E.tickFormat()(t,e)})).valueFormatter((function(t,n){return e.tickFormat()(t,n)})).data(t).hidden(!1)}function gt(){for(var t=0,e=L.length;t<e;t++){var n=L[t];try{n.clearHighlights()}catch(t){}}}F.yDomain(b.domain()),H.length&&d3.transition(nt).call(W),Y.length&&d3.transition(at).call(F),j.length&&d3.transition(et).call(C),G.length&&d3.transition(ot).call(S),P.length&&d3.transition($).call(k),I.length&&d3.transition(rt).call(w),z.length&&d3.transition(tt).call(M),V.length&&d3.transition(it).call(A),E._ticks(r.utils.calcTicksX(m/100,u)).tickSize(-T,0),K.select(".nv-x.nv-axis").attr("transform","translate(0,"+T+")"),d3.transition(K.select(".nv-x.nv-axis")).call(E),O._ticks(r.utils.calcTicksY(T/36,u)).tickSize(-m,0),d3.transition(K.select(".nv-y1.nv-axis")).call(O),D._ticks(r.utils.calcTicksY(T/36,u)).tickSize(-m,0),d3.transition(K.select(".nv-y2.nv-axis")).call(D),K.select(".nv-y1.nv-axis").classed("nv-disabled",!R.length).attr("transform","translate("+y.range()[0]+",0)"),K.select(".nv-y2.nv-axis").classed("nv-disabled",!X.length).attr("transform","translate("+y.range()[1]+",0)"),N.dispatch.on("stateChange",(function(t){B.update()})),v&&(h.width(m).height(T).margin({left:n.left,top:n.top}).svgContainer(p).xScale(y),q.select(".nv-interactive").call(h)),v?(h.dispatch.on("elementMousemove",(function(t){gt();var e,n,i,a=[];u.filter((function(t,e){return t.seriesIndex=e,!t.disabled})).forEach((function(s,l){var u=y.domain(),c=s.values.filter((function(t,e){return B.x()(t,e)>=u[0]&&B.x()(t,e)<=u[1]})),d=c[n=r.interactiveBisect(c,t.pointXValue,B.x())],f=B.y()(d,n);null===f||isNaN(f)||s.noHighlightSeries||function(t,e,n,r){var i={line:{yAxis1:{chart:k,data:P},yAxis2:{chart:w,data:I}},scatter:{yAxis1:{chart:M,data:z},yAxis2:{chart:A,data:V}},bar:{yAxis1:{chart:C,data:j},yAxis2:{chart:S,data:G}},area:{yAxis1:{chart:W,data:H},yAxis2:{chart:F,data:Y}}},o=i[t.type]["yAxis"+t.yAxis].chart,a=i[t.type]["yAxis"+t.yAxis].data.reduce((function(e,n,r){return n.key===t.key?r:e}),0);try{o.highlightPoint(a,e,!0,void 0)}catch(t){}}(s,n),void 0!==d&&(void 0===e&&(e=d),void 0===i&&(i=y(B.x()(d,n))),a.push({key:s.key,value:f,color:o(s,s.seriesIndex),data:d,yAxis:2==s.yAxis?D:O}))})),h.tooltip.headerFormatter((function(t,e){return E.tickFormat()(t,e)})).valueFormatter(h.tooltip.valueFormatter()||function(t,e){var n=a[e].yAxis;return null==t?"N/A":n.tickFormat()(t)}).data({value:B.x()(e,n),index:n,series:a})(),h.renderGuideLine(i)})),h.dispatch.on("elementMouseout",(function(t){gt()}))):(k.dispatch.on("elementMouseover.tooltip",ft),w.dispatch.on("elementMouseover.tooltip",ft),k.dispatch.on("elementMouseout.tooltip",(function(t){_.hidden(!0)})),w.dispatch.on("elementMouseout.tooltip",(function(t){_.hidden(!0)})),M.dispatch.on("elementMouseover.tooltip",pt),A.dispatch.on("elementMouseover.tooltip",pt),M.dispatch.on("elementMouseout.tooltip",(function(t){_.hidden(!0)})),A.dispatch.on("elementMouseout.tooltip",(function(t){_.hidden(!0)})),W.dispatch.on("elementMouseover.tooltip",ht),F.dispatch.on("elementMouseover.tooltip",ht),W.dispatch.on("elementMouseout.tooltip",(function(t){_.hidden(!0)})),F.dispatch.on("elementMouseout.tooltip",(function(t){_.hidden(!0)})),C.dispatch.on("elementMouseover.tooltip",vt),S.dispatch.on("elementMouseover.tooltip",vt),C.dispatch.on("elementMouseout.tooltip",(function(t){_.hidden(!0)})),S.dispatch.on("elementMouseout.tooltip",(function(t){_.hidden(!0)})),C.dispatch.on("elementMousemove.tooltip",(function(t){_()})),S.dispatch.on("elementMousemove.tooltip",(function(t){_()})))})),B}return B.dispatch=T,B.legend=N,B.lines1=k,B.lines2=w,B.scatters1=M,B.scatters2=A,B.bars1=C,B.bars2=S,B.stack1=W,B.stack2=F,B.xAxis=E,B.yAxis1=O,B.yAxis2=D,B.tooltip=_,B.interactiveLayer=h,B.options=r.utils.optionsFunc.bind(B),B._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},showLegend:{get:function(){return l},set:function(t){l=t}},xScale:{get:function(){return y},set:function(t){y=t,E.scale(y)}},yDomain1:{get:function(){return t},set:function(e){t=e}},yDomain2:{get:function(){return e},set:function(t){e=t}},noData:{get:function(){return u},set:function(t){u=t}},interpolate:{get:function(){return f},set:function(t){f=t}},legendRightAxisHint:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return n},set:function(t){void 0!==t.top&&(n.top=t.top,i=t.top),n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},color:{get:function(){return o},set:function(t){o=r.utils.getColor(t)}},x:{get:function(){return c},set:function(t){c=t,k.x(t),w.x(t),M.x(t),A.x(t),C.x(t),S.x(t),W.x(t),F.x(t)}},y:{get:function(){return d},set:function(t){d=t,k.y(t),w.y(t),M.y(t),A.y(t),W.y(t),F.y(t),C.y(t),S.y(t)}},useVoronoi:{get:function(){return p},set:function(t){p=t,k.useVoronoi(t),w.useVoronoi(t),W.useVoronoi(t),F.useVoronoi(t)}},useInteractiveGuideline:{get:function(){return v},set:function(t){(v=t)&&(k.interactive(!1),k.useVoronoi(!1),w.interactive(!1),w.useVoronoi(!1),W.interactive(!1),W.useVoronoi(!1),F.interactive(!1),F.useVoronoi(!1),M.interactive(!1),A.interactive(!1))}},duration:{get:function(){return m},set:function(t){m=t,[k,w,W,F,M,A,E,O,D].forEach((function(t){t.duration(m)}))}}}),r.utils.initOptions(B),B},r.models.ohlcBar=function(){"use strict";var t,e,n,i,o={top:0,right:0,bottom:0,left:0},a=null,s=null,l=Math.floor(1e4*Math.random()),u=null,c=d3.scale.linear(),d=d3.scale.linear(),f=function(t){return t.x},p=function(t){return t.y},h=function(t){return t.open},v=function(t){return t.close},g=function(t){return t.high},m=function(t){return t.low},y=[],x=[],b=!1,k=!0,w=r.utils.defaultColor(),M=!1,A=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function C(M){return M.each((function(M){u=d3.select(this);var C=r.utils.availableWidth(a,u,o),S=r.utils.availableHeight(s,u,o);r.utils.initSVG(u);var W=C/M[0].values.length*.9;c.domain(t||d3.extent(M[0].values.map(f).concat(y))),b?c.range(n||[.5*C/M[0].values.length,C*(M[0].values.length-.5)/M[0].values.length]):c.range(n||[5+W/2,C-W/2-5]),d.domain(e||[d3.min(M[0].values.map(m).concat(x)),d3.max(M[0].values.map(g).concat(x))]).range(i||[S,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1]));var F=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([M[0].values]),E=F.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),O=E.append("defs"),D=E.append("g"),N=F.select("g");D.append("g").attr("class","nv-ticks"),F.attr("transform","translate("+o.left+","+o.top+")"),u.on("click",(function(t,e){A.chartClick({data:t,index:e,pos:d3.event,id:l})})),O.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect"),F.select("#nv-chart-clip-path-"+l+" rect").attr("width",C).attr("height",S),N.attr("clip-path",k?"url(#nv-chart-clip-path-"+l+")":"");var _=F.select(".nv-ticks").selectAll(".nv-tick").data((function(t){return t}));_.exit().remove(),_.enter().append("path").attr("class",(function(t,e,n){return(h(t,e)>v(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e})).attr("d",(function(t,e){return"m0,0l0,"+(d(h(t,e))-d(g(t,e)))+"l"+-W/2+",0l"+W/2+",0l0,"+(d(m(t,e))-d(h(t,e)))+"l0,"+(d(v(t,e))-d(m(t,e)))+"l"+W/2+",0l"+-W/2+",0z"})).attr("transform",(function(t,e){return"translate("+c(f(t,e))+","+d(g(t,e))+")"})).attr("fill",(function(t,e){return w[0]})).attr("stroke",(function(t,e){return w[0]})).attr("x",0).attr("y",(function(t,e){return d(Math.max(0,p(t,e)))})).attr("height",(function(t,e){return Math.abs(d(p(t,e))-d(0))})),_.attr("class",(function(t,e,n){return(h(t,e)>v(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e})),d3.transition(_).attr("transform",(function(t,e){return"translate("+c(f(t,e))+","+d(g(t,e))+")"})).attr("d",(function(t,e){var n=C/M[0].values.length*.9;return"m0,0l0,"+(d(h(t,e))-d(g(t,e)))+"l"+-n/2+",0l"+n/2+",0l0,"+(d(m(t,e))-d(h(t,e)))+"l0,"+(d(v(t,e))-d(m(t,e)))+"l"+n/2+",0l"+-n/2+",0z"}))})),C}return C.highlightPoint=function(t,e){C.clearHighlights(),u.select(".nv-ohlcBar .nv-tick-0-"+t).classed("hover",e)},C.clearHighlights=function(){u.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},C.dispatch=A,C.options=r.utils.optionsFunc.bind(C),C._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return t},set:function(e){t=e}},yDomain:{get:function(){return e},set:function(t){e=t}},xRange:{get:function(){return n},set:function(t){n=t}},yRange:{get:function(){return i},set:function(t){i=t}},forceX:{get:function(){return y},set:function(t){y=t}},forceY:{get:function(){return x},set:function(t){x=t}},padData:{get:function(){return b},set:function(t){b=t}},clipEdge:{get:function(){return k},set:function(t){k=t}},id:{get:function(){return l},set:function(t){l=t}},interactive:{get:function(){return M},set:function(t){M=t}},x:{get:function(){return f},set:function(t){f=t}},y:{get:function(){return p},set:function(t){p=t}},open:{get:function(){return h()},set:function(t){h=t}},close:{get:function(){return v()},set:function(t){v=t}},high:{get:function(){return g},set:function(t){g=t}},low:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return o},set:function(t){o.top=null!=t.top?t.top:o.top,o.right=null!=t.right?t.right:o.right,o.bottom=null!=t.bottom?t.bottom:o.bottom,o.left=null!=t.left?t.left:o.left}},color:{get:function(){return w},set:function(t){w=r.utils.getColor(t)}}}),r.utils.initOptions(C),C},r.models.parallelCoordinates=function(){"use strict";var t,e,n,i={top:30,right:0,bottom:10,left:0},o=null,a=null,s=null,l=null,u=d3.scale.ordinal(),c={},d="undefined values",f=[],p=[],h=[],v=!0,g=r.utils.defaultColor(),m=[],y=[],x=[],b=[],k=1,w=d3.svg.line(),M=d3.svg.axis(),A=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged"),C=r.utils.renderWatch(A);function S(W){return C.reset(),W.each((function(C){var S=d3.select(this);if(s=r.utils.availableWidth(o,S,i),l=r.utils.availableHeight(a,S,i),r.utils.initSVG(S),void 0===C[0].values){var W=[];C.forEach((function(t){var e={};Object.keys(t).forEach((function(n){"name"!==n&&(e[n]=t[n])})),W.push({key:t.name,values:e})})),C=W}var F=C.map((function(t){return t.values}));0===y.length&&(y=C),h=f.sort((function(t,e){return t.currentPosition-e.currentPosition})).map((function(t){return t.key})),p=f.filter((function(t){return!t.disabled})),u.rangePoints([0,s],1).domain(p.map((function(t){return t.key})));var E={},O=!1,D=[];h.forEach((function(t){var e=d3.extent(F,(function(e){return+e[t]})),n=e[0],r=e[1],i=!1;(isNaN(n)||isNaN(r))&&(i=!0,n=0,r=0),n===r&&(n-=1,r+=1);var o=m.filter((function(e){return e.dimension==t}));0!==o.length&&(i?(n=c[t].domain()[0],r=c[t].domain()[1]):!o[0].hasOnlyNaN&&v?(n=n>o[0].extent[0]?o[0].extent[0]:n,r=r<o[0].extent[1]?o[0].extent[1]:r):o[0].hasNaN&&(r=r<o[0].extent[1]?o[0].extent[1]:r,E[t]=c[t].domain()[1],O=!0)),c[t]=d3.scale.linear().domain([n,r]).range([.9*(l-12),0]),b=[],c[t].brush=d3.svg.brush().y(c[t]).on("brushstart",X).on("brush",q).on("brushend",Z)}));var N=S.selectAll("g.nv-wrap.nv-parallelCoordinates").data([C]),_=N.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),T=N.select("g");_.append("g").attr("class","nv-parallelCoordinates background"),_.append("g").attr("class","nv-parallelCoordinates foreground"),_.append("g").attr("class","nv-parallelCoordinates missingValuesline"),N.attr("transform","translate("+i.left+","+i.top+")"),w.interpolate("cardinal").tension(k),M.orient("left");var L,B,P=d3.behavior.drag().on("dragstart",(function(t){x[t.key]=this.parentNode.__origin__=u(t.key),e.attr("visibility","hidden")})).on("drag",(function(e){x[e.key]=Math.min(s,Math.max(0,this.parentNode.__origin__+=d3.event.x)),t.attr("d",Y),p.sort((function(t,e){return U(t.key)-U(e.key)})),p.forEach((function(t,e){return t.currentPosition=e})),u.domain(p.map((function(t){return t.key}))),n.attr("transform",(function(t){return"translate("+U(t.key)+")"}))})).on("dragend",(function(n,r){delete this.parentNode.__origin__,delete x[n.key],d3.select(this.parentNode).attr("transform","translate("+u(n.key)+")"),t.attr("d",Y),e.attr("d",Y).attr("visibility",null),A.dimensionsOrder(p)})),I=u.range()[1]-u.range()[0];if(I=isNaN(I)?u.range()[0]:I,!isNaN(I)){var z=[0+I/2,l-12,s-I/2,l-12];(L=N.select(".missingValuesline").selectAll("line").data([z])).enter().append("line"),L.exit().remove(),L.attr("x1",(function(t){return t[0]})).attr("y1",(function(t){return t[1]})).attr("x2",(function(t){return t[2]})).attr("y2",(function(t){return t[3]})),(B=N.select(".missingValuesline").selectAll("text").data([d])).append("text").data([d]),B.enter().append("text"),B.exit().remove(),B.attr("y",l).attr("x",s-92-I/2).text((function(t){return t}))}(e=N.select(".background").selectAll("path").data(C)).enter().append("path"),e.exit().remove(),e.attr("d",Y),(t=N.select(".foreground").selectAll("path").data(C)).enter().append("path"),t.exit().remove(),t.attr("d",Y).style("stroke-width",(function(t,e){return isNaN(t.strokeWidth)&&(t.strokeWidth=1),t.strokeWidth})).attr("stroke",(function(t,e){return t.color||g(t,e)})),t.on("mouseover",(function(t,e){d3.select(this).classed("hover",!0).style("stroke-width",t.strokeWidth+2+"px").style("stroke-opacity",1),A.elementMouseover({label:t.name,color:t.color||g(t,e),values:t.values,dimensions:p})})),t.on("mouseout",(function(t,e){d3.select(this).classed("hover",!1).style("stroke-width",t.strokeWidth+"px").style("stroke-opacity",.7),A.elementMouseout({label:t.name,index:e})})),t.on("mousemove",(function(t,e){A.elementMousemove()})),t.on("click",(function(t){A.elementClick({id:t.id})}));var V=(n=T.selectAll(".dimension").data(p)).enter().append("g").attr("class","nv-parallelCoordinates dimension");n.attr("transform",(function(t){return"translate("+u(t.key)+",0)"})),V.append("g").attr("class","nv-axis"),V.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",(function(t,e){A.elementMouseover({label:t.tooltip||t.key,color:t.color})})).on("mouseout",(function(t,e){A.elementMouseout({label:t.tooltip})})).on("mousemove",(function(t,e){A.elementMousemove()})).call(P),V.append("g").attr("class","nv-brushBackground"),n.exit().remove(),n.select(".nv-label").text((function(t){return t.key})),R(v);var j=h.filter((function(t){return!c[t].brush.empty()})),G=j.map((function(t){return c[t].brush.extent()})),H=y.slice(0);function Y(t){return w(p.map((function(e){if(isNaN(t.values[e.key])||isNaN(parseFloat(t.values[e.key]))||O){var n=c[e.key].domain(),r=c[e.key].range(),i=n[0]-(n[1]-n[0])/9;if(b.indexOf(e.key)<0){var o=d3.scale.linear().domain([i,n[1]]).range([l-12,r[1]]);c[e.key].brush.y(o),b.push(e.key)}if(isNaN(t.values[e.key])||isNaN(parseFloat(t.values[e.key])))return[u(e.key),c[e.key](i)]}return void 0!==L&&(b.length>0||O?(L.style("display","inline"),B.style("display","inline")):(L.style("display","none"),B.style("display","none"))),[u(e.key),c[e.key](t.values[e.key])]})))}function R(t){m.forEach((function(e){var n=c[e.dimension].brush.y().domain();e.hasOnlyNaN&&(e.extent[1]=(c[e.dimension].domain()[1]-n[0])*(e.extent[1]-e.extent[0])/(E[e.dimension]-e.extent[0])+n[0]),e.hasNaN&&(e.extent[0]=n[0]),t&&c[e.dimension].brush.extent(e.extent)})),n.select(".nv-brushBackground").each((function(t){d3.select(this).call(c[t.key].brush)})).selectAll("rect").attr("x",-8).attr("width",16),K()}function X(){!1===v&&(v=!0,R(!0))}function q(){j=h.filter((function(t){return!c[t].brush.empty()})),G=j.map((function(t){return c[t].brush.extent()})),m=[],j.forEach((function(t,e){m[e]={dimension:t,extent:G[e],hasNaN:!1,hasOnlyNaN:!1}})),y=[],t.style("display",(function(t){var e=j.every((function(e,n){return!(!isNaN(t.values[e])&&!isNaN(parseFloat(t.values[e]))||G[n][0]!=c[e].brush.y().domain()[0])||G[n][0]<=t.values[e]&&t.values[e]<=G[n][1]&&!isNaN(parseFloat(t.values[e]))}));return e&&y.push(t),e?null:"none"})),K(),A.brush({filters:m,active:y})}function Z(){var t=j.length>0;m.forEach((function(t){t.extent[0]===c[t.dimension].brush.y().domain()[0]&&b.indexOf(t.dimension)>=0&&(t.hasNaN=!0),t.extent[1]<c[t.dimension].domain()[0]&&(t.hasOnlyNaN=!0)})),A.brushEnd(y,t)}function K(){n.select(".nv-axis").each((function(t,e){var n=m.filter((function(e){return e.dimension==t.key}));D[t.key]=c[t.key].domain(),0!=n.length&&v&&(D[t.key]=[],n[0].extent[1]>c[t.key].domain()[0]&&(D[t.key]=[n[0].extent[1]]),n[0].extent[0]>=c[t.key].domain()[0]&&D[t.key].push(n[0].extent[0])),d3.select(this).call(M.scale(c[t.key]).tickFormat(t.format).tickValues(D[t.key]))}))}function U(t){var e=x[t];return null==e?u(t):e}y=[],t.style("display",(function(t){var e=j.every((function(e,n){return!(!isNaN(t.values[e])&&!isNaN(parseFloat(t.values[e]))||G[n][0]!=c[e].brush.y().domain()[0])||G[n][0]<=t.values[e]&&t.values[e]<=G[n][1]&&!isNaN(parseFloat(t.values[e]))}));return e&&y.push(t),e?null:"none"})),(m.length>0||!r.utils.arrayEquals(y,H))&&A.activeChanged(y)})),S}return S.dispatch=A,S.options=r.utils.optionsFunc.bind(S),S._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},dimensionData:{get:function(){return f},set:function(t){f=t}},displayBrush:{get:function(){return v},set:function(t){v=t}},filters:{get:function(){return m},set:function(t){m=t}},active:{get:function(){return y},set:function(t){y=t}},lineTension:{get:function(){return k},set:function(t){k=t}},undefinedValuesLabel:{get:function(){return d},set:function(t){d=t}},dimensions:{get:function(){return f.map((function(t){return t.key}))},set:function(t){r.deprecated("dimensions","use dimensionData instead"),0===f.length?t.forEach((function(t){f.push({key:t})})):t.forEach((function(t,e){f[e].key=t}))}},dimensionNames:{get:function(){return f.map((function(t){return t.key}))},set:function(t){r.deprecated("dimensionNames","use dimensionData instead"),h=[],0===f.length?t.forEach((function(t){f.push({key:t})})):t.forEach((function(t,e){f[e].key=t}))}},dimensionFormats:{get:function(){return f.map((function(t){return t.format}))},set:function(t){r.deprecated("dimensionFormats","use dimensionData instead"),0===f.length?t.forEach((function(t){f.push({format:t})})):t.forEach((function(t,e){f[e].format=t}))}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},color:{get:function(){return g},set:function(t){g=r.utils.getColor(t)}}}),r.utils.initOptions(S),S},r.models.parallelCoordinatesChart=function(){"use strict";var t=r.models.parallelCoordinates(),e=r.models.legend(),n=r.models.tooltip(),i=(r.models.tooltip(),{top:0,right:0,bottom:0,left:0}),o=null,a=null,s=null,l=!0,u=r.utils.defaultColor(),c=r.utils.state(),d=[],f=!0,p=null,h=null,v="undefined",g=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),m=r.utils.renderWatch(g);function y(n){return m.reset(),m.models(t),n.each((function(n){var u=d3.select(this);r.utils.initSVG(u);var h,v=r.utils.availableWidth(a,u,i),m=r.utils.availableHeight(s,u,i);if(y.update=function(){u.call(y)},y.container=this,c.setter(function(t){return function(e){void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(d),y.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled}))}}}(d)).update(),c.disabled=d.map((function(t){return!!t.disabled})),(d=d.map((function(t){return t.disabled=!!t.disabled,t}))).forEach((function(t,e){t.originalPosition=isNaN(t.originalPosition)?e:t.originalPosition,t.currentPosition=isNaN(t.currentPosition)?e:t.currentPosition})),!p)for(h in p={},c)c[h]instanceof Array?p[h]=c[h].slice(0):p[h]=c[h];if(!n||!n.length)return r.utils.noData(y,u),y;u.selectAll(".nv-noData").remove();var x=u.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([n]),b=x.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),k=x.select("g");b.append("g").attr("class","nv-parallelCoordinatesWrap"),b.append("g").attr("class","nv-legendWrap"),k.select("rect").attr("width",v).attr("height",m>0?m:0),l?(e.width(v).color((function(t){return"rgb(188,190,192)"})),k.select(".nv-legendWrap").datum(d.sort((function(t,e){return t.originalPosition-e.originalPosition}))).call(e),o||e.height()===i.top||(i.top=e.height(),m=r.utils.availableHeight(s,u,i)),x.select(".nv-legendWrap").attr("transform","translate( 0 ,"+-i.top+")")):k.select(".nv-legendWrap").selectAll("*").remove(),x.attr("transform","translate("+i.left+","+i.top+")"),t.width(v).height(m).dimensionData(d).displayBrush(f),k.select(".nv-parallelCoordinatesWrap ").datum(n).transition().call(t),t.dispatch.on("brushEnd",(function(t,e){e?(f=!0,g.brushEnd(t)):f=!1})),e.dispatch.on("stateChange",(function(t){for(var e in t)c[e]=t[e];g.stateChange(c),y.update()})),t.dispatch.on("dimensionsOrder",(function(t){d.sort((function(t,e){return t.currentPosition-e.currentPosition}));var e=!1;d.forEach((function(t,n){t.currentPosition=n,t.currentPosition!==t.originalPosition&&(e=!0)})),g.dimensionsOrder(d,e)})),g.on("changeState",(function(t){void 0!==t.disabled&&(d.forEach((function(e,n){e.disabled=t.disabled[n]})),c.disabled=t.disabled),y.update()}))})),m.renderEnd("parraleleCoordinateChart immediate"),y}return n.contentGenerator((function(t){var e='<table><thead><tr><td class="legend-color-guide"><div style="background-color:'+t.color+'"></div></td><td><strong>'+t.key+"</strong></td></tr></thead>";return 0!==t.series.length&&(e+='<tbody><tr><td height ="10px"></td></tr>',t.series.forEach((function(t){e=e+'<tr><td class="legend-color-guide"><div style="background-color:'+t.color+'"></div></td><td class="key">'+t.key+'</td><td class="value">'+t.value+"</td></tr>"})),e+="</tbody>"),e+="</table>"})),t.dispatch.on("elementMouseover.tooltip",(function(t){var e={key:t.label,color:t.color,series:[]};t.values&&(Object.keys(t.values).forEach((function(n){var r,i=t.dimensions.filter((function(t){return t.key===n}))[0];i&&(r=isNaN(t.values[n])||isNaN(parseFloat(t.values[n]))?v:i.format(t.values[n]),e.series.push({idx:i.currentPosition,key:n,value:r,color:i.color}))})),e.series.sort((function(t,e){return t.idx-e.idx}))),n.data(e).hidden(!1)})),t.dispatch.on("elementMouseout.tooltip",(function(t){n.hidden(!0)})),t.dispatch.on("elementMousemove.tooltip",(function(){n()})),y.dispatch=g,y.parallelCoordinates=t,y.legend=e,y.tooltip=n,y.options=r.utils.optionsFunc.bind(y),y._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},showLegend:{get:function(){return l},set:function(t){l=t}},defaultState:{get:function(){return p},set:function(t){p=t}},dimensionData:{get:function(){return d},set:function(t){d=t}},displayBrush:{get:function(){return f},set:function(t){f=t}},noData:{get:function(){return h},set:function(t){h=t}},nanValue:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return i},set:function(t){void 0!==t.top&&(i.top=t.top,o=t.top),i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},color:{get:function(){return u},set:function(n){u=r.utils.getColor(n),e.color(u),t.color(u)}}}),r.utils.inheritOptions(y,t),r.utils.initOptions(y),y},r.models.pie=function(){"use strict";var t={top:0,right:0,bottom:0,left:0},e=500,n=500,i=function(t){return t.x},o=function(t){return t.y},a=Math.floor(1e4*Math.random()),s=null,l=r.utils.defaultColor(),u=d3.format(",.2f"),c=!0,d=!1,f="key",p=.02,h=!1,v=!1,g=!1,m=!0,y=0,x=!1,b=!1,k=!1,w=!1,M=0,A=.5,C=250,S=[],W=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),F=[],E=[],O=r.utils.renderWatch(W);function D(N){return O.reset(),N.each((function(D){var N=e-t.left-t.right,_=n-t.top-t.bottom,T=Math.min(N,_)/2,L=[],B=[];if(s=d3.select(this),0===S.length)for(var P=T-T/10,I=A*T,z=0;z<D[0].length;z++)L.push(P),B.push(I);else m?(L=S.map((function(t){return(t.outer-t.outer/10)*T})),B=S.map((function(t){return(t.inner-t.inner/10)*T})),A=d3.min(S.map((function(t){return t.inner-t.inner/10})))):(L=S.map((function(t){return t.outer*T})),B=S.map((function(t){return t.inner*T})),A=d3.min(S.map((function(t){return t.inner}))));r.utils.initSVG(s);var V=s.selectAll(".nv-wrap.nv-pie").data(D),j=V.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+a).append("g"),G=V.select("g"),H=j.append("g").attr("class","nv-pie");for(j.append("g").attr("class","nv-pieLabels"),V.attr("transform","translate("+t.left+","+t.top+")"),G.select(".nv-pie").attr("transform","translate("+N/2+","+_/2+")"),G.select(".nv-pieLabels").attr("transform","translate("+N/2+","+_/2+")"),s.on("click",(function(t,e){W.chartClick({data:t,index:e,pos:d3.event,id:a})})),F=[],E=[],z=0;z<D[0].length;z++){var Y=d3.svg.arc().outerRadius(L[z]),R=d3.svg.arc().outerRadius(L[z]+5);!1!==b&&(Y.startAngle(b),R.startAngle(b)),!1!==w&&(Y.endAngle(w),R.endAngle(w)),v&&(Y.innerRadius(B[z]),R.innerRadius(B[z])),Y.cornerRadius&&M&&(Y.cornerRadius(M),R.cornerRadius(M)),F.push(Y),E.push(R)}var X=d3.layout.pie().sort(null).value((function(t){return t.disabled?0:o(t)}));X.padAngle&&k&&X.padAngle(k),v&&g&&(H.append("text").attr("class","nv-pie-title"),V.select(".nv-pie-title").style("text-anchor","middle").text((function(t){return g})).style("font-size",Math.min(N,_)*A*2/(g.length+2)+"px").attr("dy","0.35em").attr("transform",(function(t,e){return"translate(0, "+y+")"})));var q=V.select(".nv-pie").selectAll(".nv-slice").data(X),Z=V.select(".nv-pieLabels").selectAll(".nv-label").data(X);q.exit().remove(),Z.exit().remove();var K=q.enter().append("g");if(K.attr("class","nv-slice"),K.on("mouseover",(function(t,e){d3.select(this).classed("hover",!0),m&&d3.select(this).select("path").transition().duration(70).attr("d",E[e]),W.elementMouseover({data:t.data,index:e,color:d3.select(this).style("fill"),percent:(t.endAngle-t.startAngle)/(2*Math.PI)})})),K.on("mouseout",(function(t,e){d3.select(this).classed("hover",!1),m&&d3.select(this).select("path").transition().duration(50).attr("d",F[e]),W.elementMouseout({data:t.data,index:e})})),K.on("mousemove",(function(t,e){W.elementMousemove({data:t.data,index:e})})),K.on("click",(function(t,e){W.elementClick({data:t.data,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this})})),K.on("dblclick",(function(t,e){W.elementDblClick({data:t.data,index:e,color:d3.select(this).style("fill")})})),q.attr("fill",(function(t,e){return l(t.data,e)})),q.attr("stroke",(function(t,e){return l(t.data,e)})),K.append("path").each((function(t){this._current=t})),q.select("path").transition().duration(C).attr("d",(function(t,e){return F[e](t)})).attrTween("d",(function(t,e){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,v||(t.innerRadius=0);var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return F[e](n(t))}})),c){var U=[];for(z=0;z<D[0].length;z++)U.push(F[z]),d?v&&(U[z]=d3.svg.arc().outerRadius(F[z].outerRadius()),!1!==b&&U[z].startAngle(b),!1!==w&&U[z].endAngle(w)):v||U[z].innerRadius(0);Z.enter().append("g").classed("nv-label",!0).each((function(t,e){var n=d3.select(this);n.attr("transform",(function(t,e){if(x){t.outerRadius=L[e]+10,t.innerRadius=L[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+U[e].centroid(t)+") rotate("+n+")"}return t.outerRadius=T+10,t.innerRadius=T+15,"translate("+U[e].centroid(t)+")"})),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",x?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")}));var Q={},J=function(t){return 140*Math.floor(t[0]/140)+","+14*Math.floor(t[1]/14)},$=function(t){return(t.endAngle-t.startAngle)/(2*Math.PI)};Z.watchTransition(O,"pie labels").attr("transform",(function(t,e){if(x){t.outerRadius=L[e]+10,t.innerRadius=L[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+U[e].centroid(t)+") rotate("+n+")"}t.outerRadius=T+10,t.innerRadius=T+15;var r=U[e].centroid(t),i=$(t);if(t.value&&i>=p){var o=J(r);Q[o]&&(r[1]-=14),Q[J(r)]=!0}return"translate("+r+")"})),Z.select(".nv-label text").style("text-anchor",(function(t,e){return x?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle"})).text((function(t,e){var n=$(t),r="";if(!t.value||n<p)return"";if("function"==typeof f)r=f(t,e,{key:i(t.data),value:o(t.data),percent:u(n)});else switch(f){case"key":r=i(t.data);break;case"value":r=u(o(t.data));break;case"percent":r=d3.format("%")(n)}return r})),h&&Z.each((function(t,e){if(this.getBBox){var n=this.getBBox(),i=U[e].centroid(t),o={x:i[0]+n.x,y:i[1]+n.y},a={x:o.x+n.width,y:o.y},s={x:o.x,y:o.y+n.height},l={x:o.x+n.width,y:o.y+n.height};t.visible=r.utils.pointIsInArc(o,t,Y)&&r.utils.pointIsInArc(a,t,Y)&&r.utils.pointIsInArc(s,t,Y)&&r.utils.pointIsInArc(l,t,Y)}})).style("display",(function(t){return t.visible?null:"none"}))}})),O.renderEnd("pie immediate"),D}return D.dispatch=W,D.options=r.utils.optionsFunc.bind(D),D._options=Object.create({},{arcsRadius:{get:function(){return S},set:function(t){S=t}},width:{get:function(){return e},set:function(t){e=t}},height:{get:function(){return n},set:function(t){n=t}},showLabels:{get:function(){return c},set:function(t){c=t}},title:{get:function(){return g},set:function(t){g=t}},titleOffset:{get:function(){return y},set:function(t){y=t}},labelThreshold:{get:function(){return p},set:function(t){p=t}},hideOverlapLabels:{get:function(){return h},set:function(t){h=t}},valueFormat:{get:function(){return u},set:function(t){u=t}},x:{get:function(){return i},set:function(t){i=t}},id:{get:function(){return a},set:function(t){a=t}},endAngle:{get:function(){return w},set:function(t){w=t}},startAngle:{get:function(){return b},set:function(t){b=t}},padAngle:{get:function(){return k},set:function(t){k=t}},cornerRadius:{get:function(){return M},set:function(t){M=t}},donutRatio:{get:function(){return A},set:function(t){A=t}},labelsOutside:{get:function(){return d},set:function(t){d=t}},labelSunbeamLayout:{get:function(){return x},set:function(t){x=t}},donut:{get:function(){return v},set:function(t){v=t}},growOnHover:{get:function(){return m},set:function(t){m=t}},pieLabelsOutside:{get:function(){return d},set:function(t){d=t,r.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return d},set:function(t){d=t,r.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return u},set:function(t){u=t,r.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return t},set:function(e){t.top=void 0!==e.top?e.top:t.top,t.right=void 0!==e.right?e.right:t.right,t.bottom=void 0!==e.bottom?e.bottom:t.bottom,t.left=void 0!==e.left?e.left:t.left}},duration:{get:function(){return C},set:function(t){C=t,O.reset(C)}},y:{get:function(){return o},set:function(t){o=d3.functor(t)}},color:{get:function(){return l},set:function(t){l=r.utils.getColor(t)}},labelType:{get:function(){return f},set:function(t){f=t||"key"}}}),r.utils.initOptions(D),D},r.models.pieChart=function(){"use strict";var t=r.models.pie(),e=r.models.legend(),n=r.models.tooltip(),i={top:30,right:20,bottom:20,left:20},o=null,a=null,s=null,l=!1,u=!0,c="top",d=r.utils.defaultColor(),f=r.utils.state(),p=null,h=null,v=250,g=d3.dispatch("stateChange","changeState","renderEnd");n.duration(0).headerEnabled(!1).valueFormatter((function(e,n){return t.valueFormat()(e,n)}));var m=r.utils.renderWatch(g);function y(n){return m.reset(),m.models(t),n.each((function(n){var l=d3.select(this);r.utils.initSVG(l);var d,h=r.utils.availableWidth(a,l,i),v=r.utils.availableHeight(s,l,i);if(y.update=function(){l.transition().call(y)},y.container=this,f.setter(function(t){return function(e){void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(n),y.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled}))}}}(n)).update(),f.disabled=n.map((function(t){return!!t.disabled})),!p)for(d in p={},f)f[d]instanceof Array?p[d]=f[d].slice(0):p[d]=f[d];if(!n||!n.length)return r.utils.noData(y,l),y;l.selectAll(".nv-noData").remove();var m=l.selectAll("g.nv-wrap.nv-pieChart").data([n]),x=m.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),b=m.select("g");if(x.append("g").attr("class","nv-pieWrap"),x.append("g").attr("class","nv-legendWrap"),u)if("top"===c)e.width(h).key(t.x()),m.select(".nv-legendWrap").datum(n).call(e),o||e.height()===i.top||(i.top=e.height(),v=r.utils.availableHeight(s,l,i)),m.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")");else if("right"===c){var k=r.models.legend().width();h/2<k&&(k=h/2),e.height(v).key(t.x()),e.width(k),h-=e.width(),m.select(".nv-legendWrap").datum(n).call(e).attr("transform","translate("+h+",0)")}else"bottom"===c&&(e.width(h).key(t.x()),m.select(".nv-legendWrap").datum(n).call(e),i.bottom=e.height(),v=r.utils.availableHeight(s,l,i),m.select(".nv-legendWrap").attr("transform","translate(0,"+v+")"));else b.select(".nv-legendWrap").selectAll("*").remove();m.attr("transform","translate("+i.left+","+i.top+")"),t.width(h).height(v);var w=b.select(".nv-pieWrap").datum([n]);d3.transition(w).call(t),e.dispatch.on("stateChange",(function(t){for(var e in t)f[e]=t[e];g.stateChange(f),y.update()})),g.on("changeState",(function(t){void 0!==t.disabled&&(n.forEach((function(e,n){e.disabled=t.disabled[n]})),f.disabled=t.disabled),y.update()}))})),m.renderEnd("pieChart immediate"),y}return t.dispatch.on("elementMouseover.tooltip",(function(t){t.series={key:y.x()(t.data),value:y.y()(t.data),color:t.color,percent:t.percent},l||(delete t.percent,delete t.series.percent),n.data(t).hidden(!1)})),t.dispatch.on("elementMouseout.tooltip",(function(t){n.hidden(!0)})),t.dispatch.on("elementMousemove.tooltip",(function(t){n()})),y.legend=e,y.dispatch=g,y.pie=t,y.tooltip=n,y.options=r.utils.optionsFunc.bind(y),y._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},noData:{get:function(){return h},set:function(t){h=t}},showTooltipPercent:{get:function(){return l},set:function(t){l=t}},showLegend:{get:function(){return u},set:function(t){u=t}},legendPosition:{get:function(){return c},set:function(t){c=t}},defaultState:{get:function(){return p},set:function(t){p=t}},color:{get:function(){return d},set:function(n){d=n,e.color(d),t.color(d)}},duration:{get:function(){return v},set:function(e){v=e,m.reset(v),t.duration(v)}},margin:{get:function(){return i},set:function(t){void 0!==t.top&&(i.top=t.top,o=t.top),i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}}}),r.utils.inheritOptions(y,t),r.utils.initOptions(y),y},r.models.sankey=function(){"use strict";var t={},e=24,n=8,i=[1,1],o=[],a=[],s=!0,l=function(t){o.forEach((function(t){t.sourceLinks=[],t.targetLinks=[]})),a.forEach((function(t){var e=t.source,n=t.target;"number"==typeof e&&(e=t.source=o[t.source]),"number"==typeof n&&(n=t.target=o[t.target]),e.sourceLinks.push(t),n.targetLinks.push(t)})),o.forEach((function(t){t.value=Math.max(d3.sum(t.sourceLinks,f),d3.sum(t.targetLinks,f))})),function(){for(var t,n,r=o,a=0;r.length&&a<o.length;)t=[],r.forEach((function(n){n.x=a,n.dx=e,n.sourceLinks.forEach((function(e){t.indexOf(e.target)<0&&t.push(e.target)}))})),r=t,++a;s&&function(t){o.forEach((function(e){e.sourceLinks.length||(e.x=t-1)}))}(a),n=(i[0]-e)/(a-1),o.forEach((function(t){t.x*=n}))}(),function(t){var e,r=d3.nest().key((function(t){return t.x})).sortKeys(d3.ascending).entries(o).map((function(t){return t.values}));e=d3.min(r,(function(t){return(i[1]-(t.length-1)*n)/d3.sum(t,f)})),r.forEach((function(t){t.forEach((function(t,n){t.y=n,t.dy=t.value*e}))})),a.forEach((function(t){t.dy=t.value*e})),p(),d();for(var s=1;t>0;--t)u(s*=.99),p(),d(),l(s),p(),d();function l(t){function e(t){return(t.source.y+t.sy+t.dy/2)*t.value}r.forEach((function(n,r){n.forEach((function(n){if(n.targetLinks.length){var r=d3.sum(n.targetLinks,e)/d3.sum(n.targetLinks,f);n.y+=(r-c(n))*t}}))}))}function u(t){function e(t){return(t.target.y+t.ty+t.dy/2)*t.value}r.slice().reverse().forEach((function(n){n.forEach((function(n){if(n.sourceLinks.length){var r=d3.sum(n.sourceLinks,e)/d3.sum(n.sourceLinks,f);n.y+=(r-c(n))*t}}))}))}function p(){r.forEach((function(t){var e,r,o,a=0,s=t.length;for(t.sort(h),o=0;o<s;++o)(r=a-(e=t[o]).y)>0&&(e.y+=r),a=e.y+e.dy+n;if((r=a-n-i[1])>0)for(a=e.y-=r,o=s-2;o>=0;--o)(r=(e=t[o]).y+e.dy+n-a)>0&&(e.y-=r),a=e.y}))}function h(t,e){return t.y-e.y}}(t)},u=function(){var t=.5;function e(e){var n=e.source.x+e.source.dx,r=e.target.x,i=d3.interpolateNumber(n,r),o=i(t),a=i(1-t),s=e.source.y+e.sy+e.dy/2,l=e.target.y+e.ty+e.dy/2;return"M"+n+","+s+"C"+o+","+s+" "+a+","+l+" "+r+","+l}return e.curvature=function(n){return arguments.length?(t=+n,e):t},e},c=function(t){return t.y+t.dy/2};function d(){function t(t,e){return t.source.y-e.source.y}function e(t,e){return t.target.y-e.target.y}o.forEach((function(n){n.sourceLinks.sort(e),n.targetLinks.sort(t)})),o.forEach((function(t){var e=0,n=0;t.sourceLinks.forEach((function(t){t.sy=e,e+=t.dy})),t.targetLinks.forEach((function(t){t.ty=n,n+=t.dy}))}))}function f(t){return t.value}return t.options=r.utils.optionsFunc.bind(t),t._options=Object.create({},{nodeWidth:{get:function(){return e},set:function(t){e=+t}},nodePadding:{get:function(){return n},set:function(t){n=t}},nodes:{get:function(){return o},set:function(t){o=t}},links:{get:function(){return a},set:function(t){a=t}},size:{get:function(){return i},set:function(t){i=t}},sinksRight:{get:function(){return s},set:function(t){s=t}},layout:{get:function(){l(32)},set:function(t){l(t)}},relayout:{get:function(){d()},set:function(t){}},center:{get:function(){return c()},set:function(t){"function"==typeof t&&(c=t)}},link:{get:function(){return u()},set:function(t){return"function"==typeof t&&(u=t),u()}}}),r.utils.initOptions(t),t},r.models.sankeyChart=function(){"use strict";var t={top:5,right:0,bottom:5,left:0},e=r.models.sankey(),n=600,i=400,o=36,a=40,s="units",l=void 0,u=d3.format(",.0f"),c=function(t){return u(t)+" "+s},d=d3.scale.category20(),f=function(t){return t.source.name+"  "+t.target.name+"\n"+c(t.value)},p=function(t){return t.color=d(t.name.replace(/ .*/,""))},h=function(t){return d3.rgb(t.color).darker(2)},v=function(t){return t.name+"\n"+c(t.value)},g=function(t,e){t.append("text").attr("x",0).attr("y",0).attr("class","nvd3-sankey-chart-error").attr("text-anchor","middle").text(e)};function m(t){return t.each((function(r){var s={nodes:[{node:1,name:"Test 1"},{node:2,name:"Test 2"},{node:3,name:"Test 3"},{node:4,name:"Test 4"},{node:5,name:"Test 5"},{node:6,name:"Test 6"}],links:[{source:0,target:1,value:2295},{source:0,target:5,value:1199},{source:1,target:2,value:1119},{source:1,target:5,value:1176},{source:2,target:3,value:487},{source:2,target:5,value:632},{source:3,target:4,value:301},{source:3,target:5,value:186}]},u=!1,c=!1;if(("object"==typeof r.nodes&&r.nodes.length)>=0&&("object"==typeof r.links&&r.links.length)>=0&&(u=!0),r.nodes&&r.nodes.length>0&&r.links&&r.links.length>0&&(c=!0),!u)return console.error("NVD3 Sankey chart error:","invalid data format for",r),console.info("Valid data format is: ",s,JSON.stringify(s)),g(t,"Error loading chart, data is invalid"),!1;if(!c)return g(t,"No data available"),!1;var d=t.append("svg").attr("width",n).attr("height",i).append("g").attr("class","nvd3 nv-wrap nv-sankeyChart");e.nodeWidth(o).nodePadding(a).size([n,i]);var m=e.link();e.nodes(r.nodes).links(r.links).layout(32).center(l);var y=d.append("g").selectAll(".link").data(r.links).enter().append("path").attr("class","link").attr("d",m).style("stroke-width",(function(t){return Math.max(1,t.dy)})).sort((function(t,e){return e.dy-t.dy}));y.append("title").text(f);var x=d.append("g").selectAll(".node").data(r.nodes).enter().append("g").attr("class","node").attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).call(d3.behavior.drag().origin((function(t){return t})).on("dragstart",(function(){this.parentNode.appendChild(this)})).on("drag",(function(t){d3.select(this).attr("transform","translate("+t.x+","+(t.y=Math.max(0,Math.min(i-t.dy,d3.event.y)))+")"),e.relayout(),y.attr("d",m)})));x.append("rect").attr("height",(function(t){return t.dy})).attr("width",e.nodeWidth()).style("fill",p).style("stroke",h).append("title").text(v),x.append("text").attr("x",-6).attr("y",(function(t){return t.dy/2})).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text((function(t){return t.name})).filter((function(t){return t.x<n/2})).attr("x",6+e.nodeWidth()).attr("text-anchor","start")})),m}return m.options=r.utils.optionsFunc.bind(m),m._options=Object.create({},{units:{get:function(){return s},set:function(t){s=t}},width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return i},set:function(t){i=t}},format:{get:function(){return c},set:function(t){c=t}},linkTitle:{get:function(){return f},set:function(t){f=t}},nodeWidth:{get:function(){return o},set:function(t){o=t}},nodePadding:{get:function(){return a},set:function(t){a=t}},center:{get:function(){return l},set:function(t){l=t}},margin:{get:function(){return t},set:function(e){t.top=void 0!==e.top?e.top:t.top,t.right=void 0!==e.right?e.right:t.right,t.bottom=void 0!==e.bottom?e.bottom:t.bottom,t.left=void 0!==e.left?e.left:t.left}},nodeStyle:{get:function(){return{}},set:function(t){p=void 0!==t.fillColor?t.fillColor:p,h=void 0!==t.strokeColor?t.strokeColor:h,v=void 0!==t.title?t.title:v}}}),r.utils.initOptions(m),m},r.models.scatter=function(){"use strict";var t,e,n,i,o,a,s,l,u={top:0,right:0,bottom:0,left:0},c=null,d=null,f=r.utils.defaultColor(),p=null,h=Math.floor(1e5*Math.random()),v=null,g=d3.scale.linear(),m=d3.scale.linear(),y=d3.scale.linear(),x=function(t){return t.x},b=function(t){return t.y},k=function(t){return t.size||1},w=function(t){return t.shape||"circle"},M=[],A=[],C=[],S=!0,W=function(t){return!t.notActive},F=!1,E=.1,O=!1,D=!0,N=!1,_=function(){return 25},T=null,L=null,B=null,P=null,I=null,z=null,V=!1,j=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),G=!0,H=250,Y=300,R=!1,X=!1,q=r.utils.renderWatch(j,H),Z=[16,256],K={};function U(t){var e;return e=t[0].series+":"+t[1],K[e]=K[e]||{}}function Q(t){var e;e=t[0].series+":"+t[1],delete K[e]}function J(t){var e,n,r,i=U(t),o=!1;for(e=1;e<arguments.length;e+=2)n=arguments[e],r=arguments[e+1](t[0],t[1]),i[n]===r&&i.hasOwnProperty(n)||(i[n]=r,o=!0);return o}function $(H){return q.reset(),H.each((function(H){v=d3.select(this);var K=r.utils.availableWidth(c,v,u),U=r.utils.availableHeight(d,v,u);r.utils.initSVG(v),H.forEach((function(t,e){t.values.forEach((function(t){t.series=e}))}));var tt="function"==typeof $.yScale().base,et=T&&L&&I?[]:d3.merge(H.map((function(t){return t.values.map((function(t,e){return{x:x(t,e),y:b(t,e),size:k(t,e)}}))})));if(g.domain(T||d3.extent(et.map((function(t){return t.x})).concat(M))),F&&H[0]?g.range(B||[(K*E+K)/(2*H[0].values.length),K-K*(1+E)/(2*H[0].values.length)]):g.range(B||[0,K]),tt){var nt=d3.min(et.map((function(t){if(0!==t.y)return t.y})));m.clamp(!0).domain(L||d3.extent(et.map((function(t){return 0!==t.y?t.y:.1*nt})).concat(A))).range(P||[U,0])}else m.domain(L||d3.extent(et.map((function(t){return t.y})).concat(A))).range(P||[U,0]);y.domain(I||d3.extent(et.map((function(t){return t.size})).concat(C))).range(z||Z),V=g.domain()[0]===g.domain()[1]||m.domain()[0]===m.domain()[1],g.domain()[0]===g.domain()[1]&&(g.domain()[0]?g.domain([g.domain()[0]-.01*g.domain()[0],g.domain()[1]+.01*g.domain()[1]]):g.domain([-1,1])),m.domain()[0]===m.domain()[1]&&(m.domain()[0]?m.domain([m.domain()[0]-.01*m.domain()[0],m.domain()[1]+.01*m.domain()[1]]):m.domain([-1,1])),isNaN(g.domain()[0])&&g.domain([-1,1]),isNaN(m.domain()[0])&&m.domain([-1,1]),t=t||g,e=e||m,n=n||y;var rt=g(1)!==t(1)||m(1)!==e(1)||y(1)!==n(1);s=s||d;var it=(a=a||c)!==c||s!==d,ot=(i=i||[])[0]!==g.domain()[0]||i[1]!==g.domain()[1];i=g.domain(),o=o||[],ot=ot||o[0]!==m.domain()[0]||o[1]!==m.domain()[1],o=m.domain();var at=v.selectAll("g.nv-wrap.nv-scatter").data([H]),st=at.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+h),lt=st.append("defs"),ut=st.append("g"),ct=at.select("g");function dt(){if(X=!1,!S)return!1;if(v.selectAll(".nv-point.hover").classed("hover",!1),at.select(".nv-point-paths").selectAll("path").remove(),!0===G){var t=d3.merge(H.map((function(t,e){return t.values.map((function(t,n){var i=x(t,n),o=b(t,n);return[r.utils.NaNtoZero(g(i))+1e-4*Math.random(),r.utils.NaNtoZero(m(o))+1e-4*Math.random(),e,n,t]})).filter((function(t,e){return W(t[4],e)}))})));if(0==t.length)return!1;t.length<3&&(t.push([g.range()[0]-20,m.range()[0]-20,null,null]),t.push([g.range()[1]+20,m.range()[1]+20,null,null]),t.push([g.range()[0]-20,m.range()[0]+20,null,null]),t.push([g.range()[1]+20,m.range()[1]-20,null,null]));var e=d3.geom.polygon([[-10,-10],[-10,d+10],[c+10,d+10],[c+10,-10]]),n=1e-4;t=t.sort((function(t,e){return t[0]-e[0]||t[1]-e[1]}));for(var i=0;i<t.length-1;)Math.abs(t[i][0]-t[i+1][0])<n&&Math.abs(t[i][1]-t[i+1][1])<n?t.splice(i+1,1):i++;var o=d3.geom.voronoi(t).map((function(n,r){return 0===n.length?null:{data:e.clip(n),series:t[r][2],point:t[r][3]}})),a=at.select(".nv-point-paths").selectAll("path").data(o),s=a.enter().append("svg:path").attr("d",(function(t){return t&&t.data&&0!==t.data.length?"M"+t.data.join(",")+"Z":"M 0 0"})).attr("id",(function(t,e){return"nv-path-"+e})).attr("clip-path",(function(t,e){return"url(#nv-clip-"+h+"-"+e+")"}));N&&s.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),D&&(at.select(".nv-point-clips").selectAll("*").remove(),at.select(".nv-point-clips").selectAll("clipPath").data(t).enter().append("svg:clipPath").attr("id",(function(t,e){return"nv-clip-"+h+"-"+e})).append("svg:circle").attr("cx",(function(t){return t[0]})).attr("cy",(function(t){return t[1]})).attr("r",_));var l=function(t,e,n){if(X)return 0;var r=H[e.series];if(void 0!==r){var i=r.values[e.point];i.color=f(r,e.series),i.x=x(i),i.y=b(i);var o=v.node().getBoundingClientRect(),a=window.pageYOffset||document.documentElement.scrollTop,s=window.pageXOffset||document.documentElement.scrollLeft;n({point:i,series:r,pos:{left:g(x(i,e.point))+o.left+s+u.left+10,top:m(b(i,e.point))+o.top+a+u.top+10},relativePos:[g(x(i,e.point))+u.left,m(b(i,e.point))+u.top],seriesIndex:e.series,pointIndex:e.point,event:d3.event,element:t})}};a.on("click",(function(t){l(this,t,j.elementClick)})).on("dblclick",(function(t){l(this,t,j.elementDblClick)})).on("mouseover",(function(t){l(this,t,j.elementMouseover)})).on("mouseout",(function(t,e){l(this,t,j.elementMouseout)}))}else at.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",(function(t,e){if(X||!H[t[0].series])return 0;var n=H[t[0].series],r=n.values[e];j.elementClick({point:r,series:n,pos:[g(x(r,e))+u.left,m(b(r,e))+u.top],relativePos:[g(x(r,e))+u.left,m(b(r,e))+u.top],seriesIndex:t[0].series,pointIndex:e,event:d3.event,element:this})})).on("dblclick",(function(t,e){if(X||!H[t[0].series])return 0;var n=H[t[0].series],r=n.values[e];j.elementDblClick({point:r,series:n,pos:[g(x(r,e))+u.left,m(b(r,e))+u.top],relativePos:[g(x(r,e))+u.left,m(b(r,e))+u.top],seriesIndex:t[0].series,pointIndex:e})})).on("mouseover",(function(t,e){if(X||!H[t[0].series])return 0;var n=H[t[0].series],r=n.values[e];j.elementMouseover({point:r,series:n,pos:[g(x(r,e))+u.left,m(b(r,e))+u.top],relativePos:[g(x(r,e))+u.left,m(b(r,e))+u.top],seriesIndex:t[0].series,pointIndex:e,color:f(t[0],e)})})).on("mouseout",(function(t,e){if(X||!H[t[0].series])return 0;var n=H[t[0].series],r=n.values[e];j.elementMouseout({point:r,series:n,pos:[g(x(r,e))+u.left,m(b(r,e))+u.top],relativePos:[g(x(r,e))+u.left,m(b(r,e))+u.top],seriesIndex:t[0].series,pointIndex:e,color:f(t[0],e)})}))}at.classed("nv-single-point",V),ut.append("g").attr("class","nv-groups"),ut.append("g").attr("class","nv-point-paths"),st.append("g").attr("class","nv-point-clips"),at.attr("transform","translate("+u.left+","+u.top+")"),lt.append("clipPath").attr("id","nv-edge-clip-"+h).append("rect").attr("transform","translate( -10, -10)"),at.select("#nv-edge-clip-"+h+" rect").attr("width",K+20).attr("height",U>0?U+20:0),ct.attr("clip-path",O?"url(#nv-edge-clip-"+h+")":""),X=!0;var ft=at.select(".nv-groups").selectAll(".nv-group").data((function(t){return t}),(function(t){return t.key}));ft.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),ft.exit().remove(),ft.attr("class",(function(t,e){return(t.classed||"")+" nv-group nv-series-"+e})).classed("nv-noninteractive",!S).classed("hover",(function(t){return t.hover})),ft.watchTransition(q,"scatter: groups").style("fill",(function(t,e){return f(t,e)})).style("stroke",(function(t,e){return t.pointBorderColor||p||f(t,e)})).style("stroke-opacity",1).style("fill-opacity",.5);var pt=ft.selectAll("path.nv-point").data((function(t){return t.values.map((function(t,e){return[t,e]})).filter((function(t,e){return W(t[0],e)}))}));if(pt.enter().append("path").attr("class",(function(t){return"nv-point nv-point-"+t[1]})).style("fill",(function(t){return t.color})).style("stroke",(function(t){return t.color})).attr("transform",(function(n){return"translate("+r.utils.NaNtoZero(t(x(n[0],n[1])))+","+r.utils.NaNtoZero(e(b(n[0],n[1])))+")"})).attr("d",r.utils.symbol().type((function(t){return w(t[0])})).size((function(t){return y(k(t[0],t[1]))}))),pt.exit().each(Q).remove(),ft.exit().selectAll("path.nv-point").watchTransition(q,"scatter exit").attr("transform",(function(t){return"translate("+r.utils.NaNtoZero(g(x(t[0],t[1])))+","+r.utils.NaNtoZero(m(b(t[0],t[1])))+")"})).remove(),pt.filter((function(t){return J(t,"x",x,"y",b)||rt||it||ot})).watchTransition(q,"scatter points").attr("transform",(function(t){return"translate("+r.utils.NaNtoZero(g(x(t[0],t[1])))+","+r.utils.NaNtoZero(m(b(t[0],t[1])))+")"})),pt.filter((function(t){return J(t,"shape",w,"size",k)||rt||it||ot})).watchTransition(q,"scatter points").attr("d",r.utils.symbol().type((function(t){return w(t[0])})).size((function(t){return y(k(t[0],t[1]))}))),R){var ht=ft.selectAll(".nv-label").data((function(t){return t.values.map((function(t,e){return[t,e]})).filter((function(t,e){return W(t[0],e)}))}));ht.enter().append("text").style("fill",(function(t,e){return t.color})).style("stroke-opacity",0).style("fill-opacity",1).attr("transform",(function(n){return"translate("+(r.utils.NaNtoZero(t(x(n[0],n[1])))+Math.sqrt(y(k(n[0],n[1]))/Math.PI)+2)+","+r.utils.NaNtoZero(e(b(n[0],n[1])))+")"})).text((function(t,e){return t[0].label})),ht.exit().remove(),ft.exit().selectAll("path.nv-label").watchTransition(q,"scatter exit").attr("transform",(function(t){return"translate("+(r.utils.NaNtoZero(g(x(t[0],t[1])))+Math.sqrt(y(k(t[0],t[1]))/Math.PI)+2)+","+r.utils.NaNtoZero(m(b(t[0],t[1])))+")"})).remove(),ht.each((function(t){d3.select(this).classed("nv-label",!0).classed("nv-label-"+t[1],!1).classed("hover",!1)})),ht.watchTransition(q,"scatter labels").text((function(t,e){return t[0].label})).attr("transform",(function(t){return"translate("+(r.utils.NaNtoZero(g(x(t[0],t[1])))+Math.sqrt(y(k(t[0],t[1]))/Math.PI)+2)+","+r.utils.NaNtoZero(m(b(t[0],t[1])))+")"}))}Y?(clearTimeout(l),l=setTimeout(dt,Y)):dt(),t=g.copy(),e=m.copy(),n=y.copy(),a=c,s=d})),q.renderEnd("scatter immediate"),$}return $.dispatch=j,$.options=r.utils.optionsFunc.bind($),$._calls=new function(){this.clearHighlights=function(){return r.dom.write((function(){v.selectAll(".nv-point.hover").classed("hover",!1)})),null},this.highlightPoint=function(t,e,n){r.dom.write((function(){v.select(".nv-groups").selectAll(".nv-series-"+t).selectAll(".nv-point-"+e).classed("hover",n)}))}},j.on("elementMouseover.point",(function(t){S&&$._calls.highlightPoint(t.seriesIndex,t.pointIndex,!0)})),j.on("elementMouseout.point",(function(t){S&&$._calls.highlightPoint(t.seriesIndex,t.pointIndex,!1)})),$._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},xScale:{get:function(){return g},set:function(t){g=t}},yScale:{get:function(){return m},set:function(t){m=t}},pointScale:{get:function(){return y},set:function(t){y=t}},xDomain:{get:function(){return T},set:function(t){T=t}},yDomain:{get:function(){return L},set:function(t){L=t}},pointDomain:{get:function(){return I},set:function(t){I=t}},xRange:{get:function(){return B},set:function(t){B=t}},yRange:{get:function(){return P},set:function(t){P=t}},pointRange:{get:function(){return z},set:function(t){z=t}},forceX:{get:function(){return M},set:function(t){M=t}},forceY:{get:function(){return A},set:function(t){A=t}},forcePoint:{get:function(){return C},set:function(t){C=t}},interactive:{get:function(){return S},set:function(t){S=t}},pointActive:{get:function(){return W},set:function(t){W=t}},padDataOuter:{get:function(){return E},set:function(t){E=t}},padData:{get:function(){return F},set:function(t){F=t}},clipEdge:{get:function(){return O},set:function(t){O=t}},clipVoronoi:{get:function(){return D},set:function(t){D=t}},clipRadius:{get:function(){return _},set:function(t){_=t}},showVoronoi:{get:function(){return N},set:function(t){N=t}},id:{get:function(){return h},set:function(t){h=t}},interactiveUpdateDelay:{get:function(){return Y},set:function(t){Y=t}},showLabels:{get:function(){return R},set:function(t){R=t}},pointBorderColor:{get:function(){return p},set:function(t){p=t}},x:{get:function(){return x},set:function(t){x=d3.functor(t)}},y:{get:function(){return b},set:function(t){b=d3.functor(t)}},pointSize:{get:function(){return k},set:function(t){k=d3.functor(t)}},pointShape:{get:function(){return w},set:function(t){w=d3.functor(t)}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return H},set:function(t){H=t,q.reset(H)}},color:{get:function(){return f},set:function(t){f=r.utils.getColor(t)}},useVoronoi:{get:function(){return G},set:function(t){!1===(G=t)&&(D=!1)}}}),r.utils.initOptions($),$},r.models.scatterChart=function(){"use strict";var t=r.models.scatter(),e=r.models.axis(),n=r.models.axis(),i=r.models.legend(),o=r.models.distribution(),a=r.models.distribution(),s=r.models.tooltip(),l={top:30,right:20,bottom:50,left:75},u=null,c=null,d=null,f=null,p=r.utils.defaultColor(),h=t.xScale(),v=t.yScale(),g=!1,m=!1,y=!0,x=!0,b=!0,k=!1,w=r.utils.state(),M=null,A=d3.dispatch("stateChange","changeState","renderEnd"),C=null,S=250,W=!1;t.xScale(h).yScale(v),e.orient("bottom").tickPadding(10),n.orient(k?"right":"left").tickPadding(10),o.axis("x"),a.axis("y"),s.headerFormatter((function(t,n){return e.tickFormat()(t,n)})).valueFormatter((function(t,e){return n.tickFormat()(t,e)}));var F=r.utils.renderWatch(A,S);function E(C){return F.reset(),F.models(t),x&&F.models(e),b&&F.models(n),g&&F.models(o),m&&F.models(a),C.each((function(C){f=d3.select(this),r.utils.initSVG(f);var O,D=r.utils.availableWidth(c,f,l),N=r.utils.availableHeight(d,f,l);if(E.update=function(){0===S?f.call(E):f.transition().duration(S).call(E)},E.container=this,w.setter(function(t){return function(e){void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(C),E.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled}))}}}(C)).update(),w.disabled=C.map((function(t){return!!t.disabled})),!M)for(O in M={},w)w[O]instanceof Array?M[O]=w[O].slice(0):M[O]=w[O];if(!(C&&C.length&&C.filter((function(t){return t.values.length})).length))return r.utils.noData(E,f),F.renderEnd("scatter immediate"),E;f.selectAll(".nv-noData").remove(),h=t.xScale(),v=t.yScale();var _=f.selectAll("g.nv-wrap.nv-scatterChart").data([C]),T=_.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+t.id()).append("g"),L=_.select("g");if(T.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),T.append("g").attr("class","nv-x nv-axis"),T.append("g").attr("class","nv-y nv-axis"),T.append("g").attr("class","nv-scatterWrap"),T.append("g").attr("class","nv-regressionLinesWrap"),T.append("g").attr("class","nv-distWrap"),T.append("g").attr("class","nv-legendWrap"),k&&L.select(".nv-y.nv-axis").attr("transform","translate("+D+",0)"),y){var B=D;i.width(B),_.select(".nv-legendWrap").datum(C).call(i),u||i.height()===l.top||(l.top=i.height(),N=r.utils.availableHeight(d,f,l)),_.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")}else L.select(".nv-legendWrap").selectAll("*").remove();_.attr("transform","translate("+l.left+","+l.top+")"),t.width(D).height(N).color(C.map((function(t,e){return t.color=t.color||p(t,e),t.color})).filter((function(t,e){return!C[e].disabled}))).showLabels(W),_.select(".nv-scatterWrap").datum(C.filter((function(t){return!t.disabled}))).call(t),_.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+t.id()+")");var P=_.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data((function(t){return t}));P.enter().append("g").attr("class","nv-regLines");var I=P.selectAll(".nv-regLine").data((function(t){return[t]}));I.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),I.filter((function(t){return t.intercept&&t.slope})).watchTransition(F,"scatterPlusLineChart: regline").attr("x1",h.range()[0]).attr("x2",h.range()[1]).attr("y1",(function(t,e){return v(h.domain()[0]*t.slope+t.intercept)})).attr("y2",(function(t,e){return v(h.domain()[1]*t.slope+t.intercept)})).style("stroke",(function(t,e,n){return p(t,n)})).style("stroke-opacity",(function(t,e){return t.disabled||void 0===t.slope||void 0===t.intercept?0:1})),x&&(e.scale(h)._ticks(r.utils.calcTicksX(D/100,C)).tickSize(-N,0),L.select(".nv-x.nv-axis").attr("transform","translate(0,"+v.range()[0]+")").call(e)),b&&(n.scale(v)._ticks(r.utils.calcTicksY(N/36,C)).tickSize(-D,0),L.select(".nv-y.nv-axis").call(n)),o.getData(t.x()).scale(h).width(D).color(C.map((function(t,e){return t.color||p(t,e)})).filter((function(t,e){return!C[e].disabled}))),T.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),L.select(".nv-distributionX").attr("transform","translate(0,"+v.range()[0]+")").datum(C.filter((function(t){return!t.disabled}))).call(o).style("opacity",(function(){return g?"1":"1e-6"})).watchTransition(F,"scatterPlusLineChart").style("opacity",(function(){return g?"1":"1e-6"})),a.getData(t.y()).scale(v).width(N).color(C.map((function(t,e){return t.color||p(t,e)})).filter((function(t,e){return!C[e].disabled}))),T.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),L.select(".nv-distributionY").attr("transform","translate("+(k?D:-a.size())+",0)").datum(C.filter((function(t){return!t.disabled}))).call(a).style("opacity",(function(){return m?"1":"1e-6"})).watchTransition(F,"scatterPlusLineChart").style("opacity",(function(){return m?"1":"1e-6"})),i.dispatch.on("stateChange",(function(t){for(var e in t)w[e]=t[e];A.stateChange(w),E.update()})),A.on("changeState",(function(t){void 0!==t.disabled&&(C.forEach((function(e,n){e.disabled=t.disabled[n]})),w.disabled=t.disabled),E.update()})),t.dispatch.on("elementMouseout.tooltip",(function(e){s.hidden(!0),f.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",0),f.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",a.size())})),t.dispatch.on("elementMouseover.tooltip",(function(t){f.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.relativePos[1]-N),f.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.relativePos[0]+o.size()),s.data(t).hidden(!1)})),h.copy(),v.copy()})),F.renderEnd("scatter with line immediate"),E}return E.dispatch=A,E.scatter=t,E.legend=i,E.xAxis=e,E.yAxis=n,E.distX=o,E.distY=a,E.tooltip=s,E.options=r.utils.optionsFunc.bind(E),E._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},container:{get:function(){return f},set:function(t){f=t}},showDistX:{get:function(){return g},set:function(t){g=t}},showDistY:{get:function(){return m},set:function(t){m=t}},showLegend:{get:function(){return y},set:function(t){y=t}},showXAxis:{get:function(){return x},set:function(t){x=t}},showYAxis:{get:function(){return b},set:function(t){b=t}},defaultState:{get:function(){return M},set:function(t){M=t}},noData:{get:function(){return C},set:function(t){C=t}},duration:{get:function(){return S},set:function(t){S=t}},showLabels:{get:function(){return W},set:function(t){W=t}},margin:{get:function(){return l},set:function(t){void 0!==t.top&&(l.top=t.top,u=t.top),l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},rightAlignYAxis:{get:function(){return k},set:function(t){k=t,n.orient(t?"right":"left")}},color:{get:function(){return p},set:function(t){p=r.utils.getColor(t),i.color(p),o.color(p),a.color(p)}}}),r.utils.inheritOptions(E,t),r.utils.initOptions(E),E},r.models.sparkline=function(){"use strict";var t,e,n,i,o={top:2,right:0,bottom:2,left:0},a=400,s=32,l=null,u=!0,c=d3.scale.linear(),d=d3.scale.linear(),f=function(t){return t.x},p=function(t){return t.y},h=r.utils.getColor(["#000"]),v=!0,g=!0,m=d3.dispatch("renderEnd"),y=r.utils.renderWatch(m);function x(u){return y.reset(),u.each((function(u){var m=a-o.left-o.right,y=s-o.top-o.bottom;l=d3.select(this),r.utils.initSVG(l),c.domain(t||d3.extent(u,f)).range(n||[0,m]),d.domain(e||d3.extent(u,p)).range(i||[y,0]);var x=l.selectAll("g.nv-wrap.nv-sparkline").data([u]);x.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g"),x.select("g"),x.attr("transform","translate("+o.left+","+o.top+")");var b=x.selectAll("path").data((function(t){return[t]}));b.enter().append("path"),b.exit().remove(),b.style("stroke",(function(t,e){return t.color||h(t,e)})).attr("d",d3.svg.line().x((function(t,e){return c(f(t,e))})).y((function(t,e){return d(p(t,e))})));var k=x.selectAll("circle.nv-point").data((function(t){var e=t.map((function(t,e){return p(t,e)}));function n(e){if(-1!=e){var n=t[e];return n.pointIndex=e,n}return null}var r=n(e.lastIndexOf(d.domain()[1])),i=n(e.indexOf(d.domain()[0])),o=n(e.length-1);return[v?i:null,v?r:null,g?o:null].filter((function(t){return null!=t}))}));k.enter().append("circle"),k.exit().remove(),k.attr("cx",(function(t,e){return c(f(t,t.pointIndex))})).attr("cy",(function(t,e){return d(p(t,t.pointIndex))})).attr("r",2).attr("class",(function(t,e){return f(t,t.pointIndex)==c.domain()[1]?"nv-point nv-currentValue":p(t,t.pointIndex)==d.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"}))})),y.renderEnd("sparkline immediate"),x}return x.options=r.utils.optionsFunc.bind(x),x._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},xDomain:{get:function(){return t},set:function(e){t=e}},yDomain:{get:function(){return e},set:function(t){e=t}},xRange:{get:function(){return n},set:function(t){n=t}},yRange:{get:function(){return i},set:function(t){i=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return d},set:function(t){d=t}},animate:{get:function(){return u},set:function(t){u=t}},showMinMaxPoints:{get:function(){return v},set:function(t){v=t}},showCurrentPoint:{get:function(){return g},set:function(t){g=t}},x:{get:function(){return f},set:function(t){f=d3.functor(t)}},y:{get:function(){return p},set:function(t){p=d3.functor(t)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return h},set:function(t){h=r.utils.getColor(t)}}}),x.dispatch=m,r.utils.initOptions(x),x},r.models.sparklinePlus=function(){"use strict";var t,e,n=r.models.sparkline(),i={top:15,right:100,bottom:10,left:50},o=null,a=null,s=[],l=!1,u=d3.format(",r"),c=d3.format(",.2f"),d=!0,f=!0,p=!1,h=null,v=d3.dispatch("renderEnd"),g=r.utils.renderWatch(v);function m(h){return g.reset(),g.models(n),h.each((function(h){var v=d3.select(this);r.utils.initSVG(v);var g=r.utils.availableWidth(o,v,i),y=r.utils.availableHeight(a,v,i);if(m.update=function(){v.call(m)},m.container=this,!h||!h.length)return r.utils.noData(m,v),m;v.selectAll(".nv-noData").remove();var x=n.y()(h[h.length-1],h.length-1);t=n.xScale(),e=n.yScale();var b=v.selectAll("g.nv-wrap.nv-sparklineplus").data([h]),k=b.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),w=b.select("g");k.append("g").attr("class","nv-sparklineWrap"),k.append("g").attr("class","nv-valueWrap"),k.append("g").attr("class","nv-hoverArea"),b.attr("transform","translate("+i.left+","+i.top+")");var M=w.select(".nv-sparklineWrap");if(n.width(g).height(y),M.call(n),d){var A=w.select(".nv-valueWrap").selectAll(".nv-currentValue").data([x]);A.enter().append("text").attr("class","nv-currentValue").attr("dx",p?-8:8).attr("dy",".9em").style("text-anchor",p?"end":"start"),A.attr("x",g+(p?i.right:0)).attr("y",f?function(t){return e(t)}:0).style("fill",n.color()(h[h.length-1],h.length-1)).text(c(x))}function C(){if(!l){var e=w.selectAll(".nv-hoverValue").data(s),r=e.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);e.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),e.attr("transform",(function(e){return"translate("+t(n.x()(h[e],e))+",0)"})).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),s.length&&(r.append("line").attr("x1",0).attr("y1",-i.top).attr("x2",0).attr("y2",y),r.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-i.top).attr("text-anchor","end").attr("dy",".9em"),w.select(".nv-hoverValue .nv-xValue").text(u(n.x()(h[s[0]],s[0]))),r.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-i.top).attr("text-anchor","start").attr("dy",".9em"),w.select(".nv-hoverValue .nv-yValue").text(c(n.y()(h[s[0]],s[0]))))}}k.select(".nv-hoverArea").append("rect").on("mousemove",(function(){if(!l){var e=d3.mouse(this)[0]-i.left;s=[function(t,e){for(var r=Math.abs(n.x()(t[0],0)-e),i=0,o=0;o<t.length;o++)Math.abs(n.x()(t[o],o)-e)<r&&(r=Math.abs(n.x()(t[o],o)-e),i=o);return i}(h,Math.round(t.invert(e)))],C()}})).on("click",(function(){l=!l})).on("mouseout",(function(){s=[],C()})),w.select(".nv-hoverArea rect").attr("transform",(function(t){return"translate("+-i.left+","+-i.top+")"})).attr("width",g+i.left+i.right).attr("height",y+i.top)})),g.renderEnd("sparklinePlus immediate"),m}return m.dispatch=v,m.sparkline=n,m.options=r.utils.optionsFunc.bind(m),m._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},xTickFormat:{get:function(){return u},set:function(t){u=t}},yTickFormat:{get:function(){return c},set:function(t){c=t}},showLastValue:{get:function(){return d},set:function(t){d=t}},alignValue:{get:function(){return f},set:function(t){f=t}},rightAlignValue:{get:function(){return p},set:function(t){p=t}},noData:{get:function(){return h},set:function(t){h=t}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}}}),r.utils.inheritOptions(m,n),r.utils.initOptions(m),m},r.models.stackedArea=function(){"use strict";var t,e,n={top:0,right:0,bottom:0,left:0},i=960,o=500,a=r.utils.defaultColor(),s=Math.floor(1e5*Math.random()),l=null,u=function(t){return t.x},c=function(t){return t.y},d=function(t,e){return!isNaN(c(t,e))&&null!==c(t,e)},f="stack",p="zero",h="default",v="linear",g=!1,m=r.models.scatter(),y=250,x=function(t,e,n){t.display={y:n,y0:e}},b=function(t){return e(t.display.y+t.display.y0)},k=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");m.pointSize(2.2).pointDomain([2.2,2.2]);var w=r.utils.renderWatch(k,y);function M(f){return w.reset(),w.models(m),f.each((function(f){var y=i-n.left-n.right,A=o-n.top-n.bottom;l=d3.select(this),r.utils.initSVG(l),t=m.xScale(),e=m.yScale();var C=f;f.forEach((function(t,e){t.seriesIndex=e,t.values=t.values.map((function(t,n){return t.index=n,t.seriesIndex=e,t}))}));var S=f.filter((function(t){return!t.disabled}));f=d3.layout.stack().order(h).offset(p).values((function(t){return t.values})).x(u).y(c).out(x)(S);var W=l.selectAll("g.nv-wrap.nv-stackedarea").data([f]),F=W.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),E=F.append("defs"),O=F.append("g"),D=W.select("g");O.append("g").attr("class","nv-areaWrap"),O.append("g").attr("class","nv-scatterWrap"),W.attr("transform","translate("+n.left+","+n.top+")"),0==m.forceY().length&&m.forceY().push(0),m.width(y).height(A).x(u).y((function(t){if(void 0!==t.display)return t.display.y+t.display.y0})).color(f.map((function(t,e){return t.color=t.color||a(t,t.seriesIndex),t.color}))),D.select(".nv-scatterWrap").datum(f).call(m),E.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect"),W.select("#nv-edge-clip-"+s+" rect").attr("width",y).attr("height",A),D.attr("clip-path",g?"url(#nv-edge-clip-"+s+")":"");var N=d3.svg.area().defined(d).x((function(e,n){return t(u(e,n))})).y0((function(t){return e(t.display.y0)})).y1(b).interpolate(v),_=d3.svg.area().defined(d).x((function(e,n){return t(u(e,n))})).y0((function(t){return e(t.display.y0)})).y1((function(t){return e(t.display.y0)})),T=D.select(".nv-areaWrap").selectAll("path.nv-area").data((function(t){return t}));T.enter().append("path").attr("class",(function(t,e){return"nv-area nv-area-"+e})).attr("d",(function(t,e){return _(t.values,t.seriesIndex)})).on("mouseover",(function(t,e){d3.select(this).classed("hover",!0),k.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})})).on("mouseout",(function(t,e){d3.select(this).classed("hover",!1),k.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})})).on("click",(function(t,e){d3.select(this).classed("hover",!1),k.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})})),T.exit().remove(),T.style("fill",(function(t,e){return t.color||a(t,t.seriesIndex)})).style("stroke",(function(t,e){return t.color||a(t,t.seriesIndex)})),T.watchTransition(w,"stackedArea path").attr("d",(function(t,e){return N(t.values,e)})),m.dispatch.on("elementMouseover.area",(function(t){D.select(".nv-chart-"+s+" .nv-area-"+t.seriesIndex).classed("hover",!0)})),m.dispatch.on("elementMouseout.area",(function(t){D.select(".nv-chart-"+s+" .nv-area-"+t.seriesIndex).classed("hover",!1)})),M.d3_stackedOffset_stackPercent=function(t){var e,n,r,i=t.length,o=t[0].length,a=[];for(n=0;n<o;++n){for(e=0,r=0;e<C.length;e++)r+=c(C[e].values[n]);if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=0}for(n=0;n<o;++n)a[n]=0;return a}})),w.renderEnd("stackedArea immediate"),M}return M.dispatch=k,M.scatter=m,m.dispatch.on("elementClick",(function(){k.elementClick.apply(this,arguments)})),m.dispatch.on("elementMouseover",(function(){k.elementMouseover.apply(this,arguments)})),m.dispatch.on("elementMouseout",(function(){k.elementMouseout.apply(this,arguments)})),M.interpolate=function(t){return arguments.length?(v=t,M):v},M.duration=function(t){return arguments.length?(y=t,w.reset(y),m.duration(y),M):y},M.dispatch=k,M.scatter=m,M.options=r.utils.optionsFunc.bind(M),M._options=Object.create({},{width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return o},set:function(t){o=t}},defined:{get:function(){return d},set:function(t){d=t}},clipEdge:{get:function(){return g},set:function(t){g=t}},offset:{get:function(){return p},set:function(t){p=t}},order:{get:function(){return h},set:function(t){h=t}},interpolate:{get:function(){return v},set:function(t){v=t}},x:{get:function(){return u},set:function(t){u=d3.functor(t)}},y:{get:function(){return c},set:function(t){c=d3.functor(t)}},areaY1:{get:function(){return b},set:function(t){b=d3.functor(t)}},transformData:{get:function(){return x},set:function(t){x=d3.functor(t)}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},color:{get:function(){return a},set:function(t){a=r.utils.getColor(t)}},style:{get:function(){return f},set:function(t){switch(f=t){case"stack":M.offset("zero"),M.order("default");break;case"stream":M.offset("wiggle"),M.order("inside-out");break;case"stream-center":M.offset("silhouette"),M.order("inside-out");break;case"expand":M.offset("expand"),M.order("default");break;case"stack_percent":M.offset(M.d3_stackedOffset_stackPercent),M.order("default")}}},duration:{get:function(){return y},set:function(t){y=t,w.reset(y),m.duration(y)}}}),r.utils.inheritOptions(M,m),r.utils.initOptions(M),M},r.models.stackedAreaChart=function(){"use strict";var t,e,n=r.models.stackedArea(),i=r.models.axis(),o=r.models.axis(),a=r.models.legend(),s=r.models.legend(),l=r.interactiveGuideline(),u=r.models.tooltip(),c=r.models.focus(r.models.stackedArea()),d={top:10,right:25,bottom:50,left:60},f=null,p=null,h=null,v=r.utils.defaultColor(),g=!0,m=!0,y="top",x=!0,b=!0,k=!1,w=!1,M=!1,A=!0,C="TOTAL",S=r.utils.state(),W=null,F=null,E=d3.dispatch("stateChange","changeState","renderEnd"),O=250,D=["Stacked","Stream","Expanded"],N={},_=250;S.style=n.style(),i.orient("bottom").tickPadding(7),o.orient(k?"right":"left"),u.headerFormatter((function(t,e){return i.tickFormat()(t,e)})).valueFormatter((function(t,e){return o.tickFormat()(t,e)})),l.tooltip.headerFormatter((function(t,e){return i.tickFormat()(t,e)})).valueFormatter((function(t,e){return null==t?"N/A":o.tickFormat()(t,e)}));var T=null,L=null;s.updateState(!1);var B=r.utils.renderWatch(E),P=(n.style(),d3.format("%"));function I(u){return B.reset(),B.models(n),x&&B.models(i),b&&B.models(o),u.each((function(u){var F=d3.select(this);r.utils.initSVG(F);var B,z=r.utils.availableWidth(p,F,d),V=r.utils.availableHeight(h,F,d)-(w?c.height():0);if(I.update=function(){F.transition().duration(_).call(I)},I.container=this,S.setter(function(t){return function(e){void 0!==e.style&&e.style,void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(u),I.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled})),style:n.style()}}}(u)).update(),S.disabled=u.map((function(t){return!!t.disabled})),!W)for(B in W={},S)S[B]instanceof Array?W[B]=S[B].slice(0):W[B]=S[B];if(!(u&&u.length&&u.filter((function(t){return t.values.length})).length))return r.utils.noData(I,F),I;F.selectAll(".nv-noData").remove(),t=n.xScale(),e=n.yScale();var j=F.selectAll("g.nv-wrap.nv-stackedAreaChart").data([u]),G=j.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),H=j.select("g");G.append("g").attr("class","nv-legendWrap"),G.append("g").attr("class","nv-controlsWrap");var Y=G.append("g").attr("class","nv-focus");if(Y.append("g").attr("class","nv-background").append("rect"),Y.append("g").attr("class","nv-x nv-axis"),Y.append("g").attr("class","nv-y nv-axis"),Y.append("g").attr("class","nv-stackedWrap"),Y.append("g").attr("class","nv-interactive"),G.append("g").attr("class","nv-focusWrap"),m){var R=g&&"top"===y?z-O:z;if(a.width(R),H.select(".nv-legendWrap").datum(u).call(a),"bottom"===y){var X=i.height();d.bottom=Math.max(a.height()+X,d.bottom);var q=(V=r.utils.availableHeight(h,F,d)-(w?c.height():0))+X;H.select(".nv-legendWrap").attr("transform","translate(0,"+q+")")}else"top"===y&&(f||d.top==a.height()||(d.top=a.height(),V=r.utils.availableHeight(h,F,d)-(w?c.height():0)),H.select(".nv-legendWrap").attr("transform","translate("+(z-R)+","+-d.top+")"))}else H.select(".nv-legendWrap").selectAll("*").remove();if(g){var Z=[{key:N.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=n.style(),style:"stack"},{key:N.stream||"Stream",metaKey:"Stream",disabled:"stream"!=n.style(),style:"stream"},{key:N.stream_center||"Stream Center",metaKey:"Stream_Center",disabled:"stream_center"!=n.style(),style:"stream-center"},{key:N.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=n.style(),style:"expand"},{key:N.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=n.style(),style:"stack_percent"}];O=D.length/3*260,Z=Z.filter((function(t){return-1!==D.indexOf(t.metaKey)})),s.width(O).color(["#444","#444","#444"]),H.select(".nv-controlsWrap").datum(Z).call(s);var K=Math.max(s.height(),m&&"top"===y?a.height():0);d.top!=K&&(d.top=K,V=r.utils.availableHeight(h,F,d)-(w?c.height():0)),H.select(".nv-controlsWrap").attr("transform","translate(0,"+-d.top+")")}else H.select(".nv-controlsWrap").selectAll("*").remove();j.attr("transform","translate("+d.left+","+d.top+")"),k&&H.select(".nv-y.nv-axis").attr("transform","translate("+z+",0)"),M&&(l.width(z).height(V).margin({left:d.left,top:d.top}).svgContainer(F).xScale(t),j.select(".nv-interactive").call(l)),H.select(".nv-focus .nv-background rect").attr("width",z).attr("height",V),n.width(z).height(V).color(u.map((function(t,e){return t.color||v(t,e)})).filter((function(t,e){return!u[e].disabled})));var U,Q=H.select(".nv-focus .nv-stackedWrap").datum(u.filter((function(t){return!t.disabled})));function J(){x&&H.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+V+")").transition().duration(_).call(i)}function $(){if(b){if("expand"===n.style()||"stack_percent"===n.style()){var t=o.tickFormat();T&&t===P||(T=t),o.tickFormat(P)}else T&&(o.tickFormat(T),T=null);H.select(".nv-focus .nv-y.nv-axis").transition().duration(0).call(o)}}if(x&&i.scale(t)._ticks(r.utils.calcTicksX(z/100,u)).tickSize(-V,0),b&&(U="wiggle"===n.offset()?0:r.utils.calcTicksY(V/36,u),o.scale(e)._ticks(U).tickSize(-z,0)),w){c.width(z),H.select(".nv-focusWrap").attr("transform","translate(0,"+(V+d.bottom+c.margin().top)+")").datum(u.filter((function(t){return!t.disabled}))).call(c);var tt=c.brush.empty()?c.xDomain():c.brush.extent();null!==tt&&et(tt)}else Q.transition().call(n),J(),$();function et(t){H.select(".nv-focus .nv-stackedWrap").datum(u.filter((function(t){return!t.disabled})).map((function(e,r){return{key:e.key,area:e.area,classed:e.classed,values:e.values.filter((function(e,r){return n.x()(e,r)>=t[0]&&n.x()(e,r)<=t[1]})),disableTooltip:e.disableTooltip}}))).transition().duration(_).call(n),J(),$()}n.dispatch.on("areaClick.toggle",(function(t){1===u.filter((function(t){return!t.disabled})).length?u.forEach((function(t){t.disabled=!1})):u.forEach((function(e,n){e.disabled=n!=t.seriesIndex})),S.disabled=u.map((function(t){return!!t.disabled})),E.stateChange(S),I.update()})),a.dispatch.on("stateChange",(function(t){for(var e in t)S[e]=t[e];E.stateChange(S),I.update()})),s.dispatch.on("legendClick",(function(t,e){t.disabled&&(Z=Z.map((function(t){return t.disabled=!0,t})),t.disabled=!1,n.style(t.style),S.style=n.style(),E.stateChange(S),I.update())})),l.dispatch.on("elementMousemove",(function(t){n.clearHighlights();var e,i,o,a=[],s=0,c=!0,d=!1;if(u.filter((function(t,e){return t.seriesIndex=e,!t.disabled})).forEach((function(l,f){i=r.interactiveBisect(l.values,t.pointXValue,I.x());var p=l.values[i],h=I.y()(p,i);if(null!=h&&h>0&&(n.highlightPoint(f,i,!0),d=!0),f!==u.length-1||d||n.highlightPoint(f,i,!0),void 0!==p){void 0===e&&(e=p),void 0===o&&(o=I.xScale()(I.x()(p,i)));var g="expand"==n.style()?p.display.y:I.y()(p,i);a.push({key:l.key,value:g,color:v(l,l.seriesIndex),point:p}),A&&"expand"!=n.style()&&null!=g&&(s+=g,c=!1)}})),a.reverse(),a.length>2){var f=I.yScale().invert(t.mouseY),p=null;a.forEach((function(t,e){f=Math.abs(f);var n=Math.abs(t.point.display.y0),r=Math.abs(t.point.display.y);f>=n&&f<=r+n&&(p=e)})),null!=p&&(a[p].highlight=!0)}A&&"expand"!=n.style()&&a.length>=2&&!c&&a.push({key:C,value:s,total:!0});var h=I.x()(e,i),g=l.tooltip.valueFormatter();"expand"===n.style()||"stack_percent"===n.style()?(L||(L=g),g=d3.format(".1%")):L&&(g=L,L=null),l.tooltip.valueFormatter(g).data({value:h,series:a})(),l.renderGuideLine(o)})),l.dispatch.on("elementMouseout",(function(t){n.clearHighlights()})),c.dispatch.on("onBrush",(function(t){et(t)})),E.on("changeState",(function(t){void 0!==t.disabled&&u.length===t.disabled.length&&(u.forEach((function(e,n){e.disabled=t.disabled[n]})),S.disabled=t.disabled),void 0!==t.style&&(n.style(t.style),t.style),I.update()}))})),B.renderEnd("stacked Area chart immediate"),I}return n.dispatch.on("elementMouseover.tooltip",(function(t){t.point.x=n.x()(t.point),t.point.y=n.y()(t.point),u.data(t).hidden(!1)})),n.dispatch.on("elementMouseout.tooltip",(function(t){u.hidden(!0)})),I.dispatch=E,I.stacked=n,I.legend=a,I.controls=s,I.xAxis=i,I.x2Axis=c.xAxis,I.yAxis=o,I.y2Axis=c.yAxis,I.interactiveLayer=l,I.tooltip=u,I.focus=c,I.dispatch=E,I.options=r.utils.optionsFunc.bind(I),I._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return m},set:function(t){m=t}},legendPosition:{get:function(){return y},set:function(t){y=t}},showXAxis:{get:function(){return x},set:function(t){x=t}},showYAxis:{get:function(){return b},set:function(t){b=t}},defaultState:{get:function(){return W},set:function(t){W=t}},noData:{get:function(){return F},set:function(t){F=t}},showControls:{get:function(){return g},set:function(t){g=t}},controlLabels:{get:function(){return N},set:function(t){N=t}},controlOptions:{get:function(){return D},set:function(t){D=t}},showTotalInTooltip:{get:function(){return A},set:function(t){A=t}},totalLabel:{get:function(){return C},set:function(t){C=t}},focusEnable:{get:function(){return w},set:function(t){w=t}},focusHeight:{get:function(){return c.height()},set:function(t){c.height(t)}},brushExtent:{get:function(){return c.brushExtent()},set:function(t){c.brushExtent(t)}},margin:{get:function(){return d},set:function(t){void 0!==t.top&&(d.top=t.top,f=t.top),d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},focusMargin:{get:function(){return c.margin},set:function(t){c.margin.top=void 0!==t.top?t.top:c.margin.top,c.margin.right=void 0!==t.right?t.right:c.margin.right,c.margin.bottom=void 0!==t.bottom?t.bottom:c.margin.bottom,c.margin.left=void 0!==t.left?t.left:c.margin.left}},duration:{get:function(){return _},set:function(t){_=t,B.reset(_),n.duration(_),i.duration(_),o.duration(_)}},color:{get:function(){return v},set:function(t){v=r.utils.getColor(t),a.color(v),n.color(v),c.color(v)}},x:{get:function(){return n.x()},set:function(t){n.x(t),c.x(t)}},y:{get:function(){return n.y()},set:function(t){n.y(t),c.y(t)}},rightAlignYAxis:{get:function(){return k},set:function(t){k=t,o.orient(k?"right":"left")}},useInteractiveGuideline:{get:function(){return M},set:function(t){M=!!t,I.interactive(!t),I.useVoronoi(!t),n.scatter.interactive(!t)}}}),r.utils.inheritOptions(I,n),r.utils.initOptions(I),I},r.models.stackedAreaWithFocusChart=function(){return r.models.stackedAreaChart().margin({bottom:30}).focusEnable(!0)},r.models.sunburst=function(){"use strict";var t,e,n,i,o={top:0,right:0,bottom:0,left:0},a=600,s=600,l="count",u={count:function(t){return 1},value:function(t){return t.value||t.size},size:function(t){return t.value||t.size}},c=Math.floor(1e4*Math.random()),d=null,f=r.utils.defaultColor(),p=!1,h=function(t){return"count"===l?t.name+" #"+t.value:t.name+" "+(t.value||t.size)},v=.02,g=function(t,e){return t.name>e.name},m=function(t,e){return void 0!==t.parent?t.name+"-"+t.parent.name+"-"+e:t.name},y=!0,x=500,b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),k=d3.scale.linear().range([0,2*Math.PI]),w=d3.scale.sqrt(),M=d3.layout.partition().sort(g),A={},C=d3.svg.arc().startAngle((function(t){return Math.max(0,Math.min(2*Math.PI,k(t.x)))})).endAngle((function(t){return Math.max(0,Math.min(2*Math.PI,k(t.x+t.dx)))})).innerRadius((function(t){return Math.max(0,w(t.y))})).outerRadius((function(t){return Math.max(0,w(t.y+t.dy))}));function S(t){return W(t)>90?180:0}function W(t){return(Math.max(0,Math.min(2*Math.PI,k(t.x)))+Math.max(0,Math.min(2*Math.PI,k(t.x+t.dx))))/2*(180/Math.PI)-90}function F(t){var e=Math.max(0,Math.min(2*Math.PI,k(t.x)));return(Math.max(0,Math.min(2*Math.PI,k(t.x+t.dx)))-e)/(2*Math.PI)}function E(t){var e=Math.max(0,Math.min(2*Math.PI,k(t.x)));return Math.max(0,Math.min(2*Math.PI,k(t.x+t.dx)))-e>v}function O(e,n){var r=d3.interpolate(k.domain(),[t.x,t.x+t.dx]),o=d3.interpolate(w.domain(),[t.y,1]),a=d3.interpolate(w.range(),[t.y?20:0,i]);return 0===n?function(){return C(e)}:function(t){return k.domain(r(t)),w.domain(o(t)).range(a(t)),C(e)}}function D(t){var e=d3.interpolate({x:t.x0,dx:t.dx0,y:t.y0,dy:t.dy0},t);return function(n){var r=e(n);return t.x0=r.x,t.dx0=r.dx,t.y0=r.y,t.dy0=r.dy,C(r)}}function N(e){var n=d.selectAll("text"),r=d.selectAll("path");n.transition().attr("opacity",0),t=e,r.transition().duration(x).attrTween("d",O).each("end",(function(t){t.x>=e.x&&t.x<e.x+e.dx&&t.depth>=e.depth&&d3.select(this.parentNode).select("text").transition().duration(x).text((function(t){return h(t)})).attr("opacity",(function(t){return E(t)?1:0})).attr("transform",(function(){var n=this.getBBox().width;if(0===t.depth)return"translate("+n/2*-1+",0)";if(t.depth===e.depth)return"translate("+(w(t.y)+5)+",0)";var r=W(t),i=S(t);return 0===i?"rotate("+r+")translate("+(w(t.y)+5)+",0)":"rotate("+r+")translate("+(w(t.y)+n+5)+",0)rotate("+i+")"}))}))}var _=r.utils.renderWatch(b);function T(t){return _.reset(),t.each((function(t){d=d3.select(this),e=r.utils.availableWidth(a,d,o),n=r.utils.availableHeight(s,d,o),i=Math.min(e,n)/2,w.range([0,i]);var v=d.select("g.nvd3.nv-wrap.nv-sunburst");v[0][0]?v.attr("transform","translate("+(e/2+o.left+o.right)+","+(n/2+o.top+o.bottom)+")"):v=d.append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+c).attr("transform","translate("+(e/2+o.left+o.right)+","+(n/2+o.top+o.bottom)+")"),d.on("click",(function(t,e){b.chartClick({data:t,index:e,pos:d3.event,id:c})})),M.value(u[l]||u.count);var g=M.nodes(t[0]).reverse();!function(t){t.forEach((function(t){var e=m(t),n=A[e];n?(t.dx0=n.dx,t.x0=n.x,t.dy0=n.dy,t.y0=n.y):(t.dx0=t.dx,t.x0=t.x,t.dy0=t.dy,t.y0=t.y),function(t){var e=m(t);A[e]||(A[e]={});var n=A[e];n.dx=t.dx,n.x=t.x,n.dy=t.dy,n.y=t.y}(t)}))}(g);var k=v.selectAll(".arc-container").data(g,m);k.enter().append("g").attr("class","arc-container").append("path").attr("d",C).style("fill",(function(t){return t.color?t.color:f(y?(t.children?t:t.parent).name:t.name)})).style("stroke","#FFF").on("click",(function(t,e){N(t),b.elementClick({data:t,index:e})})).on("mouseover",(function(t,e){d3.select(this).classed("hover",!0).style("opacity",.8),b.elementMouseover({data:t,color:d3.select(this).style("fill"),percent:F(t)})})).on("mouseout",(function(t,e){d3.select(this).classed("hover",!1).style("opacity",1),b.elementMouseout({data:t})})).on("mousemove",(function(t,e){b.elementMousemove({data:t})})),k.each((function(t){d3.select(this).select("path").transition().duration(x).attrTween("d",D)})),p&&(k.selectAll("text").remove(),k.append("text").text((function(t){return h(t)})).transition().duration(x).attr("opacity",(function(t){return E(t)?1:0})).attr("transform",(function(t){var e=this.getBBox().width;if(0===t.depth)return"rotate(0)translate("+e/2*-1+",0)";var n=W(t),r=S(t);return 0===r?"rotate("+n+")translate("+(w(t.y)+5)+",0)":"rotate("+n+")translate("+(w(t.y)+e+5)+",0)rotate("+r+")"}))),N(g[g.length-1]),k.exit().transition().duration(x).attr("opacity",0).each("end",(function(t){var e=m(t);A[e]=void 0})).remove()})),_.renderEnd("sunburst immediate"),T}return T.dispatch=b,T.options=r.utils.optionsFunc.bind(T),T._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},mode:{get:function(){return l},set:function(t){l=t}},id:{get:function(){return c},set:function(t){c=t}},duration:{get:function(){return x},set:function(t){x=t}},groupColorByParent:{get:function(){return y},set:function(t){y=!!t}},showLabels:{get:function(){return p},set:function(t){p=!!t}},labelFormat:{get:function(){return h},set:function(t){h=t}},labelThreshold:{get:function(){return v},set:function(t){v=t}},sort:{get:function(){return g},set:function(t){g=t}},key:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return o},set:function(t){o.top=null!=t.top?t.top:o.top,o.right=null!=t.right?t.right:o.right,o.bottom=null!=t.bottom?t.bottom:o.bottom,o.left=null!=t.left?t.left:o.left}},color:{get:function(){return f},set:function(t){f=r.utils.getColor(t)}}}),r.utils.initOptions(T),T},r.models.sunburstChart=function(){"use strict";var t=r.models.sunburst(),e=r.models.tooltip(),n={top:30,right:20,bottom:20,left:20},i=r.utils.defaultColor(),o=!1,a=(Math.round(1e5*Math.random()),null),s=null,l=250,u=d3.dispatch("stateChange","changeState","renderEnd"),c=r.utils.renderWatch(u);function d(e){return c.reset(),c.models(t),e.each((function(e){var i=d3.select(this);r.utils.initSVG(i);var o=r.utils.availableWidth(null,i,n),a=r.utils.availableHeight(null,i,n);if(d.update=function(){0===l?i.call(d):i.transition().duration(l).call(d)},d.container=i,!e||!e.length)return r.utils.noData(d,i),d;i.selectAll(".nv-noData").remove(),t.width(o).height(a).margin(n),i.call(t)})),c.renderEnd("sunburstChart immediate"),d}return e.duration(0).headerEnabled(!1).valueFormatter((function(t){return t})),t.dispatch.on("elementMouseover.tooltip",(function(t){t.series={key:t.data.name,value:t.data.value||t.data.size,color:t.color,percent:t.percent},o||(delete t.percent,delete t.series.percent),e.data(t).hidden(!1)})),t.dispatch.on("elementMouseout.tooltip",(function(t){e.hidden(!0)})),t.dispatch.on("elementMousemove.tooltip",(function(t){e()})),d.dispatch=u,d.sunburst=t,d.tooltip=e,d.options=r.utils.optionsFunc.bind(d),d._options=Object.create({},{noData:{get:function(){return s},set:function(t){s=t}},defaultState:{get:function(){return a},set:function(t){a=t}},showTooltipPercent:{get:function(){return o},set:function(t){o=t}},color:{get:function(){return i},set:function(e){i=e,t.color(i)}},duration:{get:function(){return l},set:function(e){l=e,c.reset(l),t.duration(l)}},margin:{get:function(){return n},set:function(e){n.top=void 0!==e.top?e.top:n.top,n.right=void 0!==e.right?e.right:n.right,n.bottom=void 0!==e.bottom?e.bottom:n.bottom,n.left=void 0!==e.left?e.left:n.left,t.margin(n)}}}),r.utils.inheritOptions(d,t),r.utils.initOptions(d),d},r.version="2.0.5"}}]);
//# sourceMappingURL=108c8baedd99ed2b2154.chunk.js.map
