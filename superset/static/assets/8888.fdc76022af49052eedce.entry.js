"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[8888],{11409:(e,t,r)=>{r.r(t),r.d(t,{ADD_QUERY_EDITOR:()=>I,CHANGE_DATA_PREVIEW_ID:()=>Ee,CLEAR_QUERY_RESULTS:()=>de,CLONE_QUERY_TO_NEW_TAB:()=>N,COLLAPSE_TABLE:()=>P,COST_ESTIMATE_FAILED:()=>Se,COST_ESTIMATE_RETURNED:()=>Ae,COST_ESTIMATE_STARTED:()=>he,CREATE_DATASOURCE_FAILED:()=>fe,CREATE_DATASOURCE_STARTED:()=>ye,CREATE_DATASOURCE_SUCCESS:()=>ge,CtasEnum:()=>Ne,END_QUERY:()=>U,EXPAND_TABLE:()=>C,LOAD_QUERY_EDITOR:()=>ee,MERGE_TABLE:()=>O,MIGRATE_QUERY:()=>z,MIGRATE_QUERY_EDITOR:()=>V,MIGRATE_TABLE:()=>W,MIGRATE_TAB_HISTORY:()=>j,QUERY_EDITOR_PERSIST_HEIGHT:()=>F,QUERY_EDITOR_SAVED:()=>v,QUERY_EDITOR_SETDB:()=>x,QUERY_EDITOR_SET_AUTORUN:()=>B,QUERY_EDITOR_SET_FUNCTION_NAMES:()=>k,QUERY_EDITOR_SET_QUERY_LIMIT:()=>H,QUERY_EDITOR_SET_SCHEMA:()=>q,QUERY_EDITOR_SET_SCHEMA_OPTIONS:()=>Z,QUERY_EDITOR_SET_SELECTED_TEXT:()=>G,QUERY_EDITOR_SET_SQL:()=>M,QUERY_EDITOR_SET_TABLE_OPTIONS:()=>Q,QUERY_EDITOR_SET_TEMPLATE_PARAMS:()=>Y,QUERY_EDITOR_SET_TITLE:()=>$,QUERY_EDITOR_TOGGLE_LEFT_BAR:()=>K,QUERY_FAILED:()=>ce,QUERY_SUCCESS:()=>ue,QUERY_VALIDATION_FAILED:()=>Te,QUERY_VALIDATION_RETURNED:()=>pe,REFRESH_QUERIES:()=>ne,REMOVE_DATA_PREVIEW:()=>_e,REMOVE_QUERY:()=>w,REMOVE_QUERY_EDITOR:()=>L,REMOVE_TABLES:()=>D,REQUEST_QUERY_RESULTS:()=>le,RESET_STATE:()=>R,RUN_QUERY:()=>oe,SET_ACTIVE_QUERY_EDITOR:()=>J,SET_ACTIVE_SOUTHPANE_TAB:()=>re,SET_DATABASES:()=>X,SET_TABLES:()=>te,SET_USER_OFFLINE:()=>ae,START_QUERY:()=>ie,START_QUERY_VALIDATION:()=>me,STOP_QUERY:()=>se,UPDATE_QUERY_EDITOR:()=>b,addDangerToast:()=>be,addInfoToast:()=>Re,addNewQueryEditor:()=>nt,addQueryEditor:()=>rt,addSavedQueryToTabState:()=>gt,addSuccessToast:()=>Ie,addTable:()=>Ut,addWarningToast:()=>ve,changeDataPreviewId:()=>wt,clearQueryResults:()=>ke,cloneQueryToNewTab:()=>at,collapseTable:()=>xt,convertQueryToClient:()=>we,convertQueryToServer:()=>Ue,createCtasDatasource:()=>Vt,createDatasource:()=>Kt,createDatasourceFailed:()=>Ft,createDatasourceStarted:()=>Gt,createDatasourceSuccess:()=>kt,estimateQueryCost:()=>Be,expandTable:()=>Pt,fetchQueryResults:()=>Ve,getUpToDateQuery:()=>Ce,loadQueryEditor:()=>it,mergeTable:()=>Lt,migrateQueryEditorFromLocalStorage:()=>tt,persistEditorHeight:()=>$t,popDatasourceQuery:()=>Yt,popQuery:()=>Ht,popSavedQuery:()=>Mt,popStoredQuery:()=>Bt,postStopQuery:()=>Je,queryEditorSetAndSaveSql:()=>It,queryEditorSetAutorun:()=>At,queryEditorSetDb:()=>mt,queryEditorSetFunctionNames:()=>jt,queryEditorSetQueryLimit:()=>bt,queryEditorSetSchema:()=>pt,queryEditorSetSchemaOptions:()=>Tt,queryEditorSetSelectedText:()=>Nt,queryEditorSetSql:()=>Rt,queryEditorSetTableOptions:()=>ht,queryEditorSetTemplateParams:()=>vt,queryEditorSetTitle:()=>St,queryFailed:()=>Ye,querySuccess:()=>He,queryValidationFailed:()=>Ze,queryValidationReturned:()=>qe,reFetchQueryResults:()=>Ct,reRunQuery:()=>ze,refreshQueries:()=>Zt,removeAllOtherQueryEditors:()=>_t,removeDataPreview:()=>Fe,removeQuery:()=>Et,removeQueryEditor:()=>dt,removeTables:()=>qt,requestQueryResults:()=>Ke,resetState:()=>Pe,runQuery:()=>je,runQueryFromSqlEditor:()=>We,saveQuery:()=>yt,scheduleQuery:()=>$e,setActiveQueryEditor:()=>ot,setActiveSouthPaneTab:()=>ut,setDatabases:()=>et,setTables:()=>st,setUserOffline:()=>Qt,startQuery:()=>Me,startQueryValidation:()=>xe,stopQuery:()=>Ge,switchQueryEditor:()=>lt,toggleLeftBar:()=>ct,updateQueryEditor:()=>Qe,updateSavedQuery:()=>ft,validateQuery:()=>Xe});var n=r(78580),a=r.n(n),o=r(14670),i=r.n(o),s=r(15926),l=r.n(s),u=r(55867),c=r(31069),d=r(63137),_=r.n(d),E=r(67523),m=r.n(E),p=r(91877),T=r(93185),h=r(44814),A=r(72570),S=r(98286),y=r(66785);const g=/^Untitled Query (\d+)$/,f="Untitled Query ",R="RESET_STATE",I="ADD_QUERY_EDITOR",b="UPDATE_QUERY_EDITOR",v="QUERY_EDITOR_SAVED",N="CLONE_QUERY_TO_NEW_TAB",L="REMOVE_QUERY_EDITOR",O="MERGE_TABLE",D="REMOVE_TABLES",U="END_QUERY",w="REMOVE_QUERY",C="EXPAND_TABLE",P="COLLAPSE_TABLE",x="QUERY_EDITOR_SETDB",q="QUERY_EDITOR_SET_SCHEMA",Z="QUERY_EDITOR_SET_SCHEMA_OPTIONS",Q="QUERY_EDITOR_SET_TABLE_OPTIONS",$="QUERY_EDITOR_SET_TITLE",B="QUERY_EDITOR_SET_AUTORUN",M="QUERY_EDITOR_SET_SQL",H="QUERY_EDITOR_SET_QUERY_LIMIT",Y="QUERY_EDITOR_SET_TEMPLATE_PARAMS",G="QUERY_EDITOR_SET_SELECTED_TEXT",k="QUERY_EDITOR_SET_FUNCTION_NAMES",F="QUERY_EDITOR_PERSIST_HEIGHT",K="QUERY_EDITOR_TOGGLE_LEFT_BAR",V="MIGRATE_QUERY_EDITOR",j="MIGRATE_TAB_HISTORY",W="MIGRATE_TABLE",z="MIGRATE_QUERY",X="SET_DATABASES",J="SET_ACTIVE_QUERY_EDITOR",ee="LOAD_QUERY_EDITOR",te="SET_TABLES",re="SET_ACTIVE_SOUTHPANE_TAB",ne="REFRESH_QUERIES",ae="SET_USER_OFFLINE",oe="RUN_QUERY",ie="START_QUERY",se="STOP_QUERY",le="REQUEST_QUERY_RESULTS",ue="QUERY_SUCCESS",ce="QUERY_FAILED",de="CLEAR_QUERY_RESULTS",_e="REMOVE_DATA_PREVIEW",Ee="CHANGE_DATA_PREVIEW_ID",me="START_QUERY_VALIDATION",pe="QUERY_VALIDATION_RETURNED",Te="QUERY_VALIDATION_FAILED",he="COST_ESTIMATE_STARTED",Ae="COST_ESTIMATE_RETURNED",Se="COST_ESTIMATE_FAILED",ye="CREATE_DATASOURCE_STARTED",ge="CREATE_DATASOURCE_SUCCESS",fe="CREATE_DATASOURCE_FAILED",Re=A.bM,Ie=A.ws,be=A.Gb,ve=A.Dz,Ne={TABLE:"TABLE",VIEW:"VIEW"},Le=(0,u.t)("The query couldn't be loaded"),Oe={id:"remoteId",db_id:"dbId",label:"name",template_parameters:"templateParams"},De=e=>t=>m()(t,((t,r)=>r in e?e[r]:r)),Ue=De(_()(Oe)),we=De(Oe);function Ce(e,t,r){const{sqlLab:{unsavedQueryEditor:n}}=e,a=null!=r?r:t.id;return{...t,...a===n.id&&n}}function Pe(){return{type:R}}function xe(e){return Object.assign(e,{id:e.id?e.id:i().generate()}),{type:me,query:e}}function qe(e,t){return{type:pe,query:e,results:t}}function Ze(e,t,r){return{type:Te,query:e,message:t,error:r}}function Qe(e){return{type:b,alterations:e}}function $e(e){return t=>c.Z.post({endpoint:"/savedqueryviewapi/api/create",postPayload:e,stringify:!1}).then((()=>t(Ie((0,u.t)("Your query has been scheduled. To see details of your query, navigate to Saved queries"))))).catch((()=>t(be((0,u.t)("Your query could not be scheduled")))))}function Be(e){return(t,r)=>{const{dbId:n,schema:a,sql:o,selectedText:i,templateParams:s}=Ce(r(),e),l=i||o,d=null===a?`/superset/estimate_query_cost/${n}/`:`/superset/estimate_query_cost/${n}/${a}/`;return Promise.all([t({type:he,query:e}),c.Z.post({endpoint:d,postPayload:{sql:l,templateParams:JSON.parse(s||"{}")}}).then((r=>{let{json:n}=r;return t({type:Ae,query:e,json:n})})).catch((r=>(0,S.O$)(r).then((r=>{const n=r.error||r.statusText||(0,u.t)("Failed at retrieving results");return t({type:Se,query:e,error:n})}))))])}}function Me(e){return Object.assign(e,{id:e.id?e.id:i().generate(),progress:0,startDttm:(0,h.zO)(),state:e.runAsync?"pending":"running",cached:!1}),{type:ie,query:e}}function He(e,t){return function(r){var n;const a=null==t||null==(n=t.query)?void 0:n.sqlEditorId;return(a&&!e.isDataPreview&&(0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.put({endpoint:encodeURI(`/tabstateview/${a}`),postPayload:{latest_query_id:e.id}}):Promise.resolve()).then((()=>r({type:ue,query:e,results:t}))).catch((()=>r(be((0,u.t)("An error occurred while storing the latest query id in the backend. Please contact your administrator if this problem persists.")))))}}function Ye(e,t,r,n){return function(a){return(!e.isDataPreview&&(0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.put({endpoint:encodeURI(`/tabstateview/${e.sqlEditorId}`),postPayload:{latest_query_id:e.id}}):Promise.resolve()).catch((()=>a(be((0,u.t)("An error occurred while storing the latest query id in the backend. Please contact your administrator if this problem persists."))))).then((()=>a({type:ce,query:e,msg:t,link:r,errors:n})))}}function Ge(e){return{type:se,query:e}}function ke(e){return{type:de,query:e}}function Fe(e){return{type:_e,table:e}}function Ke(e){return{type:le,query:e}}function Ve(e,t){return function(r){r(Ke(e));const n=l().encode({key:e.resultsKey,rows:t||null});return c.Z.get({endpoint:`/api/v1/sqllab/results/?q=${n}`,parseMethod:"json-bigint"}).then((t=>{let{json:n}=t;return r(He(e,n))})).catch((t=>(0,S.O$)(t).then((t=>{const n=t.error||t.statusText||(0,u.t)("Failed at retrieving results");return r(Ye(e,n,t.link,t.errors))}))))}}function je(e){return function(t){t(Me(e));const r={client_id:e.id,database_id:e.dbId,json:!0,runAsync:e.runAsync,schema:e.schema,sql:e.sql,sql_editor_id:e.sqlEditorId,tab:e.tab,tmp_table_name:e.tempTable,select_as_cta:e.ctas,ctas_method:e.ctas_method,templateParams:e.templateParams,queryLimit:e.queryLimit,expand_data:!0},n=window.location.search||"";return c.Z.post({endpoint:`/api/v1/sqllab/execute/${n}`,body:JSON.stringify(r),headers:{"Content-Type":"application/json"},parseMethod:"json-bigint"}).then((r=>{let{json:n}=r;e.runAsync||t(He(e,n))})).catch((r=>(0,S.O$)(r).then((r=>{let n=r.error||r.message||r.statusText||(0,u.t)("Unknown error");a()(n).call(n,"CSRF token")&&(n=(0,u.t)(y.Z.SESSION_TIMED_OUT)),t(Ye(e,n,r.link,r.errors))}))))}}function We(e,t,r,n,a,o){return function(i,s){const l=Ce(s(),t,t.id);i(je({dbId:l.dbId,sql:l.selectedText||l.sql,sqlEditorId:l.id,tab:l.name,schema:l.schema,tempTable:n,templateParams:l.templateParams,queryLimit:l.queryLimit||r,runAsync:!!e&&e.allow_run_async,ctas:a,ctas_method:o,updateTabState:!l.selectedText}))}}function ze(e){return function(t){t(je({...e,id:i().generate()}))}}function Xe(e,t){return function(r,n){const{sqlLab:{unsavedQueryEditor:o}}=n(),i={...e,...e.id===o.id&&o},s={dbId:i.dbId,sql:t,sqlEditorId:i.id,schema:i.schema,templateParams:i.templateParams};r(xe(s));const l={schema:s.schema,sql:s.sql,template_params:s.templateParams};return c.Z.post({endpoint:`/api/v1/database/${s.dbId}/validate_sql/`,body:JSON.stringify(l),headers:{"Content-Type":"application/json"}}).then((e=>{let{json:t}=e;return r(qe(s,t.result))})).catch((e=>(0,S.O$)(e.result).then((e=>{let t=e.error||e.statusText||(0,u.t)("Unknown error");a()(t).call(t,"CSRF token")&&(t=(0,u.t)(y.Z.SESSION_TIMED_OUT)),r(Ze(s,t,e))}))))}}function Je(e){return function(t){return c.Z.post({endpoint:"/api/v1/query/stop",body:JSON.stringify({client_id:e.id}),headers:{"Content-Type":"application/json"}}).then((()=>t(Ge(e)))).then((()=>t(Ie((0,u.t)("Query was stopped."))))).catch((()=>t(be((0,u.t)("Failed at stopping query. %s",e.id)))))}}function et(e){return{type:X,databases:e}}function tt(e,t,r){return function(n){return c.Z.post({endpoint:"/tabstateview/",postPayload:{queryEditor:e}}).then((a=>{let{json:o}=a;const i={...e,id:o.id.toString()};return n({type:V,oldQueryEditor:e,newQueryEditor:i}),n({type:j,oldId:e.id,newId:i.id}),Promise.all([...t.map((e=>function(e,t,r){return c.Z.post({endpoint:encodeURI("/tableschemaview/"),postPayload:{table:{...e,queryEditorId:t}}}).then((n=>{let{json:a}=n;const o={...e,id:a.id,queryEditorId:t};return r({type:W,oldTable:e,newTable:o})})).catch((()=>r(ve((0,u.t)("Unable to migrate table schema state to backend. Superset will retry later. Please contact your administrator if this problem persists.")))))}(e,i.id,n))),...r.map((e=>function(e,t,r){return c.Z.post({endpoint:encodeURI(`/tabstateview/${t}/migrate_query`),postPayload:{queryId:e}}).then((()=>r({type:z,queryId:e,queryEditorId:t}))).catch((()=>r(ve((0,u.t)("Unable to migrate query state to backend. Superset will retry later. Please contact your administrator if this problem persists.")))))}(e.id,i.id,n)))])})).catch((()=>n(ve((0,u.t)("Unable to migrate query editor state to backend. Superset will retry later. Please contact your administrator if this problem persists.")))))}}function rt(e){return function(t){return((0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.post({endpoint:"/tabstateview/",postPayload:{queryEditor:e}}):Promise.resolve({json:{id:i().generate()}})).then((r=>{let{json:n}=r;const a={...e,id:n.id.toString()};return t({type:I,queryEditor:a})})).catch((()=>t(be((0,u.t)("Unable to add a new tab to the backend. Please contact your administrator.")))))}}function nt(){return function(e,t){const{sqlLab:{queryEditors:r,tabHistory:n,unsavedQueryEditor:a,defaultDbId:o,databases:i},common:s}=t(),l=r.find((e=>e.id===n[n.length-1])),c=Object.values(i).map((e=>e.id)),d=c.length>0?Math.min(...c):void 0,{dbId:_,schema:E,queryLimit:m,autorun:h}={...r[0],...l,...a.id===(null==l?void 0:l.id)&&a},A=(0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?"":(0,u.t)("-- Note: Unless you save your query, these tabs will NOT persist if you clear your cookies or change browsers.\n\n"),S=function(e,t){void 0===t&&(t="Untitled Query 1");const r=(0,u.t)(t);if(e.length>0){const t=e.filter((e=>{var t;return null==(t=e.name)?void 0:t.match(g)})).map((e=>+e.name.replace(f,"")));if(t.length>0){const e=Math.max(...t);return(0,u.t)("%s%s",f,e+1)}return r}return r}(r||[]);return e(rt({dbId:_||o||d,schema:null!=E?E:null,autorun:null!=h&&h,sql:`${A}SELECT ...`,queryLimit:m||s.conf.DEFAULT_SQLLAB_LIMIT,name:S}))}}function at(e,t){return function(r,n){const a=n(),{queryEditors:o,tabHistory:i}=a.sqlLab,s=o.find((e=>e.id===i[i.length-1]));return r(rt({name:(0,u.t)("Copy of %s",s.name),dbId:e.dbId?e.dbId:null,schema:e.schema?e.schema:null,autorun:t,sql:e.sql,queryLimit:s.queryLimit,maxRow:s.maxRow,templateParams:s.templateParams}))}}function ot(e){return function(t){return((0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.post({endpoint:encodeURI(`/tabstateview/${e.id}/activate`)}):Promise.resolve()).then((()=>t({type:J,queryEditor:e}))).catch((r=>404!==r.status?t(be((0,u.t)("An error occurred while setting the active tab. Please contact your administrator."))):t({type:L,queryEditor:e})))}}function it(e){return{type:ee,queryEditor:e}}function st(e){const t=e.filter((e=>null!==e.description)).map((e=>{const{columns:t,selectStar:r,primaryKey:n,foreignKeys:a,indexes:o,dataPreviewQueryId:i}=e.description;return{dbId:e.database_id,queryEditorId:e.tab_state_id.toString(),schema:e.schema,name:e.table,expanded:e.expanded,id:e.id,dataPreviewQueryId:i,columns:t,selectStar:r,primaryKey:n,foreignKeys:a,indexes:o,isMetadataLoading:!1,isExtraMetadataLoading:!1}}));return{type:te,tables:t}}function lt(e,t){return function(r){(0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)&&e&&!e.loaded?c.Z.get({endpoint:encodeURI(`/tabstateview/${e.id}`)}).then((e=>{var n,a;let{json:o}=e;const i={id:o.id.toString(),loaded:!0,name:o.label,sql:o.sql,selectedText:null,latestQueryId:null==(n=o.latest_query)?void 0:n.id,autorun:o.autorun,dbId:o.database_id,templateParams:o.template_params,schema:o.schema,queryLimit:o.query_limit,remoteId:null==(a=o.saved_query)?void 0:a.id,validationResult:{id:null,errors:[],completed:!1},hideLeftBar:o.hide_left_bar};r(it(i)),r(st(o.table_schemas||[])),r(ot(i)),o.latest_query&&o.latest_query.resultsKey&&r(Ve(o.latest_query,t))})).catch((t=>404!==t.status?r(be((0,u.t)("An error occurred while fetching tab state"))):r({type:L,queryEditor:e}))):r(ot(e))}}function ut(e){return{type:re,tabId:e}}function ct(e){const t=!e.hideLeftBar;return function(r){return((0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.put({endpoint:encodeURI(`/tabstateview/${e.id}`),postPayload:{hide_left_bar:t}}):Promise.resolve()).then((()=>r({type:K,queryEditor:e,hideLeftBar:t}))).catch((()=>r(be((0,u.t)("An error occurred while hiding the left bar. Please contact your administrator.")))))}}function dt(e){return function(t){return((0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.delete({endpoint:encodeURI(`/tabstateview/${e.id}`)}):Promise.resolve()).then((()=>t({type:L,queryEditor:e}))).catch((()=>t(be((0,u.t)("An error occurred while removing tab. Please contact your administrator.")))))}}function _t(e){return function(t,r){var n;const{sqlLab:a}=r();null==(n=a.queryEditors)||n.forEach((r=>{r.id!==e.id&&t(dt(r))}))}}function Et(e){return function(t){return((0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.delete({endpoint:encodeURI(`/tabstateview/${e.sqlEditorId}/query/${e.id}`)}):Promise.resolve()).then((()=>t({type:w,query:e}))).catch((()=>t(be((0,u.t)("An error occurred while removing query. Please contact your administrator.")))))}}function mt(e,t){return function(r){return((0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.put({endpoint:encodeURI(`/tabstateview/${e.id}`),postPayload:{database_id:t}}):Promise.resolve()).then((()=>r({type:x,queryEditor:e,dbId:t}))).catch((()=>r(be((0,u.t)("An error occurred while setting the tab database ID. Please contact your administrator.")))))}}function pt(e,t){return function(r){return((0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)&&"object"==typeof e?c.Z.put({endpoint:encodeURI(`/tabstateview/${e.id}`),postPayload:{schema:t}}):Promise.resolve()).then((()=>r({type:q,queryEditor:e||{},schema:t}))).catch((()=>r(be((0,u.t)("An error occurred while setting the tab schema. Please contact your administrator.")))))}}function Tt(e,t){return{type:Z,queryEditor:e,options:t}}function ht(e,t){return{type:Q,queryEditor:e,options:t}}function At(e,t){return function(r){return((0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.put({endpoint:encodeURI(`/tabstateview/${e.id}`),postPayload:{autorun:t}}):Promise.resolve()).then((()=>r({type:B,queryEditor:e,autorun:t}))).catch((()=>r(be((0,u.t)("An error occurred while setting the tab autorun. Please contact your administrator.")))))}}function St(e,t,r){return function(n){return((0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.put({endpoint:encodeURI(`/tabstateview/${r}`),postPayload:{label:t}}):Promise.resolve()).then((()=>n({type:$,queryEditor:{...e,id:r},name:t}))).catch((()=>n(be((0,u.t)("An error occurred while setting the tab name. Please contact your administrator.")))))}}function yt(e,t){const{id:r,...n}=Ue(e);return r=>c.Z.post({endpoint:"/api/v1/saved_query/",jsonPayload:Ue(n)}).then((n=>{const a=we({id:n.json.id,...n.json.result});return r({type:v,query:e,clientId:t,result:a}),r(St(e,e.name,t)),a})).catch((()=>r(be((0,u.t)("Your query could not be saved")))))}const gt=(e,t)=>r=>((0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.put({endpoint:`/tabstateview/${e.id}`,postPayload:{saved_query_id:t.remoteId}}):Promise.resolve()).catch((()=>{r(be((0,u.t)("Your query was not properly saved")))})).then((()=>{r(Ie((0,u.t)("Your query was saved")))}));function ft(e,t){const{id:r,...n}=Ue(e);return r=>c.Z.put({endpoint:`/api/v1/saved_query/${e.remoteId}`,jsonPayload:Ue(n)}).then((()=>{r(Ie((0,u.t)("Your query was updated"))),r(St(e,e.name,t))})).catch((e=>{const t=(0,u.t)("Your query could not be updated");console.error(t,e),r(be(t))})).then((()=>r(Qe(e))))}function Rt(e,t){return{type:M,queryEditor:e,sql:t}}function It(e,t){return function(r,n){const a=Ce(n(),e);return r(Rt(a,t)),(0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.put({endpoint:encodeURI(`/tabstateview/${a.id}`),postPayload:{sql:t,latest_query_id:a.latestQueryId}}).catch((()=>r(be((0,u.t)('An error occurred while storing your query in the backend. To avoid losing your changes, please save your query using the "Save Query" button.'))))):Promise.resolve()}}function bt(e,t){return function(r){return((0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.put({endpoint:encodeURI(`/tabstateview/${e.id}`),postPayload:{query_limit:t}}):Promise.resolve()).then((()=>r({type:H,queryEditor:e,queryLimit:t}))).catch((()=>r(be((0,u.t)("An error occurred while setting the tab name. Please contact your administrator.")))))}}function vt(e,t){return function(r){return r({type:Y,queryEditor:e,templateParams:t}),((0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.put({endpoint:encodeURI(`/tabstateview/${e.id}`),postPayload:{template_params:t}}):Promise.resolve()).catch((()=>r(be((0,u.t)("An error occurred while setting the tab template parameters. Please contact your administrator.")))))}}function Nt(e,t){return{type:G,queryEditor:e,sql:t}}function Lt(e,t,r){return{type:O,table:e,query:t,prepend:r}}function Ot(e,t,r){return c.Z.get({endpoint:encodeURI(`/api/v1/database/${t.dbId}/table/${encodeURIComponent(e.name)}/${encodeURIComponent(e.schema)}/`)}).then((t=>{let{json:n}=t;const a={...e,...n,expanded:!0,isMetadataLoading:!1};return r(Lt(a)),a})).catch((()=>Promise.all([r(Lt({...e,isMetadataLoading:!1})),r(be((0,u.t)("An error occurred while fetching table metadata")))])))}function Dt(e,t,r){return c.Z.get({endpoint:encodeURI(`/api/v1/database/${t.dbId}/table_extra/${encodeURIComponent(e.name)}/${encodeURIComponent(e.schema)}/`)}).then((t=>{let{json:n}=t;return r(Lt({...e,...n,isExtraMetadataLoading:!1})),n})).catch((()=>Promise.all([r(Lt({...e,isExtraMetadataLoading:!1})),r(be((0,u.t)("An error occurred while fetching table metadata")))])))}function Ut(e,t,r,n){return function(a,o){const s=Ce(o(),e,e.id),l={dbId:s.dbId,queryEditorId:s.id,schema:n,name:r};return a(Lt({...l,isMetadataLoading:!0,isExtraMetadataLoading:!0,expanded:!0},null,!0)),Promise.all([Ot(l,s,a),Dt(l,s,a)]).then((e=>{let[r,n]=e;const o=(0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.post({endpoint:encodeURI("/tableschemaview/"),postPayload:{table:{...r,...n}}}):Promise.resolve({json:{id:i().generate()}});if(!t.disable_data_preview&&t.id===s.dbId){const e={id:i().generate(),dbId:s.dbId,sql:r.selectStar,tableName:l.name,sqlEditorId:null,tab:"",runAsync:t.allow_run_async,ctas:!1,isDataPreview:!0};Promise.all([a(Lt({...r,dataPreviewQueryId:e.id},e)),a(je(e))])}return o.then((e=>{let{json:t}=e;return a(Lt({...l,id:t.id}))})).catch((()=>a(be((0,u.t)("An error occurred while fetching table metadata. Please contact your administrator.")))))}))}}function wt(e,t){return{type:Ee,oldQueryId:e,newQuery:t}}function Ct(e){return function(t){const r={id:i().generate(),dbId:e.dbId,sql:e.sql,tableName:e.tableName,sqlEditorId:null,tab:"",runAsync:!1,ctas:!1,queryLimit:e.queryLimit,isDataPreview:e.isDataPreview};t(je(r)),t(wt(e.id,r))}}function Pt(e){return function(t){return((0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.post({endpoint:encodeURI(`/tableschemaview/${e.id}/expanded`),postPayload:{expanded:!0}}):Promise.resolve()).then((()=>t({type:C,table:e}))).catch((()=>t(be((0,u.t)("An error occurred while expanding the table schema. Please contact your administrator.")))))}}function xt(e){return function(t){return((0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?c.Z.post({endpoint:encodeURI(`/tableschemaview/${e.id}/expanded`),postPayload:{expanded:!1}}):Promise.resolve()).then((()=>t({type:P,table:e}))).catch((()=>t(be((0,u.t)("An error occurred while collapsing the table schema. Please contact your administrator.")))))}}function qt(e){return function(t){var r;const n=null!=(r=null==e?void 0:e.filter(Boolean))?r:[];return((0,p.cr)(T.T.SQLLAB_BACKEND_PERSISTENCE)?Promise.all(n.map((e=>c.Z.delete({endpoint:encodeURI(`/tableschemaview/${e.id}`)})))):Promise.resolve()).then((()=>t({type:D,tables:n}))).catch((()=>t(be((0,u.t)("An error occurred while removing the table schema. Please contact your administrator.")))))}}function Zt(e){return{type:ne,alteredQueries:e}}function Qt(e){return{type:ae,offline:e}}function $t(e,t,r){return{type:F,queryEditor:e,northPercent:t,southPercent:r}}function Bt(e){return function(t){return c.Z.get({endpoint:`/kv/${e}`}).then((e=>{let{json:r}=e;return t(rt({name:r.name?r.name:(0,u.t)("Shared query"),dbId:r.dbId?parseInt(r.dbId,10):null,schema:r.schema?r.schema:null,autorun:!!r.autorun&&r.autorun,sql:r.sql?r.sql:"SELECT ...",templateParams:r.templateParams}))})).catch((()=>t(be(Le))))}}function Mt(e){return function(t){return c.Z.get({endpoint:`/api/v1/saved_query/${e}`}).then((e=>{var r,n;let{json:a}=e;const o={...we(a.result),dbId:null==(r=a.result)||null==(n=r.database)?void 0:n.id,loaded:!0,autorun:!1};return t(rt(o))})).catch((()=>t(be(Le))))}}function Ht(e){return function(t){return c.Z.get({endpoint:`/api/v1/query/${e}`}).then((e=>{let{json:r}=e;const n=r.result,a={dbId:n.database.id,schema:n.schema,sql:n.sql,name:(0,u.t)("Copy of %s",n.tab_name),autorun:!1};return t(rt(a))})).catch((()=>t(be(Le))))}}function Yt(e,t){return function(r){const n=(0,u.t)("Query"),a=e.split("__")[0];return c.Z.get({endpoint:`/api/v1/dataset/${a}?q=(keys:!(none))`}).then((e=>{let{json:a}=e;return r(rt({name:`${n} ${a.result.name}`,dbId:a.result.database.id,schema:a.result.schema,autorun:void 0!==t,sql:t||a.result.select_star}))})).catch((()=>r(be((0,u.t)("The datasource couldn't be loaded")))))}}function Gt(){return{type:ye}}function kt(e){const t=`${e.table_id}__table`;return{type:ge,datasource:t}}function Ft(e){return{type:fe,err:e}}function Kt(e){return t=>(t(Gt()),c.Z.post({endpoint:"/superset/sqllab_viz/",postPayload:{data:e}}).then((e=>{let{json:r}=e;return t(kt(r)),Promise.resolve(r)})).catch((e=>((0,S.O$)(e).then((e=>{t(be(e.error))})),t(Ft((0,u.t)("An error occurred while creating the data source"))),Promise.reject()))))}function Vt(e){return t=>(t(Gt()),c.Z.post({endpoint:"/api/v1/dataset/get_or_create/",jsonPayload:e}).then((e=>{let{json:r}=e;return t(kt(r.result)),r.result})).catch((()=>{const e=(0,u.t)("An error occurred while creating the data source");return t(Ft(e)),Promise.reject(new Error(e))})))}function jt(e,t){return function(r){return c.Z.get({endpoint:encodeURI(`/api/v1/database/${t}/function_names/`)}).then((t=>{let{json:n}=t;return r({type:k,queryEditor:e,functionNames:n.function_names})})).catch((t=>{404===t.status?r({type:k,queryEditor:e,functionNames:[]}):r(be((0,u.t)("An error occurred while fetching function names.")))}))}}},12515:(e,t,r)=>{r.d(t,{Jp:()=>S,xW:()=>f,y8:()=>I,kN:()=>b,H6:()=>v,kP:()=>N,u:()=>L,pd:()=>O,pe:()=>D,AH:()=>U,bX:()=>w,CB:()=>C,mG:()=>P});var n=r(78580),a=r.n(n),o=r(67294),i=r(54998),s=r.n(i),l=r(11064),u=r(19427),c=r(61654),d=r(31069),_=r(55786),E=r(86374),m=r(9679),p=r(54076),T=r(27600),h=r(69856),A=r(80621);function S(e){var t,r;const{slice:n,form_data:a}=e;return null!=(t=null!=(r=null==n?void 0:n.slice_id)?r:null==a?void 0:a.slice_id)?t:h.xA}let y=0;function g(e){void 0===e&&(e=!1);let t=0;return e&&(t=y%E.X.length,y+=1,0===t&&(t+=1,y+=1)),E.X[t]}function f(e,t){return null==e?null:s()(window.location.search).pathname("/api/v1/chart/data").search({form_data:(0,m.o)({slice_id:e}),force:t}).toString()}function R(e){var t;return void 0===e&&(e="base"),a()(t=["full","json","csv","query","results","samples"]).call(t,e)?"/superset/explore_json/":"/explore/"}function I(e,t,r){void 0===t&&(t={}),void 0===r&&(r=!1);const n=new(s())("/"),a=R(e),o=n.search(!0);return Object.keys(t).forEach((e=>{o[e]=t[e]})),e===T.KD.standalone.name&&(r&&(o.force="1"),o.standalone=A._B.HIDE_NAV),n.directory(a).search(o).toString()}function b(e){let{path:t,qs:r,allowDomainSharding:n=!1}=e,a=new(s())({protocol:window.location.protocol.slice(0,-1),hostname:g(n),port:window.location.port?window.location.port:"",path:t});return r&&(a=a.search(r)),a}function v(e){let{formData:t,endpointType:r="base",force:n=!1,curUrl:a=null,requestParams:o={},allowDomainSharding:i=!1,method:l="POST"}=e;if(!t.datasource)return null;delete t.label_colors;let u=b({path:"/",allowDomainSharding:i});a&&(u=s()(s()(a).search()));const c=R(r),d=u.search(!0),{slice_id:_,extra_filters:E,adhoc_filters:p,viz_type:h}=t;if(_){const e={slice_id:_};"GET"===l&&(e.viz_type=h,E&&E.length&&(e.extra_filters=E),p&&p.length&&(e.adhoc_filters=p)),d.form_data=(0,m.o)(e)}n&&(d.force="true"),"csv"===r&&(d.csv="true"),r===T.KD.standalone.name&&(d.standalone="1"),"query"===r&&(d.query="true"),"results"===r&&(d.results="true"),"samples"===r&&(d.samples="true");const A=Object.keys(o);return A.length&&A.forEach((e=>{o.hasOwnProperty(e)&&(d[e]=o[e])})),u.search(d).directory(c).toString()}const N=e=>{const t=(0,l.Z)().get(e.viz_type);return!!t&&t.useLegacyApi},L=e=>{var t;let{formData:r,force:n,resultFormat:a,resultType:o,setDataMask:i,ownState:s}=e;return(null!=(t=(0,u.Z)().get(r.viz_type))?t:e=>(0,c.Z)(e,(e=>[{...e}])))({...r,force:n,result_format:a,result_type:o},{ownState:s,hooks:{setDataMask:i}})},O=e=>{let{resultType:t,resultFormat:r}=e;return"csv"===r?r:t},D=e=>{let t,r,{formData:n,resultFormat:a="json",resultType:o="full",force:i=!1,ownState:s={}}=e;N(n)?(t=v({formData:n,endpointType:O({resultFormat:a,resultType:o}),allowDomainSharding:!1}),r=n):(t="/api/v1/chart/data",r=L({formData:n,force:i,resultFormat:a,resultType:o,ownState:s})),d.Z.postForm(t,{form_data:(0,m.o)(r)})},U=(e,t)=>{const r=v({formData:e,endpointType:"base",allowDomainSharding:!1,requestParams:t});d.Z.postForm(r,{form_data:(0,m.o)(e)})},w=(e,t,r)=>{const n=(0,o.useCallback)(e,r);(0,o.useEffect)((()=>{const e=setTimeout((()=>{n()}),t);return()=>{clearTimeout(e)}}),[n,t])},C=(e,t,r)=>{const n=[...h.qK].map((e=>h.LT[e].operation)).indexOf(t)>=0;let a=null!=e?e:"";if(e&&t){a+=` ${t}`;const e=n&&Array.isArray(r)?r[0]:r,o=(0,_.Z)(r),i=void 0!==e&&Number.isNaN(Number(e)),s=i?"'":"",[l,u]=n?["(",")"]:["",""],c=o.map((e=>(0,p.lo)(e))).map((e=>`${s}${i?String(e).replace("'","''"):e}${s}`));o.length>0&&(a+=` ${l}${c.join(", ")}${u}`)}return a};function P(e){return e.map((e=>[e,e.toString()]))}},79217:(e,t,r)=>{r.d(t,{z:()=>n});const n=e=>{var t;return{columns:e.columns,name:(null==e?void 0:e.datasource_name)||(null==e?void 0:e.name)||"Untitled",dbId:(null==e||null==(t=e.database)?void 0:t.id)||(null==e?void 0:e.dbId),sql:(null==e?void 0:e.sql)||"",schema:null==e?void 0:e.schema}}},44814:(e,t,r)=>{r.d(t,{zQ:()=>o,zO:()=>i});var n=r(30381),a=r.n(n);const o=function(e,t,r){void 0===r&&(r="HH:mm:ss.SS");const n=t-e;return a()(new Date(n)).utc().format(r)},i=function(){return a()().utc().valueOf()}},86374:(e,t,r)=>{r.d(t,{X:()=>i,_:()=>s});var n=r(91877),a=r(93185),o=r(20292);const i=function(){if(!document.getElementById("app"))return[];const e=new Set([window.location.hostname]);if("1"===new URLSearchParams(window.location.search).get("disableDomainSharding"))return Array.from(e);const t=(0,o.Z)();return(0,n.fG)(t.common.feature_flags),(0,n.cr)(a.T.ALLOW_DASHBOARD_DOMAIN_SHARDING)&&t&&t.common&&t.common.conf&&t.common.conf.SUPERSET_WEBSERVER_DOMAINS&&t.common.conf.SUPERSET_WEBSERVER_DOMAINS.forEach((t=>{e.add(t)})),Array.from(e)}(),s=i.length>1},9882:(e,t,r)=>{r.d(t,{V:()=>l,Z:()=>u});var n=r(21804),a=r.n(n),o=(r(67294),r(55867)),i=r(51776),s=r(11965);function l(e){let{label:t,tooltip:r,bsStyle:n,onClick:l,icon:u="info-circle",className:c="text-muted",placement:d="right",iconsStyle:_={}}=e;const E=`fa fa-${u} ${c} ${n?`text-${n}`:""}`,m=(0,s.tZ)("i",{role:"button","aria-label":(0,o.t)("Show info tooltip"),tabIndex:0,className:E,style:{cursor:l?"pointer":void 0,..._},onClick:l,onKeyPress:l&&(e=>{"Enter"!==e.key&&" "!==e.key||l()})});return r?(0,s.tZ)(i.u,{id:`${a()(t)}-tooltip`,title:r,placement:d},m):m}const u=l},51776:(e,t,r)=>{r.d(t,{u:()=>u,Z:()=>c});var n=r(5872),a=r.n(n),o=r(67294),i=r(51995),s=r(11965),l=r(31097);const u=e=>{let{overlayStyle:t,color:r,...n}=e;const u=(0,i.Fg)(),c=`${u.colors.grayscale.dark2}e6`;return(0,s.tZ)(o.Fragment,null,(0,s.tZ)(s.xB,{styles:s.iv`
          .ant-tooltip-open {
            display: inline-block;
            &::after {
              content: '';
              display: block;
            }
          }
        `}),(0,s.tZ)(l.Z,a()({overlayStyle:{fontSize:u.typography.sizes.s,lineHeight:"1.6",maxWidth:62*u.gridUnit,minWidth:30*u.gridUnit,...t},align:{offset:[0,1]},color:c||r,trigger:"hover",placement:"bottom",mouseLeaveDelay:0},n)))},c=u},19427:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(90537),a=r(1875);class o extends n.Z{constructor(){super({name:"ChartBuildQuery",overwritePolicy:n.r.WARN})}}const i=(0,a.Z)(o)},11064:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(90537),a=r(1875);class o extends n.Z{constructor(){super({name:"ChartMetadata",overwritePolicy:n.r.WARN})}}const i=(0,a.Z)(o)},78186:(e,t,r)=>{r.d(t,{Z:()=>_});var n=r(82492),a=r.n(n),o=r(67294),i=r(32237),s=r(82781),l=r(61608),u=r(34775),c=r(93185),d=r(11965);const _=function(e){let{source:t,htmlSanitization:r=!0,htmlSchemaOverrides:n={}}=e;const _=(0,c.c)(c.T.DISPLAY_MARKDOWN_HTML),E=(0,c.c)(c.T.ESCAPE_MARKDOWN_HTML),m=(0,o.useMemo)((()=>{const e=[];if(_&&!E&&(e.push(u.Z),r)){const t=a()(s.R,n);e.push([l.Z,t])}return e}),[_,E,r,n]);return(0,d.tZ)(i.D,{rehypePlugins:m,skipHtml:!_},t)}},67706:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(46078);class a{constructor(e){this.id=void 0,this.type=void 0;const[t,r]=e.split("__");this.id=parseInt(t,10),this.type=n.i9.Table,this.type="query"===r?n.i9.Query:this.type}toString(){return`${this.id}__${this.type}`}toObject(){return{id:this.id,type:this.type}}}},61654:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(65946),a=r(67706),o=r(78444),i=r(11146);const s=e=>[e];function l(e,t){const{queryFields:r,buildQuery:l=s}="function"==typeof t?{buildQuery:t,queryFields:{}}:t||{};let u=l((0,n.Z)(e,r));return u.forEach((e=>{Array.isArray(e.post_processing)&&(e.post_processing=e.post_processing.filter(Boolean))})),(0,i.SR)(e)&&(u=u.map((t=>(0,o.T)(e,t)))),{datasource:new a.Z(e.datasource).toObject(),force:e.force||!1,queries:u,form_data:e,result_format:e.result_format||"json",result_type:e.result_type||"full"}}},65946:(e,t,r)=>{r.d(t,{Z:()=>_});var n=r(62446),a=r(78580),o=r.n(a),i=r(46306),s=r(78483);function l(e){let t=e;return o()(e).call(e,"--")&&(t=`${e}\n`),`(${t})`}var u=r(69363),c=r(5364),d=r(37731);function _(e,t){var r,a;const{annotation_layers:o=[],extra_form_data:_,time_range:E,since:m,until:p,row_limit:T,row_offset:h,order_desc:A,limit:S,timeseries_limit_metric:y,granularity:g,url_params:f={},custom_params:R={},series_columns:I,series_limit:b,series_limit_metric:v,...N}=e,{adhoc_filters:L=[],filters:O=[],custom_form_data:D={},...U}=_||{},w=Number(T),C=Number(h),{metrics:P,columns:x,orderby:q}=(0,u.Z)(N,t),Z=function(e){const t={},r=[],n={},a={filters:r,extras:n,applied_time_extras:t},o={__time_range:"time_range",__time_col:"granularity_sqla",__time_grain:"time_grain_sqla",__granularity:"granularity"};return(e.extra_filters||[]).forEach((e=>{if(e.col in o){const r=e.col;a[o[r]]=e.val,t[r]=e.val}else r.push(e)})),n.time_grain_sqla=a.time_grain_sqla||e.time_grain_sqla,a.granularity=a.granularity_sqla||e.granularity||e.granularity_sqla,delete a.granularity_sqla,delete a.time_grain_sqla,a}(e),{filters:Q}=Z,$={filters:[...Q,...O],adhoc_filters:[...e.adhoc_filters||[],...L]},B=function(e){const{adhoc_filters:t,extras:r={},filters:n=[],where:a}=e,o=n,u=[];a&&u.push(a);const c=[];return(t||[]).forEach((e=>{const{clause:t}=e;if((0,i.Ki)(e)){const r=(0,s.Z)(e);"WHERE"===t&&o.push(r)}else{const{sqlExpression:r}=e;"WHERE"===t?u.push(r):c.push(r)}})),r.having=c.map(l).join(" AND "),r.where=u.map(l).join(" AND "),{filters:o,extras:r}}({...e,...Z,...$});let M={time_range:E||void 0,since:m||void 0,until:p||void 0,granularity:g||void 0,...Z,...B,columns:x,metrics:P,orderby:q,annotation_layers:o,row_limit:null==T||Number.isNaN(w)?void 0:w,row_offset:null==h||Number.isNaN(C)?void 0:C,series_columns:I,series_limit:null!=b?b:(0,d.Z)(S)?Number(S):0,series_limit_metric:null!=(r=null!=(a=(e=>{if((0,n.I0)(e))return e})(v))?a:y)?r:void 0,order_desc:void 0===A||A,url_params:f||void 0,custom_params:R};return M=function(e,t){const r={...e},{extras:n={}}=r;return Object.entries(c.gn).forEach((e=>{let[n,a]=e;const o=t[n];void 0!==o&&(r[a]=o)})),c.fn.forEach((e=>{e in t&&(n[e]=t[e])})),Object.keys(n).length>0&&(r.extras=n),r}(M,U),{...M,custom_form_data:D}}},5364:(e,t,r)=>{r.d(t,{W3:()=>n,vM:()=>a,fn:()=>o,Ci:()=>i,gn:()=>s,NU:()=>l,Ay:()=>u});const n="__timestamp",a="No filter",o=["relative_start","relative_end","time_grain_sqla"],i=["adhoc_filters","filters","interactive_groupby","interactive_highlight","interactive_drilldown","custom_form_data"],s={granularity:"granularity",granularity_sqla:"granularity",time_column:"time_column",time_grain:"time_grain",time_range:"time_range"},l=Object.keys(s),u=[...l,...o]},78483:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(46306);function a(e){const{subject:t}=e;if((0,n._l)(e)){const{operator:r}=e;return{col:t,op:r}}if((0,n.kC)(e)){const{operator:r}=e;return{col:t,op:r,val:e.comparator}}const{operator:r}=e;return{col:t,op:r,val:e.comparator}}},69363:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(78580),a=r.n(n),o=r(55867),i=r(74765),s=r(5364),l=r(10581),u=r(56652),c=r(20620);function d(e,t){const r={metric:"metrics",metric_2:"metrics",secondary_metric:"metrics",x:"metrics",y:"metrics",size:"metrics",all_columns:"columns",series:"groupby",order_by_cols:"orderby",...t},{query_mode:n,include_time:d,..._}=e;let E=[],m=[],p=[];return Object.entries(_).forEach((e=>{let[t,a]=e;if(null==a)return;let o=r[t]||t;n===c.n.aggregate&&"columns"===o||(n!==c.n.raw||"groupby"!==o&&"metrics"!==o)&&("groupby"===o&&(o="columns"),"metrics"===o?m=m.concat(a):"columns"===o?E=E.concat(a):"orderby"===o&&(p=p.concat(a)))})),d&&!a()(E).call(E,s.W3)&&E.unshift(s.W3),{columns:(0,i.Z)(E.filter((e=>""!==e)),l.Z),metrics:n===c.n.raw?void 0:(0,i.Z)(m,u.Z),orderby:p.length>0?p.map((e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){throw new Error((0,o.t)("Found invalid orderby options"))}return e})):void 0}}},10581:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(72813);function a(e){return(0,n.s9)(e)?e:null!=e&&e.label?e.label:null==e?void 0:e.sqlExpression}},56652:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(62446);function a(e){return(0,n.AG)(e)?e:e.label?e.label:(0,n.nX)(e)?`${e.aggregate}(${e.column.columnName||e.column.column_name})`:e.sqlExpression}},11146:(e,t,r)=>{r.d(t,{SR:()=>s,O6:()=>l,Bw:()=>u,M8:()=>c});var n=r(72813),a=r(93185),o=r(5364),i=r(10581);const s=e=>(0,n.Gk)(e.x_axis),l=(0,a.c)(a.T.GENERIC_CHART_AXES),u=e=>{if(e.granularity_sqla||e.x_axis)return s(e)?e.x_axis:o.W3},c=e=>{const t=u(e);if(t)return(0,i.Z)(t)}},78444:(e,t,r)=>{r.d(t,{T:()=>s});var n=r(57557),a=r.n(n),o=r(72813),i=r(11146);function s(e,t){if(!(0,i.SR)(e))return t;const{columns:r,extras:n}=t,s=[...r||[]],l=null==r?void 0:r.findIndex((t=>(0,o.s9)(t)&&(0,o.s9)(e.x_axis)&&t===e.x_axis||(0,o.GA)(t)&&(0,o.GA)(e.x_axis)&&t.sqlExpression===e.x_axis.sqlExpression));if(void 0!==l&&l>-1&&e.x_axis&&Array.isArray(r)){(0,o.GA)(r[l])?s[l]={timeGrain:null==n?void 0:n.time_grain_sqla,columnType:"BASE_AXIS",...r[l]}:s[l]={timeGrain:null==n?void 0:n.time_grain_sqla,columnType:"BASE_AXIS",sqlExpression:e.x_axis,label:e.x_axis,expressionType:"SQL"};const i=a()(t,["extras.time_grain_sqla","is_timeseries"]);return i.columns=s,i}return t}},72813:(e,t,r)=>{function n(e){return"string"==typeof e}function a(e){return"string"!=typeof e&&void 0!==(null==e?void 0:e.sqlExpression)&&void 0!==(null==e?void 0:e.label)&&(void 0===(null==e?void 0:e.expressionType)||"SQL"===(null==e?void 0:e.expressionType))}function o(e){return n(e)||a(e)}r.d(t,{s9:()=>n,GA:()=>a,Gk:()=>o,ZP:()=>i});const i={}},46078:(e,t,r)=>{var n;r.d(t,{i9:()=>n,BH:()=>a,ZP:()=>o}),function(e){e.Table="table",e.Query="query",e.Dataset="dataset",e.SlTable="sl_table",e.SavedQuery="saved_query"}(n||(n={}));const a=[{metric_name:"COUNT(*)",expression:"COUNT(*)"}],o={}},46306:(e,t,r)=>{r.d(t,{Ki:()=>a,jz:()=>o,_l:()=>i,kC:()=>s,VK:()=>l});var n=r(31612);function a(e){return"SIMPLE"===e.expressionType}function o(e){return"SQL"===e.expressionType}function i(e){return(0,n.CW)(e.operator)}function s(e){return(0,n.VU)(e.operator)}function l(e){return(0,n.XA)(e.operator)}},62446:(e,t,r)=>{function n(e){return"string"==typeof e}function a(e){return"string"!=typeof e&&"SIMPLE"===(null==e?void 0:e.expressionType)}function o(e){return"string"!=typeof e&&"SQL"===(null==e?void 0:e.expressionType)}function i(e){return n(e)||a(e)||o(e)}r.d(t,{AG:()=>n,nX:()=>a,q5:()=>o,I0:()=>i,ZP:()=>s});const s={}},31612:(e,t,r)=>{r.d(t,{CW:()=>a,VU:()=>i,XA:()=>l});const n=new Set(["IS NOT NULL","IS NULL"]);function a(e){return n.has(e)}const o=new Set(["==","!=",">","<",">=","<=","ILIKE","LIKE","REGEX","TEMPORAL_RANGE"]);function i(e){return o.has(e)}const s=new Set(["IN","NOT IN"]);function l(e){return s.has(e)}},20620:(e,t,r)=>{var n;r.d(t,{n:()=>n,Z:()=>a}),function(e){e.aggregate="aggregate",e.raw="raw"}(n||(n={}));const a={}},93185:(e,t,r)=>{var n;function a(e){try{return!!window.featureFlags[e]}catch(t){console.error(`Failed to query feature flag ${e}`)}return!1}r.d(t,{T:()=>n,c:()=>a}),function(e){e.ALERTS_ATTACH_REPORTS="ALERTS_ATTACH_REPORTS",e.ALERT_REPORTS="ALERT_REPORTS",e.ALLOW_DASHBOARD_DOMAIN_SHARDING="ALLOW_DASHBOARD_DOMAIN_SHARDING",e.ALLOW_FULL_CSV_EXPORT="ALLOW_FULL_CSV_EXPORT",e.CLIENT_CACHE="CLIENT_CACHE",e.DASHBOARD_CROSS_FILTERS="DASHBOARD_CROSS_FILTERS",e.DASHBOARD_EDIT_CHART_IN_NEW_TAB="DASHBOARD_EDIT_CHART_IN_NEW_TAB",e.DASHBOARD_FILTERS_EXPERIMENTAL="DASHBOARD_FILTERS_EXPERIMENTAL",e.CONFIRM_DASHBOARD_DIFF="CONFIRM_DASHBOARD_DIFF",e.DASHBOARD_NATIVE_FILTERS="DASHBOARD_NATIVE_FILTERS",e.DASHBOARD_NATIVE_FILTERS_SET="DASHBOARD_NATIVE_FILTERS_SET",e.DASHBOARD_VIRTUALIZATION="DASHBOARD_VIRTUALIZATION",e.DASHBOARD_RBAC="DASHBOARD_RBAC",e.DATAPANEL_CLOSED_BY_DEFAULT="DATAPANEL_CLOSED_BY_DEFAULT",e.DISABLE_DATASET_SOURCE_EDIT="DISABLE_DATASET_SOURCE_EDIT",e.DISABLE_LEGACY_DATASOURCE_EDITOR="DISABLE_LEGACY_DATASOURCE_EDITOR",e.DISPLAY_MARKDOWN_HTML="DISPLAY_MARKDOWN_HTML",e.DRILL_TO_DETAIL="DRILL_TO_DETAIL",e.DYNAMIC_PLUGINS="DYNAMIC_PLUGINS",e.EMBEDDABLE_CHARTS="EMBEDDABLE_CHARTS",e.EMBEDDED_SUPERSET="EMBEDDED_SUPERSET",e.ENABLE_ADVANCED_DATA_TYPES="ENABLE_ADVANCED_DATA_TYPES",e.ENABLE_DND_WITH_CLICK_UX="ENABLE_DND_WITH_CLICK_UX",e.ENABLE_EXPLORE_DRAG_AND_DROP="ENABLE_EXPLORE_DRAG_AND_DROP",e.ENABLE_JAVASCRIPT_CONTROLS="ENABLE_JAVASCRIPT_CONTROLS",e.ENABLE_TEMPLATE_PROCESSING="ENABLE_TEMPLATE_PROCESSING",e.ENABLE_TEMPLATE_REMOVE_FILTERS="ENABLE_TEMPLATE_REMOVE_FILTERS",e.ESCAPE_MARKDOWN_HTML="ESCAPE_MARKDOWN_HTML",e.ESTIMATE_QUERY_COST="ESTIMATE_QUERY_COST",e.FORCE_DATABASE_CONNECTIONS_SSL="FORCE_DATABASE_CONNECTIONS_SSL",e.GENERIC_CHART_AXES="GENERIC_CHART_AXES",e.GLOBAL_ASYNC_QUERIES="GLOBAL_ASYNC_QUERIES",e.HORIZONTAL_FILTER_BAR="HORIZONTAL_FILTER_BAR",e.LISTVIEWS_DEFAULT_CARD_VIEW="LISTVIEWS_DEFAULT_CARD_VIEW",e.SCHEDULED_QUERIES="SCHEDULED_QUERIES",e.SHARE_QUERIES_VIA_KV_STORE="SHARE_QUERIES_VIA_KV_STORE",e.SQLLAB_BACKEND_PERSISTENCE="SQLLAB_BACKEND_PERSISTENCE",e.SQL_VALIDATORS_BY_ENGINE="SQL_VALIDATORS_BY_ENGINE",e.THUMBNAILS="THUMBNAILS",e.USE_ANALAGOUS_COLORS="USE_ANALAGOUS_COLORS",e.TAGGING_SYSTEM="TAGGING_SYSTEM",e.UX_BETA="UX_BETA",e.VERSIONED_EXPORT="VERSIONED_EXPORT",e.SSH_TUNNELING="SSH_TUNNELING"}(n||(n={}))},37731:(e,t,r)=>{function n(e){return null!=e}r.d(t,{Z:()=>n})},74765:(e,t,r)=>{r.d(t,{Z:()=>n});const n=function(e,t){if(t){const r=new Set;return e.filter((e=>{const n=t(e);return!r.has(n)&&(r.add(n),!0)}))}return[...new Set(e)]}},47710:(e,t,r)=>{r.d(t,{W:()=>C});var n=r(47037),a=r.n(n),o=r(41609),i=r.n(o),s=r(78580),l=r.n(s),u=r(67294),c=r(87183),d=r(4715),_=r(9875),E=r(74069),m=r(35932),p=r(51995),T=r(31069),h=r(55867),A=r(28216),S=r(30381),y=r.n(S),g=r(15926),f=r.n(g),R=r(11409),I=r(72570),b=r(28241),v=r(12515),N=r(40219),L=r(27600),O=r(11965);const D=p.iK.div`
  .sdm-body {
    margin: 0 8px;
  }
  .sdm-input {
    margin-left: 45px;
    width: 401px;
  }
  .sdm-autocomplete {
    width: 401px;
    align-self: center;
  }
  .sdm-radio {
    display: block;
    height: 30px;
    margin: 10px 0px;
    line-height: 30px;
  }
  .sdm-overwrite-msg {
    margin: 7px;
  }
  .sdm-overwrite-container {
    flex: 1 1 auto;
    display: flex;
  }
`,U=async(e,t,r,n,a,o)=>{const i=`api/v1/dataset/${t}?override_columns=${o}`,s=JSON.stringify({sql:r,columns:n,owners:a,database_id:e});return(await T.Z.put({endpoint:i,headers:{"Content-Type":"application/json"},body:s})).json.result},w=(0,h.t)("Untitled Dataset"),C=e=>{let{visible:t,onHide:r,buttonTextOnSave:n,buttonTextOnOverwrite:o,modalDescription:s,datasource:p,openWindow:S=!0,formData:g={}}=e;const C=(0,A.v9)((e=>{var t,r;return(null==(t=e.common)||null==(r=t.conf)?void 0:r.DEFAULT_VIZ_TYPE)||"table"})),P=()=>`${(null==p?void 0:p.name)||w} ${y()().format("MM/DD/YYYY HH:mm:ss")}`,[x,q]=(0,u.useState)(P()),[Z,Q]=(0,u.useState)(b.fT.SAVE_NEW),[$,B]=(0,u.useState)(!1),[M,H]=(0,u.useState)({}),[Y,G]=(0,u.useState)(void 0),k=(0,A.v9)((e=>(0,b.aY)(e))),F=(0,A.I0)(),K=e=>{S?window.open(e,"_blank","noreferrer"):window.location.href=e},V={...b.C9,...g||{}},j=(0,u.useCallback)((async function(e){void 0===e&&(e="");const{userId:t}=k,r=f().encode({filters:[{col:"table_name",opr:"ct",value:e},{col:"owners",opr:"rel_m_m",value:t}],order_column:"changed_on_delta_humanized",order_direction:"desc"});return T.Z.get({endpoint:`/api/v1/dataset?q=${r}`}).then((e=>({data:e.json.result.map((e=>({value:e.table_name,label:e.table_name,datasetid:e.id,owners:e.owners}))),totalCount:e.json.count})))}),[k]),W=Z===b.fT.SAVE_NEW&&0===x.length||Z===b.fT.OVERWRITE_DATASET&&i()(Y);return(0,O.tZ)(E.Z,{show:t,title:(0,h.t)("Save or Overwrite Dataset"),onHide:r,footer:(0,O.tZ)(u.Fragment,null,Z===b.fT.SAVE_NEW&&(0,O.tZ)(m.Z,{disabled:W,buttonStyle:"primary",onClick:()=>{var e,t;const n=null!=(e=null==p?void 0:p.columns)?e:[];let o;if(a()(null==p?void 0:p.templateParams)){const e=JSON.parse(p.templateParams);e._filters&&(delete e._filters,o=JSON.stringify(e))}F((0,R.createDatasource)({schema:p.schema,sql:p.sql,dbId:p.dbId||(null==p||null==(t=p.database)?void 0:t.id),templateParams:o,datasourceName:x,columns:n})).then((e=>(0,N.nv)(e.table_id,"table",{...V,datasource:`${e.table_id}__table`,..."table"===C&&{all_columns:n.map((e=>e.name))}}))).then((e=>{const t=(0,v.y8)(null,{[L.KD.formDataKey.name]:e});K(t),q(P()),r()})).catch((()=>{(0,I.Gb)((0,h.t)("An error occurred saving dataset"))}))}},n),Z===b.fT.OVERWRITE_DATASET&&(0,O.tZ)(u.Fragment,null,$&&(0,O.tZ)(m.Z,{onClick:()=>{B(!1),H({})}},(0,h.t)("Back")),(0,O.tZ)(m.Z,{className:"md",buttonStyle:"primary",onClick:async()=>{var e,t,n;if(!$)return void B(!0);const[,a]=await Promise.all([U(null==p?void 0:p.dbId,null==M?void 0:M.datasetid,null==p?void 0:p.sql,null==p||null==(e=p.columns)?void 0:e.map((e=>({column_name:e.name,type:e.type,is_dttm:e.is_dttm}))),null==M||null==(t=M.owners)?void 0:t.map((e=>e.id)),!0),(0,N.nv)(M.datasetid,"table",{...V,datasource:`${M.datasetid}__table`,..."table"===C&&{all_columns:null==p||null==(n=p.columns)?void 0:n.map((e=>e.name))}})]),o=(0,v.y8)(null,{[L.KD.formDataKey.name]:a});K(o),B(!1),q(P()),r()},disabled:W},o)))},(0,O.tZ)(D,null,!$&&(0,O.tZ)("div",{className:"sdm-body"},s&&(0,O.tZ)("div",{className:"sdm-prompt"},s),(0,O.tZ)(c.Y.Group,{onChange:e=>{Q(Number(e.target.value))},value:Z},(0,O.tZ)(c.Y,{className:"sdm-radio",value:1},(0,h.t)("Save as new"),(0,O.tZ)(_.II,{className:"sdm-input",value:x,onChange:e=>{q(e.target.value)},disabled:1!==Z})),(0,O.tZ)("div",{className:"sdm-overwrite-container"},(0,O.tZ)(c.Y,{className:"sdm-radio",value:2},(0,h.t)("Overwrite existing")),(0,O.tZ)("div",{className:"sdm-autocomplete"},(0,O.tZ)(d.qb,{allowClear:!0,showSearch:!0,placeholder:(0,h.t)("Select or type dataset name"),ariaLabel:(0,h.t)("Existing dataset"),onChange:(e,t)=>{H(t),G(e)},options:e=>j(e),value:Y,filterOption:(e,t)=>{var r;return l()(r=t.value.toLowerCase()).call(r,e.toLowerCase())},disabled:2!==Z,getPopupContainer:()=>document.body}))))),$&&(0,O.tZ)("div",{className:"sdm-overwrite-msg"},(0,h.t)("Are you sure you want to overwrite this dataset?"))))}},44904:(e,t,r)=>{r.d(t,{IY:()=>a,uC:()=>o,Em:()=>i,bR:()=>s,eU:()=>l,ev:()=>u,rp:()=>c,rP:()=>d,xj:()=>_,oN:()=>E,lV:()=>m,fM:()=>p,hC:()=>T,zY:()=>h,Yo:()=>A,TU:()=>S,U$:()=>y,b$:()=>g,rD:()=>f,N2:()=>R,Yn:()=>I,GJ:()=>b,iJ:()=>v,lr:()=>N,OI:()=>L});var n=r(55867);const a={offline:"danger",failed:"danger",pending:"info",fetching:"info",running:"warning",stopped:"danger",success:"success"},o={offline:(0,n.t)("offline"),failed:(0,n.t)("failed"),pending:(0,n.t)("pending"),fetching:(0,n.t)("fetching"),running:(0,n.t)("running"),stopped:(0,n.t)("stopped"),success:(0,n.t)("success")},i={success:"success",failed:"failed",running:"running",offline:"offline",pending:"pending"},s={success:(0,n.t)("success"),failed:(0,n.t)("failed"),running:(0,n.t)("running"),offline:(0,n.t)("offline"),pending:(0,n.t)("pending")},l=5,u=3,c=51,d=400,_=10,E=30,m=70,p=2e3,T=600,h=100,A=1024,S=2,y=864e5,g=5120,f=.9,R=8e3,I=100,b=90,v=60,N=55,L=50},28241:(e,t,r)=>{r.d(t,{aY:()=>n,fT:()=>a,C9:()=>o});const n=e=>{if(e.hasOwnProperty("sqlLab")){const{sqlLab:{user:t}}=e;return t}const{user:t}=e;return t};var a;!function(e){e[e.SAVE_NEW=1]="SAVE_NEW",e[e.OVERWRITE_DATASET=2]="OVERWRITE_DATASET"}(a||(a={}));const o={metrics:[],groupby:[],time_range:"No filter",row_limit:1e3}},33313:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(44904);const a=["AND","AS","ASC","AVG","BY","CASE","COUNT","CREATE","CROSS","DATABASE","DEFAULT","DELETE","DESC","DISTINCT","DROP","ELSE","END","FOREIGN","FROM","GRANT","GROUP","HAVING","IF","INNER","INSERT","JOIN","KEY","LEFT","LIMIT","MAX","MIN","NATURAL","NOT","NULL","OFFSET","ON","OR","ORDER","OUTER","PRIMARY","REFERENCES","RIGHT","SELECT","SUM","TABLE","THEN","TYPE","UNION","UPDATE","WHEN","WHERE"].concat(["BIGINT","BINARY","BIT","CHAR","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","MONEY","NUMBER","NUMERIC","REAL","SET","TEXT","TIMESTAMP","VARCHAR"]).map((e=>({meta:"sql",name:e,score:n.Yn,value:e})))},29487:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(5872),a=r.n(n),o=r(11965),i=(r(67294),r(4863)),s=r(51995),l=r(70163);function u(e){const{type:t="info",description:r,showIcon:n=!0,closable:u=!0,roomBelow:c=!1,children:d}=e,_=(0,s.Fg)(),{colors:E,typography:m,gridUnit:p}=_,{alert:T,error:h,info:A,success:S}=E;let y=A,g=l.Z.InfoSolid;return"error"===t?(y=h,g=l.Z.ErrorSolid):"warning"===t?(y=T,g=l.Z.AlertSolid):"success"===t&&(y=S,g=l.Z.CircleCheckSolid),(0,o.tZ)(i.default,a()({role:"alert",showIcon:n,icon:(0,o.tZ)(g,{"aria-label":`${t} icon`}),closeText:u&&(0,o.tZ)(l.Z.XSmall,{"aria-label":"close icon"}),css:(0,o.iv)({marginBottom:c?4*p:0,padding:`${2*p}px ${3*p}px`,alignItems:"flex-start",border:0,backgroundColor:y.light2,"& .ant-alert-icon":{marginRight:2*p},"& .ant-alert-message":{color:y.dark2,fontSize:m.sizes.m,fontWeight:r?m.weights.bold:m.weights.normal},"& .ant-alert-description":{color:y.dark2,fontSize:m.sizes.m}},"","")},e),d)}},94670:(e,t,r)=>{r.d(t,{iO:()=>d,up:()=>_,cE:()=>E,YH:()=>m,ry:()=>p,Ad:()=>T,Z5:()=>h});var n=r(5872),a=r.n(n),o=r(67294),i=r(53239),s=r(67913),l=r(11965);const u={"mode/sql":()=>r.e(8883).then(r.t.bind(r,48883,23)),"mode/markdown":()=>Promise.all([r.e(9794),r.e(5802),r.e(4832),r.e(6061)]).then(r.t.bind(r,66061,23)),"mode/css":()=>Promise.all([r.e(5802),r.e(4972)]).then(r.t.bind(r,94972,23)),"mode/json":()=>r.e(8750).then(r.t.bind(r,58750,23)),"mode/yaml":()=>r.e(741).then(r.t.bind(r,60741,23)),"mode/html":()=>Promise.all([r.e(9794),r.e(5802),r.e(4832),r.e(1258)]).then(r.t.bind(r,71258,23)),"mode/javascript":()=>Promise.all([r.e(9794),r.e(4579)]).then(r.t.bind(r,54579,23)),"theme/textmate":()=>r.e(2089).then(r.t.bind(r,2089,23)),"theme/github":()=>r.e(440).then(r.t.bind(r,50440,23)),"ext/language_tools":()=>r.e(5335).then(r.t.bind(r,75335,23)),"ext/searchbox":()=>r.e(8656).then(r.t.bind(r,68656,23))};function c(e,t){let{defaultMode:n,defaultTheme:c,defaultTabSize:d=2,placeholder:_}=void 0===t?{}:t;return(0,s.Z)((async()=>{var t,s;const{default:_}=await Promise.all([r.e(1216),r.e(7167)]).then(r.bind(r,74981));await Promise.all(e.map((e=>u[e]())));const E=n||(null==(t=e.find((e=>e.startsWith("mode/"))))?void 0:t.replace("mode/","")),m=c||(null==(s=e.find((e=>e.startsWith("theme/"))))?void 0:s.replace("theme/",""));return(0,o.forwardRef)((function(e,t){let{keywords:r,mode:n=E,theme:o=m,tabSize:s=d,defaultValue:u="",...c}=e;if(r){const e={getCompletions:(e,t,a,o,i)=>{Number.isNaN(parseInt(o,10))&&t.getMode().$id===`ace/mode/${n}`&&i(null,r)}};(0,i.acequire)("ace/ext/language_tools").setCompleters([e])}return(0,l.tZ)(_,a()({ref:t,mode:n,theme:o,tabSize:s,defaultValue:u},c))}))}),_)}const d=c(["mode/sql","theme/github","ext/language_tools","ext/searchbox"]),_=c(["mode/sql","theme/github","ext/language_tools","ext/searchbox"],{placeholder:()=>(0,l.tZ)("div",{style:{height:"100%"}},(0,l.tZ)("div",{style:{width:41,height:"100%",background:"#e8e8e8"}}),(0,l.tZ)("div",{className:"ace_content"}))}),E=c(["mode/markdown","theme/textmate"]),m=c(["mode/markdown","mode/sql","mode/json","mode/html","mode/javascript","theme/textmate"]),p=c(["mode/css","theme/github"]),T=c(["mode/json","theme/github"]),h=c(["mode/json","mode/yaml","theme/github"])},67913:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(5872),a=r.n(n),o=r(67294),i=r(38703),s=r(11965);function l(e){let{width:t,height:r,showLoadingForImport:n=!1,placeholderStyle:a}=e;return r&&(0,s.tZ)("div",{key:"async-asm-placeholder",style:{width:t,height:r,...a}},n&&(0,s.tZ)(i.Z,{position:"floating"}))||null}function u(e,t){let r,n;function i(){return r||(r=e instanceof Promise?e:e()),n||r.then((e=>{n=e.default||e})),r}void 0===t&&(t=l);const u=(0,o.forwardRef)((function(e,r){const[l,u]=(0,o.useState)(void 0!==n);(0,o.useEffect)((()=>{let e=!0;return l||i().then((()=>{e&&u(!0)})),()=>{e=!1}}));const c=n||t;return c?(0,s.tZ)(c,a()({ref:c===n?r:null},e)):null}));return u.preload=i,u}},43700:(e,t,r)=>{r.d(t,{Z:()=>i}),r(67294);var n=r(51995),a=r(46445),o=r(11965);const i=Object.assign((0,n.iK)((e=>{let{light:t,bigger:r,bold:n,animateArrows:i,...s}=e;return(0,o.tZ)(a.Z,s)}))`
    .ant-collapse-item {
      .ant-collapse-header {
        font-weight: ${e=>{let{bold:t,theme:r}=e;return t?r.typography.weights.bold:r.typography.weights.normal}};
        font-size: ${e=>{let{bigger:t,theme:r}=e;return t?4*r.gridUnit+"px":"inherit"}};

        .ant-collapse-arrow svg {
          transition: ${e=>{let{animateArrows:t}=e;return t?"transform 0.24s":"none"}};
        }

        ${e=>{let{expandIconPosition:t}=e;return t&&"right"===t&&"\n            .anticon.anticon-right.ant-collapse-arrow > svg {\n              transform: rotate(90deg) !important;\n            }\n          "}}

        ${e=>{let{light:t,theme:r}=e;return t&&`\n            color: ${r.colors.grayscale.light4};\n            .ant-collapse-arrow svg {\n              color: ${r.colors.grayscale.light4};\n            }\n          `}}

        ${e=>{let{ghost:t,bordered:r,theme:n}=e;return t&&r&&`\n            border-bottom: 1px solid ${n.colors.grayscale.light3};\n          `}}
      }
      .ant-collapse-content {
        .ant-collapse-content-box {
          .loading.inline {
            margin: ${e=>{let{theme:t}=e;return 12*t.gridUnit}}px auto;
            display: block;
          }
        }
      }
    }
    .ant-collapse-item-active {
      .ant-collapse-header {
        ${e=>{let{expandIconPosition:t}=e;return t&&"right"===t&&"\n            .anticon.anticon-right.ant-collapse-arrow > svg {\n              transform: rotate(-90deg) !important;\n            }\n          "}}
      }
    }
  `,{Panel:a.Z.Panel})},94301:(e,t,r)=>{r.d(t,{XJ:()=>g,x3:()=>f,Tc:()=>R,UX:()=>b}),r(67294);var n,a=r(51995),o=r(11965),i=r(55867),s=r(4715),l=r(35932);!function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Big=2]="Big"}(n||(n={}));const u=a.iK.div`
  ${e=>{let{theme:t}=e;return o.iv`
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
    align-items: center;
    justify-content: center;
    padding: ${4*t.gridUnit}px;
    text-align: center;

    & .ant-empty-image svg {
      width: auto;
    }

    & a,
    & span[role='button'] {
      color: inherit;
      text-decoration: underline;
      &:hover {
        color: ${t.colors.grayscale.base};
      }
    }
  `}}
`,c=a.iK.div``,d=a.iK.p`
  ${e=>{let{theme:t}=e;return o.iv`
    font-size: ${t.typography.sizes.m}px;
    color: ${t.colors.grayscale.light1};
    margin: ${2*t.gridUnit}px 0 0 0;
    font-weight: ${t.typography.weights.bold};
  `}}
`,_=(0,a.iK)(d)`
  ${e=>{let{theme:t}=e;return o.iv`
    font-size: ${t.typography.sizes.l}px;
    color: ${t.colors.grayscale.light1};
    margin-top: ${4*t.gridUnit}px;
  `}}
`,E=a.iK.p`
  ${e=>{let{theme:t}=e;return o.iv`
    font-size: ${t.typography.sizes.s}px;
    color: ${t.colors.grayscale.light1};
    margin: ${2*t.gridUnit}px 0 0 0;
  `}}
`,m=(0,a.iK)(E)`
  ${e=>{let{theme:t}=e;return o.iv`
    font-size: ${t.typography.sizes.m}px;
  `}}
`,p=(0,a.iK)(E)`
  ${e=>{let{theme:t}=e;return o.iv`
    margin-top: ${t.gridUnit}px;
    line-height: 1.2;
  `}}
`,T=(0,a.iK)(l.Z)`
  ${e=>{let{theme:t}=e;return o.iv`
    margin-top: ${4*t.gridUnit}px;
    z-index: 1;
  `}}
`,h=e=>"string"==typeof e?`/static/assets/images/${e}`:e,A=e=>{switch(e){case n.Small:return{height:"50px"};case n.Medium:return{height:"80px"};case n.Big:return{height:"150px"};default:return{height:"50px"}}},S=e=>{let{image:t,size:r}=e;return(0,o.tZ)(s.HY,{description:!1,image:h(t),imageStyle:A(r)})},y=e=>{e.preventDefault(),e.stopPropagation()},g=e=>{let{title:t,image:r,description:a,buttonAction:i,buttonText:s,className:l}=e;return(0,o.tZ)(u,{className:l},r&&(0,o.tZ)(S,{image:r,size:n.Big}),(0,o.tZ)(c,{css:e=>o.iv`
          max-width: ${150*e.gridUnit}px;
        `},(0,o.tZ)(_,null,t),a&&(0,o.tZ)(m,null,a),i&&s&&(0,o.tZ)(T,{buttonStyle:"primary",onClick:i,onMouseDown:y},s)))},f=e=>{let{title:t,image:r,description:a,buttonAction:i,buttonText:s}=e;return(0,o.tZ)(u,null,r&&(0,o.tZ)(S,{image:r,size:n.Medium}),(0,o.tZ)(c,{css:e=>o.iv`
          max-width: ${100*e.gridUnit}px;
        `},(0,o.tZ)(d,null,t),a&&(0,o.tZ)(E,null,a),s&&i&&(0,o.tZ)(T,{buttonStyle:"primary",onClick:i,onMouseDown:y},s)))},R=e=>{let{title:t,image:r,description:a}=e;return(0,o.tZ)(u,null,r&&(0,o.tZ)(S,{image:r,size:n.Small}),(0,o.tZ)(c,{css:e=>o.iv`
          max-width: ${75*e.gridUnit}px;
        `},(0,o.tZ)(d,null,t),a&&(0,o.tZ)(p,null,a)))},I={NO_DATABASES_MATCH_TITLE:(0,i.t)("No databases match your search"),NO_DATABASES_AVAILABLE_TITLE:(0,i.t)("There are no databases available"),MANAGE_YOUR_DATABASES_TEXT:(0,i.t)("Manage your databases"),HERE_TEXT:(0,i.t)("here")},b=e=>(0,o.tZ)(R,{image:"empty.svg",title:e?I.NO_DATABASES_MATCH_TITLE:I.NO_DATABASES_AVAILABLE_TITLE,description:(0,o.tZ)("p",null,I.MANAGE_YOUR_DATABASES_TEXT," ",(0,o.tZ)("a",{href:"/databaseview/list"},I.HERE_TEXT))})},72875:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(67294),a=r(55867),o=r(92869),i=r(91178),s=r(11965);const l=(0,a.t)("Unexpected error");function u(e){let{title:t=l,error:r,subtitle:a,copyText:u,link:c,stackTrace:d,source:_,description:E}=e;if(r){const e=(0,o.Z)().get(r.error_type);if(e)return(0,s.tZ)(e,{error:r,source:_,subtitle:a})}return(0,s.tZ)(i.Z,{level:"warning",title:t,subtitle:a,copyText:u,description:E,source:_,body:c||d?(0,s.tZ)(n.Fragment,null,c&&(0,s.tZ)("a",{href:c,target:"_blank",rel:"noopener noreferrer"},"(Request Access)"),(0,s.tZ)("br",null),d&&(0,s.tZ)("pre",null,d)):void 0})}},4591:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(97538);const a=(0,r(51995).iK)(n.Z.Item)`
  ${e=>{let{theme:t}=e;return`\n    .ant-form-item-label {\n      padding-bottom: ${t.gridUnit}px;\n      & > label {\n        text-transform: uppercase;\n        font-size: ${t.typography.sizes.s}px;\n        color: ${t.colors.grayscale.base};\n\n        &.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n          &::before {\n            display: none;\n          }\n          &::after {\n            display: inline-block;\n            color: ${t.colors.error.base};\n            font-size: ${t.typography.sizes.s}px;\n            content: '*';\n          }\n        }\n      }\n    }\n  `}}
`},2857:(e,t,r)=>{r.d(t,{Z:()=>s}),r(67294);var n=r(51995),a=r(11965);const o=n.iK.label`
  text-transform: uppercase;
  font-size: ${e=>{let{theme:t}=e;return t.typography.sizes.s}}px;
  color: ${e=>{let{theme:t}=e;return t.colors.grayscale.base}};
  margin-bottom: ${e=>{let{theme:t}=e;return t.gridUnit}}px;
`,i=n.iK.label`
  text-transform: uppercase;
  font-size: ${e=>{let{theme:t}=e;return t.typography.sizes.s}}px;
  color: ${e=>{let{theme:t}=e;return t.colors.grayscale.base}};
  margin-bottom: ${e=>{let{theme:t}=e;return t.gridUnit}}px;
  &::after {
    display: inline-block;
    margin-left: ${e=>{let{theme:t}=e;return t.gridUnit}}px;
    color: ${e=>{let{theme:t}=e;return t.colors.error.base}};
    font-size: ${e=>{let{theme:t}=e;return t.typography.sizes.m}}px;
    content: '*';
  }
`;function s(e){let{children:t,htmlFor:r,required:n=!1,className:s}=e;const l=n?i:o;return(0,a.tZ)(l,{htmlFor:r,className:s},t)}},87858:(e,t,r)=>{r.d(t,{Z:()=>I});var n,a=r(5872),o=r.n(a),i=r(67294),s=r(4107),l=r(31097),u=r(51995),c=r(11965),d=r(55867),_=r(8272),E=r(70163);function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}const p=function(e){return i.createElement("svg",m({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 7a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1zm0 8a1 1 0 100 2 1 1 0 000-2zm9.71-7.44l-5.27-5.27a1.05 1.05 0 00-.71-.29H8.27a1.05 1.05 0 00-.71.29L2.29 7.56a1.05 1.05 0 00-.29.71v7.46c.004.265.107.518.29.71l5.27 5.27c.192.183.445.286.71.29h7.46a1.05 1.05 0 00.71-.29l5.27-5.27a1.05 1.05 0 00.29-.71V8.27a1.05 1.05 0 00-.29-.71zM20 15.31L15.31 20H8.69L4 15.31V8.69L8.69 4h6.62L20 8.69v6.62z",fill:"currentColor"})))};var T=r(4591),h=r(2857);const A=(0,u.iK)(s.Z)`
  margin: ${e=>{let{theme:t}=e;return`${t.gridUnit}px 0 ${2*t.gridUnit}px`}};
`,S=(0,u.iK)(s.Z.Password)`
  margin: ${e=>{let{theme:t}=e;return`${t.gridUnit}px 0 ${2*t.gridUnit}px`}};
`,y=(0,u.iK)("div")`
  input::-webkit-outer-spin-button,
  input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  margin-bottom: ${e=>{let{theme:t}=e;return 3*t.gridUnit}}px;
  .ant-form-item {
    margin-bottom: 0;
  }
`,g=u.iK.div`
  display: flex;
  align-items: center;
`,f=(0,u.iK)(h.Z)`
  margin-bottom: 0;
`,R=c.iv`
  &.anticon > * {
    line-height: 0;
  }
`,I=e=>{let{label:t,validationMethods:r,errorMessage:n,helpText:a,required:i=!1,hasTooltip:s=!1,tooltipText:u,id:m,className:h,visibilityToggle:I,...b}=e;return(0,c.tZ)(y,{className:h},(0,c.tZ)(g,null,(0,c.tZ)(f,{htmlFor:m,required:i},t),s&&(0,c.tZ)(_.Z,{tooltip:`${u}`,viewBox:"0 -1 24 24"})),(0,c.tZ)(T.Z,{css:e=>((e,t)=>c.iv`
  .ant-form-item-children-icon {
    display: none;
  }
  ${t&&`.ant-form-item-control-input-content {\n      position: relative;\n      &:after {\n        content: ' ';\n        display: inline-block;\n        background: ${e.colors.error.base};\n        mask: url(${p});\n        mask-size: cover;\n        width: ${4*e.gridUnit}px;\n        height: ${4*e.gridUnit}px;\n        position: absolute;\n        right: ${1.25*e.gridUnit}px;\n        top: ${2.75*e.gridUnit}px;\n      }\n    }`}
`)(e,!!n),validateTrigger:Object.keys(r),validateStatus:n?"error":"success",help:n||a,hasFeedback:!!n},I||"password"===b.name?(0,c.tZ)(S,o()({},b,r,{iconRender:e=>e?(0,c.tZ)(l.Z,{title:(0,d.t)("Hide password.")},(0,c.tZ)(E.Z.EyeInvisibleOutlined,{iconSize:"m",css:R})):(0,c.tZ)(l.Z,{title:(0,d.t)("Show password.")},(0,c.tZ)(E.Z.EyeOutlined,{iconSize:"m",css:R})),role:"textbox"})):(0,c.tZ)(A,o()({},b,r))))}},49238:(e,t,r)=>{r.d(t,{l0:()=>s,xJ:()=>l.Z,lX:()=>u.Z}),r(67294);var n=r(97538),a=r(51995),o=r(11965);const i=(0,a.iK)(n.Z)`
  &.ant-form label {
    font-size: ${e=>{let{theme:t}=e;return t.typography.sizes.s}}px;
  }
  .ant-form-item {
    margin-bottom: ${e=>{let{theme:t}=e;return 4*t.gridUnit}}px;
  }
`;function s(e){return(0,o.tZ)(i,e)}var l=r(4591),u=r(2857);r(87858)},8272:(e,t,r)=>{r.d(t,{Z:()=>d}),r(67294);var n=r(51995),a=r(58593),o=r(70163),i=r(11965);const s=(0,n.iK)(a.u)`
  cursor: pointer;
  path:first-of-type {
    fill: ${e=>{let{theme:t}=e;return t.colors.grayscale.base}};
  }
`,l=n.iK.span`
  display: -webkit-box;
  -webkit-line-clamp: 20;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
`,u={fontSize:"12px",lineHeight:"16px"},c="rgba(0,0,0,0.9)";function d(e){let{tooltip:t,placement:r="right",trigger:n="hover",overlayStyle:a=u,bgColor:d=c,viewBox:_="0 -2 24 24"}=e;return(0,i.tZ)(s,{title:(0,i.tZ)(l,null,t),placement:r,trigger:n,overlayStyle:a,color:d},(0,i.tZ)(o.Z.InfoSolidSmall,{className:"info-solid-small",viewBox:_}))}},9875:(e,t,r)=>{r.d(t,{II:()=>i,Rn:()=>s,Kx:()=>l});var n=r(51995),a=r(4107),o=r(28205);const i=(0,n.iK)(a.Z)`
  border: 1px solid ${e=>{let{theme:t}=e;return t.colors.secondary.light3}};
  border-radius: ${e=>{let{theme:t}=e;return t.borderRadius}}px;
`,s=(0,n.iK)(o.Z)`
  border: 1px solid ${e=>{let{theme:t}=e;return t.colors.secondary.light3}};
  border-radius: ${e=>{let{theme:t}=e;return t.borderRadius}}px;
`,l=(0,n.iK)(a.Z.TextArea)`
  border: 1px solid ${e=>{let{theme:t}=e;return t.colors.secondary.light3}};
  border-radius: ${e=>{let{theme:t}=e;return t.borderRadius}}px;
`},83862:(e,t,r)=>{r.d(t,{v:()=>l,$:()=>u});var n=r(51995),a=r(43865);const o=(0,n.iK)(a.Z.Item)`
  > a {
    text-decoration: none;
  }

  &.ant-menu-item {
    height: ${e=>{let{theme:t}=e;return 8*t.gridUnit}}px;
    line-height: ${e=>{let{theme:t}=e;return 8*t.gridUnit}}px;
    a {
      border-bottom: none;
      transition: background-color ${e=>{let{theme:t}=e;return t.transitionTiming}}s;
      &:after {
        content: '';
        position: absolute;
        bottom: -3px;
        left: 50%;
        width: 0;
        height: 3px;
        opacity: 0;
        transform: translateX(-50%);
        transition: all ${e=>{let{theme:t}=e;return t.transitionTiming}}s;
        background-color: ${e=>{let{theme:t}=e;return t.colors.primary.base}};
      }
      &:focus {
        border-bottom: none;
        background-color: transparent;
        @media (max-width: 767px) {
          background-color: ${e=>{let{theme:t}=e;return t.colors.primary.light5}};
        }
      }
    }
  }

  &.ant-menu-item,
  &.ant-dropdown-menu-item {
    span[role='button'] {
      display: inline-block;
      width: 100%;
    }
    transition-duration: 0s;
  }
`,i=(0,n.iK)(a.Z)`
  line-height: 51px;
  border: none;

  & > .ant-menu-item,
  & > .ant-menu-submenu {
    vertical-align: inherit;
    &:hover {
      color: ${e=>{let{theme:t}=e;return t.colors.grayscale.dark1}};
    }
  }

  &:not(.ant-menu-dark) > .ant-menu-submenu,
  &:not(.ant-menu-dark) > .ant-menu-item {
    &:hover {
      border-bottom: none;
    }
  }

  &:not(.ant-menu-dark) > .ant-menu-submenu,
  &:not(.ant-menu-dark) > .ant-menu-item {
    margin: 0px;
  }

  & > .ant-menu-item > a {
    padding: ${e=>{let{theme:t}=e;return 4*t.gridUnit}}px;
  }
`,s=(0,n.iK)(a.Z.SubMenu)`
  color: ${e=>{let{theme:t}=e;return t.colors.grayscale.dark1}};
  border-bottom: none;
  .ant-menu-submenu-open,
  .ant-menu-submenu-active {
    background-color: ${e=>{let{theme:t}=e;return t.colors.primary.light5}};
    .ant-menu-submenu-title {
      color: ${e=>{let{theme:t}=e;return t.colors.grayscale.dark1}};
      background-color: ${e=>{let{theme:t}=e;return t.colors.primary.light5}};
      border-bottom: none;
      margin: 0;
      &:after {
        opacity: 1;
        width: calc(100% - 1);
      }
    }
  }
  .ant-menu-submenu-title {
    position: relative;
    top: ${e=>{let{theme:t}=e;return-t.gridUnit-3}}px;
    &:after {
      content: '';
      position: absolute;
      bottom: -3px;
      left: 50%;
      width: 0;
      height: 3px;
      opacity: 0;
      transform: translateX(-50%);
      transition: all ${e=>{let{theme:t}=e;return t.transitionTiming}}s;
      background-color: ${e=>{let{theme:t}=e;return t.colors.primary.base}};
    }
  }
  .ant-menu-submenu-arrow {
    top: 67%;
  }
  & > .ant-menu-submenu-title {
    padding: 0 ${e=>{let{theme:t}=e;return 6*t.gridUnit}}px 0
      ${e=>{let{theme:t}=e;return 3*t.gridUnit}}px !important;
    span[role='img'] {
      position: absolute;
      right: ${e=>{let{theme:t}=e;return-t.gridUnit-2}}px;
      top: ${e=>{let{theme:t}=e;return 5.25*t.gridUnit}}px;
      svg {
        font-size: ${e=>{let{theme:t}=e;return 6*t.gridUnit}}px;
        color: ${e=>{let{theme:t}=e;return t.colors.grayscale.base}};
      }
    }
    & > span {
      position: relative;
      top: 7px;
    }
    &:hover {
      color: ${e=>{let{theme:t}=e;return t.colors.primary.base}};
    }
  }
`,l=Object.assign(a.Z,{Item:o}),u=Object.assign(i,{Item:o,SubMenu:s,Divider:a.Z.Divider,ItemGroup:a.Z.ItemGroup})},1304:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(67294),a=r(74069),o=r(35932),i=r(11965);const s=n.forwardRef(((e,t)=>{const[r,s]=(0,n.useState)(!1),{beforeOpen:l=(()=>{}),onExit:u=(()=>{}),isButton:c=!1,resizable:d=!1,draggable:_=!1,className:E="",tooltip:m,modalFooter:p,triggerNode:T,destroyOnClose:h=!0,modalBody:A,draggableConfig:S={},resizableConfig:y={},modalTitle:g,responsive:f,width:R,maxWidth:I}=e,b=()=>{s(!1),null==u||u()},v=e=>{e.preventDefault(),null==l||l(),s(!0)};return t&&(t.current={close:b,open:v}),(0,i.tZ)(n.Fragment,null,c&&(0,i.tZ)(o.Z,{className:"modal-trigger",tooltip:m,onClick:v},T),!c&&(0,i.tZ)("span",{onClick:v,role:"button"},T),(0,i.tZ)(a.Z,{className:E,show:r,onHide:b,title:g,footer:p,hideFooter:!p,width:R,maxWidth:I,responsive:f,resizable:d,resizableConfig:y,draggable:_,draggableConfig:S,destroyOnClose:h},A))}))},87183:(e,t,r)=>{r.d(t,{Y:()=>s});var n=r(51995),a=r(47933);const o=(0,n.iK)(a.ZP)`
  .ant-radio-inner {
    top: -1px;
    left: 2px;
    width: ${e=>{let{theme:t}=e;return 4*t.gridUnit}}px;
    height: ${e=>{let{theme:t}=e;return 4*t.gridUnit}}px;
    border-width: 2px;
    border-color: ${e=>{let{theme:t}=e;return t.colors.grayscale.light2}};
  }

  .ant-radio.ant-radio-checked {
    .ant-radio-inner {
      border-width: ${e=>{let{theme:t}=e;return t.gridUnit+1}}px;
      border-color: ${e=>{let{theme:t}=e;return t.colors.primary.base}};
    }

    .ant-radio-inner::after {
      background-color: ${e=>{let{theme:t}=e;return t.colors.grayscale.light5}};
      top: 0;
      left: 0;
      width: ${e=>{let{theme:t}=e;return t.gridUnit+2}}px;
      height: ${e=>{let{theme:t}=e;return t.gridUnit+2}}px;
    }
  }

  .ant-radio:hover,
  .ant-radio:focus {
    .ant-radio-inner {
      border-color: ${e=>{let{theme:t}=e;return t.colors.primary.dark1}};
    }
  }
`,i=(0,n.iK)(a.ZP.Group)`
  font-size: inherit;
`,s=Object.assign(o,{Group:i,Button:a.ZP.Button})},86057:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(11965),a=(r(67294),r(51995)),o=r(78186),i=r(70163),s=r(58593);const l=function(e){let{warningMarkdown:t,size:r}=e;const l=(0,a.Fg)();return(0,n.tZ)(s.u,{id:"warning-tooltip",title:(0,n.tZ)(o.Z,{source:t})},(0,n.tZ)(i.Z.AlertSolid,{iconColor:l.colors.alert.base,iconSize:r,css:(0,n.iv)({marginRight:2*l.gridUnit},"","")}))}},80621:(e,t,r)=>{r.d(t,{PV:()=>n,M2:()=>a,_4:()=>o,Zn:()=>i,D0:()=>s,Jd:()=>l,Nb:()=>u,ES:()=>c,Z1:()=>d,C3:()=>_,vD:()=>E,Xk:()=>m,NN:()=>p,gR:()=>T,Mu:()=>h,cd:()=>A,es:()=>S,cz:()=>y,cx:()=>g,AA:()=>f,fw:()=>R,u_:()=>I,OE:()=>b,pQ:()=>v,b5:()=>N,HE:()=>L,Q9:()=>O,TN:()=>D,NT:()=>U,kS:()=>w,Bu:()=>C,Ep:()=>P,dU:()=>x,_B:()=>q});const n="GRID_ID",a="HEADER_ID",o="ROOT_ID",i="DASHBOARD_VERSION_KEY",s="NEW_COMPONENTS_SOURCE_ID",l="NEW_CHART_ID",u="NEW_COLUMN_ID",c="NEW_DIVIDER_ID",d="NEW_HEADER_ID",_="NEW_MARKDOWN_ID",E="NEW_ROW_ID",m="NEW_TAB_ID",p="NEW_TABS_ID",T="NEW_DYNAMIC_COMPONENT",h=0,A=8,S=2*A,y=12,g=1,f=5,R=4,I="SMALL_HEADER",b="MEDIUM_HEADER",v="LARGE_HEADER",N="BACKGROUND_WHITE",L="BACKGROUND_TRANSPARENT",O=50,D="overwrite",U="overwriteConfirmed",w="newDashboard",C=65535,P=["LABEL"],x="ALL_FILTERS_ROOT";var q;!function(e){e[e.NONE=0]="NONE",e[e.HIDE_NAV=1]="HIDE_NAV",e[e.HIDE_NAV_AND_TITLE=2]="HIDE_NAV_AND_TITLE",e[e.REPORT=3]="REPORT"}(q||(q={}))},69856:(e,t,r)=>{r.d(t,{YY:()=>a,Ps:()=>o,d:()=>i,LT:()=>s,GS:()=>l,Ak:()=>u,qK:()=>c,qB:()=>d,yi:()=>_,Q_:()=>E,m_:()=>m,ft:()=>p,cM:()=>T,i2:()=>h,H7:()=>A,kc:()=>S,vK:()=>y,xA:()=>g});var n=r(55867);const a={AVG:"AVG",COUNT:"COUNT",COUNT_DISTINCT:"COUNT_DISTINCT",MAX:"MAX",MIN:"MIN",SUM:"SUM"},o=Object.values(a);var i;!function(e){e.EQUALS="EQUALS",e.NOT_EQUALS="NOT_EQUALS",e.LESS_THAN="LESS_THAN",e.LESS_THAN_OR_EQUAL="LESS_THAN_OR_EQUAL",e.GREATER_THAN="GREATER_THAN",e.GREATER_THAN_OR_EQUAL="GREATER_THAN_OR_EQUAL",e.IN="IN",e.NOT_IN="NOT_IN",e.LIKE="LIKE",e.ILIKE="ILIKE",e.REGEX="REGEX",e.IS_NOT_NULL="IS_NOT_NULL",e.IS_NULL="IS_NULL",e.LATEST_PARTITION="LATEST_PARTITION",e.IS_TRUE="IS_TRUE",e.IS_FALSE="IS_FALSE",e.TEMPORAL_RANGE="TEMPORAL_RANGE"}(i||(i={}));const s={[i.EQUALS]:{display:(0,n.t)("Equal to (=)"),operation:"=="},[i.NOT_EQUALS]:{display:(0,n.t)("Not equal to ()"),operation:"!="},[i.LESS_THAN]:{display:(0,n.t)("Less than (<)"),operation:"<"},[i.LESS_THAN_OR_EQUAL]:{display:(0,n.t)("Less or equal (<=)"),operation:"<="},[i.GREATER_THAN]:{display:(0,n.t)("Greater than (>)"),operation:">"},[i.GREATER_THAN_OR_EQUAL]:{display:(0,n.t)("Greater or equal (>=)"),operation:">="},[i.IN]:{display:(0,n.t)("In"),operation:"IN"},[i.NOT_IN]:{display:(0,n.t)("Not in"),operation:"NOT IN"},[i.LIKE]:{display:(0,n.t)("Like"),operation:"LIKE"},[i.ILIKE]:{display:(0,n.t)("Like (case insensitive)"),operation:"ILIKE"},[i.REGEX]:{display:(0,n.t)("Regex"),operation:"REGEX"},[i.IS_NOT_NULL]:{display:(0,n.t)("Is not null"),operation:"IS NOT NULL"},[i.IS_NULL]:{display:(0,n.t)("Is null"),operation:"IS NULL"},[i.LATEST_PARTITION]:{display:(0,n.t)("use latest_partition template"),operation:"LATEST PARTITION"},[i.IS_TRUE]:{display:(0,n.t)("Is true"),operation:"=="},[i.IS_FALSE]:{display:(0,n.t)("Is false"),operation:"=="},[i.TEMPORAL_RANGE]:{display:(0,n.t)("TEMPORAL_RANGE"),operation:"TEMPORAL_RANGE"}},l=Object.values(i),u=(i.LIKE,i.ILIKE,[i.EQUALS,i.NOT_EQUALS,i.LESS_THAN,i.LESS_THAN_OR_EQUAL,i.GREATER_THAN,i.GREATER_THAN_OR_EQUAL]),c=new Set([i.IN,i.NOT_IN]),d=new Set([i.LATEST_PARTITION,i.TEMPORAL_RANGE]),_=[i.IS_NOT_NULL,i.IS_NULL,i.LATEST_PARTITION,i.IS_TRUE,i.IS_FALSE],E=/^(LONG|DOUBLE|FLOAT)?(SUM|AVG|MAX|MIN|COUNT)\([A-Z0-9_."]*\)$/i,m={time_range:(0,n.t)("Time range"),granularity_sqla:(0,n.t)("Time column"),time_grain_sqla:(0,n.t)("Time grain"),granularity:(0,n.t)("Time granularity")},p={CLEARABLE:"clearable",DEFAULT_VALUE:"defaultValue",MULTIPLE:"multiple",SEARCH_ALL_OPTIONS:"searchAllOptions",SORT_ASCENDING:"asc",SORT_METRIC:"metric"},T=1e3,h={time_range:"__time_range",granularity_sqla:"__time_col",time_grain_sqla:"__time_grain",granularity:"__granularity"},A=240,S=320,y=296,g=0},40219:(e,t,r)=>{r.d(t,{BR:()=>s,nv:()=>c,LW:()=>d});var n=r(57557),a=r.n(n),o=r(31069);const i=["url_params"],s=e=>a()(e,i),l=(e,t)=>{let r="api/v1/explore/form_data";return e&&(r=r.concat(`/${e}`)),t&&(r=r.concat(`?tab_id=${t}`)),r},u=(e,t,r,n)=>{const a={datasource_id:e,datasource_type:t,form_data:JSON.stringify(s(r))};return n&&(a.chart_id=n),a},c=(e,t,r,n,a)=>o.Z.post({endpoint:l(void 0,a),jsonPayload:u(e,t,r,n)}).then((e=>e.json.key)),d=(e,t,r,n,a,i)=>o.Z.put({endpoint:l(r,i),jsonPayload:u(e,t,n,a)}).then((e=>e.json.message))},42190:(e,t,r)=>{r.d(t,{ni:()=>n,l6:()=>s,s_:()=>u});var n,a=r(22102),o=r(67294);!function(e){e.LOADING="loading",e.COMPLETE="complete",e.ERROR="error"}(n||(n={}));const i={status:n.LOADING,result:null,error:null};function s(e,t){return(0,o.useMemo)((()=>{if(e.status!==n.COMPLETE)return e;try{return{...e,result:t(e.result)}}catch(e){return{status:n.ERROR,result:null,error:e}}}),[e,t])}const l=e=>e.result;function u(e){return s(function(e){const[t,r]=(0,o.useState)(i),s=(0,o.useRef)((()=>{}));return(0,o.useEffect)((()=>{r(i),s.current();let t=!1;return s.current=()=>{t=!0},(0,a.Z)({method:"GET",endpoint:e})({}).then((e=>{t||r({status:n.COMPLETE,result:e,error:null})})).catch((e=>{t||r({status:n.ERROR,result:null,error:e})})),()=>{t=!0}}),[e]),t}(e),l)}},60812:(e,t,r)=>{r.d(t,{D:()=>a});var n=r(67294);function a(e,t){const r=(0,n.useRef)(t);return(0,n.useEffect)((()=>{r.current=e}),[e]),r.current}},3741:(e,t,r)=>{r.d(t,{W9:()=>n,aD:()=>a,Ev:()=>o,Wl:()=>i,$b:()=>s,Iq:()=>l,TD:()=>u,Ep:()=>c,vH:()=>d,H3:()=>_,S:()=>E,oK:()=>m,PC:()=>p,Qg:()=>T,Ph:()=>h,FY:()=>A,Eh:()=>S,TA:()=>y,P$:()=>g,kV:()=>f,yw:()=>R,n2:()=>I,xE:()=>b,ZX:()=>v,TY:()=>N,Yd:()=>L});const n="load_chart",a="render_chart",o="hide_browser_tab",i="mount_dashboard",s="mount_explorer",l="select_dashboard_tab",u="force_refresh_chart",c="change_explore_controls",d="toggle_edit_dashboard",_="force_refresh_dashboard",E="periodic_render_dashboard",m="explore_dashboard_chart",p="export_csv_dashboard_chart",T="change_dashboard_filter",h="dataset_creation_empty_cancellation",A="dataset_creation_database_cancellation",S="dataset_creation_schema_cancellation",y="dataset_creation_table_cancellation",g="dataset_creation_success",f="spa_navigation",R="confirm_overwrite_dashboard_metadata",I="dashboard_download_as_image",b="chart_download_as_image",v="sqllab_warn_local_storage_usage",N=new Set([n,a,o]),L=(new Set([i,l,m,u,p,T,c,d,_,E,s,R,I,b]),{timeOriginOffset:0,markTimeOrigin(){this.timeOriginOffset=window.performance.now()},getTimestamp(){return Math.round(window.performance.now()-this.timeOriginOffset)}})},97381:(e,t,r)=>{r.r(t),r.d(t,{LOG_EVENT:()=>n,logEvent:()=>a});const n="LOG_EVENT";function a(e,t){return r=>r({type:n,payload:{eventName:e,eventData:t}})}},61337:(e,t,r)=>{var n;function a(e,t){try{const r=localStorage.getItem(e);return null===r?t:JSON.parse(r)}catch{return t}}function o(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{}}function i(e,t){return a(e,t)}function s(e,t){o(e,t)}r.d(t,{dR:()=>n,OH:()=>a,I_:()=>o,rV:()=>i,LS:()=>s}),function(e){e.filter_box_transition_snoozed_at="filter_box_transition_snoozed_at",e.db="db",e.chart_split_sizes="chart_split_sizes",e.controls_width="controls_width",e.datasource_width="datasource_width",e.is_datapanel_open="is_datapanel_open",e.homepage_chart_filter="homepage_chart_filter",e.homepage_dashboard_filter="homepage_dashboard_filter",e.homepage_collapse_state="homepage_collapse_state",e.homepage_activity_filter="homepage_activity_filter",e.datasetname_set_successful="datasetname_set_successful",e.sqllab__is_autocomplete_enabled="sqllab__is_autocomplete_enabled",e.explore__data_table_original_formatted_time_columns="explore__data_table_original_formatted_time_columns",e.dashboard__custom_filter_bar_widths="dashboard__custom_filter_bar_widths",e.dashboard__explore_context="dashboard__explore_context",e.common__resizable_sidebar_widths="common__resizable_sidebar_widths"}(n||(n={}))},9679:(e,t,r)=>{function n(e){const t=new Set;return JSON.stringify(e,((e,r)=>{if("object"==typeof r&&null!==r){if(t.has(r))try{return JSON.parse(JSON.stringify(r))}catch(e){return}t.add(r)}return r}))}r.d(t,{o:()=>n})}}]);
//# sourceMappingURL=8888.fdc76022af49052eedce.entry.js.map