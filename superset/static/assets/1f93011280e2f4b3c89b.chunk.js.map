{"version":3,"file":"1f93011280e2f4b3c89b.chunk.js","mappings":"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","sources":["webpack://superset/./node_modules/@deck.gl/core/dist/esm/debug/index.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/attribute/shader-attribute.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/attribute/data-column.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/range.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/attribute/gl-utils.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/transitions/gpu-interpolation-transition.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/transitions/gpu-spring-transition.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/array-utils.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-utils.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/constants.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/transitions/cpu-interpolation-transition.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/transitions/cpu-spring-transition.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/uniform-transition-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/texture.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lifecycle/prop-types.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lifecycle/create-props.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lifecycle/component-state.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lifecycle/component.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/layer-state.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/layer.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/count.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lifecycle/constants.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lifecycle/props.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/modules/picking/picking.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/picking/picking.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.glsl.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/modules/fp32/fp32.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/project/viewport-uniforms.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/project32/project32.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/transitions/transition.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/assert.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/flatten.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/iterable-utils.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/log.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/math-utils.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/memoize.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/shader.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/viewports/viewport.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/viewports/web-mercator-viewport.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/animation/timeline.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/resource/resource.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/resource/resource-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/index.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/misc/geometry.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/layer-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/deep-equal.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/view-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/positions.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/views/view.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/controllers/transition-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/transitions/transition-interpolator.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/controllers/controller.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/controllers/map-controller.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/controllers/view-state.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/views/map-view.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/effects/lighting/ambient-light.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/effects/lighting/directional-light.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/effect.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/passes/layers-pass.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/passes/pass.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/passes/shadow-pass.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/effect-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/passes/draw-layers-pass.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/passes/pick-layers-pass.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/deck-renderer.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/picking/query-object.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/picking/pick-info.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/deck-picker.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/tooltip.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/json-loader.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/init.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/query.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/request-animation-frame.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/lib/animation-loop.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/deck.js","webpack://superset/./node_modules/@deck.gl/react/dist/esm/utils/use-isomorphic-layout-effect.js","webpack://superset/./node_modules/@deck.gl/react/dist/esm/utils/inherits-from.js","webpack://superset/./node_modules/@deck.gl/react/dist/esm/utils/extract-jsx-layers.js","webpack://superset/./node_modules/@deck.gl/react/dist/esm/utils/evaluate-children.js","webpack://superset/./node_modules/@deck.gl/react/dist/esm/utils/extract-styles.js","webpack://superset/./node_modules/@deck.gl/react/dist/esm/deckgl.js","webpack://superset/./node_modules/@deck.gl/react/dist/esm/utils/position-children-under-views.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/assert.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/globals.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-utils/get-loadable-worker-url.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-utils/get-transfer-list.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-thread.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-job.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-pool.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-farm.js","webpack://superset/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-loader-utils/parse-with-worker.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/get-worker-url.js","webpack://superset/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/array-buffer-utils.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-array-buffer-iterator.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-stream-iterator.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-data.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-iterator.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-string-iterator.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-blob-iterator.js","webpack://superset/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/iterators/async-iteration.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/api/select-loader.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/api/parse.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loader-context.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/validate-worker-version.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/version.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/api/load.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/api/register-loaders.js","webpack://superset/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js","webpack://superset/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/file-aliases.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loggers.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-defaults.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-utils.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/utils/mime-type-utils.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/utils/resource-utils.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/utils/response-utils.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/utils/assert.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/utils/globals.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/category-api/image-type.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/category-api/parsed-image-api.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/parsers/svg-utils.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/category-api/binary-image-api.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/image-loader.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/utils/version.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","webpack://superset/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/geometry/geometry.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/utils/array-utils-flat.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array-object.js","webpack://superset/./node_modules/probe.gl/dist/esm/env/get-browser.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/utils/format-value.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/debug/debug-vertex-array.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/debug/debug-uniforms.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/debug/debug-program-configuration.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/lib/model-utils.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/lib/model.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/filters/prop-types.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/shader-module.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/resolve-modules.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/utils/webgl-info.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/utils/is-old-ie.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/transpile-shader.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/assemble-shaders.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/platform-defines.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/lib/program-manager.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/utils/shader-utils.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/transform/buffer-transform.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-version.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/modules/transform/transform.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/transform/transform-shader-utils.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/transform/texture-transform.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/transform/transform.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/utils/log.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/utils/assert.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/utils/webgl-checks.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-vertex-array-object.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/polyfill/get-parameter-polyfill.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-table.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-context.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/state-tracker/webgl-parameter-tables.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/utils/utils.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/state-tracker/track-context-state.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/state-tracker/unified-parameter-api.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/utils/device-pixels.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/context/context.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/constants.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/inject-shader.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/modules/module-injectors.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/utils/assert.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/accessor.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/clear.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/format-utils.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/copy-and-blit.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/uniforms.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-name.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/format-glsl-error.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/shader.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-type-name.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/program-configuration.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/program.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer-formats.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/utils/load-file.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/texture-formats.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/texture.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/transform-feedback.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/features/features.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/features/webgl-features-table.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/init.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/utils/check-props.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/utils/stub-methods.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/attribute-utils.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/constants-to-keys.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/texture-cube.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/texture-3d.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/texture-utils.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/typed-array-utils.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/classes/matrix4.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/classes/base/vector.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/classes/vector3.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/lib/assert.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/lib/common.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/lib/validators.js","webpack://superset/./node_modules/@probe.gl/stats/dist/esm/utils/hi-res-timestamp.js","webpack://superset/./node_modules/@probe.gl/stats/dist/esm/lib/stat.js","webpack://superset/./node_modules/@probe.gl/stats/dist/esm/lib/stats.js","webpack://superset/./node_modules/probe.gl/dist/es5/env/get-browser.js","webpack://superset/./node_modules/probe.gl/dist/es5/env/globals.js","webpack://superset/./node_modules/probe.gl/dist/es5/env/index.js","webpack://superset/./node_modules/probe.gl/dist/es5/env/is-browser.js","webpack://superset/./node_modules/probe.gl/dist/es5/env/is-electron.js","webpack://superset/./node_modules/probe.gl/dist/esm/env/globals.js","webpack://superset/./node_modules/probe.gl/dist/esm/env/is-browser.js","webpack://superset/./node_modules/probe.gl/dist/esm/env/is-electron.js","webpack://superset/./node_modules/probe.gl/dist/esm/utils/globals.js","webpack://superset/./node_modules/probe.gl/dist/esm/utils/local-storage.js","webpack://superset/./node_modules/probe.gl/dist/esm/utils/formatters.js","webpack://superset/./node_modules/probe.gl/dist/esm/utils/color.js","webpack://superset/./node_modules/probe.gl/dist/esm/utils/assert.js","webpack://superset/./node_modules/probe.gl/dist/esm/utils/hi-res-timestamp.js","webpack://superset/./node_modules/probe.gl/dist/esm/lib/log.js","webpack://superset/./node_modules/probe.gl/dist/esm/utils/autobind.js","webpack://superset/./node_modules/vm-browserify/index.js","webpack://superset/./node_modules/underscore/modules/_setup.js","webpack://superset/./node_modules/underscore/modules/restArguments.js","webpack://superset/./node_modules/underscore/modules/isObject.js","webpack://superset/./node_modules/underscore/modules/isNull.js","webpack://superset/./node_modules/underscore/modules/isUndefined.js","webpack://superset/./node_modules/underscore/modules/isBoolean.js","webpack://superset/./node_modules/underscore/modules/isElement.js","webpack://superset/./node_modules/underscore/modules/_tagTester.js","webpack://superset/./node_modules/underscore/modules/isString.js","webpack://superset/./node_modules/underscore/modules/isNumber.js","webpack://superset/./node_modules/underscore/modules/isDate.js","webpack://superset/./node_modules/underscore/modules/isRegExp.js","webpack://superset/./node_modules/underscore/modules/isError.js","webpack://superset/./node_modules/underscore/modules/isSymbol.js","webpack://superset/./node_modules/underscore/modules/isArrayBuffer.js","webpack://superset/./node_modules/underscore/modules/isFunction.js","webpack://superset/./node_modules/underscore/modules/_hasObjectTag.js","webpack://superset/./node_modules/underscore/modules/_stringTagBug.js","webpack://superset/./node_modules/underscore/modules/isDataView.js","webpack://superset/./node_modules/underscore/modules/isArray.js","webpack://superset/./node_modules/underscore/modules/_has.js","webpack://superset/./node_modules/underscore/modules/isArguments.js","webpack://superset/./node_modules/underscore/modules/isFinite.js","webpack://superset/./node_modules/underscore/modules/isNaN.js","webpack://superset/./node_modules/underscore/modules/constant.js","webpack://superset/./node_modules/underscore/modules/_createSizePropertyCheck.js","webpack://superset/./node_modules/underscore/modules/_shallowProperty.js","webpack://superset/./node_modules/underscore/modules/_getByteLength.js","webpack://superset/./node_modules/underscore/modules/_isBufferLike.js","webpack://superset/./node_modules/underscore/modules/isTypedArray.js","webpack://superset/./node_modules/underscore/modules/_getLength.js","webpack://superset/./node_modules/underscore/modules/_collectNonEnumProps.js","webpack://superset/./node_modules/underscore/modules/keys.js","webpack://superset/./node_modules/underscore/modules/isEmpty.js","webpack://superset/./node_modules/underscore/modules/isMatch.js","webpack://superset/./node_modules/underscore/modules/underscore.js","webpack://superset/./node_modules/underscore/modules/_toBufferView.js","webpack://superset/./node_modules/underscore/modules/isEqual.js","webpack://superset/./node_modules/underscore/modules/allKeys.js","webpack://superset/./node_modules/underscore/modules/_methodFingerprint.js","webpack://superset/./node_modules/underscore/modules/isMap.js","webpack://superset/./node_modules/underscore/modules/isWeakMap.js","webpack://superset/./node_modules/underscore/modules/isSet.js","webpack://superset/./node_modules/underscore/modules/isWeakSet.js","webpack://superset/./node_modules/underscore/modules/values.js","webpack://superset/./node_modules/underscore/modules/pairs.js","webpack://superset/./node_modules/underscore/modules/invert.js","webpack://superset/./node_modules/underscore/modules/functions.js","webpack://superset/./node_modules/underscore/modules/_createAssigner.js","webpack://superset/./node_modules/underscore/modules/extend.js","webpack://superset/./node_modules/underscore/modules/extendOwn.js","webpack://superset/./node_modules/underscore/modules/defaults.js","webpack://superset/./node_modules/underscore/modules/_baseCreate.js","webpack://superset/./node_modules/underscore/modules/create.js","webpack://superset/./node_modules/underscore/modules/clone.js","webpack://superset/./node_modules/underscore/modules/tap.js","webpack://superset/./node_modules/underscore/modules/toPath.js","webpack://superset/./node_modules/underscore/modules/_toPath.js","webpack://superset/./node_modules/underscore/modules/_deepGet.js","webpack://superset/./node_modules/underscore/modules/get.js","webpack://superset/./node_modules/underscore/modules/has.js","webpack://superset/./node_modules/underscore/modules/identity.js","webpack://superset/./node_modules/underscore/modules/matcher.js","webpack://superset/./node_modules/underscore/modules/property.js","webpack://superset/./node_modules/underscore/modules/_optimizeCb.js","webpack://superset/./node_modules/underscore/modules/_baseIteratee.js","webpack://superset/./node_modules/underscore/modules/iteratee.js","webpack://superset/./node_modules/underscore/modules/_cb.js","webpack://superset/./node_modules/underscore/modules/mapObject.js","webpack://superset/./node_modules/underscore/modules/noop.js","webpack://superset/./node_modules/underscore/modules/propertyOf.js","webpack://superset/./node_modules/underscore/modules/times.js","webpack://superset/./node_modules/underscore/modules/random.js","webpack://superset/./node_modules/underscore/modules/now.js","webpack://superset/./node_modules/underscore/modules/_createEscaper.js","webpack://superset/./node_modules/underscore/modules/_escapeMap.js","webpack://superset/./node_modules/underscore/modules/escape.js","webpack://superset/./node_modules/underscore/modules/unescape.js","webpack://superset/./node_modules/underscore/modules/_unescapeMap.js","webpack://superset/./node_modules/underscore/modules/templateSettings.js","webpack://superset/./node_modules/underscore/modules/template.js","webpack://superset/./node_modules/underscore/modules/result.js","webpack://superset/./node_modules/underscore/modules/uniqueId.js","webpack://superset/./node_modules/underscore/modules/chain.js","webpack://superset/./node_modules/underscore/modules/_executeBound.js","webpack://superset/./node_modules/underscore/modules/partial.js","webpack://superset/./node_modules/underscore/modules/bind.js","webpack://superset/./node_modules/underscore/modules/_isArrayLike.js","webpack://superset/./node_modules/underscore/modules/_flatten.js","webpack://superset/./node_modules/underscore/modules/bindAll.js","webpack://superset/./node_modules/underscore/modules/memoize.js","webpack://superset/./node_modules/underscore/modules/delay.js","webpack://superset/./node_modules/underscore/modules/defer.js","webpack://superset/./node_modules/underscore/modules/throttle.js","webpack://superset/./node_modules/underscore/modules/debounce.js","webpack://superset/./node_modules/underscore/modules/wrap.js","webpack://superset/./node_modules/underscore/modules/negate.js","webpack://superset/./node_modules/underscore/modules/compose.js","webpack://superset/./node_modules/underscore/modules/after.js","webpack://superset/./node_modules/underscore/modules/before.js","webpack://superset/./node_modules/underscore/modules/once.js","webpack://superset/./node_modules/underscore/modules/findKey.js","webpack://superset/./node_modules/underscore/modules/_createPredicateIndexFinder.js","webpack://superset/./node_modules/underscore/modules/findIndex.js","webpack://superset/./node_modules/underscore/modules/findLastIndex.js","webpack://superset/./node_modules/underscore/modules/sortedIndex.js","webpack://superset/./node_modules/underscore/modules/_createIndexFinder.js","webpack://superset/./node_modules/underscore/modules/indexOf.js","webpack://superset/./node_modules/underscore/modules/lastIndexOf.js","webpack://superset/./node_modules/underscore/modules/find.js","webpack://superset/./node_modules/underscore/modules/findWhere.js","webpack://superset/./node_modules/underscore/modules/each.js","webpack://superset/./node_modules/underscore/modules/map.js","webpack://superset/./node_modules/underscore/modules/_createReduce.js","webpack://superset/./node_modules/underscore/modules/reduce.js","webpack://superset/./node_modules/underscore/modules/reduceRight.js","webpack://superset/./node_modules/underscore/modules/filter.js","webpack://superset/./node_modules/underscore/modules/reject.js","webpack://superset/./node_modules/underscore/modules/every.js","webpack://superset/./node_modules/underscore/modules/some.js","webpack://superset/./node_modules/underscore/modules/contains.js","webpack://superset/./node_modules/underscore/modules/invoke.js","webpack://superset/./node_modules/underscore/modules/pluck.js","webpack://superset/./node_modules/underscore/modules/where.js","webpack://superset/./node_modules/underscore/modules/max.js","webpack://superset/./node_modules/underscore/modules/min.js","webpack://superset/./node_modules/underscore/modules/toArray.js","webpack://superset/./node_modules/underscore/modules/sample.js","webpack://superset/./node_modules/underscore/modules/shuffle.js","webpack://superset/./node_modules/underscore/modules/sortBy.js","webpack://superset/./node_modules/underscore/modules/_group.js","webpack://superset/./node_modules/underscore/modules/groupBy.js","webpack://superset/./node_modules/underscore/modules/indexBy.js","webpack://superset/./node_modules/underscore/modules/countBy.js","webpack://superset/./node_modules/underscore/modules/partition.js","webpack://superset/./node_modules/underscore/modules/size.js","webpack://superset/./node_modules/underscore/modules/_keyInObj.js","webpack://superset/./node_modules/underscore/modules/pick.js","webpack://superset/./node_modules/underscore/modules/omit.js","webpack://superset/./node_modules/underscore/modules/initial.js","webpack://superset/./node_modules/underscore/modules/first.js","webpack://superset/./node_modules/underscore/modules/rest.js","webpack://superset/./node_modules/underscore/modules/last.js","webpack://superset/./node_modules/underscore/modules/compact.js","webpack://superset/./node_modules/underscore/modules/flatten.js","webpack://superset/./node_modules/underscore/modules/difference.js","webpack://superset/./node_modules/underscore/modules/without.js","webpack://superset/./node_modules/underscore/modules/uniq.js","webpack://superset/./node_modules/underscore/modules/union.js","webpack://superset/./node_modules/underscore/modules/intersection.js","webpack://superset/./node_modules/underscore/modules/unzip.js","webpack://superset/./node_modules/underscore/modules/zip.js","webpack://superset/./node_modules/underscore/modules/object.js","webpack://superset/./node_modules/underscore/modules/range.js","webpack://superset/./node_modules/underscore/modules/chunk.js","webpack://superset/./node_modules/underscore/modules/_chainResult.js","webpack://superset/./node_modules/underscore/modules/mixin.js","webpack://superset/./node_modules/underscore/modules/underscore-array-methods.js","webpack://superset/./node_modules/underscore/modules/index-default.js"],"sourcesContent":["import deckLog from '../utils/log';\nimport { getLoggers } from './loggers';\nlet loggers = {};\n\nif (process.env.NODE_ENV !== 'production') {\n  loggers = getLoggers(deckLog);\n}\n\nexport function register(handlers) {\n  loggers = handlers;\n}\nexport default function debug(eventType) {\n  if (deckLog.level > 0 && loggers[eventType]) {\n    loggers[eventType].call(...arguments);\n  }\n}\n//# sourceMappingURL=index.js.map","export default class ShaderAttribute {\n  constructor(dataColumn, opts) {\n    this.opts = opts;\n    this.source = dataColumn;\n  }\n\n  get value() {\n    return this.source.value;\n  }\n\n  getValue() {\n    const buffer = this.source.getBuffer();\n    const accessor = this.getAccessor();\n\n    if (buffer) {\n      return [buffer, accessor];\n    }\n\n    const {\n      value\n    } = this.source;\n    const {\n      size\n    } = accessor;\n    let constantValue = value;\n\n    if (value && value.length !== size) {\n      constantValue = new Float32Array(size);\n      const index = accessor.elementOffset || 0;\n\n      for (let i = 0; i < size; ++i) {\n        constantValue[i] = value[index + i];\n      }\n    }\n\n    return constantValue;\n  }\n\n  getAccessor() {\n    return { ...this.source.getAccessor(),\n      ...this.opts\n    };\n  }\n\n}\n//# sourceMappingURL=shader-attribute.js.map","import { hasFeature, FEATURES, Buffer } from '@luma.gl/core';\nimport ShaderAttribute from './shader-attribute';\nimport { glArrayFromType } from './gl-utils';\nimport typedArrayManager from '../../utils/typed-array-manager';\nimport { toDoublePrecisionArray } from '../../utils/math-utils';\nimport log from '../../utils/log';\n\nfunction getStride(accessor) {\n  return accessor.stride || accessor.size * accessor.bytesPerElement;\n}\n\nfunction resolveShaderAttribute(baseAccessor, shaderAttributeOptions) {\n  if (shaderAttributeOptions.offset) {\n    log.removed('shaderAttribute.offset', 'vertexOffset, elementOffset')();\n  }\n\n  const stride = getStride(baseAccessor);\n  const vertexOffset = 'vertexOffset' in shaderAttributeOptions ? shaderAttributeOptions.vertexOffset : baseAccessor.vertexOffset || 0;\n  const elementOffset = shaderAttributeOptions.elementOffset || 0;\n  const offset = vertexOffset * stride + elementOffset * baseAccessor.bytesPerElement + (baseAccessor.offset || 0);\n  return { ...shaderAttributeOptions,\n    offset,\n    stride\n  };\n}\n\nfunction resolveDoublePrecisionShaderAttributes(baseAccessor, shaderAttributeOptions) {\n  const resolvedOptions = resolveShaderAttribute(baseAccessor, shaderAttributeOptions);\n  return {\n    high: resolvedOptions,\n    low: { ...resolvedOptions,\n      offset: resolvedOptions.offset + baseAccessor.size * 4\n    }\n  };\n}\n\nexport default class DataColumn {\n  constructor(gl, opts) {\n    this.gl = gl;\n    this.id = opts.id;\n    this.size = opts.size;\n    const logicalType = opts.logicalType || opts.type;\n    const doublePrecision = logicalType === 5130;\n    let {\n      defaultValue\n    } = opts;\n    defaultValue = Number.isFinite(defaultValue) ? [defaultValue] : defaultValue || new Array(this.size).fill(0);\n    opts.defaultValue = defaultValue;\n    let bufferType = logicalType;\n\n    if (doublePrecision) {\n      bufferType = 5126;\n    } else if (!bufferType && opts.isIndexed) {\n      bufferType = gl && hasFeature(gl, FEATURES.ELEMENT_INDEX_UINT32) ? 5125 : 5123;\n    } else if (!bufferType) {\n      bufferType = 5126;\n    }\n\n    opts.logicalType = logicalType;\n    opts.type = bufferType;\n    let defaultType = glArrayFromType(logicalType || bufferType || 5126);\n    this.shaderAttributes = {};\n    this.doublePrecision = doublePrecision;\n\n    if (doublePrecision && opts.fp64 === false) {\n      defaultType = Float32Array;\n    }\n\n    opts.bytesPerElement = defaultType.BYTES_PER_ELEMENT;\n    this.defaultType = defaultType;\n    this.value = null;\n    this.settings = opts;\n    this.state = {\n      externalBuffer: null,\n      bufferAccessor: opts,\n      allocatedValue: null,\n      constant: false\n    };\n    this._buffer = null;\n    this.setData(opts);\n  }\n\n  get buffer() {\n    if (!this._buffer) {\n      const {\n        isIndexed,\n        type\n      } = this.settings;\n      this._buffer = new Buffer(this.gl, {\n        id: this.id,\n        target: isIndexed ? 34963 : 34962,\n        accessor: {\n          type\n        }\n      });\n    }\n\n    return this._buffer;\n  }\n\n  get byteOffset() {\n    const accessor = this.getAccessor();\n\n    if (accessor.vertexOffset) {\n      return accessor.vertexOffset * getStride(accessor);\n    }\n\n    return 0;\n  }\n\n  delete() {\n    if (this._buffer) {\n      this._buffer.delete();\n\n      this._buffer = null;\n    }\n\n    typedArrayManager.release(this.state.allocatedValue);\n  }\n\n  getShaderAttributes(id, options) {\n    if (this.doublePrecision) {\n      const shaderAttributes = {};\n      const isBuffer64Bit = this.value instanceof Float64Array;\n      const doubleShaderAttributeDefs = resolveDoublePrecisionShaderAttributes(this.getAccessor(), options || {});\n      shaderAttributes[id] = new ShaderAttribute(this, doubleShaderAttributeDefs.high);\n      shaderAttributes[\"\".concat(id, \"64Low\")] = isBuffer64Bit ? new ShaderAttribute(this, doubleShaderAttributeDefs.low) : new Float32Array(this.size);\n      return shaderAttributes;\n    }\n\n    if (options) {\n      const shaderAttributeDef = resolveShaderAttribute(this.getAccessor(), options);\n      return {\n        [id]: new ShaderAttribute(this, shaderAttributeDef)\n      };\n    }\n\n    return {\n      [id]: this\n    };\n  }\n\n  getBuffer() {\n    if (this.state.constant) {\n      return null;\n    }\n\n    return this.state.externalBuffer || this._buffer;\n  }\n\n  getValue() {\n    if (this.state.constant) {\n      return this.value;\n    }\n\n    return [this.getBuffer(), this.getAccessor()];\n  }\n\n  getAccessor() {\n    return this.state.bufferAccessor;\n  }\n\n  setData(opts) {\n    const {\n      state\n    } = this;\n\n    if (ArrayBuffer.isView(opts)) {\n      opts = {\n        value: opts\n      };\n    } else if (opts instanceof Buffer) {\n      opts = {\n        buffer: opts\n      };\n    }\n\n    const accessor = { ...this.settings,\n      ...opts\n    };\n    state.bufferAccessor = accessor;\n\n    if (opts.constant) {\n      let value = opts.value;\n      value = this._normalizeValue(value, [], 0);\n\n      if (this.settings.normalized) {\n        value = this._normalizeConstant(value);\n      }\n\n      const hasChanged = !state.constant || !this._areValuesEqual(value, this.value);\n\n      if (!hasChanged) {\n        return false;\n      }\n\n      state.externalBuffer = null;\n      state.constant = true;\n      this.value = value;\n    } else if (opts.buffer) {\n      const buffer = opts.buffer;\n      state.externalBuffer = buffer;\n      state.constant = false;\n      this.value = opts.value;\n      const isBuffer64Bit = opts.value instanceof Float64Array;\n      accessor.type = opts.type || buffer.accessor.type;\n      accessor.bytesPerElement = buffer.accessor.BYTES_PER_ELEMENT * (isBuffer64Bit ? 2 : 1);\n      accessor.stride = getStride(accessor);\n    } else if (opts.value) {\n      this._checkExternalBuffer(opts);\n\n      let value = opts.value;\n      state.externalBuffer = null;\n      state.constant = false;\n      this.value = value;\n      accessor.bytesPerElement = value.BYTES_PER_ELEMENT;\n      accessor.stride = getStride(accessor);\n      const {\n        buffer,\n        byteOffset\n      } = this;\n\n      if (this.doublePrecision && value instanceof Float64Array) {\n        value = toDoublePrecisionArray(value, accessor);\n      }\n\n      const requiredBufferSize = value.byteLength + byteOffset + accessor.stride * 2;\n\n      if (buffer.byteLength < requiredBufferSize) {\n        buffer.reallocate(requiredBufferSize);\n      }\n\n      buffer.setAccessor(null);\n      buffer.subData({\n        data: value,\n        offset: byteOffset\n      });\n      accessor.type = opts.type || buffer.accessor.type;\n    }\n\n    return true;\n  }\n\n  updateSubBuffer(opts = {}) {\n    const {\n      value\n    } = this;\n    const {\n      startOffset = 0,\n      endOffset\n    } = opts;\n    this.buffer.subData({\n      data: this.doublePrecision && value instanceof Float64Array ? toDoublePrecisionArray(value, {\n        size: this.size,\n        startIndex: startOffset,\n        endIndex: endOffset\n      }) : value.subarray(startOffset, endOffset),\n      offset: startOffset * value.BYTES_PER_ELEMENT + this.byteOffset\n    });\n  }\n\n  allocate({\n    numInstances,\n    copy = false\n  }) {\n    const {\n      state\n    } = this;\n    const oldValue = state.allocatedValue;\n    const value = typedArrayManager.allocate(oldValue, numInstances + 1, {\n      size: this.size,\n      type: this.defaultType,\n      copy\n    });\n    this.value = value;\n    const {\n      buffer,\n      byteOffset\n    } = this;\n\n    if (buffer.byteLength < value.byteLength + byteOffset) {\n      buffer.reallocate(value.byteLength + byteOffset);\n\n      if (copy && oldValue) {\n        buffer.subData({\n          data: oldValue instanceof Float64Array ? toDoublePrecisionArray(oldValue, this) : oldValue,\n          offset: byteOffset\n        });\n      }\n    }\n\n    state.allocatedValue = value;\n    state.constant = false;\n    state.externalBuffer = null;\n    state.bufferAccessor = this.settings;\n    return true;\n  }\n\n  _checkExternalBuffer(opts) {\n    const {\n      value\n    } = opts;\n\n    if (!opts.constant && value) {\n      const ArrayType = this.defaultType;\n      let illegalArrayType = false;\n\n      if (this.doublePrecision) {\n        illegalArrayType = value.BYTES_PER_ELEMENT < 4;\n      }\n\n      if (illegalArrayType) {\n        throw new Error(\"Attribute \".concat(this.id, \" does not support \").concat(value.constructor.name));\n      }\n\n      if (!(value instanceof ArrayType) && this.settings.normalized && !('normalized' in opts)) {\n        log.warn(\"Attribute \".concat(this.id, \" is normalized\"))();\n      }\n    }\n  }\n\n  _normalizeConstant(value) {\n    switch (this.settings.type) {\n      case 5120:\n        return new Float32Array(value).map(x => (x + 128) / 255 * 2 - 1);\n\n      case 5122:\n        return new Float32Array(value).map(x => (x + 32768) / 65535 * 2 - 1);\n\n      case 5121:\n        return new Float32Array(value).map(x => x / 255);\n\n      case 5123:\n        return new Float32Array(value).map(x => x / 65535);\n\n      default:\n        return value;\n    }\n  }\n\n  _normalizeValue(value, out, start) {\n    const {\n      defaultValue,\n      size\n    } = this.settings;\n\n    if (Number.isFinite(value)) {\n      out[start] = value;\n      return out;\n    }\n\n    if (!value) {\n      out[start] = defaultValue[0];\n      return out;\n    }\n\n    switch (size) {\n      case 4:\n        out[start + 3] = Number.isFinite(value[3]) ? value[3] : defaultValue[3];\n\n      case 3:\n        out[start + 2] = Number.isFinite(value[2]) ? value[2] : defaultValue[2];\n\n      case 2:\n        out[start + 1] = Number.isFinite(value[1]) ? value[1] : defaultValue[1];\n\n      case 1:\n        out[start + 0] = Number.isFinite(value[0]) ? value[0] : defaultValue[0];\n        break;\n\n      default:\n        let i = size;\n\n        while (--i >= 0) {\n          out[start + i] = Number.isFinite(value[i]) ? value[i] : defaultValue[i];\n        }\n\n    }\n\n    return out;\n  }\n\n  _areValuesEqual(value1, value2) {\n    if (!value1 || !value2) {\n      return false;\n    }\n\n    const {\n      size\n    } = this;\n\n    for (let i = 0; i < size; i++) {\n      if (value1[i] !== value2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n}\n//# sourceMappingURL=data-column.js.map","export const EMPTY = [];\nexport const FULL = [[0, Infinity]];\nexport function add(rangeList, range) {\n  if (rangeList === FULL) {\n    return rangeList;\n  }\n\n  if (range[0] < 0) {\n    range[0] = 0;\n  }\n\n  if (range[0] >= range[1]) {\n    return rangeList;\n  }\n\n  const newRangeList = [];\n  const len = rangeList.length;\n  let insertPosition = 0;\n\n  for (let i = 0; i < len; i++) {\n    const range0 = rangeList[i];\n\n    if (range0[1] < range[0]) {\n      newRangeList.push(range0);\n      insertPosition = i + 1;\n    } else if (range0[0] > range[1]) {\n      newRangeList.push(range0);\n    } else {\n      range = [Math.min(range0[0], range[0]), Math.max(range0[1], range[1])];\n    }\n  }\n\n  newRangeList.splice(insertPosition, 0, range);\n  return newRangeList;\n}\n//# sourceMappingURL=range.js.map","import DataColumn from './data-column';\nimport assert from '../../utils/assert';\nimport { createIterable, getAccessorFromBuffer } from '../../utils/iterable-utils';\nimport { fillArray } from '../../utils/flatten';\nimport * as range from '../../utils/range';\nimport { normalizeTransitionSettings } from './attribute-transition-utils';\nexport default class Attribute extends DataColumn {\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    const {\n      transition = false,\n      noAlloc = false,\n      update = null,\n      accessor = null,\n      transform = null,\n      startIndices = null\n    } = opts;\n    Object.assign(this.settings, {\n      transition,\n      noAlloc,\n      update: update || accessor && this._autoUpdater,\n      accessor,\n      transform\n    });\n    Object.assign(this.state, {\n      lastExternalBuffer: null,\n      binaryValue: null,\n      binaryAccessor: null,\n      needsUpdate: true,\n      needsRedraw: false,\n      updateRanges: range.FULL,\n      startIndices\n    });\n    Object.seal(this.settings);\n    Object.seal(this.state);\n\n    this._validateAttributeUpdaters();\n  }\n\n  get startIndices() {\n    return this.state.startIndices;\n  }\n\n  set startIndices(layout) {\n    this.state.startIndices = layout;\n  }\n\n  needsUpdate() {\n    return this.state.needsUpdate;\n  }\n\n  needsRedraw({\n    clearChangedFlags = false\n  } = {}) {\n    const needsRedraw = this.state.needsRedraw;\n    this.state.needsRedraw = needsRedraw && !clearChangedFlags;\n    return needsRedraw;\n  }\n\n  getUpdateTriggers() {\n    const {\n      accessor\n    } = this.settings;\n    return [this.id].concat(typeof accessor !== 'function' && accessor || []);\n  }\n\n  supportsTransition() {\n    return Boolean(this.settings.transition);\n  }\n\n  getTransitionSetting(opts) {\n    if (!opts || !this.supportsTransition()) {\n      return null;\n    }\n\n    const {\n      accessor\n    } = this.settings;\n    const layerSettings = this.settings.transition;\n    const userSettings = Array.isArray(accessor) ? opts[accessor.find(a => opts[a])] : opts[accessor];\n    return normalizeTransitionSettings(userSettings, layerSettings);\n  }\n\n  setNeedsUpdate(reason = this.id, dataRange) {\n    this.state.needsUpdate = this.state.needsUpdate || reason;\n    this.setNeedsRedraw(reason);\n\n    if (dataRange) {\n      const {\n        startRow = 0,\n        endRow = Infinity\n      } = dataRange;\n      this.state.updateRanges = range.add(this.state.updateRanges, [startRow, endRow]);\n    } else {\n      this.state.updateRanges = range.FULL;\n    }\n  }\n\n  clearNeedsUpdate() {\n    this.state.needsUpdate = false;\n    this.state.updateRanges = range.EMPTY;\n  }\n\n  setNeedsRedraw(reason = this.id) {\n    this.state.needsRedraw = this.state.needsRedraw || reason;\n  }\n\n  update(opts) {\n    this.setData(opts);\n  }\n\n  allocate(numInstances) {\n    const {\n      state,\n      settings\n    } = this;\n\n    if (settings.noAlloc) {\n      return false;\n    }\n\n    if (settings.update) {\n      super.allocate({\n        numInstances,\n        copy: state.updateRanges !== range.FULL\n      });\n      return true;\n    }\n\n    return false;\n  }\n\n  updateBuffer({\n    numInstances,\n    data,\n    props,\n    context\n  }) {\n    if (!this.needsUpdate()) {\n      return false;\n    }\n\n    const {\n      state: {\n        updateRanges\n      },\n      settings: {\n        update,\n        noAlloc\n      }\n    } = this;\n    let updated = true;\n\n    if (update) {\n      for (const [startRow, endRow] of updateRanges) {\n        update.call(context, this, {\n          data,\n          startRow,\n          endRow,\n          props,\n          numInstances\n        });\n      }\n\n      if (!this.value) {} else if (this.constant || this.buffer.byteLength < this.value.byteLength + this.byteOffset) {\n        this.setData({\n          value: this.value,\n          constant: this.constant\n        });\n      } else {\n        for (const [startRow, endRow] of updateRanges) {\n          const startOffset = Number.isFinite(startRow) ? this.getVertexOffset(startRow) : 0;\n          const endOffset = Number.isFinite(endRow) ? this.getVertexOffset(endRow) : noAlloc || !Number.isFinite(numInstances) ? this.value.length : numInstances * this.size;\n          super.updateSubBuffer({\n            startOffset,\n            endOffset\n          });\n        }\n      }\n\n      this._checkAttributeArray();\n    } else {\n      updated = false;\n    }\n\n    this.clearNeedsUpdate();\n    this.setNeedsRedraw();\n    return updated;\n  }\n\n  setConstantValue(value) {\n    if (value === undefined || typeof value === 'function') {\n      return false;\n    }\n\n    const hasChanged = this.setData({\n      constant: true,\n      value\n    });\n\n    if (hasChanged) {\n      this.setNeedsRedraw();\n    }\n\n    this.clearNeedsUpdate();\n    return true;\n  }\n\n  setExternalBuffer(buffer) {\n    const {\n      state\n    } = this;\n\n    if (!buffer) {\n      state.lastExternalBuffer = null;\n      return false;\n    }\n\n    this.clearNeedsUpdate();\n\n    if (state.lastExternalBuffer === buffer) {\n      return true;\n    }\n\n    state.lastExternalBuffer = buffer;\n    this.setNeedsRedraw();\n    this.setData(buffer);\n    return true;\n  }\n\n  setBinaryValue(buffer, startIndices = null) {\n    const {\n      state,\n      settings\n    } = this;\n\n    if (!buffer) {\n      state.binaryValue = null;\n      state.binaryAccessor = null;\n      return false;\n    }\n\n    if (settings.noAlloc) {\n      return false;\n    }\n\n    if (state.binaryValue === buffer) {\n      this.clearNeedsUpdate();\n      return true;\n    }\n\n    state.binaryValue = buffer;\n    this.setNeedsRedraw();\n\n    if (ArrayBuffer.isView(buffer)) {\n      buffer = {\n        value: buffer\n      };\n    }\n\n    const needsUpdate = settings.transform || startIndices !== this.startIndices;\n\n    if (needsUpdate) {\n      assert(ArrayBuffer.isView(buffer.value), \"invalid \".concat(settings.accessor));\n      const needsNormalize = buffer.size && buffer.size !== this.size;\n      state.binaryAccessor = getAccessorFromBuffer(buffer.value, {\n        size: buffer.size || this.size,\n        stride: buffer.stride,\n        offset: buffer.offset,\n        startIndices,\n        nested: needsNormalize\n      });\n      return false;\n    }\n\n    this.clearNeedsUpdate();\n    this.setData(buffer);\n    return true;\n  }\n\n  getVertexOffset(row) {\n    const {\n      startIndices\n    } = this;\n    const vertexIndex = startIndices ? startIndices[row] : row;\n    return vertexIndex * this.size;\n  }\n\n  getShaderAttributes() {\n    const shaderAttributeDefs = this.settings.shaderAttributes || {\n      [this.id]: null\n    };\n    const shaderAttributes = {};\n\n    for (const shaderAttributeName in shaderAttributeDefs) {\n      Object.assign(shaderAttributes, super.getShaderAttributes(shaderAttributeName, shaderAttributeDefs[shaderAttributeName]));\n    }\n\n    return shaderAttributes;\n  }\n\n  _autoUpdater(attribute, {\n    data,\n    startRow,\n    endRow,\n    props,\n    numInstances\n  }) {\n    if (attribute.constant) {\n      return;\n    }\n\n    const {\n      settings,\n      state,\n      value,\n      size,\n      startIndices\n    } = attribute;\n    const {\n      accessor,\n      transform\n    } = settings;\n    const accessorFunc = state.binaryAccessor || (typeof accessor === 'function' ? accessor : props[accessor]);\n    assert(typeof accessorFunc === 'function', \"accessor \\\"\".concat(accessor, \"\\\" is not a function\"));\n    let i = attribute.getVertexOffset(startRow);\n    const {\n      iterable,\n      objectInfo\n    } = createIterable(data, startRow, endRow);\n\n    for (const object of iterable) {\n      objectInfo.index++;\n      let objectValue = accessorFunc(object, objectInfo);\n\n      if (transform) {\n        objectValue = transform.call(this, objectValue);\n      }\n\n      if (startIndices) {\n        const numVertices = (objectInfo.index < startIndices.length - 1 ? startIndices[objectInfo.index + 1] : numInstances) - startIndices[objectInfo.index];\n\n        if (objectValue && Array.isArray(objectValue[0])) {\n          let startIndex = i;\n\n          for (const item of objectValue) {\n            attribute._normalizeValue(item, value, startIndex);\n\n            startIndex += size;\n          }\n        } else if (objectValue && objectValue.length > size) {\n          value.set(objectValue, i);\n        } else {\n          attribute._normalizeValue(objectValue, objectInfo.target, 0);\n\n          fillArray({\n            target: value,\n            source: objectInfo.target,\n            start: i,\n            count: numVertices\n          });\n        }\n\n        i += numVertices * size;\n      } else {\n        attribute._normalizeValue(objectValue, value, i);\n\n        i += size;\n      }\n    }\n  }\n\n  _validateAttributeUpdaters() {\n    const {\n      settings\n    } = this;\n    const hasUpdater = settings.noAlloc || typeof settings.update === 'function';\n\n    if (!hasUpdater) {\n      throw new Error(\"Attribute \".concat(this.id, \" missing update or accessor\"));\n    }\n  }\n\n  _checkAttributeArray() {\n    const {\n      value\n    } = this;\n    const limit = Math.min(4, this.size);\n\n    if (value && value.length >= limit) {\n      let valid = true;\n\n      switch (limit) {\n        case 4:\n          valid = valid && Number.isFinite(value[3]);\n\n        case 3:\n          valid = valid && Number.isFinite(value[2]);\n\n        case 2:\n          valid = valid && Number.isFinite(value[1]);\n\n        case 1:\n          valid = valid && Number.isFinite(value[0]);\n          break;\n\n        default:\n          valid = false;\n      }\n\n      if (!valid) {\n        throw new Error(\"Illegal attribute generated for \".concat(this.id));\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=attribute.js.map","export function glArrayFromType(glType) {\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5130:\n      return Float64Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return Uint8ClampedArray;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Unknown GL type');\n  }\n}\n//# sourceMappingURL=gl-utils.js.map","import { Transform } from '@luma.gl/core';\nimport GPUInterpolationTransition from '../../transitions/gpu-interpolation-transition';\nimport GPUSpringTransition from '../../transitions/gpu-spring-transition';\nimport log from '../../utils/log';\nconst TRANSITION_TYPES = {\n  interpolation: GPUInterpolationTransition,\n  spring: GPUSpringTransition\n};\nexport default class AttributeTransitionManager {\n  constructor(gl, {\n    id,\n    timeline\n  }) {\n    this.id = id;\n    this.gl = gl;\n    this.timeline = timeline;\n    this.transitions = {};\n    this.needsRedraw = false;\n    this.numInstances = 1;\n    this.isSupported = Transform.isSupported(gl);\n  }\n\n  finalize() {\n    for (const attributeName in this.transitions) {\n      this._removeTransition(attributeName);\n    }\n  }\n\n  update({\n    attributes,\n    transitions,\n    numInstances\n  }) {\n    this.numInstances = numInstances || 1;\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const settings = attribute.getTransitionSetting(transitions);\n      if (!settings) continue;\n\n      this._updateAttribute(attributeName, attribute, settings);\n    }\n\n    for (const attributeName in this.transitions) {\n      const attribute = attributes[attributeName];\n\n      if (!attribute || !attribute.getTransitionSetting(transitions)) {\n        this._removeTransition(attributeName);\n      }\n    }\n  }\n\n  hasAttribute(attributeName) {\n    const transition = this.transitions[attributeName];\n    return transition && transition.inProgress;\n  }\n\n  getAttributes() {\n    const animatedAttributes = {};\n\n    for (const attributeName in this.transitions) {\n      const transition = this.transitions[attributeName];\n\n      if (transition.inProgress) {\n        animatedAttributes[attributeName] = transition.attributeInTransition;\n      }\n    }\n\n    return animatedAttributes;\n  }\n\n  run() {\n    if (!this.isSupported || this.numInstances === 0) {\n      return false;\n    }\n\n    for (const attributeName in this.transitions) {\n      const updated = this.transitions[attributeName].update();\n\n      if (updated) {\n        this.needsRedraw = true;\n      }\n    }\n\n    const needsRedraw = this.needsRedraw;\n    this.needsRedraw = false;\n    return needsRedraw;\n  }\n\n  _removeTransition(attributeName) {\n    this.transitions[attributeName].cancel();\n    delete this.transitions[attributeName];\n  }\n\n  _updateAttribute(attributeName, attribute, settings) {\n    const transition = this.transitions[attributeName];\n    let isNew = !transition || transition.type !== settings.type;\n\n    if (isNew) {\n      if (!this.isSupported) {\n        log.warn(\"WebGL2 not supported by this browser. Transition for \".concat(attributeName, \" is disabled.\"))();\n        return;\n      }\n\n      if (transition) {\n        this._removeTransition(attributeName);\n      }\n\n      const TransitionType = TRANSITION_TYPES[settings.type];\n\n      if (TransitionType) {\n        this.transitions[attributeName] = new TransitionType({\n          attribute,\n          timeline: this.timeline,\n          gl: this.gl\n        });\n      } else {\n        log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n        isNew = false;\n      }\n    }\n\n    if (isNew || attribute.needsRedraw()) {\n      this.needsRedraw = true;\n      this.transitions[attributeName].start(settings, this.numInstances);\n    }\n  }\n\n}\n//# sourceMappingURL=attribute-transition-manager.js.map","import { Buffer, Transform } from '@luma.gl/core';\nimport Attribute from '../lib/attribute/attribute';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Transition from './transition';\nexport default class GPUInterpolationTransition {\n  constructor({\n    gl,\n    attribute,\n    timeline\n  }) {\n    this.gl = gl;\n    this.type = 'interpolation';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, attribute.settings);\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.transform = getTransform(gl, attribute);\n    const bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  get inProgress() {\n    return this.transition.inProgress;\n  }\n\n  start(transitionSettings, numInstances) {\n    if (transitionSettings.duration <= 0) {\n      this.transition.cancel();\n      return;\n    }\n\n    const {\n      gl,\n      buffers,\n      attribute\n    } = this;\n    cycleBuffers(buffers);\n    const padBufferOpts = {\n      numInstances,\n      attribute,\n      fromLength: this.currentLength,\n      fromStartIndices: this.currentStartIndices,\n      getData: transitionSettings.enter\n    };\n\n    for (const buffer of buffers) {\n      padBuffer({\n        buffer,\n        ...padBufferOpts\n      });\n    }\n\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = getAttributeBufferLength(attribute, numInstances);\n    this.attributeInTransition.update({\n      buffer: buffers[1],\n      value: attribute.value\n    });\n    this.transition.start(transitionSettings);\n    this.transform.update({\n      elementCount: Math.floor(this.currentLength / attribute.size),\n      sourceBuffers: {\n        aFrom: buffers[0],\n        aTo: getSourceBufferAttribute(gl, attribute)\n      },\n      feedbackBuffers: {\n        vCurrent: buffers[1]\n      }\n    });\n  }\n\n  update() {\n    const updated = this.transition.update();\n\n    if (updated) {\n      const {\n        time,\n        settings: {\n          duration,\n          easing\n        }\n      } = this.transition;\n      const t = easing(time / duration);\n      this.transform.run({\n        uniforms: {\n          time: t\n        }\n      });\n    }\n\n    return updated;\n  }\n\n  cancel() {\n    this.transition.cancel();\n    this.transform.delete();\n\n    while (this.buffers.length) {\n      this.buffers.pop().delete();\n    }\n  }\n\n}\nconst vs = \"\\n#define SHADER_NAME interpolation-transition-vertex-shader\\n\\nuniform float time;\\nattribute ATTRIBUTE_TYPE aFrom;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vCurrent;\\n\\nvoid main(void) {\\n  vCurrent = mix(aFrom, aTo, time);\\n  gl_Position = vec4(0.0);\\n}\\n\";\n\nfunction getTransform(gl, attribute) {\n  const attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    vs,\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vCurrent']\n  });\n}\n//# sourceMappingURL=gpu-interpolation-transition.js.map","import { Buffer, Transform, Framebuffer, Texture2D, readPixelsToArray } from '@luma.gl/core';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Attribute from '../lib/attribute/attribute';\nimport Transition from './transition';\nexport default class GPUSpringTransition {\n  constructor({\n    gl,\n    attribute,\n    timeline\n  }) {\n    this.gl = gl;\n    this.type = 'spring';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, { ...attribute.settings,\n      normalized: false\n    });\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.texture = getTexture(gl);\n    this.framebuffer = getFramebuffer(gl, this.texture);\n    this.transform = getTransform(gl, attribute, this.framebuffer);\n    const bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  get inProgress() {\n    return this.transition.inProgress;\n  }\n\n  start(transitionSettings, numInstances) {\n    const {\n      gl,\n      buffers,\n      attribute\n    } = this;\n    const padBufferOpts = {\n      numInstances,\n      attribute,\n      fromLength: this.currentLength,\n      fromStartIndices: this.currentStartIndices,\n      getData: transitionSettings.enter\n    };\n\n    for (const buffer of buffers) {\n      padBuffer({\n        buffer,\n        ...padBufferOpts\n      });\n    }\n\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = getAttributeBufferLength(attribute, numInstances);\n    this.attributeInTransition.update({\n      buffer: buffers[1],\n      value: attribute.value\n    });\n    this.transition.start(transitionSettings);\n    this.transform.update({\n      elementCount: Math.floor(this.currentLength / attribute.size),\n      sourceBuffers: {\n        aTo: getSourceBufferAttribute(gl, attribute)\n      }\n    });\n  }\n\n  update() {\n    const {\n      buffers,\n      transform,\n      framebuffer,\n      transition\n    } = this;\n    const updated = transition.update();\n\n    if (!updated) {\n      return false;\n    }\n\n    transform.update({\n      sourceBuffers: {\n        aPrev: buffers[0],\n        aCur: buffers[1]\n      },\n      feedbackBuffers: {\n        vNext: buffers[2]\n      }\n    });\n    transform.run({\n      framebuffer,\n      discard: false,\n      clearRenderTarget: true,\n      uniforms: {\n        stiffness: transition.settings.stiffness,\n        damping: transition.settings.damping\n      },\n      parameters: {\n        depthTest: false,\n        blend: true,\n        viewport: [0, 0, 1, 1],\n        blendFunc: [1, 1],\n        blendEquation: [32776, 32776]\n      }\n    });\n    cycleBuffers(buffers);\n    this.attributeInTransition.update({\n      buffer: buffers[1],\n      value: this.attribute.value\n    });\n    const isTransitioning = readPixelsToArray(framebuffer)[0] > 0;\n\n    if (!isTransitioning) {\n      transition.end();\n    }\n\n    return true;\n  }\n\n  cancel() {\n    this.transition.cancel();\n    this.transform.delete();\n\n    while (this.buffers.length) {\n      this.buffers.pop().delete();\n    }\n\n    this.texture.delete();\n    this.texture = null;\n    this.framebuffer.delete();\n    this.framebuffer = null;\n  }\n\n}\n\nfunction getTransform(gl, attribute, framebuffer) {\n  const attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    framebuffer,\n    vs: \"\\n#define SHADER_NAME spring-transition-vertex-shader\\n\\n#define EPSILON 0.00001\\n\\nuniform float stiffness;\\nuniform float damping;\\nattribute ATTRIBUTE_TYPE aPrev;\\nattribute ATTRIBUTE_TYPE aCur;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vNext;\\nvarying float vIsTransitioningFlag;\\n\\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\\n  ATTRIBUTE_TYPE velocity = cur - prev;\\n  ATTRIBUTE_TYPE delta = dest - cur;\\n  ATTRIBUTE_TYPE spring = delta * stiffness;\\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\\n  return spring + damper + velocity + cur;\\n}\\n\\nvoid main(void) {\\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\\n\\n  vNext = getNextValue(aCur, aPrev, aTo);\\n  gl_Position = vec4(0, 0, 0, 1);\\n  gl_PointSize = 100.0;\\n}\\n\",\n    fs: \"\\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\\n\\nvarying float vIsTransitioningFlag;\\n\\nvoid main(void) {\\n  if (vIsTransitioningFlag == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor = vec4(1.0);\\n}\",\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vNext']\n  });\n}\n\nfunction getTexture(gl) {\n  return new Texture2D(gl, {\n    data: new Uint8Array(4),\n    format: 6408,\n    type: 5121,\n    border: 0,\n    mipmaps: false,\n    dataFormat: 6408,\n    width: 1,\n    height: 1\n  });\n}\n\nfunction getFramebuffer(gl, texture) {\n  return new Framebuffer(gl, {\n    id: 'spring-transition-is-transitioning-framebuffer',\n    width: 1,\n    height: 1,\n    attachments: {\n      [36064]: texture\n    }\n  });\n}\n//# sourceMappingURL=gpu-spring-transition.js.map","import Attribute from './attribute';\nimport log from '../../utils/log';\nimport debug from '../../debug';\nimport AttributeTransitionManager from './attribute-transition-manager';\nconst TRACE_INVALIDATE = 'attributeManager.invalidate';\nconst TRACE_UPDATE_START = 'attributeManager.updateStart';\nconst TRACE_UPDATE_END = 'attributeManager.updateEnd';\nconst TRACE_ATTRIBUTE_UPDATE_START = 'attribute.updateStart';\nconst TRACE_ATTRIBUTE_ALLOCATE = 'attribute.allocate';\nconst TRACE_ATTRIBUTE_UPDATE_END = 'attribute.updateEnd';\nexport default class AttributeManager {\n  constructor(gl, {\n    id = 'attribute-manager',\n    stats,\n    timeline\n  } = {}) {\n    this.id = id;\n    this.gl = gl;\n    this.attributes = {};\n    this.updateTriggers = {};\n    this.accessors = {};\n    this.needsRedraw = true;\n    this.userData = {};\n    this.stats = stats;\n    this.attributeTransitionManager = new AttributeTransitionManager(gl, {\n      id: \"\".concat(id, \"-transitions\"),\n      timeline\n    });\n    Object.seal(this);\n  }\n\n  finalize() {\n    for (const attributeName in this.attributes) {\n      this.attributes[attributeName].delete();\n    }\n\n    this.attributeTransitionManager.finalize();\n  }\n\n  getNeedsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this.needsRedraw;\n    this.needsRedraw = this.needsRedraw && !opts.clearRedrawFlags;\n    return redraw && this.id;\n  }\n\n  setNeedsRedraw(redraw = true) {\n    this.needsRedraw = true;\n    return this;\n  }\n\n  add(attributes, updaters) {\n    this._add(attributes, updaters);\n  }\n\n  addInstanced(attributes, updaters) {\n    this._add(attributes, updaters, {\n      instanced: 1\n    });\n  }\n\n  remove(attributeNameArray) {\n    for (let i = 0; i < attributeNameArray.length; i++) {\n      const name = attributeNameArray[i];\n\n      if (this.attributes[name] !== undefined) {\n        this.attributes[name].delete();\n        delete this.attributes[name];\n      }\n    }\n  }\n\n  invalidate(triggerName, dataRange) {\n    const invalidatedAttributes = this._invalidateTrigger(triggerName, dataRange);\n\n    debug(TRACE_INVALIDATE, this, triggerName, invalidatedAttributes);\n  }\n\n  invalidateAll(dataRange) {\n    for (const attributeName in this.attributes) {\n      this.attributes[attributeName].setNeedsUpdate(attributeName, dataRange);\n    }\n\n    debug(TRACE_INVALIDATE, this, 'all');\n  }\n\n  update({\n    data,\n    numInstances,\n    startIndices = null,\n    transitions,\n    props = {},\n    buffers = {},\n    context = {}\n  } = {}) {\n    let updated = false;\n    debug(TRACE_UPDATE_START, this);\n\n    if (this.stats) {\n      this.stats.get('Update Attributes').timeStart();\n    }\n\n    for (const attributeName in this.attributes) {\n      const attribute = this.attributes[attributeName];\n      const accessorName = attribute.settings.accessor;\n      attribute.startIndices = startIndices;\n\n      if (props[attributeName]) {\n        log.removed(\"props.\".concat(attributeName), \"data.attributes.\".concat(attributeName))();\n      }\n\n      if (attribute.setExternalBuffer(buffers[attributeName])) {} else if (attribute.setBinaryValue(buffers[accessorName], data.startIndices)) {} else if (!buffers[accessorName] && attribute.setConstantValue(props[accessorName])) {} else if (attribute.needsUpdate()) {\n        updated = true;\n\n        this._updateAttribute({\n          attribute,\n          numInstances,\n          data,\n          props,\n          context\n        });\n      }\n\n      this.needsRedraw |= attribute.needsRedraw();\n    }\n\n    if (updated) {\n      debug(TRACE_UPDATE_END, this, numInstances);\n    }\n\n    if (this.stats) {\n      this.stats.get('Update Attributes').timeEnd();\n    }\n\n    this.attributeTransitionManager.update({\n      attributes: this.attributes,\n      numInstances,\n      transitions\n    });\n  }\n\n  updateTransition() {\n    const {\n      attributeTransitionManager\n    } = this;\n    const transitionUpdated = attributeTransitionManager.run();\n    this.needsRedraw = this.needsRedraw || transitionUpdated;\n    return transitionUpdated;\n  }\n\n  getAttributes() {\n    return this.attributes;\n  }\n\n  getChangedAttributes(opts = {\n    clearChangedFlags: false\n  }) {\n    const {\n      attributes,\n      attributeTransitionManager\n    } = this;\n    const changedAttributes = { ...attributeTransitionManager.getAttributes()\n    };\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n\n      if (attribute.needsRedraw(opts) && !attributeTransitionManager.hasAttribute(attributeName)) {\n        changedAttributes[attributeName] = attribute;\n      }\n    }\n\n    return changedAttributes;\n  }\n\n  getShaderAttributes(attributes, excludeAttributes = {}) {\n    if (!attributes) {\n      attributes = this.getAttributes();\n    }\n\n    const shaderAttributes = {};\n\n    for (const attributeName in attributes) {\n      if (!excludeAttributes[attributeName]) {\n        Object.assign(shaderAttributes, attributes[attributeName].getShaderAttributes());\n      }\n    }\n\n    return shaderAttributes;\n  }\n\n  getAccessors() {\n    return this.updateTriggers;\n  }\n\n  _add(attributes, updaters, extraProps = {}) {\n    if (updaters) {\n      log.warn('AttributeManager.add({updaters}) - updater map no longer supported')();\n    }\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      this.attributes[attributeName] = this._createAttribute(attributeName, attribute, extraProps);\n    }\n\n    this._mapUpdateTriggersToAttributes();\n  }\n\n  _createAttribute(name, attribute, extraProps) {\n    const props = { ...attribute,\n      id: name,\n      constant: attribute.constant || false,\n      isIndexed: attribute.isIndexed || attribute.elements,\n      size: attribute.elements && 1 || attribute.size,\n      value: attribute.value || null,\n      divisor: attribute.instanced || extraProps.instanced ? 1 : attribute.divisor\n    };\n    return new Attribute(this.gl, props);\n  }\n\n  _mapUpdateTriggersToAttributes() {\n    const triggers = {};\n\n    for (const attributeName in this.attributes) {\n      const attribute = this.attributes[attributeName];\n      attribute.getUpdateTriggers().forEach(triggerName => {\n        if (!triggers[triggerName]) {\n          triggers[triggerName] = [];\n        }\n\n        triggers[triggerName].push(attributeName);\n      });\n    }\n\n    this.updateTriggers = triggers;\n  }\n\n  _invalidateTrigger(triggerName, dataRange) {\n    const {\n      attributes,\n      updateTriggers\n    } = this;\n    const invalidatedAttributes = updateTriggers[triggerName];\n\n    if (invalidatedAttributes) {\n      invalidatedAttributes.forEach(name => {\n        const attribute = attributes[name];\n\n        if (attribute) {\n          attribute.setNeedsUpdate(attribute.id, dataRange);\n        }\n      });\n    }\n\n    return invalidatedAttributes;\n  }\n\n  _updateAttribute(opts) {\n    const {\n      attribute,\n      numInstances\n    } = opts;\n    debug(TRACE_ATTRIBUTE_UPDATE_START, attribute);\n\n    if (attribute.allocate(numInstances)) {\n      debug(TRACE_ATTRIBUTE_ALLOCATE, attribute, numInstances);\n    }\n\n    const updated = attribute.updateBuffer(opts);\n\n    if (updated) {\n      this.needsRedraw = true;\n      debug(TRACE_ATTRIBUTE_UPDATE_END, attribute, numInstances);\n    }\n  }\n\n}\n//# sourceMappingURL=attribute-manager.js.map","function padArrayChunk({\n  source,\n  target,\n  start = 0,\n  end,\n  size,\n  getData\n}) {\n  end = end || target.length;\n  const sourceLength = source.length;\n  const targetLength = end - start;\n\n  if (sourceLength > targetLength) {\n    target.set(source.subarray(0, targetLength), start);\n    return;\n  }\n\n  target.set(source, start);\n\n  if (!getData) {\n    return;\n  }\n\n  let i = sourceLength;\n\n  while (i < targetLength) {\n    const datum = getData(i, source);\n\n    for (let j = 0; j < size; j++) {\n      target[start + i] = datum[j] || 0;\n      i++;\n    }\n  }\n}\n\nexport function padArray({\n  source,\n  target,\n  size,\n  getData,\n  sourceStartIndices,\n  targetStartIndices\n}) {\n  if (!Array.isArray(targetStartIndices)) {\n    padArrayChunk({\n      source,\n      target,\n      size,\n      getData\n    });\n    return target;\n  }\n\n  let sourceIndex = 0;\n  let targetIndex = 0;\n\n  const getChunkData = getData && ((i, chunk) => getData(i + targetIndex, chunk));\n\n  const n = Math.min(sourceStartIndices.length, targetStartIndices.length);\n\n  for (let i = 1; i < n; i++) {\n    const nextSourceIndex = sourceStartIndices[i] * size;\n    const nextTargetIndex = targetStartIndices[i] * size;\n    padArrayChunk({\n      source: source.subarray(sourceIndex, nextSourceIndex),\n      target,\n      start: targetIndex,\n      end: nextTargetIndex,\n      size,\n      getData: getChunkData\n    });\n    sourceIndex = nextSourceIndex;\n    targetIndex = nextTargetIndex;\n  }\n\n  if (targetIndex < target.length) {\n    padArrayChunk({\n      source: [],\n      target,\n      start: targetIndex,\n      size,\n      getData: getChunkData\n    });\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils.js.map","import { padArray } from '../../utils/array-utils';\nconst DEFAULT_TRANSITION_SETTINGS = {\n  interpolation: {\n    duration: 0,\n    easing: t => t\n  },\n  spring: {\n    stiffness: 0.05,\n    damping: 0.5\n  }\n};\nexport function normalizeTransitionSettings(userSettings, layerSettings) {\n  if (!userSettings) {\n    return null;\n  }\n\n  if (Number.isFinite(userSettings)) {\n    userSettings = {\n      duration: userSettings\n    };\n  }\n\n  userSettings.type = userSettings.type || 'interpolation';\n  return { ...DEFAULT_TRANSITION_SETTINGS[userSettings.type],\n    ...layerSettings,\n    ...userSettings\n  };\n}\nexport function getSourceBufferAttribute(gl, attribute) {\n  const buffer = attribute.getBuffer();\n\n  if (buffer) {\n    return [attribute.getBuffer(), {\n      divisor: 0,\n      size: attribute.size,\n      normalized: attribute.settings.normalized\n    }];\n  }\n\n  return attribute.value;\n}\nexport function getAttributeTypeFromSize(size) {\n  switch (size) {\n    case 1:\n      return 'float';\n\n    case 2:\n      return 'vec2';\n\n    case 3:\n      return 'vec3';\n\n    case 4:\n      return 'vec4';\n\n    default:\n      throw new Error(\"No defined attribute type for size \\\"\".concat(size, \"\\\"\"));\n  }\n}\nexport function cycleBuffers(buffers) {\n  buffers.push(buffers.shift());\n}\nexport function getAttributeBufferLength(attribute, numInstances) {\n  const {\n    doublePrecision,\n    settings,\n    value,\n    size\n  } = attribute;\n  const multiplier = doublePrecision && value instanceof Float64Array ? 2 : 1;\n  return (settings.noAlloc ? value.length : numInstances * size) * multiplier;\n}\nexport function padBuffer({\n  buffer,\n  numInstances,\n  attribute,\n  fromLength,\n  fromStartIndices,\n  getData = x => x\n}) {\n  const precisionMultiplier = attribute.doublePrecision && attribute.value instanceof Float64Array ? 2 : 1;\n  const size = attribute.size * precisionMultiplier;\n  const byteOffset = attribute.byteOffset;\n  const toStartIndices = attribute.startIndices;\n  const hasStartIndices = fromStartIndices && toStartIndices;\n  const toLength = getAttributeBufferLength(attribute, numInstances);\n  const isConstant = attribute.state.constant;\n\n  if (!hasStartIndices && fromLength >= toLength) {\n    return;\n  }\n\n  const toData = isConstant ? attribute.value : attribute.getBuffer().getData({\n    srcByteOffset: byteOffset\n  });\n\n  if (attribute.settings.normalized && !isConstant) {\n    const getter = getData;\n\n    getData = (value, chunk) => attribute._normalizeConstant(getter(value, chunk));\n  }\n\n  const getMissingData = isConstant ? (i, chunk) => getData(toData, chunk) : (i, chunk) => getData(toData.subarray(i, i + size), chunk);\n  const source = buffer.getData({\n    length: fromLength\n  });\n  const data = new Float32Array(toLength);\n  padArray({\n    source,\n    target: data,\n    sourceStartIndices: fromStartIndices,\n    targetStartIndices: toStartIndices,\n    size,\n    getData: getMissingData\n  });\n\n  if (buffer.byteLength < data.byteLength + byteOffset) {\n    buffer.reallocate(data.byteLength + byteOffset);\n  }\n\n  buffer.subData({\n    data,\n    offset: byteOffset\n  });\n}\n//# sourceMappingURL=attribute-transition-utils.js.map","import log from '../utils/log';\nexport const COORDINATE_SYSTEM = {\n  DEFAULT: -1,\n  LNGLAT: 1,\n  METER_OFFSETS: 2,\n  LNGLAT_OFFSETS: 3,\n  CARTESIAN: 0\n};\nObject.defineProperty(COORDINATE_SYSTEM, 'IDENTITY', {\n  get: () => log.deprecated('COORDINATE_SYSTEM.IDENTITY', 'COORDINATE_SYSTEM.CARTESIAN')() || 0\n});\nexport const PROJECTION_MODE = {\n  WEB_MERCATOR: 1,\n  GLOBE: 2,\n  WEB_MERCATOR_AUTO_OFFSET: 4,\n  IDENTITY: 0\n};\nexport const EVENTS = {\n  click: {\n    handler: 'onClick'\n  },\n  panstart: {\n    handler: 'onDragStart'\n  },\n  panmove: {\n    handler: 'onDrag'\n  },\n  panend: {\n    handler: 'onDragEnd'\n  }\n};\n//# sourceMappingURL=constants.js.map","import { lerp } from 'math.gl';\nimport Transition from './transition';\nexport default class CPUInterpolationTransition extends Transition {\n  get value() {\n    return this._value;\n  }\n\n  _onUpdate() {\n    const {\n      time,\n      settings: {\n        fromValue,\n        toValue,\n        duration,\n        easing\n      }\n    } = this;\n    const t = easing(time / duration);\n    this._value = lerp(fromValue, toValue, t);\n  }\n\n}\n//# sourceMappingURL=cpu-interpolation-transition.js.map","import Transition from './transition';\nconst EPSILON = 1e-5;\n\nfunction updateSpringElement(prev, cur, dest, damping, stiffness) {\n  const velocity = cur - prev;\n  const delta = dest - cur;\n  const spring = delta * stiffness;\n  const damper = -velocity * damping;\n  return spring + damper + velocity + cur;\n}\n\nfunction updateSpring(prev, cur, dest, damping, stiffness) {\n  if (Array.isArray(dest)) {\n    const next = [];\n\n    for (let i = 0; i < dest.length; i++) {\n      next[i] = updateSpringElement(prev[i], cur[i], dest[i], damping, stiffness);\n    }\n\n    return next;\n  }\n\n  return updateSpringElement(prev, cur, dest, damping, stiffness);\n}\n\nfunction distance(value1, value2) {\n  if (Array.isArray(value1)) {\n    let distanceSquare = 0;\n\n    for (let i = 0; i < value1.length; i++) {\n      const d = value1[i] - value2[i];\n      distanceSquare += d * d;\n    }\n\n    return Math.sqrt(distanceSquare);\n  }\n\n  return Math.abs(value1 - value2);\n}\n\nexport default class CPUSpringTransition extends Transition {\n  get value() {\n    return this._currValue;\n  }\n\n  _onUpdate() {\n    const {\n      fromValue,\n      toValue,\n      damping,\n      stiffness\n    } = this.settings;\n    const {\n      _prevValue = fromValue,\n      _currValue = fromValue\n    } = this;\n    let nextValue = updateSpring(_prevValue, _currValue, toValue, damping, stiffness);\n    const delta = distance(nextValue, toValue);\n    const velocity = distance(nextValue, _currValue);\n\n    if (delta < EPSILON && velocity < EPSILON) {\n      nextValue = toValue;\n      this.end();\n    }\n\n    this._prevValue = _currValue;\n    this._currValue = nextValue;\n  }\n\n}\n//# sourceMappingURL=cpu-spring-transition.js.map","import { normalizeTransitionSettings } from './attribute/attribute-transition-utils';\nimport CPUInterpolationTransition from '../transitions/cpu-interpolation-transition';\nimport CPUSpringTransition from '../transitions/cpu-spring-transition';\nimport log from '../utils/log';\nconst TRANSITION_TYPES = {\n  interpolation: CPUInterpolationTransition,\n  spring: CPUSpringTransition\n};\nexport default class UniformTransitionManager {\n  constructor(timeline) {\n    this.transitions = new Map();\n    this.timeline = timeline;\n  }\n\n  get active() {\n    return this.transitions.size > 0;\n  }\n\n  add(key, fromValue, toValue, settings) {\n    const {\n      transitions\n    } = this;\n\n    if (transitions.has(key)) {\n      const transition = transitions.get(key);\n      const {\n        value = transition.settings.fromValue\n      } = transition;\n      fromValue = value;\n      this.remove(key);\n    }\n\n    settings = normalizeTransitionSettings(settings);\n\n    if (!settings) {\n      return;\n    }\n\n    const TransitionType = TRANSITION_TYPES[settings.type];\n\n    if (!TransitionType) {\n      log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n      return;\n    }\n\n    const transition = new TransitionType(this.timeline);\n    transition.start({ ...settings,\n      fromValue,\n      toValue\n    });\n    transitions.set(key, transition);\n  }\n\n  remove(key) {\n    const {\n      transitions\n    } = this;\n\n    if (transitions.has(key)) {\n      transitions.get(key).cancel();\n      transitions.delete(key);\n    }\n  }\n\n  update() {\n    const propsInTransition = {};\n\n    for (const [key, transition] of this.transitions) {\n      transition.update();\n      propsInTransition[key] = transition.value;\n\n      if (!transition.inProgress) {\n        this.remove(key);\n      }\n    }\n\n    return propsInTransition;\n  }\n\n  clear() {\n    for (const key of this.transitions.keys()) {\n      this.remove(key);\n    }\n  }\n\n}\n//# sourceMappingURL=uniform-transition-manager.js.map","import { COORDINATE_SYSTEM } from '../../lib/constants';\nimport { getOffsetOrigin } from './viewport-uniforms';\nimport WebMercatorViewport from '../../viewports/web-mercator-viewport';\nimport * as vec4 from 'gl-matrix/vec4';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { addMetersToLngLat } from '@math.gl/web-mercator';\n\nfunction lngLatZToWorldPosition(lngLatZ, viewport, offsetMode = false) {\n  const p = viewport.projectPosition(lngLatZ);\n\n  if (offsetMode && viewport instanceof WebMercatorViewport) {\n    const [longitude, latitude, z = 0] = lngLatZ;\n    const distanceScales = viewport.getDistanceScales([longitude, latitude]);\n    p[2] = z * distanceScales.unitsPerMeter[2];\n  }\n\n  return p;\n}\n\nfunction normalizeParameters(opts) {\n  const normalizedParams = { ...opts\n  };\n  let {\n    coordinateSystem\n  } = opts;\n  const {\n    viewport,\n    coordinateOrigin,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  } = opts;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  if (fromCoordinateSystem === undefined) {\n    normalizedParams.fromCoordinateSystem = coordinateSystem;\n  }\n\n  if (fromCoordinateOrigin === undefined) {\n    normalizedParams.fromCoordinateOrigin = coordinateOrigin;\n  }\n\n  normalizedParams.coordinateSystem = coordinateSystem;\n  return normalizedParams;\n}\n\nexport function getWorldPosition(position, {\n  viewport,\n  modelMatrix,\n  coordinateSystem,\n  coordinateOrigin,\n  offsetMode\n}) {\n  let [x, y, z = 0] = position;\n\n  if (modelMatrix) {\n    [x, y, z] = vec4.transformMat4([], [x, y, z, 1.0], modelMatrix);\n  }\n\n  switch (coordinateSystem) {\n    case COORDINATE_SYSTEM.LNGLAT:\n      return lngLatZToWorldPosition([x, y, z], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n      return lngLatZToWorldPosition([x + coordinateOrigin[0], y + coordinateOrigin[1], z + (coordinateOrigin[2] || 0)], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.METER_OFFSETS:\n      return lngLatZToWorldPosition(addMetersToLngLat(coordinateOrigin, [x, y, z]), viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.CARTESIAN:\n    default:\n      return viewport.isGeospatial ? [x + coordinateOrigin[0], y + coordinateOrigin[1], z + coordinateOrigin[2]] : viewport.projectPosition([x, y, z]);\n  }\n}\nexport function projectPosition(position, params) {\n  const {\n    viewport,\n    coordinateSystem,\n    coordinateOrigin,\n    modelMatrix,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  } = normalizeParameters(params);\n  const {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  } = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin);\n  const worldPosition = getWorldPosition(position, {\n    viewport,\n    modelMatrix,\n    coordinateSystem: fromCoordinateSystem,\n    coordinateOrigin: fromCoordinateOrigin,\n    offsetMode\n  });\n\n  if (offsetMode) {\n    const positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    vec3.sub(worldPosition, worldPosition, positionCommonSpace);\n  }\n\n  return worldPosition;\n}\n//# sourceMappingURL=project-functions.js.map","import { Texture2D } from '@luma.gl/core';\nconst DEFAULT_TEXTURE_PARAMETERS = {\n  [10241]: 9987,\n  [10240]: 9729,\n  [10242]: 33071,\n  [10243]: 33071\n};\nconst internalTextures = {};\nexport function createTexture(layer, image) {\n  const gl = layer.context && layer.context.gl;\n\n  if (!gl || !image) {\n    return null;\n  }\n\n  if (image instanceof Texture2D) {\n    return image;\n  } else if (image.constructor && image.constructor.name !== 'Object') {\n    image = {\n      data: image\n    };\n  }\n\n  let specialTextureParameters = null;\n\n  if (image.compressed) {\n    specialTextureParameters = {\n      [10241]: image.data.length > 1 ? 9985 : 9729\n    };\n  }\n\n  const texture = new Texture2D(gl, { ...image,\n    parameters: { ...DEFAULT_TEXTURE_PARAMETERS,\n      ...specialTextureParameters,\n      ...layer.props.textureParameters\n    }\n  });\n  internalTextures[texture.id] = true;\n  return texture;\n}\nexport function destroyTexture(texture) {\n  if (!texture || !(texture instanceof Texture2D)) {\n    return;\n  }\n\n  if (internalTextures[texture.id]) {\n    texture.delete();\n    delete internalTextures[texture.id];\n  }\n}\n//# sourceMappingURL=texture.js.map","import { createTexture, destroyTexture } from '../utils/texture';\nconst TYPE_DEFINITIONS = {\n  boolean: {\n    validate(value, propType) {\n      return true;\n    },\n\n    equal(value1, value2, propType) {\n      return Boolean(value1) === Boolean(value2);\n    }\n\n  },\n  number: {\n    validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n\n  },\n  color: {\n    validate(value, propType) {\n      return propType.optional && !value || isArray(value) && (value.length === 3 || value.length === 4);\n    },\n\n    equal(value1, value2, propType) {\n      return arrayEqual(value1, value2);\n    }\n\n  },\n  accessor: {\n    validate(value, propType) {\n      const valueType = getTypeOf(value);\n      return valueType === 'function' || valueType === getTypeOf(propType.value);\n    },\n\n    equal(value1, value2, propType) {\n      if (typeof value2 === 'function') {\n        return true;\n      }\n\n      return arrayEqual(value1, value2);\n    }\n\n  },\n  array: {\n    validate(value, propType) {\n      return propType.optional && !value || isArray(value);\n    },\n\n    equal(value1, value2, propType) {\n      return propType.compare ? arrayEqual(value1, value2) : value1 === value2;\n    }\n\n  },\n  function: {\n    validate(value, propType) {\n      return propType.optional && !value || typeof value === 'function';\n    },\n\n    equal(value1, value2, propType) {\n      return !propType.compare || value1 === value2;\n    }\n\n  },\n  data: {\n    transform: (value, propType, component) => {\n      const {\n        dataTransform\n      } = component ? component.props : {};\n      return dataTransform && value ? dataTransform(value) : value;\n    }\n  },\n  image: {\n    transform: (value, propType, component) => {\n      return createTexture(component, value);\n    },\n    release: value => {\n      destroyTexture(value);\n    }\n  }\n};\n\nfunction arrayEqual(array1, array2) {\n  if (array1 === array2) {\n    return true;\n  }\n\n  if (!isArray(array1) || !isArray(array2)) {\n    return false;\n  }\n\n  const len = array1.length;\n\n  if (len !== array2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < len; i++) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function parsePropTypes(propDefs) {\n  const propTypes = {};\n  const defaultProps = {};\n  const deprecatedProps = {};\n\n  for (const [propName, propDef] of Object.entries(propDefs)) {\n    if (propDef && propDef.deprecatedFor) {\n      deprecatedProps[propName] = Array.isArray(propDef.deprecatedFor) ? propDef.deprecatedFor : [propDef.deprecatedFor];\n    } else {\n      const propType = parsePropType(propName, propDef);\n      propTypes[propName] = propType;\n      defaultProps[propName] = propType.value;\n    }\n  }\n\n  return {\n    propTypes,\n    defaultProps,\n    deprecatedProps\n  };\n}\n\nfunction parsePropType(name, propDef) {\n  switch (getTypeOf(propDef)) {\n    case 'object':\n      return normalizePropDefinition(name, propDef);\n\n    case 'array':\n      return normalizePropDefinition(name, {\n        type: 'array',\n        value: propDef,\n        compare: false\n      });\n\n    case 'boolean':\n      return normalizePropDefinition(name, {\n        type: 'boolean',\n        value: propDef\n      });\n\n    case 'number':\n      return normalizePropDefinition(name, {\n        type: 'number',\n        value: propDef\n      });\n\n    case 'function':\n      return normalizePropDefinition(name, {\n        type: 'function',\n        value: propDef,\n        compare: true\n      });\n\n    default:\n      return {\n        name,\n        type: 'unknown',\n        value: propDef\n      };\n  }\n}\n\nfunction normalizePropDefinition(name, propDef) {\n  if (!('type' in propDef)) {\n    if (!('value' in propDef)) {\n      return {\n        name,\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    return {\n      name,\n      type: getTypeOf(propDef.value),\n      ...propDef\n    };\n  }\n\n  return {\n    name,\n    ...TYPE_DEFINITIONS[propDef.type],\n    ...propDef\n  };\n}\n\nfunction isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value);\n}\n\nfunction getTypeOf(value) {\n  if (isArray(value)) {\n    return 'array';\n  }\n\n  if (value === null) {\n    return 'null';\n  }\n\n  return typeof value;\n}\n//# sourceMappingURL=prop-types.js.map","import log from '../utils/log';\nimport { isAsyncIterable } from '../utils/iterable-utils';\nimport { parsePropTypes } from './prop-types';\nimport { PROP_SYMBOLS } from './constants';\nconst {\n  COMPONENT,\n  ASYNC_ORIGINAL,\n  ASYNC_RESOLVED,\n  ASYNC_DEFAULTS\n} = PROP_SYMBOLS;\nexport function createProps() {\n  const component = this;\n  const propsPrototype = getPropsPrototype(component.constructor);\n  const propsInstance = Object.create(propsPrototype);\n  propsInstance[COMPONENT] = component;\n  propsInstance[ASYNC_ORIGINAL] = {};\n  propsInstance[ASYNC_RESOLVED] = {};\n\n  for (let i = 0; i < arguments.length; ++i) {\n    const props = arguments[i];\n\n    for (const key in props) {\n      propsInstance[key] = props[key];\n    }\n  }\n\n  Object.freeze(propsInstance);\n  return propsInstance;\n}\n\nfunction getPropsPrototype(componentClass) {\n  const defaultProps = getOwnProperty(componentClass, '_mergedDefaultProps');\n\n  if (!defaultProps) {\n    createPropsPrototypeAndTypes(componentClass);\n    return componentClass._mergedDefaultProps;\n  }\n\n  return defaultProps;\n}\n\nfunction createPropsPrototypeAndTypes(componentClass) {\n  const parent = componentClass.prototype;\n\n  if (!parent) {\n    return;\n  }\n\n  const parentClass = Object.getPrototypeOf(componentClass);\n  const parentDefaultProps = getPropsPrototype(parentClass);\n  const componentDefaultProps = getOwnProperty(componentClass, 'defaultProps') || {};\n  const componentPropDefs = parsePropTypes(componentDefaultProps);\n  const defaultProps = createPropsPrototype(componentPropDefs.defaultProps, parentDefaultProps, componentClass);\n  const propTypes = { ...parentClass._propTypes,\n    ...componentPropDefs.propTypes\n  };\n  addAsyncPropsToPropPrototype(defaultProps, propTypes);\n  const deprecatedProps = { ...parentClass._deprecatedProps,\n    ...componentPropDefs.deprecatedProps\n  };\n  addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps);\n  componentClass._mergedDefaultProps = defaultProps;\n  componentClass._propTypes = propTypes;\n  componentClass._deprecatedProps = deprecatedProps;\n}\n\nfunction createPropsPrototype(props, parentProps, componentClass) {\n  const defaultProps = Object.create(null);\n  Object.assign(defaultProps, parentProps, props);\n  const id = getComponentName(componentClass);\n  delete props.id;\n  Object.defineProperties(defaultProps, {\n    id: {\n      writable: true,\n      value: id\n    }\n  });\n  return defaultProps;\n}\n\nfunction addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps) {\n  for (const propName in deprecatedProps) {\n    Object.defineProperty(defaultProps, propName, {\n      enumerable: false,\n\n      set(newValue) {\n        const nameStr = \"\".concat(this.id, \": \").concat(propName);\n\n        for (const newPropName of deprecatedProps[propName]) {\n          if (!hasOwnProperty(this, newPropName)) {\n            this[newPropName] = newValue;\n          }\n        }\n\n        log.deprecated(nameStr, deprecatedProps[propName].join('/'))();\n      }\n\n    });\n  }\n}\n\nfunction addAsyncPropsToPropPrototype(defaultProps, propTypes) {\n  const defaultValues = {};\n  const descriptors = {};\n\n  for (const propName in propTypes) {\n    const propType = propTypes[propName];\n    const {\n      name,\n      value\n    } = propType;\n\n    if (propType.async) {\n      defaultValues[name] = value;\n      descriptors[name] = getDescriptorForAsyncProp(name, value);\n    }\n  }\n\n  defaultProps[ASYNC_DEFAULTS] = defaultValues;\n  defaultProps[ASYNC_ORIGINAL] = {};\n  Object.defineProperties(defaultProps, descriptors);\n}\n\nfunction getDescriptorForAsyncProp(name) {\n  return {\n    enumerable: true,\n\n    set(newValue) {\n      if (typeof newValue === 'string' || newValue instanceof Promise || isAsyncIterable(newValue)) {\n        this[ASYNC_ORIGINAL][name] = newValue;\n      } else {\n        this[ASYNC_RESOLVED][name] = newValue;\n      }\n    },\n\n    get() {\n      if (this[ASYNC_RESOLVED]) {\n        if (name in this[ASYNC_RESOLVED]) {\n          const value = this[ASYNC_RESOLVED][name];\n          return value || this[ASYNC_DEFAULTS][name];\n        }\n\n        if (name in this[ASYNC_ORIGINAL]) {\n          const state = this[COMPONENT] && this[COMPONENT].internalState;\n\n          if (state && state.hasAsyncProp(name)) {\n            return state.getAsyncProp(name) || this[ASYNC_DEFAULTS][name];\n          }\n        }\n      }\n\n      return this[ASYNC_DEFAULTS][name];\n    }\n\n  };\n}\n\nfunction hasOwnProperty(object, prop) {\n  return Object.prototype.hasOwnProperty.call(object, prop);\n}\n\nfunction getOwnProperty(object, prop) {\n  return hasOwnProperty(object, prop) && object[prop];\n}\n\nfunction getComponentName(componentClass) {\n  const componentName = getOwnProperty(componentClass, 'layerName') || getOwnProperty(componentClass, 'componentName');\n\n  if (!componentName) {\n    log.once(0, \"\".concat(componentClass.name, \".componentName not specified\"))();\n  }\n\n  return componentName || componentClass.name;\n}\n//# sourceMappingURL=create-props.js.map","import { isAsyncIterable } from '../utils/iterable-utils';\nimport { PROP_SYMBOLS } from './constants';\nconst {\n  ASYNC_ORIGINAL,\n  ASYNC_RESOLVED,\n  ASYNC_DEFAULTS\n} = PROP_SYMBOLS;\nconst EMPTY_PROPS = Object.freeze({});\nexport default class ComponentState {\n  constructor(component = null) {\n    this.component = component;\n    this.asyncProps = {};\n\n    this.onAsyncPropUpdated = () => {};\n\n    this.oldProps = EMPTY_PROPS;\n    this.oldAsyncProps = null;\n  }\n\n  finalize() {\n    for (const propName in this.asyncProps) {\n      const asyncProp = this.asyncProps[propName];\n\n      if (asyncProp.type && asyncProp.type.release) {\n        asyncProp.type.release(asyncProp.resolvedValue, asyncProp.type, this.component);\n      }\n    }\n  }\n\n  getOldProps() {\n    return this.oldAsyncProps || this.oldProps;\n  }\n\n  resetOldProps() {\n    this.oldAsyncProps = null;\n    this.oldProps = this.component.props;\n  }\n\n  freezeAsyncOldProps() {\n    if (!this.oldAsyncProps) {\n      this.oldProps = this.oldProps || this.component.props;\n      this.oldAsyncProps = Object.create(this.oldProps);\n\n      for (const propName in this.asyncProps) {\n        Object.defineProperty(this.oldAsyncProps, propName, {\n          enumerable: true,\n          value: this.oldProps[propName]\n        });\n      }\n    }\n  }\n\n  hasAsyncProp(propName) {\n    return propName in this.asyncProps;\n  }\n\n  getAsyncProp(propName) {\n    const asyncProp = this.asyncProps[propName];\n    return asyncProp && asyncProp.resolvedValue;\n  }\n\n  isAsyncPropLoading(propName) {\n    if (propName) {\n      const asyncProp = this.asyncProps[propName];\n      return Boolean(asyncProp && asyncProp.pendingLoadCount > 0 && asyncProp.pendingLoadCount !== asyncProp.resolvedLoadCount);\n    }\n\n    for (const key in this.asyncProps) {\n      if (this.isAsyncPropLoading(key)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  reloadAsyncProp(propName, value) {\n    this._watchPromise(propName, Promise.resolve(value));\n  }\n\n  setAsyncProps(props) {\n    const resolvedValues = props[ASYNC_RESOLVED] || {};\n    const originalValues = props[ASYNC_ORIGINAL] || props;\n    const defaultValues = props[ASYNC_DEFAULTS] || {};\n\n    for (const propName in resolvedValues) {\n      const value = resolvedValues[propName];\n\n      this._createAsyncPropData(propName, defaultValues[propName]);\n\n      this._updateAsyncProp(propName, value);\n\n      resolvedValues[propName] = this.getAsyncProp(propName);\n    }\n\n    for (const propName in originalValues) {\n      const value = originalValues[propName];\n\n      this._createAsyncPropData(propName, defaultValues[propName]);\n\n      this._updateAsyncProp(propName, value);\n    }\n  }\n\n  _updateAsyncProp(propName, value) {\n    if (!this._didAsyncInputValueChange(propName, value)) {\n      return;\n    }\n\n    if (typeof value === 'string') {\n      var _this$layer;\n\n      const fetch = (_this$layer = this.layer) === null || _this$layer === void 0 ? void 0 : _this$layer.props.fetch;\n      const url = value;\n\n      if (fetch) {\n        value = fetch(url, {\n          propName,\n          layer: this.layer\n        });\n      }\n    }\n\n    if (value instanceof Promise) {\n      this._watchPromise(propName, value);\n\n      return;\n    }\n\n    if (isAsyncIterable(value)) {\n      this._resolveAsyncIterable(propName, value);\n\n      return;\n    }\n\n    this._setPropValue(propName, value);\n  }\n\n  _didAsyncInputValueChange(propName, value) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (value === asyncProp.resolvedValue || value === asyncProp.lastValue) {\n      return false;\n    }\n\n    asyncProp.lastValue = value;\n    return true;\n  }\n\n  _setPropValue(propName, value) {\n    const asyncProp = this.asyncProps[propName];\n    value = this._postProcessValue(asyncProp, value);\n    asyncProp.resolvedValue = value;\n    asyncProp.pendingLoadCount++;\n    asyncProp.resolvedLoadCount = asyncProp.pendingLoadCount;\n  }\n\n  _setAsyncPropValue(propName, value, loadCount) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (asyncProp && loadCount >= asyncProp.resolvedLoadCount && value !== undefined) {\n      this.freezeAsyncOldProps();\n      asyncProp.resolvedValue = value;\n      asyncProp.resolvedLoadCount = loadCount;\n      this.onAsyncPropUpdated(propName, value);\n    }\n  }\n\n  _watchPromise(propName, promise) {\n    const asyncProp = this.asyncProps[propName];\n    asyncProp.pendingLoadCount++;\n    const loadCount = asyncProp.pendingLoadCount;\n    promise.then(data => {\n      var _this$layer2;\n\n      data = this._postProcessValue(asyncProp, data);\n\n      this._setAsyncPropValue(propName, data, loadCount);\n\n      const onDataLoad = (_this$layer2 = this.layer) === null || _this$layer2 === void 0 ? void 0 : _this$layer2.props.onDataLoad;\n\n      if (propName === 'data' && onDataLoad) {\n        onDataLoad(data, {\n          propName,\n          layer: this.layer\n        });\n      }\n    }).catch(error => {\n      var _this$layer3;\n\n      (_this$layer3 = this.layer) === null || _this$layer3 === void 0 ? void 0 : _this$layer3.raiseError(error, \"loading \".concat(propName, \" of \").concat(this.layer));\n    });\n  }\n\n  async _resolveAsyncIterable(propName, iterable) {\n    var _this$layer4;\n\n    if (propName !== 'data') {\n      this._setPropValue(propName, iterable);\n    }\n\n    const asyncProp = this.asyncProps[propName];\n    asyncProp.pendingLoadCount++;\n    const loadCount = asyncProp.pendingLoadCount;\n    let data = [];\n    let count = 0;\n\n    for await (const chunk of iterable) {\n      const {\n        dataTransform\n      } = this.component ? this.component.props : {};\n\n      if (dataTransform) {\n        data = dataTransform(chunk, data);\n      } else {\n        data = data.concat(chunk);\n      }\n\n      Object.defineProperty(data, '__diff', {\n        enumerable: false,\n        value: [{\n          startRow: count,\n          endRow: data.length\n        }]\n      });\n      count = data.length;\n\n      this._setAsyncPropValue(propName, data, loadCount);\n    }\n\n    const onDataLoad = (_this$layer4 = this.layer) === null || _this$layer4 === void 0 ? void 0 : _this$layer4.props.onDataLoad;\n\n    if (onDataLoad) {\n      onDataLoad(data, {\n        propName,\n        layer: this.layer\n      });\n    }\n  }\n\n  _postProcessValue(asyncProp, value) {\n    const propType = asyncProp.type;\n\n    if (propType) {\n      if (propType.release) {\n        propType.release(asyncProp.resolvedValue, propType, this.component);\n      }\n\n      if (propType.transform) {\n        return propType.transform(value, propType, this.component);\n      }\n    }\n\n    return value;\n  }\n\n  _createAsyncPropData(propName, defaultValue) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (!asyncProp) {\n      const propTypes = this.component && this.component.constructor._propTypes;\n      this.asyncProps[propName] = {\n        type: propTypes && propTypes[propName],\n        lastValue: null,\n        resolvedValue: defaultValue,\n        pendingLoadCount: 0,\n        resolvedLoadCount: 0\n      };\n    }\n  }\n\n}\n//# sourceMappingURL=component-state.js.map","import { LIFECYCLE } from '../lifecycle/constants';\nimport { createProps } from './create-props';\nimport { PROP_SYMBOLS } from './constants';\nconst {\n  ASYNC_ORIGINAL,\n  ASYNC_RESOLVED,\n  ASYNC_DEFAULTS\n} = PROP_SYMBOLS;\nimport ComponentState from './component-state';\nconst defaultProps = {};\nlet counter = 0;\nexport default class Component {\n  constructor() {\n    this.props = createProps.apply(this, arguments);\n    this.id = this.props.id;\n    this.count = counter++;\n    this.lifecycle = LIFECYCLE.NO_STATE;\n    this.parent = null;\n    this.context = null;\n    this.state = null;\n    this.internalState = null;\n    Object.seal(this);\n  }\n\n  clone(newProps) {\n    const {\n      props\n    } = this;\n    const asyncProps = {};\n\n    for (const key in props[ASYNC_DEFAULTS]) {\n      if (key in props[ASYNC_RESOLVED]) {\n        asyncProps[key] = props[ASYNC_RESOLVED][key];\n      } else if (key in props[ASYNC_ORIGINAL]) {\n        asyncProps[key] = props[ASYNC_ORIGINAL][key];\n      }\n    }\n\n    return new this.constructor({ ...props,\n      ...asyncProps,\n      ...newProps\n    });\n  }\n\n  get stats() {\n    return this.internalState.stats;\n  }\n\n  _initState() {\n    this.internalState = new ComponentState({});\n  }\n\n}\nComponent.componentName = 'Component';\nComponent.defaultProps = defaultProps;\n//# sourceMappingURL=component.js.map","import ComponentState from '../lifecycle/component-state';\nexport default class LayerState extends ComponentState {\n  constructor({\n    attributeManager,\n    layer\n  }) {\n    super(layer);\n    this.attributeManager = attributeManager;\n    this.model = null;\n    this.needsRedraw = true;\n    this.subLayers = null;\n    this.usesPickingColorCache = false;\n  }\n\n  get layer() {\n    return this.component;\n  }\n\n  set layer(layer) {\n    this.component = layer;\n  }\n\n}\n//# sourceMappingURL=layer-state.js.map","import { COORDINATE_SYSTEM } from './constants';\nimport AttributeManager from './attribute/attribute-manager';\nimport UniformTransitionManager from './uniform-transition-manager';\nimport { diffProps, validateProps } from '../lifecycle/props';\nimport { count } from '../utils/count';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { withParameters, setParameters } from '@luma.gl/core';\nimport assert from '../utils/assert';\nimport memoize from '../utils/memoize';\nimport { mergeShaders } from '../utils/shader';\nimport { projectPosition, getWorldPosition } from '../shaderlib/project/project-functions';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport Component from '../lifecycle/component';\nimport LayerState from './layer-state';\nimport { worldToPixels } from '@math.gl/web-mercator';\nimport { load } from '@loaders.gl/core';\nconst TRACE_CHANGE_FLAG = 'layer.changeFlag';\nconst TRACE_INITIALIZE = 'layer.initialize';\nconst TRACE_UPDATE = 'layer.update';\nconst TRACE_FINALIZE = 'layer.finalize';\nconst TRACE_MATCHED = 'layer.matched';\nconst MAX_PICKING_COLOR_CACHE_SIZE = 2 ** 24 - 1;\nconst EMPTY_ARRAY = Object.freeze([]);\nconst areViewportsEqual = memoize(({\n  oldViewport,\n  viewport\n}) => {\n  return oldViewport.equals(viewport);\n});\nlet pickingColorCache = new Uint8ClampedArray(0);\nconst defaultProps = {\n  data: {\n    type: 'data',\n    value: EMPTY_ARRAY,\n    async: true\n  },\n  dataComparator: null,\n  _dataDiff: {\n    type: 'function',\n    value: data => data && data.__diff,\n    compare: false,\n    optional: true\n  },\n  dataTransform: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDataLoad: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onError: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  fetch: {\n    type: 'function',\n    value: (url, {\n      propName,\n      layer,\n      loaders,\n      loadOptions,\n      signal\n    }) => {\n      const {\n        resourceManager\n      } = layer.context;\n      loadOptions = loadOptions || layer.getLoadOptions();\n      loaders = loaders || layer.props.loaders;\n\n      if (signal) {\n        var _loadOptions;\n\n        loadOptions = { ...loadOptions,\n          fetch: { ...((_loadOptions = loadOptions) === null || _loadOptions === void 0 ? void 0 : _loadOptions.fetch),\n            signal\n          }\n        };\n      }\n\n      let inResourceManager = resourceManager.contains(url);\n\n      if (!inResourceManager && !loadOptions) {\n        resourceManager.add({\n          resourceId: url,\n          data: load(url, loaders),\n          persistent: false\n        });\n        inResourceManager = true;\n      }\n\n      if (inResourceManager) {\n        return resourceManager.subscribe({\n          resourceId: url,\n          onChange: data => layer.internalState.reloadAsyncProp(propName, data),\n          consumerId: layer.id,\n          requestId: propName\n        });\n      }\n\n      return load(url, loaders, loadOptions);\n    },\n    compare: false\n  },\n  updateTriggers: {},\n  visible: true,\n  pickable: false,\n  opacity: {\n    type: 'number',\n    min: 0,\n    max: 1,\n    value: 1\n  },\n  onHover: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onClick: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragStart: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDrag: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragEnd: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  coordinateSystem: COORDINATE_SYSTEM.DEFAULT,\n  coordinateOrigin: {\n    type: 'array',\n    value: [0, 0, 0],\n    compare: true\n  },\n  modelMatrix: {\n    type: 'array',\n    value: null,\n    compare: true,\n    optional: true\n  },\n  wrapLongitude: false,\n  positionFormat: 'XYZ',\n  colorFormat: 'RGBA',\n  parameters: {},\n  transitions: null,\n  extensions: [],\n  loaders: {\n    type: 'array',\n    value: [],\n    optional: true,\n    compare: true\n  },\n  getPolygonOffset: {\n    type: 'function',\n    value: ({\n      layerIndex\n    }) => [0, -layerIndex * 100],\n    compare: false\n  },\n  highlightedObjectIndex: -1,\n  autoHighlight: false,\n  highlightColor: {\n    type: 'accessor',\n    value: [0, 0, 128, 128]\n  }\n};\nexport default class Layer extends Component {\n  toString() {\n    const className = this.constructor.layerName || this.constructor.name;\n    return \"\".concat(className, \"({id: '\").concat(this.props.id, \"'})\");\n  }\n\n  raiseError(error, message) {\n    var _this$props$onError, _this$props;\n\n    if (message) {\n      error.message = \"\".concat(message, \": \").concat(error.message);\n    }\n\n    if (!((_this$props$onError = (_this$props = this.props).onError) === null || _this$props$onError === void 0 ? void 0 : _this$props$onError.call(_this$props, error))) {\n      var _this$context, _this$context$onError;\n\n      (_this$context = this.context) === null || _this$context === void 0 ? void 0 : (_this$context$onError = _this$context.onError) === null || _this$context$onError === void 0 ? void 0 : _this$context$onError.call(_this$context, error, this);\n    }\n  }\n\n  setState(updateObject) {\n    this.setChangeFlags({\n      stateChanged: true\n    });\n    Object.assign(this.state, updateObject);\n    this.setNeedsRedraw();\n  }\n\n  setNeedsRedraw(redraw = true) {\n    if (this.internalState) {\n      this.internalState.needsRedraw = redraw;\n    }\n  }\n\n  setNeedsUpdate() {\n    this.context.layerManager.setNeedsUpdate(String(this));\n    this.internalState.needsUpdate = true;\n  }\n\n  getNeedsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    return this._getNeedsRedraw(opts);\n  }\n\n  needsUpdate() {\n    return this.internalState.needsUpdate || this.hasUniformTransition() || this.shouldUpdateState(this._getUpdateParams());\n  }\n\n  hasUniformTransition() {\n    return this.internalState.uniformTransitions.active;\n  }\n\n  get isLoaded() {\n    return this.internalState && !this.internalState.isAsyncPropLoading();\n  }\n\n  get wrapLongitude() {\n    return this.props.wrapLongitude;\n  }\n\n  isPickable() {\n    return this.props.pickable && this.props.visible;\n  }\n\n  getModels() {\n    return this.state && (this.state.models || (this.state.model ? [this.state.model] : []));\n  }\n\n  getAttributeManager() {\n    return this.internalState && this.internalState.attributeManager;\n  }\n\n  getCurrentLayer() {\n    return this.internalState && this.internalState.layer;\n  }\n\n  getLoadOptions() {\n    return this.props.loadOptions;\n  }\n\n  project(xyz) {\n    const {\n      viewport\n    } = this.context;\n    const worldPosition = getWorldPosition(xyz, {\n      viewport,\n      modelMatrix: this.props.modelMatrix,\n      coordinateOrigin: this.props.coordinateOrigin,\n      coordinateSystem: this.props.coordinateSystem\n    });\n    const [x, y, z] = worldToPixels(worldPosition, viewport.pixelProjectionMatrix);\n    return xyz.length === 2 ? [x, y] : [x, y, z];\n  }\n\n  unproject(xy) {\n    const {\n      viewport\n    } = this.context;\n    return viewport.unproject(xy);\n  }\n\n  projectPosition(xyz) {\n    return projectPosition(xyz, {\n      viewport: this.context.viewport,\n      modelMatrix: this.props.modelMatrix,\n      coordinateOrigin: this.props.coordinateOrigin,\n      coordinateSystem: this.props.coordinateSystem\n    });\n  }\n\n  use64bitPositions() {\n    const {\n      coordinateSystem\n    } = this.props;\n    return coordinateSystem === COORDINATE_SYSTEM.DEFAULT || coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  onHover(info, pickingEvent) {\n    if (this.props.onHover) {\n      return this.props.onHover(info, pickingEvent);\n    }\n\n    return false;\n  }\n\n  onClick(info, pickingEvent) {\n    if (this.props.onClick) {\n      return this.props.onClick(info, pickingEvent);\n    }\n\n    return false;\n  }\n\n  nullPickingColor() {\n    return [0, 0, 0];\n  }\n\n  encodePickingColor(i, target = []) {\n    target[0] = i + 1 & 255;\n    target[1] = i + 1 >> 8 & 255;\n    target[2] = i + 1 >> 8 >> 8 & 255;\n    return target;\n  }\n\n  decodePickingColor(color) {\n    assert(color instanceof Uint8Array);\n    const [i1, i2, i3] = color;\n    const index = i1 + i2 * 256 + i3 * 65536 - 1;\n    return index;\n  }\n\n  initializeState() {\n    throw new Error(\"Layer \".concat(this, \" has not defined initializeState\"));\n  }\n\n  getShaders(shaders) {\n    for (const extension of this.props.extensions) {\n      shaders = mergeShaders(shaders, extension.getShaders.call(this, extension));\n    }\n\n    return shaders;\n  }\n\n  shouldUpdateState({\n    oldProps,\n    props,\n    context,\n    changeFlags\n  }) {\n    return changeFlags.propsOrDataChanged;\n  }\n\n  updateState({\n    oldProps,\n    props,\n    context,\n    changeFlags\n  }) {\n    const attributeManager = this.getAttributeManager();\n\n    if (changeFlags.dataChanged && attributeManager) {\n      const {\n        dataChanged\n      } = changeFlags;\n\n      if (Array.isArray(dataChanged)) {\n        for (const dataRange of dataChanged) {\n          attributeManager.invalidateAll(dataRange);\n        }\n      } else {\n        attributeManager.invalidateAll();\n      }\n    }\n\n    const neededPickingBuffer = oldProps.highlightedObjectIndex >= 0 || oldProps.pickable;\n    const needPickingBuffer = props.highlightedObjectIndex >= 0 || props.pickable;\n\n    if (neededPickingBuffer !== needPickingBuffer && attributeManager) {\n      const {\n        pickingColors,\n        instancePickingColors\n      } = attributeManager.attributes;\n      const pickingColorsAttribute = pickingColors || instancePickingColors;\n\n      if (pickingColorsAttribute) {\n        if (needPickingBuffer && pickingColorsAttribute.constant) {\n          pickingColorsAttribute.constant = false;\n          attributeManager.invalidate(pickingColorsAttribute.id);\n        }\n\n        if (!pickingColorsAttribute.value && !needPickingBuffer) {\n          pickingColorsAttribute.constant = true;\n          pickingColorsAttribute.value = [0, 0, 0];\n        }\n      }\n    }\n  }\n\n  finalizeState() {\n    for (const model of this.getModels()) {\n      model.delete();\n    }\n\n    const attributeManager = this.getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.finalize();\n    }\n\n    this.context.resourceManager.unsubscribe({\n      consumerId: this.id\n    });\n    this.internalState.uniformTransitions.clear();\n    this.internalState.finalize();\n  }\n\n  draw(opts) {\n    for (const model of this.getModels()) {\n      model.draw(opts);\n    }\n  }\n\n  getPickingInfo({\n    info,\n    mode\n  }) {\n    const {\n      index\n    } = info;\n\n    if (index >= 0) {\n      if (Array.isArray(this.props.data)) {\n        info.object = this.props.data[index];\n      }\n    }\n\n    return info;\n  }\n\n  activateViewport(viewport) {\n    const oldViewport = this.internalState.viewport;\n    this.internalState.viewport = viewport;\n\n    if (!oldViewport || !areViewportsEqual({\n      oldViewport,\n      viewport\n    })) {\n      this.setChangeFlags({\n        viewportChanged: true\n      });\n\n      if (this.isComposite) {\n        if (this.needsUpdate()) {\n          this.setNeedsUpdate();\n        }\n      } else {\n        this._update();\n      }\n    }\n  }\n\n  invalidateAttribute(name = 'all', diffReason = '') {\n    const attributeManager = this.getAttributeManager();\n\n    if (!attributeManager) {\n      return;\n    }\n\n    if (name === 'all') {\n      attributeManager.invalidateAll();\n    } else {\n      attributeManager.invalidate(name);\n    }\n  }\n\n  updateAttributes(changedAttributes) {\n    for (const model of this.getModels()) {\n      this._setModelAttributes(model, changedAttributes);\n    }\n  }\n\n  _updateAttributes(props) {\n    const attributeManager = this.getAttributeManager();\n\n    if (!attributeManager) {\n      return;\n    }\n\n    const numInstances = this.getNumInstances(props);\n    const startIndices = this.getStartIndices(props);\n    attributeManager.update({\n      data: props.data,\n      numInstances,\n      startIndices,\n      props,\n      transitions: props.transitions,\n      buffers: props.data.attributes,\n      context: this,\n      ignoreUnknownAttributes: true\n    });\n    const changedAttributes = attributeManager.getChangedAttributes({\n      clearChangedFlags: true\n    });\n    this.updateAttributes(changedAttributes);\n  }\n\n  _updateAttributeTransition() {\n    const attributeManager = this.getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.updateTransition();\n    }\n  }\n\n  _updateUniformTransition() {\n    const {\n      uniformTransitions\n    } = this.internalState;\n\n    if (uniformTransitions.active) {\n      const propsInTransition = uniformTransitions.update();\n      const props = Object.create(this.props);\n\n      for (const key in propsInTransition) {\n        Object.defineProperty(props, key, {\n          value: propsInTransition[key]\n        });\n      }\n\n      return props;\n    }\n\n    return this.props;\n  }\n\n  calculateInstancePickingColors(attribute, {\n    numInstances\n  }) {\n    if (attribute.constant) {\n      return;\n    }\n\n    const cacheSize = Math.floor(pickingColorCache.length / 3);\n    this.internalState.usesPickingColorCache = true;\n\n    if (cacheSize < numInstances) {\n      if (numInstances > MAX_PICKING_COLOR_CACHE_SIZE) {\n        log.warn('Layer has too many data objects. Picking might not be able to distinguish all objects.')();\n      }\n\n      pickingColorCache = typedArrayManager.allocate(pickingColorCache, numInstances, {\n        size: 3,\n        copy: true,\n        maxCount: Math.max(numInstances, MAX_PICKING_COLOR_CACHE_SIZE)\n      });\n      const newCacheSize = Math.floor(pickingColorCache.length / 3);\n      const pickingColor = [];\n\n      for (let i = cacheSize; i < newCacheSize; i++) {\n        this.encodePickingColor(i, pickingColor);\n        pickingColorCache[i * 3 + 0] = pickingColor[0];\n        pickingColorCache[i * 3 + 1] = pickingColor[1];\n        pickingColorCache[i * 3 + 2] = pickingColor[2];\n      }\n    }\n\n    attribute.value = pickingColorCache.subarray(0, numInstances * 3);\n  }\n\n  _setModelAttributes(model, changedAttributes) {\n    const attributeManager = this.getAttributeManager();\n    const excludeAttributes = model.userData.excludeAttributes || {};\n    const shaderAttributes = attributeManager.getShaderAttributes(changedAttributes, excludeAttributes);\n    model.setAttributes(shaderAttributes);\n  }\n\n  disablePickingIndex(objectIndex) {\n    this._disablePickingIndex(objectIndex);\n  }\n\n  _disablePickingIndex(objectIndex) {\n    const {\n      pickingColors,\n      instancePickingColors\n    } = this.getAttributeManager().attributes;\n    const colors = pickingColors || instancePickingColors;\n    const start = colors.getVertexOffset(objectIndex);\n    const end = colors.getVertexOffset(objectIndex + 1);\n    colors.buffer.subData({\n      data: new Uint8Array(end - start),\n      offset: start\n    });\n  }\n\n  restorePickingColors() {\n    const {\n      pickingColors,\n      instancePickingColors\n    } = this.getAttributeManager().attributes;\n    const colors = pickingColors || instancePickingColors;\n\n    if (this.internalState.usesPickingColorCache && colors.value.buffer !== pickingColorCache.buffer) {\n      colors.value = pickingColorCache.subarray(0, colors.value.length);\n    }\n\n    colors.updateSubBuffer({\n      startOffset: 0\n    });\n  }\n\n  getNumInstances(props) {\n    props = props || this.props;\n\n    if (props.numInstances !== undefined) {\n      return props.numInstances;\n    }\n\n    if (this.state && this.state.numInstances !== undefined) {\n      return this.state.numInstances;\n    }\n\n    return count(props.data);\n  }\n\n  getStartIndices(props) {\n    props = props || this.props;\n\n    if (props.startIndices !== undefined) {\n      return props.startIndices;\n    }\n\n    if (this.state && this.state.startIndices) {\n      return this.state.startIndices;\n    }\n\n    return null;\n  }\n\n  _initialize() {\n    debug(TRACE_INITIALIZE, this);\n\n    this._initState();\n\n    this.initializeState(this.context);\n\n    for (const extension of this.props.extensions) {\n      extension.initializeState.call(this, this.context, extension);\n    }\n\n    this.setChangeFlags({\n      dataChanged: true,\n      propsChanged: true,\n      viewportChanged: true,\n      extensionsChanged: true\n    });\n\n    this._updateState();\n  }\n\n  _update() {\n    const stateNeedsUpdate = this.needsUpdate();\n    debug(TRACE_UPDATE, this, stateNeedsUpdate);\n\n    if (stateNeedsUpdate) {\n      this._updateState();\n    }\n  }\n\n  _updateState() {\n    const currentProps = this.props;\n    const currentViewport = this.context.viewport;\n\n    const propsInTransition = this._updateUniformTransition();\n\n    this.internalState.propsInTransition = propsInTransition;\n    this.context.viewport = this.internalState.viewport || currentViewport;\n    this.props = propsInTransition;\n\n    try {\n      const updateParams = this._getUpdateParams();\n\n      const oldModels = this.getModels();\n\n      if (this.context.gl) {\n        this.updateState(updateParams);\n      } else {\n        try {\n          this.updateState(updateParams);\n        } catch (error) {}\n      }\n\n      for (const extension of this.props.extensions) {\n        extension.updateState.call(this, updateParams, extension);\n      }\n\n      const modelChanged = this.getModels()[0] !== oldModels[0];\n\n      this._updateModules(updateParams, modelChanged);\n\n      if (this.isComposite) {\n        this._renderLayers(updateParams);\n      } else {\n        this.setNeedsRedraw();\n\n        this._updateAttributes(this.props);\n\n        if (this.state.model) {\n          this.state.model.setInstanceCount(this.getNumInstances());\n        }\n      }\n    } finally {\n      this.context.viewport = currentViewport;\n      this.props = currentProps;\n      this.clearChangeFlags();\n      this.internalState.needsUpdate = false;\n      this.internalState.resetOldProps();\n    }\n  }\n\n  _finalize() {\n    debug(TRACE_FINALIZE, this);\n    this.finalizeState(this.context);\n\n    for (const extension of this.props.extensions) {\n      extension.finalizeState.call(this, extension);\n    }\n  }\n\n  drawLayer({\n    moduleParameters = null,\n    uniforms = {},\n    parameters = {}\n  }) {\n    this._updateAttributeTransition();\n\n    const currentProps = this.props;\n    this.props = this.internalState.propsInTransition || currentProps;\n    const {\n      opacity\n    } = this.props;\n    uniforms.opacity = Math.pow(opacity, 1 / 2.2);\n\n    try {\n      if (moduleParameters) {\n        this.setModuleParameters(moduleParameters);\n      }\n\n      const {\n        getPolygonOffset\n      } = this.props;\n      const offsets = getPolygonOffset && getPolygonOffset(uniforms) || [0, 0];\n      setParameters(this.context.gl, {\n        polygonOffset: offsets\n      });\n      withParameters(this.context.gl, parameters, () => {\n        const opts = {\n          moduleParameters,\n          uniforms,\n          parameters,\n          context: this.context\n        };\n\n        for (const extension of this.props.extensions) {\n          extension.draw.call(this, opts, extension);\n        }\n\n        this.draw(opts);\n      });\n    } finally {\n      this.props = currentProps;\n    }\n  }\n\n  getChangeFlags() {\n    return this.internalState.changeFlags;\n  }\n\n  setChangeFlags(flags) {\n    const {\n      changeFlags\n    } = this.internalState;\n\n    for (const key in flags) {\n      if (flags[key]) {\n        let flagChanged = false;\n\n        switch (key) {\n          case 'dataChanged':\n            if (Array.isArray(changeFlags[key])) {\n              changeFlags[key] = Array.isArray(flags[key]) ? changeFlags[key].concat(flags[key]) : flags[key];\n              flagChanged = true;\n            }\n\n          default:\n            if (!changeFlags[key]) {\n              changeFlags[key] = flags[key];\n              flagChanged = true;\n            }\n\n        }\n\n        if (flagChanged) {\n          debug(TRACE_CHANGE_FLAG, this, key, flags);\n        }\n      }\n    }\n\n    const propsOrDataChanged = changeFlags.dataChanged || changeFlags.updateTriggersChanged || changeFlags.propsChanged || changeFlags.extensionsChanged;\n    changeFlags.propsOrDataChanged = propsOrDataChanged;\n    changeFlags.somethingChanged = propsOrDataChanged || flags.viewportChanged || flags.stateChanged;\n  }\n\n  clearChangeFlags() {\n    this.internalState.changeFlags = {\n      dataChanged: false,\n      propsChanged: false,\n      updateTriggersChanged: false,\n      viewportChanged: false,\n      stateChanged: false,\n      extensionsChanged: false,\n      propsOrDataChanged: false,\n      somethingChanged: false\n    };\n  }\n\n  diffProps(newProps, oldProps) {\n    const changeFlags = diffProps(newProps, oldProps);\n\n    if (changeFlags.updateTriggersChanged) {\n      for (const key in changeFlags.updateTriggersChanged) {\n        if (changeFlags.updateTriggersChanged[key]) {\n          this.invalidateAttribute(key);\n        }\n      }\n    }\n\n    if (changeFlags.transitionsChanged) {\n      for (const key in changeFlags.transitionsChanged) {\n        this.internalState.uniformTransitions.add(key, oldProps[key], newProps[key], newProps.transitions[key]);\n      }\n    }\n\n    return this.setChangeFlags(changeFlags);\n  }\n\n  validateProps() {\n    validateProps(this.props);\n  }\n\n  setModuleParameters(moduleParameters) {\n    for (const model of this.getModels()) {\n      model.updateModuleSettings(moduleParameters);\n    }\n  }\n\n  updateAutoHighlight(info) {\n    if (this.props.autoHighlight) {\n      this._updateAutoHighlight(info);\n    }\n  }\n\n  _updateAutoHighlight(info) {\n    const pickingModuleParameters = {\n      pickingSelectedColor: info.picked ? info.color : null\n    };\n    const {\n      highlightColor\n    } = this.props;\n\n    if (info.picked && typeof highlightColor === 'function') {\n      pickingModuleParameters.pickingHighlightColor = highlightColor(info);\n    }\n\n    this.setModuleParameters(pickingModuleParameters);\n    this.setNeedsRedraw();\n  }\n\n  _updateModules({\n    props,\n    oldProps\n  }, forceUpdate) {\n    const {\n      autoHighlight,\n      highlightedObjectIndex,\n      highlightColor\n    } = props;\n\n    if (forceUpdate || oldProps.autoHighlight !== autoHighlight || oldProps.highlightedObjectIndex !== highlightedObjectIndex || oldProps.highlightColor !== highlightColor) {\n      const parameters = {};\n\n      if (!autoHighlight) {\n        parameters.pickingSelectedColor = null;\n      }\n\n      if (Array.isArray(highlightColor)) {\n        parameters.pickingHighlightColor = highlightColor;\n      }\n\n      if (Number.isInteger(highlightedObjectIndex)) {\n        parameters.pickingSelectedColor = highlightedObjectIndex >= 0 ? this.encodePickingColor(highlightedObjectIndex) : null;\n      }\n\n      this.setModuleParameters(parameters);\n    }\n  }\n\n  _getUpdateParams() {\n    return {\n      props: this.props,\n      oldProps: this.internalState.getOldProps(),\n      context: this.context,\n      changeFlags: this.internalState.changeFlags\n    };\n  }\n\n  _getNeedsRedraw(opts) {\n    if (!this.internalState) {\n      return false;\n    }\n\n    let redraw = false;\n    redraw = redraw || this.internalState.needsRedraw && this.id;\n    this.internalState.needsRedraw = this.internalState.needsRedraw && !opts.clearRedrawFlags;\n    const attributeManager = this.getAttributeManager();\n    const attributeManagerNeedsRedraw = attributeManager && attributeManager.getNeedsRedraw(opts);\n    redraw = redraw || attributeManagerNeedsRedraw;\n    return redraw;\n  }\n\n  _getAttributeManager() {\n    return new AttributeManager(this.context.gl, {\n      id: this.props.id,\n      stats: this.context.stats,\n      timeline: this.context.timeline\n    });\n  }\n\n  _initState() {\n    assert(!this.internalState && !this.state);\n    assert(isFinite(this.props.coordinateSystem));\n\n    const attributeManager = this._getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.addInstanced({\n        instancePickingColors: {\n          type: 5121,\n          size: 3,\n          noAlloc: true,\n          update: this.calculateInstancePickingColors\n        }\n      });\n    }\n\n    this.internalState = new LayerState({\n      attributeManager,\n      layer: this\n    });\n    this.clearChangeFlags();\n    this.state = {};\n    Object.defineProperty(this.state, 'attributeManager', {\n      get: () => {\n        log.deprecated('layer.state.attributeManager', 'layer.getAttributeManager()');\n        return attributeManager;\n      }\n    });\n    this.internalState.layer = this;\n    this.internalState.uniformTransitions = new UniformTransitionManager(this.context.timeline);\n    this.internalState.onAsyncPropUpdated = this._onAsyncPropUpdated.bind(this);\n    this.internalState.setAsyncProps(this.props);\n  }\n\n  _transferState(oldLayer) {\n    debug(TRACE_MATCHED, this, this === oldLayer);\n    const {\n      state,\n      internalState\n    } = oldLayer;\n\n    if (this === oldLayer) {\n      return;\n    }\n\n    this.internalState = internalState;\n    this.internalState.layer = this;\n    this.state = state;\n    this.internalState.setAsyncProps(this.props);\n    this.diffProps(this.props, this.internalState.getOldProps());\n  }\n\n  _onAsyncPropUpdated() {\n    this.diffProps(this.props, this.internalState.getOldProps());\n    this.setNeedsUpdate();\n  }\n\n}\nLayer.layerName = 'Layer';\nLayer.defaultProps = defaultProps;\n//# sourceMappingURL=layer.js.map","const ERR_NOT_OBJECT = 'count(): argument not an object';\nconst ERR_NOT_CONTAINER = 'count(): argument not a container';\nexport function count(container) {\n  if (!isObject(container)) {\n    throw new Error(ERR_NOT_OBJECT);\n  }\n\n  if (typeof container.count === 'function') {\n    return container.count();\n  }\n\n  if (Number.isFinite(container.size)) {\n    return container.size;\n  }\n\n  if (Number.isFinite(container.length)) {\n    return container.length;\n  }\n\n  if (isPlainObject(container)) {\n    return Object.keys(container).length;\n  }\n\n  throw new Error(ERR_NOT_CONTAINER);\n}\n\nfunction isPlainObject(value) {\n  return value !== null && typeof value === 'object' && value.constructor === Object;\n}\n\nfunction isObject(value) {\n  return value !== null && typeof value === 'object';\n}\n//# sourceMappingURL=count.js.map","export const LIFECYCLE = {\n  NO_STATE: 'Awaiting state',\n  MATCHED: 'Matched. State transferred from previous layer',\n  INITIALIZED: 'Initialized',\n  AWAITING_GC: 'Discarded. Awaiting garbage collection',\n  AWAITING_FINALIZATION: 'No longer matched. Awaiting garbage collection',\n  FINALIZED: 'Finalized! Awaiting garbage collection'\n};\nexport const PROP_SYMBOLS = {\n  COMPONENT: Symbol.for('component'),\n  ASYNC_DEFAULTS: Symbol.for('asyncPropDefaults'),\n  ASYNC_ORIGINAL: Symbol.for('asyncPropOriginal'),\n  ASYNC_RESOLVED: Symbol.for('asyncPropResolved')\n};\n//# sourceMappingURL=constants.js.map","import { PROP_SYMBOLS } from './constants';\nconst {\n  COMPONENT\n} = PROP_SYMBOLS;\nexport function validateProps(props) {\n  const propTypes = getPropTypes(props);\n\n  for (const propName in propTypes) {\n    const propType = propTypes[propName];\n    const {\n      validate\n    } = propType;\n\n    if (validate && !validate(props[propName], propType)) {\n      throw new Error(\"Invalid prop \".concat(propName, \": \").concat(props[propName]));\n    }\n  }\n}\nexport function diffProps(props, oldProps) {\n  const propsChangedReason = compareProps({\n    newProps: props,\n    oldProps,\n    propTypes: getPropTypes(props),\n    ignoreProps: {\n      data: null,\n      updateTriggers: null,\n      extensions: null,\n      transitions: null\n    }\n  });\n  const dataChangedReason = diffDataProps(props, oldProps);\n  let updateTriggersChangedReason = false;\n\n  if (!dataChangedReason) {\n    updateTriggersChangedReason = diffUpdateTriggers(props, oldProps);\n  }\n\n  return {\n    dataChanged: dataChangedReason,\n    propsChanged: propsChangedReason,\n    updateTriggersChanged: updateTriggersChangedReason,\n    extensionsChanged: diffExtensions(props, oldProps),\n    transitionsChanged: diffTransitions(props, oldProps)\n  };\n}\n\nfunction diffTransitions(props, oldProps) {\n  if (!props.transitions) {\n    return null;\n  }\n\n  const result = {};\n  const propTypes = getPropTypes(props);\n\n  for (const key in props.transitions) {\n    const propType = propTypes[key];\n    const type = propType && propType.type;\n    const isTransitionable = type === 'number' || type === 'color' || type === 'array';\n\n    if (isTransitionable && comparePropValues(props[key], oldProps[key], propType)) {\n      result[key] = true;\n    }\n  }\n\n  return result;\n}\n\nexport function compareProps({\n  newProps,\n  oldProps,\n  ignoreProps = {},\n  propTypes = {},\n  triggerName = 'props'\n} = {}) {\n  if (oldProps === newProps) {\n    return null;\n  }\n\n  if (typeof newProps !== 'object' || newProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  if (typeof oldProps !== 'object' || oldProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  for (const key of Object.keys(newProps)) {\n    if (!(key in ignoreProps)) {\n      if (!(key in oldProps)) {\n        return \"\".concat(triggerName, \".\").concat(key, \" added\");\n      }\n\n      const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n      if (changed) {\n        return \"\".concat(triggerName, \".\").concat(key, \" \").concat(changed);\n      }\n    }\n  }\n\n  for (const key of Object.keys(oldProps)) {\n    if (!(key in ignoreProps)) {\n      if (!(key in newProps)) {\n        return \"\".concat(triggerName, \".\").concat(key, \" dropped\");\n      }\n\n      if (!Object.hasOwnProperty.call(newProps, key)) {\n        const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n        if (changed) {\n          return \"\".concat(triggerName, \".\").concat(key, \" \").concat(changed);\n        }\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction comparePropValues(newProp, oldProp, propType) {\n  let equal = propType && propType.equal;\n\n  if (equal && !equal(newProp, oldProp, propType)) {\n    return 'changed deeply';\n  }\n\n  if (!equal) {\n    equal = newProp && oldProp && newProp.equals;\n\n    if (equal && !equal.call(newProp, oldProp)) {\n      return 'changed deeply';\n    }\n  }\n\n  if (!equal && oldProp !== newProp) {\n    return 'changed shallowly';\n  }\n\n  return null;\n}\n\nfunction diffDataProps(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  let dataChanged = null;\n  const {\n    dataComparator,\n    _dataDiff\n  } = props;\n\n  if (dataComparator) {\n    if (!dataComparator(props.data, oldProps.data)) {\n      dataChanged = 'Data comparator detected a change';\n    }\n  } else if (props.data !== oldProps.data) {\n    dataChanged = 'A new data container was supplied';\n  }\n\n  if (dataChanged && _dataDiff) {\n    dataChanged = _dataDiff(props.data, oldProps.data) || dataChanged;\n  }\n\n  return dataChanged;\n}\n\nfunction diffUpdateTriggers(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  if ('all' in props.updateTriggers) {\n    const diffReason = diffUpdateTrigger(props, oldProps, 'all');\n\n    if (diffReason) {\n      return {\n        all: true\n      };\n    }\n  }\n\n  const triggerChanged = {};\n  let reason = false;\n\n  for (const triggerName in props.updateTriggers) {\n    if (triggerName !== 'all') {\n      const diffReason = diffUpdateTrigger(props, oldProps, triggerName);\n\n      if (diffReason) {\n        triggerChanged[triggerName] = true;\n        reason = triggerChanged;\n      }\n    }\n  }\n\n  return reason;\n}\n\nfunction diffExtensions(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  const oldExtensions = oldProps.extensions;\n  const {\n    extensions\n  } = props;\n\n  if (extensions === oldExtensions) {\n    return false;\n  }\n\n  if (extensions.length !== oldExtensions.length) {\n    return true;\n  }\n\n  for (let i = 0; i < extensions.length; i++) {\n    if (!extensions[i].equals(oldExtensions[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction diffUpdateTrigger(props, oldProps, triggerName) {\n  let newTriggers = props.updateTriggers[triggerName];\n  newTriggers = newTriggers === undefined || newTriggers === null ? {} : newTriggers;\n  let oldTriggers = oldProps.updateTriggers[triggerName];\n  oldTriggers = oldTriggers === undefined || oldTriggers === null ? {} : oldTriggers;\n  const diffReason = compareProps({\n    oldProps: oldTriggers,\n    newProps: newTriggers,\n    triggerName\n  });\n  return diffReason;\n}\n\nfunction getPropTypes(props) {\n  const layer = props[COMPONENT];\n  const LayerType = layer && layer.constructor;\n  return LayerType ? LayerType._propTypes : {};\n}\n//# sourceMappingURL=props.js.map","const DEFAULT_HIGHLIGHT_COLOR = new Uint8Array([0, 255, 255, 255]);\nconst DEFAULT_MODULE_OPTIONS = {\n  pickingSelectedColor: null,\n  pickingHighlightColor: DEFAULT_HIGHLIGHT_COLOR,\n  pickingActive: false,\n  pickingAttribute: false\n};\n\nfunction getUniforms(opts = DEFAULT_MODULE_OPTIONS) {\n  const uniforms = {};\n\n  if (opts.pickingSelectedColor !== undefined) {\n    if (!opts.pickingSelectedColor) {\n      uniforms.picking_uSelectedColorValid = 0;\n    } else {\n      const selectedColor = opts.pickingSelectedColor.slice(0, 3);\n      uniforms.picking_uSelectedColorValid = 1;\n      uniforms.picking_uSelectedColor = selectedColor;\n    }\n  }\n\n  if (opts.pickingHighlightColor) {\n    const color = Array.from(opts.pickingHighlightColor, x => x / 255);\n\n    if (!Number.isFinite(color[3])) {\n      color[3] = 1;\n    }\n\n    uniforms.picking_uHighlightColor = color;\n  }\n\n  if (opts.pickingActive !== undefined) {\n    uniforms.picking_uActive = Boolean(opts.pickingActive);\n    uniforms.picking_uAttribute = Boolean(opts.pickingAttribute);\n  }\n\n  return uniforms;\n}\n\nconst vs = \"uniform bool picking_uActive;\\nuniform bool picking_uAttribute;\\nuniform vec3 picking_uSelectedColor;\\nuniform bool picking_uSelectedColorValid;\\n\\nout vec4 picking_vRGBcolor_Avalid;\\n\\nconst float COLOR_SCALE = 1. / 255.;\\n\\nbool picking_isColorValid(vec3 color) {\\n  return dot(color, vec3(1.0)) > 0.001;\\n}\\n\\nbool isVertexPicked(vec3 vertexColor) {\\n  return\\n    picking_uSelectedColorValid &&\\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\\n}\\n\\nvoid picking_setPickingColor(vec3 pickingColor) {\\n  if (picking_uActive) {\\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\\n\\n    if (!picking_uAttribute) {\\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\\n    }\\n  } else {\\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\\n  }\\n}\\n\\nvoid picking_setPickingAttribute(float value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.r = value;\\n  }\\n}\\nvoid picking_setPickingAttribute(vec2 value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.rg = value;\\n  }\\n}\\nvoid picking_setPickingAttribute(vec3 value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.rgb = value;\\n  }\\n}\\n\";\nconst fs = \"uniform bool picking_uActive;\\nuniform vec3 picking_uSelectedColor;\\nuniform vec4 picking_uHighlightColor;\\n\\nin vec4 picking_vRGBcolor_Avalid;\\nvec4 picking_filterHighlightColor(vec4 color) {\\n  if (picking_uActive) {\\n    return color;\\n  }\\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\\n\\n  if (selected) {\\n    float highLightAlpha = picking_uHighlightColor.a;\\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\\n    float highLightRatio = highLightAlpha / blendedAlpha;\\n\\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\\n    return vec4(blendedRGB, blendedAlpha);\\n  } else {\\n    return color;\\n  }\\n}\\nvec4 picking_filterPickingColor(vec4 color) {\\n  if (picking_uActive) {\\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\\n      discard;\\n    }\\n    return picking_vRGBcolor_Avalid;\\n  }\\n  return color;\\n}\\nvec4 picking_filterColor(vec4 color) {\\n  vec4 highightColor = picking_filterHighlightColor(color);\\n  return picking_filterPickingColor(highightColor);\\n}\\n\\n\";\nexport const picking = {\n  name: 'picking',\n  vs,\n  fs,\n  getUniforms\n};\n//# sourceMappingURL=picking.js.map","import { picking } from '@luma.gl/core';\nexport default {\n  inject: {\n    'vs:DECKGL_FILTER_COLOR': \"\\n  picking_setPickingColor(geometry.pickingColor);\\n  // for picking depth values\\n  picking_setPickingAttribute(geometry.position.z);\\n  \",\n    'fs:DECKGL_FILTER_COLOR': {\n      order: 99,\n      injection: \"\\n  // use highlight color if this fragment belongs to the selected object.\\n  color = picking_filterHighlightColor(color);\\n\\n  // use picking color if rendering to picking FBO.\\n  color = picking_filterPickingColor(color);\\n    \"\n    }\n  },\n  ...picking\n};\n//# sourceMappingURL=picking.js.map","import { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nconst COORDINATE_SYSTEM_GLSL_CONSTANTS = Object.keys(COORDINATE_SYSTEM).map(key => \"const int COORDINATE_SYSTEM_\".concat(key, \" = \").concat(COORDINATE_SYSTEM[key], \";\")).join('');\nconst PROJECTION_MODE_GLSL_CONSTANTS = Object.keys(PROJECTION_MODE).map(key => \"const int PROJECTION_MODE_\".concat(key, \" = \").concat(PROJECTION_MODE[key], \";\")).join('');\nexport default \"\".concat(COORDINATE_SYSTEM_GLSL_CONSTANTS, \"\\n\").concat(PROJECTION_MODE_GLSL_CONSTANTS, \"\\n\\nuniform int project_uCoordinateSystem;\\nuniform int project_uProjectionMode;\\nuniform float project_uScale;\\nuniform bool project_uWrapLongitude;\\nuniform vec3 project_uCommonUnitsPerMeter;\\nuniform vec3 project_uCommonUnitsPerWorldUnit;\\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\\nuniform vec4 project_uCenter;\\nuniform mat4 project_uModelMatrix;\\nuniform mat4 project_uViewProjectionMatrix;\\nuniform vec2 project_uViewportSize;\\nuniform float project_uDevicePixelRatio;\\nuniform float project_uFocalDistance;\\nuniform vec3 project_uCameraPosition;\\nuniform vec3 project_uCoordinateOrigin;\\n\\nconst float TILE_SIZE = 512.0;\\nconst float PI = 3.1415926536;\\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\\nconst vec3 ZERO_64_LOW = vec3(0.0);\\nconst float EARTH_RADIUS = 6370972.0;\\nconst float GLOBE_RADIUS = 256.0;\\nfloat project_size(float meters) {\\n  return meters * project_uCommonUnitsPerMeter.z;\\n}\\n\\nvec2 project_size(vec2 meters) {\\n  return meters * project_uCommonUnitsPerMeter.xy;\\n}\\n\\nvec3 project_size(vec3 meters) {\\n  return meters * project_uCommonUnitsPerMeter;\\n}\\n\\nvec4 project_size(vec4 meters) {\\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\\n}\\nvec3 project_normal(vec3 vector) {\\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\\n}\\n\\nvec4 project_offset_(vec4 offset) {\\n  float dy = offset.y;\\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n    dy = clamp(dy, -1., 1.);\\n  }\\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\\n}\\nvec2 project_mercator_(vec2 lnglat) {\\n  float x = lnglat.x;\\n  if (project_uWrapLongitude) {\\n    x = mod(x + 180., 360.0) - 180.;\\n  }\\n  float y = clamp(lnglat.y, -89.9, 89.9);\\n  return vec2(\\n    radians(x) + PI,\\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\\n  );\\n}\\n\\nvec3 project_globe_(vec3 lnglatz) {\\n  float lambda = radians(lnglatz.x);\\n  float phi = radians(lnglatz.y);\\n  float cosPhi = cos(phi);\\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\\n\\n  return vec3(\\n    sin(lambda) * cosPhi,\\n    -cos(lambda) * cosPhi,\\n    sin(phi)\\n  ) * D;\\n}\\nvec4 project_position(vec4 position, vec3 position64Low) {\\n  vec4 position_world = project_uModelMatrix * position;\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_mercator_(position_world.xy) * WORLD_SCALE,\\n        project_size(position_world.z),\\n        position_world.w\\n      );\\n    }\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\\n      position_world.xyz += project_uCoordinateOrigin;\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_globe_(position_world.xyz),\\n        position_world.w\\n      );\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\\n    position_world.xyz -= project_uCoordinateOrigin;\\n  }\\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\\n}\\n\\nvec4 project_position(vec4 position) {\\n  return project_position(position, ZERO_64_LOW);\\n}\\n\\nvec3 project_position(vec3 position, vec3 position64Low) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\\n  return projected_position.xyz;\\n}\\n\\nvec3 project_position(vec3 position) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\\n  return projected_position.xyz;\\n}\\n\\nvec2 project_position(vec2 position) {\\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\\n  return projected_position.xy;\\n}\\n\\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\\n  return viewProjectionMatrix * position + center;\\n}\\nvec4 project_common_position_to_clipspace(vec4 position) {\\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\\n}\\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\\n  return offset * project_uFocalDistance;\\n}\\n\\nfloat project_size_to_pixel(float meters) {\\n  return project_size(meters) * project_uScale;\\n}\\nfloat project_pixel_size(float pixels) {\\n  return pixels / project_uScale;\\n}\\nvec2 project_pixel_size(vec2 pixels) {\\n  return pixels / project_uScale;\\n}\\nmat3 project_get_orientation_matrix(vec3 up) {\\n  vec3 uz = normalize(up);\\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\\n  vec3 uy = cross(uz, ux);\\n  return mat3(ux, uy, uz);\\n}\\n\\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    transform = project_get_orientation_matrix(commonPosition);\\n    return true;\\n  }\\n  return false;\\n}\\n\");\n//# sourceMappingURL=project.glsl.js.map","import { fp32 } from '@luma.gl/core';\nimport projectShader from './project.glsl';\nimport { getUniformsFromViewport } from './viewport-uniforms';\nconst INITIAL_MODULE_OPTIONS = {};\n\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  if (opts.viewport) {\n    return getUniformsFromViewport(opts);\n  }\n\n  return {};\n}\n\nexport default {\n  name: 'project',\n  dependencies: [fp32],\n  vs: projectShader,\n  getUniforms\n};\n//# sourceMappingURL=project.js.map","const fp32shader = \"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\nconst float TWO_PI = 6.2831854820251465;\\nconst float PI_2 = 1.5707963705062866;\\nconst float PI_16 = 0.1963495463132858;\\n\\nconst float SIN_TABLE_0 = 0.19509032368659973;\\nconst float SIN_TABLE_1 = 0.3826834261417389;\\nconst float SIN_TABLE_2 = 0.5555702447891235;\\nconst float SIN_TABLE_3 = 0.7071067690849304;\\n\\nconst float COS_TABLE_0 = 0.9807852506637573;\\nconst float COS_TABLE_1 = 0.9238795042037964;\\nconst float COS_TABLE_2 = 0.8314695954322815;\\nconst float COS_TABLE_3 = 0.7071067690849304;\\n\\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\\n\\nfloat sin_taylor_fp32(float a) {\\n  float r, s, t, x;\\n\\n  if (a == 0.0) {\\n    return 0.0;\\n  }\\n\\n  x = -a * a;\\n  s = a;\\n  r = a;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_3;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_5;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_7;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_9;\\n  s = s + t;\\n\\n  return s;\\n}\\n\\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\\n  if (a == 0.0) {\\n    sin_t = 0.0;\\n    cos_t = 1.0;\\n  }\\n  sin_t = sin_taylor_fp32(a);\\n  cos_t = sqrt(1.0 - sin_t * sin_t);\\n}\\n\\nfloat tan_taylor_fp32(float a) {\\n    float sin_a;\\n    float cos_a;\\n\\n    if (a == 0.0) {\\n        return 0.0;\\n    }\\n    float z = floor(a / TWO_PI);\\n    float r = a - TWO_PI * z;\\n\\n    float t;\\n    float q = floor(r / PI_2 + 0.5);\\n    int j = int(q);\\n\\n    if (j < -2 || j > 2) {\\n        return 0.0 / 0.0;\\n    }\\n\\n    t = r - PI_2 * q;\\n\\n    q = floor(t / PI_16 + 0.5);\\n    int k = int(q);\\n    int abs_k = int(abs(float(k)));\\n\\n    if (abs_k > 4) {\\n        return 0.0 / 0.0;\\n    } else {\\n        t = t - PI_16 * q;\\n    }\\n\\n    float u = 0.0;\\n    float v = 0.0;\\n\\n    float sin_t, cos_t;\\n    float s, c;\\n    sincos_taylor_fp32(t, sin_t, cos_t);\\n\\n    if (k == 0) {\\n        s = sin_t;\\n        c = cos_t;\\n    } else {\\n        if (abs(float(abs_k) - 1.0) < 0.5) {\\n            u = COS_TABLE_0;\\n            v = SIN_TABLE_0;\\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\\n            u = COS_TABLE_1;\\n            v = SIN_TABLE_1;\\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\\n            u = COS_TABLE_2;\\n            v = SIN_TABLE_2;\\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\\n            u = COS_TABLE_3;\\n            v = SIN_TABLE_3;\\n        }\\n        if (k > 0) {\\n            s = u * sin_t + v * cos_t;\\n            c = u * cos_t - v * sin_t;\\n        } else {\\n            s = u * sin_t - v * cos_t;\\n            c = u * cos_t + v * sin_t;\\n        }\\n    }\\n\\n    if (j == 0) {\\n        sin_a = s;\\n        cos_a = c;\\n    } else if (j == 1) {\\n        sin_a = c;\\n        cos_a = -s;\\n    } else if (j == -1) {\\n        sin_a = -c;\\n        cos_a = s;\\n    } else {\\n        sin_a = -s;\\n        cos_a = -c;\\n    }\\n    return sin_a / cos_a;\\n}\\n#endif\\n\\nfloat tan_fp32(float a) {\\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\n  return tan_taylor_fp32(a);\\n#else\\n  return tan(a);\\n#endif\\n}\\n\";\nexport const fp32 = {\n  name: 'fp32',\n  vs: fp32shader,\n  fs: null\n};\n//# sourceMappingURL=fp32.js.map","import * as mat4 from 'gl-matrix/mat4';\nimport * as vec4 from 'gl-matrix/vec4';\nimport { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport memoize from '../../utils/memoize';\nconst ZERO_VECTOR = [0, 0, 0, 0];\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\nconst IDENTITY_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\nconst DEFAULT_PIXELS_PER_UNIT2 = [0, 0, 0];\nconst DEFAULT_COORDINATE_ORIGIN = [0, 0, 0];\nconst getMemoizedViewportUniforms = memoize(calculateViewportUniforms);\nexport function getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin = DEFAULT_COORDINATE_ORIGIN) {\n  let shaderCoordinateOrigin = coordinateOrigin;\n  let geospatialOrigin;\n  let offsetMode = true;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT_OFFSETS || coordinateSystem === COORDINATE_SYSTEM.METER_OFFSETS) {\n    geospatialOrigin = coordinateOrigin;\n  } else {\n    geospatialOrigin = viewport.isGeospatial ? [Math.fround(viewport.longitude), Math.fround(viewport.latitude), 0] : null;\n  }\n\n  switch (viewport.projectionMode) {\n    case PROJECTION_MODE.WEB_MERCATOR:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        offsetMode = false;\n      }\n\n      break;\n\n    case PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT) {\n        shaderCoordinateOrigin = geospatialOrigin;\n      } else if (coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        shaderCoordinateOrigin = [Math.fround(viewport.center[0]), Math.fround(viewport.center[1]), 0];\n        geospatialOrigin = viewport.unprojectPosition(shaderCoordinateOrigin);\n        shaderCoordinateOrigin[0] -= coordinateOrigin[0];\n        shaderCoordinateOrigin[1] -= coordinateOrigin[1];\n        shaderCoordinateOrigin[2] -= coordinateOrigin[2];\n      }\n\n      break;\n\n    case PROJECTION_MODE.IDENTITY:\n      shaderCoordinateOrigin = viewport.position.map(Math.fround);\n      break;\n\n    case PROJECTION_MODE.GLOBE:\n      offsetMode = false;\n      geospatialOrigin = null;\n      break;\n\n    default:\n      offsetMode = false;\n  }\n\n  shaderCoordinateOrigin[2] = shaderCoordinateOrigin[2] || 0;\n  return {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  };\n}\n\nfunction calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin) {\n  const {\n    viewMatrixUncentered,\n    projectionMatrix\n  } = viewport;\n  let {\n    viewMatrix,\n    viewProjectionMatrix\n  } = viewport;\n  let projectionCenter = ZERO_VECTOR;\n  let cameraPosCommon = viewport.cameraPosition;\n  const {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  } = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin);\n\n  if (offsetMode) {\n    const positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    cameraPosCommon = [cameraPosCommon[0] - positionCommonSpace[0], cameraPosCommon[1] - positionCommonSpace[1], cameraPosCommon[2] - positionCommonSpace[2]];\n    positionCommonSpace[3] = 1;\n    projectionCenter = vec4.transformMat4([], positionCommonSpace, viewProjectionMatrix);\n    viewMatrix = viewMatrixUncentered || viewMatrix;\n    viewProjectionMatrix = mat4.multiply([], projectionMatrix, viewMatrix);\n    viewProjectionMatrix = mat4.multiply([], viewProjectionMatrix, VECTOR_TO_POINT_MATRIX);\n  }\n\n  return {\n    viewMatrix,\n    viewProjectionMatrix,\n    projectionCenter,\n    cameraPosCommon,\n    shaderCoordinateOrigin,\n    geospatialOrigin\n  };\n}\n\nexport function getUniformsFromViewport({\n  viewport,\n  devicePixelRatio = 1,\n  modelMatrix = null,\n  coordinateSystem = COORDINATE_SYSTEM.DEFAULT,\n  coordinateOrigin,\n  autoWrapLongitude = false\n} = {}) {\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  const uniforms = getMemoizedViewportUniforms({\n    viewport,\n    devicePixelRatio,\n    coordinateSystem,\n    coordinateOrigin\n  });\n  uniforms.project_uWrapLongitude = autoWrapLongitude;\n  uniforms.project_uModelMatrix = modelMatrix || IDENTITY_MATRIX;\n  return uniforms;\n}\n\nfunction calculateViewportUniforms({\n  viewport,\n  devicePixelRatio,\n  coordinateSystem,\n  coordinateOrigin\n}) {\n  const {\n    projectionCenter,\n    viewProjectionMatrix,\n    cameraPosCommon,\n    shaderCoordinateOrigin,\n    geospatialOrigin\n  } = calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin);\n  const distanceScales = viewport.getDistanceScales();\n  const viewportSize = [viewport.width * devicePixelRatio, viewport.height * devicePixelRatio];\n  const focalDistance = viewport.projectionMatrix.transform([0, 0, -viewport.focalDistance, 1])[3] || 1;\n  const uniforms = {\n    project_uCoordinateSystem: coordinateSystem,\n    project_uProjectionMode: viewport.projectionMode,\n    project_uCoordinateOrigin: shaderCoordinateOrigin,\n    project_uCenter: projectionCenter,\n    project_uViewportSize: viewportSize,\n    project_uDevicePixelRatio: devicePixelRatio,\n    project_uFocalDistance: focalDistance,\n    project_uCommonUnitsPerMeter: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit2: DEFAULT_PIXELS_PER_UNIT2,\n    project_uScale: viewport.scale,\n    project_uViewProjectionMatrix: viewProjectionMatrix,\n    project_uCameraPosition: cameraPosCommon\n  };\n\n  if (geospatialOrigin) {\n    const distanceScalesAtOrigin = viewport.getDistanceScales(geospatialOrigin);\n\n    switch (coordinateSystem) {\n      case COORDINATE_SYSTEM.METER_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerMeter;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerMeter2;\n        break;\n\n      case COORDINATE_SYSTEM.LNGLAT:\n      case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerDegree;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerDegree2;\n        break;\n\n      case COORDINATE_SYSTEM.CARTESIAN:\n        uniforms.project_uCommonUnitsPerWorldUnit = [1, 1, distanceScalesAtOrigin.unitsPerMeter[2]];\n        uniforms.project_uCommonUnitsPerWorldUnit2 = [0, 0, distanceScalesAtOrigin.unitsPerMeter2[2]];\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return uniforms;\n}\n//# sourceMappingURL=viewport-uniforms.js.map","import project from '../project/project';\nconst vs = \"\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\\n) {\\n  vec3 projectedPosition = project_position(position, position64Low);\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    // offset is specified as ENU\\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\\n    offset = rotation * offset;\\n  }\\n  commonPosition = vec4(projectedPosition + offset, 1.0);\\n  return project_common_position_to_clipspace(commonPosition);\\n}\\n\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset\\n) {\\n  vec4 commonPosition;\\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\\n}\\n\";\nexport default {\n  name: 'project32',\n  dependencies: [project],\n  vs\n};\n//# sourceMappingURL=project32.js.map","function noop() {}\n\nconst DEFAULT_SETTINGS = {\n  onStart: noop,\n  onUpdate: noop,\n  onInterrupt: noop,\n  onEnd: noop\n};\nexport default class Transition {\n  constructor(timeline) {\n    this._inProgress = false;\n    this._handle = null;\n    this.timeline = timeline;\n    this.settings = {};\n  }\n\n  get inProgress() {\n    return this._inProgress;\n  }\n\n  start(props) {\n    this.cancel();\n    this.settings = { ...DEFAULT_SETTINGS,\n      ...props\n    };\n    this._inProgress = true;\n    this.settings.onStart(this);\n  }\n\n  end() {\n    if (this._inProgress) {\n      this.timeline.removeChannel(this._handle);\n      this._handle = null;\n      this._inProgress = false;\n      this.settings.onEnd(this);\n    }\n  }\n\n  cancel() {\n    if (this._inProgress) {\n      this.settings.onInterrupt(this);\n      this.timeline.removeChannel(this._handle);\n      this._handle = null;\n      this._inProgress = false;\n    }\n  }\n\n  update() {\n    if (!this._inProgress) {\n      return false;\n    }\n\n    if (this._handle === null) {\n      const {\n        timeline,\n        settings\n      } = this;\n      this._handle = timeline.addChannel({\n        delay: timeline.getTime(),\n        duration: settings.duration\n      });\n    }\n\n    this.time = this.timeline.getTime(this._handle);\n\n    this._onUpdate();\n\n    this.settings.onUpdate(this);\n\n    if (this.timeline.isFinished(this._handle)) {\n      this.end();\n    }\n\n    return true;\n  }\n\n  _onUpdate() {}\n\n}\n//# sourceMappingURL=transition.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'deck.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","export function flatten(array, filter = () => true) {\n  if (!Array.isArray(array)) {\n    return filter(array) ? [array] : [];\n  }\n\n  return flattenArray(array, filter, []);\n}\n\nfunction flattenArray(array, filter, result) {\n  let index = -1;\n\n  while (++index < array.length) {\n    const value = array[index];\n\n    if (Array.isArray(value)) {\n      flattenArray(value, filter, result);\n    } else if (filter(value)) {\n      result.push(value);\n    }\n  }\n\n  return result;\n}\n\nexport function fillArray({\n  target,\n  source,\n  start = 0,\n  count = 1\n}) {\n  const length = source.length;\n  const total = count * length;\n  let copied = 0;\n\n  for (let i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=flatten.js.map","const EMPTY_ARRAY = [];\nconst placeholderArray = [];\nexport function createIterable(data, startRow = 0, endRow = Infinity) {\n  let iterable = EMPTY_ARRAY;\n  const objectInfo = {\n    index: -1,\n    data,\n    target: []\n  };\n\n  if (!data) {\n    iterable = EMPTY_ARRAY;\n  } else if (typeof data[Symbol.iterator] === 'function') {\n    iterable = data;\n  } else if (data.length > 0) {\n    placeholderArray.length = data.length;\n    iterable = placeholderArray;\n  }\n\n  if (startRow > 0 || Number.isFinite(endRow)) {\n    iterable = (Array.isArray(iterable) ? iterable : Array.from(iterable)).slice(startRow, endRow);\n    objectInfo.index = startRow - 1;\n  }\n\n  return {\n    iterable,\n    objectInfo\n  };\n}\nexport function isAsyncIterable(data) {\n  return data && data[Symbol.asyncIterator];\n}\nexport function getAccessorFromBuffer(typedArray, {\n  size,\n  stride,\n  offset,\n  startIndices,\n  nested\n}) {\n  const bytesPerElement = typedArray.BYTES_PER_ELEMENT;\n  const elementStride = stride ? stride / bytesPerElement : size;\n  const elementOffset = offset ? offset / bytesPerElement : 0;\n  const vertexCount = Math.floor((typedArray.length - elementOffset) / elementStride);\n  return (_, {\n    index,\n    target\n  }) => {\n    if (!startIndices) {\n      const sourceIndex = index * elementStride + elementOffset;\n\n      for (let j = 0; j < size; j++) {\n        target[j] = typedArray[sourceIndex + j];\n      }\n\n      return target;\n    }\n\n    const startIndex = startIndices[index];\n    const endIndex = startIndices[index + 1] || vertexCount;\n    let result;\n\n    if (nested) {\n      result = new Array(endIndex - startIndex);\n\n      for (let i = startIndex; i < endIndex; i++) {\n        const sourceIndex = i * elementStride + elementOffset;\n        target = new Array(size);\n\n        for (let j = 0; j < size; j++) {\n          target[j] = typedArray[sourceIndex + j];\n        }\n\n        result[i - startIndex] = target;\n      }\n    } else if (elementStride === size) {\n      result = typedArray.subarray(startIndex * size + elementOffset, endIndex * size + elementOffset);\n    } else {\n      result = new typedArray.constructor((endIndex - startIndex) * size);\n      let targetIndex = 0;\n\n      for (let i = startIndex; i < endIndex; i++) {\n        const sourceIndex = i * elementStride + elementOffset;\n\n        for (let j = 0; j < size; j++) {\n          result[targetIndex++] = typedArray[sourceIndex + j];\n        }\n      }\n    }\n\n    return result;\n  };\n}\n//# sourceMappingURL=iterable-utils.js.map","import { Log } from 'probe.gl';\nexport default new Log({\n  id: 'deck'\n});\n//# sourceMappingURL=log.js.map","import typedArrayManager from './typed-array-manager';\nimport { Vector3 } from 'math.gl';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function mod(value, divisor) {\n  const modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function getCameraPosition(viewMatrixInverse) {\n  return [viewMatrixInverse[12], viewMatrixInverse[13], viewMatrixInverse[14]];\n}\nexport function getFrustumPlanes(viewProjectionMatrix) {\n  const planes = {};\n  planes.left = getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[0], viewProjectionMatrix[7] + viewProjectionMatrix[4], viewProjectionMatrix[11] + viewProjectionMatrix[8], viewProjectionMatrix[15] + viewProjectionMatrix[12]);\n  planes.right = getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[0], viewProjectionMatrix[7] - viewProjectionMatrix[4], viewProjectionMatrix[11] - viewProjectionMatrix[8], viewProjectionMatrix[15] - viewProjectionMatrix[12]);\n  planes.bottom = getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[1], viewProjectionMatrix[7] + viewProjectionMatrix[5], viewProjectionMatrix[11] + viewProjectionMatrix[9], viewProjectionMatrix[15] + viewProjectionMatrix[13]);\n  planes.top = getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[1], viewProjectionMatrix[7] - viewProjectionMatrix[5], viewProjectionMatrix[11] - viewProjectionMatrix[9], viewProjectionMatrix[15] - viewProjectionMatrix[13]);\n  planes.near = getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[2], viewProjectionMatrix[7] + viewProjectionMatrix[6], viewProjectionMatrix[11] + viewProjectionMatrix[10], viewProjectionMatrix[15] + viewProjectionMatrix[14]);\n  planes.far = getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[2], viewProjectionMatrix[7] - viewProjectionMatrix[6], viewProjectionMatrix[11] - viewProjectionMatrix[10], viewProjectionMatrix[15] - viewProjectionMatrix[14]);\n  return planes;\n}\nconst scratchVector = new Vector3();\n\nfunction getFrustumPlane(a, b, c, d) {\n  scratchVector.set(a, b, c);\n  const L = scratchVector.len();\n  return {\n    distance: d / L,\n    normal: new Vector3(-a / L, -b / L, -c / L)\n  };\n}\n\nexport function fp64LowPart(x) {\n  return x - Math.fround(x);\n}\nlet scratchArray;\nexport function toDoublePrecisionArray(typedArray, {\n  size = 1,\n  startIndex = 0,\n  endIndex\n}) {\n  if (!Number.isFinite(endIndex)) {\n    endIndex = typedArray.length;\n  }\n\n  const count = (endIndex - startIndex) / size;\n  scratchArray = typedArrayManager.allocate(scratchArray, count, {\n    type: Float32Array,\n    size: size * 2\n  });\n  let sourceIndex = startIndex;\n  let targetIndex = 0;\n\n  while (sourceIndex < endIndex) {\n    for (let j = 0; j < size; j++) {\n      const value = typedArray[sourceIndex++];\n      scratchArray[targetIndex + j] = value;\n      scratchArray[targetIndex + j + size] = fp64LowPart(value);\n    }\n\n    targetIndex += size * 2;\n  }\n\n  return scratchArray.subarray(0, count * size * 2);\n}\n//# sourceMappingURL=math-utils.js.map","function isEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (Array.isArray(a)) {\n    const len = a.length;\n\n    if (!b || b.length !== len) {\n      return false;\n    }\n\n    for (let i = 0; i < len; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nexport default function memoize(compute) {\n  let cachedArgs = {};\n  let cachedResult;\n  return args => {\n    for (const key in args) {\n      if (!isEqual(args[key], cachedArgs[key])) {\n        cachedResult = compute(args);\n        cachedArgs = args;\n        break;\n      }\n    }\n\n    return cachedResult;\n  };\n}\n//# sourceMappingURL=memoize.js.map","export function mergeShaders(target, source) {\n  if (!source) {\n    return target;\n  }\n\n  const result = { ...target,\n    ...source\n  };\n\n  if ('defines' in source) {\n    result.defines = { ...target.defines,\n      ...source.defines\n    };\n  }\n\n  if ('modules' in source) {\n    result.modules = (target.modules || []).concat(source.modules);\n\n    if (source.modules.some(module => module.name === 'project64')) {\n      const index = result.modules.findIndex(module => module.name === 'project32');\n\n      if (index >= 0) {\n        result.modules.splice(index, 1);\n      }\n    }\n  }\n\n  if ('inject' in source) {\n    if (!target.inject) {\n      result.inject = source.inject;\n    } else {\n      const mergedInjection = { ...target.inject\n      };\n\n      for (const key in source.inject) {\n        mergedInjection[key] = (mergedInjection[key] || '') + source.inject[key];\n      }\n\n      result.inject = mergedInjection;\n    }\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader.js.map","export class TypedArrayManager {\n  constructor(props) {\n    this._pool = [];\n    this.props = {\n      overAlloc: 2,\n      poolSize: 100\n    };\n    this.setProps(props);\n  }\n\n  setProps(props) {\n    Object.assign(this.props, props);\n  }\n\n  allocate(typedArray, count, {\n    size = 1,\n    type,\n    padding = 0,\n    copy = false,\n    initialize = false,\n    maxCount\n  }) {\n    const Type = type || typedArray && typedArray.constructor || Float32Array;\n    const newSize = count * size + padding;\n\n    if (ArrayBuffer.isView(typedArray)) {\n      if (newSize <= typedArray.length) {\n        return typedArray;\n      }\n\n      if (newSize * typedArray.BYTES_PER_ELEMENT <= typedArray.buffer.byteLength) {\n        return new Type(typedArray.buffer, 0, newSize);\n      }\n    }\n\n    let maxSize;\n\n    if (maxCount) {\n      maxSize = maxCount * size + padding;\n    }\n\n    const newArray = this._allocate(Type, newSize, initialize, maxSize);\n\n    if (typedArray && copy) {\n      newArray.set(typedArray);\n    } else if (!initialize) {\n      newArray.fill(0, 0, 4);\n    }\n\n    this._release(typedArray);\n\n    return newArray;\n  }\n\n  release(typedArray) {\n    this._release(typedArray);\n  }\n\n  _allocate(Type, size, initialize, maxSize) {\n    let sizeToAllocate = Math.max(Math.ceil(size * this.props.overAlloc), 1);\n\n    if (sizeToAllocate > maxSize) {\n      sizeToAllocate = maxSize;\n    }\n\n    const pool = this._pool;\n    const byteLength = Type.BYTES_PER_ELEMENT * sizeToAllocate;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n\n    if (i >= 0) {\n      const array = new Type(pool.splice(i, 1)[0], 0, sizeToAllocate);\n\n      if (initialize) {\n        array.fill(0);\n      }\n\n      return array;\n    }\n\n    return new Type(sizeToAllocate);\n  }\n\n  _release(typedArray) {\n    if (!ArrayBuffer.isView(typedArray)) {\n      return;\n    }\n\n    const pool = this._pool;\n    const {\n      buffer\n    } = typedArray;\n    const {\n      byteLength\n    } = buffer;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n\n    if (i < 0) {\n      pool.push(buffer);\n    } else if (i > 0 || pool.length < this.props.poolSize) {\n      pool.splice(i, 0, buffer);\n    }\n\n    if (pool.length > this.props.poolSize) {\n      pool.shift();\n    }\n  }\n\n}\nexport default new TypedArrayManager();\n//# sourceMappingURL=typed-array-manager.js.map","import log from '../utils/log';\nimport { createMat4, getCameraPosition, getFrustumPlanes } from '../utils/math-utils';\nimport { Matrix4, Vector3, equals } from 'math.gl';\nimport * as mat4 from 'gl-matrix/mat4';\nimport { getDistanceScales, getMeterZoom, lngLatToWorld, worldToLngLat, worldToPixels, pixelsToWorld } from '@math.gl/web-mercator';\nimport { PROJECTION_MODE } from '../lib/constants';\nconst DEGREES_TO_RADIANS = Math.PI / 180;\nconst IDENTITY = createMat4();\nconst ZERO_VECTOR = [0, 0, 0];\nconst DEFAULT_ZOOM = 0;\nconst DEFAULT_DISTANCE_SCALES = {\n  unitsPerMeter: [1, 1, 1],\n  metersPerUnit: [1, 1, 1]\n};\nexport default class Viewport {\n  constructor(opts = {}) {\n    const {\n      id = null,\n      x = 0,\n      y = 0,\n      width = 1,\n      height = 1\n    } = opts;\n    this.id = id || this.constructor.displayName || 'viewport';\n    this.x = x;\n    this.y = y;\n    this.width = width || 1;\n    this.height = height || 1;\n    this._frustumPlanes = {};\n\n    this._initViewMatrix(opts);\n\n    this._initProjectionMatrix(opts);\n\n    this._initPixelMatrices();\n\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    this.projectFlat = this.projectFlat.bind(this);\n    this.unprojectFlat = this.unprojectFlat.bind(this);\n  }\n\n  get metersPerPixel() {\n    return this.distanceScales.metersPerUnit[2] / this.scale;\n  }\n\n  get projectionMode() {\n    if (this.isGeospatial) {\n      return this.zoom < 12 ? PROJECTION_MODE.WEB_MERCATOR : PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET;\n    }\n\n    return PROJECTION_MODE.IDENTITY;\n  }\n\n  equals(viewport) {\n    if (!(viewport instanceof Viewport)) {\n      return false;\n    }\n\n    if (this === viewport) {\n      return true;\n    }\n\n    return viewport.width === this.width && viewport.height === this.height && viewport.scale === this.scale && equals(viewport.projectionMatrix, this.projectionMatrix) && equals(viewport.viewMatrix, this.viewMatrix);\n  }\n\n  project(xyz, {\n    topLeft = true\n  } = {}) {\n    const worldPosition = this.projectPosition(xyz);\n    const coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n    const [x, y] = coord;\n    const y2 = topLeft ? y : this.height - y;\n    return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n  }\n\n  unproject(xyz, {\n    topLeft = true,\n    targetZ\n  } = {}) {\n    const [x, y, z] = xyz;\n    const y2 = topLeft ? y : this.height - y;\n    const targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n    const coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n    const [X, Y, Z] = this.unprojectPosition(coord);\n\n    if (Number.isFinite(z)) {\n      return [X, Y, Z];\n    }\n\n    return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n  }\n\n  projectPosition(xyz) {\n    const [X, Y] = this.projectFlat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n    return [X, Y, Z];\n  }\n\n  unprojectPosition(xyz) {\n    const [X, Y] = this.unprojectFlat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n    return [X, Y, Z];\n  }\n\n  projectFlat(xyz) {\n    if (this.isGeospatial) {\n      return lngLatToWorld(xyz);\n    }\n\n    return xyz;\n  }\n\n  unprojectFlat(xyz) {\n    if (this.isGeospatial) {\n      return worldToLngLat(xyz);\n    }\n\n    return xyz;\n  }\n\n  getBounds(options = {}) {\n    const unprojectOption = {\n      targetZ: options.z || 0\n    };\n    const topLeft = this.unproject([0, 0], unprojectOption);\n    const topRight = this.unproject([this.width, 0], unprojectOption);\n    const bottomLeft = this.unproject([0, this.height], unprojectOption);\n    const bottomRight = this.unproject([this.width, this.height], unprojectOption);\n    return [Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]), Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1])];\n  }\n\n  getDistanceScales(coordinateOrigin = null) {\n    if (coordinateOrigin) {\n      return getDistanceScales({\n        longitude: coordinateOrigin[0],\n        latitude: coordinateOrigin[1],\n        highPrecision: true\n      });\n    }\n\n    return this.distanceScales;\n  }\n\n  containsPixel({\n    x,\n    y,\n    width = 1,\n    height = 1\n  }) {\n    return x < this.x + this.width && this.x < x + width && y < this.y + this.height && this.y < y + height;\n  }\n\n  getFrustumPlanes() {\n    if (this._frustumPlanes.near) {\n      return this._frustumPlanes;\n    }\n\n    Object.assign(this._frustumPlanes, getFrustumPlanes(this.viewProjectionMatrix));\n    return this._frustumPlanes;\n  }\n\n  panByPosition(coords, pixel) {\n    return null;\n  }\n\n  getCameraPosition() {\n    return this.cameraPosition;\n  }\n\n  getCameraDirection() {\n    return this.cameraDirection;\n  }\n\n  getCameraUp() {\n    return this.cameraUp;\n  }\n\n  _createProjectionMatrix({\n    orthographic,\n    fovyRadians,\n    aspect,\n    focalDistance,\n    near,\n    far\n  }) {\n    return orthographic ? new Matrix4().orthographic({\n      fovy: fovyRadians,\n      aspect,\n      focalDistance,\n      near,\n      far\n    }) : new Matrix4().perspective({\n      fovy: fovyRadians,\n      aspect,\n      near,\n      far\n    });\n  }\n\n  _initViewMatrix(opts) {\n    const {\n      viewMatrix = IDENTITY,\n      longitude = null,\n      latitude = null,\n      zoom = null,\n      position = null,\n      modelMatrix = null,\n      focalDistance = 1,\n      distanceScales = null\n    } = opts;\n    this.isGeospatial = Number.isFinite(latitude) && Number.isFinite(longitude);\n    this.zoom = zoom;\n\n    if (!Number.isFinite(this.zoom)) {\n      this.zoom = this.isGeospatial ? getMeterZoom({\n        latitude\n      }) + Math.log2(focalDistance) : DEFAULT_ZOOM;\n    }\n\n    const scale = Math.pow(2, this.zoom);\n    this.scale = scale;\n    this.distanceScales = this.isGeospatial ? getDistanceScales({\n      latitude,\n      longitude\n    }) : distanceScales || DEFAULT_DISTANCE_SCALES;\n    this.focalDistance = focalDistance;\n    this.distanceScales.metersPerUnit = new Vector3(this.distanceScales.metersPerUnit);\n    this.distanceScales.unitsPerMeter = new Vector3(this.distanceScales.unitsPerMeter);\n    this.position = ZERO_VECTOR;\n    this.meterOffset = ZERO_VECTOR;\n\n    if (position) {\n      this.position = position;\n      this.modelMatrix = modelMatrix;\n      this.meterOffset = modelMatrix ? modelMatrix.transformVector(position) : position;\n    }\n\n    if (this.isGeospatial) {\n      this.longitude = longitude;\n      this.latitude = latitude;\n      this.center = this._getCenterInWorld({\n        longitude,\n        latitude\n      });\n    } else {\n      this.center = position ? this.projectPosition(position) : [0, 0, 0];\n    }\n\n    this.viewMatrixUncentered = viewMatrix;\n    this.viewMatrix = new Matrix4().multiplyRight(this.viewMatrixUncentered).translate(new Vector3(this.center || ZERO_VECTOR).negate());\n  }\n\n  _getCenterInWorld({\n    longitude,\n    latitude\n  }) {\n    const {\n      meterOffset,\n      distanceScales\n    } = this;\n    const center = new Vector3(this.projectPosition([longitude, latitude, 0]));\n\n    if (meterOffset) {\n      const commonPosition = new Vector3(meterOffset).scale(distanceScales.unitsPerMeter);\n      center.add(commonPosition);\n    }\n\n    return center;\n  }\n\n  _initProjectionMatrix(opts) {\n    const {\n      projectionMatrix = null,\n      orthographic = false,\n      fovyRadians,\n      fovy = 75,\n      near = 0.1,\n      far = 1000,\n      focalDistance = 1\n    } = opts;\n    this.projectionMatrix = projectionMatrix || this._createProjectionMatrix({\n      orthographic,\n      fovyRadians: fovyRadians || fovy * DEGREES_TO_RADIANS,\n      aspect: this.width / this.height,\n      focalDistance,\n      near,\n      far\n    });\n  }\n\n  _initPixelMatrices() {\n    const vpm = createMat4();\n    mat4.multiply(vpm, vpm, this.projectionMatrix);\n    mat4.multiply(vpm, vpm, this.viewMatrix);\n    this.viewProjectionMatrix = vpm;\n    this.viewMatrixInverse = mat4.invert([], this.viewMatrix) || this.viewMatrix;\n    this.cameraPosition = getCameraPosition(this.viewMatrixInverse);\n    const viewportMatrix = createMat4();\n    const pixelProjectionMatrix = createMat4();\n    mat4.scale(viewportMatrix, viewportMatrix, [this.width / 2, -this.height / 2, 1]);\n    mat4.translate(viewportMatrix, viewportMatrix, [1, -1, 0]);\n    mat4.multiply(pixelProjectionMatrix, viewportMatrix, this.viewProjectionMatrix);\n    this.pixelProjectionMatrix = pixelProjectionMatrix;\n    this.viewportMatrix = viewportMatrix;\n    this.pixelUnprojectionMatrix = mat4.invert(createMat4(), this.pixelProjectionMatrix);\n\n    if (!this.pixelUnprojectionMatrix) {\n      log.warn('Pixel project matrix not invertible')();\n    }\n  }\n\n}\nViewport.displayName = 'Viewport';\n//# sourceMappingURL=viewport.js.map","import Viewport from './viewport';\nimport { pixelsToWorld, getViewMatrix, addMetersToLngLat, getProjectionParameters, fitBounds, getBounds } from '@math.gl/web-mercator';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { Matrix4 } from 'math.gl';\nexport default class WebMercatorViewport extends Viewport {\n  constructor(opts = {}) {\n    const {\n      latitude = 0,\n      longitude = 0,\n      zoom = 11,\n      pitch = 0,\n      bearing = 0,\n      nearZMultiplier = 0.1,\n      farZMultiplier = 1.01,\n      orthographic = false,\n      repeat = false,\n      worldOffset = 0\n    } = opts;\n    let {\n      width,\n      height,\n      altitude = 1.5\n    } = opts;\n    const scale = Math.pow(2, zoom);\n    width = width || 1;\n    height = height || 1;\n    altitude = Math.max(0.75, altitude);\n    const {\n      fov,\n      aspect,\n      focalDistance,\n      near,\n      far\n    } = getProjectionParameters({\n      width,\n      height,\n      pitch,\n      altitude,\n      nearZMultiplier,\n      farZMultiplier\n    });\n    let viewMatrixUncentered = getViewMatrix({\n      height,\n      pitch,\n      bearing,\n      scale,\n      altitude\n    });\n\n    if (worldOffset) {\n      const viewOffset = new Matrix4().translate([512 * worldOffset, 0, 0]);\n      viewMatrixUncentered = viewOffset.multiplyLeft(viewMatrixUncentered);\n    }\n\n    super({ ...opts,\n      width,\n      height,\n      viewMatrix: viewMatrixUncentered,\n      longitude,\n      latitude,\n      zoom,\n      orthographic,\n      fovyRadians: fov,\n      aspect,\n      focalDistance,\n      near,\n      far\n    });\n    this.latitude = latitude;\n    this.longitude = longitude;\n    this.zoom = zoom;\n    this.pitch = pitch;\n    this.bearing = bearing;\n    this.altitude = altitude;\n    this.orthographic = orthographic;\n    this._subViewports = repeat ? [] : null;\n    Object.freeze(this);\n  }\n\n  get subViewports() {\n    if (this._subViewports && !this._subViewports.length) {\n      const bounds = this.getBounds();\n      const minOffset = Math.floor((bounds[0] + 180) / 360);\n      const maxOffset = Math.ceil((bounds[2] - 180) / 360);\n\n      for (let x = minOffset; x <= maxOffset; x++) {\n        const offsetViewport = x ? new WebMercatorViewport({ ...this,\n          worldOffset: x\n        }) : this;\n\n        this._subViewports.push(offsetViewport);\n      }\n    }\n\n    return this._subViewports;\n  }\n\n  addMetersToLngLat(lngLatZ, xyz) {\n    return addMetersToLngLat(lngLatZ, xyz);\n  }\n\n  panByPosition(coords, pixel) {\n    const fromLocation = pixelsToWorld(pixel, this.pixelUnprojectionMatrix);\n    const toLocation = this.projectFlat(coords);\n    const translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n    const newCenter = vec2.add([], this.center, translate);\n    const [longitude, latitude] = this.unprojectFlat(newCenter);\n    return {\n      longitude,\n      latitude\n    };\n  }\n\n  getBounds(options = {}) {\n    const corners = getBounds(this, options.z || 0);\n    return [Math.min(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.min(corners[0][1], corners[1][1], corners[2][1], corners[3][1]), Math.max(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.max(corners[0][1], corners[1][1], corners[2][1], corners[3][1])];\n  }\n\n  fitBounds(bounds, options = {}) {\n    const {\n      width,\n      height\n    } = this;\n    const {\n      longitude,\n      latitude,\n      zoom\n    } = fitBounds({\n      width,\n      height,\n      bounds,\n      ...options\n    });\n    return new WebMercatorViewport({\n      width,\n      height,\n      longitude,\n      latitude,\n      zoom\n    });\n  }\n\n}\nWebMercatorViewport.displayName = 'WebMercatorViewport';\n//# sourceMappingURL=web-mercator-viewport.js.map","let channelHandles = 1;\nlet animationHandles = 1;\nexport class Timeline {\n  constructor() {\n    this.time = 0;\n    this.channels = new Map();\n    this.animations = new Map();\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  addChannel(props) {\n    const {\n      delay = 0,\n      duration = Number.POSITIVE_INFINITY,\n      rate = 1,\n      repeat = 1\n    } = props;\n    const handle = channelHandles++;\n    const channel = {\n      time: 0,\n      delay,\n      duration,\n      rate,\n      repeat\n    };\n\n    this._setChannelTime(channel, this.time);\n\n    this.channels.set(handle, channel);\n    return handle;\n  }\n\n  removeChannel(handle) {\n    this.channels.delete(handle);\n\n    for (const [animationHandle, animation] of this.animations) {\n      if (animation.channel === handle) {\n        this.detachAnimation(animationHandle);\n      }\n    }\n  }\n\n  isFinished(handle) {\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return false;\n    }\n\n    return this.time >= channel.delay + channel.duration * channel.repeat;\n  }\n\n  getTime(handle) {\n    if (handle === undefined) {\n      return this.time;\n    }\n\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return -1;\n    }\n\n    return channel.time;\n  }\n\n  setTime(time) {\n    this.time = Math.max(0, time);\n    const channels = this.channels.values();\n\n    for (const channel of channels) {\n      this._setChannelTime(channel, this.time);\n    }\n\n    const animations = this.animations.values();\n\n    for (const animationData of animations) {\n      const {\n        animation,\n        channel\n      } = animationData;\n      animation.setTime(this.getTime(channel));\n    }\n  }\n\n  play() {\n    this.playing = true;\n  }\n\n  pause() {\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  reset() {\n    this.setTime(0);\n  }\n\n  attachAnimation(animation, channelHandle) {\n    const animationHandle = animationHandles++;\n    this.animations.set(animationHandle, {\n      animation,\n      channel: channelHandle\n    });\n    animation.setTime(this.getTime(channelHandle));\n    return animationHandle;\n  }\n\n  detachAnimation(handle) {\n    this.animations.delete(handle);\n  }\n\n  update(engineTime) {\n    if (this.playing) {\n      if (this.lastEngineTime === -1) {\n        this.lastEngineTime = engineTime;\n      }\n\n      this.setTime(this.time + (engineTime - this.lastEngineTime));\n      this.lastEngineTime = engineTime;\n    }\n  }\n\n  _setChannelTime(channel, time) {\n    const offsetTime = time - channel.delay;\n    const totalDuration = channel.duration * channel.repeat;\n\n    if (offsetTime >= totalDuration) {\n      channel.time = channel.duration * channel.rate;\n    } else {\n      channel.time = Math.max(0, offsetTime) % channel.duration;\n      channel.time *= channel.rate;\n    }\n  }\n\n}\n//# sourceMappingURL=timeline.js.map","import { load } from '@loaders.gl/core';\nexport default class Resource {\n  constructor(id, data, context) {\n    this.id = id;\n    this.context = context;\n    this._loadCount = 0;\n    this._subscribers = new Set();\n    this.setData(data);\n  }\n\n  subscribe(consumer) {\n    this._subscribers.add(consumer);\n  }\n\n  unsubscribe(consumer) {\n    this._subscribers.delete(consumer);\n  }\n\n  inUse() {\n    return this._subscribers.size > 0;\n  }\n\n  delete() {}\n\n  getData() {\n    return this.isLoaded ? this._error ? Promise.reject(this._error) : this._content : this._loader.then(() => this.getData());\n  }\n\n  setData(data, forceUpdate) {\n    if (data === this._data && !forceUpdate) {\n      return;\n    }\n\n    this._data = data;\n    const loadCount = ++this._loadCount;\n    let loader = data;\n\n    if (typeof data === 'string') {\n      loader = load(data);\n    }\n\n    if (loader instanceof Promise) {\n      this.isLoaded = false;\n      this._loader = loader.then(result => {\n        if (this._loadCount === loadCount) {\n          this.isLoaded = true;\n          this._error = null;\n          this._content = result;\n        }\n      }).catch(error => {\n        if (this._loadCount === loadCount) {\n          this.isLoaded = true;\n          this._error = error || true;\n        }\n      });\n    } else {\n      this.isLoaded = true;\n      this._error = null;\n      this._content = data;\n    }\n\n    for (const subscriber of this._subscribers) {\n      subscriber.onChange(this.getData());\n    }\n  }\n\n}\n//# sourceMappingURL=resource.js.map","import Resource from './resource';\nexport default class ResourceManager {\n  constructor({\n    gl,\n    protocol\n  }) {\n    this.protocol = protocol || 'resource://';\n    this._context = {\n      gl,\n      resourceManager: this\n    };\n    this._resources = {};\n    this._consumers = {};\n    this._pruneRequest = null;\n  }\n\n  contains(resourceId) {\n    if (resourceId.startsWith(this.protocol)) {\n      return true;\n    }\n\n    return resourceId in this._resources;\n  }\n\n  add({\n    resourceId,\n    data,\n    forceUpdate = false,\n    persistent = true\n  }) {\n    let res = this._resources[resourceId];\n\n    if (res) {\n      res.setData(data, forceUpdate);\n    } else {\n      res = new Resource(resourceId, data, this._context);\n      this._resources[resourceId] = res;\n    }\n\n    res.persistent = persistent;\n  }\n\n  remove(resourceId) {\n    const res = this._resources[resourceId];\n\n    if (res) {\n      res.delete();\n      delete this._resources[resourceId];\n    }\n  }\n\n  unsubscribe({\n    consumerId\n  }) {\n    const consumer = this._consumers[consumerId];\n\n    if (consumer) {\n      for (const requestId in consumer) {\n        const request = consumer[requestId];\n\n        if (request.resource) {\n          request.resource.unsubscribe(request);\n        }\n      }\n\n      delete this._consumers[consumerId];\n      this.prune();\n    }\n  }\n\n  subscribe({\n    resourceId,\n    onChange,\n    consumerId,\n    requestId = 'default'\n  }) {\n    const {\n      _resources: resources,\n      protocol\n    } = this;\n\n    if (resourceId.startsWith(protocol)) {\n      resourceId = resourceId.replace(protocol, '');\n\n      if (!resources[resourceId]) {\n        this.add({\n          resourceId,\n          data: null,\n          persistent: false\n        });\n      }\n    }\n\n    const res = resources[resourceId];\n\n    this._track(consumerId, requestId, res, onChange);\n\n    if (res) {\n      return res.getData();\n    }\n\n    return undefined;\n  }\n\n  prune() {\n    if (!this._pruneRequest) {\n      this._pruneRequest = setTimeout(() => this._prune(), 0);\n    }\n  }\n\n  finalize() {\n    for (const key in this._resources) {\n      this._resources[key].delete();\n    }\n  }\n\n  _track(consumerId, requestId, resource, onChange) {\n    const consumers = this._consumers;\n    const consumer = consumers[consumerId] = consumers[consumerId] || {};\n    const request = consumer[requestId] || {};\n\n    if (request.resource) {\n      request.resource.unsubscribe(request);\n      request.resource = null;\n      this.prune();\n    }\n\n    if (resource) {\n      consumer[requestId] = request;\n      request.onChange = onChange;\n      request.resource = resource;\n      resource.subscribe(request);\n    }\n  }\n\n  _prune() {\n    this._pruneRequest = null;\n\n    for (const key of Object.keys(this._resources)) {\n      const res = this._resources[key];\n\n      if (!res.persistent && !res.inUse()) {\n        res.delete();\n        delete this._resources[key];\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=resource-manager.js.map","import { ProgramManager } from '@luma.gl/core';\nimport { gouraudLighting, phongLighting } from '@luma.gl/core';\nimport geometry from './misc/geometry';\nimport project from './project/project';\nimport project32 from './project32/project32';\nimport shadow from './shadow/shadow';\nimport picking from './picking/picking';\nconst DEFAULT_MODULES = [geometry, project];\nconst SHADER_HOOKS = ['vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)', 'vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)', 'vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)', 'fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)'];\nexport function createProgramManager(gl) {\n  const programManager = ProgramManager.getDefaultProgramManager(gl);\n\n  for (const shaderModule of DEFAULT_MODULES) {\n    programManager.addDefaultModule(shaderModule);\n  }\n\n  for (const shaderHook of SHADER_HOOKS) {\n    programManager.addShaderHook(shaderHook);\n  }\n\n  return programManager;\n}\nexport { picking, project, project32, gouraudLighting, phongLighting, shadow };\n//# sourceMappingURL=index.js.map","const vs = \"\\nstruct VertexGeometry {\\n  vec4 position;\\n  vec3 worldPosition;\\n  vec3 worldPositionAlt;\\n  vec3 normal;\\n  vec2 uv;\\n  vec3 pickingColor;\\n} geometry;\\n\";\nconst fs = \"\\n#define SMOOTH_EDGE_RADIUS 0.5\\n\\nstruct FragmentGeometry {\\n  vec2 uv;\\n} geometry;\\n\\nfloat smoothedge(float edge, float x) {\\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\\n}\\n\";\nexport default {\n  name: 'geometry',\n  vs,\n  fs\n};\n//# sourceMappingURL=geometry.js.map","import { Timeline } from '@luma.gl/core';\nimport { LIFECYCLE } from '../lifecycle/constants';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { flatten } from '../utils/flatten';\nimport { Stats } from 'probe.gl';\nimport ResourceManager from './resource/resource-manager';\nimport Viewport from '../viewports/viewport';\nimport { createProgramManager } from '../shaderlib';\nconst TRACE_SET_LAYERS = 'layerManager.setLayers';\nconst TRACE_ACTIVATE_VIEWPORT = 'layerManager.activateViewport';\nconst INITIAL_CONTEXT = Object.seal({\n  layerManager: null,\n  resourceManager: null,\n  deck: null,\n  gl: null,\n  stats: null,\n  shaderCache: null,\n  pickingFBO: null,\n  mousePosition: null,\n  userData: {}\n});\nexport default class LayerManager {\n  constructor(gl, {\n    deck,\n    stats,\n    viewport,\n    timeline\n  } = {}) {\n    this.lastRenderedLayers = [];\n    this.layers = [];\n    this.resourceManager = new ResourceManager({\n      gl,\n      protocol: 'deck://'\n    });\n    this.context = { ...INITIAL_CONTEXT,\n      layerManager: this,\n      gl,\n      deck,\n      programManager: gl && createProgramManager(gl),\n      stats: stats || new Stats({\n        id: 'deck.gl'\n      }),\n      viewport: viewport || new Viewport({\n        id: 'DEFAULT-INITIAL-VIEWPORT'\n      }),\n      timeline: timeline || new Timeline(),\n      resourceManager: this.resourceManager\n    };\n    this._nextLayers = null;\n    this._needsRedraw = 'Initial render';\n    this._needsUpdate = false;\n    this._debug = false;\n    this.activateViewport = this.activateViewport.bind(this);\n    Object.seal(this);\n  }\n\n  finalize() {\n    this.resourceManager.finalize();\n\n    for (const layer of this.layers) {\n      this._finalizeLayer(layer);\n    }\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    let redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    for (const layer of this.layers) {\n      const layerNeedsRedraw = layer.getNeedsRedraw(opts);\n      redraw = redraw || layerNeedsRedraw;\n    }\n\n    return redraw;\n  }\n\n  needsUpdate() {\n    if (this._nextLayers && this._nextLayers !== this.lastRenderedLayers) {\n      return 'layers changed';\n    }\n\n    return this._needsUpdate;\n  }\n\n  setNeedsRedraw(reason) {\n    this._needsRedraw = this._needsRedraw || reason;\n  }\n\n  setNeedsUpdate(reason) {\n    this._needsUpdate = this._needsUpdate || reason;\n  }\n\n  getLayers({\n    layerIds = null\n  } = {}) {\n    return layerIds ? this.layers.filter(layer => layerIds.find(layerId => layer.id.indexOf(layerId) === 0)) : this.layers;\n  }\n\n  setProps(props) {\n    if ('debug' in props) {\n      this._debug = props.debug;\n    }\n\n    if ('userData' in props) {\n      this.context.userData = props.userData;\n    }\n\n    if ('layers' in props) {\n      this._nextLayers = props.layers;\n    }\n\n    if ('onError' in props) {\n      this.context.onError = props.onError;\n    }\n  }\n\n  setLayers(newLayers, reason) {\n    debug(TRACE_SET_LAYERS, this, reason, newLayers);\n    this.lastRenderedLayers = newLayers;\n    newLayers = flatten(newLayers, Boolean);\n\n    for (const layer of newLayers) {\n      layer.context = this.context;\n    }\n\n    this._updateLayers(this.layers, newLayers);\n\n    return this;\n  }\n\n  updateLayers() {\n    const reason = this.needsUpdate();\n\n    if (reason) {\n      this.setNeedsRedraw(\"updating layers: \".concat(reason));\n      this.setLayers(this._nextLayers || this.lastRenderedLayers, reason);\n    }\n\n    this._nextLayers = null;\n  }\n\n  activateViewport(viewport) {\n    debug(TRACE_ACTIVATE_VIEWPORT, this, viewport);\n\n    if (viewport) {\n      this.context.viewport = viewport;\n    }\n\n    return this;\n  }\n\n  _handleError(stage, error, layer) {\n    layer.raiseError(error, \"\".concat(stage, \" of \").concat(layer));\n  }\n\n  _updateLayers(oldLayers, newLayers) {\n    const oldLayerMap = {};\n\n    for (const oldLayer of oldLayers) {\n      if (oldLayerMap[oldLayer.id]) {\n        log.warn(\"Multiple old layers with same id \".concat(oldLayer.id))();\n      } else {\n        oldLayerMap[oldLayer.id] = oldLayer;\n      }\n    }\n\n    const generatedLayers = [];\n\n    this._updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers);\n\n    this._finalizeOldLayers(oldLayerMap);\n\n    let needsUpdate = false;\n\n    for (const layer of generatedLayers) {\n      if (layer.hasUniformTransition()) {\n        needsUpdate = true;\n        break;\n      }\n    }\n\n    this._needsUpdate = needsUpdate;\n    this.layers = generatedLayers;\n  }\n\n  _updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers) {\n    for (const newLayer of newLayers) {\n      newLayer.context = this.context;\n      const oldLayer = oldLayerMap[newLayer.id];\n\n      if (oldLayer === null) {\n        log.warn(\"Multiple new layers with same id \".concat(newLayer.id))();\n      }\n\n      oldLayerMap[newLayer.id] = null;\n      let sublayers = null;\n\n      try {\n        if (this._debug && oldLayer !== newLayer) {\n          newLayer.validateProps();\n        }\n\n        if (!oldLayer) {\n          this._initializeLayer(newLayer);\n        } else {\n          this._transferLayerState(oldLayer, newLayer);\n\n          this._updateLayer(newLayer);\n        }\n\n        generatedLayers.push(newLayer);\n        sublayers = newLayer.isComposite && newLayer.getSubLayers();\n      } catch (err) {\n        this._handleError('matching', err, newLayer);\n      }\n\n      if (sublayers) {\n        this._updateSublayersRecursively(sublayers, oldLayerMap, generatedLayers);\n      }\n    }\n  }\n\n  _finalizeOldLayers(oldLayerMap) {\n    for (const layerId in oldLayerMap) {\n      const layer = oldLayerMap[layerId];\n\n      if (layer) {\n        this._finalizeLayer(layer);\n      }\n    }\n  }\n\n  _initializeLayer(layer) {\n    try {\n      layer._initialize();\n\n      layer.lifecycle = LIFECYCLE.INITIALIZED;\n    } catch (err) {\n      this._handleError('initialization', err, layer);\n    }\n  }\n\n  _transferLayerState(oldLayer, newLayer) {\n    newLayer._transferState(oldLayer);\n\n    newLayer.lifecycle = LIFECYCLE.MATCHED;\n\n    if (newLayer !== oldLayer) {\n      oldLayer.lifecycle = LIFECYCLE.AWAITING_GC;\n    }\n  }\n\n  _updateLayer(layer) {\n    try {\n      layer._update();\n    } catch (err) {\n      this._handleError('update', err, layer);\n    }\n  }\n\n  _finalizeLayer(layer) {\n    this._needsRedraw = this._needsRedraw || \"finalized \".concat(layer);\n    layer.lifecycle = LIFECYCLE.AWAITING_FINALIZATION;\n\n    try {\n      layer._finalize();\n\n      layer.lifecycle = LIFECYCLE.FINALIZED;\n    } catch (err) {\n      this._handleError('finalization', err, layer);\n    }\n  }\n\n}\n//# sourceMappingURL=layer-manager.js.map","export function deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (!a || !b) {\n    return false;\n  }\n\n  for (const key in a) {\n    const aValue = a[key];\n    const bValue = b[key];\n    const equals = aValue === bValue || Array.isArray(aValue) && Array.isArray(bValue) && deepEqual(aValue, bValue);\n\n    if (!equals) {\n      return false;\n    }\n  }\n\n  return true;\n}\n//# sourceMappingURL=deep-equal.js.map","import { deepEqual } from '../utils/deep-equal';\nimport log from '../utils/log';\nimport { flatten } from '../utils/flatten';\nexport default class ViewManager {\n  constructor(props = {}) {\n    this.views = [];\n    this.width = 100;\n    this.height = 100;\n    this.viewState = {};\n    this.controllers = {};\n    this.timeline = props.timeline;\n    this._viewports = [];\n    this._viewportMap = {};\n    this._isUpdating = false;\n    this._needsRedraw = 'Initial render';\n    this._needsUpdate = true;\n    this._eventManager = props.eventManager;\n    this._eventCallbacks = {\n      onViewStateChange: props.onViewStateChange,\n      onInteractionStateChange: props.onInteractionStateChange\n    };\n    Object.seal(this);\n    this.setProps(props);\n  }\n\n  finalize() {\n    for (const key in this.controllers) {\n      if (this.controllers[key]) {\n        this.controllers[key].finalize();\n      }\n    }\n\n    this.controllers = {};\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  setNeedsUpdate(reason) {\n    this._needsUpdate = this._needsUpdate || reason;\n    this._needsRedraw = this._needsRedraw || reason;\n  }\n\n  updateViewStates() {\n    for (const viewId in this.controllers) {\n      const controller = this.controllers[viewId];\n\n      if (controller) {\n        controller.updateTransition();\n      }\n    }\n  }\n\n  getViewports(rect) {\n    if (rect) {\n      return this._viewports.filter(viewport => viewport.containsPixel(rect));\n    }\n\n    return this._viewports;\n  }\n\n  getViews() {\n    const viewMap = {};\n    this.views.forEach(view => {\n      viewMap[view.id] = view;\n    });\n    return viewMap;\n  }\n\n  getView(viewOrViewId) {\n    return typeof viewOrViewId === 'string' ? this.views.find(view => view.id === viewOrViewId) : viewOrViewId;\n  }\n\n  getViewState(viewId) {\n    const view = this.getView(viewId);\n    const viewState = view && this.viewState[view.getViewStateId()] || this.viewState;\n    return view ? view.filterViewState(viewState) : viewState;\n  }\n\n  getViewport(viewId) {\n    return this._viewportMap[viewId];\n  }\n\n  unproject(xyz, opts) {\n    const viewports = this.getViewports();\n    const pixel = {\n      x: xyz[0],\n      y: xyz[1]\n    };\n\n    for (let i = viewports.length - 1; i >= 0; --i) {\n      const viewport = viewports[i];\n\n      if (viewport.containsPixel(pixel)) {\n        const p = xyz.slice();\n        p[0] -= viewport.x;\n        p[1] -= viewport.y;\n        return viewport.unproject(p, opts);\n      }\n    }\n\n    return null;\n  }\n\n  setProps(props) {\n    if ('views' in props) {\n      this._setViews(props.views);\n    }\n\n    if ('viewState' in props) {\n      this._setViewState(props.viewState);\n    }\n\n    if ('width' in props || 'height' in props) {\n      this._setSize(props.width, props.height);\n    }\n\n    if (!this._isUpdating) {\n      this._update();\n    }\n  }\n\n  _update() {\n    this._isUpdating = true;\n\n    if (this._needsUpdate) {\n      this._needsUpdate = false;\n\n      this._rebuildViewports();\n    }\n\n    if (this._needsUpdate) {\n      this._needsUpdate = false;\n\n      this._rebuildViewports();\n    }\n\n    this._isUpdating = false;\n  }\n\n  _setSize(width, height) {\n    if (width !== this.width || height !== this.height) {\n      this.width = width;\n      this.height = height;\n      this.setNeedsUpdate('Size changed');\n    }\n  }\n\n  _setViews(views) {\n    views = flatten(views, Boolean);\n\n    const viewsChanged = this._diffViews(views, this.views);\n\n    if (viewsChanged) {\n      this.setNeedsUpdate('views changed');\n    }\n\n    this.views = views;\n  }\n\n  _setViewState(viewState) {\n    if (viewState) {\n      const viewStateChanged = !deepEqual(viewState, this.viewState);\n\n      if (viewStateChanged) {\n        this.setNeedsUpdate('viewState changed');\n      }\n\n      this.viewState = viewState;\n    } else {\n      log.warn('missing `viewState` or `initialViewState`')();\n    }\n  }\n\n  _onViewStateChange(viewId, event) {\n    event.viewId = viewId;\n\n    if (this._eventCallbacks.onViewStateChange) {\n      this._eventCallbacks.onViewStateChange(event);\n    }\n  }\n\n  _createController(view, props) {\n    const Controller = props.type;\n    const controller = new Controller({\n      timeline: this.timeline,\n      eventManager: this._eventManager,\n      onViewStateChange: this._onViewStateChange.bind(this, props.id),\n      onStateChange: this._eventCallbacks.onInteractionStateChange,\n      makeViewport: viewState => view._getViewport(viewState, {\n        width: viewState.width,\n        height: viewState.height\n      }),\n      ...props\n    });\n    return controller;\n  }\n\n  _updateController(view, viewState, viewport, controller) {\n    let controllerProps = view.controller;\n\n    if (controllerProps) {\n      controllerProps = { ...viewState,\n        ...view.props,\n        ...controllerProps,\n        id: view.id,\n        x: viewport.x,\n        y: viewport.y,\n        width: viewport.width,\n        height: viewport.height\n      };\n\n      if (controller) {\n        controller.setProps(controllerProps);\n      } else {\n        controller = this._createController(view, controllerProps);\n      }\n\n      return controller;\n    }\n\n    return null;\n  }\n\n  _rebuildViewports() {\n    const {\n      width,\n      height,\n      views\n    } = this;\n    const oldControllers = this.controllers;\n    this._viewports = [];\n    this.controllers = {};\n    let invalidateControllers = false;\n\n    for (let i = views.length; i--;) {\n      const view = views[i];\n      const viewState = this.getViewState(view);\n      const viewport = view.makeViewport({\n        width,\n        height,\n        viewState\n      });\n      let oldController = oldControllers[view.id];\n\n      if (view.controller && !oldController) {\n        invalidateControllers = true;\n      }\n\n      if ((invalidateControllers || !view.controller) && oldController) {\n        oldController.finalize();\n        oldController = null;\n      }\n\n      this.controllers[view.id] = this._updateController(view, viewState, viewport, oldController);\n\n      this._viewports.unshift(viewport);\n    }\n\n    for (const id in oldControllers) {\n      if (oldControllers[id] && !this.controllers[id]) {\n        oldControllers[id].finalize();\n      }\n    }\n\n    this._buildViewportMap();\n  }\n\n  _buildViewportMap() {\n    this._viewportMap = {};\n\n    this._viewports.forEach(viewport => {\n      if (viewport.id) {\n        this._viewportMap[viewport.id] = this._viewportMap[viewport.id] || viewport;\n      }\n    });\n  }\n\n  _diffViews(newViews, oldViews) {\n    if (newViews.length !== oldViews.length) {\n      return true;\n    }\n\n    return newViews.some((_, i) => !newViews[i].equals(oldViews[i]));\n  }\n\n}\n//# sourceMappingURL=view-manager.js.map","const PERCENT_OR_PIXELS_REGEX = /([0-9]+\\.?[0-9]*)(%|px)/;\nexport function parsePosition(value) {\n  switch (typeof value) {\n    case 'number':\n      return {\n        position: value,\n        relative: false\n      };\n\n    case 'string':\n      const match = value.match(PERCENT_OR_PIXELS_REGEX);\n\n      if (match && match.length >= 3) {\n        const relative = match[2] === '%';\n        const position = parseFloat(match[1]);\n        return {\n          position: relative ? position / 100 : position,\n          relative\n        };\n      }\n\n    default:\n      throw new Error(\"Could not parse position string \".concat(value));\n  }\n}\nexport function getPosition(position, extent) {\n  return position.relative ? Math.round(position.position * extent) : position.position;\n}\n//# sourceMappingURL=positions.js.map","import Viewport from '../viewports/viewport';\nimport { parsePosition, getPosition } from '../utils/positions';\nimport { deepEqual } from '../utils/deep-equal';\nimport assert from '../utils/assert';\nexport default class View {\n  constructor(props = {}) {\n    const {\n      id = null,\n      x = 0,\n      y = 0,\n      width = '100%',\n      height = '100%',\n      projectionMatrix = null,\n      fovy = 50,\n      near = 0.1,\n      far = 1000,\n      modelMatrix = null,\n      viewportInstance = null,\n      type = Viewport\n    } = props;\n    assert(!viewportInstance || viewportInstance instanceof Viewport);\n    this.viewportInstance = viewportInstance;\n    this.id = id || this.constructor.displayName || 'view';\n    this.type = type;\n    this.props = { ...props,\n      id: this.id,\n      projectionMatrix,\n      fovy,\n      near,\n      far,\n      modelMatrix\n    };\n\n    this._parseDimensions({\n      x,\n      y,\n      width,\n      height\n    });\n\n    this.equals = this.equals.bind(this);\n    Object.seal(this);\n  }\n\n  equals(view) {\n    if (this === view) {\n      return true;\n    }\n\n    if (this.viewportInstance) {\n      return view.viewportInstance && this.viewportInstance.equals(view.viewportInstance);\n    }\n\n    const viewChanged = deepEqual(this.props, view.props);\n    return viewChanged;\n  }\n\n  makeViewport({\n    width,\n    height,\n    viewState\n  }) {\n    if (this.viewportInstance) {\n      return this.viewportInstance;\n    }\n\n    viewState = this.filterViewState(viewState);\n    const viewportDimensions = this.getDimensions({\n      width,\n      height\n    });\n    return this._getViewport(viewState, viewportDimensions);\n  }\n\n  getViewStateId() {\n    switch (typeof this.props.viewState) {\n      case 'string':\n        return this.props.viewState;\n\n      case 'object':\n        return this.props.viewState && this.props.viewState.id;\n\n      default:\n        return this.id;\n    }\n  }\n\n  filterViewState(viewState) {\n    if (this.props.viewState && typeof this.props.viewState === 'object') {\n      if (!this.props.viewState.id) {\n        return this.props.viewState;\n      }\n\n      const newViewState = { ...viewState\n      };\n\n      for (const key in this.props.viewState) {\n        if (key !== 'id') {\n          newViewState[key] = this.props.viewState[key];\n        }\n      }\n\n      return newViewState;\n    }\n\n    return viewState;\n  }\n\n  getDimensions({\n    width,\n    height\n  }) {\n    return {\n      x: getPosition(this._x, width),\n      y: getPosition(this._y, height),\n      width: getPosition(this._width, width),\n      height: getPosition(this._height, height)\n    };\n  }\n\n  _getControllerProps(defaultOpts) {\n    let opts = this.props.controller;\n\n    if (!opts) {\n      return null;\n    }\n\n    if (opts === true) {\n      return defaultOpts;\n    }\n\n    if (typeof opts === 'function') {\n      opts = {\n        type: opts\n      };\n    }\n\n    return { ...defaultOpts,\n      ...opts\n    };\n  }\n\n  _getViewport(viewState, viewportDimensions) {\n    const {\n      type: ViewportType\n    } = this;\n    return new ViewportType({ ...viewState,\n      ...this.props,\n      ...viewportDimensions\n    });\n  }\n\n  _parseDimensions({\n    x,\n    y,\n    width,\n    height\n  }) {\n    this._x = parsePosition(x);\n    this._y = parsePosition(y);\n    this._width = parsePosition(width);\n    this._height = parsePosition(height);\n  }\n\n}\n//# sourceMappingURL=view.js.map","import Transition from '../transitions/transition';\n\nconst noop = () => {};\n\nexport const TRANSITION_EVENTS = {\n  BREAK: 1,\n  SNAP_TO_END: 2,\n  IGNORE: 3\n};\nconst DEFAULT_PROPS = {\n  transitionEasing: t => t,\n  transitionInterruption: TRANSITION_EVENTS.BREAK,\n  onTransitionStart: noop,\n  onTransitionInterrupt: noop,\n  onTransitionEnd: noop\n};\nexport default class TransitionManager {\n  constructor(ControllerState, props = {}) {\n    this.ControllerState = ControllerState;\n    this.props = { ...DEFAULT_PROPS,\n      ...props\n    };\n    this.propsInTransition = null;\n    this.transition = new Transition(props.timeline);\n    this.onViewStateChange = props.onViewStateChange || noop;\n    this.onStateChange = props.onStateChange || noop;\n    this._onTransitionUpdate = this._onTransitionUpdate.bind(this);\n  }\n\n  finalize() {\n    this.transition.cancel();\n  }\n\n  getViewportInTransition() {\n    return this.propsInTransition;\n  }\n\n  processViewStateChange(nextProps) {\n    let transitionTriggered = false;\n    const currentProps = this.props;\n    nextProps = { ...DEFAULT_PROPS,\n      ...nextProps\n    };\n    this.props = nextProps;\n\n    if (this._shouldIgnoreViewportChange(currentProps, nextProps)) {\n      return transitionTriggered;\n    }\n\n    if (this._isTransitionEnabled(nextProps)) {\n      const {\n        interruption,\n        endProps\n      } = this.transition.settings;\n      const startProps = { ...currentProps,\n        ...(interruption === TRANSITION_EVENTS.SNAP_TO_END ? endProps : this.propsInTransition || currentProps)\n      };\n\n      this._triggerTransition(startProps, nextProps);\n\n      transitionTriggered = true;\n    } else {\n      this.transition.cancel();\n    }\n\n    return transitionTriggered;\n  }\n\n  updateTransition() {\n    this.transition.update();\n  }\n\n  _isTransitionEnabled(props) {\n    const {\n      transitionDuration,\n      transitionInterpolator\n    } = props;\n    return (transitionDuration > 0 || transitionDuration === 'auto') && Boolean(transitionInterpolator);\n  }\n\n  _isUpdateDueToCurrentTransition(props) {\n    if (this.transition.inProgress) {\n      return this.transition.settings.interpolator.arePropsEqual(props, this.propsInTransition);\n    }\n\n    return false;\n  }\n\n  _shouldIgnoreViewportChange(currentProps, nextProps) {\n    if (this.transition.inProgress) {\n      return this.transition.settings.interruption === TRANSITION_EVENTS.IGNORE || this._isUpdateDueToCurrentTransition(nextProps);\n    } else if (this._isTransitionEnabled(nextProps)) {\n      return nextProps.transitionInterpolator.arePropsEqual(currentProps, nextProps);\n    }\n\n    return true;\n  }\n\n  _triggerTransition(startProps, endProps) {\n    const startViewstate = new this.ControllerState(startProps);\n    const endViewStateProps = new this.ControllerState(endProps).shortestPathFrom(startViewstate);\n    const {\n      transitionInterpolator\n    } = endProps;\n    const duration = transitionInterpolator.getDuration ? transitionInterpolator.getDuration(startProps, endProps) : endProps.transitionDuration;\n\n    if (duration === 0) {\n      return;\n    }\n\n    const initialProps = endProps.transitionInterpolator.initializeProps(startProps, endViewStateProps);\n    this.propsInTransition = {};\n    this.duration = duration;\n    this.transition.start({\n      duration,\n      easing: endProps.transitionEasing,\n      interpolator: endProps.transitionInterpolator,\n      interruption: endProps.transitionInterruption,\n      startProps: initialProps.start,\n      endProps: initialProps.end,\n      onStart: endProps.onTransitionStart,\n      onUpdate: this._onTransitionUpdate,\n      onInterrupt: this._onTransitionEnd(endProps.onTransitionInterrupt),\n      onEnd: this._onTransitionEnd(endProps.onTransitionEnd)\n    });\n    this.onStateChange({\n      inTransition: true\n    });\n    this.updateTransition();\n  }\n\n  _onTransitionEnd(callback) {\n    return transition => {\n      this.propsInTransition = null;\n      this.onStateChange({\n        inTransition: false,\n        isZooming: false,\n        isPanning: false,\n        isRotating: false\n      });\n      callback(transition);\n    };\n  }\n\n  _onTransitionUpdate(transition) {\n    const {\n      time,\n      settings: {\n        interpolator,\n        startProps,\n        endProps,\n        duration,\n        easing\n      }\n    } = transition;\n    const t = easing(time / duration);\n    const viewport = interpolator.interpolateProps(startProps, endProps, t);\n    this.propsInTransition = new this.ControllerState({ ...this.props,\n      ...viewport\n    }).getViewportProps();\n    this.onViewStateChange({\n      viewState: this.propsInTransition,\n      oldViewState: this.props\n    });\n  }\n\n}\n//# sourceMappingURL=transition-manager.js.map","import TransitionInterpolator from './transition-interpolator';\nimport { lerp } from 'math.gl';\nconst DEFAULT_PROPS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\nconst DEFAULT_REQUIRED_PROPS = ['longitude', 'latitude', 'zoom'];\nexport default class LinearInterpolator extends TransitionInterpolator {\n  constructor(opts = {}) {\n    const transitionProps = Array.isArray(opts) ? opts : opts.transitionProps;\n    super(transitionProps || {\n      compare: DEFAULT_PROPS,\n      extract: DEFAULT_PROPS,\n      required: DEFAULT_REQUIRED_PROPS\n    });\n    this.opts = opts;\n  }\n\n  initializeProps(startProps, endProps) {\n    const result = super.initializeProps(startProps, endProps);\n    const {\n      makeViewport,\n      around\n    } = this.opts;\n\n    if (makeViewport && around) {\n      const startViewport = makeViewport(startProps);\n      const endViewport = makeViewport(endProps);\n      const aroundPosition = startViewport.unproject(around);\n      result.start.around = around;\n      Object.assign(result.end, {\n        around: endViewport.project(aroundPosition),\n        aroundPosition,\n        width: endProps.width,\n        height: endProps.height\n      });\n    }\n\n    return result;\n  }\n\n  interpolateProps(startProps, endProps, t) {\n    const propsInTransition = {};\n\n    for (const key of this._propsToExtract) {\n      propsInTransition[key] = lerp(startProps[key] || 0, endProps[key] || 0, t);\n    }\n\n    if (endProps.aroundPosition) {\n      const viewport = this.opts.makeViewport({ ...endProps,\n        ...propsInTransition\n      });\n      Object.assign(propsInTransition, viewport.panByPosition(endProps.aroundPosition, lerp(startProps.around, endProps.around, t)));\n    }\n\n    return propsInTransition;\n  }\n\n}\n//# sourceMappingURL=linear-interpolator.js.map","import { equals } from 'math.gl';\nimport assert from '../utils/assert';\nexport default class TransitionInterpolator {\n  constructor(opts = {}) {\n    if (Array.isArray(opts)) {\n      opts = {\n        compare: opts,\n        extract: opts,\n        required: opts\n      };\n    }\n\n    const {\n      compare,\n      extract,\n      required\n    } = opts;\n    this._propsToCompare = compare;\n    this._propsToExtract = extract;\n    this._requiredProps = required;\n  }\n\n  arePropsEqual(currentProps, nextProps) {\n    for (const key of this._propsToCompare || Object.keys(nextProps)) {\n      if (!(key in currentProps) || !(key in nextProps) || !equals(currentProps[key], nextProps[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  initializeProps(startProps, endProps) {\n    let result;\n\n    if (this._propsToExtract) {\n      const startViewStateProps = {};\n      const endViewStateProps = {};\n\n      for (const key of this._propsToExtract) {\n        startViewStateProps[key] = startProps[key];\n        endViewStateProps[key] = endProps[key];\n      }\n\n      result = {\n        start: startViewStateProps,\n        end: endViewStateProps\n      };\n    } else {\n      result = {\n        start: startProps,\n        end: endProps\n      };\n    }\n\n    this._checkRequiredProps(result.start);\n\n    this._checkRequiredProps(result.end);\n\n    return result;\n  }\n\n  interpolateProps(startProps, endProps, t) {\n    return endProps;\n  }\n\n  getDuration(startProps, endProps) {\n    return endProps.transitionDuration;\n  }\n\n  _checkRequiredProps(props) {\n    if (!this._requiredProps) {\n      return;\n    }\n\n    this._requiredProps.forEach(propName => {\n      const value = props[propName];\n      assert(Number.isFinite(value) || Array.isArray(value), \"\".concat(propName, \" is required for transition\"));\n    });\n  }\n\n}\n//# sourceMappingURL=transition-interpolator.js.map","import TransitionManager, { TRANSITION_EVENTS } from './transition-manager';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nconst NO_TRANSITION_PROPS = {\n  transitionDuration: 0\n};\nconst LINEAR_TRANSITION_PROPS = {\n  transitionDuration: 300,\n  transitionEasing: t => t,\n  transitionInterruption: TRANSITION_EVENTS.BREAK\n};\nconst DEFAULT_INERTIA = 300;\n\nconst INERTIA_EASING = t => 1 - (1 - t) * (1 - t);\n\nconst EVENT_TYPES = {\n  WHEEL: ['wheel'],\n  PAN: ['panstart', 'panmove', 'panend'],\n  PINCH: ['pinchstart', 'pinchmove', 'pinchend'],\n  TRIPLE_PAN: ['tripanstart', 'tripanmove', 'tripanend'],\n  DOUBLE_TAP: ['doubletap'],\n  KEYBOARD: ['keydown']\n};\nexport default class Controller {\n  constructor(ControllerState, options = {}) {\n    this.ControllerState = ControllerState;\n    this.controllerState = null;\n    this.controllerStateProps = null;\n    this.eventManager = null;\n    this.transitionManager = new TransitionManager(ControllerState, { ...options,\n      onViewStateChange: this._onTransition.bind(this),\n      onStateChange: this._setInteractionState.bind(this)\n    });\n    const linearTransitionProps = this.linearTransitionProps;\n    this._transition = linearTransitionProps && { ...LINEAR_TRANSITION_PROPS,\n      transitionInterpolator: new LinearInterpolator({\n        transitionProps: linearTransitionProps\n      })\n    };\n    this._events = null;\n    this._interactionState = {\n      isDragging: false\n    };\n    this._customEvents = [];\n    this.onViewStateChange = null;\n    this.onStateChange = null;\n    this.handleEvent = this.handleEvent.bind(this);\n    this.setProps(options);\n  }\n\n  get linearTransitionProps() {\n    return null;\n  }\n\n  set events(customEvents) {\n    this.toggleEvents(this._customEvents, false);\n    this.toggleEvents(customEvents, true);\n    this._customEvents = customEvents;\n    this.setProps(this.controllerStateProps);\n  }\n\n  finalize() {\n    for (const eventName in this._events) {\n      if (this._events[eventName]) {\n        this.eventManager.off(eventName, this.handleEvent);\n      }\n    }\n\n    this.transitionManager.finalize();\n  }\n\n  handleEvent(event) {\n    const {\n      ControllerState\n    } = this;\n    this.controllerState = new ControllerState({\n      makeViewport: this.makeViewport,\n      ...this.controllerStateProps,\n      ...this._state\n    });\n    const eventStartBlocked = this._eventStartBlocked;\n\n    switch (event.type) {\n      case 'panstart':\n        return eventStartBlocked ? false : this._onPanStart(event);\n\n      case 'panmove':\n        return this._onPan(event);\n\n      case 'panend':\n        return this._onPanEnd(event);\n\n      case 'pinchstart':\n        return eventStartBlocked ? false : this._onPinchStart(event);\n\n      case 'pinchmove':\n        return this._onPinch(event);\n\n      case 'pinchend':\n        return this._onPinchEnd(event);\n\n      case 'tripanstart':\n        return eventStartBlocked ? false : this._onTriplePanStart(event);\n\n      case 'tripanmove':\n        return this._onTriplePan(event);\n\n      case 'tripanend':\n        return this._onTriplePanEnd(event);\n\n      case 'doubletap':\n        return this._onDoubleTap(event);\n\n      case 'wheel':\n        return this._onWheel(event);\n\n      case 'keydown':\n        return this._onKeyDown(event);\n\n      default:\n        return false;\n    }\n  }\n\n  getCenter(event) {\n    const {\n      x,\n      y\n    } = this.controllerStateProps;\n    const {\n      offsetCenter\n    } = event;\n    return [offsetCenter.x - x, offsetCenter.y - y];\n  }\n\n  isPointInBounds(pos, event) {\n    const {\n      width,\n      height\n    } = this.controllerStateProps;\n\n    if (event && event.handled) {\n      return false;\n    }\n\n    const inside = pos[0] >= 0 && pos[0] <= width && pos[1] >= 0 && pos[1] <= height;\n\n    if (inside && event) {\n      event.stopPropagation();\n    }\n\n    return inside;\n  }\n\n  isFunctionKeyPressed(event) {\n    const {\n      srcEvent\n    } = event;\n    return Boolean(srcEvent.metaKey || srcEvent.altKey || srcEvent.ctrlKey || srcEvent.shiftKey);\n  }\n\n  isDragging() {\n    return this._interactionState.isDragging;\n  }\n\n  blockEvents(timeout) {\n    const timer = setTimeout(() => {\n      if (this._eventStartBlocked === timer) {\n        this._eventStartBlocked = null;\n      }\n    }, timeout);\n    this._eventStartBlocked = timer;\n  }\n\n  setProps(props) {\n    if ('onViewStateChange' in props) {\n      this.onViewStateChange = props.onViewStateChange;\n    }\n\n    if ('onStateChange' in props) {\n      this.onStateChange = props.onStateChange;\n    }\n\n    if ('makeViewport' in props) {\n      this.makeViewport = props.makeViewport;\n    }\n\n    if ('dragMode' in props) {\n      this.dragMode = props.dragMode;\n    }\n\n    this.controllerStateProps = props;\n\n    if ('eventManager' in props && this.eventManager !== props.eventManager) {\n      this.eventManager = props.eventManager;\n      this._events = {};\n      this.toggleEvents(this._customEvents, true);\n    }\n\n    if (!('transitionInterpolator' in props)) {\n      props.transitionInterpolator = this._getTransitionProps().transitionInterpolator;\n    }\n\n    this.transitionManager.processViewStateChange(props);\n    let {\n      inertia\n    } = props;\n\n    if (inertia === true) {\n      inertia = DEFAULT_INERTIA;\n    }\n\n    this.inertia = inertia;\n    const {\n      scrollZoom = true,\n      dragPan = true,\n      dragRotate = true,\n      doubleClickZoom = true,\n      touchZoom = true,\n      touchRotate = false,\n      keyboard = true\n    } = props;\n    const isInteractive = Boolean(this.onViewStateChange);\n    this.toggleEvents(EVENT_TYPES.WHEEL, isInteractive && scrollZoom);\n    this.toggleEvents(EVENT_TYPES.PAN, isInteractive && (dragPan || dragRotate));\n    this.toggleEvents(EVENT_TYPES.PINCH, isInteractive && (touchZoom || touchRotate));\n    this.toggleEvents(EVENT_TYPES.TRIPLE_PAN, isInteractive && touchRotate);\n    this.toggleEvents(EVENT_TYPES.DOUBLE_TAP, isInteractive && doubleClickZoom);\n    this.toggleEvents(EVENT_TYPES.KEYBOARD, isInteractive && keyboard);\n    this.scrollZoom = scrollZoom;\n    this.dragPan = dragPan;\n    this.dragRotate = dragRotate;\n    this.doubleClickZoom = doubleClickZoom;\n    this.touchZoom = touchZoom;\n    this.touchRotate = touchRotate;\n    this.keyboard = keyboard;\n  }\n\n  updateTransition() {\n    this.transitionManager.updateTransition();\n  }\n\n  toggleEvents(eventNames, enabled) {\n    if (this.eventManager) {\n      eventNames.forEach(eventName => {\n        if (this._events[eventName] !== enabled) {\n          this._events[eventName] = enabled;\n\n          if (enabled) {\n            this.eventManager.on(eventName, this.handleEvent);\n          } else {\n            this.eventManager.off(eventName, this.handleEvent);\n          }\n        }\n      });\n    }\n  }\n\n  updateViewport(newControllerState, extraProps = {}, interactionState = {}) {\n    const viewState = { ...newControllerState.getViewportProps(),\n      ...extraProps\n    };\n    const changed = this.controllerState !== newControllerState;\n    this._state = newControllerState.getState();\n\n    this._setInteractionState(interactionState);\n\n    if (changed) {\n      const oldViewState = this.controllerState ? this.controllerState.getViewportProps() : null;\n\n      if (this.onViewStateChange) {\n        this.onViewStateChange({\n          viewState,\n          interactionState: this._interactionState,\n          oldViewState\n        });\n      }\n    }\n  }\n\n  _onTransition(params) {\n    if (this.onViewStateChange) {\n      params.interactionState = this._interactionState;\n      this.onViewStateChange(params);\n    }\n  }\n\n  _setInteractionState(newStates) {\n    Object.assign(this._interactionState, newStates);\n\n    if (this.onStateChange) {\n      this.onStateChange(this._interactionState);\n    }\n  }\n\n  _onPanStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    let alternateMode = this.isFunctionKeyPressed(event) || event.rightButton;\n\n    if (this.invertPan || this.dragMode === 'pan') {\n      alternateMode = !alternateMode;\n    }\n\n    const newControllerState = this.controllerState[alternateMode ? 'panStart' : 'rotateStart']({\n      pos\n    });\n    this._panMove = alternateMode;\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onPan(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    return this._panMove ? this._onPanMove(event) : this._onPanRotate(event);\n  }\n\n  _onPanEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    return this._panMove ? this._onPanMoveEnd(event) : this._onPanRotateEnd(event);\n  }\n\n  _onPanMove(event) {\n    if (!this.dragPan) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    const newControllerState = this.controllerState.pan({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isPanning: true\n    });\n    return true;\n  }\n\n  _onPanMoveEnd(event) {\n    const {\n      inertia\n    } = this;\n\n    if (this.dragPan && inertia && event.velocity) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0] + event.velocityX * inertia / 2, pos[1] + event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.pan({\n        pos: endPos\n      }).panEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isPanning: true\n      });\n    } else {\n      const newControllerState = this.controllerState.panEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false\n      });\n    }\n\n    return true;\n  }\n\n  _onPanRotate(event) {\n    if (!this.dragRotate) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    const newControllerState = this.controllerState.rotate({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isRotating: true\n    });\n    return true;\n  }\n\n  _onPanRotateEnd(event) {\n    const {\n      inertia\n    } = this;\n\n    if (this.dragRotate && inertia && event.velocity) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0] + event.velocityX * inertia / 2, pos[1] + event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.rotate({\n        pos: endPos\n      }).rotateEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isRotating: true\n      });\n    } else {\n      const newControllerState = this.controllerState.rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isRotating: false\n      });\n    }\n\n    return true;\n  }\n\n  _onWheel(event) {\n    if (!this.scrollZoom) {\n      return false;\n    }\n\n    event.preventDefault();\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const {\n      speed = 0.01,\n      smooth = false\n    } = this.scrollZoom;\n    const {\n      delta\n    } = event;\n    let scale = 2 / (1 + Math.exp(-Math.abs(delta * speed)));\n\n    if (delta < 0 && scale !== 0) {\n      scale = 1 / scale;\n    }\n\n    const newControllerState = this.controllerState.zoom({\n      pos,\n      scale\n    });\n    this.updateViewport(newControllerState, { ...this._getTransitionProps({\n        around: pos\n      }),\n      transitionDuration: smooth ? 250 : 1\n    }, {\n      isZooming: true,\n      isPanning: true\n    });\n    return true;\n  }\n\n  _onTriplePanStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const newControllerState = this.controllerState.rotateStart({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onTriplePan(event) {\n    if (!this.touchRotate) {\n      return false;\n    }\n\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    pos[0] -= event.deltaX;\n    const newControllerState = this.controllerState.rotate({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isRotating: true\n    });\n    return true;\n  }\n\n  _onTriplePanEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const {\n      inertia\n    } = this;\n\n    if (this.touchRotate && inertia && event.velocityY) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0], pos[1] += event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.rotate({\n        pos: endPos\n      });\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isRotating: true\n      });\n      this.blockEvents(inertia);\n    } else {\n      const newControllerState = this.controllerState.rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isRotating: false\n      });\n    }\n\n    return true;\n  }\n\n  _onPinchStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const newControllerState = this.controllerState.zoomStart({\n      pos\n    }).rotateStart({\n      pos\n    });\n    this._startPinchRotation = event.rotation;\n    this._lastPinchEvent = event;\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onPinch(event) {\n    if (!this.touchZoom && !this.touchRotate) {\n      return false;\n    }\n\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    let newControllerState = this.controllerState;\n\n    if (this.touchZoom) {\n      const {\n        scale\n      } = event;\n      const pos = this.getCenter(event);\n      newControllerState = newControllerState.zoom({\n        pos,\n        scale\n      });\n    }\n\n    if (this.touchRotate) {\n      const {\n        rotation\n      } = event;\n      newControllerState = newControllerState.rotate({\n        deltaAngleX: this._startPinchRotation - rotation\n      });\n    }\n\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isPanning: this.touchZoom,\n      isZooming: this.touchZoom,\n      isRotating: this.touchRotate\n    });\n    this._lastPinchEvent = event;\n    return true;\n  }\n\n  _onPinchEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const {\n      inertia,\n      _lastPinchEvent\n    } = this;\n\n    if (this.touchZoom && inertia && _lastPinchEvent && event.scale !== _lastPinchEvent.scale) {\n      const pos = this.getCenter(event);\n      let newControllerState = this.controllerState.rotateEnd();\n      const z = Math.log2(event.scale);\n\n      const velocityZ = (z - Math.log2(_lastPinchEvent.scale)) / (event.deltaTime - _lastPinchEvent.deltaTime);\n\n      const endScale = Math.pow(2, z + velocityZ * inertia / 2);\n      newControllerState = newControllerState.zoom({\n        pos,\n        scale: endScale\n      }).zoomEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps({\n          around: pos\n        }),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isPanning: this.touchZoom,\n        isZooming: this.touchZoom,\n        isRotating: false\n      });\n      this.blockEvents(inertia);\n    } else {\n      const newControllerState = this.controllerState.zoomEnd().rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false,\n        isZooming: false,\n        isRotating: false\n      });\n    }\n\n    this._startPinchRotation = null;\n    this._lastPinchEvent = null;\n    return true;\n  }\n\n  _onDoubleTap(event) {\n    if (!this.doubleClickZoom) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const isZoomOut = this.isFunctionKeyPressed(event);\n    const newControllerState = this.controllerState.zoom({\n      pos,\n      scale: isZoomOut ? 0.5 : 2\n    });\n    this.updateViewport(newControllerState, this._getTransitionProps({\n      around: pos\n    }), {\n      isZooming: true,\n      isPanning: true\n    });\n    this.blockEvents(100);\n    return true;\n  }\n\n  _onKeyDown(event) {\n    if (!this.keyboard) {\n      return false;\n    }\n\n    const funcKey = this.isFunctionKeyPressed(event);\n    const {\n      zoomSpeed,\n      moveSpeed,\n      rotateSpeedX,\n      rotateSpeedY\n    } = this.keyboard;\n    const {\n      controllerState\n    } = this;\n    let newControllerState;\n    const interactionState = {};\n\n    switch (event.srcEvent.code) {\n      case 'Minus':\n        newControllerState = funcKey ? controllerState.zoomOut(zoomSpeed).zoomOut(zoomSpeed) : controllerState.zoomOut(zoomSpeed);\n        interactionState.isZooming = true;\n        break;\n\n      case 'Equal':\n        newControllerState = funcKey ? controllerState.zoomIn(zoomSpeed).zoomIn(zoomSpeed) : controllerState.zoomIn(zoomSpeed);\n        interactionState.isZooming = true;\n        break;\n\n      case 'ArrowLeft':\n        if (funcKey) {\n          newControllerState = controllerState.rotateLeft(rotateSpeedX);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveLeft(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowRight':\n        if (funcKey) {\n          newControllerState = controllerState.rotateRight(rotateSpeedX);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveRight(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowUp':\n        if (funcKey) {\n          newControllerState = controllerState.rotateUp(rotateSpeedY);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveUp(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowDown':\n        if (funcKey) {\n          newControllerState = controllerState.rotateDown(rotateSpeedY);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveDown(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      default:\n        return false;\n    }\n\n    this.updateViewport(newControllerState, this._getTransitionProps(), interactionState);\n    return true;\n  }\n\n  _getTransitionProps(opts) {\n    const {\n      _transition\n    } = this;\n\n    if (!_transition) {\n      return NO_TRANSITION_PROPS;\n    }\n\n    return opts ? { ..._transition,\n      transitionInterpolator: new LinearInterpolator({ ...opts,\n        transitionProps: this.linearTransitionProps,\n        makeViewport: this.controllerState.makeViewport\n      })\n    } : _transition;\n  }\n\n}\n//# sourceMappingURL=controller.js.map","import { clamp } from 'math.gl';\nimport Controller from './controller';\nimport ViewState from './view-state';\nimport { normalizeViewportProps } from '@math.gl/web-mercator';\nimport assert from '../utils/assert';\nconst PITCH_MOUSE_THRESHOLD = 5;\nconst PITCH_ACCEL = 1.2;\nconst DEFAULT_STATE = {\n  pitch: 0,\n  bearing: 0,\n  altitude: 1.5,\n  minZoom: 0,\n  maxZoom: 20,\n  minPitch: 0,\n  maxPitch: 60\n};\nexport class MapState extends ViewState {\n  constructor({\n    makeViewport,\n    width,\n    height,\n    latitude,\n    longitude,\n    zoom,\n    bearing = DEFAULT_STATE.bearing,\n    pitch = DEFAULT_STATE.pitch,\n    altitude = DEFAULT_STATE.altitude,\n    maxZoom = DEFAULT_STATE.maxZoom,\n    minZoom = DEFAULT_STATE.minZoom,\n    maxPitch = DEFAULT_STATE.maxPitch,\n    minPitch = DEFAULT_STATE.minPitch,\n    startPanLngLat,\n    startZoomLngLat,\n    startRotatePos,\n    startBearing,\n    startPitch,\n    startZoom,\n    normalize\n  } = {}) {\n    assert(Number.isFinite(longitude));\n    assert(Number.isFinite(latitude));\n    assert(Number.isFinite(zoom));\n    super({\n      width,\n      height,\n      latitude,\n      longitude,\n      zoom,\n      bearing,\n      pitch,\n      altitude,\n      maxZoom,\n      minZoom,\n      maxPitch,\n      minPitch,\n      normalize\n    });\n    this._state = {\n      startPanLngLat,\n      startZoomLngLat,\n      startRotatePos,\n      startBearing,\n      startPitch,\n      startZoom\n    };\n    this.makeViewport = makeViewport;\n  }\n\n  panStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startPanLngLat: this._unproject(pos)\n    });\n  }\n\n  pan({\n    pos,\n    startPos\n  }) {\n    const startPanLngLat = this._state.startPanLngLat || this._unproject(startPos);\n\n    if (!startPanLngLat) {\n      return this;\n    }\n\n    const viewport = this.makeViewport(this._viewportProps);\n    const newProps = viewport.panByPosition(startPanLngLat, pos);\n    return this._getUpdatedState(newProps);\n  }\n\n  panEnd() {\n    return this._getUpdatedState({\n      startPanLngLat: null\n    });\n  }\n\n  rotateStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startRotatePos: pos,\n      startBearing: this._viewportProps.bearing,\n      startPitch: this._viewportProps.pitch\n    });\n  }\n\n  rotate({\n    pos,\n    deltaAngleX = 0,\n    deltaAngleY = 0\n  }) {\n    const {\n      startRotatePos,\n      startBearing,\n      startPitch\n    } = this._state;\n\n    if (!startRotatePos || !Number.isFinite(startBearing) || !Number.isFinite(startPitch)) {\n      return this;\n    }\n\n    let newRotation;\n\n    if (pos) {\n      newRotation = this._calculateNewPitchAndBearing({ ...this._getRotationParams(pos, startRotatePos),\n        startBearing,\n        startPitch\n      });\n    } else {\n      newRotation = {\n        bearing: startBearing + deltaAngleX,\n        pitch: startPitch + deltaAngleY\n      };\n    }\n\n    return this._getUpdatedState(newRotation);\n  }\n\n  rotateEnd() {\n    return this._getUpdatedState({\n      startBearing: null,\n      startPitch: null\n    });\n  }\n\n  zoomStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startZoomLngLat: this._unproject(pos),\n      startZoom: this._viewportProps.zoom\n    });\n  }\n\n  zoom({\n    pos,\n    startPos,\n    scale\n  }) {\n    let {\n      startZoom,\n      startZoomLngLat\n    } = this._state;\n\n    if (!Number.isFinite(startZoom)) {\n      startZoom = this._viewportProps.zoom;\n      startZoomLngLat = this._unproject(startPos) || this._unproject(pos);\n    }\n\n    const zoom = this._calculateNewZoom({\n      scale,\n      startZoom\n    });\n\n    const zoomedViewport = this.makeViewport({ ...this._viewportProps,\n      zoom\n    });\n    return this._getUpdatedState({\n      zoom,\n      ...zoomedViewport.panByPosition(startZoomLngLat, pos)\n    });\n  }\n\n  zoomEnd() {\n    return this._getUpdatedState({\n      startZoomLngLat: null,\n      startZoom: null\n    });\n  }\n\n  zoomIn(speed = 2) {\n    return this._zoomFromCenter(speed);\n  }\n\n  zoomOut(speed = 2) {\n    return this._zoomFromCenter(1 / speed);\n  }\n\n  moveLeft(speed = 100) {\n    return this._panFromCenter([speed, 0]);\n  }\n\n  moveRight(speed = 100) {\n    return this._panFromCenter([-speed, 0]);\n  }\n\n  moveUp(speed = 100) {\n    return this._panFromCenter([0, speed]);\n  }\n\n  moveDown(speed = 100) {\n    return this._panFromCenter([0, -speed]);\n  }\n\n  rotateLeft(speed = 15) {\n    return this._getUpdatedState({\n      bearing: this._viewportProps.bearing - speed\n    });\n  }\n\n  rotateRight(speed = 15) {\n    return this._getUpdatedState({\n      bearing: this._viewportProps.bearing + speed\n    });\n  }\n\n  rotateUp(speed = 10) {\n    return this._getUpdatedState({\n      pitch: this._viewportProps.pitch + speed\n    });\n  }\n\n  rotateDown(speed = 10) {\n    return this._getUpdatedState({\n      pitch: this._viewportProps.pitch - speed\n    });\n  }\n\n  shortestPathFrom(viewState) {\n    const fromProps = viewState.getViewportProps();\n    const props = { ...this._viewportProps\n    };\n    const {\n      bearing,\n      longitude\n    } = props;\n\n    if (Math.abs(bearing - fromProps.bearing) > 180) {\n      props.bearing = bearing < 0 ? bearing + 360 : bearing - 360;\n    }\n\n    if (Math.abs(longitude - fromProps.longitude) > 180) {\n      props.longitude = longitude < 0 ? longitude + 360 : longitude - 360;\n    }\n\n    return props;\n  }\n\n  _zoomFromCenter(scale) {\n    const {\n      width,\n      height\n    } = this._viewportProps;\n    return this.zoom({\n      pos: [width / 2, height / 2],\n      scale\n    });\n  }\n\n  _panFromCenter(offset) {\n    const {\n      width,\n      height\n    } = this._viewportProps;\n    return this.pan({\n      startPos: [width / 2, height / 2],\n      pos: [width / 2 + offset[0], height / 2 + offset[1]]\n    });\n  }\n\n  _getUpdatedState(newProps) {\n    return new this.constructor({\n      makeViewport: this.makeViewport,\n      ...this._viewportProps,\n      ...this._state,\n      ...newProps\n    });\n  }\n\n  _applyConstraints(props) {\n    const {\n      maxZoom,\n      minZoom,\n      zoom\n    } = props;\n    props.zoom = clamp(zoom, minZoom, maxZoom);\n    const {\n      maxPitch,\n      minPitch,\n      pitch\n    } = props;\n    props.pitch = clamp(pitch, minPitch, maxPitch);\n    const {\n      normalize = true\n    } = props;\n\n    if (normalize) {\n      Object.assign(props, normalizeViewportProps(props));\n    }\n\n    return props;\n  }\n\n  _unproject(pos) {\n    const viewport = this.makeViewport(this._viewportProps);\n    return pos && viewport.unproject(pos);\n  }\n\n  _calculateNewZoom({\n    scale,\n    startZoom\n  }) {\n    const {\n      maxZoom,\n      minZoom\n    } = this._viewportProps;\n    const zoom = startZoom + Math.log2(scale);\n    return clamp(zoom, minZoom, maxZoom);\n  }\n\n  _calculateNewPitchAndBearing({\n    deltaScaleX,\n    deltaScaleY,\n    startBearing,\n    startPitch\n  }) {\n    deltaScaleY = clamp(deltaScaleY, -1, 1);\n    const {\n      minPitch,\n      maxPitch\n    } = this._viewportProps;\n    const bearing = startBearing + 180 * deltaScaleX;\n    let pitch = startPitch;\n\n    if (deltaScaleY > 0) {\n      pitch = startPitch + deltaScaleY * (maxPitch - startPitch);\n    } else if (deltaScaleY < 0) {\n      pitch = startPitch - deltaScaleY * (minPitch - startPitch);\n    }\n\n    return {\n      pitch,\n      bearing\n    };\n  }\n\n  _getRotationParams(pos, startPos) {\n    const deltaX = pos[0] - startPos[0];\n    const deltaY = pos[1] - startPos[1];\n    const centerY = pos[1];\n    const startY = startPos[1];\n    const {\n      width,\n      height\n    } = this._viewportProps;\n    const deltaScaleX = deltaX / width;\n    let deltaScaleY = 0;\n\n    if (deltaY > 0) {\n      if (Math.abs(height - startY) > PITCH_MOUSE_THRESHOLD) {\n        deltaScaleY = deltaY / (startY - height) * PITCH_ACCEL;\n      }\n    } else if (deltaY < 0) {\n      if (startY > PITCH_MOUSE_THRESHOLD) {\n        deltaScaleY = 1 - centerY / startY;\n      }\n    }\n\n    deltaScaleY = Math.min(1, Math.max(-1, deltaScaleY));\n    return {\n      deltaScaleX,\n      deltaScaleY\n    };\n  }\n\n}\nexport default class MapController extends Controller {\n  constructor(props) {\n    props.dragMode = props.dragMode || 'pan';\n    super(MapState, props);\n  }\n\n  setProps(props) {\n    const oldProps = this.controllerStateProps;\n    super.setProps(props);\n    const dimensionChanged = !oldProps || oldProps.height !== props.height;\n\n    if (dimensionChanged) {\n      this.updateViewport(new this.ControllerState({\n        makeViewport: this.makeViewport,\n        ...this.controllerStateProps,\n        ...this._state\n      }));\n    }\n  }\n\n  get linearTransitionProps() {\n    return ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\n  }\n\n}\n//# sourceMappingURL=map-controller.js.map","export default class ViewState {\n  constructor(opts) {\n    this._viewportProps = this._applyConstraints(opts);\n  }\n\n  getViewportProps() {\n    return this._viewportProps;\n  }\n\n  getState() {\n    return this._state;\n  }\n\n  shortestPathFrom(viewState) {\n    return this._viewportProps;\n  }\n\n  _applyConstraints(props) {\n    return props;\n  }\n\n}\n//# sourceMappingURL=view-state.js.map","import View from './view';\nimport WebMercatorViewport from '../viewports/web-mercator-viewport';\nimport MapController from '../controllers/map-controller';\nexport default class MapView extends View {\n  constructor(props) {\n    super({ ...props,\n      type: WebMercatorViewport\n    });\n  }\n\n  get controller() {\n    return this._getControllerProps({\n      type: MapController\n    });\n  }\n\n}\nMapView.displayName = 'MapView';\n//# sourceMappingURL=map-view.js.map","const DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nlet idCount = 0;\nexport class AmbientLight {\n  constructor(props = {}) {\n    const {\n      color = DEFAULT_LIGHT_COLOR\n    } = props;\n    const {\n      intensity = DEFAULT_LIGHT_INTENSITY\n    } = props;\n    this.id = props.id || \"ambient-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'ambient';\n  }\n\n}\n//# sourceMappingURL=ambient-light.js.map","import { Vector3 } from 'math.gl';\nconst DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nconst DEFAULT_LIGHT_DIRECTION = [0.0, 0.0, -1.0];\nlet idCount = 0;\nexport class DirectionalLight {\n  constructor(props = {}) {\n    const {\n      color = DEFAULT_LIGHT_COLOR\n    } = props;\n    const {\n      intensity = DEFAULT_LIGHT_INTENSITY\n    } = props;\n    const {\n      direction = DEFAULT_LIGHT_DIRECTION\n    } = props;\n    const {\n      _shadow = false\n    } = props;\n    this.id = props.id || \"directional-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'directional';\n    this.direction = new Vector3(direction).normalize().toArray();\n    this.shadow = _shadow;\n  }\n\n  getProjectedLight() {\n    return this;\n  }\n\n}\n//# sourceMappingURL=directional-light.js.map","export default class Effect {\n  constructor(props = {}) {\n    const {\n      id = 'effect'\n    } = props;\n    this.id = id;\n    this.props = { ...props\n    };\n  }\n\n  preRender() {}\n\n  getModuleParameters() {}\n\n  cleanup() {}\n\n}\n//# sourceMappingURL=effect.js.map","import Pass from './pass';\nimport { clear, setParameters, withParameters, cssToDeviceRatio } from '@luma.gl/core';\nexport default class LayersPass extends Pass {\n  render(props) {\n    const gl = this.gl;\n    setParameters(gl, {\n      framebuffer: props.target\n    });\n    return this._drawLayers(props);\n  }\n\n  _drawLayers(props) {\n    const {\n      viewports,\n      views,\n      onViewportActive,\n      clearCanvas = true\n    } = props;\n    props.pass = props.pass || 'unknown';\n    const gl = this.gl;\n\n    if (clearCanvas) {\n      clearGLCanvas(gl);\n    }\n\n    const renderStats = [];\n\n    for (const viewportOrDescriptor of viewports) {\n      const viewport = viewportOrDescriptor.viewport || viewportOrDescriptor;\n      const view = views && views[viewport.id];\n      onViewportActive(viewport);\n\n      const drawLayerParams = this._getDrawLayerParams(viewport, props);\n\n      props.view = view;\n      const subViewports = viewport.subViewports || [viewport];\n\n      for (const subViewport of subViewports) {\n        props.viewport = subViewport;\n\n        const stats = this._drawLayersInViewport(gl, props, drawLayerParams);\n\n        renderStats.push(stats);\n      }\n    }\n\n    return renderStats;\n  }\n\n  _getDrawLayerParams(viewport, {\n    layers,\n    pass,\n    layerFilter,\n    effects,\n    moduleParameters\n  }) {\n    const drawLayerParams = [];\n    const indexResolver = layerIndexResolver();\n    const drawContext = {\n      viewport,\n      isPicking: pass.startsWith('picking'),\n      renderPass: pass\n    };\n\n    for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n      const layer = layers[layerIndex];\n\n      const shouldDrawLayer = this._shouldDrawLayer(layer, drawContext, layerFilter);\n\n      const layerRenderIndex = indexResolver(layer, shouldDrawLayer);\n      const layerParam = {\n        shouldDrawLayer,\n        layerRenderIndex\n      };\n\n      if (shouldDrawLayer) {\n        layerParam.moduleParameters = this._getModuleParameters(layer, effects, pass, moduleParameters);\n        layerParam.layerParameters = this.getLayerParameters(layer, layerIndex);\n      }\n\n      drawLayerParams[layerIndex] = layerParam;\n    }\n\n    return drawLayerParams;\n  }\n\n  _drawLayersInViewport(gl, {\n    layers,\n    pass,\n    viewport,\n    view\n  }, drawLayerParams) {\n    const glViewport = getGLViewport(gl, {\n      viewport\n    });\n\n    if (view && view.props.clear) {\n      const clearOpts = view.props.clear === true ? {\n        color: true,\n        depth: true\n      } : view.props.clear;\n      withParameters(gl, {\n        scissorTest: true,\n        scissor: glViewport\n      }, () => clear(gl, clearOpts));\n    }\n\n    const renderStatus = {\n      totalCount: layers.length,\n      visibleCount: 0,\n      compositeCount: 0,\n      pickableCount: 0\n    };\n    setParameters(gl, {\n      viewport: glViewport\n    });\n\n    for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n      const layer = layers[layerIndex];\n      const {\n        shouldDrawLayer,\n        layerRenderIndex,\n        moduleParameters,\n        layerParameters\n      } = drawLayerParams[layerIndex];\n\n      if (shouldDrawLayer && layer.props.pickable) {\n        renderStatus.pickableCount++;\n      }\n\n      if (layer.isComposite) {\n        renderStatus.compositeCount++;\n      } else if (shouldDrawLayer) {\n        renderStatus.visibleCount++;\n        moduleParameters.viewport = viewport;\n\n        try {\n          layer.drawLayer({\n            moduleParameters,\n            uniforms: {\n              layerIndex: layerRenderIndex\n            },\n            parameters: layerParameters\n          });\n        } catch (err) {\n          layer.raiseError(err, \"drawing \".concat(layer, \" to \").concat(pass));\n        }\n      }\n    }\n\n    return renderStatus;\n  }\n\n  shouldDrawLayer(layer) {\n    return true;\n  }\n\n  getModuleParameters(layer, effects) {\n    return null;\n  }\n\n  getLayerParameters(layer, layerIndex) {\n    return layer.props.parameters;\n  }\n\n  _shouldDrawLayer(layer, drawContext, layerFilter) {\n    const shouldDrawLayer = this.shouldDrawLayer(layer) && layer.props.visible;\n\n    if (!shouldDrawLayer) {\n      return false;\n    }\n\n    drawContext.layer = layer;\n\n    if (layerFilter && !layerFilter(drawContext)) {\n      return false;\n    }\n\n    let parent = layer.parent;\n\n    while (parent) {\n      if (!parent.filterSubLayer(drawContext)) {\n        return false;\n      }\n\n      drawContext.layer = parent;\n      parent = parent.parent;\n    }\n\n    layer.activateViewport(drawContext.viewport);\n    return true;\n  }\n\n  _getModuleParameters(layer, effects, pass, overrides) {\n    const moduleParameters = Object.assign(Object.create(layer.props), {\n      autoWrapLongitude: layer.wrapLongitude,\n      viewport: layer.context.viewport,\n      mousePosition: layer.context.mousePosition,\n      pickingActive: 0,\n      devicePixelRatio: cssToDeviceRatio(this.gl)\n    });\n\n    if (effects) {\n      for (const effect of effects) {\n        Object.assign(moduleParameters, effect.getModuleParameters(layer));\n      }\n    }\n\n    return Object.assign(moduleParameters, this.getModuleParameters(layer, effects), overrides);\n  }\n\n}\nexport function layerIndexResolver(startIndex = 0, layerIndices = {}) {\n  const resolvers = {};\n\n  const resolveLayerIndex = (layer, isDrawn) => {\n    const indexOverride = layer.props._offset;\n    const layerId = layer.id;\n    const parentId = layer.parent && layer.parent.id;\n    let index;\n\n    if (parentId && !(parentId in layerIndices)) {\n      resolveLayerIndex(layer.parent, false);\n    }\n\n    if (parentId in resolvers) {\n      const resolver = resolvers[parentId] = resolvers[parentId] || layerIndexResolver(layerIndices[parentId], layerIndices);\n      index = resolver(layer, isDrawn);\n      resolvers[layerId] = resolver;\n    } else if (Number.isFinite(indexOverride)) {\n      index = indexOverride + (layerIndices[parentId] || 0);\n      resolvers[layerId] = null;\n    } else {\n      index = startIndex;\n    }\n\n    if (isDrawn && index >= startIndex) {\n      startIndex = index + 1;\n    }\n\n    layerIndices[layerId] = index;\n    return index;\n  };\n\n  return resolveLayerIndex;\n}\n\nfunction getGLViewport(gl, {\n  viewport\n}) {\n  const height = gl.canvas ? gl.canvas.clientHeight || gl.canvas.height : 100;\n  const dimensions = viewport;\n  const pixelRatio = cssToDeviceRatio(gl);\n  return [dimensions.x * pixelRatio, (height - dimensions.y - dimensions.height) * pixelRatio, dimensions.width * pixelRatio, dimensions.height * pixelRatio];\n}\n\nfunction clearGLCanvas(gl) {\n  const width = gl.drawingBufferWidth;\n  const height = gl.drawingBufferHeight;\n  setParameters(gl, {\n    viewport: [0, 0, width, height]\n  });\n  gl.clear(16384 | 256);\n}\n//# sourceMappingURL=layers-pass.js.map","export default class Pass {\n  constructor(gl, props = {}) {\n    const {\n      id = 'pass'\n    } = props;\n    this.id = id;\n    this.gl = gl;\n    this.props = { ...props\n    };\n  }\n\n  setProps(props) {\n    Object.assign(this.props, props);\n  }\n\n  render() {}\n\n  cleanup() {}\n\n}\n//# sourceMappingURL=pass.js.map","import { default as LayersPass } from './layers-pass';\nimport { Framebuffer, Texture2D, Renderbuffer, withParameters, cssToDeviceRatio } from '@luma.gl/core';\nexport default class ShadowPass extends LayersPass {\n  constructor(gl, props) {\n    super(gl, props);\n    this.shadowMap = new Texture2D(gl, {\n      width: 1,\n      height: 1,\n      parameters: {\n        [10241]: 9729,\n        [10240]: 9729,\n        [10242]: 33071,\n        [10243]: 33071\n      }\n    });\n    this.depthBuffer = new Renderbuffer(gl, {\n      format: 33189,\n      width: 1,\n      height: 1\n    });\n    this.fbo = new Framebuffer(gl, {\n      id: 'shadowmap',\n      width: 1,\n      height: 1,\n      attachments: {\n        [36064]: this.shadowMap,\n        [36096]: this.depthBuffer\n      }\n    });\n  }\n\n  render(params) {\n    const target = this.fbo;\n    withParameters(this.gl, {\n      depthRange: [0, 1],\n      depthTest: true,\n      blend: false,\n      clearColor: [1, 1, 1, 1]\n    }, () => {\n      const viewport = params.viewports[0];\n      const pixelRatio = cssToDeviceRatio(this.gl);\n      const width = viewport.width * pixelRatio;\n      const height = viewport.height * pixelRatio;\n\n      if (width !== target.width || height !== target.height) {\n        target.resize({\n          width,\n          height\n        });\n      }\n\n      super.render({ ...params,\n        target,\n        pass: 'shadow'\n      });\n    });\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.shadowEnabled !== false;\n  }\n\n  getModuleParameters() {\n    return {\n      drawToShadowMap: true\n    };\n  }\n\n  delete() {\n    if (this.fbo) {\n      this.fbo.delete();\n      this.fbo = null;\n    }\n\n    if (this.shadowMap) {\n      this.shadowMap.delete();\n      this.shadowMap = null;\n    }\n\n    if (this.depthBuffer) {\n      this.depthBuffer.delete();\n      this.depthBuffer = null;\n    }\n  }\n\n}\n//# sourceMappingURL=shadow-pass.js.map","import { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport project from '../project/project';\nimport { Vector3, Matrix4 } from 'math.gl';\nimport memoize from '../../utils/memoize';\nimport { pixelsToWorld } from '@math.gl/web-mercator';\nconst vs = \"\\nconst int max_lights = 2;\\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\\nuniform vec4 shadow_uProjectCenters[max_lights];\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform int shadow_uLightId;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\\n  if (shadow_uDrawShadowMap) {\\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\\n  }\\n  if (shadow_uUseShadowMap) {\\n    for (int i = 0; i < max_lights; i++) {\\n      if(i < int(shadow_uLightCount)) {\\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\\n      }\\n    }\\n  }\\n  return gl_Position;\\n}\\n\";\nconst fs = \"\\nconst int max_lights = 2;\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform sampler2D shadow_uShadowMap0;\\nuniform sampler2D shadow_uShadowMap1;\\nuniform vec4 shadow_uColor;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\\n\\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\\n\\n  float z = dot(rgbaDepth, bitUnpackShift);\\n  return smoothstep(0.001, 0.01, position.z - z);\\n}\\n\\nvec4 shadow_filterShadowColor(vec4 color) {\\n  if (shadow_uDrawShadowMap) {\\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\\n    return rgbaDepth;\\n  }\\n  if (shadow_uUseShadowMap) {\\n    float shadowAlpha = 0.0;\\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\\n    if(shadow_uLightCount > 1.0) {\\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\\n    }\\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\\n\\n    return vec4(\\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\\n      blendedAlpha\\n    );\\n  }\\n  return color;\\n}\\n\";\nconst getMemoizedViewportCenterPosition = memoize(getViewportCenterPosition);\nconst getMemoizedViewProjectionMatrices = memoize(getViewProjectionMatrices);\nconst DEFAULT_SHADOW_COLOR = [0, 0, 0, 1.0];\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\n\nfunction screenToCommonSpace(xyz, pixelUnprojectionMatrix) {\n  const [x, y, z] = xyz;\n  const coord = pixelsToWorld([x, y, z], pixelUnprojectionMatrix);\n\n  if (Number.isFinite(z)) {\n    return coord;\n  }\n\n  return [coord[0], coord[1], 0];\n}\n\nfunction getViewportCenterPosition({\n  viewport,\n  center\n}) {\n  return new Matrix4(viewport.viewProjectionMatrix).invert().transform(center);\n}\n\nfunction getViewProjectionMatrices({\n  viewport,\n  shadowMatrices\n}) {\n  const projectionMatrices = [];\n  const pixelUnprojectionMatrix = viewport.pixelUnprojectionMatrix;\n  const farZ = viewport.isGeospatial ? undefined : 1;\n  const corners = [[0, 0, farZ], [viewport.width, 0, farZ], [0, viewport.height, farZ], [viewport.width, viewport.height, farZ], [0, 0, -1], [viewport.width, 0, -1], [0, viewport.height, -1], [viewport.width, viewport.height, -1]].map(pixel => screenToCommonSpace(pixel, pixelUnprojectionMatrix));\n\n  for (const shadowMatrix of shadowMatrices) {\n    const viewMatrix = shadowMatrix.clone().translate(new Vector3(viewport.center).negate());\n    const positions = corners.map(corner => viewMatrix.transform(corner));\n    const projectionMatrix = new Matrix4().ortho({\n      left: Math.min(...positions.map(position => position[0])),\n      right: Math.max(...positions.map(position => position[0])),\n      bottom: Math.min(...positions.map(position => position[1])),\n      top: Math.max(...positions.map(position => position[1])),\n      near: Math.min(...positions.map(position => -position[2])),\n      far: Math.max(...positions.map(position => -position[2]))\n    });\n    projectionMatrices.push(projectionMatrix.multiplyRight(shadowMatrix));\n  }\n\n  return projectionMatrices;\n}\n\nfunction createShadowUniforms(opts = {}, context = {}) {\n  const uniforms = {\n    shadow_uDrawShadowMap: Boolean(opts.drawToShadowMap),\n    shadow_uUseShadowMap: opts.shadowMaps ? opts.shadowMaps.length > 0 : false,\n    shadow_uColor: opts.shadowColor || DEFAULT_SHADOW_COLOR,\n    shadow_uLightId: opts.shadowLightId || 0,\n    shadow_uLightCount: opts.shadowMatrices.length\n  };\n  const center = getMemoizedViewportCenterPosition({\n    viewport: opts.viewport,\n    center: context.project_uCenter\n  });\n  const projectCenters = [];\n  const viewProjectionMatrices = getMemoizedViewProjectionMatrices({\n    shadowMatrices: opts.shadowMatrices,\n    viewport: opts.viewport\n  }).slice();\n\n  for (let i = 0; i < opts.shadowMatrices.length; i++) {\n    const viewProjectionMatrix = viewProjectionMatrices[i];\n    const viewProjectionMatrixCentered = viewProjectionMatrix.clone().translate(new Vector3(opts.viewport.center).negate());\n\n    if (context.project_uCoordinateSystem === COORDINATE_SYSTEM.LNGLAT && context.project_uProjectionMode === PROJECTION_MODE.WEB_MERCATOR) {\n      viewProjectionMatrices[i] = viewProjectionMatrixCentered;\n      projectCenters[i] = center;\n    } else {\n      viewProjectionMatrices[i] = viewProjectionMatrix.clone().multiplyRight(VECTOR_TO_POINT_MATRIX);\n      projectCenters[i] = viewProjectionMatrixCentered.transform(center);\n    }\n  }\n\n  for (let i = 0; i < viewProjectionMatrices.length; i++) {\n    uniforms[\"shadow_uViewProjectionMatrices[\".concat(i, \"]\")] = viewProjectionMatrices[i];\n    uniforms[\"shadow_uProjectCenters[\".concat(i, \"]\")] = projectCenters[i];\n\n    if (opts.shadowMaps && opts.shadowMaps.length > 0) {\n      uniforms[\"shadow_uShadowMap\".concat(i)] = opts.shadowMaps[i];\n    } else {\n      uniforms[\"shadow_uShadowMap\".concat(i)] = opts.dummyShadowMap;\n    }\n  }\n\n  return uniforms;\n}\n\nexport default {\n  name: 'shadow',\n  dependencies: [project],\n  vs,\n  fs,\n  inject: {\n    'vs:DECKGL_FILTER_GL_POSITION': \"\\n    position = shadow_setVertexPosition(geometry.position);\\n    \",\n    'fs:DECKGL_FILTER_COLOR': \"\\n    color = shadow_filterShadowColor(color);\\n    \"\n  },\n  getUniforms: (opts = {}, context = {}) => {\n    if (opts.drawToShadowMap || opts.shadowMaps && opts.shadowMaps.length > 0) {\n      const {\n        shadowEnabled = true\n      } = opts;\n      return shadowEnabled && opts.shadowMatrices && opts.shadowMatrices.length > 0 ? createShadowUniforms(opts, context) : {\n        shadow_uDrawShadowMap: false,\n        shadow_uUseShadowMap: false\n      };\n    }\n\n    return {};\n  }\n};\n//# sourceMappingURL=shadow.js.map","import { Texture2D, ProgramManager } from '@luma.gl/core';\nimport { AmbientLight } from './ambient-light';\nimport { DirectionalLight } from './directional-light';\nimport Effect from '../../lib/effect';\nimport { Matrix4, Vector3 } from 'math.gl';\nimport ShadowPass from '../../passes/shadow-pass';\nimport { default as shadow } from '../../shaderlib/shadow/shadow';\nconst DEFAULT_AMBIENT_LIGHT_PROPS = {\n  color: [255, 255, 255],\n  intensity: 1.0\n};\nconst DEFAULT_DIRECTIONAL_LIGHT_PROPS = [{\n  color: [255, 255, 255],\n  intensity: 1.0,\n  direction: [-1, 3, -1]\n}, {\n  color: [255, 255, 255],\n  intensity: 0.9,\n  direction: [1, -8, -2.5]\n}];\nconst DEFAULT_SHADOW_COLOR = [0, 0, 0, 200 / 255];\nexport default class LightingEffect extends Effect {\n  constructor(props) {\n    super(props);\n    this.ambientLight = null;\n    this.directionalLights = [];\n    this.pointLights = [];\n    this.shadowColor = DEFAULT_SHADOW_COLOR;\n    this.shadowPasses = [];\n    this.shadowMaps = [];\n    this.dummyShadowMap = null;\n    this.shadow = false;\n    this.programManager = null;\n\n    for (const key in props) {\n      const lightSource = props[key];\n\n      switch (lightSource.type) {\n        case 'ambient':\n          this.ambientLight = lightSource;\n          break;\n\n        case 'directional':\n          this.directionalLights.push(lightSource);\n          break;\n\n        case 'point':\n          this.pointLights.push(lightSource);\n          break;\n\n        default:\n      }\n    }\n\n    this._applyDefaultLights();\n\n    this.shadow = this.directionalLights.some(light => light.shadow);\n  }\n\n  preRender(gl, {\n    layers,\n    layerFilter,\n    viewports,\n    onViewportActive,\n    views\n  }) {\n    if (!this.shadow) return;\n    this.shadowMatrices = this._createLightMatrix();\n\n    if (this.shadowPasses.length === 0) {\n      this._createShadowPasses(gl);\n    }\n\n    if (!this.programManager) {\n      this.programManager = ProgramManager.getDefaultProgramManager(gl);\n\n      if (shadow) {\n        this.programManager.addDefaultModule(shadow);\n      }\n    }\n\n    if (!this.dummyShadowMap) {\n      this.dummyShadowMap = new Texture2D(gl, {\n        width: 1,\n        height: 1\n      });\n    }\n\n    for (let i = 0; i < this.shadowPasses.length; i++) {\n      const shadowPass = this.shadowPasses[i];\n      shadowPass.render({\n        layers,\n        layerFilter,\n        viewports,\n        onViewportActive,\n        views,\n        moduleParameters: {\n          shadowLightId: i,\n          dummyShadowMap: this.dummyShadowMap,\n          shadowMatrices: this.shadowMatrices\n        }\n      });\n    }\n  }\n\n  getModuleParameters(layer) {\n    const parameters = this.shadow ? {\n      shadowMaps: this.shadowMaps,\n      dummyShadowMap: this.dummyShadowMap,\n      shadowColor: this.shadowColor,\n      shadowMatrices: this.shadowMatrices\n    } : {};\n    parameters.lightSources = {\n      ambientLight: this.ambientLight,\n      directionalLights: this.directionalLights.map(directionalLight => directionalLight.getProjectedLight({\n        layer\n      })),\n      pointLights: this.pointLights.map(pointLight => pointLight.getProjectedLight({\n        layer\n      }))\n    };\n    return parameters;\n  }\n\n  cleanup() {\n    for (const shadowPass of this.shadowPasses) {\n      shadowPass.delete();\n    }\n\n    this.shadowPasses.length = 0;\n    this.shadowMaps.length = 0;\n\n    if (this.dummyShadowMap) {\n      this.dummyShadowMap.delete();\n      this.dummyShadowMap = null;\n    }\n\n    if (this.shadow && this.programManager) {\n      this.programManager.removeDefaultModule(shadow);\n      this.programManager = null;\n    }\n  }\n\n  _createLightMatrix() {\n    const lightMatrices = [];\n\n    for (const light of this.directionalLights) {\n      const viewMatrix = new Matrix4().lookAt({\n        eye: new Vector3(light.direction).negate()\n      });\n      lightMatrices.push(viewMatrix);\n    }\n\n    return lightMatrices;\n  }\n\n  _createShadowPasses(gl) {\n    for (let i = 0; i < this.directionalLights.length; i++) {\n      const shadowPass = new ShadowPass(gl);\n      this.shadowPasses[i] = shadowPass;\n      this.shadowMaps[i] = shadowPass.shadowMap;\n    }\n  }\n\n  _applyDefaultLights() {\n    const {\n      ambientLight,\n      pointLights,\n      directionalLights\n    } = this;\n\n    if (!ambientLight && pointLights.length === 0 && directionalLights.length === 0) {\n      this.ambientLight = new AmbientLight(DEFAULT_AMBIENT_LIGHT_PROPS);\n      this.directionalLights.push(new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0]), new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1]));\n    }\n  }\n\n}\n//# sourceMappingURL=lighting-effect.js.map","import { deepEqual } from '../utils/deep-equal';\nimport { default as LightingEffect } from '../effects/lighting/lighting-effect';\nconst DEFAULT_LIGHTING_EFFECT = new LightingEffect();\nexport default class EffectManager {\n  constructor() {\n    this.effects = [];\n    this._internalEffects = [];\n    this._needsRedraw = 'Initial render';\n    this.setEffects();\n  }\n\n  setProps(props) {\n    if ('effects' in props) {\n      if (props.effects.length !== this.effects.length || !deepEqual(props.effects, this.effects)) {\n        this.setEffects(props.effects);\n        this._needsRedraw = 'effects changed';\n      }\n    }\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  getEffects() {\n    return this._internalEffects;\n  }\n\n  finalize() {\n    this.cleanup();\n  }\n\n  setEffects(effects = []) {\n    this.cleanup();\n    this.effects = effects;\n\n    this._createInternalEffects();\n  }\n\n  cleanup() {\n    for (const effect of this.effects) {\n      effect.cleanup();\n    }\n\n    for (const effect of this._internalEffects) {\n      effect.cleanup();\n    }\n\n    this.effects.length = 0;\n    this._internalEffects.length = 0;\n  }\n\n  _createInternalEffects() {\n    this._internalEffects = this.effects.slice();\n\n    if (!this.effects.some(effect => effect instanceof LightingEffect)) {\n      this._internalEffects.push(DEFAULT_LIGHTING_EFFECT);\n    }\n  }\n\n}\n//# sourceMappingURL=effect-manager.js.map","import LayersPass from './layers-pass';\nexport default class DrawLayersPass extends LayersPass {}\n//# sourceMappingURL=draw-layers-pass.js.map","import LayersPass from './layers-pass';\nimport { withParameters } from '@luma.gl/core';\nconst PICKING_PARAMETERS = {\n  blendFunc: [1, 0, 32771, 0],\n  blendEquation: 32774\n};\nexport default class PickLayersPass extends LayersPass {\n  render(props) {\n    if (props.pickingFBO) {\n      this.useAlpha = true;\n\n      this._drawPickingBuffer(props);\n    } else {\n      this.useAlpha = false;\n      super.render(props);\n    }\n  }\n\n  _drawPickingBuffer({\n    layers,\n    layerFilter,\n    views,\n    viewports,\n    onViewportActive,\n    pickingFBO,\n    deviceRect: {\n      x,\n      y,\n      width,\n      height\n    },\n    pass = 'picking',\n    redrawReason,\n    pickZ\n  }) {\n    const gl = this.gl;\n    this.pickZ = pickZ;\n    return withParameters(gl, {\n      scissorTest: true,\n      scissor: [x, y, width, height],\n      clearColor: [0, 0, 0, 0],\n      depthMask: true,\n      depthTest: true,\n      depthRange: [0, 1],\n      colorMask: [true, true, true, true],\n      ...PICKING_PARAMETERS,\n      blend: !pickZ\n    }, () => {\n      super.render({\n        target: pickingFBO,\n        layers,\n        layerFilter,\n        views,\n        viewports,\n        onViewportActive,\n        pass,\n        redrawReason\n      });\n    });\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.pickable;\n  }\n\n  getModuleParameters() {\n    return {\n      pickingActive: 1,\n      pickingAttribute: this.pickZ,\n      lightSources: {}\n    };\n  }\n\n  getLayerParameters(layer, layerIndex) {\n    const pickParameters = this.pickZ ? {\n      blend: false\n    } : { ...PICKING_PARAMETERS,\n      blend: true,\n      blendColor: [0, 0, 0, this.useAlpha ? (layerIndex + 1) / 255 : 1]\n    };\n    return { ...layer.props.parameters,\n      ...pickParameters\n    };\n  }\n\n}\n//# sourceMappingURL=pick-layers-pass.js.map","import debug from '../debug';\nimport DrawLayersPass from '../passes/draw-layers-pass';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { Framebuffer } from '@luma.gl/core';\nconst TRACE_RENDER_LAYERS = 'deckRenderer.renderLayers';\nexport default class DeckRenderer {\n  constructor(gl) {\n    this.gl = gl;\n    this.layerFilter = null;\n    this.drawPickingColors = false;\n    this.drawLayersPass = new DrawLayersPass(gl);\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.renderCount = 0;\n    this._needsRedraw = 'Initial render';\n    this.renderBuffers = [];\n    this.lastPostProcessEffect = null;\n  }\n\n  setProps(props) {\n    if ('layerFilter' in props && this.layerFilter !== props.layerFilter) {\n      this.layerFilter = props.layerFilter;\n      this._needsRedraw = 'layerFilter changed';\n    }\n\n    if ('drawPickingColors' in props && this.drawPickingColors !== props.drawPickingColors) {\n      this.drawPickingColors = props.drawPickingColors;\n      this._needsRedraw = 'drawPickingColors changed';\n    }\n  }\n\n  renderLayers(opts) {\n    const layerPass = this.drawPickingColors ? this.pickLayersPass : this.drawLayersPass;\n    opts.layerFilter = this.layerFilter;\n    opts.effects = opts.effects || [];\n    opts.target = opts.target || Framebuffer.getDefaultFramebuffer(this.gl);\n\n    this._preRender(opts.effects, opts);\n\n    const outputBuffer = this.lastPostProcessEffect ? this.renderBuffers[0] : opts.target;\n    const renderStats = layerPass.render({ ...opts,\n      target: outputBuffer\n    });\n\n    this._postRender(opts.effects, opts);\n\n    this.renderCount++;\n    debug(TRACE_RENDER_LAYERS, this, renderStats, opts);\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  finalize() {\n    const {\n      renderBuffers\n    } = this;\n\n    for (const buffer of renderBuffers) {\n      buffer.delete();\n    }\n\n    renderBuffers.length = 0;\n  }\n\n  _preRender(effects, opts) {\n    let lastPostProcessEffect = null;\n\n    for (const effect of effects) {\n      effect.preRender(this.gl, opts);\n\n      if (effect.postRender) {\n        lastPostProcessEffect = effect;\n      }\n    }\n\n    if (lastPostProcessEffect) {\n      this._resizeRenderBuffers();\n    }\n\n    this.lastPostProcessEffect = lastPostProcessEffect;\n  }\n\n  _resizeRenderBuffers() {\n    const {\n      renderBuffers\n    } = this;\n\n    if (renderBuffers.length === 0) {\n      renderBuffers.push(new Framebuffer(this.gl), new Framebuffer(this.gl));\n    }\n\n    for (const buffer of renderBuffers) {\n      buffer.resize();\n    }\n  }\n\n  _postRender(effects, opts) {\n    const {\n      renderBuffers\n    } = this;\n    const params = {\n      inputBuffer: renderBuffers[0],\n      swapBuffer: renderBuffers[1],\n      target: null\n    };\n\n    for (const effect of effects) {\n      if (effect.postRender) {\n        if (effect === this.lastPostProcessEffect) {\n          params.target = opts.target;\n          effect.postRender(this.gl, params);\n          break;\n        }\n\n        const buffer = effect.postRender(this.gl, params);\n        params.inputBuffer = buffer;\n        params.swapBuffer = buffer === renderBuffers[0] ? renderBuffers[1] : renderBuffers[0];\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=deck-renderer.js.map","import log from '../../utils/log';\nconst NO_PICKED_OBJECT = {\n  pickedColor: null,\n  pickedLayer: null,\n  pickedObjectIndex: -1\n};\nexport function getClosestObject({\n  pickedColors,\n  layers,\n  deviceX,\n  deviceY,\n  deviceRadius,\n  deviceRect\n}) {\n  if (pickedColors) {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = deviceRect;\n    let minSquareDistanceToCenter = deviceRadius * deviceRadius;\n    let closestPixelIndex = -1;\n    let i = 0;\n\n    for (let row = 0; row < height; row++) {\n      const dy = row + y - deviceY;\n      const dy2 = dy * dy;\n\n      if (dy2 > minSquareDistanceToCenter) {\n        i += 4 * width;\n      } else {\n        for (let col = 0; col < width; col++) {\n          const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n          if (pickedLayerIndex >= 0) {\n            const dx = col + x - deviceX;\n            const d2 = dx * dx + dy2;\n\n            if (d2 <= minSquareDistanceToCenter) {\n              minSquareDistanceToCenter = d2;\n              closestPixelIndex = i;\n            }\n          }\n\n          i += 4;\n        }\n      }\n    }\n\n    if (closestPixelIndex >= 0) {\n      const pickedLayerIndex = pickedColors[closestPixelIndex + 3] - 1;\n      const pickedColor = pickedColors.slice(closestPixelIndex, closestPixelIndex + 4);\n      const pickedLayer = layers[pickedLayerIndex];\n\n      if (pickedLayer) {\n        const pickedObjectIndex = pickedLayer.decodePickingColor(pickedColor);\n        const dy = Math.floor(closestPixelIndex / 4 / width);\n        const dx = closestPixelIndex / 4 - dy * width;\n        return {\n          pickedColor,\n          pickedLayer,\n          pickedObjectIndex,\n          pickedX: x + dx,\n          pickedY: y + dy\n        };\n      }\n\n      log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n    }\n  }\n\n  return NO_PICKED_OBJECT;\n}\nexport function getUniqueObjects({\n  pickedColors,\n  layers\n}) {\n  const uniqueColors = new Map();\n\n  if (pickedColors) {\n    for (let i = 0; i < pickedColors.length; i += 4) {\n      const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n      if (pickedLayerIndex >= 0) {\n        const pickedColor = pickedColors.slice(i, i + 4);\n        const colorKey = pickedColor.join(',');\n\n        if (!uniqueColors.has(colorKey)) {\n          const pickedLayer = layers[pickedLayerIndex];\n\n          if (pickedLayer) {\n            uniqueColors.set(colorKey, {\n              pickedColor,\n              pickedLayer,\n              pickedObjectIndex: pickedLayer.decodePickingColor(pickedColor)\n            });\n          } else {\n            log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n          }\n        }\n      }\n    }\n  }\n\n  return Array.from(uniqueColors.values());\n}\n//# sourceMappingURL=query-object.js.map","export function getEmptyPickingInfo({\n  pickInfo,\n  mode,\n  viewports,\n  layerFilter,\n  pixelRatio,\n  x,\n  y,\n  z\n}) {\n  const layer = pickInfo && pickInfo.pickedLayer;\n\n  const viewportFilter = layerFilter && layer && (v => layerFilter({\n    layer,\n    viewport: v,\n    isPicking: true,\n    renderPass: \"picking:\".concat(mode)\n  }));\n\n  const viewport = getViewportFromCoordinates(viewports, {\n    x,\n    y\n  }, viewportFilter);\n  const coordinate = viewport && viewport.unproject([x - viewport.x, y - viewport.y], {\n    targetZ: z\n  });\n  return {\n    color: null,\n    layer: null,\n    viewport,\n    index: -1,\n    picked: false,\n    x,\n    y,\n    pixel: [x, y],\n    coordinate,\n    devicePixel: pickInfo && [pickInfo.pickedX, pickInfo.pickedY],\n    pixelRatio\n  };\n}\nexport function processPickInfo(opts) {\n  const {\n    pickInfo,\n    lastPickedInfo,\n    mode,\n    layers\n  } = opts;\n  const {\n    pickedColor,\n    pickedLayer,\n    pickedObjectIndex\n  } = pickInfo;\n  const affectedLayers = pickedLayer ? [pickedLayer] : [];\n\n  if (mode === 'hover') {\n    const lastPickedObjectIndex = lastPickedInfo.index;\n    const lastPickedLayerId = lastPickedInfo.layerId;\n    const pickedLayerId = pickedLayer && pickedLayer.props.id;\n\n    if (pickedLayerId !== lastPickedLayerId || pickedObjectIndex !== lastPickedObjectIndex) {\n      if (pickedLayerId !== lastPickedLayerId) {\n        const lastPickedLayer = layers.find(layer => layer.props.id === lastPickedLayerId);\n\n        if (lastPickedLayer) {\n          affectedLayers.unshift(lastPickedLayer);\n        }\n      }\n\n      lastPickedInfo.layerId = pickedLayerId;\n      lastPickedInfo.index = pickedObjectIndex;\n      lastPickedInfo.info = null;\n    }\n  }\n\n  const baseInfo = getEmptyPickingInfo(opts);\n  const infos = new Map();\n  infos.set(null, baseInfo);\n  affectedLayers.forEach(layer => {\n    let info = { ...baseInfo\n    };\n\n    if (layer === pickedLayer) {\n      info.color = pickedColor;\n      info.index = pickedObjectIndex;\n      info.picked = true;\n    }\n\n    info = getLayerPickingInfo({\n      layer,\n      info,\n      mode\n    });\n\n    if (layer === pickedLayer && mode === 'hover') {\n      lastPickedInfo.info = info;\n    }\n\n    infos.set(info.layer.id, info);\n\n    if (mode === 'hover') {\n      info.layer.updateAutoHighlight(info);\n    }\n  });\n  return infos;\n}\nexport function getLayerPickingInfo({\n  layer,\n  info,\n  mode\n}) {\n  while (layer && info) {\n    const sourceLayer = info.layer || null;\n    info.sourceLayer = sourceLayer;\n    info.layer = layer;\n    info = layer.getPickingInfo({\n      info,\n      mode,\n      sourceLayer\n    });\n    layer = layer.parent;\n  }\n\n  return info;\n}\n\nfunction getViewportFromCoordinates(viewports, pixel, filter) {\n  for (let i = viewports.length - 1; i >= 0; i--) {\n    const viewport = viewports[i];\n\n    if (viewport.containsPixel(pixel) && (!filter || filter(viewport))) {\n      return viewport;\n    }\n  }\n\n  return viewports[0];\n}\n//# sourceMappingURL=pick-info.js.map","import { Framebuffer, Texture2D, isWebGL2, readPixelsToArray, cssToDeviceRatio, cssToDevicePixels } from '@luma.gl/core';\nimport log from '../utils/log';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { getClosestObject, getUniqueObjects } from './picking/query-object';\nimport { processPickInfo, getLayerPickingInfo, getEmptyPickingInfo } from './picking/pick-info';\nexport default class DeckPicker {\n  constructor(gl) {\n    this.gl = gl;\n    this.pickingFBO = null;\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.layerFilter = null;\n    this.lastPickedInfo = {\n      index: -1,\n      layerId: null,\n      info: null\n    };\n  }\n\n  setProps(props) {\n    if ('layerFilter' in props) {\n      this.layerFilter = props.layerFilter;\n    }\n\n    if ('_pickable' in props) {\n      this._pickable = props._pickable;\n    }\n  }\n\n  finalize() {\n    if (this.pickingFBO) {\n      this.pickingFBO.delete();\n    }\n\n    if (this.depthFBO) {\n      this.depthFBO.color.delete();\n      this.depthFBO.delete();\n    }\n  }\n\n  pickObject(opts) {\n    return this._pickClosestObject(opts);\n  }\n\n  pickObjects(opts) {\n    return this._pickVisibleObjects(opts);\n  }\n\n  getLastPickedObject({\n    x,\n    y,\n    layers,\n    viewports\n  }, lastPickedInfo = this.lastPickedInfo.info) {\n    const lastPickedLayerId = lastPickedInfo && lastPickedInfo.layer && lastPickedInfo.layer.id;\n    const lastPickedViewportId = lastPickedInfo && lastPickedInfo.viewport && lastPickedInfo.viewport.id;\n    const layer = lastPickedLayerId ? layers.find(l => l.id === lastPickedLayerId) : null;\n    const viewport = lastPickedViewportId && viewports.find(v => v.id === lastPickedViewportId) || viewports[0];\n    const coordinate = viewport && viewport.unproject([x - viewport.x, y - viewport.y]);\n    const info = {\n      x,\n      y,\n      viewport,\n      coordinate,\n      layer\n    };\n\n    if (layer) {\n      return { ...lastPickedInfo,\n        ...info\n      };\n    }\n\n    return Object.assign(info, {\n      color: null,\n      object: null,\n      index: -1\n    });\n  }\n\n  _resizeBuffer() {\n    const {\n      gl\n    } = this;\n\n    if (!this.pickingFBO) {\n      this.pickingFBO = new Framebuffer(gl);\n\n      if (Framebuffer.isSupported(gl, {\n        colorBufferFloat: true\n      })) {\n        this.depthFBO = new Framebuffer(gl);\n        this.depthFBO.attach({\n          [36064]: new Texture2D(gl, {\n            format: isWebGL2(gl) ? 34836 : 6408,\n            type: 5126\n          })\n        });\n      }\n    }\n\n    this.pickingFBO.resize({\n      width: gl.canvas.width,\n      height: gl.canvas.height\n    });\n\n    if (this.depthFBO) {\n      this.depthFBO.resize({\n        width: gl.canvas.width,\n        height: gl.canvas.height\n      });\n    }\n\n    return this.pickingFBO;\n  }\n\n  _getPickable(layers) {\n    if (this._pickable === false) {\n      return null;\n    }\n\n    const pickableLayers = layers.filter(layer => layer.isPickable() && !layer.isComposite);\n\n    if (pickableLayers.length > 255) {\n      log.warn('Too many pickable layers, only picking the first 255')();\n      return pickableLayers.slice(0, 255);\n    }\n\n    return pickableLayers.length ? pickableLayers : null;\n  }\n\n  _pickClosestObject({\n    layers,\n    views,\n    viewports,\n    x,\n    y,\n    radius = 0,\n    depth = 1,\n    mode = 'query',\n    unproject3D,\n    onViewportActive\n  }) {\n    layers = this._getPickable(layers);\n\n    if (!layers) {\n      return {\n        result: [],\n        emptyInfo: getEmptyPickingInfo({\n          viewports,\n          x,\n          y\n        })\n      };\n    }\n\n    this._resizeBuffer();\n\n    const pixelRatio = cssToDeviceRatio(this.gl);\n    const devicePixelRange = cssToDevicePixels(this.gl, [x, y], true);\n    const devicePixel = [devicePixelRange.x + Math.floor(devicePixelRange.width / 2), devicePixelRange.y + Math.floor(devicePixelRange.height / 2)];\n    const deviceRadius = Math.round(radius * pixelRatio);\n    const {\n      width,\n      height\n    } = this.pickingFBO;\n\n    const deviceRect = this._getPickingRect({\n      deviceX: devicePixel[0],\n      deviceY: devicePixel[1],\n      deviceRadius,\n      deviceWidth: width,\n      deviceHeight: height\n    });\n\n    let infos;\n    const result = [];\n    const affectedLayers = {};\n\n    for (let i = 0; i < depth; i++) {\n      const pickedColors = deviceRect && this._drawAndSample({\n        layers,\n        views,\n        viewports,\n        onViewportActive,\n        deviceRect,\n        pass: \"picking:\".concat(mode),\n        redrawReason: mode\n      });\n\n      const pickInfo = getClosestObject({\n        pickedColors,\n        layers,\n        deviceX: devicePixel[0],\n        deviceY: devicePixel[1],\n        deviceRadius,\n        deviceRect\n      });\n      let z;\n\n      if (pickInfo.pickedLayer && unproject3D && this.depthFBO) {\n        const zValues = this._drawAndSample({\n          layers: [pickInfo.pickedLayer],\n          views,\n          viewports,\n          onViewportActive,\n          deviceRect: {\n            x: pickInfo.pickedX,\n            y: pickInfo.pickedY,\n            width: 1,\n            height: 1\n          },\n          pass: \"picking:\".concat(mode),\n          redrawReason: 'pick-z',\n          pickZ: true\n        });\n\n        z = zValues[0] * viewports[0].distanceScales.metersPerUnit[2] + viewports[0].position[2];\n      }\n\n      if (pickInfo.pickedColor && i + 1 < depth) {\n        const layerId = pickInfo.pickedColor[3] - 1;\n        affectedLayers[layerId] = true;\n        layers[layerId].disablePickingIndex(pickInfo.pickedObjectIndex);\n      }\n\n      infos = processPickInfo({\n        pickInfo,\n        lastPickedInfo: this.lastPickedInfo,\n        mode,\n        layers,\n        layerFilter: this.layerFilter,\n        viewports,\n        x,\n        y,\n        z,\n        pixelRatio\n      });\n\n      for (const info of infos.values()) {\n        if (info.layer) {\n          result.push(info);\n        }\n      }\n\n      if (!pickInfo.pickedColor) {\n        break;\n      }\n    }\n\n    for (const layerId in affectedLayers) {\n      layers[layerId].restorePickingColors();\n    }\n\n    return {\n      result,\n      emptyInfo: infos && infos.get(null)\n    };\n  }\n\n  _pickVisibleObjects({\n    layers,\n    views,\n    viewports,\n    x,\n    y,\n    width = 1,\n    height = 1,\n    mode = 'query',\n    maxObjects = null,\n    onViewportActive\n  }) {\n    layers = this._getPickable(layers);\n\n    if (!layers) {\n      return [];\n    }\n\n    this._resizeBuffer();\n\n    const pixelRatio = cssToDeviceRatio(this.gl);\n    const leftTop = cssToDevicePixels(this.gl, [x, y], true);\n    const deviceLeft = leftTop.x;\n    const deviceTop = leftTop.y + leftTop.height;\n    const rightBottom = cssToDevicePixels(this.gl, [x + width, y + height], true);\n    const deviceRight = rightBottom.x + rightBottom.width;\n    const deviceBottom = rightBottom.y;\n    const deviceRect = {\n      x: deviceLeft,\n      y: deviceBottom,\n      width: deviceRight - deviceLeft,\n      height: deviceTop - deviceBottom\n    };\n\n    const pickedColors = this._drawAndSample({\n      layers,\n      views,\n      viewports,\n      onViewportActive,\n      deviceRect,\n      pass: \"picking:\".concat(mode),\n      redrawReason: mode\n    });\n\n    const pickInfos = getUniqueObjects({\n      pickedColors,\n      layers\n    });\n    const uniqueInfos = new Map();\n    const isMaxObjects = Number.isFinite(maxObjects);\n\n    for (let i = 0; i < pickInfos.length; i++) {\n      if (isMaxObjects && uniqueInfos.size >= maxObjects) {\n        break;\n      }\n\n      const pickInfo = pickInfos[i];\n      let info = {\n        color: pickInfo.pickedColor,\n        layer: null,\n        index: pickInfo.pickedObjectIndex,\n        picked: true,\n        x,\n        y,\n        width,\n        height,\n        pixelRatio\n      };\n      info = getLayerPickingInfo({\n        layer: pickInfo.pickedLayer,\n        info,\n        mode\n      });\n\n      if (!uniqueInfos.has(info.object)) {\n        uniqueInfos.set(info.object, info);\n      }\n    }\n\n    return Array.from(uniqueInfos.values());\n  }\n\n  _drawAndSample({\n    layers,\n    views,\n    viewports,\n    onViewportActive,\n    deviceRect,\n    pass,\n    redrawReason,\n    pickZ\n  }) {\n    if (layers.length < 1) {\n      return null;\n    }\n\n    const pickingFBO = pickZ ? this.depthFBO : this.pickingFBO;\n    this.pickLayersPass.render({\n      layers,\n      layerFilter: this.layerFilter,\n      views,\n      viewports,\n      onViewportActive,\n      pickingFBO,\n      deviceRect,\n      pass,\n      redrawReason,\n      pickZ\n    });\n    const {\n      x,\n      y,\n      width,\n      height\n    } = deviceRect;\n    const pickedColors = new (pickZ ? Float32Array : Uint8Array)(width * height * 4);\n    readPixelsToArray(pickingFBO, {\n      sourceX: x,\n      sourceY: y,\n      sourceWidth: width,\n      sourceHeight: height,\n      target: pickedColors\n    });\n    return pickedColors;\n  }\n\n  _getPickingRect({\n    deviceX,\n    deviceY,\n    deviceRadius,\n    deviceWidth,\n    deviceHeight\n  }) {\n    const x = Math.max(0, deviceX - deviceRadius);\n    const y = Math.max(0, deviceY - deviceRadius);\n    const width = Math.min(deviceWidth, deviceX + deviceRadius + 1) - x;\n    const height = Math.min(deviceHeight, deviceY + deviceRadius + 1) - y;\n\n    if (width <= 0 || height <= 0) {\n      return null;\n    }\n\n    return {\n      x,\n      y,\n      width,\n      height\n    };\n  }\n\n}\n//# sourceMappingURL=deck-picker.js.map","const defaultStyle = {\n  zIndex: 1,\n  position: 'absolute',\n  pointerEvents: 'none',\n  color: '#a0a7b4',\n  backgroundColor: '#29323c',\n  padding: '10px',\n  top: 0,\n  left: 0,\n  display: 'none'\n};\nexport default class Tooltip {\n  constructor(canvas) {\n    const canvasParent = canvas.parentElement;\n\n    if (canvasParent) {\n      this.el = document.createElement('div');\n      this.el.className = 'deck-tooltip';\n      Object.assign(this.el.style, defaultStyle);\n      canvasParent.appendChild(this.el);\n    }\n\n    this.isVisible = false;\n  }\n\n  setTooltip(displayInfo, x, y) {\n    const el = this.el;\n\n    if (typeof displayInfo === 'string') {\n      el.innerText = displayInfo;\n    } else if (!displayInfo) {\n      this.isVisible = false;\n      el.style.display = 'none';\n      return;\n    } else {\n      if ('text' in displayInfo) {\n        el.innerText = displayInfo.text;\n      }\n\n      if ('html' in displayInfo) {\n        el.innerHTML = displayInfo.html;\n      }\n\n      if ('className' in displayInfo) {\n        el.className = displayInfo.className;\n      }\n\n      Object.assign(el.style, displayInfo.style);\n    }\n\n    this.isVisible = true;\n    el.style.display = 'block';\n    el.style.transform = \"translate(\".concat(x, \"px, \").concat(y, \"px)\");\n  }\n\n  remove() {\n    if (this.el) {\n      this.el.remove();\n    }\n  }\n\n}\n//# sourceMappingURL=tooltip.js.map","function isJSON(text) {\n  const firstChar = text[0];\n  const lastChar = text[text.length - 1];\n  return firstChar === '{' && lastChar === '}' || firstChar === '[' && lastChar === ']';\n}\n\nexport default {\n  name: 'JSON',\n  extensions: ['json', 'geojson'],\n  mimeTypes: ['application/json', 'application/geo+json'],\n  testText: isJSON,\n  parseTextSync: JSON.parse\n};\n//# sourceMappingURL=json-loader.js.map","import { registerLoaders } from '@loaders.gl/core';\nimport { ImageLoader } from '@loaders.gl/images';\nimport { global } from 'probe.gl/env';\nimport log from '../utils/log';\nimport { register } from '../debug';\nimport jsonLoader from '../utils/json-loader';\nconst version = typeof \"8.5.2\" !== 'undefined' ? \"8.5.2\" : global.DECK_VERSION || 'untranspiled source';\nconst existingVersion = global.deck && global.deck.VERSION;\n\nif (existingVersion && existingVersion !== version) {\n  throw new Error(\"deck.gl - multiple versions detected: \".concat(existingVersion, \" vs \").concat(version));\n}\n\nif (!existingVersion) {\n  log.log(1, \"deck.gl \".concat(version))();\n  global.deck = Object.assign(global.deck || {}, {\n    VERSION: version,\n    version,\n    log,\n    _registerLoggers: register\n  });\n  registerLoaders([jsonLoader, [ImageLoader, {\n    imagebitmap: {\n      premultiplyAlpha: 'none'\n    }\n  }]]);\n}\n\nexport default global.deck;\n//# sourceMappingURL=init.js.map","import Resource from './resource';\nimport { FEATURES, hasFeatures } from '../features';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils';\nconst GL_QUERY_RESULT = 0x8866;\nconst GL_QUERY_RESULT_AVAILABLE = 0x8867;\nconst GL_TIME_ELAPSED_EXT = 0x88bf;\nconst GL_GPU_DISJOINT_EXT = 0x8fbb;\nconst GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 0x8c88;\nconst GL_ANY_SAMPLES_PASSED = 0x8c2f;\nconst GL_ANY_SAMPLES_PASSED_CONSERVATIVE = 0x8d6a;\nexport default class Query extends Resource {\n  static isSupported(gl, opts = []) {\n    const webgl2 = isWebGL2(gl);\n    const hasTimerQuery = hasFeatures(gl, FEATURES.TIMER_QUERY);\n    let supported = webgl2 || hasTimerQuery;\n\n    for (const key of opts) {\n      switch (key) {\n        case 'queries':\n          supported = supported && webgl2;\n          break;\n\n        case 'timers':\n          supported = supported && hasTimerQuery;\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n\n    return supported;\n  }\n\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    this.target = null;\n    this._queryPending = false;\n    this._pollingPromise = null;\n    Object.seal(this);\n  }\n\n  beginTimeElapsedQuery() {\n    return this.begin(GL_TIME_ELAPSED_EXT);\n  }\n\n  beginOcclusionQuery({\n    conservative = false\n  } = {}) {\n    return this.begin(conservative ? GL_ANY_SAMPLES_PASSED_CONSERVATIVE : GL_ANY_SAMPLES_PASSED);\n  }\n\n  beginTransformFeedbackQuery() {\n    return this.begin(GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN);\n  }\n\n  begin(target) {\n    if (this._queryPending) {\n      return this;\n    }\n\n    this.target = target;\n    this.gl2.beginQuery(this.target, this.handle);\n    return this;\n  }\n\n  end() {\n    if (this._queryPending) {\n      return this;\n    }\n\n    if (this.target) {\n      this.gl2.endQuery(this.target);\n      this.target = null;\n      this._queryPending = true;\n    }\n\n    return this;\n  }\n\n  isResultAvailable() {\n    if (!this._queryPending) {\n      return false;\n    }\n\n    const resultAvailable = this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT_AVAILABLE);\n\n    if (resultAvailable) {\n      this._queryPending = false;\n    }\n\n    return resultAvailable;\n  }\n\n  isTimerDisjoint() {\n    return this.gl2.getParameter(GL_GPU_DISJOINT_EXT);\n  }\n\n  getResult() {\n    return this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT);\n  }\n\n  getTimerMilliseconds() {\n    return this.getResult() / 1e6;\n  }\n\n  createPoll(limit = Number.POSITIVE_INFINITY) {\n    if (this._pollingPromise) {\n      return this._pollingPromise;\n    }\n\n    let counter = 0;\n    this._pollingPromise = new Promise((resolve, reject) => {\n      const poll = () => {\n        if (this.isResultAvailable()) {\n          resolve(this.getResult());\n          this._pollingPromise = null;\n        } else if (counter++ > limit) {\n          reject('Timed out');\n          this._pollingPromise = null;\n        } else {\n          requestAnimationFrame(poll);\n        }\n      };\n\n      requestAnimationFrame(poll);\n    });\n    return this._pollingPromise;\n  }\n\n  _createHandle() {\n    return Query.isSupported(this.gl) ? this.gl2.createQuery() : null;\n  }\n\n  _deleteHandle() {\n    this.gl2.deleteQuery(this.handle);\n  }\n\n}\n//# sourceMappingURL=query.js.map","export function requestAnimationFrame(callback) {\n  return typeof window !== 'undefined' && window.requestAnimationFrame ? window.requestAnimationFrame(callback) : setTimeout(callback, 1000 / 60);\n}\nexport function cancelAnimationFrame(timerId) {\n  return typeof window !== 'undefined' && window.cancelAnimationFrame ? window.cancelAnimationFrame(timerId) : clearTimeout(timerId);\n}\n//# sourceMappingURL=request-animation-frame.js.map","import { isWebGL, createGLContext, instrumentGLContext, resizeGLContext, resetParameters } from '@luma.gl/gltools';\nimport { requestAnimationFrame, cancelAnimationFrame, Query, lumaStats, Framebuffer, log, assert } from '@luma.gl/webgl';\nimport { isBrowser } from 'probe.gl/env';\nconst isPage = isBrowser() && typeof document !== 'undefined';\nlet statIdCounter = 0;\nexport default class AnimationLoop {\n  constructor(props = {}) {\n    const {\n      onCreateContext = opts => createGLContext(opts),\n      onAddHTML = null,\n      onInitialize = () => {},\n      onRender = () => {},\n      onFinalize = () => {},\n      onError,\n      gl = null,\n      glOptions = {},\n      debug = false,\n      createFramebuffer = false,\n      autoResizeViewport = true,\n      autoResizeDrawingBuffer = true,\n      stats = lumaStats.get(\"animation-loop-\".concat(statIdCounter++))\n    } = props;\n    let {\n      useDevicePixels = true\n    } = props;\n\n    if ('useDevicePixelRatio' in props) {\n      log.deprecated('useDevicePixelRatio', 'useDevicePixels')();\n      useDevicePixels = props.useDevicePixelRatio;\n    }\n\n    this.props = {\n      onCreateContext,\n      onAddHTML,\n      onInitialize,\n      onRender,\n      onFinalize,\n      onError,\n      gl,\n      glOptions,\n      debug,\n      createFramebuffer\n    };\n    this.gl = gl;\n    this.needsRedraw = null;\n    this.timeline = null;\n    this.stats = stats;\n    this.cpuTime = this.stats.get('CPU Time');\n    this.gpuTime = this.stats.get('GPU Time');\n    this.frameRate = this.stats.get('Frame Rate');\n    this._initialized = false;\n    this._running = false;\n    this._animationFrameId = null;\n    this._nextFramePromise = null;\n    this._resolveNextFrame = null;\n    this._cpuStartTime = 0;\n    this.setProps({\n      autoResizeViewport,\n      autoResizeDrawingBuffer,\n      useDevicePixels\n    });\n    this.start = this.start.bind(this);\n    this.stop = this.stop.bind(this);\n    this._pageLoadPromise = null;\n    this._onMousemove = this._onMousemove.bind(this);\n    this._onMouseleave = this._onMouseleave.bind(this);\n  }\n\n  delete() {\n    this.stop();\n\n    this._setDisplay(null);\n  }\n\n  setNeedsRedraw(reason) {\n    assert(typeof reason === 'string');\n    this.needsRedraw = this.needsRedraw || reason;\n    return this;\n  }\n\n  setProps(props) {\n    if ('autoResizeViewport' in props) {\n      this.autoResizeViewport = props.autoResizeViewport;\n    }\n\n    if ('autoResizeDrawingBuffer' in props) {\n      this.autoResizeDrawingBuffer = props.autoResizeDrawingBuffer;\n    }\n\n    if ('useDevicePixels' in props) {\n      this.useDevicePixels = props.useDevicePixels;\n    }\n\n    return this;\n  }\n\n  start(opts = {}) {\n    if (this._running) {\n      return this;\n    }\n\n    this._running = true;\n\n    const startPromise = this._getPageLoadPromise().then(() => {\n      if (!this._running || this._initialized) {\n        return null;\n      }\n\n      this._createWebGLContext(opts);\n\n      this._createFramebuffer();\n\n      this._startEventHandling();\n\n      this._initializeCallbackData();\n\n      this._updateCallbackData();\n\n      this._resizeCanvasDrawingBuffer();\n\n      this._resizeViewport();\n\n      this._gpuTimeQuery = Query.isSupported(this.gl, ['timers']) ? new Query(this.gl) : null;\n      this._initialized = true;\n      return this.onInitialize(this.animationProps);\n    }).then(appContext => {\n      if (this._running) {\n        this._addCallbackData(appContext || {});\n\n        if (appContext !== false) {\n          this._startLoop();\n        }\n      }\n    });\n\n    if (this.props.onError) {\n      startPromise.catch(this.props.onError);\n    }\n\n    return this;\n  }\n\n  redraw() {\n    if (this.isContextLost()) {\n      return this;\n    }\n\n    this._beginTimers();\n\n    this._setupFrame();\n\n    this._updateCallbackData();\n\n    this._renderFrame(this.animationProps);\n\n    this._clearNeedsRedraw();\n\n    if (this.offScreen && this.gl.commit) {\n      this.gl.commit();\n    }\n\n    if (this._resolveNextFrame) {\n      this._resolveNextFrame(this);\n\n      this._nextFramePromise = null;\n      this._resolveNextFrame = null;\n    }\n\n    this._endTimers();\n\n    return this;\n  }\n\n  stop() {\n    if (this._running) {\n      this._finalizeCallbackData();\n\n      cancelAnimationFrame(this._animationFrameId);\n      this._nextFramePromise = null;\n      this._resolveNextFrame = null;\n      this._animationFrameId = null;\n      this._running = false;\n    }\n\n    return this;\n  }\n\n  attachTimeline(timeline) {\n    this.timeline = timeline;\n    return this.timeline;\n  }\n\n  detachTimeline() {\n    this.timeline = null;\n  }\n\n  waitForRender() {\n    this.setNeedsRedraw('waitForRender');\n\n    if (!this._nextFramePromise) {\n      this._nextFramePromise = new Promise(resolve => {\n        this._resolveNextFrame = resolve;\n      });\n    }\n\n    return this._nextFramePromise;\n  }\n\n  async toDataURL() {\n    this.setNeedsRedraw('toDataURL');\n    await this.waitForRender();\n    return this.gl.canvas.toDataURL();\n  }\n\n  isContextLost() {\n    return this.gl.isContextLost();\n  }\n\n  onCreateContext(...args) {\n    return this.props.onCreateContext(...args);\n  }\n\n  onInitialize(...args) {\n    return this.props.onInitialize(...args);\n  }\n\n  onRender(...args) {\n    return this.props.onRender(...args);\n  }\n\n  onFinalize(...args) {\n    return this.props.onFinalize(...args);\n  }\n\n  getHTMLControlValue(id, defaultValue = 1) {\n    const element = document.getElementById(id);\n    return element ? Number(element.value) : defaultValue;\n  }\n\n  setViewParameters() {\n    log.removed('AnimationLoop.setViewParameters', 'AnimationLoop.setProps')();\n    return this;\n  }\n\n  _startLoop() {\n    const renderFrame = () => {\n      if (!this._running) {\n        return;\n      }\n\n      this.redraw();\n      this._animationFrameId = this._requestAnimationFrame(renderFrame);\n    };\n\n    cancelAnimationFrame(this._animationFrameId);\n    this._animationFrameId = this._requestAnimationFrame(renderFrame);\n  }\n\n  _getPageLoadPromise() {\n    if (!this._pageLoadPromise) {\n      this._pageLoadPromise = isPage ? new Promise((resolve, reject) => {\n        if (isPage && document.readyState === 'complete') {\n          resolve(document);\n          return;\n        }\n\n        window.addEventListener('load', () => {\n          resolve(document);\n        });\n      }) : Promise.resolve({});\n    }\n\n    return this._pageLoadPromise;\n  }\n\n  _setDisplay(display) {\n    if (this.display) {\n      this.display.delete();\n      this.display.animationLoop = null;\n    }\n\n    if (display) {\n      display.animationLoop = this;\n    }\n\n    this.display = display;\n  }\n\n  _requestAnimationFrame(renderFrameCallback) {\n    if (this.display && this.display.requestAnimationFrame(renderFrameCallback)) {\n      return;\n    }\n\n    requestAnimationFrame(renderFrameCallback);\n  }\n\n  _renderFrame(...args) {\n    if (this.display) {\n      this.display._renderFrame(...args);\n\n      return;\n    }\n\n    this.onRender(...args);\n  }\n\n  _clearNeedsRedraw() {\n    this.needsRedraw = null;\n  }\n\n  _setupFrame() {\n    this._resizeCanvasDrawingBuffer();\n\n    this._resizeViewport();\n\n    this._resizeFramebuffer();\n  }\n\n  _initializeCallbackData() {\n    this.animationProps = {\n      gl: this.gl,\n      stop: this.stop,\n      canvas: this.gl.canvas,\n      framebuffer: this.framebuffer,\n      useDevicePixels: this.useDevicePixels,\n      needsRedraw: null,\n      startTime: Date.now(),\n      engineTime: 0,\n      tick: 0,\n      tock: 0,\n      time: 0,\n      _timeline: this.timeline,\n      _loop: this,\n      _animationLoop: this,\n      _mousePosition: null\n    };\n  }\n\n  _updateCallbackData() {\n    const {\n      width,\n      height,\n      aspect\n    } = this._getSizeAndAspect();\n\n    if (width !== this.animationProps.width || height !== this.animationProps.height) {\n      this.setNeedsRedraw('drawing buffer resized');\n    }\n\n    if (aspect !== this.animationProps.aspect) {\n      this.setNeedsRedraw('drawing buffer aspect changed');\n    }\n\n    this.animationProps.width = width;\n    this.animationProps.height = height;\n    this.animationProps.aspect = aspect;\n    this.animationProps.needsRedraw = this.needsRedraw;\n    this.animationProps.engineTime = Date.now() - this.animationProps.startTime;\n\n    if (this.timeline) {\n      this.timeline.update(this.animationProps.engineTime);\n    }\n\n    this.animationProps.tick = Math.floor(this.animationProps.time / 1000 * 60);\n    this.animationProps.tock++;\n    this.animationProps.time = this.timeline ? this.timeline.getTime() : this.animationProps.engineTime;\n    this.animationProps._offScreen = this.offScreen;\n  }\n\n  _finalizeCallbackData() {\n    this.onFinalize(this.animationProps);\n  }\n\n  _addCallbackData(appContext) {\n    if (typeof appContext === 'object' && appContext !== null) {\n      this.animationProps = Object.assign({}, this.animationProps, appContext);\n    }\n  }\n\n  _createWebGLContext(opts) {\n    this.offScreen = opts.canvas && typeof OffscreenCanvas !== 'undefined' && opts.canvas instanceof OffscreenCanvas;\n    opts = Object.assign({}, opts, this.props.glOptions);\n    this.gl = this.props.gl ? instrumentGLContext(this.props.gl, opts) : this.onCreateContext(opts);\n\n    if (!isWebGL(this.gl)) {\n      throw new Error('AnimationLoop.onCreateContext - illegal context returned');\n    }\n\n    resetParameters(this.gl);\n\n    this._createInfoDiv();\n  }\n\n  _createInfoDiv() {\n    if (this.gl.canvas && this.props.onAddHTML) {\n      const wrapperDiv = document.createElement('div');\n      document.body.appendChild(wrapperDiv);\n      wrapperDiv.style.position = 'relative';\n      const div = document.createElement('div');\n      div.style.position = 'absolute';\n      div.style.left = '10px';\n      div.style.bottom = '10px';\n      div.style.width = '300px';\n      div.style.background = 'white';\n      wrapperDiv.appendChild(this.gl.canvas);\n      wrapperDiv.appendChild(div);\n      const html = this.props.onAddHTML(div);\n\n      if (html) {\n        div.innerHTML = html;\n      }\n    }\n  }\n\n  _getSizeAndAspect() {\n    const width = this.gl.drawingBufferWidth;\n    const height = this.gl.drawingBufferHeight;\n    let aspect = 1;\n    const {\n      canvas\n    } = this.gl;\n\n    if (canvas && canvas.clientHeight) {\n      aspect = canvas.clientWidth / canvas.clientHeight;\n    } else if (width > 0 && height > 0) {\n      aspect = width / height;\n    }\n\n    return {\n      width,\n      height,\n      aspect\n    };\n  }\n\n  _resizeViewport() {\n    if (this.autoResizeViewport) {\n      this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\n    }\n  }\n\n  _resizeCanvasDrawingBuffer() {\n    if (this.autoResizeDrawingBuffer) {\n      resizeGLContext(this.gl, {\n        useDevicePixels: this.useDevicePixels\n      });\n    }\n  }\n\n  _createFramebuffer() {\n    if (this.props.createFramebuffer) {\n      this.framebuffer = new Framebuffer(this.gl);\n    }\n  }\n\n  _resizeFramebuffer() {\n    if (this.framebuffer) {\n      this.framebuffer.resize({\n        width: this.gl.drawingBufferWidth,\n        height: this.gl.drawingBufferHeight\n      });\n    }\n  }\n\n  _beginTimers() {\n    this.frameRate.timeEnd();\n    this.frameRate.timeStart();\n\n    if (this._gpuTimeQuery && this._gpuTimeQuery.isResultAvailable() && !this._gpuTimeQuery.isTimerDisjoint()) {\n      this.stats.get('GPU Time').addTime(this._gpuTimeQuery.getTimerMilliseconds());\n    }\n\n    if (this._gpuTimeQuery) {\n      this._gpuTimeQuery.beginTimeElapsedQuery();\n    }\n\n    this.cpuTime.timeStart();\n  }\n\n  _endTimers() {\n    this.cpuTime.timeEnd();\n\n    if (this._gpuTimeQuery) {\n      this._gpuTimeQuery.end();\n    }\n  }\n\n  _startEventHandling() {\n    const {\n      canvas\n    } = this.gl;\n\n    if (canvas) {\n      canvas.addEventListener('mousemove', this._onMousemove);\n      canvas.addEventListener('mouseleave', this._onMouseleave);\n    }\n  }\n\n  _onMousemove(e) {\n    this.animationProps._mousePosition = [e.offsetX, e.offsetY];\n  }\n\n  _onMouseleave(e) {\n    this.animationProps._mousePosition = null;\n  }\n\n}\n//# sourceMappingURL=animation-loop.js.map","import LayerManager from './layer-manager';\nimport ViewManager from './view-manager';\nimport MapView from '../views/map-view';\nimport EffectManager from './effect-manager';\nimport Effect from './effect';\nimport DeckRenderer from './deck-renderer';\nimport DeckPicker from './deck-picker';\nimport Tooltip from './tooltip';\nimport log from '../utils/log';\nimport { deepEqual } from '../utils/deep-equal';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport deckGlobal from './init';\nimport { getBrowser } from 'probe.gl/env';\nimport { AnimationLoop, createGLContext, instrumentGLContext, setParameters, Timeline, lumaStats } from '@luma.gl/core';\nimport { Stats } from 'probe.gl';\nimport { EventManager } from 'mjolnir.js';\nimport assert from '../utils/assert';\nimport { EVENTS } from './constants';\n\nfunction noop() {}\n\nconst getCursor = ({\n  isDragging\n}) => isDragging ? 'grabbing' : 'grab';\n\nfunction getPropTypes(PropTypes) {\n  return {\n    id: PropTypes.string,\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    layers: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    layerFilter: PropTypes.func,\n    views: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    viewState: PropTypes.object,\n    effects: PropTypes.arrayOf(PropTypes.instanceOf(Effect)),\n    controller: PropTypes.oneOfType([PropTypes.func, PropTypes.bool, PropTypes.object]),\n    gl: PropTypes.object,\n    glOptions: PropTypes.object,\n    parameters: PropTypes.object,\n    pickingRadius: PropTypes.number,\n    useDevicePixels: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n    touchAction: PropTypes.string,\n    eventRecognizerOptions: PropTypes.object,\n    onWebGLInitialized: PropTypes.func,\n    onResize: PropTypes.func,\n    onViewStateChange: PropTypes.func,\n    onInteractionStateChange: PropTypes.func,\n    onBeforeRender: PropTypes.func,\n    onAfterRender: PropTypes.func,\n    onLoad: PropTypes.func,\n    onError: PropTypes.func,\n    debug: PropTypes.bool,\n    drawPickingColors: PropTypes.bool,\n    _framebuffer: PropTypes.object,\n    _animate: PropTypes.bool,\n    _pickable: PropTypes.bool,\n    _typedArrayManagerProps: PropTypes.object\n  };\n}\n\nconst defaultProps = {\n  id: '',\n  width: '100%',\n  height: '100%',\n  pickingRadius: 0,\n  layerFilter: null,\n  glOptions: {},\n  gl: null,\n  layers: [],\n  effects: [],\n  views: null,\n  controller: null,\n  useDevicePixels: true,\n  touchAction: 'none',\n  eventRecognizerOptions: {},\n  _framebuffer: null,\n  _animate: false,\n  _pickable: true,\n  _typedArrayManagerProps: {},\n  onWebGLInitialized: noop,\n  onResize: noop,\n  onViewStateChange: noop,\n  onInteractionStateChange: noop,\n  onBeforeRender: noop,\n  onAfterRender: noop,\n  onLoad: noop,\n  onError: (error, layer) => log.error(error)(),\n  _onMetrics: null,\n  getCursor,\n  debug: false,\n  drawPickingColors: false\n};\nexport default class Deck {\n  constructor(props) {\n    props = { ...defaultProps,\n      ...props\n    };\n    this.props = {};\n    this.width = 0;\n    this.height = 0;\n    this.viewManager = null;\n    this.layerManager = null;\n    this.effectManager = null;\n    this.deckRenderer = null;\n    this.deckPicker = null;\n    this._needsRedraw = true;\n    this._pickRequest = {};\n    this._lastPointerDownInfo = null;\n    this.viewState = null;\n    this.interactiveState = {\n      isHovering: false,\n      isDragging: false\n    };\n    this._onEvent = this._onEvent.bind(this);\n    this._onPointerDown = this._onPointerDown.bind(this);\n    this._onPointerMove = this._onPointerMove.bind(this);\n\n    if (props.viewState && props.initialViewState) {\n      log.warn('View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.')();\n    }\n\n    if (getBrowser() === 'IE') {\n      log.warn('IE 11 support will be deprecated in v8.0')();\n    }\n\n    if (!props.gl) {\n      if (typeof document !== 'undefined') {\n        this.canvas = this._createCanvas(props);\n      }\n    }\n\n    this.animationLoop = this._createAnimationLoop(props);\n    this.stats = new Stats({\n      id: 'deck.gl'\n    });\n    this.metrics = {\n      fps: 0,\n      setPropsTime: 0,\n      updateAttributesTime: 0,\n      framesRedrawn: 0,\n      pickTime: 0,\n      pickCount: 0,\n      gpuTime: 0,\n      gpuTimePerFrame: 0,\n      cpuTime: 0,\n      cpuTimePerFrame: 0,\n      bufferMemory: 0,\n      textureMemory: 0,\n      renderbufferMemory: 0,\n      gpuMemory: 0\n    };\n    this._metricsCounter = 0;\n    this.setProps(props);\n\n    if (props._typedArrayManagerProps) {\n      typedArrayManager.setProps(props._typedArrayManagerProps);\n    }\n\n    this.animationLoop.start();\n  }\n\n  finalize() {\n    this.animationLoop.stop();\n    this.animationLoop = null;\n    this._lastPointerDownInfo = null;\n\n    if (this.layerManager) {\n      this.layerManager.finalize();\n      this.layerManager = null;\n      this.viewManager.finalize();\n      this.viewManager = null;\n      this.effectManager.finalize();\n      this.effectManager = null;\n      this.deckRenderer.finalize();\n      this.deckRenderer = null;\n      this.deckPicker.finalize();\n      this.deckPicker = null;\n      this.eventManager.destroy();\n      this.eventManager = null;\n      this.tooltip.remove();\n      this.tooltip = null;\n    }\n\n    if (!this.props.canvas && !this.props.gl && this.canvas) {\n      this.canvas.parentElement.removeChild(this.canvas);\n      this.canvas = null;\n    }\n  }\n\n  setProps(props) {\n    this.stats.get('setProps Time').timeStart();\n\n    if ('onLayerHover' in props) {\n      log.removed('onLayerHover', 'onHover')();\n    }\n\n    if ('onLayerClick' in props) {\n      log.removed('onLayerClick', 'onClick')();\n    }\n\n    if (props.initialViewState && !deepEqual(this.props.initialViewState, props.initialViewState)) {\n      this.viewState = props.initialViewState;\n    }\n\n    Object.assign(this.props, props);\n\n    this._setCanvasSize(this.props);\n\n    const resolvedProps = Object.create(this.props);\n    Object.assign(resolvedProps, {\n      views: this._getViews(),\n      width: this.width,\n      height: this.height,\n      viewState: this._getViewState()\n    });\n    this.animationLoop.setProps(resolvedProps);\n\n    if (this.layerManager) {\n      this.viewManager.setProps(resolvedProps);\n      this.layerManager.activateViewport(this.getViewports()[0]);\n      this.layerManager.setProps(resolvedProps);\n      this.effectManager.setProps(resolvedProps);\n      this.deckRenderer.setProps(resolvedProps);\n      this.deckPicker.setProps(resolvedProps);\n    }\n\n    this.stats.get('setProps Time').timeEnd();\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    if (this.props._animate) {\n      return 'Deck._animate';\n    }\n\n    let redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    const viewManagerNeedsRedraw = this.viewManager.needsRedraw(opts);\n    const layerManagerNeedsRedraw = this.layerManager.needsRedraw(opts);\n    const effectManagerNeedsRedraw = this.effectManager.needsRedraw(opts);\n    const deckRendererNeedsRedraw = this.deckRenderer.needsRedraw(opts);\n    redraw = redraw || viewManagerNeedsRedraw || layerManagerNeedsRedraw || effectManagerNeedsRedraw || deckRendererNeedsRedraw;\n    return redraw;\n  }\n\n  redraw(force) {\n    if (!this.layerManager) {\n      return;\n    }\n\n    const redrawReason = force || this.needsRedraw({\n      clearRedrawFlags: true\n    });\n\n    if (!redrawReason) {\n      return;\n    }\n\n    this.stats.get('Redraw Count').incrementCount();\n\n    if (this.props._customRender) {\n      this.props._customRender(redrawReason);\n    } else {\n      this._drawLayers(redrawReason);\n    }\n  }\n\n  getViews() {\n    return this.viewManager.views;\n  }\n\n  getViewports(rect) {\n    return this.viewManager.getViewports(rect);\n  }\n\n  pickObject(opts) {\n    const infos = this._pick('pickObject', 'pickObject Time', opts).result;\n\n    return infos.length ? infos[0] : null;\n  }\n\n  pickMultipleObjects(opts) {\n    opts.depth = opts.depth || 10;\n    return this._pick('pickObject', 'pickMultipleObjects Time', opts).result;\n  }\n\n  pickObjects(opts) {\n    return this._pick('pickObjects', 'pickObjects Time', opts);\n  }\n\n  _addResources(resources, forceUpdate = false) {\n    for (const id in resources) {\n      this.layerManager.resourceManager.add({\n        resourceId: id,\n        data: resources[id],\n        forceUpdate\n      });\n    }\n  }\n\n  _removeResources(resourceIds) {\n    for (const id of resourceIds) {\n      this.layerManager.resourceManager.remove(id);\n    }\n  }\n\n  _pick(method, statKey, opts) {\n    const {\n      stats\n    } = this;\n    stats.get('Pick Count').incrementCount();\n    stats.get(statKey).timeStart();\n    const infos = this.deckPicker[method]({\n      layers: this.layerManager.getLayers(opts),\n      views: this.viewManager.getViews(),\n      viewports: this.getViewports(opts),\n      onViewportActive: this.layerManager.activateViewport,\n      ...opts\n    });\n    stats.get(statKey).timeEnd();\n    return infos;\n  }\n\n  _createCanvas(props) {\n    let canvas = props.canvas;\n\n    if (typeof canvas === 'string') {\n      canvas = document.getElementById(canvas);\n      assert(canvas);\n    }\n\n    if (!canvas) {\n      canvas = document.createElement('canvas');\n      canvas.id = props.id || 'deckgl-overlay';\n      const parent = props.parent || document.body;\n      parent.appendChild(canvas);\n    }\n\n    Object.assign(canvas.style, props.style);\n    return canvas;\n  }\n\n  _setCanvasSize(props) {\n    if (!this.canvas) {\n      return;\n    }\n\n    let {\n      width,\n      height\n    } = props;\n\n    if (width || width === 0) {\n      width = Number.isFinite(width) ? \"\".concat(width, \"px\") : width;\n      this.canvas.style.width = width;\n    }\n\n    if (height || height === 0) {\n      height = Number.isFinite(height) ? \"\".concat(height, \"px\") : height;\n      this.canvas.style.position = 'absolute';\n      this.canvas.style.height = height;\n    }\n  }\n\n  _updateCanvasSize() {\n    if (this._checkForCanvasSizeChange()) {\n      const {\n        width,\n        height\n      } = this;\n      this.viewManager.setProps({\n        width,\n        height\n      });\n      this.props.onResize({\n        width: this.width,\n        height: this.height\n      });\n    }\n  }\n\n  _checkForCanvasSizeChange() {\n    const {\n      canvas\n    } = this;\n\n    if (!canvas) {\n      return false;\n    }\n\n    const newWidth = canvas.clientWidth || canvas.width;\n    const newHeight = canvas.clientHeight || canvas.height;\n\n    if (newWidth !== this.width || newHeight !== this.height) {\n      this.width = newWidth;\n      this.height = newHeight;\n      return true;\n    }\n\n    return false;\n  }\n\n  _createAnimationLoop(props) {\n    const {\n      width,\n      height,\n      gl,\n      glOptions,\n      debug,\n      onError,\n      onBeforeRender,\n      onAfterRender,\n      useDevicePixels,\n      autoResizeDrawingBuffer\n    } = props;\n    return new AnimationLoop({\n      width,\n      height,\n      useDevicePixels,\n      autoResizeDrawingBuffer,\n      autoResizeViewport: false,\n      gl,\n      onCreateContext: opts => createGLContext({ ...glOptions,\n        ...opts,\n        canvas: this.canvas,\n        debug,\n        onContextLost: () => this._onContextLost()\n      }),\n      onInitialize: context => this._setGLContext(context.gl),\n      onRender: this._onRenderFrame.bind(this),\n      onBeforeRender,\n      onAfterRender,\n      onError\n    });\n  }\n\n  _getViewState() {\n    return this.props.viewState || this.viewState;\n  }\n\n  _getViews() {\n    let views = this.props.views || [new MapView({\n      id: 'default-view'\n    })];\n    views = Array.isArray(views) ? views : [views];\n\n    if (views.length && this.props.controller) {\n      views[0].props.controller = this.props.controller;\n    }\n\n    return views;\n  }\n\n  _onContextLost() {\n    const {\n      onError\n    } = this.props;\n\n    if (this.animationLoop && onError) {\n      onError(new Error(\"WebGL context is lost\"));\n    }\n  }\n\n  _onPointerMove(event) {\n    const {\n      _pickRequest\n    } = this;\n\n    if (event.type === 'pointerleave') {\n      _pickRequest.x = -1;\n      _pickRequest.y = -1;\n      _pickRequest.radius = 0;\n    } else if (event.leftButton || event.rightButton) {\n      return;\n    } else {\n      const pos = event.offsetCenter;\n\n      if (!pos) {\n        return;\n      }\n\n      _pickRequest.x = pos.x;\n      _pickRequest.y = pos.y;\n      _pickRequest.radius = this.props.pickingRadius;\n    }\n\n    if (this.layerManager) {\n      this.layerManager.context.mousePosition = {\n        x: _pickRequest.x,\n        y: _pickRequest.y\n      };\n    }\n\n    _pickRequest.event = event;\n    _pickRequest.mode = 'hover';\n  }\n\n  _pickAndCallback() {\n    const {\n      _pickRequest\n    } = this;\n\n    if (_pickRequest.event) {\n      const {\n        result,\n        emptyInfo\n      } = this._pick('pickObject', 'pickObject Time', _pickRequest);\n\n      this.interactiveState.isHovering = result.length > 0;\n      let pickedInfo = emptyInfo;\n      let handled = false;\n\n      for (const info of result) {\n        pickedInfo = info;\n        handled = info.layer.onHover(info, _pickRequest.event);\n      }\n\n      if (!handled && this.props.onHover) {\n        this.props.onHover(pickedInfo, _pickRequest.event);\n      }\n\n      if (this.props.getTooltip) {\n        const displayInfo = this.props.getTooltip(pickedInfo);\n        this.tooltip.setTooltip(displayInfo, pickedInfo.x, pickedInfo.y);\n      }\n\n      _pickRequest.event = null;\n    }\n  }\n\n  _updateCursor() {\n    const container = this.props.parent || this.canvas;\n\n    if (container) {\n      container.style.cursor = this.props.getCursor(this.interactiveState);\n    }\n  }\n\n  _setGLContext(gl) {\n    if (this.layerManager) {\n      return;\n    }\n\n    if (!this.canvas) {\n      this.canvas = gl.canvas;\n      instrumentGLContext(gl, {\n        enable: true,\n        copyState: true\n      });\n    }\n\n    this.tooltip = new Tooltip(this.canvas);\n    setParameters(gl, {\n      blend: true,\n      blendFunc: [770, 771, 1, 771],\n      polygonOffsetFill: true,\n      depthTest: true,\n      depthFunc: 515\n    });\n    this.props.onWebGLInitialized(gl);\n    const timeline = new Timeline();\n    timeline.play();\n    this.animationLoop.attachTimeline(timeline);\n    this.eventManager = new EventManager(this.props.parent || gl.canvas, {\n      touchAction: this.props.touchAction,\n      recognizerOptions: this.props.eventRecognizerOptions,\n      events: {\n        pointerdown: this._onPointerDown,\n        pointermove: this._onPointerMove,\n        pointerleave: this._onPointerMove\n      }\n    });\n\n    for (const eventType in EVENTS) {\n      this.eventManager.on(eventType, this._onEvent);\n    }\n\n    this.viewManager = new ViewManager({\n      timeline,\n      eventManager: this.eventManager,\n      onViewStateChange: this._onViewStateChange.bind(this),\n      onInteractionStateChange: this._onInteractionStateChange.bind(this),\n      views: this._getViews(),\n      viewState: this._getViewState(),\n      width: this.width,\n      height: this.height\n    });\n    const viewport = this.viewManager.getViewports()[0];\n    this.layerManager = new LayerManager(gl, {\n      deck: this,\n      stats: this.stats,\n      viewport,\n      timeline\n    });\n    this.effectManager = new EffectManager();\n    this.deckRenderer = new DeckRenderer(gl);\n    this.deckPicker = new DeckPicker(gl);\n    this.setProps(this.props);\n\n    this._updateCanvasSize();\n\n    this.props.onLoad();\n  }\n\n  _drawLayers(redrawReason, renderOptions) {\n    const {\n      gl\n    } = this.layerManager.context;\n    setParameters(gl, this.props.parameters);\n    this.props.onBeforeRender({\n      gl\n    });\n    this.deckRenderer.renderLayers({\n      target: this.props._framebuffer,\n      layers: this.layerManager.getLayers(),\n      viewports: this.viewManager.getViewports(),\n      onViewportActive: this.layerManager.activateViewport,\n      views: this.viewManager.getViews(),\n      pass: 'screen',\n      redrawReason,\n      effects: this.effectManager.getEffects(),\n      ...renderOptions\n    });\n    this.props.onAfterRender({\n      gl\n    });\n  }\n\n  _onRenderFrame(animationProps) {\n    this._getFrameStats();\n\n    if (this._metricsCounter++ % 60 === 0) {\n      this._getMetrics();\n\n      this.stats.reset();\n      log.table(4, this.metrics)();\n\n      if (this.props._onMetrics) {\n        this.props._onMetrics(this.metrics);\n      }\n    }\n\n    this._updateCanvasSize();\n\n    this._updateCursor();\n\n    if (this.tooltip.isVisible && this.viewManager.needsRedraw()) {\n      this.tooltip.setTooltip(null);\n    }\n\n    this.layerManager.updateLayers();\n\n    this._pickAndCallback();\n\n    this.redraw(false);\n\n    if (this.viewManager) {\n      this.viewManager.updateViewStates();\n    }\n  }\n\n  _onViewStateChange(params) {\n    const viewState = this.props.onViewStateChange(params) || params.viewState;\n\n    if (this.viewState) {\n      this.viewState = { ...this.viewState,\n        [params.viewId]: viewState\n      };\n\n      if (!this.props.viewState) {\n        if (this.viewManager) {\n          this.viewManager.setProps({\n            viewState: this.viewState\n          });\n        }\n      }\n    }\n  }\n\n  _onInteractionStateChange(interactionState) {\n    this.interactiveState.isDragging = interactionState.isDragging;\n    this.props.onInteractionStateChange(interactionState);\n  }\n\n  _onEvent(event) {\n    const eventOptions = EVENTS[event.type];\n    const pos = event.offsetCenter;\n\n    if (!eventOptions || !pos) {\n      return;\n    }\n\n    const layers = this.layerManager.getLayers();\n    const info = this.deckPicker.getLastPickedObject({\n      x: pos.x,\n      y: pos.y,\n      layers,\n      viewports: this.getViewports(pos)\n    }, this._lastPointerDownInfo);\n    const {\n      layer\n    } = info;\n    const layerHandler = layer && (layer[eventOptions.handler] || layer.props[eventOptions.handler]);\n    const rootHandler = this.props[eventOptions.handler];\n    let handled = false;\n\n    if (layerHandler) {\n      handled = layerHandler.call(layer, info, event);\n    }\n\n    if (!handled && rootHandler) {\n      rootHandler(info, event);\n    }\n  }\n\n  _onPointerDown(event) {\n    const pos = event.offsetCenter;\n    this._lastPointerDownInfo = this.pickObject({\n      x: pos.x,\n      y: pos.y,\n      radius: this.props.pickingRadius\n    });\n  }\n\n  _getFrameStats() {\n    const {\n      stats\n    } = this;\n    stats.get('frameRate').timeEnd();\n    stats.get('frameRate').timeStart();\n    const animationLoopStats = this.animationLoop.stats;\n    stats.get('GPU Time').addTime(animationLoopStats.get('GPU Time').lastTiming);\n    stats.get('CPU Time').addTime(animationLoopStats.get('CPU Time').lastTiming);\n  }\n\n  _getMetrics() {\n    const {\n      metrics,\n      stats\n    } = this;\n    metrics.fps = stats.get('frameRate').getHz();\n    metrics.setPropsTime = stats.get('setProps Time').time;\n    metrics.updateAttributesTime = stats.get('Update Attributes').time;\n    metrics.framesRedrawn = stats.get('Redraw Count').count;\n    metrics.pickTime = stats.get('pickObject Time').time + stats.get('pickMultipleObjects Time').time + stats.get('pickObjects Time').time;\n    metrics.pickCount = stats.get('Pick Count').count;\n    metrics.gpuTime = stats.get('GPU Time').time;\n    metrics.cpuTime = stats.get('CPU Time').time;\n    metrics.gpuTimePerFrame = stats.get('GPU Time').getAverageTime();\n    metrics.cpuTimePerFrame = stats.get('CPU Time').getAverageTime();\n    const memoryStats = lumaStats.get('Memory Usage');\n    metrics.bufferMemory = memoryStats.get('Buffer Memory').count;\n    metrics.textureMemory = memoryStats.get('Texture Memory').count;\n    metrics.renderbufferMemory = memoryStats.get('Renderbuffer Memory').count;\n    metrics.gpuMemory = memoryStats.get('GPU Memory').count;\n  }\n\n}\nDeck.getPropTypes = getPropTypes;\nDeck.defaultProps = defaultProps;\nDeck.VERSION = deckGlobal.VERSION;\n//# sourceMappingURL=deck.js.map","import { useEffect, useLayoutEffect } from 'react';\nconst useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\nexport default useIsomorphicLayoutEffect;\n//# sourceMappingURL=use-isomorphic-layout-effect.js.map","export function inheritsFrom(Type, ParentType) {\n  while (Type) {\n    if (Type === ParentType) {\n      return true;\n    }\n\n    Type = Object.getPrototypeOf(Type);\n  }\n\n  return false;\n}\n//# sourceMappingURL=inherits-from.js.map","import React, { createElement } from 'react';\nimport { inheritsFrom } from './inherits-from';\nimport { Layer, View } from '@deck.gl/core';\n\nfunction wrapInView(node) {\n  if (!node) {\n    return node;\n  }\n\n  if (typeof node === 'function') {\n    return createElement(View, {}, node);\n  }\n\n  if (Array.isArray(node)) {\n    return node.map(wrapInView);\n  }\n\n  if (node.type === React.Fragment) {\n    return wrapInView(node.props.children);\n  }\n\n  if (inheritsFrom(node.type, View)) {\n    return node;\n  }\n\n  return node;\n}\n\nexport default function extractJSXLayers({\n  children,\n  layers,\n  views\n}) {\n  const reactChildren = [];\n  const jsxLayers = [];\n  const jsxViews = {};\n  React.Children.forEach(wrapInView(children), reactElement => {\n    if (reactElement) {\n      const ElementType = reactElement.type;\n\n      if (inheritsFrom(ElementType, Layer)) {\n        const layer = createLayer(ElementType, reactElement.props);\n        jsxLayers.push(layer);\n      } else {\n        reactChildren.push(reactElement);\n      }\n\n      if (ElementType !== View && inheritsFrom(ElementType, View) && reactElement.props.id) {\n        const view = new ElementType(reactElement.props);\n        jsxViews[view.id] = view;\n      }\n    }\n  });\n\n  if (Object.keys(jsxViews).length > 0) {\n    if (Array.isArray(views)) {\n      views.forEach(view => {\n        jsxViews[view.id] = view;\n      });\n    } else if (views) {\n      jsxViews[views.id] = views;\n    }\n\n    views = Object.values(jsxViews);\n  }\n\n  layers = jsxLayers.length > 0 ? [...jsxLayers, ...layers] : layers;\n  return {\n    layers,\n    children: reactChildren,\n    views\n  };\n}\n\nfunction createLayer(LayerType, reactProps) {\n  const props = {};\n  const defaultProps = LayerType.defaultProps || {};\n\n  for (const key in reactProps) {\n    if (defaultProps[key] !== reactProps[key]) {\n      props[key] = reactProps[key];\n    }\n  }\n\n  return new LayerType(props);\n}\n//# sourceMappingURL=extract-jsx-layers.js.map","import { cloneElement } from 'react';\nconst MAP_STYLE = {\n  position: 'absolute',\n  zIndex: -1\n};\nexport default function evaluateChildren(children, childProps) {\n  if (!children) {\n    return children;\n  }\n\n  if (typeof children === 'function') {\n    return children(childProps);\n  }\n\n  if (Array.isArray(children)) {\n    return children.map(child => evaluateChildren(child, childProps));\n  }\n\n  if (isReactMap(children)) {\n    childProps.style = MAP_STYLE;\n    return cloneElement(children, childProps);\n  }\n\n  if (needsDeckGLViewProps(children)) {\n    return cloneElement(children, childProps);\n  }\n\n  return children;\n}\n\nfunction isReactMap(child) {\n  const componentClass = child && child.type;\n  const componentProps = componentClass && componentClass.defaultProps;\n  return componentProps && componentProps.mapStyle;\n}\n\nfunction needsDeckGLViewProps(child) {\n  const componentClass = child && child.type;\n  return componentClass && componentClass.deckGLViewProps;\n}\n//# sourceMappingURL=evaluate-children.js.map","const CANVAS_ONLY_STYLES = {\n  mixBlendMode: null\n};\nexport default function extractStyles({\n  width,\n  height,\n  style\n}) {\n  const containerStyle = {\n    position: 'absolute',\n    zIndex: 0,\n    left: 0,\n    top: 0,\n    width,\n    height\n  };\n  const canvasStyle = {\n    left: 0,\n    top: 0\n  };\n\n  if (style) {\n    for (const key in style) {\n      if (key in CANVAS_ONLY_STYLES) {\n        canvasStyle[key] = style[key];\n      } else {\n        containerStyle[key] = style[key];\n      }\n    }\n  }\n\n  return {\n    containerStyle,\n    canvasStyle\n  };\n}\n//# sourceMappingURL=extract-styles.js.map","import { createElement, useRef, useState, useMemo, useEffect, useImperativeHandle, forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { Deck } from '@deck.gl/core';\nimport useIsomorphicLayoutEffect from './utils/use-isomorphic-layout-effect';\nimport extractJSXLayers from './utils/extract-jsx-layers';\nimport positionChildrenUnderViews from './utils/position-children-under-views';\nimport extractStyles from './utils/extract-styles';\n\nfunction getRefHandles(thisRef) {\n  const handles = {\n    pickObject: opts => thisRef.deck.pickObject(opts),\n    pickMultipleObjects: opts => thisRef.deck.pickMultipleObjects(opts),\n    pickObjects: opts => thisRef.deck.pickObjects(opts)\n  };\n  Object.defineProperty(handles, 'deck', {\n    get: () => thisRef.deck\n  });\n  return handles;\n}\n\nfunction redrawDeck(thisRef) {\n  if (thisRef.redrawReason) {\n    thisRef.deck._drawLayers(thisRef.redrawReason);\n\n    thisRef.redrawReason = null;\n  }\n}\n\nfunction createDeckInstance(thisRef, props) {\n  const DeckClass = props.Deck || Deck;\n  const deck = new DeckClass({ ...props,\n    style: null,\n    width: '100%',\n    height: '100%',\n    _customRender: redrawReason => {\n      thisRef.redrawReason = redrawReason;\n      const viewports = deck.viewManager.getViewports();\n\n      if (thisRef.lastRenderedViewports !== viewports) {\n        thisRef.forceUpdate(v => v + 1);\n      } else {\n        redrawDeck(thisRef);\n      }\n    }\n  });\n  return deck;\n}\n\nconst DeckGL = forwardRef((props, ref) => {\n  const _thisRef = useRef({});\n\n  const thisRef = _thisRef.current;\n  const [version, setVersion] = useState(0);\n  thisRef.forceUpdate = setVersion;\n  const containerRef = useRef(null);\n  const canvasRef = useRef(null);\n  const jsxProps = useMemo(() => extractJSXLayers(props), [props.layers, props.views, props.children]);\n  let inRender = true;\n\n  const handleViewStateChange = params => {\n    if (inRender && props.viewState) {\n      thisRef.viewStateUpdateRequested = params;\n      return null;\n    }\n\n    thisRef.viewStateUpdateRequested = null;\n    return props.onViewStateChange(params);\n  };\n\n  const handleInteractionStateChange = params => {\n    if (inRender) {\n      thisRef.interactionStateUpdateRequested = params;\n    } else {\n      thisRef.interactionStateUpdateRequested = null;\n      props.onInteractionStateChange(params);\n    }\n  };\n\n  const deckProps = useMemo(() => {\n    const forwardProps = { ...props,\n      style: null,\n      width: '100%',\n      height: '100%',\n      layers: jsxProps.layers,\n      views: jsxProps.views,\n      onViewStateChange: handleViewStateChange,\n      onInteractionStateChange: handleInteractionStateChange\n    };\n\n    if (thisRef.deck) {\n      thisRef.deck.setProps(forwardProps);\n    }\n\n    return forwardProps;\n  }, [props]);\n  useEffect(() => {\n    thisRef.deck = createDeckInstance(thisRef, { ...deckProps,\n      parent: containerRef.current,\n      canvas: canvasRef.current\n    });\n    return () => thisRef.deck.finalize();\n  }, []);\n  useIsomorphicLayoutEffect(() => {\n    redrawDeck(thisRef);\n    const {\n      viewStateUpdateRequested,\n      interactionStateUpdateRequested\n    } = thisRef;\n\n    if (viewStateUpdateRequested) {\n      handleViewStateChange(viewStateUpdateRequested);\n    }\n\n    if (interactionStateUpdateRequested) {\n      handleInteractionStateChange(interactionStateUpdateRequested);\n    }\n  });\n  useImperativeHandle(ref, () => getRefHandles(thisRef), []);\n  const {\n    viewManager\n  } = thisRef.deck || {};\n  const currentViewports = viewManager && viewManager.getViewports();\n  const {\n    ContextProvider,\n    width,\n    height,\n    id,\n    style\n  } = props;\n  const {\n    containerStyle,\n    canvasStyle\n  } = useMemo(() => extractStyles({\n    width,\n    height,\n    style\n  }), [width, height, style]);\n\n  if (!thisRef.viewStateUpdateRequested && thisRef.lastRenderedViewports === currentViewports || thisRef.version !== version) {\n      thisRef.lastRenderedViewports = currentViewports;\n      thisRef.version = version;\n      const childrenUnderViews = positionChildrenUnderViews({\n        children: jsxProps.children,\n        deck: thisRef.deck,\n        ContextProvider\n      });\n      const canvas = createElement('canvas', {\n        key: 'canvas',\n        id: id || 'deckgl-overlay',\n        ref: canvasRef,\n        style: canvasStyle\n      });\n      thisRef.control = createElement('div', {\n        id: \"\".concat(id || 'deckgl', \"-wrapper\"),\n        ref: containerRef,\n        style: containerStyle\n      }, [canvas, childrenUnderViews]);\n    }\n\n  inRender = false;\n  return thisRef.control;\n});\nDeckGL.propTypes = Deck.getPropTypes(PropTypes);\nDeckGL.defaultProps = Deck.defaultProps;\nexport default DeckGL;\n//# sourceMappingURL=deckgl.js.map","import { createElement } from 'react';\nimport { View } from '@deck.gl/core';\nimport { inheritsFrom } from './inherits-from';\nimport evaluateChildren from './evaluate-children';\nexport default function positionChildrenUnderViews({\n  children,\n  deck,\n  ContextProvider\n}) {\n  const {\n    viewManager\n  } = deck || {};\n\n  if (!viewManager || !viewManager.views.length) {\n    return [];\n  }\n\n  const views = {};\n  const defaultViewId = viewManager.views[0].id;\n\n  for (const child of children) {\n    let viewId = defaultViewId;\n    let viewChildren = child;\n\n    if (inheritsFrom(child.type, View)) {\n      viewId = child.props.id || defaultViewId;\n      viewChildren = child.props.children;\n    }\n\n    const viewport = viewManager.getViewport(viewId);\n    const viewState = viewManager.getViewState(viewId);\n\n    if (viewport) {\n      const {\n        x,\n        y,\n        width,\n        height\n      } = viewport;\n      viewChildren = evaluateChildren(viewChildren, {\n        x,\n        y,\n        width,\n        height,\n        viewport,\n        viewState\n      });\n\n      if (!views[viewId]) {\n        views[viewId] = {\n          viewport,\n          children: []\n        };\n      }\n\n      views[viewId].children.push(viewChildren);\n    }\n  }\n\n  return Object.keys(views).map(viewId => {\n    const {\n      viewport,\n      children: viewChildren\n    } = views[viewId];\n    const {\n      x,\n      y,\n      width,\n      height\n    } = viewport;\n    const style = {\n      position: 'absolute',\n      left: x,\n      top: y,\n      width,\n      height\n    };\n    const key = \"view-\".concat(viewId);\n    const viewElement = createElement('div', {\n      key,\n      id: key,\n      style\n    }, ...viewChildren);\n\n    if (ContextProvider) {\n      const contextValue = {\n        viewport,\n        container: deck.canvas.offsetParent,\n        eventManager: deck.eventManager,\n        onViewStateChange: params => {\n          params.viewId = viewId;\n\n          deck._onViewStateChange(params);\n        }\n      };\n      return createElement(ContextProvider, {\n        key,\n        value: contextValue\n      }, viewElement);\n    }\n\n    return viewElement;\n  });\n}\n//# sourceMappingURL=position-children-under-views.js.map","const isBoolean = x => typeof x === 'boolean';\n\nconst isFunction = x => typeof x === 'function';\n\nexport const isObject = x => x !== null && typeof x === 'object';\nexport const isPureObject = x => isObject(x) && x.constructor === {}.constructor;\nexport const isPromise = x => isObject(x) && isFunction(x.then);\nexport const isIterable = x => x && typeof x[Symbol.iterator] === 'function';\nexport const isAsyncIterable = x => x && typeof x[Symbol.asyncIterator] === 'function';\nexport const isIterator = x => x && isFunction(x.next);\nexport const isResponse = x => typeof Response !== 'undefined' && x instanceof Response || x && x.arrayBuffer && x.text && x.json;\nexport const isFile = x => typeof File !== 'undefined' && x instanceof File;\nexport const isBlob = x => typeof Blob !== 'undefined' && x instanceof Blob;\nexport const isWritableDOMStream = x => isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\nexport const isReadableDOMStream = x => typeof ReadableStream !== 'undefined' && x instanceof ReadableStream || isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.getReader);\nexport const isBuffer = x => x && typeof x === 'object' && x.isBuffer;\nexport const isWritableNodeStream = x => isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\nexport const isReadableNodeStream = x => isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\nexport const isReadableStream = x => isReadableDOMStream(x) || isReadableNodeStream(x);\nexport const isWritableStream = x => isWritableDOMStream(x) || isWritableNodeStream(x);\n//# sourceMappingURL=is-type.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loaders.gl assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nexport const isMobile = typeof window !== 'undefined' && typeof window.orientation !== 'undefined';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import { assert } from '../env-utils/assert';\nconst workerURLCache = new Map();\nexport function getLoadableWorkerURL(props) {\n  assert(props.source && !props.url || !props.source && props.url);\n  let workerURL = workerURLCache.get(props.source || props.url);\n\n  if (!workerURL) {\n    if (props.url) {\n      workerURL = getLoadableWorkerURLFromURL(props.url);\n      workerURLCache.set(props.url, workerURL);\n    }\n\n    if (props.source) {\n      workerURL = getLoadableWorkerURLFromSource(props.source);\n      workerURLCache.set(props.source, workerURL);\n    }\n  }\n\n  assert(workerURL);\n  return workerURL;\n}\n\nfunction getLoadableWorkerURLFromURL(url) {\n  if (!url.startsWith('http')) {\n    return url;\n  }\n\n  const workerSource = buildScriptSource(url);\n  return getLoadableWorkerURLFromSource(workerSource);\n}\n\nfunction getLoadableWorkerURLFromSource(workerSource) {\n  const blob = new Blob([workerSource], {\n    type: 'application/javascript'\n  });\n  return URL.createObjectURL(blob);\n}\n\nfunction buildScriptSource(workerUrl) {\n  return `\\\ntry {\n  importScripts('${workerUrl}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`;\n}\n//# sourceMappingURL=get-loadable-worker-url.js.map","export function getTransferList(object, recursive = true, transfers) {\n  const transfersSet = transfers || new Set();\n\n  if (!object) {} else if (isTransferable(object)) {\n    transfersSet.add(object);\n  } else if (isTransferable(object.buffer)) {\n    transfersSet.add(object.buffer);\n  } else if (ArrayBuffer.isView(object)) {} else if (recursive && typeof object === 'object') {\n    for (const key in object) {\n      getTransferList(object[key], recursive, transfersSet);\n    }\n  }\n\n  return transfers === undefined ? Array.from(transfersSet) : [];\n}\n\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n\n  if (object instanceof ArrayBuffer) {\n    return true;\n  }\n\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n\n  if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n    return true;\n  }\n\n  if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=get-transfer-list.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { assert } from '../env-utils/assert';\nimport { getLoadableWorkerURL } from '../worker-utils/get-loadable-worker-url';\nimport { getTransferList } from '../worker-utils/get-transfer-list';\n\nconst NOOP = () => {};\n\nexport default class WorkerThread {\n  static isSupported() {\n    return typeof Worker !== 'undefined';\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"source\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"terminated\", false);\n\n    _defineProperty(this, \"worker\", void 0);\n\n    _defineProperty(this, \"onMessage\", void 0);\n\n    _defineProperty(this, \"onError\", void 0);\n\n    _defineProperty(this, \"_loadableURL\", '');\n\n    const {\n      name,\n      source,\n      url\n    } = props;\n    assert(source || url);\n    this.name = name;\n    this.source = source;\n    this.url = url;\n    this.onMessage = NOOP;\n\n    this.onError = error => console.log(error);\n\n    this.worker = this._createBrowserWorker();\n  }\n\n  destroy() {\n    this.onMessage = NOOP;\n    this.onError = NOOP;\n    this.worker.terminate();\n    this.terminated = true;\n  }\n\n  get isRunning() {\n    return Boolean(this.onMessage);\n  }\n\n  postMessage(data, transferList) {\n    transferList = transferList || getTransferList(data);\n    this.worker.postMessage(data, transferList);\n  }\n\n  _getErrorFromErrorEvent(event) {\n    let message = 'Failed to load ';\n    message += `worker ${this.name}. `;\n\n    if (event.message) {\n      message += `${event.message} in `;\n    }\n\n    if (event.lineno) {\n      message += `:${event.lineno}:${event.colno}`;\n    }\n\n    return new Error(message);\n  }\n\n  _createBrowserWorker() {\n    this._loadableURL = getLoadableWorkerURL({\n      source: this.source,\n      url: this.url\n    });\n    const worker = new Worker(this._loadableURL, {\n      name: this.name\n    });\n\n    worker.onmessage = event => {\n      if (!event.data) {\n        this.onError(new Error('No data received'));\n      } else {\n        this.onMessage(event.data);\n      }\n    };\n\n    worker.onerror = error => {\n      this.onError(this._getErrorFromErrorEvent(error));\n      this.terminated = true;\n    };\n\n    worker.onmessageerror = event => console.error(event);\n\n    return worker;\n  }\n\n}\n//# sourceMappingURL=worker-thread.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { assert } from '../env-utils/assert';\nexport default class WorkerJob {\n  constructor(jobName, workerThread) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"workerThread\", void 0);\n\n    _defineProperty(this, \"isRunning\", void 0);\n\n    _defineProperty(this, \"result\", void 0);\n\n    _defineProperty(this, \"_resolve\", void 0);\n\n    _defineProperty(this, \"_reject\", void 0);\n\n    this.name = jobName;\n    this.workerThread = workerThread;\n    this.isRunning = true;\n\n    this._resolve = () => {};\n\n    this._reject = () => {};\n\n    this.result = new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  }\n\n  postMessage(type, payload) {\n    this.workerThread.postMessage({\n      source: 'loaders.gl',\n      type,\n      payload\n    });\n  }\n\n  done(value) {\n    assert(this.isRunning);\n    this.isRunning = false;\n\n    this._resolve(value);\n  }\n\n  error(error) {\n    assert(this.isRunning);\n    this.isRunning = false;\n\n    this._reject(error);\n  }\n\n}\n//# sourceMappingURL=worker-job.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { isMobile } from '../env-utils/globals';\nimport WorkerThread from './worker-thread';\nimport WorkerJob from './worker-job';\nexport default class WorkerPool {\n  constructor(props) {\n    _defineProperty(this, \"name\", 'unnamed');\n\n    _defineProperty(this, \"source\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"maxConcurrency\", 1);\n\n    _defineProperty(this, \"maxMobileConcurrency\", 1);\n\n    _defineProperty(this, \"onDebug\", () => {});\n\n    _defineProperty(this, \"reuseWorkers\", true);\n\n    _defineProperty(this, \"props\", {});\n\n    _defineProperty(this, \"jobQueue\", []);\n\n    _defineProperty(this, \"idleQueue\", []);\n\n    _defineProperty(this, \"count\", 0);\n\n    _defineProperty(this, \"isDestroyed\", false);\n\n    this.source = props.source;\n    this.url = props.url;\n    this.setProps(props);\n  }\n\n  destroy() {\n    this.idleQueue.forEach(worker => worker.destroy());\n    this.isDestroyed = true;\n  }\n\n  setProps(props) {\n    this.props = { ...this.props,\n      ...props\n    };\n\n    if (props.name !== undefined) {\n      this.name = props.name;\n    }\n\n    if (props.maxConcurrency !== undefined) {\n      this.maxConcurrency = props.maxConcurrency;\n    }\n\n    if (props.maxMobileConcurrency !== undefined) {\n      this.maxMobileConcurrency = props.maxMobileConcurrency;\n    }\n\n    if (props.reuseWorkers !== undefined) {\n      this.reuseWorkers = props.reuseWorkers;\n    }\n\n    if (props.onDebug !== undefined) {\n      this.onDebug = props.onDebug;\n    }\n  }\n\n  async startJob(name, onMessage = (job, type, data) => job.done(data), onError = (job, error) => job.error(error)) {\n    const startPromise = new Promise(onStart => {\n      this.jobQueue.push({\n        name,\n        onMessage,\n        onError,\n        onStart\n      });\n      return this;\n    });\n\n    this._startQueuedJob();\n\n    return await startPromise;\n  }\n\n  async _startQueuedJob() {\n    if (!this.jobQueue.length) {\n      return;\n    }\n\n    const workerThread = this._getAvailableWorker();\n\n    if (!workerThread) {\n      return;\n    }\n\n    const queuedJob = this.jobQueue.shift();\n\n    if (queuedJob) {\n      this.onDebug({\n        message: 'Starting job',\n        name: queuedJob.name,\n        workerThread,\n        backlog: this.jobQueue.length\n      });\n      const job = new WorkerJob(queuedJob.name, workerThread);\n\n      workerThread.onMessage = data => queuedJob.onMessage(job, data.type, data.payload);\n\n      workerThread.onError = error => queuedJob.onError(job, error);\n\n      queuedJob.onStart(job);\n\n      try {\n        await job.result;\n      } finally {\n        this.returnWorkerToQueue(workerThread);\n      }\n    }\n  }\n\n  returnWorkerToQueue(worker) {\n    const shouldDestroyWorker = this.isDestroyed || !this.reuseWorkers || this.count > this._getMaxConcurrency();\n\n    if (shouldDestroyWorker) {\n      worker.destroy();\n      this.count--;\n    } else {\n      this.idleQueue.push(worker);\n    }\n\n    if (!this.isDestroyed) {\n      this._startQueuedJob();\n    }\n  }\n\n  _getAvailableWorker() {\n    if (this.idleQueue.length > 0) {\n      return this.idleQueue.shift() || null;\n    }\n\n    if (this.count < this._getMaxConcurrency()) {\n      this.count++;\n      const name = `${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;\n      return new WorkerThread({\n        name,\n        source: this.source,\n        url: this.url\n      });\n    }\n\n    return null;\n  }\n\n  _getMaxConcurrency() {\n    return isMobile ? this.maxMobileConcurrency : this.maxConcurrency;\n  }\n\n}\n//# sourceMappingURL=worker-pool.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport WorkerPool from './worker-pool';\nimport WorkerThread from './worker-thread';\nconst DEFAULT_PROPS = {\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  onDebug: () => {},\n  reuseWorkers: true\n};\nexport default class WorkerFarm {\n  static isSupported() {\n    return WorkerThread.isSupported();\n  }\n\n  static getWorkerFarm(props = {}) {\n    WorkerFarm._workerFarm = WorkerFarm._workerFarm || new WorkerFarm({});\n\n    WorkerFarm._workerFarm.setProps(props);\n\n    return WorkerFarm._workerFarm;\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"workerPools\", new Map());\n\n    this.props = { ...DEFAULT_PROPS\n    };\n    this.setProps(props);\n    this.workerPools = new Map();\n  }\n\n  destroy() {\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.destroy();\n    }\n  }\n\n  setProps(props) {\n    this.props = { ...this.props,\n      ...props\n    };\n\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.setProps(this._getWorkerPoolProps());\n    }\n  }\n\n  getWorkerPool(options) {\n    const {\n      name,\n      source,\n      url\n    } = options;\n    let workerPool = this.workerPools.get(name);\n\n    if (!workerPool) {\n      workerPool = new WorkerPool({\n        name,\n        source,\n        url\n      });\n      workerPool.setProps(this._getWorkerPoolProps());\n      this.workerPools.set(name, workerPool);\n    }\n\n    return workerPool;\n  }\n\n  _getWorkerPoolProps() {\n    return {\n      maxConcurrency: this.props.maxConcurrency,\n      maxMobileConcurrency: this.props.maxMobileConcurrency,\n      reuseWorkers: this.props.reuseWorkers,\n      onDebug: this.props.onDebug\n    };\n  }\n\n}\n\n_defineProperty(WorkerFarm, \"_workerFarm\", void 0);\n//# sourceMappingURL=worker-farm.js.map","import { WorkerFarm, getWorkerURL } from '@loaders.gl/worker-utils';\nexport function canParseWithWorker(loader, options) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  return loader.worker && (options === null || options === void 0 ? void 0 : options.worker);\n}\nexport async function parseWithWorker(loader, data, options, context, parseOnMainThread) {\n  const name = loader.id;\n  const url = getWorkerURL(loader, options);\n  const workerFarm = WorkerFarm.getWorkerFarm(options);\n  const workerPool = workerFarm.getWorkerPool({\n    name,\n    url\n  });\n  options = JSON.parse(JSON.stringify(options));\n  const job = await workerPool.startJob('process-on-worker', onMessage.bind(null, parseOnMainThread));\n  job.postMessage('process', {\n    input: data,\n    options\n  });\n  const result = await job.result;\n  return await result.result;\n}\n\nasync function onMessage(parseOnMainThread, job, type, payload) {\n  switch (type) {\n    case 'done':\n      job.done(payload);\n      break;\n\n    case 'error':\n      job.error(payload.error);\n      break;\n\n    case 'process':\n      const {\n        id,\n        input,\n        options\n      } = payload;\n\n      try {\n        const result = await parseOnMainThread(input, options);\n        job.postMessage('done', {\n          id,\n          result\n        });\n      } catch (error) {\n        const message = error instanceof Error ? error.message : 'unknown error';\n        job.postMessage('error', {\n          id,\n          error: message\n        });\n      }\n\n      break;\n\n    default:\n      console.warn(`parse-with-worker unknown message ${type}`);\n  }\n}\n//# sourceMappingURL=parse-with-worker.js.map","import { assert } from '../env-utils/assert';\nimport { VERSION as __VERSION__ } from '../env-utils/version';\nconst NPM_TAG = 'latest';\nconst VERSION = typeof \"3.0.8\" !== 'undefined' ? \"3.0.8\" : NPM_TAG;\nexport function getWorkerName(worker) {\n  const warning = worker.version !== VERSION ? ` (worker-utils@${VERSION})` : '';\n  return `${worker.name}@${worker.version}${warning}`;\n}\nexport function getWorkerURL(worker, options = {}) {\n  const workerOptions = options[worker.id] || {};\n  const workerFile = `${worker.id}-worker.js`;\n  let url = workerOptions.workerUrl;\n\n  if (options._workerType === 'test') {\n    url = `modules/${worker.module}/dist/${workerFile}`;\n  }\n\n  if (!url) {\n    let version = worker.version;\n\n    if (version === 'latest') {\n      version = NPM_TAG;\n    }\n\n    const versionTag = version ? `@${version}` : '';\n    url = `https://unpkg.com/@loaders.gl/${worker.module}${versionTag}/dist/${workerFile}`;\n  }\n\n  assert(url);\n  return url;\n}\n//# sourceMappingURL=get-worker-url.js.map","import * as node from '../node/buffer-utils.node';\nexport function toArrayBuffer(data) {\n  if (node.toArrayBuffer) {\n    data = node.toArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    const text = data;\n    const uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  if (data && typeof data === 'object' && data._toArrayBuffer) {\n    return data._toArrayBuffer();\n  }\n\n  throw new Error('toArrayBuffer');\n}\nexport function compareArrayBuffers(arrayBuffer1, arrayBuffer2, byteLength) {\n  byteLength = byteLength || arrayBuffer1.byteLength;\n\n  if (arrayBuffer1.byteLength < byteLength || arrayBuffer2.byteLength < byteLength) {\n    return false;\n  }\n\n  const array1 = new Uint8Array(arrayBuffer1);\n  const array2 = new Uint8Array(arrayBuffer2);\n\n  for (let i = 0; i < array1.length; ++i) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function concatenateArrayBuffers(...sources) {\n  const sourceArrays = sources.map(source2 => source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2);\n  const byteLength = sourceArrays.reduce((length, typedArray) => length + typedArray.byteLength, 0);\n  const result = new Uint8Array(byteLength);\n  let offset = 0;\n\n  for (const sourceArray of sourceArrays) {\n    result.set(sourceArray, offset);\n    offset += sourceArray.byteLength;\n  }\n\n  return result.buffer;\n}\nexport function concatenateTypedArrays(...typedArrays) {\n  const arrays = typedArrays;\n  const TypedArrayConstructor = arrays && arrays.length > 1 && arrays[0].constructor || null;\n\n  if (!TypedArrayConstructor) {\n    throw new Error('\"concatenateTypedArrays\" - incorrect quantity of arguments or arguments have incompatible data types');\n  }\n\n  const sumLength = arrays.reduce((acc, value) => acc + value.length, 0);\n  const result = new TypedArrayConstructor(sumLength);\n  let offset = 0;\n\n  for (const array of arrays) {\n    result.set(array, offset);\n    offset += array.length;\n  }\n\n  return result;\n}\nexport function sliceArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  const subArray = byteLength !== undefined ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength) : new Uint8Array(arrayBuffer).subarray(byteOffset);\n  const arrayCopy = new Uint8Array(subArray);\n  return arrayCopy.buffer;\n}\n//# sourceMappingURL=array-buffer-utils.js.map","const DEFAULT_CHUNK_SIZE = 256 * 1024;\nexport function* makeArrayBufferIterator(arrayBuffer, options = {}) {\n  const {\n    chunkSize = DEFAULT_CHUNK_SIZE\n  } = options;\n  let byteOffset = 0;\n\n  while (byteOffset < arrayBuffer.byteLength) {\n    const chunkByteLength = Math.min(arrayBuffer.byteLength - byteOffset, chunkSize);\n    const chunk = new ArrayBuffer(chunkByteLength);\n    const sourceArray = new Uint8Array(arrayBuffer, byteOffset, chunkByteLength);\n    const chunkArray = new Uint8Array(chunk);\n    chunkArray.set(sourceArray);\n    byteOffset += chunkByteLength;\n    yield chunk;\n  }\n}\n//# sourceMappingURL=make-array-buffer-iterator.js.map","import { isBrowser, toArrayBuffer } from '@loaders.gl/loader-utils';\nexport function makeStreamIterator(stream, options) {\n  return isBrowser ? makeBrowserStreamIterator(stream, options) : makeNodeStreamIterator(stream, options);\n}\n\nasync function* makeBrowserStreamIterator(stream, options) {\n  const reader = stream.getReader();\n  let nextBatchPromise;\n\n  try {\n    while (true) {\n      const currentBatchPromise = nextBatchPromise || reader.read();\n\n      if (options !== null && options !== void 0 && options._streamReadAhead) {\n        nextBatchPromise = reader.read();\n      }\n\n      const {\n        done,\n        value\n      } = await currentBatchPromise;\n\n      if (done) {\n        return;\n      }\n\n      yield toArrayBuffer(value);\n    }\n  } catch (error) {\n    reader.releaseLock();\n  }\n}\n\nasync function* makeNodeStreamIterator(stream, options) {\n  for await (const chunk of stream) {\n    yield toArrayBuffer(chunk);\n  }\n}\n//# sourceMappingURL=make-stream-iterator.js.map","import { concatenateArrayBuffersAsync } from '@loaders.gl/loader-utils';\nimport { isResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isBlob, isBuffer } from '../../javascript-utils/is-type';\nimport { makeIterator } from '../../iterators/make-iterator/make-iterator';\nimport { checkResponse, makeResponse } from '../utils/response-utils';\nconst ERR_DATA = 'Cannot convert supplied data type';\nexport function getArrayBufferOrStringFromDataSync(data, loader, options) {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (isBuffer(data)) {\n    data = data.buffer;\n  }\n\n  if (data instanceof ArrayBuffer) {\n    const arrayBuffer = data;\n\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n\n    return arrayBuffer;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(data);\n    }\n\n    let arrayBuffer = data.buffer;\n    const byteLength = data.byteLength || data.length;\n\n    if (data.byteOffset !== 0 || byteLength !== arrayBuffer.byteLength) {\n      arrayBuffer = arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n    }\n\n    return arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport async function getArrayBufferOrStringFromData(data, loader, options) {\n  const isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n\n  if (typeof data === 'string' || isArrayBuffer) {\n    return getArrayBufferOrStringFromDataSync(data, loader, options);\n  }\n\n  if (isBlob(data)) {\n    data = await makeResponse(data);\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    await checkResponse(response);\n    return loader.binary ? await response.arrayBuffer() : await response.text();\n  }\n\n  if (isReadableStream(data)) {\n    data = makeIterator(data, options);\n  }\n\n  if (isIterable(data) || isAsyncIterable(data)) {\n    return concatenateArrayBuffersAsync(data);\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport async function getAsyncIterableFromData(data, options) {\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    await checkResponse(response);\n    const body = await response.body;\n    return makeIterator(body, options);\n  }\n\n  if (isBlob(data) || isReadableStream(data)) {\n    return makeIterator(data, options);\n  }\n\n  if (isAsyncIterable(data)) {\n    return data[Symbol.asyncIterator]();\n  }\n\n  return getIterableFromData(data);\n}\nexport async function getReadableStream(data) {\n  if (isReadableStream(data)) {\n    return data;\n  }\n\n  if (isResponse(data)) {\n    return data.body;\n  }\n\n  const response = await makeResponse(data);\n  return response.body;\n}\n\nfunction getIterableFromData(data) {\n  if (ArrayBuffer.isView(data)) {\n    return function* oneChunk() {\n      yield data.buffer;\n    }();\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return function* oneChunk() {\n      yield data;\n    }();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}\n//# sourceMappingURL=get-data.js.map","import { makeStringIterator } from './make-string-iterator';\nimport { makeArrayBufferIterator } from './make-array-buffer-iterator';\nimport { makeBlobIterator } from './make-blob-iterator';\nimport { makeStreamIterator } from './make-stream-iterator';\nimport { isBlob, isReadableStream, isResponse } from '../../javascript-utils/is-type';\nexport function makeIterator(data, options) {\n  if (typeof data === 'string') {\n    return makeStringIterator(data, options);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return makeArrayBufferIterator(data, options);\n  }\n\n  if (isBlob(data)) {\n    return makeBlobIterator(data, options);\n  }\n\n  if (isReadableStream(data)) {\n    return makeStreamIterator(data, options);\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    return makeStreamIterator(response.body, options);\n  }\n\n  throw new Error('makeIterator');\n}\n//# sourceMappingURL=make-iterator.js.map","const DEFAULT_CHUNK_SIZE = 256 * 1024;\nexport function* makeStringIterator(string, options) {\n  const chunkSize = (options === null || options === void 0 ? void 0 : options.chunkSize) || DEFAULT_CHUNK_SIZE;\n  let offset = 0;\n  const textEncoder = new TextEncoder();\n\n  while (offset < string.length) {\n    const chunkLength = Math.min(string.length - offset, chunkSize);\n    const chunk = string.slice(offset, offset + chunkLength);\n    offset += chunkLength;\n    yield textEncoder.encode(chunk);\n  }\n}\n//# sourceMappingURL=make-string-iterator.js.map","const DEFAULT_CHUNK_SIZE = 1024 * 1024;\nexport async function* makeBlobIterator(blob, options) {\n  const chunkSize = (options === null || options === void 0 ? void 0 : options.chunkSize) || DEFAULT_CHUNK_SIZE;\n  let offset = 0;\n\n  while (offset < blob.size) {\n    const end = offset + chunkSize;\n    const chunk = await blob.slice(offset, end).arrayBuffer();\n    offset = end;\n    yield chunk;\n  }\n}\n//# sourceMappingURL=make-blob-iterator.js.map","import { concatenateArrayBuffers } from '../binary-utils/array-buffer-utils';\nexport async function forEach(iterator, visitor) {\n  while (true) {\n    const {\n      done,\n      value\n    } = await iterator.next();\n\n    if (done) {\n      iterator.return();\n      return;\n    }\n\n    const cancel = visitor(value);\n\n    if (cancel) {\n      return;\n    }\n  }\n}\nexport async function concatenateArrayBuffersAsync(asyncIterator) {\n  const arrayBuffers = [];\n\n  for await (const chunk of asyncIterator) {\n    arrayBuffers.push(chunk);\n  }\n\n  return concatenateArrayBuffers(...arrayBuffers);\n}\nexport async function concatenateStringsAsync(asyncIterator) {\n  const strings = [];\n\n  for await (const chunk of asyncIterator) {\n    strings.push(chunk);\n  }\n\n  return strings.join('');\n}\n//# sourceMappingURL=async-iteration.js.map","import { compareArrayBuffers } from '@loaders.gl/loader-utils';\nimport { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { getRegisteredLoaders } from './register-loaders';\nimport { isBlob } from '../../javascript-utils/is-type';\nconst EXT_PATTERN = /\\.([^.]+)$/;\nexport async function selectLoader(data, loaders = [], options, context) {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  let loader = selectLoaderSync(data, loaders, { ...options,\n    nothrow: true\n  }, context);\n\n  if (loader) {\n    return loader;\n  }\n\n  if (isBlob(data)) {\n    data = await data.slice(0, 10).arrayBuffer();\n    loader = selectLoaderSync(data, loaders, options, context);\n  }\n\n  if (!loader && !(options !== null && options !== void 0 && options.nothrow)) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\nexport function selectLoaderSync(data, loaders = [], options, context) {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  if (loaders && !Array.isArray(loaders)) {\n    return normalizeLoader(loaders);\n  }\n\n  let candidateLoaders = [];\n\n  if (loaders) {\n    candidateLoaders = candidateLoaders.concat(loaders);\n  }\n\n  if (!(options !== null && options !== void 0 && options.ignoreRegisteredLoaders)) {\n    candidateLoaders.push(...getRegisteredLoaders());\n  }\n\n  normalizeLoaders(candidateLoaders);\n  const loader = selectLoaderInternal(data, candidateLoaders, options, context);\n\n  if (!loader && !(options !== null && options !== void 0 && options.nothrow)) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\n\nfunction selectLoaderInternal(data, loaders, options, context) {\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(data);\n  const testUrl = url || (context === null || context === void 0 ? void 0 : context.url);\n  let loader = null;\n\n  if (options !== null && options !== void 0 && options.mimeType) {\n    loader = findLoaderByMIMEType(loaders, options === null || options === void 0 ? void 0 : options.mimeType);\n  }\n\n  loader = loader || findLoaderByUrl(loaders, testUrl);\n  loader = loader || findLoaderByMIMEType(loaders, type);\n  loader = loader || findLoaderByInitialBytes(loaders, data);\n  loader = loader || findLoaderByMIMEType(loaders, options === null || options === void 0 ? void 0 : options.fallbackMimeType);\n  return loader;\n}\n\nfunction validHTTPResponse(data) {\n  if (data instanceof Response) {\n    if (data.status === 204) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getNoValidLoaderMessage(data) {\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(data);\n  let message = 'No valid loader found';\n\n  if (data) {\n    message += ` data: \"${getFirstCharacters(data)}\", contentType: \"${type}\"`;\n  }\n\n  if (url) {\n    message += ` url: ${url}`;\n  }\n\n  return message;\n}\n\nfunction normalizeLoaders(loaders) {\n  for (const loader of loaders) {\n    normalizeLoader(loader);\n  }\n}\n\nfunction findLoaderByUrl(loaders, url) {\n  const match = url && EXT_PATTERN.exec(url);\n  const extension = match && match[1];\n  return extension ? findLoaderByExtension(loaders, extension) : null;\n}\n\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n\n  for (const loader of loaders) {\n    for (const loaderExtension of loader.extensions) {\n      if (loaderExtension.toLowerCase() === extension) {\n        return loader;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByMIMEType(loaders, mimeType) {\n  for (const loader of loaders) {\n    if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n      return loader;\n    }\n\n    if (mimeType === `application/x.${loader.id}`) {\n      return loader;\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByInitialBytes(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  for (const loader of loaders) {\n    if (typeof data === 'string') {\n      if (testDataAgainstText(data, loader)) {\n        return loader;\n      }\n    } else if (ArrayBuffer.isView(data)) {\n      if (testDataAgainstBinary(data.buffer, data.byteOffset, loader)) {\n        return loader;\n      }\n    } else if (data instanceof ArrayBuffer) {\n      const byteOffset = 0;\n\n      if (testDataAgainstBinary(data, byteOffset, loader)) {\n        return loader;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction testDataAgainstText(data, loader) {\n  if (loader.testText) {\n    return loader.testText(data);\n  }\n\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(test => data.startsWith(test));\n}\n\nfunction testDataAgainstBinary(data, byteOffset, loader) {\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(test => testBinary(data, byteOffset, loader, test));\n}\n\nfunction testBinary(data, byteOffset, loader, test) {\n  if (test instanceof ArrayBuffer) {\n    return compareArrayBuffers(test, data, test.byteLength);\n  }\n\n  switch (typeof test) {\n    case 'function':\n      return test(data, loader);\n\n    case 'string':\n      const magic = getMagicString(data, byteOffset, test.length);\n      return test === magic;\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data, length = 5) {\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    const byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength < byteOffset + length) {\n    return '';\n  }\n\n  const dataView = new DataView(arrayBuffer);\n  let magic = '';\n\n  for (let i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}\n//# sourceMappingURL=select-loader.js.map","import { assert, validateWorkerVersion } from '@loaders.gl/worker-utils';\nimport { parseWithWorker, canParseWithWorker } from '@loaders.gl/loader-utils';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { normalizeOptions } from '../loader-utils/option-utils';\nimport { getArrayBufferOrStringFromData } from '../loader-utils/get-data';\nimport { getLoaderContext, getLoadersFromContext } from '../loader-utils/loader-context';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { selectLoader } from './select-loader';\nexport async function parse(data, loaders, options, context) {\n  assert(!context || typeof context === 'object');\n\n  if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined;\n    options = loaders;\n    loaders = undefined;\n  }\n\n  data = await data;\n  options = options || {};\n  const {\n    url\n  } = getResourceUrlAndType(data);\n  const typedLoaders = loaders;\n  const candidateLoaders = getLoadersFromContext(typedLoaders, context);\n  const loader = await selectLoader(data, candidateLoaders, options);\n\n  if (!loader) {\n    return null;\n  }\n\n  options = normalizeOptions(options, loader, candidateLoaders, url);\n  context = getLoaderContext({\n    url,\n    parse,\n    loaders: candidateLoaders\n  }, options, context);\n  return await parseWithLoader(loader, data, options, context);\n}\n\nasync function parseWithLoader(loader, data, options, context) {\n  validateWorkerVersion(loader);\n  data = await getArrayBufferOrStringFromData(data, loader, options);\n\n  if (loader.parseTextSync && typeof data === 'string') {\n    options.dataType = 'text';\n    return loader.parseTextSync(data, options, context, loader);\n  }\n\n  if (canParseWithWorker(loader, options)) {\n    return await parseWithWorker(loader, data, options, context, parse);\n  }\n\n  if (loader.parseText && typeof data === 'string') {\n    return await loader.parseText(data, options, context, loader);\n  }\n\n  if (loader.parse) {\n    return await loader.parse(data, options, context, loader);\n  }\n\n  assert(!loader.parseSync);\n  throw new Error(`${loader.id} loader - no parser found and worker is disabled`);\n}\n//# sourceMappingURL=parse.js.map","import { getFetchFunction } from './option-utils';\nexport function getLoaderContext(context, options, previousContext = null) {\n  if (previousContext) {\n    return previousContext;\n  }\n\n  const resolvedContext = {\n    fetch: getFetchFunction(options, context),\n    ...context\n  };\n\n  if (!Array.isArray(resolvedContext.loaders)) {\n    resolvedContext.loaders = null;\n  }\n\n  return resolvedContext;\n}\nexport function getLoadersFromContext(loaders, context) {\n  if (!context && loaders && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  let candidateLoaders;\n\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n\n  if (context && context.loaders) {\n    const contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [...candidateLoaders, ...contextLoaders] : contextLoaders;\n  }\n\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}\n//# sourceMappingURL=loader-context.js.map","import { assert } from '../env-utils/assert';\nimport { VERSION } from '../env-utils/version';\nexport function validateWorkerVersion(worker, coreVersion = VERSION) {\n  assert(worker, 'no worker provided');\n  const workerVersion = worker.version;\n\n  if (!coreVersion || !workerVersion) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction parseVersion(version) {\n  const parts = version.split('.').map(Number);\n  return {\n    major: parts[0],\n    minor: parts[1]\n  };\n}\n//# sourceMappingURL=validate-worker-version.js.map","const DEFAULT_VERSION = 'beta';\nexport const VERSION = typeof \"3.0.8\" !== 'undefined' ? \"3.0.8\" : DEFAULT_VERSION;\n\nif (typeof \"3.0.8\" === 'undefined') {\n  console.error('loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN.');\n}\n//# sourceMappingURL=version.js.map","import { isBlob } from '../../javascript-utils/is-type';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { getFetchFunction } from '../loader-utils/option-utils';\nimport { parse } from './parse';\nexport async function load(url, loaders, options, context) {\n  if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined;\n    options = loaders;\n    loaders = undefined;\n  }\n\n  const fetch = getFetchFunction(options);\n  let data = url;\n\n  if (typeof url === 'string') {\n    data = await fetch(url);\n  }\n\n  if (isBlob(url)) {\n    data = await fetch(url);\n  }\n\n  return await parse(data, loaders, options);\n}\n//# sourceMappingURL=load.js.map","import { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getGlobalLoaderState } from '../loader-utils/option-utils';\n\nconst getGlobalLoaderRegistry = () => {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = state.loaderRegistry || [];\n  return state.loaderRegistry;\n};\n\nexport function registerLoaders(loaders) {\n  const loaderRegistry = getGlobalLoaderRegistry();\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n\n  for (const loader of loaders) {\n    const normalizedLoader = normalizeLoader(loader);\n\n    if (!loaderRegistry.find(registeredLoader => normalizedLoader === registeredLoader)) {\n      loaderRegistry.unshift(normalizedLoader);\n    }\n  }\n}\nexport function getRegisteredLoaders() {\n  return getGlobalLoaderRegistry();\n}\nexport function _unregisterLoaders() {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = [];\n}\n//# sourceMappingURL=register-loaders.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n  var _loader;\n\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  const hasExtensions = Array.isArray((_loader = loader) === null || _loader === void 0 ? void 0 : _loader.extensions);\n  return hasExtensions;\n}\nexport function normalizeLoader(loader) {\n  var _loader2, _loader3;\n\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n  let options;\n\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = { ...loader,\n      options: { ...loader.options,\n        ...options\n      }\n    };\n  }\n\n  if ((_loader2 = loader) !== null && _loader2 !== void 0 && _loader2.parseTextSync || (_loader3 = loader) !== null && _loader3 !== void 0 && _loader3.parseText) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}\n//# sourceMappingURL=normalize-loader.js.map","let pathPrefix = '';\nconst fileAliases = {};\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function getPathPrefix() {\n  return pathPrefix;\n}\nexport function addAliases(aliases) {\n  Object.assign(fileAliases, aliases);\n}\nexport function resolvePath(filename) {\n  for (const alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      const replacement = fileAliases[alias];\n      filename = filename.replace(alias, replacement);\n    }\n  }\n\n  if (!filename.startsWith('http://') && !filename.startsWith('https://')) {\n    filename = `${pathPrefix}${filename}`;\n  }\n\n  return filename;\n}\n//# sourceMappingURL=file-aliases.js.map","import { resolvePath } from '@loaders.gl/loader-utils';\nimport { makeResponse } from '../utils/response-utils';\nexport async function fetchFile(url, options) {\n  if (typeof url === 'string') {\n    url = resolvePath(url);\n    let fetchOptions = options;\n\n    if (options !== null && options !== void 0 && options.fetch && typeof (options === null || options === void 0 ? void 0 : options.fetch) !== 'function') {\n      fetchOptions = options.fetch;\n    }\n\n    return await fetch(url, fetchOptions);\n  }\n\n  return await makeResponse(url);\n}\n//# sourceMappingURL=fetch-file.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Log } from 'probe.gl';\nexport const probeLog = new Log({\n  id: 'loaders.gl'\n});\nexport class NullLog {\n  log() {\n    return () => {};\n  }\n\n  info() {\n    return () => {};\n  }\n\n  warn() {\n    return () => {};\n  }\n\n  error() {\n    return () => {};\n  }\n\n}\nexport class ConsoleLog {\n  constructor() {\n    _defineProperty(this, \"console\", void 0);\n\n    this.console = console;\n  }\n\n  log(...args) {\n    return this.console.log.bind(this.console, ...args);\n  }\n\n  info(...args) {\n    return this.console.info.bind(this.console, ...args);\n  }\n\n  warn(...args) {\n    return this.console.warn.bind(this.console, ...args);\n  }\n\n  error(...args) {\n    return this.console.error.bind(this.console, ...args);\n  }\n\n}\n//# sourceMappingURL=loggers.js.map","import { ConsoleLog } from './loggers';\nexport const DEFAULT_LOADER_OPTIONS = {\n  fetch: null,\n  mimeType: undefined,\n  nothrow: false,\n  log: new ConsoleLog(),\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true,\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  reuseWorkers: true,\n  _workerType: '',\n  limit: 0,\n  _limitMB: 0,\n  batchSize: 'auto',\n  batchDebounceMs: 0,\n  metadata: false,\n  transforms: []\n};\nexport const REMOVED_LOADER_OPTIONS = {\n  throws: 'nothrow',\n  dataType: '(no longer used)',\n  uri: 'baseUri',\n  method: 'fetch.method',\n  headers: 'fetch.headers',\n  body: 'fetch.body',\n  mode: 'fetch.mode',\n  credentials: 'fetch.credentials',\n  cache: 'fetch.cache',\n  redirect: 'fetch.redirect',\n  referrer: 'fetch.referrer',\n  referrerPolicy: 'fetch.referrerPolicy',\n  integrity: 'fetch.integrity',\n  keepalive: 'fetch.keepalive',\n  signal: 'fetch.signal'\n};\n//# sourceMappingURL=option-defaults.js.map","import { global } from '@loaders.gl/loader-utils';\nimport { isPureObject, isObject } from '../../javascript-utils/is-type';\nimport { fetchFile } from '../fetch/fetch-file';\nimport { probeLog, NullLog } from './loggers';\nimport { DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS } from './option-defaults';\nexport function getGlobalLoaderState() {\n  global.loaders = global.loaders || {};\n  const {\n    loaders\n  } = global;\n  loaders._state = loaders._state || {};\n  return loaders._state;\n}\n\nconst getGlobalLoaderOptions = () => {\n  const state = getGlobalLoaderState();\n  state.globalOptions = state.globalOptions || { ...DEFAULT_LOADER_OPTIONS\n  };\n  return state.globalOptions;\n};\n\nexport function setGlobalOptions(options) {\n  const state = getGlobalLoaderState();\n  const globalOptions = getGlobalLoaderOptions();\n  state.globalOptions = normalizeOptionsInternal(globalOptions, options);\n}\nexport function normalizeOptions(options, loader, loaders, url) {\n  loaders = loaders || [];\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n  validateOptions(options, loaders);\n  return normalizeOptionsInternal(loader, options, url);\n}\nexport function getFetchFunction(options, context) {\n  const globalOptions = getGlobalLoaderOptions();\n  const fetchOptions = options || globalOptions;\n\n  if (typeof fetchOptions.fetch === 'function') {\n    return fetchOptions.fetch;\n  }\n\n  if (isObject(fetchOptions.fetch)) {\n    return url => fetchFile(url, fetchOptions);\n  }\n\n  if (context !== null && context !== void 0 && context.fetch) {\n    return context === null || context === void 0 ? void 0 : context.fetch;\n  }\n\n  return fetchFile;\n}\n\nfunction validateOptions(options, loaders) {\n  validateOptionsObject(options, null, DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS, loaders);\n\n  for (const loader of loaders) {\n    const idOptions = options && options[loader.id] || {};\n    const loaderOptions = loader.options && loader.options[loader.id] || {};\n    const deprecatedOptions = loader.deprecatedOptions && loader.deprecatedOptions[loader.id] || {};\n    validateOptionsObject(idOptions, loader.id, loaderOptions, deprecatedOptions, loaders);\n  }\n}\n\nfunction validateOptionsObject(options, id, defaultOptions, deprecatedOptions, loaders) {\n  const loaderName = id || 'Top level';\n  const prefix = id ? `${id}.` : '';\n\n  for (const key in options) {\n    const isSubOptions = !id && isObject(options[key]);\n    const isBaseUriOption = key === 'baseUri' && !id;\n    const isWorkerUrlOption = key === 'workerUrl' && id;\n\n    if (!(key in defaultOptions) && !isBaseUriOption && !isWorkerUrlOption) {\n      if (key in deprecatedOptions) {\n        probeLog.warn(`${loaderName} loader option \\'${prefix}${key}\\' no longer supported, use \\'${deprecatedOptions[key]}\\'`)();\n      } else if (!isSubOptions) {\n        const suggestion = findSimilarOption(key, loaders);\n        probeLog.warn(`${loaderName} loader option \\'${prefix}${key}\\' not recognized. ${suggestion}`)();\n      }\n    }\n  }\n}\n\nfunction findSimilarOption(optionKey, loaders) {\n  const lowerCaseOptionKey = optionKey.toLowerCase();\n  let bestSuggestion = '';\n\n  for (const loader of loaders) {\n    for (const key in loader.options) {\n      if (optionKey === key) {\n        return `Did you mean \\'${loader.id}.${key}\\'?`;\n      }\n\n      const lowerCaseKey = key.toLowerCase();\n      const isPartialMatch = lowerCaseOptionKey.startsWith(lowerCaseKey) || lowerCaseKey.startsWith(lowerCaseOptionKey);\n\n      if (isPartialMatch) {\n        bestSuggestion = bestSuggestion || `Did you mean \\'${loader.id}.${key}\\'?`;\n      }\n    }\n  }\n\n  return bestSuggestion;\n}\n\nfunction normalizeOptionsInternal(loader, options, url) {\n  const loaderDefaultOptions = loader.options || {};\n  const mergedOptions = { ...loaderDefaultOptions\n  };\n  addUrlOptions(mergedOptions, url);\n\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, getGlobalLoaderOptions());\n  mergeNestedFields(mergedOptions, options);\n  return mergedOptions;\n}\n\nfunction mergeNestedFields(mergedOptions, options) {\n  for (const key in options) {\n    if (key in options) {\n      const value = options[key];\n\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = { ...mergedOptions[key],\n          ...options[key]\n        };\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n  }\n}\n\nfunction addUrlOptions(options, url) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}\n//# sourceMappingURL=option-utils.js.map","const DATA_URL_PATTERN = /^data:([-\\w.]+\\/[-\\w.+]+)(;|,)/;\nconst MIME_TYPE_PATTERN = /^([-\\w.]+\\/[-\\w.+]+)/;\nexport function parseMIMEType(mimeString) {\n  const matches = MIME_TYPE_PATTERN.exec(mimeString);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return mimeString;\n}\nexport function parseMIMETypeFromURL(url) {\n  const matches = DATA_URL_PATTERN.exec(url);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return '';\n}\n//# sourceMappingURL=mime-type-utils.js.map","import { isResponse, isBlob } from '../../javascript-utils/is-type';\nimport { parseMIMEType, parseMIMETypeFromURL } from './mime-type-utils';\nconst QUERY_STRING_PATTERN = /\\?.*/;\nexport function getResourceUrlAndType(resource) {\n  if (isResponse(resource)) {\n    const url = stripQueryString(resource.url || '');\n    const contentTypeHeader = resource.headers.get('content-type') || '';\n    return {\n      url,\n      type: parseMIMEType(contentTypeHeader) || parseMIMETypeFromURL(url)\n    };\n  }\n\n  if (isBlob(resource)) {\n    return {\n      url: stripQueryString(resource.name || ''),\n      type: resource.type || ''\n    };\n  }\n\n  if (typeof resource === 'string') {\n    return {\n      url: stripQueryString(resource),\n      type: parseMIMETypeFromURL(resource)\n    };\n  }\n\n  return {\n    url: '',\n    type: ''\n  };\n}\nexport function getResourceContentLength(resource) {\n  if (isResponse(resource)) {\n    return resource.headers['content-length'] || -1;\n  }\n\n  if (isBlob(resource)) {\n    return resource.size;\n  }\n\n  if (typeof resource === 'string') {\n    return resource.length;\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    return resource.byteLength;\n  }\n\n  if (ArrayBuffer.isView(resource)) {\n    return resource.byteLength;\n  }\n\n  return -1;\n}\n\nfunction stripQueryString(url) {\n  return url.replace(QUERY_STRING_PATTERN, '');\n}\n//# sourceMappingURL=resource-utils.js.map","import { isResponse } from '../../javascript-utils/is-type';\nimport { getResourceContentLength, getResourceUrlAndType } from './resource-utils';\nexport async function makeResponse(resource) {\n  if (isResponse(resource)) {\n    return resource;\n  }\n\n  const headers = {};\n  const contentLength = getResourceContentLength(resource);\n\n  if (contentLength >= 0) {\n    headers['content-length'] = String(contentLength);\n  }\n\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(resource);\n\n  if (type) {\n    headers['content-type'] = type;\n  }\n\n  const initialDataUrl = await getInitialDataUrl(resource);\n\n  if (initialDataUrl) {\n    headers['x-first-bytes'] = initialDataUrl;\n  }\n\n  if (typeof resource === 'string') {\n    resource = new TextEncoder().encode(resource);\n  }\n\n  const response = new Response(resource, {\n    headers\n  });\n  Object.defineProperty(response, 'url', {\n    value: url\n  });\n  return response;\n}\nexport async function checkResponse(response) {\n  if (!response.ok) {\n    const message = await getResponseError(response);\n    throw new Error(message);\n  }\n}\nexport function checkResponseSync(response) {\n  if (!response.ok) {\n    let message = `${response.status} ${response.statusText}`;\n    message = message.length > 60 ? `${message.slice(60)}...` : message;\n    throw new Error(message);\n  }\n}\n\nasync function getResponseError(response) {\n  let message = `Failed to fetch resource ${response.url} (${response.status}): `;\n\n  try {\n    const contentType = response.headers.get('Content-Type');\n    let text = response.statusText;\n\n    if (contentType.includes('application/json')) {\n      text += ` ${await response.text()}`;\n    }\n\n    message += text;\n    message = message.length > 60 ? `${message.slice(60)}...` : message;\n  } catch (error) {}\n\n  return message;\n}\n\nasync function getInitialDataUrl(resource) {\n  const INITIAL_DATA_LENGTH = 5;\n\n  if (typeof resource === 'string') {\n    return `data:,${resource.slice(0, INITIAL_DATA_LENGTH)}`;\n  }\n\n  if (resource instanceof Blob) {\n    const blobSlice = resource.slice(0, 5);\n    return await new Promise(resolve => {\n      const reader = new FileReader();\n\n      reader.onload = event => {\n        var _event$target;\n\n        return resolve(event === null || event === void 0 ? void 0 : (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.result);\n      };\n\n      reader.readAsDataURL(blobSlice);\n    });\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    const slice = resource.slice(0, INITIAL_DATA_LENGTH);\n    const base64 = arrayBufferToBase64(slice);\n    return `data:base64,${base64}`;\n  }\n\n  return null;\n}\n\nfunction arrayBufferToBase64(buffer) {\n  let binary = '';\n  const bytes = new Uint8Array(buffer);\n\n  for (let i = 0; i < bytes.byteLength; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n\n  return btoa(binary);\n}\n//# sourceMappingURL=response-utils.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n//# sourceMappingURL=assert.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global;\nconst window_ = globals.window || globals.self || globals.global;\nconst global_ = globals.global || globals.self || globals.window;\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import { global, isBrowser } from '../utils/globals';\nconst {\n  _parseImageNode\n} = global;\nconst IMAGE_SUPPORTED = typeof Image !== 'undefined';\nconst IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nconst NODE_IMAGE_SUPPORTED = Boolean(_parseImageNode);\nconst DATA_SUPPORTED = isBrowser ? true : NODE_IMAGE_SUPPORTED;\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'auto':\n      return IMAGE_BITMAP_SUPPORTED || IMAGE_SUPPORTED || DATA_SUPPORTED;\n\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'image':\n      return IMAGE_SUPPORTED;\n\n    case 'data':\n      return DATA_SUPPORTED;\n\n    default:\n      throw new Error(`@loaders.gl/images: image ${type} not supported in this environment`);\n  }\n}\nexport function getDefaultImageType() {\n  if (IMAGE_BITMAP_SUPPORTED) {\n    return 'imagebitmap';\n  }\n\n  if (IMAGE_SUPPORTED) {\n    return 'image';\n  }\n\n  if (DATA_SUPPORTED) {\n    return 'data';\n  }\n\n  throw new Error('Install \\'@loaders.gl/polyfills\\' to parse images under Node.js');\n}\n//# sourceMappingURL=image-type.js.map","export function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  const format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageSize(image) {\n  return getImageData(image);\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'data':\n      return image;\n\n    case 'image':\n    case 'imagebitmap':\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n\n      if (!context) {\n        throw new Error('getImageData');\n      }\n\n      canvas.width = image.width;\n      canvas.height = image.height;\n      context.drawImage(image, 0, 0);\n      return context.getImageData(0, 0, image.width, image.height);\n\n    default:\n      throw new Error('getImageData');\n  }\n}\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'image';\n  }\n\n  if (image && typeof image === 'object' && image.data && image.width && image.height) {\n    return 'data';\n  }\n\n  return null;\n}\n//# sourceMappingURL=parsed-image-api.js.map","const SVG_DATA_URL_PATTERN = /^data:image\\/svg\\+xml/;\nconst SVG_URL_PATTERN = /\\.svg((\\?|#).*)?$/;\nexport function isSVG(url) {\n  return url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url));\n}\nexport function getBlobOrSVGDataUrl(arrayBuffer, url) {\n  if (isSVG(url)) {\n    const textDecoder = new TextDecoder();\n    const xmlText = textDecoder.decode(arrayBuffer);\n    const src = `data:image/svg+xml;base64,${btoa(xmlText)}`;\n    return src;\n  }\n\n  return getBlob(arrayBuffer, url);\n}\nexport function getBlob(arrayBuffer, url) {\n  if (isSVG(url)) {\n    throw new Error('SVG cannot be parsed directly to imagebitmap');\n  }\n\n  return new Blob([new Uint8Array(arrayBuffer)]);\n}\n//# sourceMappingURL=svg-utils.js.map","import { getBlobOrSVGDataUrl } from './svg-utils';\nexport default async function parseToImage(arrayBuffer, options, url) {\n  const blobOrDataUrl = getBlobOrSVGDataUrl(arrayBuffer, url);\n  const URL = self.URL || self.webkitURL;\n  const objectUrl = typeof blobOrDataUrl !== 'string' && URL.createObjectURL(blobOrDataUrl);\n\n  try {\n    return await loadToImage(objectUrl || blobOrDataUrl, options);\n  } finally {\n    if (objectUrl) {\n      URL.revokeObjectURL(objectUrl);\n    }\n  }\n}\nexport async function loadToImage(url, options) {\n  const image = new Image();\n  image.src = url;\n\n  if (options.image && options.image.decode && image.decode) {\n    await image.decode();\n    return image;\n  }\n\n  return await new Promise((resolve, reject) => {\n    try {\n      image.onload = () => resolve(image);\n\n      image.onerror = err => reject(new Error(`Could not load image ${url}: ${err}`));\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n//# sourceMappingURL=parse-to-image.js.map","import { isSVG, getBlob } from './svg-utils';\nimport parseToImage from './parse-to-image';\nconst EMPTY_OBJECT = {};\nlet imagebitmapOptionsSupported = true;\nexport default async function parseToImageBitmap(arrayBuffer, options, url) {\n  let blob;\n\n  if (isSVG(url)) {\n    const image = await parseToImage(arrayBuffer, options, url);\n    blob = image;\n  } else {\n    blob = getBlob(arrayBuffer, url);\n  }\n\n  const imagebitmapOptions = options && options.imagebitmap;\n  return await safeCreateImageBitmap(blob, imagebitmapOptions);\n}\n\nasync function safeCreateImageBitmap(blob, imagebitmapOptions = null) {\n  if (isEmptyObject(imagebitmapOptions) || !imagebitmapOptionsSupported) {\n    imagebitmapOptions = null;\n  }\n\n  if (imagebitmapOptions) {\n    try {\n      return await createImageBitmap(blob, imagebitmapOptions);\n    } catch (error) {\n      console.warn(error);\n      imagebitmapOptionsSupported = false;\n    }\n  }\n\n  return await createImageBitmap(blob);\n}\n\nfunction isEmptyObject(object) {\n  for (const key in object || EMPTY_OBJECT) {\n    return false;\n  }\n\n  return true;\n}\n//# sourceMappingURL=parse-to-image-bitmap.js.map","const BIG_ENDIAN = false;\nconst LITTLE_ENDIAN = true;\nexport function getBinaryImageMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  return getPngMetadata(dataView) || getJpegMetadata(dataView) || getGifMetadata(dataView) || getBmpMetadata(dataView);\n}\n\nfunction getPngMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isPng = dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n\n  if (!isPng) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/png',\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nfunction getGifMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isGif = dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n\n  if (!isGif) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/gif',\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function getBmpMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isBmp = dataView.byteLength >= 14 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d && dataView.getUint32(2, LITTLE_ENDIAN) === dataView.byteLength;\n\n  if (!isBmp) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/bmp',\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nfunction getJpegMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isJpeg = dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2) === 0xff;\n\n  if (!isJpeg) {\n    return null;\n  }\n\n  const {\n    tableMarkers,\n    sofMarkers\n  } = getJpegMarkers();\n  let i = 2;\n\n  while (i + 9 < dataView.byteLength) {\n    const marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        mimeType: 'image/jpeg',\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  const tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (let i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  const sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers,\n    sofMarkers\n  };\n}\n\nfunction toDataView(data) {\n  if (data instanceof DataView) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return new DataView(data);\n  }\n\n  throw new Error('toDataView');\n}\n//# sourceMappingURL=binary-image-api.js.map","import { VERSION } from './lib/utils/version';\nimport parseImage from './lib/parsers/parse-image';\nimport { getBinaryImageMetadata } from './lib/category-api/binary-image-api';\nconst EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nconst MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vnd.microsoft.icon', 'image/svg+xml'];\nexport const ImageLoader = {\n  id: 'image',\n  module: 'images',\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  tests: [arrayBuffer => Boolean(getBinaryImageMetadata(new DataView(arrayBuffer)))],\n  options: {\n    image: {\n      type: 'auto',\n      decode: true\n    }\n  }\n};\nexport const _typecheckImageLoader = ImageLoader;\n//# sourceMappingURL=image-loader.js.map","export const VERSION = typeof \"3.0.8\" !== 'undefined' ? \"3.0.8\" : 'latest';\n//# sourceMappingURL=version.js.map","import { assert } from '../utils/assert';\nimport { isImageTypeSupported, getDefaultImageType } from '../category-api/image-type';\nimport { getImageData } from '../category-api/parsed-image-api';\nimport parseToImage from './parse-to-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseToNodeImage from './parse-to-node-image';\nexport default async function parseImage(arrayBuffer, options, context) {\n  options = options || {};\n  const imageOptions = options.image || {};\n  const imageType = imageOptions.type || 'auto';\n  const {\n    url\n  } = context || {};\n  const loadType = getLoadableImageType(imageType);\n  let image;\n\n  switch (loadType) {\n    case 'imagebitmap':\n      image = await parseToImageBitmap(arrayBuffer, options, url);\n      break;\n\n    case 'image':\n      image = await parseToImage(arrayBuffer, options, url);\n      break;\n\n    case 'data':\n      image = await parseToNodeImage(arrayBuffer, options);\n      break;\n\n    default:\n      assert(false);\n  }\n\n  if (imageType === 'data') {\n    image = getImageData(image);\n  }\n\n  return image;\n}\n\nfunction getLoadableImageType(type) {\n  switch (type) {\n    case 'auto':\n    case 'data':\n      return getDefaultImageType();\n\n    default:\n      isImageTypeSupported(type);\n      return type;\n  }\n}\n//# sourceMappingURL=parse-image.js.map","import { global } from '../utils/globals';\nimport { assert } from '../utils/assert';\nimport { getBinaryImageMetadata } from '../category-api/binary-image-api';\nexport default function parseToNodeImage(arrayBuffer, options) {\n  const {\n    mimeType\n  } = getBinaryImageMetadata(arrayBuffer) || {};\n  const {\n    _parseImageNode\n  } = global;\n  assert(_parseImageNode);\n  return _parseImageNode(arrayBuffer, mimeType, options);\n}\n//# sourceMappingURL=parse-to-node-image.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import { uid, assert } from '@luma.gl/webgl';\nexport const DRAW_MODE = {\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  LINE_LOOP: 0x0002,\n  LINE_STRIP: 0x0003,\n  TRIANGLES: 0x0004,\n  TRIANGLE_STRIP: 0x0005,\n  TRIANGLE_FAN: 0x0006\n};\nexport default class Geometry {\n  static get DRAW_MODE() {\n    return DRAW_MODE;\n  }\n\n  constructor(props = {}) {\n    const {\n      id = uid('geometry'),\n      drawMode = DRAW_MODE.TRIANGLES,\n      attributes = {},\n      indices = null,\n      vertexCount = null\n    } = props;\n    this.id = id;\n    this.drawMode = drawMode | 0;\n    this.attributes = {};\n    this.userData = {};\n\n    this._setAttributes(attributes, indices);\n\n    this.vertexCount = vertexCount || this._calculateVertexCount(this.attributes, this.indices);\n  }\n\n  get mode() {\n    return this.drawMode;\n  }\n\n  getVertexCount() {\n    return this.vertexCount;\n  }\n\n  getAttributes() {\n    return this.indices ? {\n      indices: this.indices,\n      ...this.attributes\n    } : this.attributes;\n  }\n\n  _print(attributeName) {\n    return \"Geometry \".concat(this.id, \" attribute \").concat(attributeName);\n  }\n\n  _setAttributes(attributes, indices) {\n    if (indices) {\n      this.indices = ArrayBuffer.isView(indices) ? {\n        value: indices,\n        size: 1\n      } : indices;\n    }\n\n    for (const attributeName in attributes) {\n      let attribute = attributes[attributeName];\n      attribute = ArrayBuffer.isView(attribute) ? {\n        value: attribute\n      } : attribute;\n      assert(ArrayBuffer.isView(attribute.value), \"\".concat(this._print(attributeName), \": must be typed array or object with value as typed array\"));\n\n      if ((attributeName === 'POSITION' || attributeName === 'positions') && !attribute.size) {\n        attribute.size = 3;\n      }\n\n      if (attributeName === 'indices') {\n        assert(!this.indices);\n        this.indices = attribute;\n      } else {\n        this.attributes[attributeName] = attribute;\n      }\n    }\n\n    if (this.indices && this.indices.isIndexed !== undefined) {\n      this.indices = Object.assign({}, this.indices);\n      delete this.indices.isIndexed;\n    }\n\n    return this;\n  }\n\n  _calculateVertexCount(attributes, indices) {\n    if (indices) {\n      return indices.value.length;\n    }\n\n    let vertexCount = Infinity;\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const {\n        value,\n        size,\n        constant\n      } = attribute;\n\n      if (!constant && value && size >= 1) {\n        vertexCount = Math.min(vertexCount, value.length / size);\n      }\n    }\n\n    assert(Number.isFinite(vertexCount));\n    return vertexCount;\n  }\n\n}\n//# sourceMappingURL=geometry.js.map","let arrayBuffer = null;\nexport function getScratchArrayBuffer(byteLength) {\n  if (!arrayBuffer || arrayBuffer.byteLength < byteLength) {\n    arrayBuffer = new ArrayBuffer(byteLength);\n  }\n\n  return arrayBuffer;\n}\nexport function getScratchArray(Type, length) {\n  const scratchArrayBuffer = getScratchArrayBuffer(Type.BYTES_PER_ELEMENT * length);\n  return new Type(scratchArrayBuffer, 0, length);\n}\nexport function fillArray({\n  target,\n  source,\n  start = 0,\n  count = 1\n}) {\n  const length = source.length;\n  const total = count * length;\n  let copied = 0;\n\n  for (let i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils-flat.js.map","import Resource from './resource';\nimport Buffer from './buffer';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { getScratchArray, fillArray } from '../utils/array-utils-flat';\nimport { assert } from '../utils';\nimport { getBrowser } from 'probe.gl';\nconst ERR_ELEMENTS = 'elements must be GL.ELEMENT_ARRAY_BUFFER';\nexport default class VertexArrayObject extends Resource {\n  static isSupported(gl, options = {}) {\n    if (options.constantAttributeZero) {\n      return isWebGL2(gl) || getBrowser() === 'Chrome';\n    }\n\n    return true;\n  }\n\n  static getDefaultArray(gl) {\n    gl.luma = gl.luma || {};\n\n    if (!gl.luma.defaultVertexArray) {\n      gl.luma.defaultVertexArray = new VertexArrayObject(gl, {\n        handle: null,\n        isDefaultArray: true\n      });\n    }\n\n    return gl.luma.defaultVertexArray;\n  }\n\n  static getMaxAttributes(gl) {\n    VertexArrayObject.MAX_ATTRIBUTES = VertexArrayObject.MAX_ATTRIBUTES || gl.getParameter(34921);\n    return VertexArrayObject.MAX_ATTRIBUTES;\n  }\n\n  static setConstant(gl, location, array) {\n    switch (array.constructor) {\n      case Float32Array:\n        VertexArrayObject._setConstantFloatArray(gl, location, array);\n\n        break;\n\n      case Int32Array:\n        VertexArrayObject._setConstantIntArray(gl, location, array);\n\n        break;\n\n      case Uint32Array:\n        VertexArrayObject._setConstantUintArray(gl, location, array);\n\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  constructor(gl, opts = {}) {\n    const id = opts.id || opts.program && opts.program.id;\n    super(gl, Object.assign({}, opts, {\n      id\n    }));\n    this.buffer = null;\n    this.bufferValue = null;\n    this.isDefaultArray = opts.isDefaultArray || false;\n    this.gl2 = gl;\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  delete() {\n    super.delete();\n\n    if (this.buffer) {\n      this.buffer.delete();\n    }\n\n    return this;\n  }\n\n  get MAX_ATTRIBUTES() {\n    return VertexArrayObject.getMaxAttributes(this.gl);\n  }\n\n  initialize(props = {}) {\n    return this.setProps(props);\n  }\n\n  setProps(props) {\n    return this;\n  }\n\n  setElementBuffer(elementBuffer = null, opts = {}) {\n    assert(!elementBuffer || elementBuffer.target === 34963, ERR_ELEMENTS);\n    this.bind(() => {\n      this.gl.bindBuffer(34963, elementBuffer ? elementBuffer.handle : null);\n    });\n    return this;\n  }\n\n  setBuffer(location, buffer, accessor) {\n    if (buffer.target === 34963) {\n      return this.setElementBuffer(buffer, accessor);\n    }\n\n    const {\n      size,\n      type,\n      stride,\n      offset,\n      normalized,\n      integer,\n      divisor\n    } = accessor;\n    const {\n      gl,\n      gl2\n    } = this;\n    location = Number(location);\n    this.bind(() => {\n      gl.bindBuffer(34962, buffer.handle);\n\n      if (integer) {\n        assert(isWebGL2(gl));\n        gl2.vertexAttribIPointer(location, size, type, stride, offset);\n      } else {\n        gl.vertexAttribPointer(location, size, type, normalized, stride, offset);\n      }\n\n      gl.enableVertexAttribArray(location);\n      gl2.vertexAttribDivisor(location, divisor || 0);\n    });\n    return this;\n  }\n\n  enable(location, enable = true) {\n    const disablingAttributeZero = !enable && location === 0 && !VertexArrayObject.isSupported(this.gl, {\n      constantAttributeZero: true\n    });\n\n    if (!disablingAttributeZero) {\n      location = Number(location);\n      this.bind(() => enable ? this.gl.enableVertexAttribArray(location) : this.gl.disableVertexAttribArray(location));\n    }\n\n    return this;\n  }\n\n  getConstantBuffer(elementCount, value) {\n    const constantValue = this._normalizeConstantArrayValue(value);\n\n    const byteLength = constantValue.byteLength * elementCount;\n    const length = constantValue.length * elementCount;\n    let updateNeeded = !this.buffer;\n    this.buffer = this.buffer || new Buffer(this.gl, byteLength);\n    updateNeeded = updateNeeded || this.buffer.reallocate(byteLength);\n    updateNeeded = updateNeeded || !this._compareConstantArrayValues(constantValue, this.bufferValue);\n\n    if (updateNeeded) {\n      const typedArray = getScratchArray(value.constructor, length);\n      fillArray({\n        target: typedArray,\n        source: constantValue,\n        start: 0,\n        count: length\n      });\n      this.buffer.subData(typedArray);\n      this.bufferValue = value;\n    }\n\n    return this.buffer;\n  }\n\n  _normalizeConstantArrayValue(arrayValue) {\n    if (Array.isArray(arrayValue)) {\n      return new Float32Array(arrayValue);\n    }\n\n    return arrayValue;\n  }\n\n  _compareConstantArrayValues(v1, v2) {\n    if (!v1 || !v2 || v1.length !== v2.length || v1.constructor !== v2.constructor) {\n      return false;\n    }\n\n    for (let i = 0; i < v1.length; ++i) {\n      if (v1[i] !== v2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  static _setConstantFloatArray(gl, location, array) {\n    switch (array.length) {\n      case 1:\n        gl.vertexAttrib1fv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttrib2fv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttrib3fv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttrib4fv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  static _setConstantIntArray(gl, location, array) {\n    assert(isWebGL2(gl));\n\n    switch (array.length) {\n      case 1:\n        gl.vertexAttribI1iv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttribI2iv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttribI3iv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttribI4iv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  static _setConstantUintArray(gl, location, array) {\n    assert(isWebGL2(gl));\n\n    switch (array.length) {\n      case 1:\n        gl.vertexAttribI1uiv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttribI2uiv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttribI3uiv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttribI4uiv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  _createHandle() {\n    const gl2 = this.gl;\n    return gl2.createVertexArray();\n  }\n\n  _deleteHandle(handle) {\n    this.gl2.deleteVertexArray(handle);\n    return [this.elements];\n  }\n\n  _bindHandle(handle) {\n    this.gl2.bindVertexArray(handle);\n  }\n\n  _getParameter(pname, {\n    location\n  }) {\n    assert(Number.isFinite(location));\n    return this.bind(() => {\n      switch (pname) {\n        case 34373:\n          return this.gl.getVertexAttribOffset(location, pname);\n\n        default:\n          return this.gl.getVertexAttrib(location, pname);\n      }\n    });\n  }\n\n}\n//# sourceMappingURL=vertex-array-object.js.map","import { window } from './globals';\nimport isBrowser from './is-browser';\nimport isElectron from './is-electron';\nexport function isMobile() {\n  return typeof window.orientation !== 'undefined';\n}\nexport default function getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !isBrowser()) {\n    return 'Node';\n  }\n\n  if (isElectron(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  const navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  const userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  const isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  const isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (window.chrome) {\n    return 'Chrome';\n  }\n\n  if (window.safari) {\n    return 'Safari';\n  }\n\n  if (window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}\n//# sourceMappingURL=get-browser.js.map","import { log } from '@luma.gl/gltools';\nimport Accessor from './accessor';\nimport Buffer from './buffer';\nimport VertexArrayObject from './vertex-array-object';\nimport { assert, stubRemovedMethods } from '../utils';\nconst ERR_ATTRIBUTE_TYPE = 'VertexArray: attributes must be Buffers or constants (i.e. typed array)';\nconst MULTI_LOCATION_ATTRIBUTE_REGEXP = /^(.+)__LOCATION_([0-9]+)$/;\nconst DEPRECATIONS_V6 = ['setBuffers', 'setGeneric', 'clearBindings', 'setLocations', 'setGenericValues', 'setDivisor', 'enable', 'disable'];\nexport default class VertexArray {\n  constructor(gl, opts = {}) {\n    const id = opts.id || opts.program && opts.program.id;\n    this.id = id;\n    this.gl = gl;\n    this.configuration = null;\n    this.elements = null;\n    this.elementsAccessor = null;\n    this.values = null;\n    this.accessors = null;\n    this.unused = null;\n    this.drawParams = null;\n    this.buffer = null;\n    this.attributes = {};\n    this.vertexArrayObject = new VertexArrayObject(gl);\n    stubRemovedMethods(this, 'VertexArray', 'v6.0', DEPRECATIONS_V6);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  delete() {\n    if (this.buffer) {\n      this.buffer.delete();\n    }\n\n    this.vertexArrayObject.delete();\n  }\n\n  initialize(props = {}) {\n    this.reset();\n    this.configuration = null;\n    this.bindOnUse = false;\n    return this.setProps(props);\n  }\n\n  reset() {\n    this.elements = null;\n    this.elementsAccessor = null;\n    const {\n      MAX_ATTRIBUTES\n    } = this.vertexArrayObject;\n    this.values = new Array(MAX_ATTRIBUTES).fill(null);\n    this.accessors = new Array(MAX_ATTRIBUTES).fill(null);\n    this.unused = {};\n    this.drawParams = null;\n    return this;\n  }\n\n  setProps(props) {\n    if ('program' in props) {\n      this.configuration = props.program && props.program.configuration;\n    }\n\n    if ('configuration' in props) {\n      this.configuration = props.configuration;\n    }\n\n    if ('attributes' in props) {\n      this.setAttributes(props.attributes);\n    }\n\n    if ('elements' in props) {\n      this.setElementBuffer(props.elements);\n    }\n\n    if ('bindOnUse' in props) {\n      props = props.bindOnUse;\n    }\n\n    return this;\n  }\n\n  clearDrawParams() {\n    this.drawParams = null;\n  }\n\n  getDrawParams() {\n    this.drawParams = this.drawParams || this._updateDrawParams();\n    return this.drawParams;\n  }\n\n  setAttributes(attributes) {\n    Object.assign(this.attributes, attributes);\n    this.vertexArrayObject.bind(() => {\n      for (const locationOrName in attributes) {\n        const value = attributes[locationOrName];\n\n        this._setAttribute(locationOrName, value);\n      }\n\n      this.gl.bindBuffer(34962, null);\n    });\n    return this;\n  }\n\n  setElementBuffer(elementBuffer = null, accessor = {}) {\n    this.elements = elementBuffer;\n    this.elementsAccessor = accessor;\n    this.clearDrawParams();\n    this.vertexArrayObject.setElementBuffer(elementBuffer, accessor);\n    return this;\n  }\n\n  setBuffer(locationOrName, buffer, appAccessor = {}) {\n    if (buffer.target === 34963) {\n      return this.setElementBuffer(buffer, appAccessor);\n    }\n\n    const {\n      location,\n      accessor\n    } = this._resolveLocationAndAccessor(locationOrName, buffer, buffer.accessor, appAccessor);\n\n    if (location >= 0) {\n      this.values[location] = buffer;\n      this.accessors[location] = accessor;\n      this.clearDrawParams();\n      this.vertexArrayObject.setBuffer(location, buffer, accessor);\n    }\n\n    return this;\n  }\n\n  setConstant(locationOrName, arrayValue, appAccessor = {}) {\n    const {\n      location,\n      accessor\n    } = this._resolveLocationAndAccessor(locationOrName, arrayValue, Object.assign({\n      size: arrayValue.length\n    }, appAccessor));\n\n    if (location >= 0) {\n      arrayValue = this.vertexArrayObject._normalizeConstantArrayValue(arrayValue);\n      this.values[location] = arrayValue;\n      this.accessors[location] = accessor;\n      this.clearDrawParams();\n      this.vertexArrayObject.enable(location, false);\n    }\n\n    return this;\n  }\n\n  unbindBuffers() {\n    this.vertexArrayObject.bind(() => {\n      if (this.elements) {\n        this.vertexArrayObject.setElementBuffer(null);\n      }\n\n      this.buffer = this.buffer || new Buffer(this.gl, {\n        accessor: {\n          size: 4\n        }\n      });\n\n      for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        if (this.values[location] instanceof Buffer) {\n          this.gl.disableVertexAttribArray(location);\n          this.gl.bindBuffer(34962, this.buffer.handle);\n          this.gl.vertexAttribPointer(location, 1, 5126, false, 0, 0);\n        }\n      }\n    });\n    return this;\n  }\n\n  bindBuffers() {\n    this.vertexArrayObject.bind(() => {\n      if (this.elements) {\n        this.setElementBuffer(this.elements);\n      }\n\n      for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        const buffer = this.values[location];\n\n        if (buffer instanceof Buffer) {\n          this.setBuffer(location, buffer);\n        }\n      }\n    });\n    return this;\n  }\n\n  bindForDraw(vertexCount, instanceCount, func) {\n    let value;\n    this.vertexArrayObject.bind(() => {\n      this._setConstantAttributes(vertexCount, instanceCount);\n\n      value = func();\n    });\n    return value;\n  }\n\n  _resolveLocationAndAccessor(locationOrName, value, valueAccessor, appAccessor) {\n    const INVALID_RESULT = {\n      location: -1,\n      accessor: null\n    };\n\n    const {\n      location,\n      name\n    } = this._getAttributeIndex(locationOrName);\n\n    if (!Number.isFinite(location) || location < 0) {\n      this.unused[locationOrName] = value;\n      log.once(3, () => \"unused value \".concat(locationOrName, \" in \").concat(this.id))();\n      return INVALID_RESULT;\n    }\n\n    const accessInfo = this._getAttributeInfo(name || location);\n\n    if (!accessInfo) {\n      return INVALID_RESULT;\n    }\n\n    const currentAccessor = this.accessors[location] || {};\n    const accessor = Accessor.resolve(accessInfo.accessor, currentAccessor, valueAccessor, appAccessor);\n    const {\n      size,\n      type\n    } = accessor;\n    assert(Number.isFinite(size) && Number.isFinite(type));\n    return {\n      location,\n      accessor\n    };\n  }\n\n  _getAttributeInfo(attributeName) {\n    return this.configuration && this.configuration.getAttributeInfo(attributeName);\n  }\n\n  _getAttributeIndex(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return {\n        location\n      };\n    }\n\n    const multiLocation = MULTI_LOCATION_ATTRIBUTE_REGEXP.exec(locationOrName);\n    const name = multiLocation ? multiLocation[1] : locationOrName;\n    const locationOffset = multiLocation ? Number(multiLocation[2]) : 0;\n\n    if (this.configuration) {\n      return {\n        location: this.configuration.getAttributeLocation(name) + locationOffset,\n        name\n      };\n    }\n\n    return {\n      location: -1\n    };\n  }\n\n  _setAttribute(locationOrName, value) {\n    if (value instanceof Buffer) {\n      this.setBuffer(locationOrName, value);\n    } else if (Array.isArray(value) && value.length && value[0] instanceof Buffer) {\n      const buffer = value[0];\n      const accessor = value[1];\n      this.setBuffer(locationOrName, buffer, accessor);\n    } else if (ArrayBuffer.isView(value) || Array.isArray(value)) {\n      const constant = value;\n      this.setConstant(locationOrName, constant);\n    } else if (value.buffer instanceof Buffer) {\n      const accessor = value;\n      this.setBuffer(locationOrName, accessor.buffer, accessor);\n    } else {\n      throw new Error(ERR_ATTRIBUTE_TYPE);\n    }\n  }\n\n  _setConstantAttributes(vertexCount, instanceCount) {\n    const elementCount = Math.max(vertexCount | 0, instanceCount | 0);\n    let constant = this.values[0];\n\n    if (ArrayBuffer.isView(constant)) {\n      this._setConstantAttributeZero(constant, elementCount);\n    }\n\n    for (let location = 1; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n      constant = this.values[location];\n\n      if (ArrayBuffer.isView(constant)) {\n        this._setConstantAttribute(location, constant);\n      }\n    }\n  }\n\n  _setConstantAttributeZero(constant, elementCount) {\n    if (VertexArrayObject.isSupported(this.gl, {\n      constantAttributeZero: true\n    })) {\n      this._setConstantAttribute(0, constant);\n\n      return;\n    }\n\n    const buffer = this.vertexArrayObject.getConstantBuffer(elementCount, constant);\n    this.vertexArrayObject.setBuffer(0, buffer, this.accessors[0]);\n  }\n\n  _setConstantAttribute(location, constant) {\n    VertexArrayObject.setConstant(this.gl, location, constant);\n  }\n\n  _updateDrawParams() {\n    const drawParams = {\n      isIndexed: false,\n      isInstanced: false,\n      indexCount: Infinity,\n      vertexCount: Infinity,\n      instanceCount: Infinity\n    };\n\n    for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n      this._updateDrawParamsForLocation(drawParams, location);\n    }\n\n    if (this.elements) {\n      drawParams.elementCount = this.elements.getElementCount(this.elements.accessor);\n      drawParams.isIndexed = true;\n      drawParams.indexType = this.elementsAccessor.type || this.elements.accessor.type;\n      drawParams.indexOffset = this.elementsAccessor.offset || 0;\n    }\n\n    if (drawParams.indexCount === Infinity) {\n      drawParams.indexCount = 0;\n    }\n\n    if (drawParams.vertexCount === Infinity) {\n      drawParams.vertexCount = 0;\n    }\n\n    if (drawParams.instanceCount === Infinity) {\n      drawParams.instanceCount = 0;\n    }\n\n    return drawParams;\n  }\n\n  _updateDrawParamsForLocation(drawParams, location) {\n    const value = this.values[location];\n    const accessor = this.accessors[location];\n\n    if (!value) {\n      return;\n    }\n\n    const {\n      divisor\n    } = accessor;\n    const isInstanced = divisor > 0;\n    drawParams.isInstanced = drawParams.isInstanced || isInstanced;\n\n    if (value instanceof Buffer) {\n      const buffer = value;\n\n      if (isInstanced) {\n        const instanceCount = buffer.getVertexCount(accessor);\n        drawParams.instanceCount = Math.min(drawParams.instanceCount, instanceCount);\n      } else {\n        const vertexCount = buffer.getVertexCount(accessor);\n        drawParams.vertexCount = Math.min(drawParams.vertexCount, vertexCount);\n      }\n    }\n  }\n\n  setElements(elementBuffer = null, accessor = {}) {\n    log.deprecated('setElements', 'setElementBuffer')();\n    return this.setElementBuffer(elementBuffer, accessor);\n  }\n\n}\n//# sourceMappingURL=vertex-array.js.map","function formatArrayValue(v, opts) {\n  const {\n    maxElts = 16,\n    size = 1\n  } = opts;\n  let string = '[';\n\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  const terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatValue(v, opts = {}) {\n  const EPSILON = 1e-16;\n  const {\n    isInteger = false\n  } = opts;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n//# sourceMappingURL=format-value.js.map","import Buffer from '../classes/buffer';\nimport { getKey } from '../webgl-utils';\nimport { getCompositeGLType } from '../webgl-utils/attribute-utils';\nimport { formatValue } from '../utils';\nexport function getDebugTableForVertexArray({\n  vertexArray,\n  header = 'Attributes'\n}) {\n  if (!vertexArray.configuration) {\n    return {};\n  }\n\n  const table = {};\n\n  if (vertexArray.elements) {\n    table.ELEMENT_ARRAY_BUFFER = getDebugTableRow(vertexArray, vertexArray.elements, null, header);\n  }\n\n  const attributes = vertexArray.values;\n\n  for (const attributeLocation in attributes) {\n    const info = vertexArray._getAttributeInfo(attributeLocation);\n\n    if (info) {\n      let rowHeader = \"\".concat(attributeLocation, \": \").concat(info.name);\n      const accessor = vertexArray.accessors[info.location];\n\n      if (accessor) {\n        rowHeader = \"\".concat(attributeLocation, \": \").concat(getGLSLDeclaration(info.name, accessor));\n      }\n\n      table[rowHeader] = getDebugTableRow(vertexArray, attributes[attributeLocation], accessor, header);\n    }\n  }\n\n  return table;\n}\n\nfunction getDebugTableRow(vertexArray, attribute, accessor, header) {\n  const {\n    gl\n  } = vertexArray;\n\n  if (!attribute) {\n    return {\n      [header]: 'null',\n      'Format ': 'N/A'\n    };\n  }\n\n  let type = 'NOT PROVIDED';\n  let size = 1;\n  let verts = 0;\n  let bytes = 0;\n  let isInteger;\n  let marker;\n  let value;\n\n  if (accessor) {\n    type = accessor.type;\n    size = accessor.size;\n    type = String(type).replace('Array', '');\n    isInteger = type.indexOf('nt') !== -1;\n  }\n\n  if (attribute instanceof Buffer) {\n    const buffer = attribute;\n    const {\n      data,\n      changed\n    } = buffer.getDebugData();\n    marker = changed ? '*' : '';\n    value = data;\n    bytes = buffer.byteLength;\n    verts = bytes / data.BYTES_PER_ELEMENT / size;\n    let format;\n\n    if (accessor) {\n      const instanced = accessor.divisor > 0;\n      format = \"\".concat(instanced ? 'I ' : 'P ', \" \").concat(verts, \" (x\").concat(size, \"=\").concat(bytes, \" bytes \").concat(getKey(gl, type), \")\");\n    } else {\n      isInteger = true;\n      format = \"\".concat(bytes, \" bytes\");\n    }\n\n    return {\n      [header]: \"\".concat(marker).concat(formatValue(value, {\n        size,\n        isInteger\n      })),\n      'Format ': format\n    };\n  }\n\n  value = attribute;\n  size = attribute.length;\n  type = String(attribute.constructor.name).replace('Array', '');\n  isInteger = type.indexOf('nt') !== -1;\n  return {\n    [header]: \"\".concat(formatValue(value, {\n      size,\n      isInteger\n    }), \" (constant)\"),\n    'Format ': \"\".concat(size, \"x\").concat(type, \" (constant)\")\n  };\n}\n\nfunction getGLSLDeclaration(name, accessor) {\n  const {\n    type,\n    size\n  } = accessor;\n  const typeAndName = getCompositeGLType(type, size);\n  return typeAndName ? \"\".concat(name, \" (\").concat(typeAndName.name, \")\") : name;\n}\n//# sourceMappingURL=debug-vertex-array.js.map","import { formatValue, assert } from '../utils';\nexport function getDebugTableForUniforms({\n  header = 'Uniforms',\n  program,\n  uniforms,\n  undefinedOnly = false\n}) {\n  assert(program);\n  const SHADER_MODULE_UNIFORM_REGEXP = '.*_.*';\n  const PROJECT_MODULE_UNIFORM_REGEXP = '.*Matrix';\n  const uniformLocations = program._uniformSetters;\n  const table = {};\n  const uniformNames = Object.keys(uniformLocations).sort();\n  let count = 0;\n\n  for (const uniformName of uniformNames) {\n    if (!uniformName.match(SHADER_MODULE_UNIFORM_REGEXP) && !uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  for (const uniformName of uniformNames) {\n    if (uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  for (const uniformName of uniformNames) {\n    if (!table[uniformName]) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  let unusedCount = 0;\n  const unusedTable = {};\n\n  if (!undefinedOnly) {\n    for (const uniformName in uniforms) {\n      const uniform = uniforms[uniformName];\n\n      if (!table[uniformName]) {\n        unusedCount++;\n        unusedTable[uniformName] = {\n          Type: \"NOT USED: \".concat(uniform),\n          [header]: formatValue(uniform)\n        };\n      }\n    }\n  }\n\n  return {\n    table,\n    count,\n    unusedTable,\n    unusedCount\n  };\n}\n\nfunction addUniformToTable({\n  table,\n  header,\n  uniforms,\n  uniformName,\n  undefinedOnly\n}) {\n  const value = uniforms[uniformName];\n  const isDefined = isUniformDefined(value);\n\n  if (!undefinedOnly || !isDefined) {\n    table[uniformName] = {\n      [header]: isDefined ? formatValue(value) : 'N/A',\n      'Uniform Type': isDefined ? value : 'NOT PROVIDED'\n    };\n    return true;\n  }\n\n  return false;\n}\n\nfunction isUniformDefined(value) {\n  return value !== undefined && value !== null;\n}\n//# sourceMappingURL=debug-uniforms.js.map","import { getCompositeGLType } from '../webgl-utils/attribute-utils';\nexport function getDebugTableForProgramConfiguration(config) {\n  const table = {};\n  const header = \"Accessors for \".concat(config.id);\n\n  for (const attributeInfo of config.attributeInfos) {\n    if (attributeInfo) {\n      const glslDeclaration = getGLSLDeclaration(attributeInfo);\n      table[\"in \".concat(glslDeclaration)] = {\n        [header]: JSON.stringify(attributeInfo.accessor)\n      };\n    }\n  }\n\n  for (const varyingInfo of config.varyingInfos) {\n    if (varyingInfo) {\n      const glslDeclaration = getGLSLDeclaration(varyingInfo);\n      table[\"out \".concat(glslDeclaration)] = {\n        [header]: JSON.stringify(varyingInfo.accessor)\n      };\n    }\n  }\n\n  return table;\n}\n\nfunction getGLSLDeclaration(attributeInfo) {\n  const {\n    type,\n    size\n  } = attributeInfo.accessor;\n  const typeAndName = getCompositeGLType(type, size);\n\n  if (typeAndName) {\n    return \"\".concat(typeAndName.name, \" \").concat(attributeInfo.name);\n  }\n\n  return attributeInfo.name;\n}\n//# sourceMappingURL=debug-program-configuration.js.map","import { Buffer, assert } from '@luma.gl/webgl';\nconst GLTF_TO_LUMA_ATTRIBUTE_MAP = {\n  POSITION: 'positions',\n  NORMAL: 'normals',\n  COLOR_0: 'colors',\n  TEXCOORD_0: 'texCoords',\n  TEXCOORD_1: 'texCoords1',\n  TEXCOORD_2: 'texCoords2'\n};\nexport function getBuffersFromGeometry(gl, geometry, options) {\n  const buffers = {};\n  let indices = geometry.indices;\n\n  for (const name in geometry.attributes) {\n    const attribute = geometry.attributes[name];\n    const remappedName = mapAttributeName(name, options);\n\n    if (name === 'indices') {\n      indices = attribute;\n    } else if (attribute.constant) {\n      buffers[remappedName] = attribute.value;\n    } else {\n      const typedArray = attribute.value;\n      const accessor = { ...attribute\n      };\n      delete accessor.value;\n      buffers[remappedName] = [new Buffer(gl, typedArray), accessor];\n      inferAttributeAccessor(name, accessor);\n    }\n  }\n\n  if (indices) {\n    const data = indices.value || indices;\n    assert(data instanceof Uint16Array || data instanceof Uint32Array, 'attribute array for \"indices\" must be of integer type');\n    const accessor = {\n      size: 1,\n      isIndexed: indices.isIndexed === undefined ? true : indices.isIndexed\n    };\n    buffers.indices = [new Buffer(gl, {\n      data,\n      target: 34963\n    }), accessor];\n  }\n\n  return buffers;\n}\n\nfunction mapAttributeName(name, options) {\n  const {\n    attributeMap = GLTF_TO_LUMA_ATTRIBUTE_MAP\n  } = options || {};\n  return attributeMap && attributeMap[name] || name;\n}\n\nexport function inferAttributeAccessor(attributeName, attribute) {\n  let category;\n\n  switch (attributeName) {\n    case 'texCoords':\n    case 'texCoord1':\n    case 'texCoord2':\n    case 'texCoord3':\n      category = 'uvs';\n      break;\n\n    case 'vertices':\n    case 'positions':\n    case 'normals':\n    case 'pickingColors':\n      category = 'vectors';\n      break;\n\n    default:\n  }\n\n  switch (category) {\n    case 'vectors':\n      attribute.size = attribute.size || 3;\n      break;\n\n    case 'uvs':\n      attribute.size = attribute.size || 2;\n      break;\n\n    default:\n  }\n\n  assert(Number.isFinite(attribute.size), \"attribute \".concat(attributeName, \" needs size\"));\n}\n//# sourceMappingURL=model-utils.js.map","import { isWebGL } from '@luma.gl/gltools';\nimport ProgramManager from './program-manager';\nimport { Program, VertexArray, clear, TransformFeedback, Buffer, log, isObjectEmpty, uid, assert } from '@luma.gl/webgl';\nimport { getDebugTableForUniforms, getDebugTableForVertexArray, getDebugTableForProgramConfiguration } from '@luma.gl/webgl';\nimport { getBuffersFromGeometry } from './model-utils';\nconst LOG_DRAW_PRIORITY = 2;\nconst LOG_DRAW_TIMEOUT = 10000;\nconst ERR_MODEL_PARAMS = 'Model needs drawMode and vertexCount';\n\nconst NOOP = () => {};\n\nconst DRAW_PARAMS = {};\nexport default class Model {\n  constructor(gl, props = {}) {\n    const {\n      id = uid('model')\n    } = props;\n    assert(isWebGL(gl));\n    this.id = id;\n    this.gl = gl;\n    this.id = props.id || uid('Model');\n    this.lastLogTime = 0;\n    this.animated = false;\n    this.initialize(props);\n  }\n\n  initialize(props) {\n    this.props = {};\n    this.programManager = props.programManager || ProgramManager.getDefaultProgramManager(this.gl);\n    this._programManagerState = -1;\n    this._managedProgram = false;\n    const {\n      program = null,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    } = props;\n    this.programProps = {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    };\n    this.program = null;\n    this.vertexArray = null;\n    this._programDirty = true;\n    this.userData = {};\n    this.needsRedraw = true;\n    this._attributes = {};\n    this.attributes = {};\n    this.uniforms = {};\n    this.pickable = true;\n\n    this._checkProgram();\n\n    this.setUniforms(Object.assign({}, this.getModuleUniforms(props.moduleSettings)));\n    this.drawMode = props.drawMode !== undefined ? props.drawMode : 4;\n    this.vertexCount = props.vertexCount || 0;\n    this.geometryBuffers = {};\n    this.isInstanced = props.isInstanced || props.instanced || props.instanceCount > 0;\n\n    this._setModelProps(props);\n\n    this.geometry = {};\n    assert(this.drawMode !== undefined && Number.isFinite(this.vertexCount), ERR_MODEL_PARAMS);\n  }\n\n  setProps(props) {\n    this._setModelProps(props);\n  }\n\n  delete() {\n    for (const key in this._attributes) {\n      if (this._attributes[key] !== this.attributes[key]) {\n        this._attributes[key].delete();\n      }\n    }\n\n    if (this._managedProgram) {\n      this.programManager.release(this.program);\n      this._managedProgram = false;\n    }\n\n    this.vertexArray.delete();\n\n    this._deleteGeometryBuffers();\n  }\n\n  getDrawMode() {\n    return this.drawMode;\n  }\n\n  getVertexCount() {\n    return this.vertexCount;\n  }\n\n  getInstanceCount() {\n    return this.instanceCount;\n  }\n\n  getAttributes() {\n    return this.attributes;\n  }\n\n  getProgram() {\n    return this.program;\n  }\n\n  setProgram(props) {\n    const {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    } = props;\n    this.programProps = {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    };\n    this._programDirty = true;\n  }\n\n  getUniforms() {\n    return this.uniforms;\n  }\n\n  setDrawMode(drawMode) {\n    this.drawMode = drawMode;\n    return this;\n  }\n\n  setVertexCount(vertexCount) {\n    assert(Number.isFinite(vertexCount));\n    this.vertexCount = vertexCount;\n    return this;\n  }\n\n  setInstanceCount(instanceCount) {\n    assert(Number.isFinite(instanceCount));\n    this.instanceCount = instanceCount;\n    return this;\n  }\n\n  setGeometry(geometry) {\n    this.drawMode = geometry.drawMode;\n    this.vertexCount = geometry.getVertexCount();\n\n    this._deleteGeometryBuffers();\n\n    this.geometryBuffers = getBuffersFromGeometry(this.gl, geometry);\n    this.vertexArray.setAttributes(this.geometryBuffers);\n    return this;\n  }\n\n  setAttributes(attributes = {}) {\n    if (isObjectEmpty(attributes)) {\n      return this;\n    }\n\n    const normalizedAttributes = {};\n\n    for (const name in attributes) {\n      const attribute = attributes[name];\n      normalizedAttributes[name] = attribute.getValue ? attribute.getValue() : attribute;\n    }\n\n    this.vertexArray.setAttributes(normalizedAttributes);\n    return this;\n  }\n\n  setUniforms(uniforms = {}) {\n    Object.assign(this.uniforms, uniforms);\n    return this;\n  }\n\n  getModuleUniforms(opts) {\n    this._checkProgram();\n\n    const getUniforms = this.programManager.getUniforms(this.program);\n\n    if (getUniforms) {\n      return getUniforms(opts);\n    }\n\n    return {};\n  }\n\n  updateModuleSettings(opts) {\n    const uniforms = this.getModuleUniforms(opts || {});\n    return this.setUniforms(uniforms);\n  }\n\n  clear(opts) {\n    clear(this.program.gl, opts);\n    return this;\n  }\n\n  draw(opts = {}) {\n    this._checkProgram();\n\n    const {\n      moduleSettings = null,\n      framebuffer,\n      uniforms = {},\n      attributes = {},\n      transformFeedback = this.transformFeedback,\n      parameters = {},\n      vertexArray = this.vertexArray\n    } = opts;\n    this.setAttributes(attributes);\n    this.updateModuleSettings(moduleSettings);\n    this.setUniforms(uniforms);\n    let logPriority;\n\n    if (log.priority >= LOG_DRAW_PRIORITY) {\n      logPriority = this._logDrawCallStart(LOG_DRAW_PRIORITY);\n    }\n\n    const drawParams = this.vertexArray.getDrawParams();\n    const {\n      isIndexed = drawParams.isIndexed,\n      indexType = drawParams.indexType,\n      indexOffset = drawParams.indexOffset,\n      vertexArrayInstanced = drawParams.isInstanced\n    } = this.props;\n\n    if (vertexArrayInstanced && !this.isInstanced) {\n      log.warn('Found instanced attributes on non-instanced model', this.id)();\n    }\n\n    const {\n      isInstanced,\n      instanceCount\n    } = this;\n    const {\n      onBeforeRender = NOOP,\n      onAfterRender = NOOP\n    } = this.props;\n    onBeforeRender();\n    this.program.setUniforms(this.uniforms);\n    const didDraw = this.program.draw(Object.assign(DRAW_PARAMS, opts, {\n      logPriority,\n      uniforms: null,\n      framebuffer,\n      parameters,\n      drawMode: this.getDrawMode(),\n      vertexCount: this.getVertexCount(),\n      vertexArray,\n      transformFeedback,\n      isIndexed,\n      indexType,\n      isInstanced,\n      instanceCount,\n      offset: isIndexed ? indexOffset : 0\n    }));\n    onAfterRender();\n\n    if (log.priority >= LOG_DRAW_PRIORITY) {\n      this._logDrawCallEnd(logPriority, vertexArray, framebuffer);\n    }\n\n    return didDraw;\n  }\n\n  transform(opts = {}) {\n    const {\n      discard = true,\n      feedbackBuffers,\n      unbindModels = []\n    } = opts;\n    let {\n      parameters\n    } = opts;\n\n    if (feedbackBuffers) {\n      this._setFeedbackBuffers(feedbackBuffers);\n    }\n\n    if (discard) {\n      parameters = Object.assign({}, parameters, {\n        [35977]: discard\n      });\n    }\n\n    unbindModels.forEach(model => model.vertexArray.unbindBuffers());\n\n    try {\n      this.draw(Object.assign({}, opts, {\n        parameters\n      }));\n    } finally {\n      unbindModels.forEach(model => model.vertexArray.bindBuffers());\n    }\n\n    return this;\n  }\n\n  render(uniforms = {}) {\n    log.warn('Model.render() is deprecated. Use Model.setUniforms() and Model.draw()')();\n    return this.setUniforms(uniforms).draw();\n  }\n\n  _setModelProps(props) {\n    Object.assign(this.props, props);\n\n    if ('uniforms' in props) {\n      this.setUniforms(props.uniforms);\n    }\n\n    if ('pickable' in props) {\n      this.pickable = props.pickable;\n    }\n\n    if ('instanceCount' in props) {\n      this.instanceCount = props.instanceCount;\n    }\n\n    if ('geometry' in props) {\n      this.setGeometry(props.geometry);\n    }\n\n    if ('attributes' in props) {\n      this.setAttributes(props.attributes);\n    }\n\n    if ('_feedbackBuffers' in props) {\n      this._setFeedbackBuffers(props._feedbackBuffers);\n    }\n  }\n\n  _checkProgram() {\n    const needsUpdate = this._programDirty || this.programManager.stateHash !== this._programManagerState;\n\n    if (!needsUpdate) {\n      return;\n    }\n\n    let {\n      program\n    } = this.programProps;\n\n    if (program) {\n      this._managedProgram = false;\n    } else {\n      const {\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        varyings,\n        bufferMode,\n        transpileToGLSL100\n      } = this.programProps;\n      program = this.programManager.get({\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        varyings,\n        bufferMode,\n        transpileToGLSL100\n      });\n\n      if (this.program && this._managedProgram) {\n        this.programManager.release(this.program);\n      }\n\n      this._programManagerState = this.programManager.stateHash;\n      this._managedProgram = true;\n    }\n\n    assert(program instanceof Program, 'Model needs a program');\n    this._programDirty = false;\n\n    if (program === this.program) {\n      return;\n    }\n\n    this.program = program;\n\n    if (this.vertexArray) {\n      this.vertexArray.setProps({\n        program: this.program,\n        attributes: this.vertexArray.attributes\n      });\n    } else {\n      this.vertexArray = new VertexArray(this.gl, {\n        program: this.program\n      });\n    }\n\n    this.setUniforms(Object.assign({}, this.getModuleUniforms()));\n  }\n\n  _deleteGeometryBuffers() {\n    for (const name in this.geometryBuffers) {\n      const buffer = this.geometryBuffers[name][0] || this.geometryBuffers[name];\n\n      if (buffer instanceof Buffer) {\n        buffer.delete();\n      }\n    }\n  }\n\n  _setAnimationProps(animationProps) {\n    if (this.animated) {\n      assert(animationProps, 'Model.draw(): animated uniforms but no animationProps');\n    }\n  }\n\n  _setFeedbackBuffers(feedbackBuffers = {}) {\n    if (isObjectEmpty(feedbackBuffers)) {\n      return this;\n    }\n\n    const {\n      gl\n    } = this.program;\n    this.transformFeedback = this.transformFeedback || new TransformFeedback(gl, {\n      program: this.program\n    });\n    this.transformFeedback.setBuffers(feedbackBuffers);\n    return this;\n  }\n\n  _logDrawCallStart(logLevel) {\n    const logDrawTimeout = logLevel > 3 ? 0 : LOG_DRAW_TIMEOUT;\n\n    if (Date.now() - this.lastLogTime < logDrawTimeout) {\n      return undefined;\n    }\n\n    this.lastLogTime = Date.now();\n    log.group(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id), {\n      collapsed: log.level <= 2\n    })();\n    return logLevel;\n  }\n\n  _logDrawCallEnd(logLevel, vertexArray, uniforms, framebuffer) {\n    if (logLevel === undefined) {\n      return;\n    }\n\n    const attributeTable = getDebugTableForVertexArray({\n      vertexArray,\n      header: \"\".concat(this.id, \" attributes\"),\n      attributes: this._attributes\n    });\n    const {\n      table: uniformTable,\n      unusedTable,\n      unusedCount\n    } = getDebugTableForUniforms({\n      header: \"\".concat(this.id, \" uniforms\"),\n      program: this.program,\n      uniforms: Object.assign({}, this.program.uniforms, uniforms)\n    });\n    const {\n      table: missingTable,\n      count: missingCount\n    } = getDebugTableForUniforms({\n      header: \"\".concat(this.id, \" uniforms\"),\n      program: this.program,\n      uniforms: Object.assign({}, this.program.uniforms, uniforms),\n      undefinedOnly: true\n    });\n\n    if (missingCount > 0) {\n      log.log('MISSING UNIFORMS', Object.keys(missingTable))();\n    }\n\n    if (unusedCount > 0) {\n      log.log('UNUSED UNIFORMS', Object.keys(unusedTable))();\n    }\n\n    const configTable = getDebugTableForProgramConfiguration(this.vertexArray.configuration);\n    log.table(logLevel, attributeTable)();\n    log.table(logLevel, uniformTable)();\n    log.table(logLevel + 1, configTable)();\n\n    if (framebuffer) {\n      framebuffer.log({\n        logLevel: LOG_DRAW_PRIORITY,\n        message: \"Rendered to \".concat(framebuffer.id)\n      });\n    }\n\n    log.groupEnd(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id))();\n  }\n\n}\n//# sourceMappingURL=model.js.map","const TYPE_DEFINITIONS = {\n  number: {\n    validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n\n  },\n  array: {\n    validate(value, propType) {\n      return Array.isArray(value) || ArrayBuffer.isView(value);\n    }\n\n  }\n};\nexport function parsePropTypes(propDefs) {\n  const propTypes = {};\n\n  for (const propName in propDefs) {\n    const propDef = propDefs[propName];\n    const propType = parsePropType(propDef);\n    propTypes[propName] = propType;\n  }\n\n  return propTypes;\n}\n\nfunction parsePropType(propDef) {\n  let type = getTypeOf(propDef);\n\n  if (type === 'object') {\n    if (!propDef) {\n      return {\n        type: 'object',\n        value: null\n      };\n    }\n\n    if ('type' in propDef) {\n      return Object.assign({}, propDef, TYPE_DEFINITIONS[propDef.type]);\n    }\n\n    if (!('value' in propDef)) {\n      return {\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    type = getTypeOf(propDef.value);\n    return Object.assign({\n      type\n    }, propDef, TYPE_DEFINITIONS[type]);\n  }\n\n  return Object.assign({\n    type,\n    value: propDef\n  }, TYPE_DEFINITIONS[type]);\n}\n\nfunction getTypeOf(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return 'array';\n  }\n\n  return typeof value;\n}\n//# sourceMappingURL=prop-types.js.map","import { assert } from '../utils';\nimport { parsePropTypes } from './filters/prop-types';\nconst VERTEX_SHADER = 'vs';\nconst FRAGMENT_SHADER = 'fs';\nexport default class ShaderModule {\n  constructor({\n    name,\n    vs,\n    fs,\n    dependencies = [],\n    uniforms,\n    getUniforms,\n    deprecations = [],\n    defines = {},\n    inject = {},\n    vertexShader,\n    fragmentShader\n  }) {\n    assert(typeof name === 'string');\n    this.name = name;\n    this.vs = vs || vertexShader;\n    this.fs = fs || fragmentShader;\n    this.getModuleUniforms = getUniforms;\n    this.dependencies = dependencies;\n    this.deprecations = this._parseDeprecationDefinitions(deprecations);\n    this.defines = defines;\n    this.injections = normalizeInjections(inject);\n\n    if (uniforms) {\n      this.uniforms = parsePropTypes(uniforms);\n    }\n  }\n\n  getModuleSource(type) {\n    let moduleSource;\n\n    switch (type) {\n      case VERTEX_SHADER:\n        moduleSource = this.vs || '';\n        break;\n\n      case FRAGMENT_SHADER:\n        moduleSource = this.fs || '';\n        break;\n\n      default:\n        assert(false);\n    }\n\n    return \"#define MODULE_\".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi, '_'), \"\\n\").concat(moduleSource, \"// END MODULE_\").concat(this.name, \"\\n\\n\");\n  }\n\n  getUniforms(opts, uniforms) {\n    if (this.getModuleUniforms) {\n      return this.getModuleUniforms(opts, uniforms);\n    }\n\n    if (this.uniforms) {\n      return this._defaultGetUniforms(opts);\n    }\n\n    return {};\n  }\n\n  getDefines() {\n    return this.defines;\n  }\n\n  checkDeprecations(shaderSource, log) {\n    this.deprecations.forEach(def => {\n      if (def.regex.test(shaderSource)) {\n        if (def.deprecated) {\n          log.deprecated(def.old, def.new)();\n        } else {\n          log.removed(def.old, def.new)();\n        }\n      }\n    });\n  }\n\n  _parseDeprecationDefinitions(deprecations) {\n    deprecations.forEach(def => {\n      switch (def.type) {\n        case 'function':\n          def.regex = new RegExp(\"\\\\b\".concat(def.old, \"\\\\(\"));\n          break;\n\n        default:\n          def.regex = new RegExp(\"\".concat(def.type, \" \").concat(def.old, \";\"));\n      }\n    });\n    return deprecations;\n  }\n\n  _defaultGetUniforms(opts = {}) {\n    const uniforms = {};\n    const propTypes = this.uniforms;\n\n    for (const key in propTypes) {\n      const propDef = propTypes[key];\n\n      if (key in opts && !propDef.private) {\n        if (propDef.validate) {\n          assert(propDef.validate(opts[key], propDef), \"\".concat(this.name, \": invalid \").concat(key));\n        }\n\n        uniforms[key] = opts[key];\n      } else {\n        uniforms[key] = propDef.value;\n      }\n    }\n\n    return uniforms;\n  }\n\n}\nexport function normalizeShaderModule(module) {\n  if (!module.normalized) {\n    module.normalized = true;\n\n    if (module.uniforms && !module.getUniforms) {\n      const shaderModule = new ShaderModule(module);\n      module.getUniforms = shaderModule.getUniforms.bind(shaderModule);\n    }\n  }\n\n  return module;\n}\n\nfunction normalizeInjections(injections) {\n  const result = {\n    vs: {},\n    fs: {}\n  };\n\n  for (const hook in injections) {\n    let injection = injections[hook];\n    const stage = hook.slice(0, 2);\n\n    if (typeof injection === 'string') {\n      injection = {\n        order: 0,\n        injection\n      };\n    }\n\n    result[stage][hook] = injection;\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader-module.js.map","import ShaderModule from './shader-module';\nimport { assert } from '../utils';\nexport function resolveModules(modules) {\n  return getShaderDependencies(instantiateModules(modules));\n}\n\nfunction getShaderDependencies(modules) {\n  const moduleMap = {};\n  const moduleDepth = {};\n  getDependencyGraph({\n    modules,\n    level: 0,\n    moduleMap,\n    moduleDepth\n  });\n  return Object.keys(moduleDepth).sort((a, b) => moduleDepth[b] - moduleDepth[a]).map(name => moduleMap[name]);\n}\n\nfunction getDependencyGraph({\n  modules,\n  level,\n  moduleMap,\n  moduleDepth\n}) {\n  if (level >= 5) {\n    throw new Error('Possible loop in shader dependency graph');\n  }\n\n  for (const module of modules) {\n    moduleMap[module.name] = module;\n\n    if (moduleDepth[module.name] === undefined || moduleDepth[module.name] < level) {\n      moduleDepth[module.name] = level;\n    }\n  }\n\n  for (const module of modules) {\n    if (module.dependencies) {\n      getDependencyGraph({\n        modules: module.dependencies,\n        level: level + 1,\n        moduleMap,\n        moduleDepth\n      });\n    }\n  }\n}\n\nfunction instantiateModules(modules, seen) {\n  return modules.map(module => {\n    if (module instanceof ShaderModule) {\n      return module;\n    }\n\n    assert(typeof module !== 'string', \"Shader module use by name is deprecated. Import shader module '\".concat(module, \"' and use it directly.\"));\n    assert(module.name, 'shader module has no name');\n    module = new ShaderModule(module);\n    module.dependencies = instantiateModules(module.dependencies);\n    return module;\n  });\n}\n\nexport const TEST_EXPORTS = {\n  getShaderDependencies,\n  getDependencyGraph\n};\n//# sourceMappingURL=resolve-modules.js.map","import isOldIE from './is-old-ie';\nimport assert from './assert';\nconst GL_VENDOR = 0x1f00;\nconst GL_RENDERER = 0x1f01;\nconst GL_VERSION = 0x1f02;\nconst GL_SHADING_LANGUAGE_VERSION = 0x8b8c;\nconst WEBGL_FEATURES = {\n  GLSL_FRAG_DATA: ['WEBGL_draw_buffers', true],\n  GLSL_FRAG_DEPTH: ['EXT_frag_depth', true],\n  GLSL_DERIVATIVES: ['OES_standard_derivatives', true],\n  GLSL_TEXTURE_LOD: ['EXT_shader_texture_lod', true]\n};\nconst FEATURES = {};\nObject.keys(WEBGL_FEATURES).forEach(key => {\n  FEATURES[key] = key;\n});\nexport { FEATURES };\n\nfunction isWebGL2(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && gl._version === 2);\n}\n\nexport function getContextInfo(gl) {\n  const info = gl.getExtension('WEBGL_debug_renderer_info');\n  const vendor = gl.getParameter(info && info.UNMASKED_VENDOR_WEBGL || GL_VENDOR);\n  const renderer = gl.getParameter(info && info.UNMASKED_RENDERER_WEBGL || GL_RENDERER);\n  const gpuVendor = identifyGPUVendor(vendor, renderer);\n  const gpuInfo = {\n    gpuVendor,\n    vendor,\n    renderer,\n    version: gl.getParameter(GL_VERSION),\n    shadingLanguageVersion: gl.getParameter(GL_SHADING_LANGUAGE_VERSION)\n  };\n  return gpuInfo;\n}\n\nfunction identifyGPUVendor(vendor, renderer) {\n  if (vendor.match(/NVIDIA/i) || renderer.match(/NVIDIA/i)) {\n    return 'NVIDIA';\n  }\n\n  if (vendor.match(/INTEL/i) || renderer.match(/INTEL/i)) {\n    return 'INTEL';\n  }\n\n  if (vendor.match(/AMD/i) || renderer.match(/AMD/i) || vendor.match(/ATI/i) || renderer.match(/ATI/i)) {\n    return 'AMD';\n  }\n\n  return 'UNKNOWN GPU';\n}\n\nconst compiledGlslExtensions = {};\nexport function canCompileGLGSExtension(gl, cap, opts = {}) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n\n  if (!isOldIE(opts)) {\n    return true;\n  }\n\n  if (cap in compiledGlslExtensions) {\n    return compiledGlslExtensions[cap];\n  }\n\n  const extensionName = feature[0];\n  const behavior = opts.behavior || 'enable';\n  const source = \"#extension GL_\".concat(extensionName, \" : \").concat(behavior, \"\\nvoid main(void) {}\");\n  const shader = gl.createShader(35633);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  const canCompile = gl.getShaderParameter(shader, 35713);\n  gl.deleteShader(shader);\n  compiledGlslExtensions[cap] = canCompile;\n  return canCompile;\n}\n\nfunction getFeature(gl, cap) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  const extensionName = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n  const value = typeof extensionName === 'string' ? Boolean(gl.getExtension(extensionName)) : extensionName;\n  assert(value === false || value === true);\n  return value;\n}\n\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(feature => getFeature(gl, feature));\n}\n//# sourceMappingURL=webgl-info.js.map","export default function isOldIE(opts = {}) {\n  const navigator = typeof window !== 'undefined' ? window.navigator || {} : {};\n  const userAgent = opts.userAgent || navigator.userAgent || '';\n  const isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  const isTrident = userAgent.indexOf('Trident/') !== -1;\n  return isMSIE || isTrident;\n}\n//# sourceMappingURL=is-old-ie.js.map","function testVariable(qualifier) {\n  return new RegExp(\"\\\\b\".concat(qualifier, \"[ \\\\t]+(\\\\w+[ \\\\t]+\\\\w+(\\\\[\\\\w+\\\\])?;)\"), 'g');\n}\n\nconst ES300_REPLACEMENTS = [[/^(#version[ \\t]+(100|300[ \\t]+es))?[ \\t]*\\n/, '#version 300 es\\n'], [/\\btexture(2D|2DProj|Cube)Lod(EXT)?\\(/g, 'textureLod('], [/\\btexture(2D|2DProj|Cube)(EXT)?\\(/g, 'texture(']];\nconst ES300_VERTEX_REPLACEMENTS = [...ES300_REPLACEMENTS, [testVariable('attribute'), 'in $1'], [testVariable('varying'), 'out $1']];\nconst ES300_FRAGMENT_REPLACEMENTS = [...ES300_REPLACEMENTS, [testVariable('varying'), 'in $1']];\nconst ES100_REPLACEMENTS = [[/^#version[ \\t]+300[ \\t]+es/, '#version 100'], [/\\btexture(2D|2DProj|Cube)Lod\\(/g, 'texture$1LodEXT('], [/\\btexture\\(/g, 'texture2D('], [/\\btextureLod\\(/g, 'texture2DLodEXT(']];\nconst ES100_VERTEX_REPLACEMENTS = [...ES100_REPLACEMENTS, [testVariable('in'), 'attribute $1'], [testVariable('out'), 'varying $1']];\nconst ES100_FRAGMENT_REPLACEMENTS = [...ES100_REPLACEMENTS, [testVariable('in'), 'varying $1']];\nconst ES100_FRAGMENT_OUTPUT_NAME = 'gl_FragColor';\nconst ES300_FRAGMENT_OUTPUT_REGEX = /\\bout[ \\t]+vec4[ \\t]+(\\w+)[ \\t]*;\\n?/;\nconst REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nexport default function transpileShader(source, targetGLSLVersion, isVertex) {\n  switch (targetGLSLVersion) {\n    case 300:\n      return isVertex ? convertShader(source, ES300_VERTEX_REPLACEMENTS) : convertFragmentShaderTo300(source);\n\n    case 100:\n      return isVertex ? convertShader(source, ES100_VERTEX_REPLACEMENTS) : convertFragmentShaderTo100(source);\n\n    default:\n      throw new Error(\"unknown GLSL version \".concat(targetGLSLVersion));\n  }\n}\n\nfunction convertShader(source, replacements) {\n  for (const [pattern, replacement] of replacements) {\n    source = source.replace(pattern, replacement);\n  }\n\n  return source;\n}\n\nfunction convertFragmentShaderTo300(source) {\n  source = convertShader(source, ES300_FRAGMENT_REPLACEMENTS);\n  const outputMatch = source.match(ES300_FRAGMENT_OUTPUT_REGEX);\n\n  if (outputMatch) {\n    const outputName = outputMatch[1];\n    source = source.replace(new RegExp(\"\\\\b\".concat(ES100_FRAGMENT_OUTPUT_NAME, \"\\\\b\"), 'g'), outputName);\n  } else {\n    const outputName = 'fragmentColor';\n    source = source.replace(REGEX_START_OF_MAIN, match => \"out vec4 \".concat(outputName, \";\\n\").concat(match)).replace(new RegExp(\"\\\\b\".concat(ES100_FRAGMENT_OUTPUT_NAME, \"\\\\b\"), 'g'), outputName);\n  }\n\n  return source;\n}\n\nfunction convertFragmentShaderTo100(source) {\n  source = convertShader(source, ES100_FRAGMENT_REPLACEMENTS);\n  const outputMatch = source.match(ES300_FRAGMENT_OUTPUT_REGEX);\n\n  if (outputMatch) {\n    const outputName = outputMatch[1];\n    source = source.replace(ES300_FRAGMENT_OUTPUT_REGEX, '').replace(new RegExp(\"\\\\b\".concat(outputName, \"\\\\b\"), 'g'), ES100_FRAGMENT_OUTPUT_NAME);\n  }\n\n  return source;\n}\n//# sourceMappingURL=transpile-shader.js.map","import { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { resolveModules } from './resolve-modules';\nimport { getPlatformShaderDefines, getVersionDefines } from './platform-defines';\nimport injectShader, { DECLARATION_INJECT_MARKER } from './inject-shader';\nimport transpileShader from './transpile-shader';\nimport { assert } from '../utils';\nconst INJECT_SHADER_DECLARATIONS = \"\\n\\n\".concat(DECLARATION_INJECT_MARKER, \"\\n\\n\");\nconst SHADER_TYPE = {\n  [VERTEX_SHADER]: 'vertex',\n  [FRAGMENT_SHADER]: 'fragment'\n};\nconst FRAGMENT_SHADER_PROLOGUE = \"precision highp float;\\n\\n\";\nexport function assembleShaders(gl, opts) {\n  const {\n    vs,\n    fs\n  } = opts;\n  const modules = resolveModules(opts.modules || []);\n  return {\n    gl,\n    vs: assembleShader(gl, Object.assign({}, opts, {\n      source: vs,\n      type: VERTEX_SHADER,\n      modules\n    })),\n    fs: assembleShader(gl, Object.assign({}, opts, {\n      source: fs,\n      type: FRAGMENT_SHADER,\n      modules\n    })),\n    getUniforms: assembleGetUniforms(modules)\n  };\n}\n\nfunction assembleShader(gl, {\n  id,\n  source,\n  type,\n  modules,\n  defines = {},\n  hookFunctions = [],\n  inject = {},\n  transpileToGLSL100 = false,\n  prologue = true,\n  log\n}) {\n  assert(typeof source === 'string', 'shader source must be a string');\n  const isVertex = type === VERTEX_SHADER;\n  const sourceLines = source.split('\\n');\n  let glslVersion = 100;\n  let versionLine = '';\n  let coreSource = source;\n\n  if (sourceLines[0].indexOf('#version ') === 0) {\n    glslVersion = 300;\n    versionLine = sourceLines[0];\n    coreSource = sourceLines.slice(1).join('\\n');\n  } else {\n    versionLine = \"#version \".concat(glslVersion);\n  }\n\n  const allDefines = {};\n  modules.forEach(module => {\n    Object.assign(allDefines, module.getDefines());\n  });\n  Object.assign(allDefines, defines);\n  let assembledSource = prologue ? \"\".concat(versionLine, \"\\n\").concat(getShaderName({\n    id,\n    source,\n    type\n  }), \"\\n\").concat(getShaderType({\n    type\n  }), \"\\n\").concat(getPlatformShaderDefines(gl), \"\\n\").concat(getVersionDefines(gl, glslVersion, !isVertex), \"\\n\").concat(getApplicationDefines(allDefines), \"\\n\").concat(isVertex ? '' : FRAGMENT_SHADER_PROLOGUE, \"\\n\") : \"\".concat(versionLine, \"\\n\");\n  const hookFunctionMap = normalizeHookFunctions(hookFunctions);\n  const hookInjections = {};\n  const declInjections = {};\n  const mainInjections = {};\n\n  for (const key in inject) {\n    const injection = typeof inject[key] === 'string' ? {\n      injection: inject[key],\n      order: 0\n    } : inject[key];\n    const match = key.match(/^(v|f)s:(#)?([\\w-]+)$/);\n\n    if (match) {\n      const hash = match[2];\n      const name = match[3];\n\n      if (hash) {\n        if (name === 'decl') {\n          declInjections[key] = [injection];\n        } else {\n          mainInjections[key] = [injection];\n        }\n      } else {\n        hookInjections[key] = [injection];\n      }\n    } else {\n      mainInjections[key] = [injection];\n    }\n  }\n\n  for (const module of modules) {\n    if (log) {\n      module.checkDeprecations(coreSource, log);\n    }\n\n    const moduleSource = module.getModuleSource(type, glslVersion);\n    assembledSource += moduleSource;\n    const injections = module.injections[type];\n\n    for (const key in injections) {\n      const match = key.match(/^(v|f)s:#([\\w-]+)$/);\n\n      if (match) {\n        const name = match[2];\n        const injectionType = name === 'decl' ? declInjections : mainInjections;\n        injectionType[key] = injectionType[key] || [];\n        injectionType[key].push(injections[key]);\n      } else {\n        hookInjections[key] = hookInjections[key] || [];\n        hookInjections[key].push(injections[key]);\n      }\n    }\n  }\n\n  assembledSource += INJECT_SHADER_DECLARATIONS;\n  assembledSource = injectShader(assembledSource, type, declInjections);\n  assembledSource += getHookFunctions(hookFunctionMap[type], hookInjections);\n  assembledSource += coreSource;\n  assembledSource = injectShader(assembledSource, type, mainInjections);\n  assembledSource = transpileShader(assembledSource, transpileToGLSL100 ? 100 : glslVersion, isVertex);\n  return assembledSource;\n}\n\nfunction assembleGetUniforms(modules) {\n  return function getUniforms(opts) {\n    const uniforms = {};\n\n    for (const module of modules) {\n      const moduleUniforms = module.getUniforms(opts, uniforms);\n      Object.assign(uniforms, moduleUniforms);\n    }\n\n    return uniforms;\n  };\n}\n\nfunction getShaderType({\n  type\n}) {\n  return \"\\n#define SHADER_TYPE_\".concat(SHADER_TYPE[type].toUpperCase(), \"\\n\");\n}\n\nfunction getShaderName({\n  id,\n  source,\n  type\n}) {\n  const injectShaderName = id && typeof id === 'string' && source.indexOf('SHADER_NAME') === -1;\n  return injectShaderName ? \"\\n#define SHADER_NAME \".concat(id, \"_\").concat(SHADER_TYPE[type], \"\\n\\n\") : '';\n}\n\nfunction getApplicationDefines(defines = {}) {\n  let count = 0;\n  let sourceText = '';\n\n  for (const define in defines) {\n    if (count === 0) {\n      sourceText += '\\n// APPLICATION DEFINES\\n';\n    }\n\n    count++;\n    const value = defines[define];\n\n    if (value || Number.isFinite(value)) {\n      sourceText += \"#define \".concat(define.toUpperCase(), \" \").concat(defines[define], \"\\n\");\n    }\n  }\n\n  if (count === 0) {\n    sourceText += '\\n';\n  }\n\n  return sourceText;\n}\n\nfunction getHookFunctions(hookFunctions, hookInjections) {\n  let result = '';\n\n  for (const hookName in hookFunctions) {\n    const hookFunction = hookFunctions[hookName];\n    result += \"void \".concat(hookFunction.signature, \" {\\n\");\n\n    if (hookFunction.header) {\n      result += \"  \".concat(hookFunction.header);\n    }\n\n    if (hookInjections[hookName]) {\n      const injections = hookInjections[hookName];\n      injections.sort((a, b) => a.order - b.order);\n\n      for (const injection of injections) {\n        result += \"  \".concat(injection.injection, \"\\n\");\n      }\n    }\n\n    if (hookFunction.footer) {\n      result += \"  \".concat(hookFunction.footer);\n    }\n\n    result += '}\\n';\n  }\n\n  return result;\n}\n\nfunction normalizeHookFunctions(hookFunctions) {\n  const result = {\n    vs: {},\n    fs: {}\n  };\n  hookFunctions.forEach(hook => {\n    let opts;\n\n    if (typeof hook !== 'string') {\n      opts = hook;\n      hook = opts.hook;\n    } else {\n      opts = {};\n    }\n\n    hook = hook.trim();\n    const [stage, signature] = hook.split(':');\n    const name = hook.replace(/\\(.+/, '');\n    result[stage][name] = Object.assign(opts, {\n      signature\n    });\n  });\n  return result;\n}\n//# sourceMappingURL=assemble-shaders.js.map","import { getContextInfo, hasFeatures, canCompileGLGSExtension, FEATURES } from '../utils/webgl-info';\nexport function getPlatformShaderDefines(gl) {\n  const debugInfo = getContextInfo(gl);\n\n  switch (debugInfo.gpuVendor.toLowerCase()) {\n    case 'nvidia':\n      return \"#define NVIDIA_GPU\\n// Nvidia optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n\";\n\n    case 'intel':\n      return \"#define INTEL_GPU\\n// Intel optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n\n    case 'amd':\n      return \"#define AMD_GPU\\n\";\n\n    default:\n      return \"#define DEFAULT_GPU\\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n  }\n}\nexport function getVersionDefines(gl, glslVersion, isFragment) {\n  let versionDefines = \"#if (__VERSION__ > 120)\\n\\n# define FEATURE_GLSL_DERIVATIVES\\n# define FEATURE_GLSL_DRAW_BUFFERS\\n# define FEATURE_GLSL_FRAG_DEPTH\\n# define FEATURE_GLSL_TEXTURE_LOD\\n\\n// DEPRECATED FLAGS, remove in v9\\n# define FRAG_DEPTH\\n# define DERIVATIVES\\n# define DRAW_BUFFERS\\n# define TEXTURE_LOD\\n\\n#endif // __VERSION\\n\";\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DEPTH)) {\n    versionDefines += \"\\n// FRAG_DEPTH => gl_FragDepth is available\\n#ifdef GL_EXT_frag_depth\\n#extension GL_EXT_frag_depth : enable\\n# define FEATURE_GLSL_FRAG_DEPTH\\n# define FRAG_DEPTH\\n# define gl_FragDepth gl_FragDepthEXT\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_DERIVATIVES) && canCompileGLGSExtension(gl, FEATURES.GLSL_DERIVATIVES)) {\n    versionDefines += \"\\n// DERIVATIVES => dxdF, dxdY and fwidth are available\\n#ifdef GL_OES_standard_derivatives\\n#extension GL_OES_standard_derivatives : enable\\n# define FEATURE_GLSL_DERIVATIVES\\n# define DERIVATIVES\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DATA) && canCompileGLGSExtension(gl, FEATURES.GLSL_FRAG_DATA, {\n    behavior: 'require'\n  })) {\n    versionDefines += \"\\n// DRAW_BUFFERS => gl_FragData[] is available\\n#ifdef GL_EXT_draw_buffers\\n#extension GL_EXT_draw_buffers : require\\n#define FEATURE_GLSL_DRAW_BUFFERS\\n#define DRAW_BUFFERS\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_TEXTURE_LOD)) {\n    versionDefines += \"// TEXTURE_LOD => texture2DLod etc are available\\n#ifdef GL_EXT_shader_texture_lod\\n#extension GL_EXT_shader_texture_lod : enable\\n\\n# define FEATURE_GLSL_TEXTURE_LOD\\n# define TEXTURE_LOD\\n\\n#endif\\n\";\n  }\n\n  return versionDefines;\n}\n//# sourceMappingURL=platform-defines.js.map","import { assembleShaders } from '@luma.gl/shadertools';\nimport { Program } from '@luma.gl/webgl';\nexport default class ProgramManager {\n  static getDefaultProgramManager(gl) {\n    gl.luma = gl.luma || {};\n    gl.luma.defaultProgramManager = gl.luma.defaultProgramManager || new ProgramManager(gl);\n    return gl.luma.defaultProgramManager;\n  }\n\n  constructor(gl) {\n    this.gl = gl;\n    this._programCache = {};\n    this._getUniforms = {};\n    this._registeredModules = {};\n    this._hookFunctions = [];\n    this._defaultModules = [];\n    this._hashes = {};\n    this._hashCounter = 0;\n    this.stateHash = 0;\n    this._useCounts = {};\n  }\n\n  addDefaultModule(module) {\n    if (!this._defaultModules.find(m => m.name === module.name)) {\n      this._defaultModules.push(module);\n    }\n\n    this.stateHash++;\n  }\n\n  removeDefaultModule(module) {\n    const moduleName = typeof module === 'string' ? module : module.name;\n    this._defaultModules = this._defaultModules.filter(m => m.name !== moduleName);\n    this.stateHash++;\n  }\n\n  addShaderHook(hook, opts) {\n    if (opts) {\n      hook = Object.assign(opts, {\n        hook\n      });\n    }\n\n    this._hookFunctions.push(hook);\n\n    this.stateHash++;\n  }\n\n  get(props = {}) {\n    const {\n      vs = '',\n      fs = '',\n      defines = {},\n      inject = {},\n      varyings = [],\n      bufferMode = 0x8c8d,\n      transpileToGLSL100 = false\n    } = props;\n\n    const modules = this._getModuleList(props.modules);\n\n    const vsHash = this._getHash(vs);\n\n    const fsHash = this._getHash(fs);\n\n    const moduleHashes = modules.map(m => this._getHash(m.name)).sort();\n    const varyingHashes = varyings.map(v => this._getHash(v));\n    const defineKeys = Object.keys(defines).sort();\n    const injectKeys = Object.keys(inject).sort();\n    const defineHashes = [];\n    const injectHashes = [];\n\n    for (const key of defineKeys) {\n      defineHashes.push(this._getHash(key));\n      defineHashes.push(this._getHash(defines[key]));\n    }\n\n    for (const key of injectKeys) {\n      injectHashes.push(this._getHash(key));\n      injectHashes.push(this._getHash(inject[key]));\n    }\n\n    const hash = \"\".concat(vsHash, \"/\").concat(fsHash, \"D\").concat(defineHashes.join('/'), \"M\").concat(moduleHashes.join('/'), \"I\").concat(injectHashes.join('/'), \"V\").concat(varyingHashes.join('/'), \"H\").concat(this.stateHash, \"B\").concat(bufferMode).concat(transpileToGLSL100 ? 'T' : '');\n\n    if (!this._programCache[hash]) {\n      const assembled = assembleShaders(this.gl, {\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        hookFunctions: this._hookFunctions,\n        transpileToGLSL100\n      });\n      this._programCache[hash] = new Program(this.gl, {\n        hash,\n        vs: assembled.vs,\n        fs: assembled.fs,\n        varyings,\n        bufferMode\n      });\n\n      this._getUniforms[hash] = assembled.getUniforms || (x => {});\n\n      this._useCounts[hash] = 0;\n    }\n\n    this._useCounts[hash]++;\n    return this._programCache[hash];\n  }\n\n  getUniforms(program) {\n    return this._getUniforms[program.hash] || null;\n  }\n\n  release(program) {\n    const hash = program.hash;\n    this._useCounts[hash]--;\n\n    if (this._useCounts[hash] === 0) {\n      this._programCache[hash].delete();\n\n      delete this._programCache[hash];\n      delete this._getUniforms[hash];\n      delete this._useCounts[hash];\n    }\n  }\n\n  _getHash(key) {\n    if (this._hashes[key] === undefined) {\n      this._hashes[key] = this._hashCounter++;\n    }\n\n    return this._hashes[key];\n  }\n\n  _getModuleList(appModules = []) {\n    const modules = new Array(this._defaultModules.length + appModules.length);\n    const seen = {};\n    let count = 0;\n\n    for (let i = 0, len = this._defaultModules.length; i < len; ++i) {\n      const module = this._defaultModules[i];\n      const name = module.name;\n      modules[count++] = module;\n      seen[name] = true;\n    }\n\n    for (let i = 0, len = appModules.length; i < len; ++i) {\n      const module = appModules[i];\n      const name = module.name;\n\n      if (!seen[name]) {\n        modules[count++] = module;\n        seen[name] = true;\n      }\n    }\n\n    modules.length = count;\n    return modules;\n  }\n\n}\n//# sourceMappingURL=program-manager.js.map","import { assert } from '../utils';\nconst FS100 = \"void main() {gl_FragColor = vec4(0);}\";\nconst FS_GLES = \"out vec4 transform_output;\\nvoid main() {\\n  transform_output = vec4(0);\\n}\";\nconst FS300 = \"#version 300 es\\n\".concat(FS_GLES);\nexport function getQualifierDetails(line, qualifiers) {\n  qualifiers = Array.isArray(qualifiers) ? qualifiers : [qualifiers];\n  const words = line.replace(/^\\s+/, '').split(/\\s+/);\n  const [qualifier, type, definition] = words;\n\n  if (!qualifiers.includes(qualifier) || !type || !definition) {\n    return null;\n  }\n\n  const name = definition.split(';')[0];\n  return {\n    qualifier,\n    type,\n    name\n  };\n}\nexport function getPassthroughFS(options = {}) {\n  const {\n    version = 100,\n    input,\n    inputType,\n    output\n  } = options;\n\n  if (!input) {\n    if (version === 300) {\n      return FS300;\n    } else if (version > 300) {\n      return \"#version \".concat(version, \"\\n\").concat(FS_GLES);\n    }\n\n    return FS100;\n  }\n\n  const outputValue = convertToVec4(input, inputType);\n\n  if (version >= 300) {\n    return \"#version \".concat(version, \" \").concat(version === 300 ? 'es' : '', \"\\nin \").concat(inputType, \" \").concat(input, \";\\nout vec4 \").concat(output, \";\\nvoid main() {\\n  \").concat(output, \" = \").concat(outputValue, \";\\n}\");\n  }\n\n  return \"varying \".concat(inputType, \" \").concat(input, \";\\nvoid main() {\\n  gl_FragColor = \").concat(outputValue, \";\\n}\");\n}\nexport function typeToChannelSuffix(type) {\n  switch (type) {\n    case 'float':\n      return 'x';\n\n    case 'vec2':\n      return 'xy';\n\n    case 'vec3':\n      return 'xyz';\n\n    case 'vec4':\n      return 'xyzw';\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function typeToChannelCount(type) {\n  switch (type) {\n    case 'float':\n      return 1;\n\n    case 'vec2':\n      return 2;\n\n    case 'vec3':\n      return 3;\n\n    case 'vec4':\n      return 4;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function convertToVec4(variable, type) {\n  switch (type) {\n    case 'float':\n      return \"vec4(\".concat(variable, \", 0.0, 0.0, 1.0)\");\n\n    case 'vec2':\n      return \"vec4(\".concat(variable, \", 0.0, 1.0)\");\n\n    case 'vec3':\n      return \"vec4(\".concat(variable, \", 1.0)\");\n\n    case 'vec4':\n      return variable;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\n//# sourceMappingURL=shader-utils.js.map","import { isWebGL2 } from '@luma.gl/gltools';\nimport { Buffer, TransformFeedback } from '@luma.gl/webgl';\nimport { assert } from '@luma.gl/webgl';\nexport default class BufferTransform {\n  constructor(gl, props = {}) {\n    this.gl = gl;\n    this.currentIndex = 0;\n    this.feedbackMap = {};\n    this.varyings = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  setupResources(opts) {\n    for (const binding of this.bindings) {\n      this._setupTransformFeedback(binding, opts);\n    }\n  }\n\n  updateModelProps(props = {}) {\n    const {\n      varyings\n    } = this;\n\n    if (varyings.length > 0) {\n      props = Object.assign({}, props, {\n        varyings\n      });\n    }\n\n    return props;\n  }\n\n  getDrawOptions(opts = {}) {\n    const binding = this.bindings[this.currentIndex];\n    const {\n      sourceBuffers,\n      transformFeedback\n    } = binding;\n    const attributes = Object.assign({}, sourceBuffers, opts.attributes);\n    return {\n      attributes,\n      transformFeedback\n    };\n  }\n\n  swap() {\n    if (this.feedbackMap) {\n      this.currentIndex = this._getNextIndex();\n      return true;\n    }\n\n    return false;\n  }\n\n  update(opts = {}) {\n    this._setupBuffers(opts);\n  }\n\n  getBuffer(varyingName) {\n    const {\n      feedbackBuffers\n    } = this.bindings[this.currentIndex];\n    const bufferOrParams = varyingName ? feedbackBuffers[varyingName] : null;\n\n    if (!bufferOrParams) {\n      return null;\n    }\n\n    return bufferOrParams instanceof Buffer ? bufferOrParams : bufferOrParams.buffer;\n  }\n\n  getData(options = {}) {\n    const {\n      varyingName\n    } = options;\n    const buffer = this.getBuffer(varyingName);\n\n    if (buffer) {\n      return buffer.getData();\n    }\n\n    return null;\n  }\n\n  delete() {\n    for (const name in this.resources) {\n      this.resources[name].delete();\n    }\n  }\n\n  _initialize(props = {}) {\n    this._setupBuffers(props);\n\n    this.varyings = props.varyings || Object.keys(this.bindings[this.currentIndex].feedbackBuffers);\n\n    if (this.varyings.length > 0) {\n      assert(isWebGL2(this.gl));\n    }\n  }\n\n  _getFeedbackBuffers(props) {\n    const {\n      sourceBuffers = {}\n    } = props;\n    const feedbackBuffers = {};\n\n    if (this.bindings[this.currentIndex]) {\n      Object.assign(feedbackBuffers, this.bindings[this.currentIndex].feedbackBuffers);\n    }\n\n    if (this.feedbackMap) {\n      for (const sourceName in this.feedbackMap) {\n        const feedbackName = this.feedbackMap[sourceName];\n\n        if (sourceName in sourceBuffers) {\n          feedbackBuffers[feedbackName] = sourceName;\n        }\n      }\n    }\n\n    Object.assign(feedbackBuffers, props.feedbackBuffers);\n\n    for (const bufferName in feedbackBuffers) {\n      const bufferOrRef = feedbackBuffers[bufferName];\n\n      if (typeof bufferOrRef === 'string') {\n        const sourceBuffer = sourceBuffers[bufferOrRef];\n        const {\n          byteLength,\n          usage,\n          accessor\n        } = sourceBuffer;\n        feedbackBuffers[bufferName] = this._createNewBuffer(bufferName, {\n          byteLength,\n          usage,\n          accessor\n        });\n      }\n    }\n\n    return feedbackBuffers;\n  }\n\n  _setupBuffers(props = {}) {\n    const {\n      sourceBuffers = null\n    } = props;\n    Object.assign(this.feedbackMap, props.feedbackMap);\n\n    const feedbackBuffers = this._getFeedbackBuffers(props);\n\n    this._updateBindings({\n      sourceBuffers,\n      feedbackBuffers\n    });\n  }\n\n  _setupTransformFeedback(binding, {\n    model\n  }) {\n    const {\n      program\n    } = model;\n    binding.transformFeedback = new TransformFeedback(this.gl, {\n      program,\n      buffers: binding.feedbackBuffers\n    });\n  }\n\n  _updateBindings(opts) {\n    this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n    if (this.feedbackMap) {\n      const {\n        sourceBuffers,\n        feedbackBuffers\n      } = this._swapBuffers(this.bindings[this.currentIndex]);\n\n      const nextIndex = this._getNextIndex();\n\n      this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n        sourceBuffers,\n        feedbackBuffers\n      });\n    }\n  }\n\n  _updateBinding(binding, opts) {\n    if (!binding) {\n      return {\n        sourceBuffers: Object.assign({}, opts.sourceBuffers),\n        feedbackBuffers: Object.assign({}, opts.feedbackBuffers)\n      };\n    }\n\n    Object.assign(binding.sourceBuffers, opts.sourceBuffers);\n    Object.assign(binding.feedbackBuffers, opts.feedbackBuffers);\n\n    if (binding.transformFeedback) {\n      binding.transformFeedback.setBuffers(binding.feedbackBuffers);\n    }\n\n    return binding;\n  }\n\n  _swapBuffers(opts) {\n    if (!this.feedbackMap) {\n      return null;\n    }\n\n    const sourceBuffers = Object.assign({}, opts.sourceBuffers);\n    const feedbackBuffers = Object.assign({}, opts.feedbackBuffers);\n\n    for (const srcName in this.feedbackMap) {\n      const dstName = this.feedbackMap[srcName];\n      sourceBuffers[srcName] = opts.feedbackBuffers[dstName];\n      feedbackBuffers[dstName] = opts.sourceBuffers[srcName];\n      assert(feedbackBuffers[dstName] instanceof Buffer);\n    }\n\n    return {\n      sourceBuffers,\n      feedbackBuffers\n    };\n  }\n\n  _createNewBuffer(name, opts) {\n    const buffer = new Buffer(this.gl, opts);\n\n    if (this.resources[name]) {\n      this.resources[name].delete();\n    }\n\n    this.resources[name] = buffer;\n    return buffer;\n  }\n\n  _getNextIndex() {\n    return (this.currentIndex + 1) % 2;\n  }\n\n}\n//# sourceMappingURL=buffer-transform.js.map","export default function getShaderVersion(source) {\n  let version = 100;\n  const words = source.match(/[^\\s]+/g);\n\n  if (words.length >= 2 && words[0] === '#version') {\n    const v = parseInt(words[1], 10);\n\n    if (Number.isFinite(v)) {\n      version = v;\n    }\n  }\n\n  return version;\n}\n//# sourceMappingURL=get-shader-version.js.map","const vs = \"attribute float transform_elementID;\\nvec2 transform_getPixelSizeHalf(vec2 size) {\\n  return vec2(1.) / (2. * size);\\n}\\n\\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\\n  return vec2(xIndex, yIndex);\\n}\\nvec2 transform_getTexCoord(vec2 size) {\\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\\n  vec2 coord = indices / size + pixelSizeHalf;\\n  return coord;\\n}\\nvec2 transform_getPos(vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\\n  return pos;\\n}\\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec4 textureColor = texture2D(texSampler, texCoord);\\n  return textureColor;\\n}\\n\";\nexport const transform = {\n  name: 'transform',\n  vs,\n  fs: null\n};\n//# sourceMappingURL=transform.js.map","import { assert } from '@luma.gl/webgl';\nimport { combineInjects, getQualifierDetails, typeToChannelSuffix } from '@luma.gl/shadertools';\nconst SAMPLER_UNIFORM_PREFIX = 'transform_uSampler_';\nconst SIZE_UNIFORM_PREFIX = 'transform_uSize_';\nconst VS_POS_VARIABLE = 'transform_position';\nexport function updateForTextures({\n  vs,\n  sourceTextureMap,\n  targetTextureVarying,\n  targetTexture\n}) {\n  const texAttributeNames = Object.keys(sourceTextureMap);\n  let sourceCount = texAttributeNames.length;\n  let targetTextureType = null;\n  const samplerTextureMap = {};\n  let updatedVs = vs;\n  let finalInject = {};\n\n  if (sourceCount > 0 || targetTextureVarying) {\n    const vsLines = updatedVs.split('\\n');\n    const updateVsLines = vsLines.slice();\n    vsLines.forEach((line, index, lines) => {\n      if (sourceCount > 0) {\n        const updated = processAttributeDefinition(line, sourceTextureMap);\n\n        if (updated) {\n          const {\n            updatedLine,\n            inject\n          } = updated;\n          updateVsLines[index] = updatedLine;\n          finalInject = combineInjects([finalInject, inject]);\n          Object.assign(samplerTextureMap, updated.samplerTextureMap);\n          sourceCount--;\n        }\n      }\n\n      if (targetTextureVarying && !targetTextureType) {\n        targetTextureType = getVaryingType(line, targetTextureVarying);\n      }\n    });\n\n    if (targetTextureVarying) {\n      assert(targetTexture);\n      const sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying);\n      const uniformDeclaration = \"uniform vec2 \".concat(sizeName, \";\\n\");\n      const posInstructions = \"     vec2 \".concat(VS_POS_VARIABLE, \" = transform_getPos(\").concat(sizeName, \");\\n     gl_Position = vec4(\").concat(VS_POS_VARIABLE, \", 0, 1.);\\n\");\n      const inject = {\n        'vs:#decl': uniformDeclaration,\n        'vs:#main-start': posInstructions\n      };\n      finalInject = combineInjects([finalInject, inject]);\n    }\n\n    updatedVs = updateVsLines.join('\\n');\n  }\n\n  return {\n    vs: updatedVs,\n    targetTextureType,\n    inject: finalInject,\n    samplerTextureMap\n  };\n}\nexport function getSizeUniforms({\n  sourceTextureMap,\n  targetTextureVarying,\n  targetTexture\n}) {\n  const uniforms = {};\n  let width;\n  let height;\n\n  if (targetTextureVarying) {\n    ({\n      width,\n      height\n    } = targetTexture);\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying)] = [width, height];\n  }\n\n  for (const textureName in sourceTextureMap) {\n    ({\n      width,\n      height\n    } = sourceTextureMap[textureName]);\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName)] = [width, height];\n  }\n\n  return uniforms;\n}\n\nfunction getAttributeDefinition(line) {\n  return getQualifierDetails(line, ['attribute', 'in']);\n}\n\nfunction getSamplerDeclerations(textureName) {\n  const samplerName = \"\".concat(SAMPLER_UNIFORM_PREFIX).concat(textureName);\n  const sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName);\n  const uniformDeclerations = \"  uniform sampler2D \".concat(samplerName, \";\\n  uniform vec2 \").concat(sizeName, \";\");\n  return {\n    samplerName,\n    sizeName,\n    uniformDeclerations\n  };\n}\n\nexport function getVaryingType(line, varying) {\n  const qualaiferDetails = getQualifierDetails(line, ['varying', 'out']);\n\n  if (!qualaiferDetails) {\n    return null;\n  }\n\n  return qualaiferDetails.name === varying ? qualaiferDetails.type : null;\n}\nexport function processAttributeDefinition(line, textureMap) {\n  const samplerTextureMap = {};\n  const attributeData = getAttributeDefinition(line);\n\n  if (!attributeData) {\n    return null;\n  }\n\n  const {\n    type,\n    name\n  } = attributeData;\n\n  if (name && textureMap[name]) {\n    const updatedLine = \"// \".concat(line, \" => Replaced by Transform with a sampler\");\n    const {\n      samplerName,\n      sizeName,\n      uniformDeclerations\n    } = getSamplerDeclerations(name);\n    const channels = typeToChannelSuffix(type);\n    const sampleInstruction = \"  \".concat(type, \" \").concat(name, \" = transform_getInput(\").concat(samplerName, \", \").concat(sizeName, \").\").concat(channels, \";\\n\");\n    samplerTextureMap[samplerName] = name;\n    const inject = {\n      'vs:#decl': uniformDeclerations,\n      'vs:#main-start': sampleInstruction\n    };\n    return {\n      updatedLine,\n      inject,\n      samplerTextureMap\n    };\n  }\n\n  return null;\n}\n//# sourceMappingURL=transform-shader-utils.js.map","import { cloneTextureFrom, readPixelsToArray, getShaderVersion, Buffer, Texture2D, Framebuffer } from '@luma.gl/webgl';\nimport { _transform as transformModule, getPassthroughFS, typeToChannelCount, combineInjects } from '@luma.gl/shadertools';\nimport { updateForTextures, getSizeUniforms } from './transform-shader-utils';\nconst SRC_TEX_PARAMETER_OVERRIDES = {\n  [10241]: 9728,\n  [10240]: 9728,\n  [10242]: 33071,\n  [10243]: 33071\n};\nconst FS_OUTPUT_VARIABLE = 'transform_output';\nexport default class TextureTransform {\n  constructor(gl, props = {}) {\n    this.gl = gl;\n    this.id = this.currentIndex = 0;\n    this._swapTexture = null;\n    this.targetTextureVarying = null;\n    this.targetTextureType = null;\n    this.samplerTextureMap = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  updateModelProps(props = {}) {\n    const updatedModelProps = this._processVertexShader(props);\n\n    return Object.assign({}, props, updatedModelProps);\n  }\n\n  getDrawOptions(opts = {}) {\n    const {\n      sourceBuffers,\n      sourceTextures,\n      framebuffer,\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    const attributes = Object.assign({}, sourceBuffers, opts.attributes);\n    const uniforms = Object.assign({}, opts.uniforms);\n    const parameters = Object.assign({}, opts.parameters);\n    let discard = opts.discard;\n\n    if (this.hasSourceTextures || this.hasTargetTexture) {\n      attributes.transform_elementID = this.elementIDBuffer;\n\n      for (const sampler in this.samplerTextureMap) {\n        const textureName = this.samplerTextureMap[sampler];\n        uniforms[sampler] = sourceTextures[textureName];\n      }\n\n      this._setSourceTextureParameters();\n\n      const sizeUniforms = getSizeUniforms({\n        sourceTextureMap: sourceTextures,\n        targetTextureVarying: this.targetTextureVarying,\n        targetTexture\n      });\n      Object.assign(uniforms, sizeUniforms);\n    }\n\n    if (this.hasTargetTexture) {\n      discard = false;\n      parameters.viewport = [0, 0, framebuffer.width, framebuffer.height];\n    }\n\n    return {\n      attributes,\n      framebuffer,\n      uniforms,\n      discard,\n      parameters\n    };\n  }\n\n  swap() {\n    if (this._swapTexture) {\n      this.currentIndex = this._getNextIndex();\n      return true;\n    }\n\n    return false;\n  }\n\n  update(opts = {}) {\n    this._setupTextures(opts);\n  }\n\n  getTargetTexture() {\n    const {\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    return targetTexture;\n  }\n\n  getData({\n    packed = false\n  } = {}) {\n    const {\n      framebuffer\n    } = this.bindings[this.currentIndex];\n    const pixels = readPixelsToArray(framebuffer);\n\n    if (!packed) {\n      return pixels;\n    }\n\n    const ArrayType = pixels.constructor;\n    const channelCount = typeToChannelCount(this.targetTextureType);\n    const packedPixels = new ArrayType(pixels.length * channelCount / 4);\n    let packCount = 0;\n\n    for (let i = 0; i < pixels.length; i += 4) {\n      for (let j = 0; j < channelCount; j++) {\n        packedPixels[packCount++] = pixels[i + j];\n      }\n    }\n\n    return packedPixels;\n  }\n\n  getFramebuffer() {\n    const currentResources = this.bindings[this.currentIndex];\n    return currentResources.framebuffer;\n  }\n\n  delete() {\n    if (this.ownTexture) {\n      this.ownTexture.delete();\n    }\n\n    if (this.elementIDBuffer) {\n      this.elementIDBuffer.delete();\n    }\n  }\n\n  _initialize(props = {}) {\n    const {\n      _targetTextureVarying,\n      _swapTexture\n    } = props;\n    this._swapTexture = _swapTexture;\n    this.targetTextureVarying = _targetTextureVarying;\n    this.hasTargetTexture = _targetTextureVarying;\n\n    this._setupTextures(props);\n  }\n\n  _createTargetTexture(props) {\n    const {\n      sourceTextures,\n      textureOrReference\n    } = props;\n\n    if (textureOrReference instanceof Texture2D) {\n      return textureOrReference;\n    }\n\n    const refTexture = sourceTextures[textureOrReference];\n\n    if (!refTexture) {\n      return null;\n    }\n\n    this._targetRefTexName = textureOrReference;\n    return this._createNewTexture(refTexture);\n  }\n\n  _setupTextures(props = {}) {\n    const {\n      sourceBuffers,\n      _sourceTextures = {},\n      _targetTexture\n    } = props;\n\n    const targetTexture = this._createTargetTexture({\n      sourceTextures: _sourceTextures,\n      textureOrReference: _targetTexture\n    });\n\n    this.hasSourceTextures = this.hasSourceTextures || _sourceTextures && Object.keys(_sourceTextures).length > 0;\n\n    this._updateBindings({\n      sourceBuffers,\n      sourceTextures: _sourceTextures,\n      targetTexture\n    });\n\n    if ('elementCount' in props) {\n      this._updateElementIDBuffer(props.elementCount);\n    }\n  }\n\n  _updateElementIDBuffer(elementCount) {\n    if (typeof elementCount !== 'number' || this.elementCount >= elementCount) {\n      return;\n    }\n\n    const elementIds = new Float32Array(elementCount);\n    elementIds.forEach((_, index, array) => {\n      array[index] = index;\n    });\n\n    if (!this.elementIDBuffer) {\n      this.elementIDBuffer = new Buffer(this.gl, {\n        data: elementIds,\n        accessor: {\n          size: 1\n        }\n      });\n    } else {\n      this.elementIDBuffer.setData({\n        data: elementIds\n      });\n    }\n\n    this.elementCount = elementCount;\n  }\n\n  _updateBindings(opts) {\n    this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n    if (this._swapTexture) {\n      const {\n        sourceTextures,\n        targetTexture\n      } = this._swapTextures(this.bindings[this.currentIndex]);\n\n      const nextIndex = this._getNextIndex();\n\n      this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n        sourceTextures,\n        targetTexture\n      });\n    }\n  }\n\n  _updateBinding(binding, opts) {\n    const {\n      sourceBuffers,\n      sourceTextures,\n      targetTexture\n    } = opts;\n\n    if (!binding) {\n      binding = {\n        sourceBuffers: {},\n        sourceTextures: {},\n        targetTexture: null\n      };\n    }\n\n    Object.assign(binding.sourceTextures, sourceTextures);\n    Object.assign(binding.sourceBuffers, sourceBuffers);\n\n    if (targetTexture) {\n      binding.targetTexture = targetTexture;\n      const {\n        width,\n        height\n      } = targetTexture;\n      const {\n        framebuffer\n      } = binding;\n\n      if (framebuffer) {\n        framebuffer.update({\n          attachments: {\n            [36064]: targetTexture\n          },\n          resizeAttachments: false\n        });\n        framebuffer.resize({\n          width,\n          height\n        });\n      } else {\n        binding.framebuffer = new Framebuffer(this.gl, {\n          id: \"transform-framebuffer\",\n          width,\n          height,\n          attachments: {\n            [36064]: targetTexture\n          }\n        });\n      }\n    }\n\n    return binding;\n  }\n\n  _setSourceTextureParameters() {\n    const index = this.currentIndex;\n    const {\n      sourceTextures\n    } = this.bindings[index];\n\n    for (const name in sourceTextures) {\n      sourceTextures[name].setParameters(SRC_TEX_PARAMETER_OVERRIDES);\n    }\n  }\n\n  _swapTextures(opts) {\n    if (!this._swapTexture) {\n      return null;\n    }\n\n    const sourceTextures = Object.assign({}, opts.sourceTextures);\n    sourceTextures[this._swapTexture] = opts.targetTexture;\n    const targetTexture = opts.sourceTextures[this._swapTexture];\n    return {\n      sourceTextures,\n      targetTexture\n    };\n  }\n\n  _createNewTexture(refTexture) {\n    const texture = cloneTextureFrom(refTexture, {\n      parameters: {\n        [10241]: 9728,\n        [10240]: 9728,\n        [10242]: 33071,\n        [10243]: 33071\n      },\n      pixelStore: {\n        [37440]: false\n      }\n    });\n\n    if (this.ownTexture) {\n      this.ownTexture.delete();\n    }\n\n    this.ownTexture = texture;\n    return texture;\n  }\n\n  _getNextIndex() {\n    return (this.currentIndex + 1) % 2;\n  }\n\n  _processVertexShader(props = {}) {\n    const {\n      sourceTextures,\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    const {\n      vs,\n      uniforms,\n      targetTextureType,\n      inject,\n      samplerTextureMap\n    } = updateForTextures({\n      vs: props.vs,\n      sourceTextureMap: sourceTextures,\n      targetTextureVarying: this.targetTextureVarying,\n      targetTexture\n    });\n    const combinedInject = combineInjects([props.inject || {}, inject]);\n    this.targetTextureType = targetTextureType;\n    this.samplerTextureMap = samplerTextureMap;\n    const fs = props._fs || getPassthroughFS({\n      version: getShaderVersion(vs),\n      input: this.targetTextureVarying,\n      inputType: targetTextureType,\n      output: FS_OUTPUT_VARIABLE\n    });\n    const modules = this.hasSourceTextures || this.targetTextureVarying ? [transformModule].concat(props.modules || []) : props.modules;\n    return {\n      vs,\n      fs,\n      modules,\n      uniforms,\n      inject: combinedInject\n    };\n  }\n\n}\n//# sourceMappingURL=texture-transform.js.map","import { getPassthroughFS } from '@luma.gl/shadertools';\nimport BufferTransform from './buffer-transform';\nimport TextureTransform from './texture-transform';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert, isObjectEmpty, getShaderVersion } from '@luma.gl/webgl';\nimport Model from '../lib/model';\nexport default class Transform {\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl, props = {}) {\n    this.gl = gl;\n    this.model = null;\n    this.elementCount = 0;\n    this.bufferTransform = null;\n    this.textureTransform = null;\n    this.elementIDBuffer = null;\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  delete() {\n    const {\n      model,\n      bufferTransform,\n      textureTransform\n    } = this;\n\n    if (model) {\n      model.delete();\n    }\n\n    if (bufferTransform) {\n      bufferTransform.delete();\n    }\n\n    if (textureTransform) {\n      textureTransform.delete();\n    }\n  }\n\n  run(opts = {}) {\n    const {\n      clearRenderTarget = true\n    } = opts;\n\n    const updatedOpts = this._updateDrawOptions(opts);\n\n    if (clearRenderTarget && updatedOpts.framebuffer) {\n      updatedOpts.framebuffer.clear({\n        color: true\n      });\n    }\n\n    this.model.transform(updatedOpts);\n  }\n\n  swap() {\n    let swapped = false;\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      swapped = swapped || resourceTransform.swap();\n    }\n\n    assert(swapped, 'Nothing to swap');\n  }\n\n  getBuffer(varyingName = null) {\n    return this.bufferTransform && this.bufferTransform.getBuffer(varyingName);\n  }\n\n  getData(opts = {}) {\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      const data = resourceTransform.getData(opts);\n\n      if (data) {\n        return data;\n      }\n    }\n\n    return null;\n  }\n\n  getFramebuffer() {\n    return this.textureTransform && this.textureTransform.getFramebuffer();\n  }\n\n  update(opts = {}) {\n    if ('elementCount' in opts) {\n      this.model.setVertexCount(opts.elementCount);\n    }\n\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      resourceTransform.update(opts);\n    }\n  }\n\n  _initialize(props = {}) {\n    const {\n      gl\n    } = this;\n\n    this._buildResourceTransforms(gl, props);\n\n    props = this._updateModelProps(props);\n    this.model = new Model(gl, Object.assign({}, props, {\n      fs: props.fs || getPassthroughFS({\n        version: getShaderVersion(props.vs)\n      }),\n      id: props.id || 'transform-model',\n      drawMode: props.drawMode || 0,\n      vertexCount: props.elementCount\n    }));\n    this.bufferTransform && this.bufferTransform.setupResources({\n      model: this.model\n    });\n  }\n\n  _updateModelProps(props) {\n    let updatedProps = Object.assign({}, props);\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      updatedProps = resourceTransform.updateModelProps(updatedProps);\n    }\n\n    return updatedProps;\n  }\n\n  _buildResourceTransforms(gl, props) {\n    if (canCreateBufferTransform(props)) {\n      this.bufferTransform = new BufferTransform(gl, props);\n    }\n\n    if (canCreateTextureTransform(props)) {\n      this.textureTransform = new TextureTransform(gl, props);\n    }\n\n    assert(this.bufferTransform || this.textureTransform, 'must provide source/feedback buffers or source/target textures');\n  }\n\n  _updateDrawOptions(opts) {\n    let updatedOpts = Object.assign({}, opts);\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      updatedOpts = Object.assign(updatedOpts, resourceTransform.getDrawOptions(updatedOpts));\n    }\n\n    return updatedOpts;\n  }\n\n}\n\nfunction canCreateBufferTransform(props) {\n  if (!isObjectEmpty(props.feedbackBuffers) || !isObjectEmpty(props.feedbackMap) || props.varyings && props.varyings.length > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction canCreateTextureTransform(props) {\n  if (!isObjectEmpty(props._sourceTextures) || props._targetTexture || props._targetTextureVarying) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=transform.js.map","import { Log } from 'probe.gl';\nexport const log = new Log({\n  id: 'luma.gl'\n});\n//# sourceMappingURL=log.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { assert } from './assert';\nconst ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexport const ERR_WEBGL = ERR_CONTEXT;\nexport const ERR_WEBGL2 = 'Requires WebGL2';\nexport function isWebGL(gl) {\n  if (typeof WebGLRenderingContext !== 'undefined' && gl instanceof WebGLRenderingContext) {\n    return true;\n  }\n\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && Number.isFinite(gl._version));\n}\nexport function isWebGL2(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && gl._version === 2);\n}\nexport function getWebGL2Context(gl) {\n  return isWebGL2(gl) ? gl : null;\n}\nexport function assertWebGLContext(gl) {\n  assert(isWebGL(gl), ERR_CONTEXT);\n  return gl;\n}\nexport function assertWebGL2Context(gl) {\n  assert(isWebGL2(gl), ERR_WEBGL2);\n  return gl;\n}\n//# sourceMappingURL=webgl-checks.js.map","import { global } from 'probe.gl/env';\nconst glErrorShadow = {};\n\nfunction error(msg) {\n  if (global.console && global.console.error) {\n    global.console.error(msg);\n  }\n}\n\nfunction log(msg) {\n  if (global.console && global.console.log) {\n    global.console.log(msg);\n  }\n}\n\nfunction synthesizeGLError(err, opt_msg) {\n  glErrorShadow[err] = true;\n\n  if (opt_msg !== undefined) {\n    error(opt_msg);\n  }\n}\n\nfunction wrapGLError(gl) {\n  const f = gl.getError;\n\n  gl.getError = function getError() {\n    let err;\n\n    do {\n      err = f.apply(gl);\n\n      if (err !== 0) {\n        glErrorShadow[err] = true;\n      }\n    } while (err !== 0);\n\n    for (err in glErrorShadow) {\n      if (glErrorShadow[err]) {\n        delete glErrorShadow[err];\n        return parseInt(err, 10);\n      }\n    }\n\n    return 0;\n  };\n}\n\nconst WebGLVertexArrayObjectOES = function WebGLVertexArrayObjectOES(ext) {\n  const gl = ext.gl;\n  this.ext = ext;\n  this.isAlive = true;\n  this.hasBeenBound = false;\n  this.elementArrayBuffer = null;\n  this.attribs = new Array(ext.maxVertexAttribs);\n\n  for (let n = 0; n < this.attribs.length; n++) {\n    const attrib = new WebGLVertexArrayObjectOES.VertexAttrib(gl);\n    this.attribs[n] = attrib;\n  }\n\n  this.maxAttrib = 0;\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib = function VertexAttrib(gl) {\n  this.enabled = false;\n  this.buffer = null;\n  this.size = 4;\n  this.type = 5126;\n  this.normalized = false;\n  this.stride = 16;\n  this.offset = 0;\n  this.cached = '';\n  this.recache();\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib.prototype.recache = function recache() {\n  this.cached = [this.size, this.type, this.normalized, this.stride, this.offset].join(':');\n};\n\nconst OESVertexArrayObject = function OESVertexArrayObject(gl) {\n  const self = this;\n  this.gl = gl;\n  wrapGLError(gl);\n  const original = this.original = {\n    getParameter: gl.getParameter,\n    enableVertexAttribArray: gl.enableVertexAttribArray,\n    disableVertexAttribArray: gl.disableVertexAttribArray,\n    bindBuffer: gl.bindBuffer,\n    getVertexAttrib: gl.getVertexAttrib,\n    vertexAttribPointer: gl.vertexAttribPointer\n  };\n\n  gl.getParameter = function getParameter(pname) {\n    if (pname === self.VERTEX_ARRAY_BINDING_OES) {\n      if (self.currentVertexArrayObject === self.defaultVertexArrayObject) {\n        return null;\n      }\n\n      return self.currentVertexArrayObject;\n    }\n\n    return original.getParameter.apply(this, arguments);\n  };\n\n  gl.enableVertexAttribArray = function enableVertexAttribArray(index) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    const attrib = vao.attribs[index];\n    attrib.enabled = true;\n    return original.enableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.disableVertexAttribArray = function disableVertexAttribArray(index) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    const attrib = vao.attribs[index];\n    attrib.enabled = false;\n    return original.disableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.bindBuffer = function bindBuffer(target, buffer) {\n    switch (target) {\n      case 34962:\n        self.currentArrayBuffer = buffer;\n        break;\n\n      case 34963:\n        self.currentVertexArrayObject.elementArrayBuffer = buffer;\n        break;\n\n      default:\n    }\n\n    return original.bindBuffer.apply(this, arguments);\n  };\n\n  gl.getVertexAttrib = function getVertexAttrib(index, pname) {\n    const vao = self.currentVertexArrayObject;\n    const attrib = vao.attribs[index];\n\n    switch (pname) {\n      case 34975:\n        return attrib.buffer;\n\n      case 34338:\n        return attrib.enabled;\n\n      case 34339:\n        return attrib.size;\n\n      case 34340:\n        return attrib.stride;\n\n      case 34341:\n        return attrib.type;\n\n      case 34922:\n        return attrib.normalized;\n\n      default:\n        return original.getVertexAttrib.apply(this, arguments);\n    }\n  };\n\n  gl.vertexAttribPointer = function vertexAttribPointer(indx, size, type, normalized, stride, offset) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, indx);\n    const attrib = vao.attribs[indx];\n    attrib.buffer = self.currentArrayBuffer;\n    attrib.size = size;\n    attrib.type = type;\n    attrib.normalized = normalized;\n    attrib.stride = stride;\n    attrib.offset = offset;\n    attrib.recache();\n    return original.vertexAttribPointer.apply(this, arguments);\n  };\n\n  if (gl.instrumentExtension) {\n    gl.instrumentExtension(this, 'OES_vertex_array_object');\n  }\n\n  if (gl.canvas) {\n    gl.canvas.addEventListener('webglcontextrestored', () => {\n      log('OESVertexArrayObject emulation library context restored');\n      self.reset_();\n    }, true);\n  }\n\n  this.reset_();\n};\n\nOESVertexArrayObject.prototype.VERTEX_ARRAY_BINDING_OES = 0x85b5;\n\nOESVertexArrayObject.prototype.reset_ = function reset_() {\n  const contextWasLost = this.vertexArrayObjects !== undefined;\n\n  if (contextWasLost) {\n    for (let ii = 0; ii < this.vertexArrayObjects.length; ++ii) {\n      this.vertexArrayObjects.isAlive = false;\n    }\n  }\n\n  const gl = this.gl;\n  this.maxVertexAttribs = gl.getParameter(34921);\n  this.defaultVertexArrayObject = new WebGLVertexArrayObjectOES(this);\n  this.currentVertexArrayObject = null;\n  this.currentArrayBuffer = null;\n  this.vertexArrayObjects = [this.defaultVertexArrayObject];\n  this.bindVertexArrayOES(null);\n};\n\nOESVertexArrayObject.prototype.createVertexArrayOES = function createVertexArrayOES() {\n  const arrayObject = new WebGLVertexArrayObjectOES(this);\n  this.vertexArrayObjects.push(arrayObject);\n  return arrayObject;\n};\n\nOESVertexArrayObject.prototype.deleteVertexArrayOES = function deleteVertexArrayOES(arrayObject) {\n  arrayObject.isAlive = false;\n  this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(arrayObject), 1);\n\n  if (this.currentVertexArrayObject === arrayObject) {\n    this.bindVertexArrayOES(null);\n  }\n};\n\nOESVertexArrayObject.prototype.isVertexArrayOES = function isVertexArrayOES(arrayObject) {\n  if (arrayObject && arrayObject instanceof WebGLVertexArrayObjectOES) {\n    if (arrayObject.hasBeenBound && arrayObject.ext === this) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nOESVertexArrayObject.prototype.bindVertexArrayOES = function bindVertexArrayOES(arrayObject) {\n  const gl = this.gl;\n\n  if (arrayObject && !arrayObject.isAlive) {\n    synthesizeGLError(1282, 'bindVertexArrayOES: attempt to bind deleted arrayObject');\n    return;\n  }\n\n  const original = this.original;\n  const oldVAO = this.currentVertexArrayObject;\n  this.currentVertexArrayObject = arrayObject || this.defaultVertexArrayObject;\n  this.currentVertexArrayObject.hasBeenBound = true;\n  const newVAO = this.currentVertexArrayObject;\n\n  if (oldVAO === newVAO) {\n    return;\n  }\n\n  if (!oldVAO || newVAO.elementArrayBuffer !== oldVAO.elementArrayBuffer) {\n    original.bindBuffer.call(gl, 34963, newVAO.elementArrayBuffer);\n  }\n\n  let currentBinding = this.currentArrayBuffer;\n  const maxAttrib = Math.max(oldVAO ? oldVAO.maxAttrib : 0, newVAO.maxAttrib);\n\n  for (let n = 0; n <= maxAttrib; n++) {\n    const attrib = newVAO.attribs[n];\n    const oldAttrib = oldVAO ? oldVAO.attribs[n] : null;\n\n    if (!oldVAO || attrib.enabled !== oldAttrib.enabled) {\n      if (attrib.enabled) {\n        original.enableVertexAttribArray.call(gl, n);\n      } else {\n        original.disableVertexAttribArray.call(gl, n);\n      }\n    }\n\n    if (attrib.enabled) {\n      let bufferChanged = false;\n\n      if (!oldVAO || attrib.buffer !== oldAttrib.buffer) {\n        if (currentBinding !== attrib.buffer) {\n          original.bindBuffer.call(gl, 34962, attrib.buffer);\n          currentBinding = attrib.buffer;\n        }\n\n        bufferChanged = true;\n      }\n\n      if (bufferChanged || attrib.cached !== oldAttrib.cached) {\n        original.vertexAttribPointer.call(gl, n, attrib.size, attrib.type, attrib.normalized, attrib.stride, attrib.offset);\n      }\n    }\n  }\n\n  if (this.currentArrayBuffer !== currentBinding) {\n    original.bindBuffer.call(gl, 34962, this.currentArrayBuffer);\n  }\n};\n\nexport function polyfillVertexArrayObject(gl) {\n  if (typeof gl.createVertexArray === 'function') {\n    return;\n  }\n\n  const original_getSupportedExtensions = gl.getSupportedExtensions;\n\n  gl.getSupportedExtensions = function getSupportedExtensions() {\n    const list = original_getSupportedExtensions.call(this) || [];\n\n    if (list.indexOf('OES_vertex_array_object') < 0) {\n      list.push('OES_vertex_array_object');\n    }\n\n    return list;\n  };\n\n  const original_getExtension = gl.getExtension;\n\n  gl.getExtension = function getExtension(name) {\n    const ext = original_getExtension.call(this, name);\n\n    if (ext) {\n      return ext;\n    }\n\n    if (name !== 'OES_vertex_array_object') {\n      return null;\n    }\n\n    if (!gl.__OESVertexArrayObject) {\n      this.__OESVertexArrayObject = new OESVertexArrayObject(this);\n    }\n\n    return this.__OESVertexArrayObject;\n  };\n}\n//# sourceMappingURL=polyfill-vertex-array-object.js.map","import { isWebGL2 } from '../utils/webgl-checks';\nconst OES_element_index = 'OES_element_index';\nconst WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nconst EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nconst EXT_disjoint_timer_query_webgl2 = 'EXT_disjoint_timer_query_webgl2';\nconst EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nconst WEBGL_debug_renderer_info = 'WEBGL_debug_renderer_info';\nconst GL_FRAGMENT_SHADER_DERIVATIVE_HINT = 0x8b8b;\nconst GL_DONT_CARE = 0x1100;\nconst GL_GPU_DISJOINT_EXT = 0x8fbb;\nconst GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84ff;\nconst GL_UNMASKED_VENDOR_WEBGL = 0x9245;\nconst GL_UNMASKED_RENDERER_WEBGL = 0x9246;\n\nconst getWebGL2ValueOrZero = gl => !isWebGL2(gl) ? 0 : undefined;\n\nconst WEBGL_PARAMETERS = {\n  [3074]: gl => !isWebGL2(gl) ? 36064 : undefined,\n  [GL_FRAGMENT_SHADER_DERIVATIVE_HINT]: gl => !isWebGL2(gl) ? GL_DONT_CARE : undefined,\n  [35977]: getWebGL2ValueOrZero,\n  [32937]: getWebGL2ValueOrZero,\n  [GL_GPU_DISJOINT_EXT]: (gl, getParameter) => {\n    const ext = isWebGL2(gl) ? gl.getExtension(EXT_disjoint_timer_query_webgl2) : gl.getExtension(EXT_disjoint_timer_query);\n    return ext && ext.GPU_DISJOINT_EXT ? getParameter(ext.GPU_DISJOINT_EXT) : 0;\n  },\n  [GL_UNMASKED_VENDOR_WEBGL]: (gl, getParameter) => {\n    const ext = gl.getExtension(WEBGL_debug_renderer_info);\n    return getParameter(ext && ext.UNMASKED_VENDOR_WEBGL || 7936);\n  },\n  [GL_UNMASKED_RENDERER_WEBGL]: (gl, getParameter) => {\n    const ext = gl.getExtension(WEBGL_debug_renderer_info);\n    return getParameter(ext && ext.UNMASKED_RENDERER_WEBGL || 7937);\n  },\n  [GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT]: (gl, getParameter) => {\n    const ext = gl.luma.extensions[EXT_texture_filter_anisotropic];\n    return ext ? getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1.0;\n  },\n  [32883]: getWebGL2ValueOrZero,\n  [35071]: getWebGL2ValueOrZero,\n  [37447]: getWebGL2ValueOrZero,\n  [36063]: (gl, getParameter) => {\n    if (!isWebGL2(gl)) {\n      const ext = gl.getExtension(WEBGL_draw_buffers);\n      return ext ? getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL) : 0;\n    }\n\n    return undefined;\n  },\n  [35379]: getWebGL2ValueOrZero,\n  [35374]: getWebGL2ValueOrZero,\n  [35377]: getWebGL2ValueOrZero,\n  [34852]: gl => {\n    if (!isWebGL2(gl)) {\n      const ext = gl.getExtension(WEBGL_draw_buffers);\n      return ext ? ext.MAX_DRAW_BUFFERS_WEBGL : 0;\n    }\n\n    return undefined;\n  },\n  [36203]: gl => gl.getExtension(OES_element_index) ? 2147483647 : 65535,\n  [33001]: gl => gl.getExtension(OES_element_index) ? 16777216 : 65535,\n  [33000]: gl => 16777216,\n  [37157]: getWebGL2ValueOrZero,\n  [35373]: getWebGL2ValueOrZero,\n  [35657]: getWebGL2ValueOrZero,\n  [36183]: getWebGL2ValueOrZero,\n  [37137]: getWebGL2ValueOrZero,\n  [34045]: getWebGL2ValueOrZero,\n  [35978]: getWebGL2ValueOrZero,\n  [35979]: getWebGL2ValueOrZero,\n  [35968]: getWebGL2ValueOrZero,\n  [35376]: getWebGL2ValueOrZero,\n  [35375]: getWebGL2ValueOrZero,\n  [35659]: getWebGL2ValueOrZero,\n  [37154]: getWebGL2ValueOrZero,\n  [35371]: getWebGL2ValueOrZero,\n  [35658]: getWebGL2ValueOrZero,\n  [35076]: getWebGL2ValueOrZero,\n  [35077]: getWebGL2ValueOrZero,\n  [35380]: getWebGL2ValueOrZero\n};\nexport function getParameterPolyfill(gl, originalGetParameter, pname) {\n  const limit = WEBGL_PARAMETERS[pname];\n  const value = typeof limit === 'function' ? limit(gl, originalGetParameter, pname) : limit;\n  const result = value !== undefined ? value : originalGetParameter(pname);\n  return result;\n}\n//# sourceMappingURL=get-parameter-polyfill.js.map","import { assert } from '../utils/assert';\nimport { isWebGL2 } from '../utils/webgl-checks';\nimport { getParameterPolyfill } from './get-parameter-polyfill';\nconst OES_vertex_array_object = 'OES_vertex_array_object';\nconst ANGLE_instanced_arrays = 'ANGLE_instanced_arrays';\nconst WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nconst EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nconst EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nconst ERR_VAO_NOT_SUPPORTED = 'VertexArray requires WebGL2 or OES_vertex_array_object extension';\n\nfunction getExtensionData(gl, extension) {\n  return {\n    webgl2: isWebGL2(gl),\n    ext: gl.getExtension(extension)\n  };\n}\n\nexport const WEBGL2_CONTEXT_POLYFILLS = {\n  [OES_vertex_array_object]: {\n    meta: {\n      suffix: 'OES'\n    },\n    createVertexArray: () => {\n      assert(false, ERR_VAO_NOT_SUPPORTED);\n    },\n    deleteVertexArray: () => {},\n    bindVertexArray: () => {},\n    isVertexArray: () => false\n  },\n  [ANGLE_instanced_arrays]: {\n    meta: {\n      suffix: 'ANGLE'\n    },\n\n    vertexAttribDivisor(location, divisor) {\n      assert(divisor === 0, 'WebGL instanced rendering not supported');\n    },\n\n    drawElementsInstanced: () => {},\n    drawArraysInstanced: () => {}\n  },\n  [WEBGL_draw_buffers]: {\n    meta: {\n      suffix: 'WEBGL'\n    },\n    drawBuffers: () => {\n      assert(false);\n    }\n  },\n  [EXT_disjoint_timer_query]: {\n    meta: {\n      suffix: 'EXT'\n    },\n    createQuery: () => {\n      assert(false);\n    },\n    deleteQuery: () => {\n      assert(false);\n    },\n    beginQuery: () => {\n      assert(false);\n    },\n    endQuery: () => {},\n\n    getQuery(handle, pname) {\n      return this.getQueryObject(handle, pname);\n    },\n\n    getQueryParameter(handle, pname) {\n      return this.getQueryObject(handle, pname);\n    },\n\n    getQueryObject: () => {}\n  }\n};\nexport const WEBGL2_CONTEXT_OVERRIDES = {\n  readBuffer: (gl, originalFunc, attachment) => {\n    if (isWebGL2(gl)) {\n      originalFunc(attachment);\n    } else {}\n  },\n  getVertexAttrib: (gl, originalFunc, location, pname) => {\n    const {\n      webgl2,\n      ext\n    } = getExtensionData(gl, ANGLE_instanced_arrays);\n    let result;\n\n    switch (pname) {\n      case 35069:\n        result = !webgl2 ? false : undefined;\n        break;\n\n      case 35070:\n        result = !webgl2 && !ext ? 0 : undefined;\n        break;\n\n      default:\n    }\n\n    return result !== undefined ? result : originalFunc(location, pname);\n  },\n  getProgramParameter: (gl, originalFunc, program, pname) => {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 35967:\n          return 35981;\n\n        case 35971:\n          return 0;\n\n        case 35382:\n          return 0;\n\n        default:\n      }\n    }\n\n    return originalFunc(program, pname);\n  },\n  getInternalformatParameter: (gl, originalFunc, target, format, pname) => {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 32937:\n          return new Int32Array([0]);\n\n        default:\n      }\n    }\n\n    return gl.getInternalformatParameter(target, format, pname);\n  },\n\n  getTexParameter(gl, originalFunc, target, pname) {\n    switch (pname) {\n      case 34046:\n        const {\n          extensions\n        } = gl.luma;\n        const ext = extensions[EXT_texture_filter_anisotropic];\n        pname = ext && ext.TEXTURE_MAX_ANISOTROPY_EXT || 34046;\n        break;\n\n      default:\n    }\n\n    return originalFunc(target, pname);\n  },\n\n  getParameter: getParameterPolyfill,\n\n  hint(gl, originalFunc, pname, value) {\n    return originalFunc(pname, value);\n  }\n\n};\n//# sourceMappingURL=polyfill-table.js.map","import { polyfillVertexArrayObject } from './polyfill-vertex-array-object';\nimport { assert } from '../utils/assert';\nimport { WEBGL2_CONTEXT_POLYFILLS, WEBGL2_CONTEXT_OVERRIDES } from './polyfill-table';\nexport function polyfillContext(gl) {\n  gl.luma = gl.luma || {};\n  const {\n    luma\n  } = gl;\n\n  if (!luma.polyfilled) {\n    polyfillVertexArrayObject(gl);\n    initializeExtensions(gl);\n    installPolyfills(gl, WEBGL2_CONTEXT_POLYFILLS);\n    installOverrides(gl, {\n      target: luma,\n      target2: gl\n    });\n    luma.polyfilled = true;\n  }\n\n  return gl;\n}\nconst global_ = typeof global !== 'undefined' ? global : window;\nglobal_.polyfillContext = polyfillContext;\n\nfunction initializeExtensions(gl) {\n  gl.luma.extensions = {};\n  const EXTENSIONS = gl.getSupportedExtensions() || [];\n\n  for (const extension of EXTENSIONS) {\n    gl.luma[extension] = gl.getExtension(extension);\n  }\n}\n\nfunction installOverrides(gl, {\n  target,\n  target2\n}) {\n  Object.keys(WEBGL2_CONTEXT_OVERRIDES).forEach(key => {\n    if (typeof WEBGL2_CONTEXT_OVERRIDES[key] === 'function') {\n      const originalFunc = gl[key] ? gl[key].bind(gl) : () => {};\n      const polyfill = WEBGL2_CONTEXT_OVERRIDES[key].bind(null, gl, originalFunc);\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  });\n}\n\nfunction installPolyfills(gl, polyfills) {\n  for (const extension of Object.getOwnPropertyNames(polyfills)) {\n    if (extension !== 'overrides') {\n      polyfillExtension(gl, {\n        extension,\n        target: gl.luma,\n        target2: gl\n      });\n    }\n  }\n}\n\nfunction polyfillExtension(gl, {\n  extension,\n  target,\n  target2\n}) {\n  const defaults = WEBGL2_CONTEXT_POLYFILLS[extension];\n  assert(defaults);\n  const {\n    meta = {}\n  } = defaults;\n  const {\n    suffix = ''\n  } = meta;\n  const ext = gl.getExtension(extension);\n\n  for (const key of Object.keys(defaults)) {\n    const extKey = \"\".concat(key).concat(suffix);\n    let polyfill = null;\n\n    if (key === 'meta') {} else if (typeof gl[key] === 'function') {} else if (ext && typeof ext[extKey] === 'function') {\n      polyfill = (...args) => ext[extKey](...args);\n    } else if (typeof defaults[key] === 'function') {\n      polyfill = defaults[key].bind(target);\n    }\n\n    if (polyfill) {\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  }\n}\n//# sourceMappingURL=polyfill-context.js.map","import { isWebGL2 } from '../utils/webgl-checks';\nexport const GL_PARAMETER_DEFAULTS = {\n  [3042]: false,\n  [32773]: new Float32Array([0, 0, 0, 0]),\n  [32777]: 32774,\n  [34877]: 32774,\n  [32969]: 1,\n  [32968]: 0,\n  [32971]: 1,\n  [32970]: 0,\n  [3106]: new Float32Array([0, 0, 0, 0]),\n  [3107]: [true, true, true, true],\n  [2884]: false,\n  [2885]: 1029,\n  [2929]: false,\n  [2931]: 1,\n  [2932]: 513,\n  [2928]: new Float32Array([0, 1]),\n  [2930]: true,\n  [3024]: true,\n  [36006]: null,\n  [2886]: 2305,\n  [33170]: 4352,\n  [2849]: 1,\n  [32823]: false,\n  [32824]: 0,\n  [10752]: 0,\n  [32938]: 1.0,\n  [32939]: false,\n  [3089]: false,\n  [3088]: new Int32Array([0, 0, 1024, 1024]),\n  [2960]: false,\n  [2961]: 0,\n  [2968]: 0xffffffff,\n  [36005]: 0xffffffff,\n  [2962]: 519,\n  [2967]: 0,\n  [2963]: 0xffffffff,\n  [34816]: 519,\n  [36003]: 0,\n  [36004]: 0xffffffff,\n  [2964]: 7680,\n  [2965]: 7680,\n  [2966]: 7680,\n  [34817]: 7680,\n  [34818]: 7680,\n  [34819]: 7680,\n  [2978]: [0, 0, 1024, 1024],\n  [3333]: 4,\n  [3317]: 4,\n  [37440]: false,\n  [37441]: false,\n  [37443]: 37444,\n  [35723]: 4352,\n  [36010]: null,\n  [35977]: false,\n  [3330]: 0,\n  [3332]: 0,\n  [3331]: 0,\n  [3314]: 0,\n  [32878]: 0,\n  [3316]: 0,\n  [3315]: 0,\n  [32877]: 0\n};\n\nconst enable = (gl, value, key) => value ? gl.enable(key) : gl.disable(key);\n\nconst hint = (gl, value, key) => gl.hint(key, value);\n\nconst pixelStorei = (gl, value, key) => gl.pixelStorei(key, value);\n\nconst drawFramebuffer = (gl, value) => {\n  const target = isWebGL2(gl) ? 36009 : 36160;\n  return gl.bindFramebuffer(target, value);\n};\n\nconst readFramebuffer = (gl, value) => {\n  return gl.bindFramebuffer(36008, value);\n};\n\nfunction isArray(array) {\n  return Array.isArray(array) || ArrayBuffer.isView(array);\n}\n\nexport const GL_PARAMETER_SETTERS = {\n  [3042]: enable,\n  [32773]: (gl, value) => gl.blendColor(...value),\n  [32777]: 'blendEquation',\n  [34877]: 'blendEquation',\n  [32969]: 'blendFunc',\n  [32968]: 'blendFunc',\n  [32971]: 'blendFunc',\n  [32970]: 'blendFunc',\n  [3106]: (gl, value) => gl.clearColor(...value),\n  [3107]: (gl, value) => gl.colorMask(...value),\n  [2884]: enable,\n  [2885]: (gl, value) => gl.cullFace(value),\n  [2929]: enable,\n  [2931]: (gl, value) => gl.clearDepth(value),\n  [2932]: (gl, value) => gl.depthFunc(value),\n  [2928]: (gl, value) => gl.depthRange(...value),\n  [2930]: (gl, value) => gl.depthMask(value),\n  [3024]: enable,\n  [35723]: hint,\n  [36006]: drawFramebuffer,\n  [2886]: (gl, value) => gl.frontFace(value),\n  [33170]: hint,\n  [2849]: (gl, value) => gl.lineWidth(value),\n  [32823]: enable,\n  [32824]: 'polygonOffset',\n  [10752]: 'polygonOffset',\n  [35977]: enable,\n  [32938]: 'sampleCoverage',\n  [32939]: 'sampleCoverage',\n  [3089]: enable,\n  [3088]: (gl, value) => gl.scissor(...value),\n  [2960]: enable,\n  [2961]: (gl, value) => gl.clearStencil(value),\n  [2968]: (gl, value) => gl.stencilMaskSeparate(1028, value),\n  [36005]: (gl, value) => gl.stencilMaskSeparate(1029, value),\n  [2962]: 'stencilFuncFront',\n  [2967]: 'stencilFuncFront',\n  [2963]: 'stencilFuncFront',\n  [34816]: 'stencilFuncBack',\n  [36003]: 'stencilFuncBack',\n  [36004]: 'stencilFuncBack',\n  [2964]: 'stencilOpFront',\n  [2965]: 'stencilOpFront',\n  [2966]: 'stencilOpFront',\n  [34817]: 'stencilOpBack',\n  [34818]: 'stencilOpBack',\n  [34819]: 'stencilOpBack',\n  [2978]: (gl, value) => gl.viewport(...value),\n  [3333]: pixelStorei,\n  [3317]: pixelStorei,\n  [37440]: pixelStorei,\n  [37441]: pixelStorei,\n  [37443]: pixelStorei,\n  [3330]: pixelStorei,\n  [3332]: pixelStorei,\n  [3331]: pixelStorei,\n  [36010]: readFramebuffer,\n  [3314]: pixelStorei,\n  [32878]: pixelStorei,\n  [3316]: pixelStorei,\n  [3315]: pixelStorei,\n  [32877]: pixelStorei,\n  framebuffer: (gl, framebuffer) => {\n    const handle = framebuffer && 'handle' in framebuffer ? framebuffer.handle : framebuffer;\n    return gl.bindFramebuffer(36160, handle);\n  },\n  blend: (gl, value) => value ? gl.enable(3042) : gl.disable(3042),\n  blendColor: (gl, value) => gl.blendColor(...value),\n  blendEquation: (gl, args) => {\n    args = isArray(args) ? args : [args, args];\n    gl.blendEquationSeparate(...args);\n  },\n  blendFunc: (gl, args) => {\n    args = isArray(args) && args.length === 2 ? [...args, ...args] : args;\n    gl.blendFuncSeparate(...args);\n  },\n  clearColor: (gl, value) => gl.clearColor(...value),\n  clearDepth: (gl, value) => gl.clearDepth(value),\n  clearStencil: (gl, value) => gl.clearStencil(value),\n  colorMask: (gl, value) => gl.colorMask(...value),\n  cull: (gl, value) => value ? gl.enable(2884) : gl.disable(2884),\n  cullFace: (gl, value) => gl.cullFace(value),\n  depthTest: (gl, value) => value ? gl.enable(2929) : gl.disable(2929),\n  depthFunc: (gl, value) => gl.depthFunc(value),\n  depthMask: (gl, value) => gl.depthMask(value),\n  depthRange: (gl, value) => gl.depthRange(...value),\n  dither: (gl, value) => value ? gl.enable(3024) : gl.disable(3024),\n  derivativeHint: (gl, value) => {\n    gl.hint(35723, value);\n  },\n  frontFace: (gl, value) => gl.frontFace(value),\n  mipmapHint: (gl, value) => gl.hint(33170, value),\n  lineWidth: (gl, value) => gl.lineWidth(value),\n  polygonOffsetFill: (gl, value) => value ? gl.enable(32823) : gl.disable(32823),\n  polygonOffset: (gl, value) => gl.polygonOffset(...value),\n  sampleCoverage: (gl, value) => gl.sampleCoverage(...value),\n  scissorTest: (gl, value) => value ? gl.enable(3089) : gl.disable(3089),\n  scissor: (gl, value) => gl.scissor(...value),\n  stencilTest: (gl, value) => value ? gl.enable(2960) : gl.disable(2960),\n  stencilMask: (gl, value) => {\n    value = isArray(value) ? value : [value, value];\n    const [mask, backMask] = value;\n    gl.stencilMaskSeparate(1028, mask);\n    gl.stencilMaskSeparate(1029, backMask);\n  },\n  stencilFunc: (gl, args) => {\n    args = isArray(args) && args.length === 3 ? [...args, ...args] : args;\n    const [func, ref, mask, backFunc, backRef, backMask] = args;\n    gl.stencilFuncSeparate(1028, func, ref, mask);\n    gl.stencilFuncSeparate(1029, backFunc, backRef, backMask);\n  },\n  stencilOp: (gl, args) => {\n    args = isArray(args) && args.length === 3 ? [...args, ...args] : args;\n    const [sfail, dpfail, dppass, backSfail, backDpfail, backDppass] = args;\n    gl.stencilOpSeparate(1028, sfail, dpfail, dppass);\n    gl.stencilOpSeparate(1029, backSfail, backDpfail, backDppass);\n  },\n  viewport: (gl, value) => gl.viewport(...value)\n};\n\nfunction getValue(glEnum, values, cache) {\n  return values[glEnum] !== undefined ? values[glEnum] : cache[glEnum];\n}\n\nexport const GL_COMPOSITE_PARAMETER_SETTERS = {\n  blendEquation: (gl, values, cache) => gl.blendEquationSeparate(getValue(32777, values, cache), getValue(34877, values, cache)),\n  blendFunc: (gl, values, cache) => gl.blendFuncSeparate(getValue(32969, values, cache), getValue(32968, values, cache), getValue(32971, values, cache), getValue(32970, values, cache)),\n  polygonOffset: (gl, values, cache) => gl.polygonOffset(getValue(32824, values, cache), getValue(10752, values, cache)),\n  sampleCoverage: (gl, values, cache) => gl.sampleCoverage(getValue(32938, values, cache), getValue(32939, values, cache)),\n  stencilFuncFront: (gl, values, cache) => gl.stencilFuncSeparate(1028, getValue(2962, values, cache), getValue(2967, values, cache), getValue(2963, values, cache)),\n  stencilFuncBack: (gl, values, cache) => gl.stencilFuncSeparate(1029, getValue(34816, values, cache), getValue(36003, values, cache), getValue(36004, values, cache)),\n  stencilOpFront: (gl, values, cache) => gl.stencilOpSeparate(1028, getValue(2964, values, cache), getValue(2965, values, cache), getValue(2966, values, cache)),\n  stencilOpBack: (gl, values, cache) => gl.stencilOpSeparate(1029, getValue(34817, values, cache), getValue(34818, values, cache), getValue(34819, values, cache))\n};\nexport const GL_HOOKED_SETTERS = {\n  enable: (update, capability) => update({\n    [capability]: true\n  }),\n  disable: (update, capability) => update({\n    [capability]: false\n  }),\n  pixelStorei: (update, pname, value) => update({\n    [pname]: value\n  }),\n  hint: (update, pname, hint) => update({\n    [pname]: hint\n  }),\n  bindFramebuffer: (update, target, framebuffer) => {\n    switch (target) {\n      case 36160:\n        return update({\n          [36006]: framebuffer,\n          [36010]: framebuffer\n        });\n\n      case 36009:\n        return update({\n          [36006]: framebuffer\n        });\n\n      case 36008:\n        return update({\n          [36010]: framebuffer\n        });\n\n      default:\n        return null;\n    }\n  },\n  blendColor: (update, r, g, b, a) => update({\n    [32773]: new Float32Array([r, g, b, a])\n  }),\n  blendEquation: (update, mode) => update({\n    [32777]: mode,\n    [34877]: mode\n  }),\n  blendEquationSeparate: (update, modeRGB, modeAlpha) => update({\n    [32777]: modeRGB,\n    [34877]: modeAlpha\n  }),\n  blendFunc: (update, src, dst) => update({\n    [32969]: src,\n    [32968]: dst,\n    [32971]: src,\n    [32970]: dst\n  }),\n  blendFuncSeparate: (update, srcRGB, dstRGB, srcAlpha, dstAlpha) => update({\n    [32969]: srcRGB,\n    [32968]: dstRGB,\n    [32971]: srcAlpha,\n    [32970]: dstAlpha\n  }),\n  clearColor: (update, r, g, b, a) => update({\n    [3106]: new Float32Array([r, g, b, a])\n  }),\n  clearDepth: (update, depth) => update({\n    [2931]: depth\n  }),\n  clearStencil: (update, s) => update({\n    [2961]: s\n  }),\n  colorMask: (update, r, g, b, a) => update({\n    [3107]: [r, g, b, a]\n  }),\n  cullFace: (update, mode) => update({\n    [2885]: mode\n  }),\n  depthFunc: (update, func) => update({\n    [2932]: func\n  }),\n  depthRange: (update, zNear, zFar) => update({\n    [2928]: new Float32Array([zNear, zFar])\n  }),\n  depthMask: (update, mask) => update({\n    [2930]: mask\n  }),\n  frontFace: (update, face) => update({\n    [2886]: face\n  }),\n  lineWidth: (update, width) => update({\n    [2849]: width\n  }),\n  polygonOffset: (update, factor, units) => update({\n    [32824]: factor,\n    [10752]: units\n  }),\n  sampleCoverage: (update, value, invert) => update({\n    [32938]: value,\n    [32939]: invert\n  }),\n  scissor: (update, x, y, width, height) => update({\n    [3088]: new Int32Array([x, y, width, height])\n  }),\n  stencilMask: (update, mask) => update({\n    [2968]: mask,\n    [36005]: mask\n  }),\n  stencilMaskSeparate: (update, face, mask) => update({\n    [face === 1028 ? 2968 : 36005]: mask\n  }),\n  stencilFunc: (update, func, ref, mask) => update({\n    [2962]: func,\n    [2967]: ref,\n    [2963]: mask,\n    [34816]: func,\n    [36003]: ref,\n    [36004]: mask\n  }),\n  stencilFuncSeparate: (update, face, func, ref, mask) => update({\n    [face === 1028 ? 2962 : 34816]: func,\n    [face === 1028 ? 2967 : 36003]: ref,\n    [face === 1028 ? 2963 : 36004]: mask\n  }),\n  stencilOp: (update, fail, zfail, zpass) => update({\n    [2964]: fail,\n    [2965]: zfail,\n    [2966]: zpass,\n    [34817]: fail,\n    [34818]: zfail,\n    [34819]: zpass\n  }),\n  stencilOpSeparate: (update, face, fail, zfail, zpass) => update({\n    [face === 1028 ? 2964 : 34817]: fail,\n    [face === 1028 ? 2965 : 34818]: zfail,\n    [face === 1028 ? 2966 : 34819]: zpass\n  }),\n  viewport: (update, x, y, width, height) => update({\n    [2978]: [x, y, width, height]\n  })\n};\n\nconst isEnabled = (gl, key) => gl.isEnabled(key);\n\nexport const GL_PARAMETER_GETTERS = {\n  [3042]: isEnabled,\n  [2884]: isEnabled,\n  [2929]: isEnabled,\n  [3024]: isEnabled,\n  [32823]: isEnabled,\n  [32926]: isEnabled,\n  [32928]: isEnabled,\n  [3089]: isEnabled,\n  [2960]: isEnabled,\n  [35977]: isEnabled\n};\n//# sourceMappingURL=webgl-parameter-tables.js.map","export function isObjectEmpty(object) {\n  for (const key in object) {\n    return false;\n  }\n\n  return true;\n}\nexport function deepArrayEqual(x, y) {\n  if (x === y) {\n    return true;\n  }\n\n  const isArrayX = Array.isArray(x) || ArrayBuffer.isView(x);\n  const isArrayY = Array.isArray(y) || ArrayBuffer.isView(y);\n\n  if (isArrayX && isArrayY && x.length === y.length) {\n    for (let i = 0; i < x.length; ++i) {\n      if (x[i] !== y[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=utils.js.map","import { GL_PARAMETER_DEFAULTS, GL_HOOKED_SETTERS } from './webgl-parameter-tables';\nimport { setParameters, getParameters } from './unified-parameter-api';\nimport { assert } from '../utils/assert';\nimport { deepArrayEqual } from '../utils/utils';\n\nfunction installGetterOverride(gl, functionName) {\n  const originalGetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function get(...params) {\n    const pname = params[0];\n\n    if (!(pname in gl.state.cache)) {\n      gl.state.cache[pname] = originalGetterFunc(...params);\n    }\n\n    return gl.state.enable ? gl.state.cache[pname] : originalGetterFunc(...params);\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-from-cache\"),\n    configurable: false\n  });\n}\n\nfunction installSetterSpy(gl, functionName, setter) {\n  const originalSetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function set(...params) {\n    const {\n      valueChanged,\n      oldValue\n    } = setter(gl.state._updateCache, ...params);\n\n    if (valueChanged) {\n      originalSetterFunc(...params);\n    }\n\n    return oldValue;\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-to-cache\"),\n    configurable: false\n  });\n}\n\nfunction installProgramSpy(gl) {\n  const originalUseProgram = gl.useProgram.bind(gl);\n\n  gl.useProgram = function useProgramLuma(handle) {\n    if (gl.state.program !== handle) {\n      originalUseProgram(handle);\n      gl.state.program = handle;\n    }\n  };\n}\n\nclass GLState {\n  constructor(gl, {\n    copyState = false,\n    log = () => {}\n  } = {}) {\n    this.gl = gl;\n    this.program = null;\n    this.stateStack = [];\n    this.enable = true;\n    this.cache = copyState ? getParameters(gl) : Object.assign({}, GL_PARAMETER_DEFAULTS);\n    this.log = log;\n    this._updateCache = this._updateCache.bind(this);\n    Object.seal(this);\n  }\n\n  push(values = {}) {\n    this.stateStack.push({});\n  }\n\n  pop() {\n    assert(this.stateStack.length > 0);\n    const oldValues = this.stateStack[this.stateStack.length - 1];\n    setParameters(this.gl, oldValues);\n    this.stateStack.pop();\n  }\n\n  _updateCache(values) {\n    let valueChanged = false;\n    let oldValue;\n    const oldValues = this.stateStack.length > 0 && this.stateStack[this.stateStack.length - 1];\n\n    for (const key in values) {\n      assert(key !== undefined);\n      const value = values[key];\n      const cached = this.cache[key];\n\n      if (!deepArrayEqual(value, cached)) {\n        valueChanged = true;\n        oldValue = cached;\n\n        if (oldValues && !(key in oldValues)) {\n          oldValues[key] = cached;\n        }\n\n        this.cache[key] = value;\n      }\n    }\n\n    return {\n      valueChanged,\n      oldValue\n    };\n  }\n\n}\n\nexport function trackContextState(gl, options = {}) {\n  const {\n    enable = true,\n    copyState\n  } = options;\n  assert(copyState !== undefined);\n\n  if (!gl.state) {\n    const global_ = typeof global !== 'undefined' ? global : window;\n    const {\n      polyfillContext\n    } = global_;\n\n    if (polyfillContext) {\n      polyfillContext(gl);\n    }\n\n    gl.state = new GLState(gl, {\n      copyState\n    });\n    installProgramSpy(gl);\n\n    for (const key in GL_HOOKED_SETTERS) {\n      const setter = GL_HOOKED_SETTERS[key];\n      installSetterSpy(gl, key, setter);\n    }\n\n    installGetterOverride(gl, 'getParameter');\n    installGetterOverride(gl, 'isEnabled');\n  }\n\n  gl.state.enable = enable;\n  return gl;\n}\nexport function pushContextState(gl) {\n  if (!gl.state) {\n    trackContextState(gl, {\n      copyState: false\n    });\n  }\n\n  gl.state.push();\n}\nexport function popContextState(gl) {\n  assert(gl.state);\n  gl.state.pop();\n}\n//# sourceMappingURL=track-context-state.js.map","import { GL_PARAMETER_DEFAULTS, GL_PARAMETER_SETTERS, GL_COMPOSITE_PARAMETER_SETTERS, GL_PARAMETER_GETTERS } from './webgl-parameter-tables';\nimport { pushContextState, popContextState } from './track-context-state';\nimport { assert } from '../utils/assert';\nimport { isWebGL } from '../utils/webgl-checks';\nimport { isObjectEmpty } from '../utils/utils';\nexport function setParameters(gl, values) {\n  assert(isWebGL(gl), 'setParameters requires a WebGL context');\n\n  if (isObjectEmpty(values)) {\n    return;\n  }\n\n  const compositeSetters = {};\n\n  for (const key in values) {\n    const glConstant = Number(key);\n    const setter = GL_PARAMETER_SETTERS[key];\n\n    if (setter) {\n      if (typeof setter === 'string') {\n        compositeSetters[setter] = true;\n      } else {\n        setter(gl, values[key], glConstant);\n      }\n    }\n  }\n\n  const cache = gl.state && gl.state.cache;\n\n  if (cache) {\n    for (const key in compositeSetters) {\n      const compositeSetter = GL_COMPOSITE_PARAMETER_SETTERS[key];\n      compositeSetter(gl, values, cache);\n    }\n  }\n}\nexport function getParameters(gl, parameters) {\n  parameters = parameters || GL_PARAMETER_DEFAULTS;\n\n  if (typeof parameters === 'number') {\n    const key = parameters;\n    const getter = GL_PARAMETER_GETTERS[key];\n    return getter ? getter(gl, key) : gl.getParameter(key);\n  }\n\n  const parameterKeys = Array.isArray(parameters) ? parameters : Object.keys(parameters);\n  const state = {};\n\n  for (const key of parameterKeys) {\n    const getter = GL_PARAMETER_GETTERS[key];\n    state[key] = getter ? getter(gl, Number(key)) : gl.getParameter(Number(key));\n  }\n\n  return state;\n}\nexport function resetParameters(gl) {\n  setParameters(gl, GL_PARAMETER_DEFAULTS);\n}\nexport function withParameters(gl, parameters, func) {\n  if (isObjectEmpty(parameters)) {\n    return func(gl);\n  }\n\n  const {\n    nocatch = true\n  } = parameters;\n  pushContextState(gl);\n  setParameters(gl, parameters);\n  let value;\n\n  if (nocatch) {\n    value = func(gl);\n    popContextState(gl);\n  } else {\n    try {\n      value = func(gl);\n    } finally {\n      popContextState(gl);\n    }\n  }\n\n  return value;\n}\n//# sourceMappingURL=unified-parameter-api.js.map","export function cssToDeviceRatio(gl) {\n  const {\n    luma\n  } = gl;\n\n  if (gl.canvas && luma) {\n    const {\n      clientWidth\n    } = luma.canvasSizeInfo;\n    return clientWidth ? gl.drawingBufferWidth / clientWidth : 1;\n  }\n\n  return 1;\n}\nexport function cssToDevicePixels(gl, cssPixel, yInvert = true) {\n  const ratio = cssToDeviceRatio(gl);\n  const width = gl.drawingBufferWidth;\n  const height = gl.drawingBufferHeight;\n  return scalePixels(cssPixel, ratio, width, height, yInvert);\n}\nexport function getDevicePixelRatio(useDevicePixels) {\n  const windowRatio = typeof window === 'undefined' ? 1 : window.devicePixelRatio || 1;\n\n  if (Number.isFinite(useDevicePixels)) {\n    return useDevicePixels <= 0 ? 1 : useDevicePixels;\n  }\n\n  return useDevicePixels ? windowRatio : 1;\n}\n\nfunction scalePixels(pixel, ratio, width, height, yInvert) {\n  const x = scaleX(pixel[0], ratio, width);\n  let y = scaleY(pixel[1], ratio, height, yInvert);\n  let t = scaleX(pixel[0] + 1, ratio, width);\n  const xHigh = t === width - 1 ? t : t - 1;\n  t = scaleY(pixel[1] + 1, ratio, height, yInvert);\n  let yHigh;\n\n  if (yInvert) {\n    t = t === 0 ? t : t + 1;\n    yHigh = y;\n    y = t;\n  } else {\n    yHigh = t === height - 1 ? t : t - 1;\n  }\n\n  return {\n    x,\n    y,\n    width: Math.max(xHigh - x + 1, 1),\n    height: Math.max(yHigh - y + 1, 1)\n  };\n}\n\nfunction scaleX(x, ratio, width) {\n  const r = Math.min(Math.round(x * ratio), width - 1);\n  return r;\n}\n\nfunction scaleY(y, ratio, height, yInvert) {\n  return yInvert ? Math.max(0, height - 1 - Math.round(y * ratio)) : Math.min(Math.round(y * ratio), height - 1);\n}\n//# sourceMappingURL=device-pixels.js.map","import { global, isBrowser as getIsBrowser } from 'probe.gl/env';\nimport { trackContextState } from '../state-tracker/track-context-state';\nimport { log } from '../utils/log';\nimport { assert } from '../utils/assert';\nimport { getDevicePixelRatio } from '../utils/device-pixels';\nimport { isWebGL2 } from '../utils/webgl-checks';\nconst isBrowser = getIsBrowser();\nconst isPage = isBrowser && typeof document !== 'undefined';\nconst CONTEXT_DEFAULTS = {\n  webgl2: true,\n  webgl1: true,\n  throwOnError: true,\n  manageState: true,\n  canvas: null,\n  debug: false,\n  width: 800,\n  height: 600\n};\nexport function createGLContext(options = {}) {\n  assert(isBrowser, \"createGLContext only available in the browser.\\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils\");\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  const {\n    width,\n    height\n  } = options;\n\n  function onError(message) {\n    if (options.throwOnError) {\n      throw new Error(message);\n    }\n\n    console.error(message);\n    return null;\n  }\n\n  options.onError = onError;\n  let gl;\n  const {\n    canvas\n  } = options;\n  const targetCanvas = getCanvas({\n    canvas,\n    width,\n    height,\n    onError\n  });\n  gl = createBrowserContext(targetCanvas, options);\n\n  if (!gl) {\n    return null;\n  }\n\n  gl = instrumentGLContext(gl, options);\n  logInfo(gl);\n  return gl;\n}\nexport function instrumentGLContext(gl, options = {}) {\n  if (!gl || gl._instrumented) {\n    return gl;\n  }\n\n  gl._version = gl._version || getVersion(gl);\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  const {\n    manageState,\n    debug\n  } = options;\n\n  if (manageState) {\n    trackContextState(gl, {\n      copyState: false,\n      log: (...args) => log.log(1, ...args)()\n    });\n  }\n\n  if (isBrowser && debug) {\n    if (!global.makeDebugContext) {\n      log.warn('WebGL debug mode not activated. import \"@luma.gl/debug\" to enable.')();\n    } else {\n      gl = global.makeDebugContext(gl, options);\n      log.level = Math.max(log.level, 1);\n    }\n  }\n\n  gl._instrumented = true;\n  return gl;\n}\nexport function getContextDebugInfo(gl) {\n  const vendorMasked = gl.getParameter(7936);\n  const rendererMasked = gl.getParameter(7937);\n  const ext = gl.getExtension('WEBGL_debug_renderer_info');\n  const vendorUnmasked = ext && gl.getParameter(ext.UNMASKED_VENDOR_WEBGL || 7936);\n  const rendererUnmasked = ext && gl.getParameter(ext.UNMASKED_RENDERER_WEBGL || 7937);\n  return {\n    vendor: vendorUnmasked || vendorMasked,\n    renderer: rendererUnmasked || rendererMasked,\n    vendorMasked,\n    rendererMasked,\n    version: gl.getParameter(7938),\n    shadingLanguageVersion: gl.getParameter(35724)\n  };\n}\nexport function resizeGLContext(gl, options = {}) {\n  if (gl.canvas) {\n    const devicePixelRatio = getDevicePixelRatio(options.useDevicePixels);\n    setDevicePixelRatio(gl, devicePixelRatio, options);\n    return;\n  }\n\n  const ext = gl.getExtension('STACKGL_resize_drawingbuffer');\n\n  if (ext && \"width\" in options && \"height\" in options) {\n    ext.resize(options.width, options.height);\n  }\n}\n\nfunction createBrowserContext(canvas, options) {\n  const {\n    onError\n  } = options;\n  let errorMessage = null;\n\n  const onCreateError = error => errorMessage = error.statusMessage || errorMessage;\n\n  canvas.addEventListener('webglcontextcreationerror', onCreateError, false);\n  const {\n    webgl1 = true,\n    webgl2 = true\n  } = options;\n  let gl = null;\n\n  if (webgl2) {\n    gl = gl || canvas.getContext('webgl2', options);\n    gl = gl || canvas.getContext('experimental-webgl2', options);\n  }\n\n  if (webgl1) {\n    gl = gl || canvas.getContext('webgl', options);\n    gl = gl || canvas.getContext('experimental-webgl', options);\n  }\n\n  canvas.removeEventListener('webglcontextcreationerror', onCreateError, false);\n\n  if (!gl) {\n    return onError(\"Failed to create \".concat(webgl2 && !webgl1 ? 'WebGL2' : 'WebGL', \" context: \").concat(errorMessage || 'Unknown error'));\n  }\n\n  if (options.onContextLost) {\n    canvas.addEventListener('webglcontextlost', options.onContextLost, false);\n  }\n\n  if (options.onContextRestored) {\n    canvas.addEventListener('webglcontextrestored', options.onContextRestored, false);\n  }\n\n  return gl;\n}\n\nfunction getCanvas({\n  canvas,\n  width = 800,\n  height = 600,\n  onError\n}) {\n  let targetCanvas;\n\n  if (typeof canvas === 'string') {\n    const isPageLoaded = isPage && document.readyState === 'complete';\n\n    if (!isPageLoaded) {\n      onError(\"createGLContext called on canvas '\".concat(canvas, \"' before page was loaded\"));\n    }\n\n    targetCanvas = document.getElementById(canvas);\n  } else if (canvas) {\n    targetCanvas = canvas;\n  } else {\n    targetCanvas = document.createElement('canvas');\n    targetCanvas.id = 'lumagl-canvas';\n    targetCanvas.style.width = Number.isFinite(width) ? \"\".concat(width, \"px\") : '100%';\n    targetCanvas.style.height = Number.isFinite(height) ? \"\".concat(height, \"px\") : '100%';\n    document.body.insertBefore(targetCanvas, document.body.firstChild);\n  }\n\n  return targetCanvas;\n}\n\nfunction logInfo(gl) {\n  const webGL = isWebGL2(gl) ? 'WebGL2' : 'WebGL1';\n  const info = getContextDebugInfo(gl);\n  const driver = info ? \"(\".concat(info.vendor, \",\").concat(info.renderer, \")\") : '';\n  const debug = gl.debug ? ' debug' : '';\n  log.info(1, \"\".concat(webGL).concat(debug, \" context \").concat(driver))();\n}\n\nfunction getVersion(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return 2;\n  }\n\n  return 1;\n}\n\nfunction setDevicePixelRatio(gl, devicePixelRatio, options) {\n  let clientWidth = 'width' in options ? options.width : gl.canvas.clientWidth;\n  let clientHeight = 'height' in options ? options.height : gl.canvas.clientHeight;\n\n  if (!clientWidth || !clientHeight) {\n    log.log(1, 'Canvas clientWidth/clientHeight is 0')();\n    devicePixelRatio = 1;\n    clientWidth = gl.canvas.width || 1;\n    clientHeight = gl.canvas.height || 1;\n  }\n\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  const cachedSize = gl.luma.canvasSizeInfo;\n\n  if (cachedSize.clientWidth !== clientWidth || cachedSize.clientHeight !== clientHeight || cachedSize.devicePixelRatio !== devicePixelRatio) {\n    let clampedPixelRatio = devicePixelRatio;\n    const canvasWidth = Math.floor(clientWidth * clampedPixelRatio);\n    const canvasHeight = Math.floor(clientHeight * clampedPixelRatio);\n    gl.canvas.width = canvasWidth;\n    gl.canvas.height = canvasHeight;\n\n    if (gl.drawingBufferWidth !== canvasWidth || gl.drawingBufferHeight !== canvasHeight) {\n      log.warn(\"Device pixel ratio clamped\")();\n      clampedPixelRatio = Math.min(gl.drawingBufferWidth / clientWidth, gl.drawingBufferHeight / clientHeight);\n      gl.canvas.width = Math.floor(clientWidth * clampedPixelRatio);\n      gl.canvas.height = Math.floor(clientHeight * clampedPixelRatio);\n    }\n\n    Object.assign(gl.luma.canvasSizeInfo, {\n      clientWidth,\n      clientHeight,\n      devicePixelRatio\n    });\n  }\n}\n//# sourceMappingURL=context.js.map","export const VERTEX_SHADER = 'vs';\nexport const FRAGMENT_SHADER = 'fs';\n//# sourceMappingURL=constants.js.map","import { MODULE_INJECTORS_VS, MODULE_INJECTORS_FS } from '../modules/module-injectors';\nimport { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { assert } from '../utils';\nconst MODULE_INJECTORS = {\n  [VERTEX_SHADER]: MODULE_INJECTORS_VS,\n  [FRAGMENT_SHADER]: MODULE_INJECTORS_FS\n};\nexport const DECLARATION_INJECT_MARKER = '__LUMA_INJECT_DECLARATIONS__';\nconst REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nconst REGEX_END_OF_MAIN = /}\\n?[^{}]*$/;\nconst fragments = [];\nexport default function injectShader(source, type, inject, injectStandardStubs = false) {\n  const isVertex = type === VERTEX_SHADER;\n\n  for (const key in inject) {\n    const fragmentData = inject[key];\n    fragmentData.sort((a, b) => a.order - b.order);\n    fragments.length = fragmentData.length;\n\n    for (let i = 0, len = fragmentData.length; i < len; ++i) {\n      fragments[i] = fragmentData[i].injection;\n    }\n\n    const fragmentString = \"\".concat(fragments.join('\\n'), \"\\n\");\n\n    switch (key) {\n      case 'vs:#decl':\n        if (isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-start':\n        if (isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, match => match + fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-end':\n        if (isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, match => fragmentString + match);\n        }\n\n        break;\n\n      case 'fs:#decl':\n        if (!isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-start':\n        if (!isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, match => match + fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-end':\n        if (!isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, match => fragmentString + match);\n        }\n\n        break;\n\n      default:\n        source = source.replace(key, match => match + fragmentString);\n    }\n  }\n\n  source = source.replace(DECLARATION_INJECT_MARKER, '');\n\n  if (injectStandardStubs) {\n    source = source.replace(/\\}\\s*$/, match => match + MODULE_INJECTORS[type]);\n  }\n\n  return source;\n}\nexport function combineInjects(injects) {\n  const result = {};\n  assert(Array.isArray(injects) && injects.length > 1);\n  injects.forEach(inject => {\n    for (const key in inject) {\n      result[key] = result[key] ? \"\".concat(result[key], \"\\n\").concat(inject[key]) : inject[key];\n    }\n  });\n  return result;\n}\n//# sourceMappingURL=inject-shader.js.map","export const MODULE_INJECTORS_VS = \"#ifdef MODULE_LOGDEPTH\\n  logdepth_adjustPosition(gl_Position);\\n#endif\\n\";\nexport const MODULE_INJECTORS_FS = \"#ifdef MODULE_MATERIAL\\n  gl_FragColor = material_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LIGHTING\\n  gl_FragColor = lighting_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_FOG\\n  gl_FragColor = fog_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_PICKING\\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LOGDEPTH\\n  logdepth_setFragDepth();\\n#endif\\n\";\n//# sourceMappingURL=module-injectors.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'shadertools: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { getTypedArrayFromGLType } from '../webgl-utils';\nimport { checkProps, assert } from '../utils';\nconst DEFAULT_ACCESSOR_VALUES = {\n  offset: 0,\n  stride: 0,\n  type: 5126,\n  size: 1,\n  divisor: 0,\n  normalized: false,\n  integer: false\n};\nconst PROP_CHECKS = {\n  deprecatedProps: {\n    instanced: 'divisor',\n    isInstanced: 'divisor'\n  }\n};\nexport default class Accessor {\n  static getBytesPerElement(accessor) {\n    const ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n    return ArrayType.BYTES_PER_ELEMENT;\n  }\n\n  static getBytesPerVertex(accessor) {\n    assert(accessor.size);\n    const ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n    return ArrayType.BYTES_PER_ELEMENT * accessor.size;\n  }\n\n  static resolve(...accessors) {\n    return new Accessor(...[DEFAULT_ACCESSOR_VALUES, ...accessors]);\n  }\n\n  constructor(...accessors) {\n    accessors.forEach(accessor => this._assign(accessor));\n    Object.freeze(this);\n  }\n\n  toString() {\n    return JSON.stringify(this);\n  }\n\n  get BYTES_PER_ELEMENT() {\n    return Accessor.getBytesPerElement(this);\n  }\n\n  get BYTES_PER_VERTEX() {\n    return Accessor.getBytesPerVertex(this);\n  }\n\n  _assign(props = {}) {\n    props = checkProps('Accessor', props, PROP_CHECKS);\n\n    if (props.type !== undefined) {\n      this.type = props.type;\n\n      if (props.type === 5124 || props.type === 5125) {\n        this.integer = true;\n      }\n    }\n\n    if (props.size !== undefined) {\n      this.size = props.size;\n    }\n\n    if (props.offset !== undefined) {\n      this.offset = props.offset;\n    }\n\n    if (props.stride !== undefined) {\n      this.stride = props.stride;\n    }\n\n    if (props.normalized !== undefined) {\n      this.normalized = props.normalized;\n    }\n\n    if (props.integer !== undefined) {\n      this.integer = props.integer;\n    }\n\n    if (props.divisor !== undefined) {\n      this.divisor = props.divisor;\n    }\n\n    if (props.buffer !== undefined) {\n      this.buffer = props.buffer;\n    }\n\n    if (props.index !== undefined) {\n      if (typeof props.index === 'boolean') {\n        this.index = props.index ? 1 : 0;\n      } else {\n        this.index = props.index;\n      }\n    }\n\n    if (props.instanced !== undefined) {\n      this.divisor = props.instanced ? 1 : 0;\n    }\n\n    if (props.isInstanced !== undefined) {\n      this.divisor = props.isInstanced ? 1 : 0;\n    }\n\n    return this;\n  }\n\n}\nexport { DEFAULT_ACCESSOR_VALUES };\n//# sourceMappingURL=accessor.js.map","import Resource from './resource';\nimport Accessor from './accessor';\nimport { getGLTypeFromTypedArray, getTypedArrayFromGLType } from '../webgl-utils';\nimport { assertWebGL2Context, log } from '@luma.gl/gltools';\nimport { assert, checkProps } from '../utils';\nconst DEBUG_DATA_LENGTH = 10;\nconst DEPRECATED_PROPS = {\n  offset: 'accessor.offset',\n  stride: 'accessor.stride',\n  type: 'accessor.type',\n  size: 'accessor.size',\n  divisor: 'accessor.divisor',\n  normalized: 'accessor.normalized',\n  integer: 'accessor.integer',\n  instanced: 'accessor.divisor',\n  isInstanced: 'accessor.divisor'\n};\nconst PROP_CHECKS_INITIALIZE = {\n  removedProps: {},\n  replacedProps: {\n    bytes: 'byteLength'\n  },\n  deprecatedProps: DEPRECATED_PROPS\n};\nconst PROP_CHECKS_SET_PROPS = {\n  removedProps: DEPRECATED_PROPS\n};\nexport default class Buffer extends Resource {\n  constructor(gl, props = {}) {\n    super(gl, props);\n    this.stubRemovedMethods('Buffer', 'v6.0', ['layout', 'setLayout', 'getIndexedParameter']);\n    this.target = props.target || (this.gl.webgl2 ? 36662 : 34962);\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  getElementCount(accessor = this.accessor) {\n    return Math.round(this.byteLength / Accessor.getBytesPerElement(accessor));\n  }\n\n  getVertexCount(accessor = this.accessor) {\n    return Math.round(this.byteLength / Accessor.getBytesPerVertex(accessor));\n  }\n\n  initialize(props = {}) {\n    if (ArrayBuffer.isView(props)) {\n      props = {\n        data: props\n      };\n    }\n\n    if (Number.isFinite(props)) {\n      props = {\n        byteLength: props\n      };\n    }\n\n    props = checkProps('Buffer', props, PROP_CHECKS_INITIALIZE);\n    this.usage = props.usage || 35044;\n    this.debugData = null;\n    this.setAccessor(Object.assign({}, props, props.accessor));\n\n    if (props.data) {\n      this._setData(props.data, props.offset, props.byteLength);\n    } else {\n      this._setByteLength(props.byteLength || 0);\n    }\n\n    return this;\n  }\n\n  setProps(props) {\n    props = checkProps('Buffer', props, PROP_CHECKS_SET_PROPS);\n\n    if ('accessor' in props) {\n      this.setAccessor(props.accessor);\n    }\n\n    return this;\n  }\n\n  setAccessor(accessor) {\n    accessor = Object.assign({}, accessor);\n    delete accessor.buffer;\n    this.accessor = new Accessor(accessor);\n    return this;\n  }\n\n  reallocate(byteLength) {\n    if (byteLength > this.byteLength) {\n      this._setByteLength(byteLength);\n\n      return true;\n    }\n\n    this.bytesUsed = byteLength;\n    return false;\n  }\n\n  setData(props) {\n    return this.initialize(props);\n  }\n\n  subData(props) {\n    if (ArrayBuffer.isView(props)) {\n      props = {\n        data: props\n      };\n    }\n\n    const {\n      data,\n      offset = 0,\n      srcOffset = 0\n    } = props;\n    const byteLength = props.byteLength || props.length;\n    assert(data);\n    const target = this.gl.webgl2 ? 36663 : this.target;\n    this.gl.bindBuffer(target, this.handle);\n\n    if (srcOffset !== 0 || byteLength !== undefined) {\n      assertWebGL2Context(this.gl);\n      this.gl.bufferSubData(this.target, offset, data, srcOffset, byteLength);\n    } else {\n      this.gl.bufferSubData(target, offset, data);\n    }\n\n    this.gl.bindBuffer(target, null);\n    this.debugData = null;\n\n    this._inferType(data);\n\n    return this;\n  }\n\n  copyData({\n    sourceBuffer,\n    readOffset = 0,\n    writeOffset = 0,\n    size\n  }) {\n    const {\n      gl\n    } = this;\n    assertWebGL2Context(gl);\n    gl.bindBuffer(36662, sourceBuffer.handle);\n    gl.bindBuffer(36663, this.handle);\n    gl.copyBufferSubData(36662, 36663, readOffset, writeOffset, size);\n    gl.bindBuffer(36662, null);\n    gl.bindBuffer(36663, null);\n    this.debugData = null;\n    return this;\n  }\n\n  getData({\n    dstData = null,\n    srcByteOffset = 0,\n    dstOffset = 0,\n    length = 0\n  } = {}) {\n    assertWebGL2Context(this.gl);\n    const ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n      clamped: false\n    });\n\n    const sourceAvailableElementCount = this._getAvailableElementCount(srcByteOffset);\n\n    const dstElementOffset = dstOffset;\n    let dstAvailableElementCount;\n    let dstElementCount;\n\n    if (dstData) {\n      dstElementCount = dstData.length;\n      dstAvailableElementCount = dstElementCount - dstElementOffset;\n    } else {\n      dstAvailableElementCount = Math.min(sourceAvailableElementCount, length || sourceAvailableElementCount);\n      dstElementCount = dstElementOffset + dstAvailableElementCount;\n    }\n\n    const copyElementCount = Math.min(sourceAvailableElementCount, dstAvailableElementCount);\n    length = length || copyElementCount;\n    assert(length <= copyElementCount);\n    dstData = dstData || new ArrayType(dstElementCount);\n    this.gl.bindBuffer(36662, this.handle);\n    this.gl.getBufferSubData(36662, srcByteOffset, dstData, dstOffset, length);\n    this.gl.bindBuffer(36662, null);\n    return dstData;\n  }\n\n  bind({\n    target = this.target,\n    index = this.accessor && this.accessor.index,\n    offset = 0,\n    size\n  } = {}) {\n    if (target === 35345 || target === 35982) {\n      if (size !== undefined) {\n        this.gl.bindBufferRange(target, index, this.handle, offset, size);\n      } else {\n        assert(offset === 0);\n        this.gl.bindBufferBase(target, index, this.handle);\n      }\n    } else {\n      this.gl.bindBuffer(target, this.handle);\n    }\n\n    return this;\n  }\n\n  unbind({\n    target = this.target,\n    index = this.accessor && this.accessor.index\n  } = {}) {\n    const isIndexedBuffer = target === 35345 || target === 35982;\n\n    if (isIndexedBuffer) {\n      this.gl.bindBufferBase(target, index, null);\n    } else {\n      this.gl.bindBuffer(target, null);\n    }\n\n    return this;\n  }\n\n  getDebugData() {\n    if (!this.debugData) {\n      this.debugData = this.getData({\n        length: Math.min(DEBUG_DATA_LENGTH, this.byteLength)\n      });\n      return {\n        data: this.debugData,\n        changed: true\n      };\n    }\n\n    return {\n      data: this.debugData,\n      changed: false\n    };\n  }\n\n  invalidateDebugData() {\n    this.debugData = null;\n  }\n\n  _setData(data, offset = 0, byteLength = data.byteLength + offset) {\n    assert(ArrayBuffer.isView(data));\n\n    this._trackDeallocatedMemory();\n\n    const target = this._getTarget();\n\n    this.gl.bindBuffer(target, this.handle);\n    this.gl.bufferData(target, byteLength, this.usage);\n    this.gl.bufferSubData(target, offset, data);\n    this.gl.bindBuffer(target, null);\n    this.debugData = data.slice(0, DEBUG_DATA_LENGTH);\n    this.bytesUsed = byteLength;\n\n    this._trackAllocatedMemory(byteLength);\n\n    const type = getGLTypeFromTypedArray(data);\n    assert(type);\n    this.setAccessor(new Accessor(this.accessor, {\n      type\n    }));\n    return this;\n  }\n\n  _setByteLength(byteLength, usage = this.usage) {\n    assert(byteLength >= 0);\n\n    this._trackDeallocatedMemory();\n\n    let data = byteLength;\n\n    if (byteLength === 0) {\n      data = new Float32Array(0);\n    }\n\n    const target = this._getTarget();\n\n    this.gl.bindBuffer(target, this.handle);\n    this.gl.bufferData(target, data, usage);\n    this.gl.bindBuffer(target, null);\n    this.usage = usage;\n    this.debugData = null;\n    this.bytesUsed = byteLength;\n\n    this._trackAllocatedMemory(byteLength);\n\n    return this;\n  }\n\n  _getTarget() {\n    return this.gl.webgl2 ? 36663 : this.target;\n  }\n\n  _getAvailableElementCount(srcByteOffset) {\n    const ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n      clamped: false\n    });\n    const sourceElementOffset = srcByteOffset / ArrayType.BYTES_PER_ELEMENT;\n    return this.getElementCount() - sourceElementOffset;\n  }\n\n  _inferType(data) {\n    if (!this.accessor.type) {\n      this.setAccessor(new Accessor(this.accessor, {\n        type: getGLTypeFromTypedArray(data)\n      }));\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createBuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteBuffer(this.handle);\n\n    this._trackDeallocatedMemory();\n  }\n\n  _getParameter(pname) {\n    this.gl.bindBuffer(this.target, this.handle);\n    const value = this.gl.getBufferParameter(this.target, pname);\n    this.gl.bindBuffer(this.target, null);\n    return value;\n  }\n\n  get type() {\n    log.deprecated('Buffer.type', 'Buffer.accessor.type')();\n    return this.accessor.type;\n  }\n\n  get bytes() {\n    log.deprecated('Buffer.bytes', 'Buffer.byteLength')();\n    return this.byteLength;\n  }\n\n  setByteLength(byteLength) {\n    log.deprecated('setByteLength', 'reallocate')();\n    return this.reallocate(byteLength);\n  }\n\n  updateAccessor(opts) {\n    log.deprecated('updateAccessor(...)', 'setAccessor(new Accessor(buffer.accessor, ...)')();\n    this.accessor = new Accessor(this.accessor, opts);\n    return this;\n  }\n\n}\n//# sourceMappingURL=buffer.js.map","import { assertWebGL2Context, withParameters } from '@luma.gl/gltools';\nimport { assert } from '../utils';\nconst GL_DEPTH_BUFFER_BIT = 0x00000100;\nconst GL_STENCIL_BUFFER_BIT = 0x00000400;\nconst GL_COLOR_BUFFER_BIT = 0x00004000;\nconst GL_COLOR = 0x1800;\nconst GL_DEPTH = 0x1801;\nconst GL_STENCIL = 0x1802;\nconst GL_DEPTH_STENCIL = 0x84f9;\nconst ERR_ARGUMENTS = 'clear: bad arguments';\nexport function clear(gl, {\n  framebuffer = null,\n  color = null,\n  depth = null,\n  stencil = null\n} = {}) {\n  const parameters = {};\n\n  if (framebuffer) {\n    parameters.framebuffer = framebuffer;\n  }\n\n  let clearFlags = 0;\n\n  if (color) {\n    clearFlags |= GL_COLOR_BUFFER_BIT;\n\n    if (color !== true) {\n      parameters.clearColor = color;\n    }\n  }\n\n  if (depth) {\n    clearFlags |= GL_DEPTH_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearDepth = depth;\n    }\n  }\n\n  if (stencil) {\n    clearFlags |= GL_STENCIL_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearStencil = depth;\n    }\n  }\n\n  assert(clearFlags !== 0, ERR_ARGUMENTS);\n  withParameters(gl, parameters, () => {\n    gl.clear(clearFlags);\n  });\n}\nexport function clearBuffer(gl, {\n  framebuffer = null,\n  buffer = GL_COLOR,\n  drawBuffer = 0,\n  value = [0, 0, 0, 0]\n} = {}) {\n  assertWebGL2Context(gl);\n  withParameters(gl, {\n    framebuffer\n  }, () => {\n    switch (buffer) {\n      case GL_COLOR:\n        switch (value.constructor) {\n          case Int32Array:\n            gl.clearBufferiv(buffer, drawBuffer, value);\n            break;\n\n          case Uint32Array:\n            gl.clearBufferuiv(buffer, drawBuffer, value);\n            break;\n\n          case Float32Array:\n          default:\n            gl.clearBufferfv(buffer, drawBuffer, value);\n        }\n\n        break;\n\n      case GL_DEPTH:\n        gl.clearBufferfv(GL_DEPTH, 0, [value]);\n        break;\n\n      case GL_STENCIL:\n        gl.clearBufferiv(GL_STENCIL, 0, [value]);\n        break;\n\n      case GL_DEPTH_STENCIL:\n        const [depth, stencil] = value;\n        gl.clearBufferfi(GL_DEPTH_STENCIL, 0, depth, stencil);\n        break;\n\n      default:\n        assert(false, ERR_ARGUMENTS);\n    }\n  });\n}\n//# sourceMappingURL=clear.js.map","import { assert } from '../utils';\nexport function glFormatToComponents(format) {\n  switch (format) {\n    case 6406:\n    case 33326:\n    case 6403:\n      return 1;\n\n    case 33328:\n    case 33319:\n      return 2;\n\n    case 6407:\n    case 34837:\n      return 3;\n\n    case 6408:\n    case 34836:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function glTypeToBytes(type) {\n  switch (type) {\n    case 5121:\n      return 1;\n\n    case 33635:\n    case 32819:\n    case 32820:\n      return 2;\n\n    case 5126:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\n//# sourceMappingURL=format-utils.js.map","import Buffer from './buffer';\nimport Framebuffer from './framebuffer';\nimport Texture from './texture';\nimport { assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { flipRows, scalePixels } from '../webgl-utils';\nimport { getTypedArrayFromGLType, getGLTypeFromTypedArray } from '../webgl-utils/typed-array-utils';\nimport { glFormatToComponents, glTypeToBytes } from '../webgl-utils/format-utils';\nimport { toFramebuffer } from '../webgl-utils/texture-utils';\nimport { assert } from '../utils';\nexport function readPixelsToArray(source, options = {}) {\n  const {\n    sourceX = 0,\n    sourceY = 0,\n    sourceFormat = 6408\n  } = options;\n  let {\n    sourceAttachment = 36064,\n    target = null,\n    sourceWidth,\n    sourceHeight,\n    sourceType\n  } = options;\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  const {\n    gl,\n    handle,\n    attachments\n  } = framebuffer;\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n\n  if (sourceAttachment === 36064 && handle === null) {\n    sourceAttachment = 1028;\n  }\n\n  assert(attachments[sourceAttachment]);\n  sourceType = sourceType || attachments[sourceAttachment].type;\n  target = getPixelArray(target, sourceType, sourceFormat, sourceWidth, sourceHeight);\n  sourceType = sourceType || getGLTypeFromTypedArray(target);\n  const prevHandle = gl.bindFramebuffer(36160, handle);\n  gl.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, target);\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return target;\n}\nexport function readPixelsToBuffer(source, {\n  sourceX = 0,\n  sourceY = 0,\n  sourceFormat = 6408,\n  target = null,\n  targetByteOffset = 0,\n  sourceWidth,\n  sourceHeight,\n  sourceType\n}) {\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n  const gl2 = assertWebGL2Context(framebuffer.gl);\n  sourceType = sourceType || (target ? target.type : 5121);\n\n  if (!target) {\n    const components = glFormatToComponents(sourceFormat);\n    const byteCount = glTypeToBytes(sourceType);\n    const byteLength = targetByteOffset + sourceWidth * sourceHeight * components * byteCount;\n    target = new Buffer(gl2, {\n      byteLength,\n      accessor: {\n        type: sourceType,\n        size: components\n      }\n    });\n  }\n\n  target.bind({\n    target: 35051\n  });\n  withParameters(gl2, {\n    framebuffer\n  }, () => {\n    gl2.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, targetByteOffset);\n  });\n  target.unbind({\n    target: 35051\n  });\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return target;\n}\nexport function copyToDataUrl(source, {\n  sourceAttachment = 36064,\n  targetMaxHeight = Number.MAX_SAFE_INTEGER\n} = {}) {\n  let data = readPixelsToArray(source, {\n    sourceAttachment\n  });\n  let {\n    width,\n    height\n  } = source;\n\n  while (height > targetMaxHeight) {\n    ({\n      data,\n      width,\n      height\n    } = scalePixels({\n      data,\n      width,\n      height\n    }));\n  }\n\n  flipRows({\n    data,\n    width,\n    height\n  });\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const context = canvas.getContext('2d');\n  const imageData = context.createImageData(width, height);\n  imageData.data.set(data);\n  context.putImageData(imageData, 0, 0);\n  return canvas.toDataURL();\n}\nexport function copyToImage(source, {\n  sourceAttachment = 36064,\n  targetImage = null\n} = {}) {\n  const dataUrl = copyToDataUrl(source, {\n    sourceAttachment\n  });\n  targetImage = targetImage || new Image();\n  targetImage.src = dataUrl;\n  return targetImage;\n}\nexport function copyToTexture(source, target, options = {}) {\n  const {\n    sourceX = 0,\n    sourceY = 0,\n    targetMipmaplevel = 0,\n    targetInternalFormat = 6408\n  } = options;\n  let {\n    targetX,\n    targetY,\n    targetZ,\n    width,\n    height\n  } = options;\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  const {\n    gl,\n    handle\n  } = framebuffer;\n  const isSubCopy = typeof targetX !== 'undefined' || typeof targetY !== 'undefined' || typeof targetZ !== 'undefined';\n  targetX = targetX || 0;\n  targetY = targetY || 0;\n  targetZ = targetZ || 0;\n  const prevHandle = gl.bindFramebuffer(36160, handle);\n  assert(target);\n  let texture = null;\n\n  if (target instanceof Texture) {\n    texture = target;\n    width = Number.isFinite(width) ? width : texture.width;\n    height = Number.isFinite(height) ? height : texture.height;\n    texture.bind(0);\n    target = texture.target;\n  }\n\n  if (!isSubCopy) {\n    gl.copyTexImage2D(target, targetMipmaplevel, targetInternalFormat, sourceX, sourceY, width, height, 0);\n  } else {\n    switch (target) {\n      case 3553:\n      case 34067:\n        gl.copyTexSubImage2D(target, targetMipmaplevel, targetX, targetY, sourceX, sourceY, width, height);\n        break;\n\n      case 35866:\n      case 32879:\n        const gl2 = assertWebGL2Context(gl);\n        gl2.copyTexSubImage3D(target, targetMipmaplevel, targetX, targetY, targetZ, sourceX, sourceY, width, height);\n        break;\n\n      default:\n    }\n  }\n\n  if (texture) {\n    texture.unbind();\n  }\n\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return texture;\n}\nexport function blit(source, target, options = {}) {\n  const {\n    sourceX0 = 0,\n    sourceY0 = 0,\n    targetX0 = 0,\n    targetY0 = 0,\n    color = true,\n    depth = false,\n    stencil = false,\n    filter = 9728\n  } = options;\n  let {\n    sourceX1,\n    sourceY1,\n    targetX1,\n    targetY1,\n    sourceAttachment = 36064,\n    mask = 0\n  } = options;\n  const {\n    framebuffer: srcFramebuffer,\n    deleteFramebuffer: deleteSrcFramebuffer\n  } = getFramebuffer(source);\n  const {\n    framebuffer: dstFramebuffer,\n    deleteFramebuffer: deleteDstFramebuffer\n  } = getFramebuffer(target);\n  assert(srcFramebuffer);\n  assert(dstFramebuffer);\n  const {\n    gl,\n    handle,\n    width,\n    height,\n    readBuffer\n  } = dstFramebuffer;\n  const gl2 = assertWebGL2Context(gl);\n\n  if (!srcFramebuffer.handle && sourceAttachment === 36064) {\n    sourceAttachment = 1028;\n  }\n\n  if (color) {\n    mask |= 16384;\n  }\n\n  if (depth) {\n    mask |= 256;\n  }\n\n  if (stencil) {\n    mask |= 1024;\n  }\n\n  if (deleteSrcFramebuffer || deleteDstFramebuffer) {\n    if (mask & (256 | 1024)) {\n      mask = 16384;\n      log.warn('Blitting from or into a Texture object, forcing mask to GL.COLOR_BUFFER_BIT')();\n    }\n  }\n\n  assert(mask);\n  sourceX1 = sourceX1 === undefined ? srcFramebuffer.width : sourceX1;\n  sourceY1 = sourceY1 === undefined ? srcFramebuffer.height : sourceY1;\n  targetX1 = targetX1 === undefined ? width : targetX1;\n  targetY1 = targetY1 === undefined ? height : targetY1;\n  const prevDrawHandle = gl.bindFramebuffer(36009, handle);\n  const prevReadHandle = gl.bindFramebuffer(36008, srcFramebuffer.handle);\n  gl2.readBuffer(sourceAttachment);\n  gl2.blitFramebuffer(sourceX0, sourceY0, sourceX1, sourceY1, targetX0, targetY0, targetX1, targetY1, mask, filter);\n  gl2.readBuffer(readBuffer);\n  gl2.bindFramebuffer(36008, prevReadHandle || null);\n  gl2.bindFramebuffer(36009, prevDrawHandle || null);\n\n  if (deleteSrcFramebuffer) {\n    srcFramebuffer.delete();\n  }\n\n  if (deleteDstFramebuffer) {\n    dstFramebuffer.delete();\n  }\n\n  return dstFramebuffer;\n}\n\nfunction getFramebuffer(source) {\n  if (!(source instanceof Framebuffer)) {\n    return {\n      framebuffer: toFramebuffer(source),\n      deleteFramebuffer: true\n    };\n  }\n\n  return {\n    framebuffer: source,\n    deleteFramebuffer: false\n  };\n}\n\nfunction getPixelArray(pixelArray, type, format, width, height) {\n  if (pixelArray) {\n    return pixelArray;\n  }\n\n  type = type || 5121;\n  const ArrayType = getTypedArrayFromGLType(type, {\n    clamped: false\n  });\n  const components = glFormatToComponents(format);\n  return new ArrayType(width * height * components);\n}\n//# sourceMappingURL=copy-and-blit.js.map","import { getWebGL2Context, assertWebGL2Context, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Texture2D from './texture-2d';\nimport Renderbuffer from './renderbuffer';\nimport { clear, clearBuffer } from './clear';\nimport { copyToDataUrl } from './copy-and-blit.js';\nimport { getFeatures } from '../features';\nimport { getKey } from '../webgl-utils';\nimport { assert } from '../utils';\nconst ERR_MULTIPLE_RENDERTARGETS = 'Multiple render targets not supported';\nexport default class Framebuffer extends Resource {\n  static isSupported(gl, options = {}) {\n    const {\n      colorBufferFloat,\n      colorBufferHalfFloat\n    } = options;\n    let supported = true;\n\n    if (colorBufferFloat) {\n      supported = Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('WEBGL_color_buffer_float') || gl.getExtension('OES_texture_float'));\n    }\n\n    if (colorBufferHalfFloat) {\n      supported = supported && Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('EXT_color_buffer_half_float'));\n    }\n\n    return supported;\n  }\n\n  static getDefaultFramebuffer(gl) {\n    gl.luma = gl.luma || {};\n    gl.luma.defaultFramebuffer = gl.luma.defaultFramebuffer || new Framebuffer(gl, {\n      id: 'default-framebuffer',\n      handle: null,\n      attachments: {}\n    });\n    return gl.luma.defaultFramebuffer;\n  }\n\n  get MAX_COLOR_ATTACHMENTS() {\n    const gl2 = assertWebGL2Context(this.gl);\n    return gl2.getParameter(gl2.MAX_COLOR_ATTACHMENTS);\n  }\n\n  get MAX_DRAW_BUFFERS() {\n    const gl2 = assertWebGL2Context(this.gl);\n    return gl2.getParameter(gl2.MAX_DRAW_BUFFERS);\n  }\n\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    this.width = null;\n    this.height = null;\n    this.attachments = {};\n    this.readBuffer = 36064;\n    this.drawBuffers = [36064];\n    this.ownResources = [];\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  get color() {\n    return this.attachments[36064] || null;\n  }\n\n  get texture() {\n    return this.attachments[36064] || null;\n  }\n\n  get depth() {\n    return this.attachments[36096] || this.attachments[33306] || null;\n  }\n\n  get stencil() {\n    return this.attachments[36128] || this.attachments[33306] || null;\n  }\n\n  initialize({\n    width = 1,\n    height = 1,\n    attachments = null,\n    color = true,\n    depth = true,\n    stencil = false,\n    check = true,\n    readBuffer = undefined,\n    drawBuffers = undefined\n  }) {\n    assert(width >= 0 && height >= 0, 'Width and height need to be integers');\n    this.width = width;\n    this.height = height;\n\n    if (attachments) {\n      for (const attachment in attachments) {\n        const target = attachments[attachment];\n        const object = Array.isArray(target) ? target[0] : target;\n        object.resize({\n          width,\n          height\n        });\n      }\n    } else {\n      attachments = this._createDefaultAttachments(color, depth, stencil, width, height);\n    }\n\n    this.update({\n      clearAttachments: true,\n      attachments,\n      readBuffer,\n      drawBuffers\n    });\n\n    if (attachments && check) {\n      this.checkStatus();\n    }\n  }\n\n  delete() {\n    for (const resource of this.ownResources) {\n      resource.delete();\n    }\n\n    super.delete();\n    return this;\n  }\n\n  update({\n    attachments = {},\n    readBuffer,\n    drawBuffers,\n    clearAttachments = false,\n    resizeAttachments = true\n  }) {\n    this.attach(attachments, {\n      clearAttachments,\n      resizeAttachments\n    });\n    const {\n      gl\n    } = this;\n    const prevHandle = gl.bindFramebuffer(36160, this.handle);\n\n    if (readBuffer) {\n      this._setReadBuffer(readBuffer);\n    }\n\n    if (drawBuffers) {\n      this._setDrawBuffers(drawBuffers);\n    }\n\n    gl.bindFramebuffer(36160, prevHandle || null);\n    return this;\n  }\n\n  resize(options = {}) {\n    let {\n      width,\n      height\n    } = options;\n\n    if (this.handle === null) {\n      assert(width === undefined && height === undefined);\n      this.width = this.gl.drawingBufferWidth;\n      this.height = this.gl.drawingBufferHeight;\n      return this;\n    }\n\n    if (width === undefined) {\n      width = this.gl.drawingBufferWidth;\n    }\n\n    if (height === undefined) {\n      height = this.gl.drawingBufferHeight;\n    }\n\n    if (width !== this.width && height !== this.height) {\n      log.log(2, \"Resizing framebuffer \".concat(this.id, \" to \").concat(width, \"x\").concat(height))();\n    }\n\n    for (const attachmentPoint in this.attachments) {\n      this.attachments[attachmentPoint].resize({\n        width,\n        height\n      });\n    }\n\n    this.width = width;\n    this.height = height;\n    return this;\n  }\n\n  attach(attachments, {\n    clearAttachments = false,\n    resizeAttachments = true\n  } = {}) {\n    const newAttachments = {};\n\n    if (clearAttachments) {\n      Object.keys(this.attachments).forEach(key => {\n        newAttachments[key] = null;\n      });\n    }\n\n    Object.assign(newAttachments, attachments);\n    const prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n    for (const key in newAttachments) {\n      assert(key !== undefined, 'Misspelled framebuffer binding point?');\n      const attachment = Number(key);\n      const descriptor = newAttachments[attachment];\n      let object = descriptor;\n\n      if (!object) {\n        this._unattach(attachment);\n      } else if (object instanceof Renderbuffer) {\n        this._attachRenderbuffer({\n          attachment,\n          renderbuffer: object\n        });\n      } else if (Array.isArray(descriptor)) {\n        const [texture, layer = 0, level = 0] = descriptor;\n        object = texture;\n\n        this._attachTexture({\n          attachment,\n          texture,\n          layer,\n          level\n        });\n      } else {\n        this._attachTexture({\n          attachment,\n          texture: object,\n          layer: 0,\n          level: 0\n        });\n      }\n\n      if (resizeAttachments && object) {\n        object.resize({\n          width: this.width,\n          height: this.height\n        });\n      }\n    }\n\n    this.gl.bindFramebuffer(36160, prevHandle || null);\n    Object.assign(this.attachments, attachments);\n    Object.keys(this.attachments).filter(key => !this.attachments[key]).forEach(key => {\n      delete this.attachments[key];\n    });\n  }\n\n  checkStatus() {\n    const {\n      gl\n    } = this;\n    const status = this.getStatus();\n\n    if (status !== 36053) {\n      throw new Error(_getFrameBufferStatus(status));\n    }\n\n    return this;\n  }\n\n  getStatus() {\n    const {\n      gl\n    } = this;\n    const prevHandle = gl.bindFramebuffer(36160, this.handle);\n    const status = gl.checkFramebufferStatus(36160);\n    gl.bindFramebuffer(36160, prevHandle || null);\n    return status;\n  }\n\n  clear(options = {}) {\n    const {\n      color,\n      depth,\n      stencil,\n      drawBuffers = []\n    } = options;\n    const prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n    if (color || depth || stencil) {\n      clear(this.gl, {\n        color,\n        depth,\n        stencil\n      });\n    }\n\n    drawBuffers.forEach((value, drawBuffer) => {\n      clearBuffer(this.gl, {\n        drawBuffer,\n        value\n      });\n    });\n    this.gl.bindFramebuffer(36160, prevHandle || null);\n    return this;\n  }\n\n  readPixels(opts = {}) {\n    log.error('Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)')();\n    return null;\n  }\n\n  readPixelsToBuffer(opts = {}) {\n    log.error('Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)')();\n    return null;\n  }\n\n  copyToDataUrl(opts = {}) {\n    log.error('Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)')();\n    return null;\n  }\n\n  copyToImage(opts = {}) {\n    log.error('Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)')();\n    return null;\n  }\n\n  copyToTexture(opts = {}) {\n    log.error('Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n    return null;\n  }\n\n  blit(opts = {}) {\n    log.error('Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)')();\n    return null;\n  }\n\n  invalidate({\n    attachments = [],\n    x = 0,\n    y = 0,\n    width,\n    height\n  }) {\n    const gl2 = assertWebGL2Context(this.gl);\n    const prevHandle = gl2.bindFramebuffer(36008, this.handle);\n    const invalidateAll = x === 0 && y === 0 && width === undefined && height === undefined;\n\n    if (invalidateAll) {\n      gl2.invalidateFramebuffer(36008, attachments);\n    } else {\n      gl2.invalidateFramebuffer(36008, attachments, x, y, width, height);\n    }\n\n    gl2.bindFramebuffer(36008, prevHandle);\n    return this;\n  }\n\n  getAttachmentParameter(attachment, pname, keys) {\n    let value = this._getAttachmentParameterFallback(pname);\n\n    if (value === null) {\n      this.gl.bindFramebuffer(36160, this.handle);\n      value = this.gl.getFramebufferAttachmentParameter(36160, attachment, pname);\n      this.gl.bindFramebuffer(36160, null);\n    }\n\n    if (keys && value > 1000) {\n      value = getKey(this.gl, value);\n    }\n\n    return value;\n  }\n\n  getAttachmentParameters(attachment = 36064, keys, parameters = this.constructor.ATTACHMENT_PARAMETERS || []) {\n    const values = {};\n\n    for (const pname of parameters) {\n      const key = keys ? getKey(this.gl, pname) : pname;\n      values[key] = this.getAttachmentParameter(attachment, pname, keys);\n    }\n\n    return values;\n  }\n\n  getParameters(keys = true) {\n    const attachments = Object.keys(this.attachments);\n    const parameters = {};\n\n    for (const attachmentName of attachments) {\n      const attachment = Number(attachmentName);\n      const key = keys ? getKey(this.gl, attachment) : attachment;\n      parameters[key] = this.getAttachmentParameters(attachment, keys);\n    }\n\n    return parameters;\n  }\n\n  show() {\n    if (typeof window !== 'undefined') {\n      window.open(copyToDataUrl(this), 'luma-debug-texture');\n    }\n\n    return this;\n  }\n\n  log(logLevel = 0, message = '') {\n    if (logLevel > log.level || typeof window === 'undefined') {\n      return this;\n    }\n\n    message = message || \"Framebuffer \".concat(this.id);\n    const image = copyToDataUrl(this, {\n      targetMaxHeight: 100\n    });\n    log.image({\n      logLevel,\n      message,\n      image\n    }, message)();\n    return this;\n  }\n\n  bind({\n    target = 36160\n  } = {}) {\n    this.gl.bindFramebuffer(target, this.handle);\n    return this;\n  }\n\n  unbind({\n    target = 36160\n  } = {}) {\n    this.gl.bindFramebuffer(target, null);\n    return this;\n  }\n\n  _createDefaultAttachments(color, depth, stencil, width, height) {\n    let defaultAttachments = null;\n\n    if (color) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[36064] = new Texture2D(this.gl, {\n        id: \"\".concat(this.id, \"-color0\"),\n        pixels: null,\n        format: 6408,\n        type: 5121,\n        width,\n        height,\n        mipmaps: false,\n        parameters: {\n          [10241]: 9729,\n          [10240]: 9729,\n          [10242]: 33071,\n          [10243]: 33071\n        }\n      });\n      this.ownResources.push(defaultAttachments[36064]);\n    }\n\n    if (depth && stencil) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[33306] = new Renderbuffer(this.gl, {\n        id: \"\".concat(this.id, \"-depth-stencil\"),\n        format: 35056,\n        width,\n        height: 111\n      });\n      this.ownResources.push(defaultAttachments[33306]);\n    } else if (depth) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[36096] = new Renderbuffer(this.gl, {\n        id: \"\".concat(this.id, \"-depth\"),\n        format: 33189,\n        width,\n        height\n      });\n      this.ownResources.push(defaultAttachments[36096]);\n    } else if (stencil) {\n      assert(false);\n    }\n\n    return defaultAttachments;\n  }\n\n  _unattach(attachment) {\n    const oldAttachment = this.attachments[attachment];\n\n    if (!oldAttachment) {\n      return;\n    }\n\n    if (oldAttachment instanceof Renderbuffer) {\n      this.gl.framebufferRenderbuffer(36160, attachment, 36161, null);\n    } else {\n      this.gl.framebufferTexture2D(36160, attachment, 3553, null, 0);\n    }\n\n    delete this.attachments[attachment];\n  }\n\n  _attachRenderbuffer({\n    attachment = 36064,\n    renderbuffer\n  }) {\n    const {\n      gl\n    } = this;\n    gl.framebufferRenderbuffer(36160, attachment, 36161, renderbuffer.handle);\n    this.attachments[attachment] = renderbuffer;\n  }\n\n  _attachTexture({\n    attachment = 36064,\n    texture,\n    layer,\n    level\n  }) {\n    const {\n      gl\n    } = this;\n    gl.bindTexture(texture.target, texture.handle);\n\n    switch (texture.target) {\n      case 35866:\n      case 32879:\n        const gl2 = assertWebGL2Context(gl);\n        gl2.framebufferTextureLayer(36160, attachment, texture.target, level, layer);\n        break;\n\n      case 34067:\n        const face = mapIndexToCubeMapFace(layer);\n        gl.framebufferTexture2D(36160, attachment, face, texture.handle, level);\n        break;\n\n      case 3553:\n        gl.framebufferTexture2D(36160, attachment, 3553, texture.handle, level);\n        break;\n\n      default:\n        assert(false, 'Illegal texture type');\n    }\n\n    gl.bindTexture(texture.target, null);\n    this.attachments[attachment] = texture;\n  }\n\n  _setReadBuffer(readBuffer) {\n    const gl2 = getWebGL2Context(this.gl);\n\n    if (gl2) {\n      gl2.readBuffer(readBuffer);\n    } else {\n      assert(readBuffer === 36064 || readBuffer === 1029, ERR_MULTIPLE_RENDERTARGETS);\n    }\n\n    this.readBuffer = readBuffer;\n  }\n\n  _setDrawBuffers(drawBuffers) {\n    const {\n      gl\n    } = this;\n    const gl2 = assertWebGL2Context(gl);\n\n    if (gl2) {\n      gl2.drawBuffers(drawBuffers);\n    } else {\n      const ext = gl.getExtension('WEBGL_draw_buffers');\n\n      if (ext) {\n        ext.drawBuffersWEBGL(drawBuffers);\n      } else {\n        assert(drawBuffers.length === 1 && (drawBuffers[0] === 36064 || drawBuffers[0] === 1029), ERR_MULTIPLE_RENDERTARGETS);\n      }\n    }\n\n    this.drawBuffers = drawBuffers;\n  }\n\n  _getAttachmentParameterFallback(pname) {\n    const caps = getFeatures(this.gl);\n\n    switch (pname) {\n      case 36052:\n        return !caps.WEBGL2 ? 0 : null;\n\n      case 33298:\n      case 33299:\n      case 33300:\n      case 33301:\n      case 33302:\n      case 33303:\n        return !caps.WEBGL2 ? 8 : null;\n\n      case 33297:\n        return !caps.WEBGL2 ? 5125 : null;\n\n      case 33296:\n        return !caps.WEBGL2 && !caps.EXT_sRGB ? 9729 : null;\n\n      default:\n        return null;\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createFramebuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteFramebuffer(this.handle);\n  }\n\n  _bindHandle(handle) {\n    return this.gl.bindFramebuffer(36160, handle);\n  }\n\n}\n\nfunction mapIndexToCubeMapFace(layer) {\n  return layer < 34069 ? layer + 34069 : layer;\n}\n\nfunction _getFrameBufferStatus(status) {\n  const STATUS = Framebuffer.STATUS || {};\n  return STATUS[status] || \"Framebuffer error \".concat(status);\n}\n\nexport const FRAMEBUFFER_ATTACHMENT_PARAMETERS = [36049, 36048, 33296, 33298, 33299, 33300, 33301, 33302, 33303];\nFramebuffer.ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;\n//# sourceMappingURL=framebuffer.js.map","import { log } from '@luma.gl/gltools';\nimport Framebuffer from './framebuffer';\nimport Renderbuffer from './renderbuffer';\nimport Texture from './texture';\nimport { assert } from '../utils';\nconst UNIFORM_SETTERS = {\n  [5126]: getArraySetter.bind(null, 'uniform1fv', toFloatArray, 1, setVectorUniform),\n  [35664]: getArraySetter.bind(null, 'uniform2fv', toFloatArray, 2, setVectorUniform),\n  [35665]: getArraySetter.bind(null, 'uniform3fv', toFloatArray, 3, setVectorUniform),\n  [35666]: getArraySetter.bind(null, 'uniform4fv', toFloatArray, 4, setVectorUniform),\n  [5124]: getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform),\n  [35667]: getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform),\n  [35668]: getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform),\n  [35669]: getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform),\n  [35670]: getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform),\n  [35671]: getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform),\n  [35672]: getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform),\n  [35673]: getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform),\n  [35674]: getArraySetter.bind(null, 'uniformMatrix2fv', toFloatArray, 4, setMatrixUniform),\n  [35675]: getArraySetter.bind(null, 'uniformMatrix3fv', toFloatArray, 9, setMatrixUniform),\n  [35676]: getArraySetter.bind(null, 'uniformMatrix4fv', toFloatArray, 16, setMatrixUniform),\n  [35678]: getSamplerSetter,\n  [35680]: getSamplerSetter,\n  [5125]: getArraySetter.bind(null, 'uniform1uiv', toUIntArray, 1, setVectorUniform),\n  [36294]: getArraySetter.bind(null, 'uniform2uiv', toUIntArray, 2, setVectorUniform),\n  [36295]: getArraySetter.bind(null, 'uniform3uiv', toUIntArray, 3, setVectorUniform),\n  [36296]: getArraySetter.bind(null, 'uniform4uiv', toUIntArray, 4, setVectorUniform),\n  [35685]: getArraySetter.bind(null, 'uniformMatrix2x3fv', toFloatArray, 6, setMatrixUniform),\n  [35686]: getArraySetter.bind(null, 'uniformMatrix2x4fv', toFloatArray, 8, setMatrixUniform),\n  [35687]: getArraySetter.bind(null, 'uniformMatrix3x2fv', toFloatArray, 6, setMatrixUniform),\n  [35688]: getArraySetter.bind(null, 'uniformMatrix3x4fv', toFloatArray, 12, setMatrixUniform),\n  [35689]: getArraySetter.bind(null, 'uniformMatrix4x2fv', toFloatArray, 8, setMatrixUniform),\n  [35690]: getArraySetter.bind(null, 'uniformMatrix4x3fv', toFloatArray, 12, setMatrixUniform),\n  [35678]: getSamplerSetter,\n  [35680]: getSamplerSetter,\n  [35679]: getSamplerSetter,\n  [35682]: getSamplerSetter,\n  [36289]: getSamplerSetter,\n  [36292]: getSamplerSetter,\n  [36293]: getSamplerSetter,\n  [36298]: getSamplerSetter,\n  [36299]: getSamplerSetter,\n  [36300]: getSamplerSetter,\n  [36303]: getSamplerSetter,\n  [36306]: getSamplerSetter,\n  [36307]: getSamplerSetter,\n  [36308]: getSamplerSetter,\n  [36311]: getSamplerSetter\n};\nconst FLOAT_ARRAY = {};\nconst INT_ARRAY = {};\nconst UINT_ARRAY = {};\nconst array1 = [0];\n\nfunction toTypedArray(value, uniformLength, Type, cache) {\n  if (uniformLength === 1 && typeof value === 'boolean') {\n    value = value ? 1 : 0;\n  }\n\n  if (Number.isFinite(value)) {\n    array1[0] = value;\n    value = array1;\n  }\n\n  const length = value.length;\n\n  if (length % uniformLength) {\n    log.warn(\"Uniform size should be multiples of \".concat(uniformLength), value)();\n  }\n\n  if (value instanceof Type) {\n    return value;\n  }\n\n  let result = cache[length];\n\n  if (!result) {\n    result = new Type(length);\n    cache[length] = result;\n  }\n\n  for (let i = 0; i < length; i++) {\n    result[i] = value[i];\n  }\n\n  return result;\n}\n\nfunction toFloatArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Float32Array, FLOAT_ARRAY);\n}\n\nfunction toIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Int32Array, INT_ARRAY);\n}\n\nfunction toUIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Uint32Array, UINT_ARRAY);\n}\n\nexport function getUniformSetter(gl, location, info) {\n  const setter = UNIFORM_SETTERS[info.type];\n\n  if (!setter) {\n    throw new Error(\"Unknown GLSL uniform type \".concat(info.type));\n  }\n\n  return setter().bind(null, gl, location);\n}\nexport function parseUniformName(name) {\n  if (name[name.length - 1] !== ']') {\n    return {\n      name,\n      length: 1,\n      isArray: false\n    };\n  }\n\n  const UNIFORM_NAME_REGEXP = /([^[]*)(\\[[0-9]+\\])?/;\n  const matches = name.match(UNIFORM_NAME_REGEXP);\n\n  if (!matches || matches.length < 2) {\n    throw new Error(\"Failed to parse GLSL uniform name \".concat(name));\n  }\n\n  return {\n    name: matches[1],\n    length: matches[2] || 1,\n    isArray: Boolean(matches[2])\n  };\n}\nexport function checkUniformValues(uniforms, source, uniformMap) {\n  for (const uniformName in uniforms) {\n    const value = uniforms[uniformName];\n    const shouldCheck = !uniformMap || Boolean(uniformMap[uniformName]);\n\n    if (shouldCheck && !checkUniformValue(value)) {\n      source = source ? \"\".concat(source, \" \") : '';\n      console.error(\"\".concat(source, \" Bad uniform \").concat(uniformName), value);\n      throw new Error(\"\".concat(source, \" Bad uniform \").concat(uniformName));\n    }\n  }\n\n  return true;\n}\n\nfunction checkUniformValue(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return checkUniformArray(value);\n  }\n\n  if (isFinite(value)) {\n    return true;\n  } else if (value === true || value === false) {\n    return true;\n  } else if (value instanceof Texture) {\n    return true;\n  } else if (value instanceof Renderbuffer) {\n    return true;\n  } else if (value instanceof Framebuffer) {\n    return Boolean(value.texture);\n  }\n\n  return false;\n}\n\nexport function copyUniform(uniforms, key, value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    if (uniforms[key]) {\n      const dest = uniforms[key];\n\n      for (let i = 0, len = value.length; i < len; ++i) {\n        dest[i] = value[i];\n      }\n    } else {\n      uniforms[key] = value.slice();\n    }\n  } else {\n    uniforms[key] = value;\n  }\n}\n\nfunction checkUniformArray(value) {\n  if (value.length === 0) {\n    return false;\n  }\n\n  const checkLength = Math.min(value.length, 16);\n\n  for (let i = 0; i < checkLength; ++i) {\n    if (!Number.isFinite(value[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getSamplerSetter() {\n  let cache = null;\n  return (gl, location, value) => {\n    const update = cache !== value;\n\n    if (update) {\n      gl.uniform1i(location, value);\n      cache = value;\n    }\n\n    return update;\n  };\n}\n\nfunction getArraySetter(functionName, toArray, size, uniformSetter) {\n  let cache = null;\n  let cacheLength = null;\n  return (gl, location, value) => {\n    const arrayValue = toArray(value, size);\n    const length = arrayValue.length;\n    let update = false;\n\n    if (cache === null) {\n      cache = new Float32Array(length);\n      cacheLength = length;\n      update = true;\n    } else {\n      assert(cacheLength === length, 'Uniform length cannot change.');\n\n      for (let i = 0; i < length; ++i) {\n        if (arrayValue[i] !== cache[i]) {\n          update = true;\n          break;\n        }\n      }\n    }\n\n    if (update) {\n      uniformSetter(gl, functionName, location, arrayValue);\n      cache.set(arrayValue);\n    }\n\n    return update;\n  };\n}\n\nfunction setVectorUniform(gl, functionName, location, value) {\n  gl[functionName](location, value);\n}\n\nfunction setMatrixUniform(gl, functionName, location, value) {\n  gl[functionName](location, false, value);\n}\n//# sourceMappingURL=uniforms.js.map","export default function getShaderName(shader, defaultName = 'unnamed') {\n  const SHADER_NAME_REGEXP = /#define[\\s*]SHADER_NAME[\\s*]([A-Za-z0-9_-]+)[\\s*]/;\n  const match = shader.match(SHADER_NAME_REGEXP);\n  return match ? match[1] : defaultName;\n}\n//# sourceMappingURL=get-shader-name.js.map","import getShaderName from './get-shader-name';\nimport getShaderTypeName from './get-shader-type-name';\nexport default function formatGLSLCompilerError(errLog, src, shaderType) {\n  const {\n    shaderName,\n    errors,\n    warnings\n  } = parseGLSLCompilerError(errLog, src, shaderType);\n  return \"GLSL compilation error in \".concat(shaderName, \"\\n\\n\").concat(errors, \"\\n\").concat(warnings);\n}\nexport function parseGLSLCompilerError(errLog, src, shaderType, shaderName) {\n  const errorStrings = errLog.split(/\\r?\\n/);\n  const errors = {};\n  const warnings = {};\n  const name = shaderName || getShaderName(src) || '(unnamed)';\n  const shaderDescription = \"\".concat(getShaderTypeName(shaderType), \" shader \").concat(name);\n\n  for (let i = 0; i < errorStrings.length; i++) {\n    const errorString = errorStrings[i];\n\n    if (errorString.length <= 1) {\n      continue;\n    }\n\n    const segments = errorString.split(':');\n    const type = segments[0];\n    const line = parseInt(segments[2], 10);\n\n    if (isNaN(line)) {\n      throw new Error(\"GLSL compilation error in \".concat(shaderDescription, \": \").concat(errLog));\n    }\n\n    if (type !== 'WARNING') {\n      errors[line] = errorString;\n    } else {\n      warnings[line] = errorString;\n    }\n  }\n\n  const lines = addLineNumbers(src);\n  return {\n    shaderName: shaderDescription,\n    errors: formatErrors(errors, lines),\n    warnings: formatErrors(warnings, lines)\n  };\n}\n\nfunction formatErrors(errors, lines) {\n  let message = '';\n\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n\n    if (!errors[i + 3] && !errors[i + 2] && !errors[i + 1]) {\n      continue;\n    }\n\n    message += \"\".concat(line, \"\\n\");\n\n    if (errors[i + 1]) {\n      const error = errors[i + 1];\n      const segments = error.split(':', 3);\n      const type = segments[0];\n      const column = parseInt(segments[1], 10) || 0;\n      const err = error.substring(segments.join(':').length + 1).trim();\n      message += padLeft(\"^^^ \".concat(type, \": \").concat(err, \"\\n\\n\"), column);\n    }\n  }\n\n  return message;\n}\n\nfunction addLineNumbers(string, start = 1, delim = ': ') {\n  const lines = string.split(/\\r?\\n/);\n  const maxDigits = String(lines.length + start - 1).length;\n  return lines.map((line, i) => {\n    const lineNumber = String(i + start);\n    const digits = lineNumber.length;\n    const prefix = padLeft(lineNumber, maxDigits - digits);\n    return prefix + delim + line;\n  });\n}\n\nfunction padLeft(string, digits) {\n  let result = '';\n\n  for (let i = 0; i < digits; ++i) {\n    result += ' ';\n  }\n\n  return \"\".concat(result).concat(string);\n}\n//# sourceMappingURL=format-glsl-error.js.map","import { assertWebGLContext, log } from '@luma.gl/gltools';\nimport { parseGLSLCompilerError, getShaderName } from '../glsl-utils';\nimport { uid, assert } from '../utils';\nimport Resource from './resource';\nconst ERR_SOURCE = 'Shader: GLSL source code must be a JavaScript string';\nexport class Shader extends Resource {\n  static getTypeName(shaderType) {\n    switch (shaderType) {\n      case 35633:\n        return 'vertex-shader';\n\n      case 35632:\n        return 'fragment-shader';\n\n      default:\n        assert(false);\n        return 'unknown';\n    }\n  }\n\n  constructor(gl, props) {\n    assertWebGLContext(gl);\n    assert(typeof props.source === 'string', ERR_SOURCE);\n    const id = getShaderName(props.source, null) || props.id || uid(\"unnamed \".concat(Shader.getTypeName(props.shaderType)));\n    super(gl, {\n      id\n    });\n    this.shaderType = props.shaderType;\n    this.source = props.source;\n    this.initialize(props);\n  }\n\n  initialize({\n    source\n  }) {\n    const shaderName = getShaderName(source, null);\n\n    if (shaderName) {\n      this.id = uid(shaderName);\n    }\n\n    this._compile(source);\n  }\n\n  getParameter(pname) {\n    return this.gl.getShaderParameter(this.handle, pname);\n  }\n\n  toString() {\n    return \"\".concat(Shader.getTypeName(this.shaderType), \":\").concat(this.id);\n  }\n\n  getName() {\n    return getShaderName(this.source) || 'unnamed-shader';\n  }\n\n  getSource() {\n    return this.gl.getShaderSource(this.handle);\n  }\n\n  getTranslatedSource() {\n    const extension = this.gl.getExtension('WEBGL_debug_shaders');\n    return extension ? extension.getTranslatedShaderSource(this.handle) : 'No translated source available. WEBGL_debug_shaders not implemented';\n  }\n\n  _compile(source = this.source) {\n    if (!source.startsWith('#version ')) {\n      source = \"#version 100\\n\".concat(source);\n    }\n\n    this.source = source;\n    this.gl.shaderSource(this.handle, this.source);\n    this.gl.compileShader(this.handle);\n    const compileStatus = this.getParameter(35713);\n\n    if (!compileStatus) {\n      const infoLog = this.gl.getShaderInfoLog(this.handle);\n      const {\n        shaderName,\n        errors,\n        warnings\n      } = parseGLSLCompilerError(infoLog, this.source, this.shaderType, this.id);\n      log.error(\"GLSL compilation errors in \".concat(shaderName, \"\\n\").concat(errors))();\n      log.warn(\"GLSL compilation warnings in \".concat(shaderName, \"\\n\").concat(warnings))();\n      throw new Error(\"GLSL compilation errors in \".concat(shaderName));\n    }\n  }\n\n  _deleteHandle() {\n    this.gl.deleteShader(this.handle);\n  }\n\n  _getOptsFromHandle() {\n    return {\n      type: this.getParameter(35663),\n      source: this.getSource()\n    };\n  }\n\n}\nexport class VertexShader extends Shader {\n  constructor(gl, props) {\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    super(gl, Object.assign({}, props, {\n      shaderType: 35633\n    }));\n  }\n\n  _createHandle() {\n    return this.gl.createShader(35633);\n  }\n\n}\nexport class FragmentShader extends Shader {\n  constructor(gl, props) {\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    super(gl, Object.assign({}, props, {\n      shaderType: 35632\n    }));\n  }\n\n  _createHandle() {\n    return this.gl.createShader(35632);\n  }\n\n}\n//# sourceMappingURL=shader.js.map","const GL_FRAGMENT_SHADER = 0x8b30;\nconst GL_VERTEX_SHADER = 0x8b31;\nexport default function getShaderTypeName(type) {\n  switch (type) {\n    case GL_FRAGMENT_SHADER:\n      return 'fragment';\n\n    case GL_VERTEX_SHADER:\n      return 'vertex';\n\n    default:\n      return 'unknown type';\n  }\n}\n//# sourceMappingURL=get-shader-type-name.js.map","import Accessor from './accessor';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { decomposeCompositeGLType } from '../webgl-utils/attribute-utils';\nexport default class ProgramConfiguration {\n  constructor(program) {\n    this.id = program.id;\n    this.attributeInfos = [];\n    this.attributeInfosByName = {};\n    this.attributeInfosByLocation = [];\n    this.varyingInfos = [];\n    this.varyingInfosByName = {};\n    Object.seal(this);\n\n    this._readAttributesFromProgram(program);\n\n    this._readVaryingsFromProgram(program);\n  }\n\n  getAttributeInfo(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return this.attributeInfosByLocation[location];\n    }\n\n    return this.attributeInfosByName[locationOrName] || null;\n  }\n\n  getAttributeLocation(locationOrName) {\n    const attributeInfo = this.getAttributeInfo(locationOrName);\n    return attributeInfo ? attributeInfo.location : -1;\n  }\n\n  getAttributeAccessor(locationOrName) {\n    const attributeInfo = this.getAttributeInfo(locationOrName);\n    return attributeInfo ? attributeInfo.accessor : null;\n  }\n\n  getVaryingInfo(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return this.varyingInfos[location];\n    }\n\n    return this.varyingInfosByName[locationOrName] || null;\n  }\n\n  getVaryingIndex(locationOrName) {\n    const varying = this.getVaryingInfo();\n    return varying ? varying.location : -1;\n  }\n\n  getVaryingAccessor(locationOrName) {\n    const varying = this.getVaryingInfo();\n    return varying ? varying.accessor : null;\n  }\n\n  _readAttributesFromProgram(program) {\n    const {\n      gl\n    } = program;\n    const count = gl.getProgramParameter(program.handle, 35721);\n\n    for (let index = 0; index < count; index++) {\n      const {\n        name,\n        type,\n        size\n      } = gl.getActiveAttrib(program.handle, index);\n      const location = gl.getAttribLocation(program.handle, name);\n\n      if (location >= 0) {\n        this._addAttribute(location, name, type, size);\n      }\n    }\n\n    this.attributeInfos.sort((a, b) => a.location - b.location);\n  }\n\n  _readVaryingsFromProgram(program) {\n    const {\n      gl\n    } = program;\n\n    if (!isWebGL2(gl)) {\n      return;\n    }\n\n    const count = gl.getProgramParameter(program.handle, 35971);\n\n    for (let location = 0; location < count; location++) {\n      const {\n        name,\n        type,\n        size\n      } = gl.getTransformFeedbackVarying(program.handle, location);\n\n      this._addVarying(location, name, type, size);\n    }\n\n    this.varyingInfos.sort((a, b) => a.location - b.location);\n  }\n\n  _addAttribute(location, name, compositeType, size) {\n    const {\n      type,\n      components\n    } = decomposeCompositeGLType(compositeType);\n    const accessor = {\n      type,\n      size: size * components\n    };\n\n    this._inferProperties(location, name, accessor);\n\n    const attributeInfo = {\n      location,\n      name,\n      accessor: new Accessor(accessor)\n    };\n    this.attributeInfos.push(attributeInfo);\n    this.attributeInfosByLocation[location] = attributeInfo;\n    this.attributeInfosByName[attributeInfo.name] = attributeInfo;\n  }\n\n  _inferProperties(location, name, accessor) {\n    if (/instance/i.test(name)) {\n      accessor.divisor = 1;\n    }\n  }\n\n  _addVarying(location, name, compositeType, size) {\n    const {\n      type,\n      components\n    } = decomposeCompositeGLType(compositeType);\n    const accessor = new Accessor({\n      type,\n      size: size * components\n    });\n    const varying = {\n      location,\n      name,\n      accessor\n    };\n    this.varyingInfos.push(varying);\n    this.varyingInfosByName[varying.name] = varying;\n  }\n\n}\n//# sourceMappingURL=program-configuration.js.map","import Resource from './resource';\nimport Texture from './texture';\nimport Framebuffer from './framebuffer';\nimport { parseUniformName, getUniformSetter } from './uniforms';\nimport { VertexShader, FragmentShader } from './shader';\nimport ProgramConfiguration from './program-configuration';\nimport { copyUniform, checkUniformValues } from './uniforms';\nimport { isWebGL2, assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { getKey } from '../webgl-utils';\nimport { getPrimitiveDrawMode } from '../webgl-utils/attribute-utils';\nimport { uid, assert } from '../utils';\nconst LOG_PROGRAM_PERF_PRIORITY = 4;\nconst GL_SEPARATE_ATTRIBS = 0x8c8d;\nconst V6_DEPRECATED_METHODS = ['setVertexArray', 'setAttributes', 'setBuffers', 'unsetBuffers', 'use', 'getUniformCount', 'getUniformInfo', 'getUniformLocation', 'getUniformValue', 'getVarying', 'getFragDataLocation', 'getAttachedShaders', 'getAttributeCount', 'getAttributeLocation', 'getAttributeInfo'];\nexport default class Program extends Resource {\n  constructor(gl, props = {}) {\n    super(gl, props);\n    this.stubRemovedMethods('Program', 'v6.0', V6_DEPRECATED_METHODS);\n    this._isCached = false;\n    this.initialize(props);\n    Object.seal(this);\n\n    this._setId(props.id);\n  }\n\n  initialize(props = {}) {\n    const {\n      hash,\n      vs,\n      fs,\n      varyings,\n      bufferMode = GL_SEPARATE_ATTRIBS\n    } = props;\n    this.hash = hash || '';\n    this.vs = typeof vs === 'string' ? new VertexShader(this.gl, {\n      id: \"\".concat(props.id, \"-vs\"),\n      source: vs\n    }) : vs;\n    this.fs = typeof fs === 'string' ? new FragmentShader(this.gl, {\n      id: \"\".concat(props.id, \"-fs\"),\n      source: fs\n    }) : fs;\n    assert(this.vs instanceof VertexShader);\n    assert(this.fs instanceof FragmentShader);\n    this.uniforms = {};\n    this._textureUniforms = {};\n\n    if (varyings && varyings.length > 0) {\n      assertWebGL2Context(this.gl);\n      this.varyings = varyings;\n      this.gl2.transformFeedbackVaryings(this.handle, varyings, bufferMode);\n    }\n\n    this._compileAndLink();\n\n    this._readUniformLocationsFromLinkedProgram();\n\n    this.configuration = new ProgramConfiguration(this);\n    return this.setProps(props);\n  }\n\n  delete(options = {}) {\n    if (this._isCached) {\n      return this;\n    }\n\n    return super.delete(options);\n  }\n\n  setProps(props) {\n    if ('uniforms' in props) {\n      this.setUniforms(props.uniforms);\n    }\n\n    return this;\n  }\n\n  draw({\n    logPriority,\n    drawMode = 4,\n    vertexCount,\n    offset = 0,\n    start,\n    end,\n    isIndexed = false,\n    indexType = 5123,\n    instanceCount = 0,\n    isInstanced = instanceCount > 0,\n    vertexArray = null,\n    transformFeedback,\n    framebuffer,\n    parameters = {},\n    uniforms,\n    samplers\n  }) {\n    if (uniforms || samplers) {\n      log.deprecated('Program.draw({uniforms})', 'Program.setUniforms(uniforms)')();\n      this.setUniforms(uniforms || {});\n    }\n\n    if (log.priority >= logPriority) {\n      const fb = framebuffer ? framebuffer.id : 'default';\n      const message = \"mode=\".concat(getKey(this.gl, drawMode), \" verts=\").concat(vertexCount, \" \") + \"instances=\".concat(instanceCount, \" indexType=\").concat(getKey(this.gl, indexType), \" \") + \"isInstanced=\".concat(isInstanced, \" isIndexed=\").concat(isIndexed, \" \") + \"Framebuffer=\".concat(fb);\n      log.log(logPriority, message)();\n    }\n\n    assert(vertexArray);\n    this.gl.useProgram(this.handle);\n\n    if (!this._areTexturesRenderable() || vertexCount === 0 || isInstanced && instanceCount === 0) {\n      return false;\n    }\n\n    vertexArray.bindForDraw(vertexCount, instanceCount, () => {\n      if (framebuffer !== undefined) {\n        parameters = Object.assign({}, parameters, {\n          framebuffer\n        });\n      }\n\n      if (transformFeedback) {\n        const primitiveMode = getPrimitiveDrawMode(drawMode);\n        transformFeedback.begin(primitiveMode);\n      }\n\n      this._bindTextures();\n\n      withParameters(this.gl, parameters, () => {\n        if (isIndexed && isInstanced) {\n          this.gl2.drawElementsInstanced(drawMode, vertexCount, indexType, offset, instanceCount);\n        } else if (isIndexed && isWebGL2(this.gl) && !isNaN(start) && !isNaN(end)) {\n          this.gl2.drawRangeElements(drawMode, start, end, vertexCount, indexType, offset);\n        } else if (isIndexed) {\n          this.gl.drawElements(drawMode, vertexCount, indexType, offset);\n        } else if (isInstanced) {\n          this.gl2.drawArraysInstanced(drawMode, offset, vertexCount, instanceCount);\n        } else {\n          this.gl.drawArrays(drawMode, offset, vertexCount);\n        }\n      });\n\n      if (transformFeedback) {\n        transformFeedback.end();\n      }\n    });\n    return true;\n  }\n\n  setUniforms(uniforms = {}) {\n    if (log.priority >= 2) {\n      checkUniformValues(uniforms, this.id, this._uniformSetters);\n    }\n\n    this.gl.useProgram(this.handle);\n\n    for (const uniformName in uniforms) {\n      const uniform = uniforms[uniformName];\n      const uniformSetter = this._uniformSetters[uniformName];\n\n      if (uniformSetter) {\n        let value = uniform;\n        let textureUpdate = false;\n\n        if (value instanceof Framebuffer) {\n          value = value.texture;\n        }\n\n        if (value instanceof Texture) {\n          textureUpdate = this.uniforms[uniformName] !== uniform;\n\n          if (textureUpdate) {\n            if (uniformSetter.textureIndex === undefined) {\n              uniformSetter.textureIndex = this._textureIndexCounter++;\n            }\n\n            const texture = value;\n            const {\n              textureIndex\n            } = uniformSetter;\n            texture.bind(textureIndex);\n            value = textureIndex;\n            this._textureUniforms[uniformName] = texture;\n          } else {\n            value = uniformSetter.textureIndex;\n          }\n        } else if (this._textureUniforms[uniformName]) {\n          delete this._textureUniforms[uniformName];\n        }\n\n        if (uniformSetter(value) || textureUpdate) {\n          copyUniform(this.uniforms, uniformName, uniform);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  _areTexturesRenderable() {\n    let texturesRenderable = true;\n\n    for (const uniformName in this._textureUniforms) {\n      const texture = this._textureUniforms[uniformName];\n      texture.update();\n      texturesRenderable = texturesRenderable && texture.loaded;\n    }\n\n    return texturesRenderable;\n  }\n\n  _bindTextures() {\n    for (const uniformName in this._textureUniforms) {\n      const textureIndex = this._uniformSetters[uniformName].textureIndex;\n\n      this._textureUniforms[uniformName].bind(textureIndex);\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createProgram();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteProgram(this.handle);\n  }\n\n  _getOptionsFromHandle(handle) {\n    const shaderHandles = this.gl.getAttachedShaders(handle);\n    const opts = {};\n\n    for (const shaderHandle of shaderHandles) {\n      const type = this.gl.getShaderParameter(this.handle, 35663);\n\n      switch (type) {\n        case 35633:\n          opts.vs = new VertexShader({\n            handle: shaderHandle\n          });\n          break;\n\n        case 35632:\n          opts.fs = new FragmentShader({\n            handle: shaderHandle\n          });\n          break;\n\n        default:\n      }\n    }\n\n    return opts;\n  }\n\n  _getParameter(pname) {\n    return this.gl.getProgramParameter(this.handle, pname);\n  }\n\n  _setId(id) {\n    if (!id) {\n      const programName = this._getName();\n\n      this.id = uid(programName);\n    }\n  }\n\n  _getName() {\n    let programName = this.vs.getName() || this.fs.getName();\n    programName = programName.replace(/shader/i, '');\n    programName = programName ? \"\".concat(programName, \"-program\") : 'program';\n    return programName;\n  }\n\n  _compileAndLink() {\n    const {\n      gl\n    } = this;\n    gl.attachShader(this.handle, this.vs.handle);\n    gl.attachShader(this.handle, this.fs.handle);\n    log.time(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))();\n    gl.linkProgram(this.handle);\n    log.timeEnd(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))();\n\n    if (gl.debug || log.level > 0) {\n      const linked = gl.getProgramParameter(this.handle, 35714);\n\n      if (!linked) {\n        throw new Error(\"Error linking: \".concat(gl.getProgramInfoLog(this.handle)));\n      }\n\n      gl.validateProgram(this.handle);\n      const validated = gl.getProgramParameter(this.handle, 35715);\n\n      if (!validated) {\n        throw new Error(\"Error validating: \".concat(gl.getProgramInfoLog(this.handle)));\n      }\n    }\n  }\n\n  _readUniformLocationsFromLinkedProgram() {\n    const {\n      gl\n    } = this;\n    this._uniformSetters = {};\n    this._uniformCount = this._getParameter(35718);\n\n    for (let i = 0; i < this._uniformCount; i++) {\n      const info = this.gl.getActiveUniform(this.handle, i);\n      const {\n        name\n      } = parseUniformName(info.name);\n      let location = gl.getUniformLocation(this.handle, name);\n      this._uniformSetters[name] = getUniformSetter(gl, location, info);\n\n      if (info.size > 1) {\n        for (let l = 0; l < info.size; l++) {\n          location = gl.getUniformLocation(this.handle, \"\".concat(name, \"[\").concat(l, \"]\"));\n          this._uniformSetters[\"\".concat(name, \"[\").concat(l, \"]\")] = getUniformSetter(gl, location, info);\n        }\n      }\n    }\n\n    this._textureIndexCounter = 0;\n  }\n\n  getActiveUniforms(uniformIndices, pname) {\n    return this.gl2.getActiveUniforms(this.handle, uniformIndices, pname);\n  }\n\n  getUniformBlockIndex(blockName) {\n    return this.gl2.getUniformBlockIndex(this.handle, blockName);\n  }\n\n  getActiveUniformBlockParameter(blockIndex, pname) {\n    return this.gl2.getActiveUniformBlockParameter(this.handle, blockIndex, pname);\n  }\n\n  uniformBlockBinding(blockIndex, blockBinding) {\n    this.gl2.uniformBlockBinding(this.handle, blockIndex, blockBinding);\n  }\n\n}\n//# sourceMappingURL=program.js.map","const EXT_FLOAT_WEBGL2 = 'EXT_color_buffer_float';\nexport default {\n  [33189]: {\n    bpp: 2\n  },\n  [33190]: {\n    gl2: true,\n    bpp: 3\n  },\n  [36012]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36168]: {\n    bpp: 1\n  },\n  [34041]: {\n    bpp: 4\n  },\n  [35056]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36013]: {\n    gl2: true,\n    bpp: 5\n  },\n  [32854]: {\n    bpp: 2\n  },\n  [36194]: {\n    bpp: 2\n  },\n  [32855]: {\n    bpp: 2\n  },\n  [33321]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33330]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33329]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33332]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33331]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33334]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33333]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33323]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33336]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33335]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33338]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33337]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33340]: {\n    gl2: true,\n    bpp: 8\n  },\n  [33339]: {\n    gl2: true,\n    bpp: 8\n  },\n  [32849]: {\n    gl2: true,\n    bpp: 3\n  },\n  [32856]: {\n    gl2: true,\n    bpp: 4\n  },\n  [32857]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36220]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36238]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36975]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36214]: {\n    gl2: true,\n    bpp: 8\n  },\n  [36232]: {\n    gl2: true,\n    bpp: 8\n  },\n  [36226]: {\n    gl2: true,\n    bpp: 16\n  },\n  [36208]: {\n    gl2: true,\n    bpp: 16\n  },\n  [33325]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 2\n  },\n  [33327]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  },\n  [34842]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 8\n  },\n  [33326]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  },\n  [33328]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 8\n  },\n  [34836]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 16\n  },\n  [35898]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  }\n};\n//# sourceMappingURL=renderbuffer-formats.js.map","import Resource from './resource';\nimport RENDERBUFFER_FORMATS from './renderbuffer-formats';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils';\n\nfunction isFormatSupported(gl, format, formats) {\n  const info = formats[format];\n\n  if (!info) {\n    return false;\n  }\n\n  const value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n\n  if (typeof value === 'string') {\n    return gl.getExtension(value);\n  }\n\n  return value;\n}\n\nexport default class Renderbuffer extends Resource {\n  static isSupported(gl, {\n    format\n  } = {\n    format: null\n  }) {\n    return !format || isFormatSupported(gl, format, RENDERBUFFER_FORMATS);\n  }\n\n  static getSamplesForFormat(gl, {\n    format\n  }) {\n    return gl.getInternalformatParameter(36161, format, 32937);\n  }\n\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  initialize({\n    format,\n    width = 1,\n    height = 1,\n    samples = 0\n  }) {\n    assert(format, 'Needs format');\n\n    this._trackDeallocatedMemory();\n\n    this.gl.bindRenderbuffer(36161, this.handle);\n\n    if (samples !== 0 && isWebGL2(this.gl)) {\n      this.gl.renderbufferStorageMultisample(36161, samples, format, width, height);\n    } else {\n      this.gl.renderbufferStorage(36161, format, width, height);\n    }\n\n    this.format = format;\n    this.width = width;\n    this.height = height;\n    this.samples = samples;\n\n    this._trackAllocatedMemory(this.width * this.height * (this.samples || 1) * RENDERBUFFER_FORMATS[this.format].bpp);\n\n    return this;\n  }\n\n  resize({\n    width,\n    height\n  }) {\n    if (width !== this.width || height !== this.height) {\n      return this.initialize({\n        width,\n        height,\n        format: this.format,\n        samples: this.samples\n      });\n    }\n\n    return this;\n  }\n\n  _createHandle() {\n    return this.gl.createRenderbuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteRenderbuffer(this.handle);\n\n    this._trackDeallocatedMemory();\n  }\n\n  _bindHandle(handle) {\n    this.gl.bindRenderbuffer(36161, handle);\n  }\n\n  _syncHandle(handle) {\n    this.format = this.getParameter(36164);\n    this.width = this.getParameter(36162);\n    this.height = this.getParameter(36163);\n    this.samples = this.getParameter(36011);\n  }\n\n  _getParameter(pname) {\n    this.gl.bindRenderbuffer(36161, this.handle);\n    const value = this.gl.getRenderbufferParameter(36161, pname);\n    return value;\n  }\n\n}\n//# sourceMappingURL=renderbuffer.js.map","import { isWebGL2, assertWebGLContext } from '@luma.gl/gltools';\nimport { lumaStats } from '../init';\nimport { getKey, getKeyValue } from '../webgl-utils';\nimport { uid, assert, stubRemovedMethods } from '../utils';\nconst ERR_RESOURCE_METHOD_UNDEFINED = 'Resource subclass must define virtual methods';\nexport default class Resource {\n  constructor(gl, opts = {}) {\n    assertWebGLContext(gl);\n    const {\n      id,\n      userData = {}\n    } = opts;\n    this.gl = gl;\n    this.gl2 = gl;\n    this.id = id || uid(this.constructor.name);\n    this.userData = userData;\n    this._bound = false;\n    this._handle = opts.handle;\n\n    if (this._handle === undefined) {\n      this._handle = this._createHandle();\n    }\n\n    this.byteLength = 0;\n\n    this._addStats();\n  }\n\n  toString() {\n    return \"\".concat(this.constructor.name, \"(\").concat(this.id, \")\");\n  }\n\n  get handle() {\n    return this._handle;\n  }\n\n  delete({\n    deleteChildren = false\n  } = {}) {\n    const children = this._handle && this._deleteHandle(this._handle);\n\n    if (this._handle) {\n      this._removeStats();\n    }\n\n    this._handle = null;\n\n    if (children && deleteChildren) {\n      children.filter(Boolean).forEach(child => child.delete());\n    }\n\n    return this;\n  }\n\n  bind(funcOrHandle = this.handle) {\n    if (typeof funcOrHandle !== 'function') {\n      this._bindHandle(funcOrHandle);\n\n      return this;\n    }\n\n    let value;\n\n    if (!this._bound) {\n      this._bindHandle(this.handle);\n\n      this._bound = true;\n      value = funcOrHandle();\n      this._bound = false;\n\n      this._bindHandle(null);\n    } else {\n      value = funcOrHandle();\n    }\n\n    return value;\n  }\n\n  unbind() {\n    this.bind(null);\n  }\n\n  getParameter(pname, opts = {}) {\n    pname = getKeyValue(this.gl, pname);\n    assert(pname);\n    const parameters = this.constructor.PARAMETERS || {};\n    const parameter = parameters[pname];\n\n    if (parameter) {\n      const isWebgl2 = isWebGL2(this.gl);\n      const parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (!parameterAvailable) {\n        const webgl1Default = parameter.webgl1;\n        const webgl2Default = 'webgl2' in parameter ? parameter.webgl2 : parameter.webgl1;\n        const defaultValue = isWebgl2 ? webgl2Default : webgl1Default;\n        return defaultValue;\n      }\n    }\n\n    return this._getParameter(pname, opts);\n  }\n\n  getParameters(options = {}) {\n    const {\n      parameters,\n      keys\n    } = options;\n    const PARAMETERS = this.constructor.PARAMETERS || {};\n    const isWebgl2 = isWebGL2(this.gl);\n    const values = {};\n    const parameterKeys = parameters || Object.keys(PARAMETERS);\n\n    for (const pname of parameterKeys) {\n      const parameter = PARAMETERS[pname];\n      const parameterAvailable = parameter && (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (parameterAvailable) {\n        const key = keys ? getKey(this.gl, pname) : pname;\n        values[key] = this.getParameter(pname, options);\n\n        if (keys && parameter.type === 'GLenum') {\n          values[key] = getKey(this.gl, values[key]);\n        }\n      }\n    }\n\n    return values;\n  }\n\n  setParameter(pname, value) {\n    pname = getKeyValue(this.gl, pname);\n    assert(pname);\n    const parameters = this.constructor.PARAMETERS || {};\n    const parameter = parameters[pname];\n\n    if (parameter) {\n      const isWebgl2 = isWebGL2(this.gl);\n      const parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (!parameterAvailable) {\n        throw new Error('Parameter not available on this platform');\n      }\n\n      if (parameter.type === 'GLenum') {\n        value = getKeyValue(value);\n      }\n    }\n\n    this._setParameter(pname, value);\n\n    return this;\n  }\n\n  setParameters(parameters) {\n    for (const pname in parameters) {\n      this.setParameter(pname, parameters[pname]);\n    }\n\n    return this;\n  }\n\n  stubRemovedMethods(className, version, methodNames) {\n    return stubRemovedMethods(this, className, version, methodNames);\n  }\n\n  initialize(opts) {}\n\n  _createHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _deleteHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _bindHandle(handle) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _getOptsFromHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _getParameter(pname, opts) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _setParameter(pname, value) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _context() {\n    this.gl.luma = this.gl.luma || {};\n    return this.gl.luma;\n  }\n\n  _addStats() {\n    const name = this.constructor.name;\n    const stats = lumaStats.get('Resource Counts');\n    stats.get('Resources Created').incrementCount();\n    stats.get(\"\".concat(name, \"s Created\")).incrementCount();\n    stats.get(\"\".concat(name, \"s Active\")).incrementCount();\n  }\n\n  _removeStats() {\n    const name = this.constructor.name;\n    const stats = lumaStats.get('Resource Counts');\n    stats.get(\"\".concat(name, \"s Active\")).decrementCount();\n  }\n\n  _trackAllocatedMemory(bytes, name = this.constructor.name) {\n    const stats = lumaStats.get('Memory Usage');\n    stats.get('GPU Memory').addCount(bytes);\n    stats.get(\"\".concat(name, \" Memory\")).addCount(bytes);\n    this.byteLength = bytes;\n  }\n\n  _trackDeallocatedMemory(name = this.constructor.name) {\n    const stats = lumaStats.get('Memory Usage');\n    stats.get('GPU Memory').subtractCount(this.byteLength);\n    stats.get(\"\".concat(name, \" Memory\")).subtractCount(this.byteLength);\n    this.byteLength = 0;\n  }\n\n}\n//# sourceMappingURL=resource.js.map","import { assertWebGLContext } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { loadImage } from '../utils/load-file';\nexport default class Texture2D extends Texture {\n  static isSupported(gl, opts) {\n    return Texture.isSupported(gl, opts);\n  }\n\n  constructor(gl, props = {}) {\n    assertWebGLContext(gl);\n\n    if (props instanceof Promise || typeof props === 'string') {\n      props = {\n        data: props\n      };\n    }\n\n    if (typeof props.data === 'string') {\n      props = Object.assign({}, props, {\n        data: loadImage(props.data)\n      });\n    }\n\n    super(gl, Object.assign({}, props, {\n      target: 3553\n    }));\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n}\n//# sourceMappingURL=texture-2d.js.map","import { assert } from '../utils';\nlet pathPrefix = '';\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function loadFile(url, options = {}) {\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  const dataType = options.dataType || 'text';\n  return fetch(url, options).then(res => res[dataType]());\n}\nexport function loadImage(url, opts) {\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  return new Promise((resolve, reject) => {\n    try {\n      const image = new Image();\n\n      image.onload = () => resolve(image);\n\n      image.onerror = () => reject(new Error(\"Could not load image \".concat(url, \".\")));\n\n      image.crossOrigin = opts && opts.crossOrigin || 'anonymous';\n      image.src = url;\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n//# sourceMappingURL=load-file.js.map","import { isWebGL2 } from '@luma.gl/gltools';\nexport const TEXTURE_FORMATS = {\n  [6407]: {\n    dataFormat: 6407,\n    types: [5121, 33635]\n  },\n  [6408]: {\n    dataFormat: 6408,\n    types: [5121, 32819, 32820]\n  },\n  [6406]: {\n    dataFormat: 6406,\n    types: [5121]\n  },\n  [6409]: {\n    dataFormat: 6409,\n    types: [5121]\n  },\n  [6410]: {\n    dataFormat: 6410,\n    types: [5121]\n  },\n  [33326]: {\n    dataFormat: 6403,\n    types: [5126],\n    gl2: true\n  },\n  [33328]: {\n    dataFormat: 33319,\n    types: [5126],\n    gl2: true\n  },\n  [34837]: {\n    dataFormat: 6407,\n    types: [5126],\n    gl2: true\n  },\n  [34836]: {\n    dataFormat: 6408,\n    types: [5126],\n    gl2: true\n  }\n};\nexport const DATA_FORMAT_CHANNELS = {\n  [6403]: 1,\n  [36244]: 1,\n  [33319]: 2,\n  [33320]: 2,\n  [6407]: 3,\n  [36248]: 3,\n  [6408]: 4,\n  [36249]: 4,\n  [6402]: 1,\n  [34041]: 1,\n  [6406]: 1,\n  [6409]: 1,\n  [6410]: 2\n};\nexport const TYPE_SIZES = {\n  [5126]: 4,\n  [5125]: 4,\n  [5124]: 4,\n  [5123]: 2,\n  [5122]: 2,\n  [5131]: 2,\n  [5120]: 1,\n  [5121]: 1\n};\nexport function isFormatSupported(gl, format) {\n  const info = TEXTURE_FORMATS[format];\n\n  if (!info) {\n    return false;\n  }\n\n  if (info.gl1 === undefined && info.gl2 === undefined) {\n    return true;\n  }\n\n  const value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n  return typeof value === 'string' ? gl.getExtension(value) : value;\n}\nexport function isLinearFilteringSupported(gl, format) {\n  const info = TEXTURE_FORMATS[format];\n\n  switch (info && info.types[0]) {\n    case 5126:\n      return gl.getExtension('OES_texture_float_linear');\n\n    case 5131:\n      return gl.getExtension('OES_texture_half_float_linear');\n\n    default:\n      return true;\n  }\n}\n//# sourceMappingURL=texture-formats.js.map","import { isWebGL2, assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { global } from 'probe.gl/env';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { TEXTURE_FORMATS, DATA_FORMAT_CHANNELS, TYPE_SIZES, isFormatSupported, isLinearFilteringSupported } from './texture-formats';\nimport { uid, isPowerOfTwo, assert } from '../utils';\nconst NPOT_MIN_FILTERS = [9729, 9728];\n\nconst WebGLBuffer = global.WebGLBuffer || function WebGLBuffer() {};\n\nexport default class Texture extends Resource {\n  static isSupported(gl, opts = {}) {\n    const {\n      format,\n      linearFiltering\n    } = opts;\n    let supported = true;\n\n    if (format) {\n      supported = supported && isFormatSupported(gl, format);\n      supported = supported && (!linearFiltering || isLinearFilteringSupported(gl, format));\n    }\n\n    return supported;\n  }\n\n  constructor(gl, props) {\n    const {\n      id = uid('texture'),\n      handle,\n      target\n    } = props;\n    super(gl, {\n      id,\n      handle\n    });\n    this.target = target;\n    this.textureUnit = undefined;\n    this.loaded = false;\n    this.width = undefined;\n    this.height = undefined;\n    this.depth = undefined;\n    this.format = undefined;\n    this.type = undefined;\n    this.dataFormat = undefined;\n    this.border = undefined;\n    this.textureUnit = undefined;\n    this.mipmaps = undefined;\n  }\n\n  toString() {\n    return \"Texture(\".concat(this.id, \",\").concat(this.width, \"x\").concat(this.height, \")\");\n  }\n\n  initialize(props = {}) {\n    let data = props.data;\n\n    if (data instanceof Promise) {\n      data.then(resolvedImageData => this.initialize(Object.assign({}, props, {\n        pixels: resolvedImageData,\n        data: resolvedImageData\n      })));\n      return this;\n    }\n\n    const isVideo = typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement;\n\n    if (isVideo && data.readyState < HTMLVideoElement.HAVE_METADATA) {\n      this._video = null;\n      data.addEventListener('loadeddata', () => this.initialize(props));\n      return this;\n    }\n\n    const {\n      pixels = null,\n      format = 6408,\n      border = 0,\n      recreate = false,\n      parameters = {},\n      pixelStore = {},\n      textureUnit = undefined\n    } = props;\n\n    if (!data) {\n      data = pixels;\n    }\n\n    let {\n      width,\n      height,\n      dataFormat,\n      type,\n      compressed = false,\n      mipmaps = true\n    } = props;\n    const {\n      depth = 0\n    } = props;\n    ({\n      width,\n      height,\n      compressed,\n      dataFormat,\n      type\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    this.width = width;\n    this.height = height;\n    this.depth = depth;\n    this.format = format;\n    this.type = type;\n    this.dataFormat = dataFormat;\n    this.border = border;\n    this.textureUnit = textureUnit;\n\n    if (Number.isFinite(this.textureUnit)) {\n      this.gl.activeTexture(33984 + this.textureUnit);\n      this.gl.bindTexture(this.target, this.handle);\n    }\n\n    if (mipmaps && this._isNPOT()) {\n      log.warn(\"texture: \".concat(this, \" is Non-Power-Of-Two, disabling mipmaping\"))();\n      mipmaps = false;\n\n      this._updateForNPOT(parameters);\n    }\n\n    this.mipmaps = mipmaps;\n    this.setImageData({\n      data,\n      width,\n      height,\n      depth,\n      format,\n      type,\n      dataFormat,\n      border,\n      mipmaps,\n      parameters: pixelStore,\n      compressed\n    });\n\n    if (mipmaps) {\n      this.generateMipmap();\n    }\n\n    this.setParameters(parameters);\n\n    if (recreate) {\n      this.data = data;\n    }\n\n    if (isVideo) {\n      this._video = {\n        video: data,\n        parameters,\n        lastTime: data.readyState >= HTMLVideoElement.HAVE_CURRENT_DATA ? data.currentTime : -1\n      };\n    }\n\n    return this;\n  }\n\n  update() {\n    if (this._video) {\n      const {\n        video,\n        parameters,\n        lastTime\n      } = this._video;\n\n      if (lastTime === video.currentTime || video.readyState < HTMLVideoElement.HAVE_CURRENT_DATA) {\n        return;\n      }\n\n      this.setSubImageData({\n        data: video,\n        parameters\n      });\n\n      if (this.mipmaps) {\n        this.generateMipmap();\n      }\n\n      this._video.lastTime = video.currentTime;\n    }\n  }\n\n  resize({\n    height,\n    width,\n    mipmaps = false\n  }) {\n    if (width !== this.width || height !== this.height) {\n      return this.initialize({\n        width,\n        height,\n        format: this.format,\n        type: this.type,\n        dataFormat: this.dataFormat,\n        border: this.border,\n        mipmaps\n      });\n    }\n\n    return this;\n  }\n\n  generateMipmap(params = {}) {\n    if (this._isNPOT()) {\n      log.warn(\"texture: \".concat(this, \" is Non-Power-Of-Two, disabling mipmaping\"))();\n      return this;\n    }\n\n    this.mipmaps = true;\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, params, () => {\n      this.gl.generateMipmap(this.target);\n    });\n    this.gl.bindTexture(this.target, null);\n    return this;\n  }\n\n  setImageData(options) {\n    this._trackDeallocatedMemory('Texture');\n\n    const {\n      target = this.target,\n      pixels = null,\n      level = 0,\n      format = this.format,\n      border = this.border,\n      offset = 0,\n      parameters = {}\n    } = options;\n    let {\n      data = null,\n      type = this.type,\n      width = this.width,\n      height = this.height,\n      dataFormat = this.dataFormat,\n      compressed = false\n    } = options;\n\n    if (!data) {\n      data = pixels;\n    }\n\n    ({\n      type,\n      dataFormat,\n      compressed,\n      width,\n      height\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    const {\n      gl\n    } = this;\n    gl.bindTexture(this.target, this.handle);\n    let dataType = null;\n    ({\n      data,\n      dataType\n    } = this._getDataType({\n      data,\n      compressed\n    }));\n    let gl2;\n    withParameters(this.gl, parameters, () => {\n      switch (dataType) {\n        case 'null':\n          gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n          break;\n\n        case 'typed-array':\n          gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data, offset);\n          break;\n\n        case 'buffer':\n          gl2 = assertWebGL2Context(gl);\n          gl2.bindBuffer(35052, data.handle || data);\n          gl2.texImage2D(target, level, format, width, height, border, dataFormat, type, offset);\n          gl2.bindBuffer(35052, null);\n          break;\n\n        case 'browser-object':\n          if (isWebGL2(gl)) {\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n          } else {\n            gl.texImage2D(target, level, format, dataFormat, type, data);\n          }\n\n          break;\n\n        case 'compressed':\n          for (const [levelIndex, levelData] of data.entries()) {\n            gl.compressedTexImage2D(target, levelIndex, levelData.format, levelData.width, levelData.height, border, levelData.data);\n          }\n\n          break;\n\n        default:\n          assert(false, 'Unknown image data type');\n      }\n    });\n\n    if (data && data.byteLength) {\n      this._trackAllocatedMemory(data.byteLength, 'Texture');\n    } else {\n      const channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n      const channelSize = TYPE_SIZES[this.type] || 1;\n\n      this._trackAllocatedMemory(this.width * this.height * channels * channelSize, 'Texture');\n    }\n\n    this.loaded = true;\n    return this;\n  }\n\n  setSubImageData({\n    target = this.target,\n    pixels = null,\n    data = null,\n    x = 0,\n    y = 0,\n    width = this.width,\n    height = this.height,\n    level = 0,\n    format = this.format,\n    type = this.type,\n    dataFormat = this.dataFormat,\n    compressed = false,\n    offset = 0,\n    border = this.border,\n    parameters = {}\n  }) {\n    ({\n      type,\n      dataFormat,\n      compressed,\n      width,\n      height\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    assert(this.depth === 0, 'texSubImage not supported for 3D textures');\n\n    if (!data) {\n      data = pixels;\n    }\n\n    if (data && data.data) {\n      const ndarray = data;\n      data = ndarray.data;\n      width = ndarray.shape[0];\n      height = ndarray.shape[1];\n    }\n\n    if (data instanceof Buffer) {\n      data = data.handle;\n    }\n\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, parameters, () => {\n      if (compressed) {\n        this.gl.compressedTexSubImage2D(target, level, x, y, width, height, format, data);\n      } else if (data === null) {\n        this.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, null);\n      } else if (ArrayBuffer.isView(data)) {\n        this.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data, offset);\n      } else if (data instanceof WebGLBuffer) {\n        const gl2 = assertWebGL2Context(this.gl);\n        gl2.bindBuffer(35052, data);\n        gl2.texSubImage2D(target, level, x, y, width, height, dataFormat, type, offset);\n        gl2.bindBuffer(35052, null);\n      } else if (isWebGL2(this.gl)) {\n        const gl2 = assertWebGL2Context(this.gl);\n        gl2.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data);\n      } else {\n        this.gl.texSubImage2D(target, level, x, y, dataFormat, type, data);\n      }\n    });\n    this.gl.bindTexture(this.target, null);\n  }\n\n  copyFramebuffer(opts = {}) {\n    log.error('Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n    return null;\n  }\n\n  getActiveUnit() {\n    return this.gl.getParameter(34016) - 33984;\n  }\n\n  bind(textureUnit = this.textureUnit) {\n    const {\n      gl\n    } = this;\n\n    if (textureUnit !== undefined) {\n      this.textureUnit = textureUnit;\n      gl.activeTexture(33984 + textureUnit);\n    }\n\n    gl.bindTexture(this.target, this.handle);\n    return textureUnit;\n  }\n\n  unbind(textureUnit = this.textureUnit) {\n    const {\n      gl\n    } = this;\n\n    if (textureUnit !== undefined) {\n      this.textureUnit = textureUnit;\n      gl.activeTexture(33984 + textureUnit);\n    }\n\n    gl.bindTexture(this.target, null);\n    return textureUnit;\n  }\n\n  _getDataType({\n    data,\n    compressed = false\n  }) {\n    if (compressed) {\n      return {\n        data,\n        dataType: 'compressed'\n      };\n    }\n\n    if (data === null) {\n      return {\n        data,\n        dataType: 'null'\n      };\n    }\n\n    if (ArrayBuffer.isView(data)) {\n      return {\n        data,\n        dataType: 'typed-array'\n      };\n    }\n\n    if (data instanceof Buffer) {\n      return {\n        data: data.handle,\n        dataType: 'buffer'\n      };\n    }\n\n    if (data instanceof WebGLBuffer) {\n      return {\n        data,\n        dataType: 'buffer'\n      };\n    }\n\n    return {\n      data,\n      dataType: 'browser-object'\n    };\n  }\n\n  _deduceParameters(opts) {\n    const {\n      format,\n      data\n    } = opts;\n    let {\n      width,\n      height,\n      dataFormat,\n      type,\n      compressed\n    } = opts;\n    const textureFormat = TEXTURE_FORMATS[format];\n    dataFormat = dataFormat || textureFormat && textureFormat.dataFormat;\n    type = type || textureFormat && textureFormat.types[0];\n    compressed = compressed || textureFormat && textureFormat.compressed;\n    ({\n      width,\n      height\n    } = this._deduceImageSize(data, width, height));\n    return {\n      dataFormat,\n      type,\n      compressed,\n      width,\n      height,\n      format,\n      data\n    };\n  }\n\n  _deduceImageSize(data, width, height) {\n    let size;\n\n    if (typeof ImageData !== 'undefined' && data instanceof ImageData) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof HTMLImageElement !== 'undefined' && data instanceof HTMLImageElement) {\n      size = {\n        width: data.naturalWidth,\n        height: data.naturalHeight\n      };\n    } else if (typeof HTMLCanvasElement !== 'undefined' && data instanceof HTMLCanvasElement) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof ImageBitmap !== 'undefined' && data instanceof ImageBitmap) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement) {\n      size = {\n        width: data.videoWidth,\n        height: data.videoHeight\n      };\n    } else if (!data) {\n      size = {\n        width: width >= 0 ? width : 1,\n        height: height >= 0 ? height : 1\n      };\n    } else {\n      size = {\n        width,\n        height\n      };\n    }\n\n    assert(size, 'Could not deduced texture size');\n    assert(width === undefined || size.width === width, 'Deduced texture width does not match supplied width');\n    assert(height === undefined || size.height === height, 'Deduced texture height does not match supplied height');\n    return size;\n  }\n\n  _createHandle() {\n    return this.gl.createTexture();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteTexture(this.handle);\n\n    this._trackDeallocatedMemory('Texture');\n  }\n\n  _getParameter(pname) {\n    switch (pname) {\n      case 4096:\n        return this.width;\n\n      case 4097:\n        return this.height;\n\n      default:\n        this.gl.bindTexture(this.target, this.handle);\n        const value = this.gl.getTexParameter(this.target, pname);\n        this.gl.bindTexture(this.target, null);\n        return value;\n    }\n  }\n\n  _setParameter(pname, param) {\n    this.gl.bindTexture(this.target, this.handle);\n    param = this._getNPOTParam(pname, param);\n\n    switch (pname) {\n      case 33082:\n      case 33083:\n        this.gl.texParameterf(this.handle, pname, param);\n        break;\n\n      case 4096:\n      case 4097:\n        assert(false);\n        break;\n\n      default:\n        this.gl.texParameteri(this.target, pname, param);\n        break;\n    }\n\n    this.gl.bindTexture(this.target, null);\n    return this;\n  }\n\n  _isNPOT() {\n    if (isWebGL2(this.gl)) {\n      return false;\n    }\n\n    if (!this.width || !this.height) {\n      return false;\n    }\n\n    return !isPowerOfTwo(this.width) || !isPowerOfTwo(this.height);\n  }\n\n  _updateForNPOT(parameters) {\n    if (parameters[this.gl.TEXTURE_MIN_FILTER] === undefined) {\n      parameters[this.gl.TEXTURE_MIN_FILTER] = this.gl.LINEAR;\n    }\n\n    if (parameters[this.gl.TEXTURE_WRAP_S] === undefined) {\n      parameters[this.gl.TEXTURE_WRAP_S] = this.gl.CLAMP_TO_EDGE;\n    }\n\n    if (parameters[this.gl.TEXTURE_WRAP_T] === undefined) {\n      parameters[this.gl.TEXTURE_WRAP_T] = this.gl.CLAMP_TO_EDGE;\n    }\n  }\n\n  _getNPOTParam(pname, param) {\n    if (this._isNPOT()) {\n      switch (pname) {\n        case 10241:\n          if (NPOT_MIN_FILTERS.indexOf(param) === -1) {\n            param = 9729;\n          }\n\n          break;\n\n        case 10242:\n        case 10243:\n          if (param !== 33071) {\n            param = 33071;\n          }\n\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    return param;\n  }\n\n}\n//# sourceMappingURL=texture.js.map","import { isWebGL2, assertWebGL2Context, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { isObjectEmpty } from '../utils';\nexport default class TransformFeedback extends Resource {\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl, props = {}) {\n    assertWebGL2Context(gl);\n    super(gl, props);\n    this.initialize(props);\n    this.stubRemovedMethods('TransformFeedback', 'v6.0', ['pause', 'resume']);\n    Object.seal(this);\n  }\n\n  initialize(props = {}) {\n    this.buffers = {};\n    this.unused = {};\n    this.configuration = null;\n    this.bindOnUse = true;\n\n    if (!isObjectEmpty(this.buffers)) {\n      this.bind(() => this._unbindBuffers());\n    }\n\n    this.setProps(props);\n    return this;\n  }\n\n  setProps(props) {\n    if ('program' in props) {\n      this.configuration = props.program && props.program.configuration;\n    }\n\n    if ('configuration' in props) {\n      this.configuration = props.configuration;\n    }\n\n    if ('bindOnUse' in props) {\n      props = props.bindOnUse;\n    }\n\n    if ('buffers' in props) {\n      this.setBuffers(props.buffers);\n    }\n  }\n\n  setBuffers(buffers = {}) {\n    this.bind(() => {\n      for (const bufferName in buffers) {\n        this.setBuffer(bufferName, buffers[bufferName]);\n      }\n    });\n    return this;\n  }\n\n  setBuffer(locationOrName, bufferOrParams) {\n    const location = this._getVaryingIndex(locationOrName);\n\n    const {\n      buffer,\n      byteSize,\n      byteOffset\n    } = this._getBufferParams(bufferOrParams);\n\n    if (location < 0) {\n      this.unused[locationOrName] = buffer;\n      log.warn(() => \"\".concat(this.id, \" unused varying buffer \").concat(locationOrName))();\n      return this;\n    }\n\n    this.buffers[location] = bufferOrParams;\n\n    if (!this.bindOnUse) {\n      this._bindBuffer(location, buffer, byteOffset, byteSize);\n    }\n\n    return this;\n  }\n\n  begin(primitiveMode = 0) {\n    this.gl.bindTransformFeedback(36386, this.handle);\n\n    this._bindBuffers();\n\n    this.gl.beginTransformFeedback(primitiveMode);\n    return this;\n  }\n\n  end() {\n    this.gl.endTransformFeedback();\n\n    this._unbindBuffers();\n\n    this.gl.bindTransformFeedback(36386, null);\n    return this;\n  }\n\n  _getBufferParams(bufferOrParams) {\n    let byteOffset;\n    let byteSize;\n    let buffer;\n\n    if (bufferOrParams instanceof Buffer === false) {\n      buffer = bufferOrParams.buffer;\n      byteSize = bufferOrParams.byteSize;\n      byteOffset = bufferOrParams.byteOffset;\n    } else {\n      buffer = bufferOrParams;\n    }\n\n    if (byteOffset !== undefined || byteSize !== undefined) {\n      byteOffset = byteOffset || 0;\n      byteSize = byteSize || buffer.byteLength - byteOffset;\n    }\n\n    return {\n      buffer,\n      byteOffset,\n      byteSize\n    };\n  }\n\n  _getVaryingInfo(locationOrName) {\n    return this.configuration && this.configuration.getVaryingInfo(locationOrName);\n  }\n\n  _getVaryingIndex(locationOrName) {\n    if (this.configuration) {\n      return this.configuration.getVaryingInfo(locationOrName).location;\n    }\n\n    const location = Number(locationOrName);\n    return Number.isFinite(location) ? location : -1;\n  }\n\n  _bindBuffers() {\n    if (this.bindOnUse) {\n      for (const bufferIndex in this.buffers) {\n        const {\n          buffer,\n          byteSize,\n          byteOffset\n        } = this._getBufferParams(this.buffers[bufferIndex]);\n\n        this._bindBuffer(bufferIndex, buffer, byteOffset, byteSize);\n      }\n    }\n  }\n\n  _unbindBuffers() {\n    if (this.bindOnUse) {\n      for (const bufferIndex in this.buffers) {\n        this._bindBuffer(bufferIndex, null);\n      }\n    }\n  }\n\n  _bindBuffer(index, buffer, byteOffset = 0, byteSize) {\n    const handle = buffer && buffer.handle;\n\n    if (!handle || byteSize === undefined) {\n      this.gl.bindBufferBase(35982, index, handle);\n    } else {\n      this.gl.bindBufferRange(35982, index, handle, byteOffset, byteSize);\n    }\n\n    return this;\n  }\n\n  _createHandle() {\n    return this.gl.createTransformFeedback();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteTransformFeedback(this.handle);\n  }\n\n  _bindHandle(handle) {\n    this.gl.bindTransformFeedback(36386, this.handle);\n  }\n\n}\n//# sourceMappingURL=transform-feedback.js.map","import WEBGL_FEATURES from './webgl-features-table';\nimport { isWebGL2, log } from '@luma.gl/gltools';\nimport { assert } from '../utils';\nconst LOG_UNSUPPORTED_FEATURE = 2;\nexport function hasFeature(gl, feature) {\n  return hasFeatures(gl, feature);\n}\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(feature => {\n    return isFeatureSupported(gl, feature);\n  });\n}\nexport function getFeatures(gl) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  for (const cap in WEBGL_FEATURES) {\n    if (gl.luma.caps[cap] === undefined) {\n      gl.luma.caps[cap] = isFeatureSupported(gl, cap);\n    }\n  }\n\n  return gl.luma.caps;\n}\n\nfunction isFeatureSupported(gl, cap) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  if (gl.luma.caps[cap] === undefined) {\n    gl.luma.caps[cap] = queryFeature(gl, cap);\n  }\n\n  if (!gl.luma.caps[cap]) {\n    log.log(LOG_UNSUPPORTED_FEATURE, \"Feature: \".concat(cap, \" not supported\"))();\n  }\n\n  return gl.luma.caps[cap];\n}\n\nfunction queryFeature(gl, cap) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  let isSupported;\n  const featureDefinition = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n\n  if (typeof featureDefinition === 'function') {\n    isSupported = featureDefinition(gl);\n  } else if (Array.isArray(featureDefinition)) {\n    isSupported = true;\n\n    for (const extension of featureDefinition) {\n      isSupported = isSupported && Boolean(gl.getExtension(extension));\n    }\n  } else if (typeof featureDefinition === 'string') {\n    isSupported = Boolean(gl.getExtension(featureDefinition));\n  } else if (typeof featureDefinition === 'boolean') {\n    isSupported = featureDefinition;\n  } else {\n    assert(false);\n  }\n\n  return isSupported;\n}\n//# sourceMappingURL=features.js.map","import Framebuffer from '../classes/framebuffer';\nimport Texture2D from '../classes/texture-2d';\nexport const FEATURES = {\n  WEBGL2: 'WEBGL2',\n  VERTEX_ARRAY_OBJECT: 'VERTEX_ARRAY_OBJECT',\n  TIMER_QUERY: 'TIMER_QUERY',\n  INSTANCED_RENDERING: 'INSTANCED_RENDERING',\n  MULTIPLE_RENDER_TARGETS: 'MULTIPLE_RENDER_TARGETS',\n  ELEMENT_INDEX_UINT32: 'ELEMENT_INDEX_UINT32',\n  BLEND_EQUATION_MINMAX: 'BLEND_EQUATION_MINMAX',\n  FLOAT_BLEND: 'FLOAT_BLEND',\n  COLOR_ENCODING_SRGB: 'COLOR_ENCODING_SRGB',\n  TEXTURE_DEPTH: 'TEXTURE_DEPTH',\n  TEXTURE_FLOAT: 'TEXTURE_FLOAT',\n  TEXTURE_HALF_FLOAT: 'TEXTURE_HALF_FLOAT',\n  TEXTURE_FILTER_LINEAR_FLOAT: 'TEXTURE_FILTER_LINEAR_FLOAT',\n  TEXTURE_FILTER_LINEAR_HALF_FLOAT: 'TEXTURE_FILTER_LINEAR_HALF_FLOAT',\n  TEXTURE_FILTER_ANISOTROPIC: 'TEXTURE_FILTER_ANISOTROPIC',\n  COLOR_ATTACHMENT_RGBA32F: 'COLOR_ATTACHMENT_RGBA32F',\n  COLOR_ATTACHMENT_FLOAT: 'COLOR_ATTACHMENT_FLOAT',\n  COLOR_ATTACHMENT_HALF_FLOAT: 'COLOR_ATTACHMENT_HALF_FLOAT',\n  GLSL_FRAG_DATA: 'GLSL_FRAG_DATA',\n  GLSL_FRAG_DEPTH: 'GLSL_FRAG_DEPTH',\n  GLSL_DERIVATIVES: 'GLSL_DERIVATIVES',\n  GLSL_TEXTURE_LOD: 'GLSL_TEXTURE_LOD'\n};\n\nfunction checkFloat32ColorAttachment(gl) {\n  const testTexture = new Texture2D(gl, {\n    format: 6408,\n    type: 5126,\n    dataFormat: 6408\n  });\n  const testFb = new Framebuffer(gl, {\n    id: \"test-framebuffer\",\n    check: false,\n    attachments: {\n      [36064]: testTexture\n    }\n  });\n  const status = testFb.getStatus();\n  testTexture.delete();\n  testFb.delete();\n  return status === 36053;\n}\n\nexport default {\n  [FEATURES.WEBGL2]: [false, true],\n  [FEATURES.VERTEX_ARRAY_OBJECT]: ['OES_vertex_array_object', true],\n  [FEATURES.TIMER_QUERY]: ['EXT_disjoint_timer_query', 'EXT_disjoint_timer_query_webgl2'],\n  [FEATURES.INSTANCED_RENDERING]: ['ANGLE_instanced_arrays', true],\n  [FEATURES.MULTIPLE_RENDER_TARGETS]: ['WEBGL_draw_buffers', true],\n  [FEATURES.ELEMENT_INDEX_UINT32]: ['OES_element_index_uint', true],\n  [FEATURES.BLEND_EQUATION_MINMAX]: ['EXT_blend_minmax', true],\n  [FEATURES.FLOAT_BLEND]: ['EXT_float_blend'],\n  [FEATURES.COLOR_ENCODING_SRGB]: ['EXT_sRGB', true],\n  [FEATURES.TEXTURE_DEPTH]: ['WEBGL_depth_texture', true],\n  [FEATURES.TEXTURE_FLOAT]: ['OES_texture_float', true],\n  [FEATURES.TEXTURE_HALF_FLOAT]: ['OES_texture_half_float', true],\n  [FEATURES.TEXTURE_FILTER_LINEAR_FLOAT]: ['OES_texture_float_linear'],\n  [FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT]: ['OES_texture_half_float_linear'],\n  [FEATURES.TEXTURE_FILTER_ANISOTROPIC]: ['EXT_texture_filter_anisotropic'],\n  [FEATURES.COLOR_ATTACHMENT_RGBA32F]: [checkFloat32ColorAttachment, 'EXT_color_buffer_float'],\n  [FEATURES.COLOR_ATTACHMENT_FLOAT]: [false, 'EXT_color_buffer_float'],\n  [FEATURES.COLOR_ATTACHMENT_HALF_FLOAT]: ['EXT_color_buffer_half_float'],\n  [FEATURES.GLSL_FRAG_DATA]: ['WEBGL_draw_buffers', true],\n  [FEATURES.GLSL_FRAG_DEPTH]: ['EXT_frag_depth', true],\n  [FEATURES.GLSL_DERIVATIVES]: ['OES_standard_derivatives', true],\n  [FEATURES.GLSL_TEXTURE_LOD]: ['EXT_shader_texture_lod', true]\n};\n//# sourceMappingURL=webgl-features-table.js.map","import { log } from '@luma.gl/gltools';\nimport { Stats } from 'probe.gl';\nimport { isBrowser, global } from 'probe.gl/env';\nconst VERSION = typeof \"8.5.4\" !== 'undefined' ? \"8.5.4\" : 'untranspiled source';\nconst STARTUP_MESSAGE = 'set luma.log.level=1 (or higher) to trace rendering';\n\nclass StatsManager {\n  constructor() {\n    this.stats = new Map();\n  }\n\n  get(name) {\n    if (!this.stats.has(name)) {\n      this.stats.set(name, new Stats({\n        id: name\n      }));\n    }\n\n    return this.stats.get(name);\n  }\n\n}\n\nconst lumaStats = new StatsManager();\n\nif (global.luma && global.luma.VERSION !== VERSION) {\n  throw new Error(\"luma.gl - multiple VERSIONs detected: \".concat(global.luma.VERSION, \" vs \").concat(VERSION));\n}\n\nif (!global.luma) {\n  if (isBrowser()) {\n    log.log(1, \"luma.gl \".concat(VERSION, \" - \").concat(STARTUP_MESSAGE))();\n  }\n\n  global.luma = global.luma || {\n    VERSION,\n    version: VERSION,\n    log,\n    stats: lumaStats,\n    globals: {\n      modules: {},\n      nodeIO: {}\n    }\n  };\n}\n\nexport { lumaStats };\nexport default global.luma;\n//# sourceMappingURL=init.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { log } from '@luma.gl/gltools';\nexport function checkProps(className, props, propChecks) {\n  const {\n    removedProps = {},\n    deprecatedProps = {},\n    replacedProps = {}\n  } = propChecks;\n\n  for (const propName in removedProps) {\n    if (propName in props) {\n      const replacementProp = removedProps[propName];\n      const replacement = replacementProp ? \"\".concat(className, \".\").concat(removedProps[propName]) : 'N/A';\n      log.removed(\"\".concat(className, \".\").concat(propName), replacement)();\n    }\n  }\n\n  for (const propName in deprecatedProps) {\n    if (propName in props) {\n      const replacementProp = deprecatedProps[propName];\n      log.deprecated(\"\".concat(className, \".\").concat(propName), \"\".concat(className, \".\").concat(replacementProp))();\n    }\n  }\n\n  let newProps = null;\n\n  for (const propName in replacedProps) {\n    if (propName in props) {\n      const replacementProp = replacedProps[propName];\n      log.deprecated(\"\".concat(className, \".\").concat(propName), \"\".concat(className, \".\").concat(replacementProp))();\n      newProps = newProps || Object.assign({}, props);\n      newProps[replacementProp] = props[propName];\n      delete newProps[propName];\n    }\n  }\n\n  return newProps || props;\n}\n//# sourceMappingURL=check-props.js.map","import { log } from '@luma.gl/gltools';\nexport function stubRemovedMethods(instance, className, version, methodNames) {\n  const upgradeMessage = \"See luma.gl \".concat(version, \" Upgrade Guide at https://luma.gl/docs/upgrade-guide\");\n  const prototype = Object.getPrototypeOf(instance);\n  methodNames.forEach(methodName => {\n    if (prototype.methodName) {\n      return;\n    }\n\n    prototype[methodName] = () => {\n      log.removed(\"Calling removed method \".concat(className, \".\").concat(methodName, \": \"), upgradeMessage)();\n      throw new Error(methodName);\n    };\n  });\n}\n//# sourceMappingURL=stub-methods.js.map","import assert from './assert';\nconst uidCounters = {};\nexport function uid(id = 'id') {\n  uidCounters[id] = uidCounters[id] || 1;\n  const count = uidCounters[id]++;\n  return \"\".concat(id, \"-\").concat(count);\n}\nexport function isPowerOfTwo(n) {\n  assert(typeof n === 'number', 'Input must be a number');\n  return n && (n & n - 1) === 0;\n}\nexport function isObjectEmpty(obj) {\n  let isEmpty = true;\n\n  for (const key in obj) {\n    isEmpty = false;\n    break;\n  }\n\n  return isEmpty;\n}\n//# sourceMappingURL=utils.js.map","import { assert } from '../utils';\nconst GL_BYTE = 0x1400;\nconst GL_UNSIGNED_BYTE = 0x1401;\nconst GL_SHORT = 0x1402;\nconst GL_UNSIGNED_SHORT = 0x1403;\nconst GL_POINTS = 0x0;\nconst GL_LINES = 0x1;\nconst GL_LINE_LOOP = 0x2;\nconst GL_LINE_STRIP = 0x3;\nconst GL_TRIANGLES = 0x4;\nconst GL_TRIANGLE_STRIP = 0x5;\nconst GL_TRIANGLE_FAN = 0x6;\nconst GL_FLOAT = 0x1406;\nconst GL_FLOAT_VEC2 = 0x8b50;\nconst GL_FLOAT_VEC3 = 0x8b51;\nconst GL_FLOAT_VEC4 = 0x8b52;\nconst GL_INT = 0x1404;\nconst GL_INT_VEC2 = 0x8b53;\nconst GL_INT_VEC3 = 0x8b54;\nconst GL_INT_VEC4 = 0x8b55;\nconst GL_UNSIGNED_INT = 0x1405;\nconst GL_UNSIGNED_INT_VEC2 = 0x8dc6;\nconst GL_UNSIGNED_INT_VEC3 = 0x8dc7;\nconst GL_UNSIGNED_INT_VEC4 = 0x8dc8;\nconst GL_BOOL = 0x8b56;\nconst GL_BOOL_VEC2 = 0x8b57;\nconst GL_BOOL_VEC3 = 0x8b58;\nconst GL_BOOL_VEC4 = 0x8b59;\nconst GL_FLOAT_MAT2 = 0x8b5a;\nconst GL_FLOAT_MAT3 = 0x8b5b;\nconst GL_FLOAT_MAT4 = 0x8b5c;\nconst GL_FLOAT_MAT2x3 = 0x8b65;\nconst GL_FLOAT_MAT2x4 = 0x8b66;\nconst GL_FLOAT_MAT3x2 = 0x8b67;\nconst GL_FLOAT_MAT3x4 = 0x8b68;\nconst GL_FLOAT_MAT4x2 = 0x8b69;\nconst GL_FLOAT_MAT4x3 = 0x8b6a;\nconst COMPOSITE_GL_TYPES = {\n  [GL_FLOAT]: [GL_FLOAT, 1, 'float'],\n  [GL_FLOAT_VEC2]: [GL_FLOAT, 2, 'vec2'],\n  [GL_FLOAT_VEC3]: [GL_FLOAT, 3, 'vec3'],\n  [GL_FLOAT_VEC4]: [GL_FLOAT, 4, 'vec4'],\n  [GL_INT]: [GL_INT, 1, 'int'],\n  [GL_INT_VEC2]: [GL_INT, 2, 'ivec2'],\n  [GL_INT_VEC3]: [GL_INT, 3, 'ivec3'],\n  [GL_INT_VEC4]: [GL_INT, 4, 'ivec4'],\n  [GL_UNSIGNED_INT]: [GL_UNSIGNED_INT, 1, 'uint'],\n  [GL_UNSIGNED_INT_VEC2]: [GL_UNSIGNED_INT, 2, 'uvec2'],\n  [GL_UNSIGNED_INT_VEC3]: [GL_UNSIGNED_INT, 3, 'uvec3'],\n  [GL_UNSIGNED_INT_VEC4]: [GL_UNSIGNED_INT, 4, 'uvec4'],\n  [GL_BOOL]: [GL_FLOAT, 1, 'bool'],\n  [GL_BOOL_VEC2]: [GL_FLOAT, 2, 'bvec2'],\n  [GL_BOOL_VEC3]: [GL_FLOAT, 3, 'bvec3'],\n  [GL_BOOL_VEC4]: [GL_FLOAT, 4, 'bvec4'],\n  [GL_FLOAT_MAT2]: [GL_FLOAT, 8, 'mat2'],\n  [GL_FLOAT_MAT2x3]: [GL_FLOAT, 8, 'mat2x3'],\n  [GL_FLOAT_MAT2x4]: [GL_FLOAT, 8, 'mat2x4'],\n  [GL_FLOAT_MAT3]: [GL_FLOAT, 12, 'mat3'],\n  [GL_FLOAT_MAT3x2]: [GL_FLOAT, 12, 'mat3x2'],\n  [GL_FLOAT_MAT3x4]: [GL_FLOAT, 12, 'mat3x4'],\n  [GL_FLOAT_MAT4]: [GL_FLOAT, 16, 'mat4'],\n  [GL_FLOAT_MAT4x2]: [GL_FLOAT, 16, 'mat4x2'],\n  [GL_FLOAT_MAT4x3]: [GL_FLOAT, 16, 'mat4x3']\n};\nexport function getPrimitiveDrawMode(drawMode) {\n  switch (drawMode) {\n    case GL_POINTS:\n      return GL_POINTS;\n\n    case GL_LINES:\n      return GL_LINES;\n\n    case GL_LINE_STRIP:\n      return GL_LINES;\n\n    case GL_LINE_LOOP:\n      return GL_LINES;\n\n    case GL_TRIANGLES:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_STRIP:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_FAN:\n      return GL_TRIANGLES;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getPrimitiveCount({\n  drawMode,\n  vertexCount\n}) {\n  switch (drawMode) {\n    case GL_POINTS:\n    case GL_LINE_LOOP:\n      return vertexCount;\n\n    case GL_LINES:\n      return vertexCount / 2;\n\n    case GL_LINE_STRIP:\n      return vertexCount - 1;\n\n    case GL_TRIANGLES:\n      return vertexCount / 3;\n\n    case GL_TRIANGLE_STRIP:\n    case GL_TRIANGLE_FAN:\n      return vertexCount - 2;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getVertexCount({\n  drawMode,\n  vertexCount\n}) {\n  const primitiveCount = getPrimitiveCount({\n    drawMode,\n    vertexCount\n  });\n\n  switch (getPrimitiveDrawMode(drawMode)) {\n    case GL_POINTS:\n      return primitiveCount;\n\n    case GL_LINES:\n      return primitiveCount * 2;\n\n    case GL_TRIANGLES:\n      return primitiveCount * 3;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function decomposeCompositeGLType(compositeGLType) {\n  const typeAndSize = COMPOSITE_GL_TYPES[compositeGLType];\n\n  if (!typeAndSize) {\n    return null;\n  }\n\n  const [type, components] = typeAndSize;\n  return {\n    type,\n    components\n  };\n}\nexport function getCompositeGLType(type, components) {\n  switch (type) {\n    case GL_BYTE:\n    case GL_UNSIGNED_BYTE:\n    case GL_SHORT:\n    case GL_UNSIGNED_SHORT:\n      type = GL_FLOAT;\n      break;\n\n    default:\n  }\n\n  for (const glType in COMPOSITE_GL_TYPES) {\n    const [compType, compComponents, name] = COMPOSITE_GL_TYPES[glType];\n\n    if (compType === type && compComponents === components) {\n      return {\n        glType,\n        name\n      };\n    }\n  }\n\n  return null;\n}\n//# sourceMappingURL=attribute-utils.js.map","import { assert } from '../utils';\nexport function getKeyValue(gl, name) {\n  if (typeof name !== 'string') {\n    return name;\n  }\n\n  const number = Number(name);\n\n  if (!isNaN(number)) {\n    return number;\n  }\n\n  name = name.replace(/^.*\\./, '');\n  const value = gl[name];\n  assert(value !== undefined, \"Accessing undefined constant GL.\".concat(name));\n  return value;\n}\nexport function getKey(gl, value) {\n  value = Number(value);\n\n  for (const key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n}\nexport function getKeyType(gl, value) {\n  assert(value !== undefined, 'undefined key');\n  value = Number(value);\n\n  for (const key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n}\n//# sourceMappingURL=constants-to-keys.js.map","import { log, assertWebGLContext } from '@luma.gl/gltools';\nimport Texture from './texture';\nconst FACES = [34069, 34070, 34071, 34072, 34073, 34074];\nexport default class TextureCube extends Texture {\n  constructor(gl, props = {}) {\n    assertWebGLContext(gl);\n    super(gl, Object.assign({}, props, {\n      target: 34067\n    }));\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  initialize(props = {}) {\n    const {\n      mipmaps = true,\n      parameters = {}\n    } = props;\n    this.opts = props;\n    this.setCubeMapImageData(props).then(() => {\n      this.loaded = true;\n\n      if (mipmaps) {\n        this.generateMipmap(props);\n      }\n\n      this.setParameters(parameters);\n    });\n    return this;\n  }\n\n  subImage({\n    face,\n    data,\n    x = 0,\n    y = 0,\n    mipmapLevel = 0\n  }) {\n    return this._subImage({\n      target: face,\n      data,\n      x,\n      y,\n      mipmapLevel\n    });\n  }\n\n  async setCubeMapImageData({\n    width,\n    height,\n    pixels,\n    data,\n    border = 0,\n    format = 6408,\n    type = 5121\n  }) {\n    const {\n      gl\n    } = this;\n    const imageDataMap = pixels || data;\n    const resolvedFaces = await Promise.all(FACES.map(face => {\n      const facePixels = imageDataMap[face];\n      return Promise.all(Array.isArray(facePixels) ? facePixels : [facePixels]);\n    }));\n    this.bind();\n    FACES.forEach((face, index) => {\n      if (resolvedFaces[index].length > 1 && this.opts.mipmaps !== false) {\n        log.warn(\"\".concat(this.id, \" has mipmap and multiple LODs.\"))();\n      }\n\n      resolvedFaces[index].forEach((image, lodLevel) => {\n        if (width && height) {\n          gl.texImage2D(face, lodLevel, format, width, height, border, format, type, image);\n        } else {\n          gl.texImage2D(face, lodLevel, format, format, type, image);\n        }\n      });\n    });\n    this.unbind();\n  }\n\n  setImageDataForFace(options) {\n    const {\n      face,\n      width,\n      height,\n      pixels,\n      data,\n      border = 0,\n      format = 6408,\n      type = 5121\n    } = options;\n    const {\n      gl\n    } = this;\n    const imageData = pixels || data;\n    this.bind();\n\n    if (imageData instanceof Promise) {\n      imageData.then(resolvedImageData => this.setImageDataForFace(Object.assign({}, options, {\n        face,\n        data: resolvedImageData,\n        pixels: resolvedImageData\n      })));\n    } else if (this.width || this.height) {\n      gl.texImage2D(face, 0, format, width, height, border, format, type, imageData);\n    } else {\n      gl.texImage2D(face, 0, format, format, type, imageData);\n    }\n\n    return this;\n  }\n\n}\nTextureCube.FACES = FACES;\n//# sourceMappingURL=texture-cube.js.map","import { isWebGL2, assertWebGL2Context, withParameters } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { DATA_FORMAT_CHANNELS, TYPE_SIZES } from './texture-formats';\nimport Buffer from './buffer';\nexport default class Texture3D extends Texture {\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl, props = {}) {\n    assertWebGL2Context(gl);\n    props = Object.assign({\n      depth: 1\n    }, props, {\n      target: 32879,\n      unpackFlipY: false\n    });\n    super(gl, props);\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  setImageData({\n    level = 0,\n    dataFormat = 6408,\n    width,\n    height,\n    depth = 1,\n    border = 0,\n    format,\n    type = 5121,\n    offset = 0,\n    data,\n    parameters = {}\n  }) {\n    this._trackDeallocatedMemory('Texture');\n\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, parameters, () => {\n      if (ArrayBuffer.isView(data)) {\n        this.gl.texImage3D(this.target, level, dataFormat, width, height, depth, border, format, type, data);\n      }\n\n      if (data instanceof Buffer) {\n        this.gl.bindBuffer(35052, data.handle);\n        this.gl.texImage3D(this.target, level, dataFormat, width, height, depth, border, format, type, offset);\n      }\n    });\n\n    if (data && data.byteLength) {\n      this._trackAllocatedMemory(data.byteLength, 'Texture');\n    } else {\n      const channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n      const channelSize = TYPE_SIZES[this.type] || 1;\n\n      this._trackAllocatedMemory(this.width * this.height * this.depth * channels * channelSize, 'Texture');\n    }\n\n    this.loaded = true;\n    return this;\n  }\n\n}\n//# sourceMappingURL=texture-3d.js.map","import Texture2D from '../classes/texture-2d';\nimport TextureCube from '../classes/texture-cube';\nimport Texture3D from '../classes/texture-3d';\nimport Framebuffer from '../classes/framebuffer';\nimport { assert } from '../utils';\nexport function cloneTextureFrom(refTexture, overrides) {\n  assert(refTexture instanceof Texture2D || refTexture instanceof TextureCube || refTexture instanceof Texture3D);\n  const TextureType = refTexture.constructor;\n  const {\n    gl,\n    width,\n    height,\n    format,\n    type,\n    dataFormat,\n    border,\n    mipmaps\n  } = refTexture;\n  const textureOptions = Object.assign({\n    width,\n    height,\n    format,\n    type,\n    dataFormat,\n    border,\n    mipmaps\n  }, overrides);\n  return new TextureType(gl, textureOptions);\n}\nexport function toFramebuffer(texture, opts) {\n  const {\n    gl,\n    width,\n    height,\n    id\n  } = texture;\n  const framebuffer = new Framebuffer(gl, Object.assign({}, opts, {\n    id: \"framebuffer-for-\".concat(id),\n    width,\n    height,\n    attachments: {\n      [36064]: texture\n    }\n  }));\n  return framebuffer;\n}\n//# sourceMappingURL=texture-utils.js.map","const ERR_TYPE_DEDUCTION = 'Failed to deduce GL constant from typed array';\nexport function getGLTypeFromTypedArray(arrayOrType) {\n  const type = ArrayBuffer.isView(arrayOrType) ? arrayOrType.constructor : arrayOrType;\n\n  switch (type) {\n    case Float32Array:\n      return 5126;\n\n    case Uint16Array:\n      return 5123;\n\n    case Uint32Array:\n      return 5125;\n\n    case Uint8Array:\n      return 5121;\n\n    case Uint8ClampedArray:\n      return 5121;\n\n    case Int8Array:\n      return 5120;\n\n    case Int16Array:\n      return 5122;\n\n    case Int32Array:\n      return 5124;\n\n    default:\n      throw new Error(ERR_TYPE_DEDUCTION);\n  }\n}\nexport function getTypedArrayFromGLType(glType, {\n  clamped = true\n} = {}) {\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return clamped ? Uint8ClampedArray : Uint8Array;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Failed to deduce typed array type from GL constant');\n  }\n}\nexport function flipRows({\n  data,\n  width,\n  height,\n  bytesPerPixel = 4,\n  temp\n}) {\n  const bytesPerRow = width * bytesPerPixel;\n  temp = temp || new Uint8Array(bytesPerRow);\n\n  for (let y = 0; y < height / 2; ++y) {\n    const topOffset = y * bytesPerRow;\n    const bottomOffset = (height - y - 1) * bytesPerRow;\n    temp.set(data.subarray(topOffset, topOffset + bytesPerRow));\n    data.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow);\n    data.set(temp, bottomOffset);\n  }\n}\nexport function scalePixels({\n  data,\n  width,\n  height\n}) {\n  const newWidth = Math.round(width / 2);\n  const newHeight = Math.round(height / 2);\n  const newData = new Uint8Array(newWidth * newHeight * 4);\n\n  for (let y = 0; y < newHeight; y++) {\n    for (let x = 0; x < newWidth; x++) {\n      for (let c = 0; c < 4; c++) {\n        newData[(y * newWidth + x) * 4 + c] = data[(y * 2 * width + x * 2) * 4 + c];\n      }\n    }\n  }\n\n  return {\n    data: newData,\n    width: newWidth,\n    height: newHeight\n  };\n}\n//# sourceMappingURL=typed-array-utils.js.map","function _extendableBuiltin(cls) {\n  function ExtendableBuiltin() {\n    var instance = Reflect.construct(cls, Array.from(arguments));\n    Object.setPrototypeOf(instance, Object.getPrototypeOf(this));\n    return instance;\n  }\n\n  ExtendableBuiltin.prototype = Object.create(cls.prototype, {\n    constructor: {\n      value: cls,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(ExtendableBuiltin, cls);\n  } else {\n    ExtendableBuiltin.__proto__ = cls;\n  }\n\n  return ExtendableBuiltin;\n}\n\nimport { config, formatValue, equals, isArray } from '../../lib/common';\nimport assert from '../../lib/assert';\nexport default class MathArray extends _extendableBuiltin(Array) {\n  get ELEMENTS() {\n    assert(false);\n    return 0;\n  }\n\n  clone() {\n    return new this.constructor().copy(this);\n  }\n\n  from(arrayOrObject) {\n    return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n  }\n\n  fromArray(array, offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = array[i + offset];\n    }\n\n    return this.check();\n  }\n\n  to(arrayOrObject) {\n    if (arrayOrObject === this) {\n      return this;\n    }\n\n    return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n  }\n\n  toTarget(target) {\n    return target ? this.to(target) : this;\n  }\n\n  toArray(array = [], offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      array[offset + i] = this[i];\n    }\n\n    return array;\n  }\n\n  toFloat32Array() {\n    return new Float32Array(this);\n  }\n\n  toString() {\n    return this.formatString(config);\n  }\n\n  formatString(opts) {\n    let string = '';\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n    }\n\n    return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n  }\n\n  equals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (!equals(this[i], array[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  exactEquals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (this[i] !== array[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  negate() {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = -this[i];\n    }\n\n    return this.check();\n  }\n\n  lerp(a, b, t) {\n    if (t === undefined) {\n      t = b;\n      b = a;\n      a = this;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const ai = a[i];\n      this[i] = ai + t * (b[i] - ai);\n    }\n\n    return this.check();\n  }\n\n  min(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(vector[i], this[i]);\n    }\n\n    return this.check();\n  }\n\n  max(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.max(vector[i], this[i]);\n    }\n\n    return this.check();\n  }\n\n  clamp(minVector, maxVector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n    }\n\n    return this.check();\n  }\n\n  add(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  subtract(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] -= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  scale(scale) {\n    if (Array.isArray(scale)) {\n      return this.multiply(scale);\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scale;\n    }\n\n    return this.check();\n  }\n\n  sub(a) {\n    return this.subtract(a);\n  }\n\n  setScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = a;\n    }\n\n    return this.check();\n  }\n\n  addScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] += a;\n    }\n\n    return this.check();\n  }\n\n  subScalar(a) {\n    return this.addScalar(-a);\n  }\n\n  multiplyScalar(scalar) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scalar;\n    }\n\n    return this.check();\n  }\n\n  divideScalar(a) {\n    return this.scale(1 / a);\n  }\n\n  clampScalar(min, max) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], min), max);\n    }\n\n    return this.check();\n  }\n\n  multiplyByScalar(scalar) {\n    return this.scale(scalar);\n  }\n\n  get elements() {\n    return this;\n  }\n\n  check() {\n    if (config.debug && !this.validate()) {\n      throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n    }\n\n    return this;\n  }\n\n  validate() {\n    let valid = this.length === this.ELEMENTS;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      valid = valid && Number.isFinite(this[i]);\n    }\n\n    return valid;\n  }\n\n}\n//# sourceMappingURL=math-array.js.map","import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\nimport assert from '../../lib/assert';\nexport default class Matrix extends MathArray {\n  get ELEMENTS() {\n    assert(false);\n    return 0;\n  }\n\n  get RANK() {\n    assert(false);\n    return 0;\n  }\n\n  toString() {\n    let string = '[';\n\n    if (config.printRowMajor) {\n      string += 'row-major:';\n\n      for (let row = 0; row < this.RANK; ++row) {\n        for (let col = 0; col < this.RANK; ++col) {\n          string += \" \".concat(this[col * this.RANK + row]);\n        }\n      }\n    } else {\n      string += 'column-major:';\n\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        string += \" \".concat(this[i]);\n      }\n    }\n\n    string += ']';\n    return string;\n  }\n\n  getElementIndex(row, col) {\n    return col * this.RANK + row;\n  }\n\n  getElement(row, col) {\n    return this[col * this.RANK + row];\n  }\n\n  setElement(row, col, value) {\n    this[col * this.RANK + row] = checkNumber(value);\n    return this;\n  }\n\n  getColumn(columnIndex, result = new Array(this.RANK).fill(-0)) {\n    const firstIndex = columnIndex * this.RANK;\n\n    for (let i = 0; i < this.RANK; ++i) {\n      result[i] = this[firstIndex + i];\n    }\n\n    return result;\n  }\n\n  setColumn(columnIndex, columnVector) {\n    const firstIndex = columnIndex * this.RANK;\n\n    for (let i = 0; i < this.RANK; ++i) {\n      this[firstIndex + i] = columnVector[i];\n    }\n\n    return this;\n  }\n\n}\n//# sourceMappingURL=matrix.js.map","import { checkVector, deprecated } from '../lib/validators';\nimport Matrix from './base/matrix';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nconst IDENTITY = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nconst ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nconst INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL0ROW3: 3,\n  COL1ROW0: 4,\n  COL1ROW1: 5,\n  COL1ROW2: 6,\n  COL1ROW3: 7,\n  COL2ROW0: 8,\n  COL2ROW1: 9,\n  COL2ROW2: 10,\n  COL2ROW3: 11,\n  COL3ROW0: 12,\n  COL3ROW1: 13,\n  COL3ROW2: 14,\n  COL3ROW3: 15\n});\nconst constants = {};\nexport default class Matrix4 extends Matrix {\n  static get IDENTITY() {\n    constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix4(IDENTITY));\n    return constants.IDENTITY;\n  }\n\n  static get ZERO() {\n    constants.ZERO = constants.ZERO || Object.freeze(new Matrix4(ZERO));\n    return constants.ZERO;\n  }\n\n  get INDICES() {\n    return INDICES;\n  }\n\n  get ELEMENTS() {\n    return 16;\n  }\n\n  get RANK() {\n    return 4;\n  }\n\n  constructor(array) {\n    super(-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0);\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      this.copy(array);\n    } else {\n      this.identity();\n    }\n  }\n\n  copy(array) {\n    this[0] = array[0];\n    this[1] = array[1];\n    this[2] = array[2];\n    this[3] = array[3];\n    this[4] = array[4];\n    this[5] = array[5];\n    this[6] = array[6];\n    this[7] = array[7];\n    this[8] = array[8];\n    this[9] = array[9];\n    this[10] = array[10];\n    this[11] = array[11];\n    this[12] = array[12];\n    this[13] = array[13];\n    this[14] = array[14];\n    this[15] = array[15];\n    return this.check();\n  }\n\n  set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m30;\n    this[4] = m01;\n    this[5] = m11;\n    this[6] = m21;\n    this[7] = m31;\n    this[8] = m02;\n    this[9] = m12;\n    this[10] = m22;\n    this[11] = m32;\n    this[12] = m03;\n    this[13] = m13;\n    this[14] = m23;\n    this[15] = m33;\n    return this.check();\n  }\n\n  setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m30;\n    this[4] = m01;\n    this[5] = m11;\n    this[6] = m21;\n    this[7] = m31;\n    this[8] = m02;\n    this[9] = m12;\n    this[10] = m22;\n    this[11] = m32;\n    this[12] = m03;\n    this[13] = m13;\n    this[14] = m23;\n    this[15] = m33;\n    return this.check();\n  }\n\n  toRowMajor(result) {\n    result[0] = this[0];\n    result[1] = this[4];\n    result[2] = this[8];\n    result[3] = this[12];\n    result[4] = this[1];\n    result[5] = this[5];\n    result[6] = this[9];\n    result[7] = this[13];\n    result[8] = this[2];\n    result[9] = this[6];\n    result[10] = this[10];\n    result[11] = this[14];\n    result[12] = this[3];\n    result[13] = this[7];\n    result[14] = this[11];\n    result[15] = this[15];\n    return result;\n  }\n\n  identity() {\n    return this.copy(IDENTITY);\n  }\n\n  fromQuaternion(q) {\n    mat4.fromQuat(this, q);\n    return this.check();\n  }\n\n  frustum({\n    left,\n    right,\n    bottom,\n    top,\n    near,\n    far\n  }) {\n    if (far === Infinity) {\n      Matrix4._computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n    } else {\n      mat4.frustum(this, left, right, bottom, top, near, far);\n    }\n\n    return this.check();\n  }\n\n  static _computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n    const column0Row0 = 2.0 * near / (right - left);\n    const column1Row1 = 2.0 * near / (top - bottom);\n    const column2Row0 = (right + left) / (right - left);\n    const column2Row1 = (top + bottom) / (top - bottom);\n    const column2Row2 = -1.0;\n    const column2Row3 = -1.0;\n    const column3Row2 = -2.0 * near;\n    result[0] = column0Row0;\n    result[1] = 0.0;\n    result[2] = 0.0;\n    result[3] = 0.0;\n    result[4] = 0.0;\n    result[5] = column1Row1;\n    result[6] = 0.0;\n    result[7] = 0.0;\n    result[8] = column2Row0;\n    result[9] = column2Row1;\n    result[10] = column2Row2;\n    result[11] = column2Row3;\n    result[12] = 0.0;\n    result[13] = 0.0;\n    result[14] = column3Row2;\n    result[15] = 0.0;\n    return result;\n  }\n\n  lookAt(eye, center, up) {\n    if (arguments.length === 1) {\n      ({\n        eye,\n        center,\n        up\n      } = eye);\n    }\n\n    center = center || [0, 0, 0];\n    up = up || [0, 1, 0];\n    mat4.lookAt(this, eye, center, up);\n    return this.check();\n  }\n\n  ortho({\n    left,\n    right,\n    bottom,\n    top,\n    near = 0.1,\n    far = 500\n  }) {\n    mat4.ortho(this, left, right, bottom, top, near, far);\n    return this.check();\n  }\n\n  orthographic({\n    fovy = 45 * Math.PI / 180,\n    aspect = 1,\n    focalDistance = 1,\n    near = 0.1,\n    far = 500\n  }) {\n    if (fovy > Math.PI * 2) {\n      throw Error('radians');\n    }\n\n    const halfY = fovy / 2;\n    const top = focalDistance * Math.tan(halfY);\n    const right = top * aspect;\n    return new Matrix4().ortho({\n      left: -right,\n      right,\n      bottom: -top,\n      top,\n      near,\n      far\n    });\n  }\n\n  perspective({\n    fovy = undefined,\n    fov = 45 * Math.PI / 180,\n    aspect = 1,\n    near = 0.1,\n    far = 500\n  } = {}) {\n    fovy = fovy || fov;\n\n    if (fovy > Math.PI * 2) {\n      throw Error('radians');\n    }\n\n    mat4.perspective(this, fovy, aspect, near, far);\n    return this.check();\n  }\n\n  determinant() {\n    return mat4.determinant(this);\n  }\n\n  getScale(result = [-0, -0, -0]) {\n    result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n    result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n    result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n    return result;\n  }\n\n  getTranslation(result = [-0, -0, -0]) {\n    result[0] = this[12];\n    result[1] = this[13];\n    result[2] = this[14];\n    return result;\n  }\n\n  getRotation(result = [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0], scaleResult = null) {\n    const scale = this.getScale(scaleResult || [-0, -0, -0]);\n    const inverseScale0 = 1 / scale[0];\n    const inverseScale1 = 1 / scale[1];\n    const inverseScale2 = 1 / scale[2];\n    result[0] = this[0] * inverseScale0;\n    result[1] = this[1] * inverseScale1;\n    result[2] = this[2] * inverseScale2;\n    result[3] = 0;\n    result[4] = this[4] * inverseScale0;\n    result[5] = this[5] * inverseScale1;\n    result[6] = this[6] * inverseScale2;\n    result[7] = 0;\n    result[8] = this[8] * inverseScale0;\n    result[9] = this[9] * inverseScale1;\n    result[10] = this[10] * inverseScale2;\n    result[11] = 0;\n    result[12] = 0;\n    result[13] = 0;\n    result[14] = 0;\n    result[15] = 1;\n    return result;\n  }\n\n  getRotationMatrix3(result = [-0, -0, -0, -0, -0, -0, -0, -0, -0], scaleResult = null) {\n    const scale = this.getScale(scaleResult || [-0, -0, -0]);\n    const inverseScale0 = 1 / scale[0];\n    const inverseScale1 = 1 / scale[1];\n    const inverseScale2 = 1 / scale[2];\n    result[0] = this[0] * inverseScale0;\n    result[1] = this[1] * inverseScale1;\n    result[2] = this[2] * inverseScale2;\n    result[3] = this[4] * inverseScale0;\n    result[4] = this[5] * inverseScale1;\n    result[5] = this[6] * inverseScale2;\n    result[6] = this[8] * inverseScale0;\n    result[7] = this[9] * inverseScale1;\n    result[8] = this[10] * inverseScale2;\n    return result;\n  }\n\n  transpose() {\n    mat4.transpose(this, this);\n    return this.check();\n  }\n\n  invert() {\n    mat4.invert(this, this);\n    return this.check();\n  }\n\n  multiplyLeft(a) {\n    mat4.multiply(this, a, this);\n    return this.check();\n  }\n\n  multiplyRight(a) {\n    mat4.multiply(this, this, a);\n    return this.check();\n  }\n\n  rotateX(radians) {\n    mat4.rotateX(this, this, radians);\n    return this.check();\n  }\n\n  rotateY(radians) {\n    mat4.rotateY(this, this, radians);\n    return this.check();\n  }\n\n  rotateZ(radians) {\n    mat4.rotateZ(this, this, radians);\n    return this.check();\n  }\n\n  rotateXYZ([rx, ry, rz]) {\n    return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n  }\n\n  rotateAxis(radians, axis) {\n    mat4.rotate(this, this, radians, axis);\n    return this.check();\n  }\n\n  scale(factor) {\n    if (Array.isArray(factor)) {\n      mat4.scale(this, this, factor);\n    } else {\n      mat4.scale(this, this, [factor, factor, factor]);\n    }\n\n    return this.check();\n  }\n\n  translate(vec) {\n    mat4.translate(this, this, vec);\n    return this.check();\n  }\n\n  transform(vector, result) {\n    if (vector.length === 4) {\n      result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n      checkVector(result, 4);\n      return result;\n    }\n\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformAsPoint(vector, result) {\n    const {\n      length\n    } = vector;\n\n    switch (length) {\n      case 2:\n        result = vec2.transformMat4(result || [-0, -0], vector, this);\n        break;\n\n      case 3:\n        result = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n        break;\n\n      default:\n        throw new Error('Illegal vector');\n    }\n\n    checkVector(result, vector.length);\n    return result;\n  }\n\n  transformAsVector(vector, result) {\n    switch (vector.length) {\n      case 2:\n        result = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n        break;\n\n      case 3:\n        result = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n        break;\n\n      default:\n        throw new Error('Illegal vector');\n    }\n\n    checkVector(result, vector.length);\n    return result;\n  }\n\n  makeRotationX(radians) {\n    return this.identity().rotateX(radians);\n  }\n\n  makeTranslation(x, y, z) {\n    return this.identity().translate([x, y, z]);\n  }\n\n  transformPoint(vector, result) {\n    deprecated('Matrix4.transformPoint', '3.0');\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformVector(vector, result) {\n    deprecated('Matrix4.transformVector', '3.0');\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformDirection(vector, result) {\n    deprecated('Matrix4.transformDirection', '3.0');\n    return this.transformAsVector(vector, result);\n  }\n\n}\n//# sourceMappingURL=matrix4.js.map","import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\nexport default class Vector extends MathArray {\n  get ELEMENTS() {\n    assert(false);\n    return 0;\n  }\n\n  copy(vector) {\n    assert(false);\n    return this;\n  }\n\n  get x() {\n    return this[0];\n  }\n\n  set x(value) {\n    this[0] = checkNumber(value);\n  }\n\n  get y() {\n    return this[1];\n  }\n\n  set y(value) {\n    this[1] = checkNumber(value);\n  }\n\n  len() {\n    return Math.sqrt(this.lengthSquared());\n  }\n\n  magnitude() {\n    return this.len();\n  }\n\n  lengthSquared() {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      length += this[i] * this[i];\n    }\n\n    return length;\n  }\n\n  magnitudeSquared() {\n    return this.lengthSquared();\n  }\n\n  distance(mathArray) {\n    return Math.sqrt(this.distanceSquared(mathArray));\n  }\n\n  distanceSquared(mathArray) {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const dist = this[i] - mathArray[i];\n      length += dist * dist;\n    }\n\n    return checkNumber(length);\n  }\n\n  dot(mathArray) {\n    let product = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      product += this[i] * mathArray[i];\n    }\n\n    return checkNumber(product);\n  }\n\n  normalize() {\n    const length = this.magnitude();\n\n    if (length !== 0) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= length;\n      }\n    }\n\n    return this.check();\n  }\n\n  multiply(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  divide(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  lengthSq() {\n    return this.lengthSquared();\n  }\n\n  distanceTo(vector) {\n    return this.distance(vector);\n  }\n\n  distanceToSquared(vector) {\n    return this.distanceSquared(vector);\n  }\n\n  getComponent(i) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    return checkNumber(this[i]);\n  }\n\n  setComponent(i, value) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    this[i] = value;\n    return this.check();\n  }\n\n  addVectors(a, b) {\n    return this.copy(a).add(b);\n  }\n\n  subVectors(a, b) {\n    return this.copy(a).subtract(b);\n  }\n\n  multiplyVectors(a, b) {\n    return this.copy(a).multiply(b);\n  }\n\n  addScaledVector(a, b) {\n    return this.add(new this.constructor(a).multiplyScalar(b));\n  }\n\n}\n//# sourceMappingURL=vector.js.map","import Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nconst ORIGIN = [0, 0, 0];\nconst constants = {};\nexport default class Vector3 extends Vector {\n  static get ZERO() {\n    return constants.ZERO = constants.ZERO || Object.freeze(new Vector3(0, 0, 0, 0));\n  }\n\n  constructor(x = 0, y = 0, z = 0) {\n    super(-0, -0, -0);\n\n    if (arguments.length === 1 && isArray(x)) {\n      this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n    }\n  }\n\n  set(x, y, z) {\n    this[0] = x;\n    this[1] = y;\n    this[2] = z;\n    return this.check();\n  }\n\n  copy(array) {\n    this[0] = array[0];\n    this[1] = array[1];\n    this[2] = array[2];\n    return this.check();\n  }\n\n  fromObject(object) {\n    if (config.debug) {\n      checkNumber(object.x);\n      checkNumber(object.y);\n      checkNumber(object.z);\n    }\n\n    this[0] = object.x;\n    this[1] = object.y;\n    this[2] = object.z;\n    return this.check();\n  }\n\n  toObject(object) {\n    object.x = this[0];\n    object.y = this[1];\n    object.z = this[2];\n    return object;\n  }\n\n  get ELEMENTS() {\n    return 3;\n  }\n\n  get z() {\n    return this[2];\n  }\n\n  set z(value) {\n    this[2] = checkNumber(value);\n  }\n\n  angle(vector) {\n    return vec3.angle(this, vector);\n  }\n\n  cross(vector) {\n    vec3.cross(this, this, vector);\n    return this.check();\n  }\n\n  rotateX({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateX(this, this, origin, radians);\n    return this.check();\n  }\n\n  rotateY({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateY(this, this, origin, radians);\n    return this.check();\n  }\n\n  rotateZ({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateZ(this, this, origin, radians);\n    return this.check();\n  }\n\n  transform(matrix4) {\n    return this.transformAsPoint(matrix4);\n  }\n\n  transformAsPoint(matrix4) {\n    vec3.transformMat4(this, this, matrix4);\n    return this.check();\n  }\n\n  transformAsVector(matrix4) {\n    vec3_transformMat4AsVector(this, this, matrix4);\n    return this.check();\n  }\n\n  transformByMatrix3(matrix3) {\n    vec3.transformMat3(this, this, matrix3);\n    return this.check();\n  }\n\n  transformByMatrix2(matrix2) {\n    vec3_transformMat2(this, this, matrix2);\n    return this.check();\n  }\n\n  transformByQuaternion(quaternion) {\n    vec3.transformQuat(this, this, quaternion);\n    return this.check();\n  }\n\n}\n//# sourceMappingURL=vector3.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}\n//# sourceMappingURL=assert.js.map","import assert from './assert';\nconst RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nconst DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nconst config = {};\nconfig.EPSILON = 1e-12;\nconfig.debug = false;\nconfig.precision = 4;\nconfig.printTypes = false;\nconfig.printDegrees = false;\nconfig.printRowMajor = true;\nexport { config };\nexport function configure(options = {}) {\n  for (const key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nexport function formatValue(value, {\n  precision = config.precision || 4\n} = {}) {\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && !(value instanceof DataView);\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nexport function clone(array) {\n  return array.clone ? array.clone() : new Array(...array);\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    result = result || duplicateArray(value);\n\n    for (let i = 0; i < result.length && i < value.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, degrees => degrees * DEGREES_TO_RADIANS, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, radians => radians * RADIANS_TO_DEGREES, result);\n}\nexport function sin(radians) {\n  return map(radians, angle => Math.sin(angle));\n}\nexport function cos(radians) {\n  return map(radians, angle => Math.cos(angle));\n}\nexport function tan(radians) {\n  return map(radians, angle => Math.tan(angle));\n}\nexport function asin(radians) {\n  return map(radians, angle => Math.asin(angle));\n}\nexport function acos(radians) {\n  return map(radians, angle => Math.acos(angle));\n}\nexport function atan(radians) {\n  return map(radians, angle => Math.atan(angle));\n}\nexport function clamp(value, min, max) {\n  return map(value, value => Math.max(min, Math.min(max, value)));\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map((ai, i) => lerp(ai, b[i], t));\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  const oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (let i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (Number.isFinite(a) && Number.isFinite(b)) {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && typeof a === 'object' && b && typeof b === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (let i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(EPSILON, func) {\n  const oldPrecision = config.EPSILON;\n  config.EPSILON = EPSILON;\n  let value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}\n//# sourceMappingURL=common.js.map","export function vec2_transformMat4AsVector(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const z = a[2];\n  const w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}\n//# sourceMappingURL=gl-matrix-extras.js.map","import { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (let i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length, callerName = '') {\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName, \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nconst map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}\n//# sourceMappingURL=validators.js.map","export default function getHiResTimestamp() {\n  let timestamp;\n\n  if (typeof window !== 'undefined' && window.performance) {\n    timestamp = window.performance.now();\n  } else if (typeof process !== 'undefined' && process.hrtime) {\n    const timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import getHiResTimestamp from '../utils/hi-res-timestamp';\nexport default class Stat {\n  constructor(name, type) {\n    this.name = name;\n    this.type = type;\n    this.sampleSize = 1;\n    this.reset();\n  }\n\n  setSampleSize(samples) {\n    this.sampleSize = samples;\n    return this;\n  }\n\n  incrementCount() {\n    this.addCount(1);\n    return this;\n  }\n\n  decrementCount() {\n    this.subtractCount(1);\n    return this;\n  }\n\n  addCount(value) {\n    this._count += value;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  subtractCount(value) {\n    this._count -= value;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  addTime(time) {\n    this._time += time;\n    this.lastTiming = time;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  timeStart() {\n    this._startTime = getHiResTimestamp();\n    this._timerPending = true;\n    return this;\n  }\n\n  timeEnd() {\n    if (!this._timerPending) {\n      return this;\n    }\n\n    this.addTime(getHiResTimestamp() - this._startTime);\n    this._timerPending = false;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  getSampleAverageCount() {\n    return this.sampleSize > 0 ? this.lastSampleCount / this.sampleSize : 0;\n  }\n\n  getSampleAverageTime() {\n    return this.sampleSize > 0 ? this.lastSampleTime / this.sampleSize : 0;\n  }\n\n  getSampleHz() {\n    return this.lastSampleTime > 0 ? this.sampleSize / (this.lastSampleTime / 1000) : 0;\n  }\n\n  getAverageCount() {\n    return this.samples > 0 ? this.count / this.samples : 0;\n  }\n\n  getAverageTime() {\n    return this.samples > 0 ? this.time / this.samples : 0;\n  }\n\n  getHz() {\n    return this.time > 0 ? this.samples / (this.time / 1000) : 0;\n  }\n\n  reset() {\n    this.time = 0;\n    this.count = 0;\n    this.samples = 0;\n    this.lastTiming = 0;\n    this.lastSampleTime = 0;\n    this.lastSampleCount = 0;\n    this._count = 0;\n    this._time = 0;\n    this._samples = 0;\n    this._startTime = 0;\n    this._timerPending = false;\n    return this;\n  }\n\n  _checkSampling() {\n    if (this._samples === this.sampleSize) {\n      this.lastSampleTime = this._time;\n      this.lastSampleCount = this._count;\n      this.count += this._count;\n      this.time += this._time;\n      this.samples += this._samples;\n      this._time = 0;\n      this._count = 0;\n      this._samples = 0;\n    }\n  }\n\n}\n//# sourceMappingURL=stat.js.map","import Stat from './stat';\nexport default class Stats {\n  constructor({\n    id,\n    stats\n  }) {\n    this.id = id;\n    this.stats = {};\n\n    this._initializeStats(stats);\n\n    Object.seal(this);\n  }\n\n  get(name, type = 'count') {\n    return this._getOrCreate({\n      name,\n      type\n    });\n  }\n\n  get size() {\n    return Object.keys(this.stats).length;\n  }\n\n  reset() {\n    for (const key in this.stats) {\n      this.stats[key].reset();\n    }\n\n    return this;\n  }\n\n  forEach(fn) {\n    for (const key in this.stats) {\n      fn(this.stats[key]);\n    }\n  }\n\n  getTable() {\n    const table = {};\n    this.forEach(stat => {\n      table[stat.name] = {\n        time: stat.time || 0,\n        count: stat.count || 0,\n        average: stat.getAverageTime() || 0,\n        hz: stat.getHz() || 0\n      };\n    });\n    return table;\n  }\n\n  _initializeStats(stats = []) {\n    stats.forEach(stat => this._getOrCreate(stat));\n  }\n\n  _getOrCreate(stat) {\n    if (!stat || !stat.name) {\n      return null;\n    }\n\n    const {\n      name,\n      type\n    } = stat;\n\n    if (!this.stats[name]) {\n      if (stat instanceof Stat) {\n        this.stats[name] = stat;\n      } else {\n        this.stats[name] = new Stat(name, type);\n      }\n    }\n\n    return this.stats[name];\n  }\n\n}\n//# sourceMappingURL=stats.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isMobile = isMobile;\nexports.default = getBrowser;\n\nvar _globals = require(\"./globals\");\n\nvar _isBrowser = _interopRequireDefault(require(\"./is-browser\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction isMobile() {\n  return typeof _globals.window.orientation !== 'undefined';\n}\n\nfunction getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !(0, _isBrowser.default)()) {\n    return 'Node';\n  }\n\n  if ((0, _isElectron.default)(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  var navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  var userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (_globals.window.chrome) {\n    return 'Chrome';\n  }\n\n  if (_globals.window.safari) {\n    return 'Safari';\n  }\n\n  if (_globals.window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}\n//# sourceMappingURL=get-browser.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.console = exports.process = exports.document = exports.global = exports.window = exports.self = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: (typeof process === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(process)) === 'object' && process\n};\nvar self_ = globals.self || globals.window || globals.global;\nexports.self = self_;\nvar window_ = globals.window || globals.self || globals.global;\nexports.window = window_;\nvar global_ = globals.global || globals.self || globals.window;\nexports.global = global_;\nvar document_ = globals.document || {};\nexports.document = document_;\nvar process_ = globals.process || {};\nexports.process = process_;\nvar console_ = console;\nexports.console = console_;\n//# sourceMappingURL=globals.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"self\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.self;\n  }\n});\nObject.defineProperty(exports, \"window\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.window;\n  }\n});\nObject.defineProperty(exports, \"global\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.global;\n  }\n});\nObject.defineProperty(exports, \"document\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.document;\n  }\n});\nObject.defineProperty(exports, \"process\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.process;\n  }\n});\nObject.defineProperty(exports, \"console\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.console;\n  }\n});\nObject.defineProperty(exports, \"isBrowser\", {\n  enumerable: true,\n  get: function get() {\n    return _isBrowser.default;\n  }\n});\nObject.defineProperty(exports, \"isBrowserMainThread\", {\n  enumerable: true,\n  get: function get() {\n    return _isBrowser.isBrowserMainThread;\n  }\n});\nObject.defineProperty(exports, \"getBrowser\", {\n  enumerable: true,\n  get: function get() {\n    return _getBrowser.default;\n  }\n});\nObject.defineProperty(exports, \"isMobile\", {\n  enumerable: true,\n  get: function get() {\n    return _getBrowser.isMobile;\n  }\n});\nObject.defineProperty(exports, \"isElectron\", {\n  enumerable: true,\n  get: function get() {\n    return _isElectron.default;\n  }\n});\n\nvar _globals = require(\"./globals\");\n\nvar _isBrowser = _interopRequireWildcard(require(\"./is-browser\"));\n\nvar _getBrowser = _interopRequireWildcard(require(\"./get-browser\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n//# sourceMappingURL=index.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isBrowser;\nexports.isBrowserMainThread = isBrowserMainThread;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction isBrowser() {\n  var isNode = (typeof process === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(process)) === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || (0, _isElectron.default)();\n}\n\nfunction isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}\n//# sourceMappingURL=is-browser.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isElectron;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nfunction isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && (0, _typeof2.default)(window.process) === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && (0, _typeof2.default)(process.versions) === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  var realUserAgent = (typeof navigator === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(navigator)) === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  var userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=is-electron.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: typeof process === 'object' && process\n};\nconst self_ = globals.self || globals.window || globals.global;\nconst window_ = globals.window || globals.self || globals.global;\nconst global_ = globals.global || globals.self || globals.window;\nconst document_ = globals.document || {};\nconst process_ = globals.process || {};\nconst console_ = console;\nexport { self_ as self, window_ as window, global_ as global, document_ as document, process_ as process, console_ as console };\n//# sourceMappingURL=globals.js.map","import isElectron from './is-electron';\nexport default function isBrowser() {\n  const isNode = typeof process === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || isElectron();\n}\nexport function isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}\n//# sourceMappingURL=is-browser.js.map","export default function isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && typeof process.versions === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  const realUserAgent = typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  const userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=is-electron.js.map","import checkIfBrowser from '../env/is-browser';\nexport { self, window, global, document, process, console } from '../env/globals';\nexport const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'untranspiled source';\nexport const isBrowser = checkIfBrowser();\n//# sourceMappingURL=globals.js.map","function getStorage(type) {\n  try {\n    const storage = window[type];\n    const x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return storage;\n  } catch (e) {\n    return null;\n  }\n}\n\nexport default class LocalStorage {\n  constructor(id, defaultSettings, type = 'sessionStorage') {\n    this.storage = getStorage(type);\n    this.id = id;\n    this.config = {};\n    Object.assign(this.config, defaultSettings);\n\n    this._loadConfiguration();\n  }\n\n  getConfiguration() {\n    return this.config;\n  }\n\n  setConfiguration(configuration) {\n    this.config = {};\n    return this.updateConfiguration(configuration);\n  }\n\n  updateConfiguration(configuration) {\n    Object.assign(this.config, configuration);\n\n    if (this.storage) {\n      const serialized = JSON.stringify(this.config);\n      this.storage.setItem(this.id, serialized);\n    }\n\n    return this;\n  }\n\n  _loadConfiguration() {\n    let configuration = {};\n\n    if (this.storage) {\n      const serializedConfiguration = this.storage.getItem(this.id);\n      configuration = serializedConfiguration ? JSON.parse(serializedConfiguration) : {};\n    }\n\n    Object.assign(this.config, configuration);\n    return this;\n  }\n\n}\n//# sourceMappingURL=local-storage.js.map","export function formatTime(ms) {\n  let formatted;\n\n  if (ms < 10) {\n    formatted = \"\".concat(ms.toFixed(2), \"ms\");\n  } else if (ms < 100) {\n    formatted = \"\".concat(ms.toFixed(1), \"ms\");\n  } else if (ms < 1000) {\n    formatted = \"\".concat(ms.toFixed(0), \"ms\");\n  } else {\n    formatted = \"\".concat((ms / 1000).toFixed(2), \"s\");\n  }\n\n  return formatted;\n}\nexport function leftPad(string, length = 8) {\n  const padLength = Math.max(length - string.length, 0);\n  return \"\".concat(' '.repeat(padLength)).concat(string);\n}\nexport function rightPad(string, length = 8) {\n  const padLength = Math.max(length - string.length, 0);\n  return \"\".concat(string).concat(' '.repeat(padLength));\n}\nexport function formatValue(v, opts = {}) {\n  const EPSILON = 1e-16;\n  const {\n    isInteger = false\n  } = opts;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n\nfunction formatArrayValue(v, opts) {\n  const {\n    maxElts = 16,\n    size = 1\n  } = opts;\n  let string = '[';\n\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  const terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatImage(image, message, scale, maxWidth = 600) {\n  const imageUrl = image.src.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n\n  if (image.width > maxWidth) {\n    scale = Math.min(scale, maxWidth / image.width);\n  }\n\n  const width = image.width * scale;\n  const height = image.height * scale;\n  const style = ['font-size:1px;', \"padding:\".concat(Math.floor(height / 2), \"px \").concat(Math.floor(width / 2), \"px;\"), \"line-height:\".concat(height, \"px;\"), \"background:url(\".concat(imageUrl, \");\"), \"background-size:\".concat(width, \"px \").concat(height, \"px;\"), 'color:transparent;'].join('');\n  return [\"\".concat(message, \" %c+\"), style];\n}\n//# sourceMappingURL=formatters.js.map","import { isBrowser } from './globals';\nexport const COLOR = {\n  BLACK: 30,\n  RED: 31,\n  GREEN: 32,\n  YELLOW: 33,\n  BLUE: 34,\n  MAGENTA: 35,\n  CYAN: 36,\n  WHITE: 37,\n  BRIGHT_BLACK: 90,\n  BRIGHT_RED: 91,\n  BRIGHT_GREEN: 92,\n  BRIGHT_YELLOW: 93,\n  BRIGHT_BLUE: 94,\n  BRIGHT_MAGENTA: 95,\n  BRIGHT_CYAN: 96,\n  BRIGHT_WHITE: 97\n};\n\nfunction getColor(color) {\n  return typeof color === 'string' ? COLOR[color.toUpperCase()] || COLOR.WHITE : color;\n}\n\nexport function addColor(string, color, background) {\n  if (!isBrowser && typeof string === 'string') {\n    if (color) {\n      color = getColor(color);\n      string = \"\\x1B[\".concat(color, \"m\").concat(string, \"\\x1B[39m\");\n    }\n\n    if (background) {\n      color = getColor(background);\n      string = \"\\x1B[\".concat(background + 10, \"m\").concat(string, \"\\x1B[49m\");\n    }\n  }\n\n  return string;\n}\n//# sourceMappingURL=color.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { window, process, isBrowser } from './globals';\nexport default function getHiResTimestamp() {\n  let timestamp;\n\n  if (isBrowser && window.performance) {\n    timestamp = window.performance.now();\n  } else if (process.hrtime) {\n    const timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import { VERSION, isBrowser } from '../utils/globals';\nimport LocalStorage from '../utils/local-storage';\nimport { formatImage, formatTime, leftPad } from '../utils/formatters';\nimport { addColor } from '../utils/color';\nimport { autobind } from '../utils/autobind';\nimport assert from '../utils/assert';\nimport getHiResTimestamp from '../utils/hi-res-timestamp';\nconst originalConsole = {\n  debug: isBrowser ? console.debug || console.log : console.log,\n  log: console.log,\n  info: console.info,\n  warn: console.warn,\n  error: console.error\n};\nconst DEFAULT_SETTINGS = {\n  enabled: true,\n  level: 0\n};\n\nfunction noop() {}\n\nconst cache = {};\nconst ONCE = {\n  once: true\n};\n\nfunction getTableHeader(table) {\n  for (const key in table) {\n    for (const title in table[key]) {\n      return title || 'untitled';\n    }\n  }\n\n  return 'empty';\n}\n\nexport default class Log {\n  constructor({\n    id\n  } = {\n    id: ''\n  }) {\n    this.id = id;\n    this.VERSION = VERSION;\n    this._startTs = getHiResTimestamp();\n    this._deltaTs = getHiResTimestamp();\n    this.LOG_THROTTLE_TIMEOUT = 0;\n    this._storage = new LocalStorage(\"__probe-\".concat(this.id, \"__\"), DEFAULT_SETTINGS);\n    this.userData = {};\n    this.timeStamp(\"\".concat(this.id, \" started\"));\n    autobind(this);\n    Object.seal(this);\n  }\n\n  set level(newLevel) {\n    this.setLevel(newLevel);\n  }\n\n  get level() {\n    return this.getLevel();\n  }\n\n  isEnabled() {\n    return this._storage.config.enabled;\n  }\n\n  getLevel() {\n    return this._storage.config.level;\n  }\n\n  getTotal() {\n    return Number((getHiResTimestamp() - this._startTs).toPrecision(10));\n  }\n\n  getDelta() {\n    return Number((getHiResTimestamp() - this._deltaTs).toPrecision(10));\n  }\n\n  set priority(newPriority) {\n    this.level = newPriority;\n  }\n\n  get priority() {\n    return this.level;\n  }\n\n  getPriority() {\n    return this.level;\n  }\n\n  enable(enabled = true) {\n    this._storage.updateConfiguration({\n      enabled\n    });\n\n    return this;\n  }\n\n  setLevel(level) {\n    this._storage.updateConfiguration({\n      level\n    });\n\n    return this;\n  }\n\n  assert(condition, message) {\n    assert(condition, message);\n  }\n\n  warn(message) {\n    return this._getLogFunction(0, message, originalConsole.warn, arguments, ONCE);\n  }\n\n  error(message) {\n    return this._getLogFunction(0, message, originalConsole.error, arguments);\n  }\n\n  deprecated(oldUsage, newUsage) {\n    return this.warn(\"`\".concat(oldUsage, \"` is deprecated and will be removed in a later version. Use `\").concat(newUsage, \"` instead\"));\n  }\n\n  removed(oldUsage, newUsage) {\n    return this.error(\"`\".concat(oldUsage, \"` has been removed. Use `\").concat(newUsage, \"` instead\"));\n  }\n\n  probe(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.log, arguments, {\n      time: true,\n      once: true\n    });\n  }\n\n  log(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.debug, arguments);\n  }\n\n  info(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.info, arguments);\n  }\n\n  once(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.debug || originalConsole.info, arguments, ONCE);\n  }\n\n  table(logLevel, table, columns) {\n    if (table) {\n      return this._getLogFunction(logLevel, table, console.table || noop, columns && [columns], {\n        tag: getTableHeader(table)\n      });\n    }\n\n    return noop;\n  }\n\n  image({\n    logLevel,\n    priority,\n    image,\n    message = '',\n    scale = 1\n  }) {\n    if (!this._shouldLog(logLevel || priority)) {\n      return noop;\n    }\n\n    return isBrowser ? logImageInBrowser({\n      image,\n      message,\n      scale\n    }) : logImageInNode({\n      image,\n      message,\n      scale\n    });\n  }\n\n  settings() {\n    if (console.table) {\n      console.table(this._storage.config);\n    } else {\n      console.log(this._storage.config);\n    }\n  }\n\n  get(setting) {\n    return this._storage.config[setting];\n  }\n\n  set(setting, value) {\n    this._storage.updateConfiguration({\n      [setting]: value\n    });\n  }\n\n  time(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.time ? console.time : console.info);\n  }\n\n  timeEnd(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.timeEnd ? console.timeEnd : console.info);\n  }\n\n  timeStamp(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.timeStamp || noop);\n  }\n\n  group(logLevel, message, opts = {\n    collapsed: false\n  }) {\n    opts = normalizeArguments({\n      logLevel,\n      message,\n      opts\n    });\n    const {\n      collapsed\n    } = opts;\n    opts.method = (collapsed ? console.groupCollapsed : console.group) || console.info;\n    return this._getLogFunction(opts);\n  }\n\n  groupCollapsed(logLevel, message, opts = {}) {\n    return this.group(logLevel, message, Object.assign({}, opts, {\n      collapsed: true\n    }));\n  }\n\n  groupEnd(logLevel) {\n    return this._getLogFunction(logLevel, '', console.groupEnd || noop);\n  }\n\n  withGroup(logLevel, message, func) {\n    this.group(logLevel, message)();\n\n    try {\n      func();\n    } finally {\n      this.groupEnd(logLevel)();\n    }\n  }\n\n  trace() {\n    if (console.trace) {\n      console.trace();\n    }\n  }\n\n  _shouldLog(logLevel) {\n    return this.isEnabled() && this.getLevel() >= normalizeLogLevel(logLevel);\n  }\n\n  _getLogFunction(logLevel, message, method, args = [], opts) {\n    if (this._shouldLog(logLevel)) {\n      opts = normalizeArguments({\n        logLevel,\n        message,\n        args,\n        opts\n      });\n      method = method || opts.method;\n      assert(method);\n      opts.total = this.getTotal();\n      opts.delta = this.getDelta();\n      this._deltaTs = getHiResTimestamp();\n      const tag = opts.tag || opts.message;\n\n      if (opts.once) {\n        if (!cache[tag]) {\n          cache[tag] = getHiResTimestamp();\n        } else {\n          return noop;\n        }\n      }\n\n      message = decorateMessage(this.id, opts.message, opts);\n      return method.bind(console, message, ...opts.args);\n    }\n\n    return noop;\n  }\n\n}\nLog.VERSION = VERSION;\n\nfunction normalizeLogLevel(logLevel) {\n  if (!logLevel) {\n    return 0;\n  }\n\n  let resolvedLevel;\n\n  switch (typeof logLevel) {\n    case 'number':\n      resolvedLevel = logLevel;\n      break;\n\n    case 'object':\n      resolvedLevel = logLevel.logLevel || logLevel.priority || 0;\n      break;\n\n    default:\n      return 0;\n  }\n\n  assert(Number.isFinite(resolvedLevel) && resolvedLevel >= 0);\n  return resolvedLevel;\n}\n\nexport function normalizeArguments(opts) {\n  const {\n    logLevel,\n    message\n  } = opts;\n  opts.logLevel = normalizeLogLevel(logLevel);\n  const args = opts.args ? Array.from(opts.args) : [];\n\n  while (args.length && args.shift() !== message) {}\n\n  opts.args = args;\n\n  switch (typeof logLevel) {\n    case 'string':\n    case 'function':\n      if (message !== undefined) {\n        args.unshift(message);\n      }\n\n      opts.message = logLevel;\n      break;\n\n    case 'object':\n      Object.assign(opts, logLevel);\n      break;\n\n    default:\n  }\n\n  if (typeof opts.message === 'function') {\n    opts.message = opts.message();\n  }\n\n  const messageType = typeof opts.message;\n  assert(messageType === 'string' || messageType === 'object');\n  return Object.assign(opts, opts.opts);\n}\n\nfunction decorateMessage(id, message, opts) {\n  if (typeof message === 'string') {\n    const time = opts.time ? leftPad(formatTime(opts.total)) : '';\n    message = opts.time ? \"\".concat(id, \": \").concat(time, \"  \").concat(message) : \"\".concat(id, \": \").concat(message);\n    message = addColor(message, opts.color, opts.background);\n  }\n\n  return message;\n}\n\nfunction logImageInNode({\n  image,\n  message = '',\n  scale = 1\n}) {\n  let asciify = null;\n\n  try {\n    asciify = module.require('asciify-image');\n  } catch (error) {}\n\n  if (asciify) {\n    return () => asciify(image, {\n      fit: 'box',\n      width: \"\".concat(Math.round(80 * scale), \"%\")\n    }).then(data => console.log(data));\n  }\n\n  return noop;\n}\n\nfunction logImageInBrowser({\n  image,\n  message = '',\n  scale = 1\n}) {\n  if (typeof image === 'string') {\n    const img = new Image();\n\n    img.onload = () => {\n      const args = formatImage(img, message, scale);\n      console.log(...args);\n    };\n\n    img.src = image;\n    return noop;\n  }\n\n  const element = image.nodeName || '';\n\n  if (element.toLowerCase() === 'img') {\n    console.log(...formatImage(image, message, scale));\n    return noop;\n  }\n\n  if (element.toLowerCase() === 'canvas') {\n    const img = new Image();\n\n    img.onload = () => console.log(...formatImage(img, message, scale));\n\n    img.src = image.toDataURL();\n    return noop;\n  }\n\n  return noop;\n}\n//# sourceMappingURL=log.js.map","export function autobind(obj, predefined = ['constructor']) {\n  const proto = Object.getPrototypeOf(obj);\n  const propNames = Object.getOwnPropertyNames(proto);\n\n  for (const key of propNames) {\n    if (typeof obj[key] === 'function') {\n      if (!predefined.find(name => key === name)) {\n        obj[key] = obj[key].bind(obj);\n      }\n    }\n  }\n}\n//# sourceMappingURL=autobind.js.map","var indexOf = function (xs, item) {\n    if (xs.indexOf) return xs.indexOf(item);\n    else for (var i = 0; i < xs.length; i++) {\n        if (xs[i] === item) return i;\n    }\n    return -1;\n};\nvar Object_keys = function (obj) {\n    if (Object.keys) return Object.keys(obj)\n    else {\n        var res = [];\n        for (var key in obj) res.push(key)\n        return res;\n    }\n};\n\nvar forEach = function (xs, fn) {\n    if (xs.forEach) return xs.forEach(fn)\n    else for (var i = 0; i < xs.length; i++) {\n        fn(xs[i], i, xs);\n    }\n};\n\nvar defineProp = (function() {\n    try {\n        Object.defineProperty({}, '_', {});\n        return function(obj, name, value) {\n            Object.defineProperty(obj, name, {\n                writable: true,\n                enumerable: false,\n                configurable: true,\n                value: value\n            })\n        };\n    } catch(e) {\n        return function(obj, name, value) {\n            obj[name] = value;\n        };\n    }\n}());\n\nvar globals = ['Array', 'Boolean', 'Date', 'Error', 'EvalError', 'Function',\n'Infinity', 'JSON', 'Math', 'NaN', 'Number', 'Object', 'RangeError',\n'ReferenceError', 'RegExp', 'String', 'SyntaxError', 'TypeError', 'URIError',\n'decodeURI', 'decodeURIComponent', 'encodeURI', 'encodeURIComponent', 'escape',\n'eval', 'isFinite', 'isNaN', 'parseFloat', 'parseInt', 'undefined', 'unescape'];\n\nfunction Context() {}\nContext.prototype = {};\n\nvar Script = exports.Script = function NodeScript (code) {\n    if (!(this instanceof Script)) return new Script(code);\n    this.code = code;\n};\n\nScript.prototype.runInContext = function (context) {\n    if (!(context instanceof Context)) {\n        throw new TypeError(\"needs a 'context' argument.\");\n    }\n    \n    var iframe = document.createElement('iframe');\n    if (!iframe.style) iframe.style = {};\n    iframe.style.display = 'none';\n    \n    document.body.appendChild(iframe);\n    \n    var win = iframe.contentWindow;\n    var wEval = win.eval, wExecScript = win.execScript;\n\n    if (!wEval && wExecScript) {\n        // win.eval() magically appears when this is called in IE:\n        wExecScript.call(win, 'null');\n        wEval = win.eval;\n    }\n    \n    forEach(Object_keys(context), function (key) {\n        win[key] = context[key];\n    });\n    forEach(globals, function (key) {\n        if (context[key]) {\n            win[key] = context[key];\n        }\n    });\n    \n    var winKeys = Object_keys(win);\n\n    var res = wEval.call(win, this.code);\n    \n    forEach(Object_keys(win), function (key) {\n        // Avoid copying circular objects like `top` and `window` by only\n        // updating existing context properties or new properties in the `win`\n        // that was only introduced after the eval.\n        if (key in context || indexOf(winKeys, key) === -1) {\n            context[key] = win[key];\n        }\n    });\n\n    forEach(globals, function (key) {\n        if (!(key in context)) {\n            defineProp(context, key, win[key]);\n        }\n    });\n    \n    document.body.removeChild(iframe);\n    \n    return res;\n};\n\nScript.prototype.runInThisContext = function () {\n    return eval(this.code); // maybe...\n};\n\nScript.prototype.runInNewContext = function (context) {\n    var ctx = Script.createContext(context);\n    var res = this.runInContext(ctx);\n\n    if (context) {\n        forEach(Object_keys(ctx), function (key) {\n            context[key] = ctx[key];\n        });\n    }\n\n    return res;\n};\n\nforEach(Object_keys(Script.prototype), function (name) {\n    exports[name] = Script[name] = function (code) {\n        var s = Script(code);\n        return s[name].apply(s, [].slice.call(arguments, 1));\n    };\n});\n\nexports.isContext = function (context) {\n    return context instanceof Context;\n};\n\nexports.createScript = function (code) {\n    return exports.Script(code);\n};\n\nexports.createContext = Script.createContext = function (context) {\n    var copy = new Context();\n    if(typeof context === 'object') {\n        forEach(Object_keys(context), function (key) {\n            copy[key] = context[key];\n        });\n    }\n    return copy;\n};\n","// Current version.\nexport var VERSION = '1.13.6';\n\n// Establish the root object, `window` (`self`) in the browser, `global`\n// on the server, or `this` in some virtual machines. We use `self`\n// instead of `window` for `WebWorker` support.\nexport var root = (typeof self == 'object' && self.self === self && self) ||\n          (typeof global == 'object' && global.global === global && global) ||\n          Function('return this')() ||\n          {};\n\n// Save bytes in the minified (but not gzipped) version:\nexport var ArrayProto = Array.prototype, ObjProto = Object.prototype;\nexport var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n// Create quick reference variables for speed access to core prototypes.\nexport var push = ArrayProto.push,\n    slice = ArrayProto.slice,\n    toString = ObjProto.toString,\n    hasOwnProperty = ObjProto.hasOwnProperty;\n\n// Modern feature detection.\nexport var supportsArrayBuffer = typeof ArrayBuffer !== 'undefined',\n    supportsDataView = typeof DataView !== 'undefined';\n\n// All **ECMAScript 5+** native function implementations that we hope to use\n// are declared here.\nexport var nativeIsArray = Array.isArray,\n    nativeKeys = Object.keys,\n    nativeCreate = Object.create,\n    nativeIsView = supportsArrayBuffer && ArrayBuffer.isView;\n\n// Create references to these builtin functions because we override them.\nexport var _isNaN = isNaN,\n    _isFinite = isFinite;\n\n// Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\nexport var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\nexport var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n  'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n// The largest integer that can be represented exactly.\nexport var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n","// Some functions take a variable number of arguments, or a few expected\n// arguments at the beginning and then a variable number of values to operate\n// on. This helper accumulates all remaining arguments past the function’s\n// argument length (or an explicit `startIndex`), into an array that becomes\n// the last argument. Similar to ES6’s \"rest parameter\".\nexport default function restArguments(func, startIndex) {\n  startIndex = startIndex == null ? func.length - 1 : +startIndex;\n  return function() {\n    var length = Math.max(arguments.length - startIndex, 0),\n        rest = Array(length),\n        index = 0;\n    for (; index < length; index++) {\n      rest[index] = arguments[index + startIndex];\n    }\n    switch (startIndex) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, arguments[0], rest);\n      case 2: return func.call(this, arguments[0], arguments[1], rest);\n    }\n    var args = Array(startIndex + 1);\n    for (index = 0; index < startIndex; index++) {\n      args[index] = arguments[index];\n    }\n    args[startIndex] = rest;\n    return func.apply(this, args);\n  };\n}\n","// Is a given variable an object?\nexport default function isObject(obj) {\n  var type = typeof obj;\n  return type === 'function' || (type === 'object' && !!obj);\n}\n","// Is a given value equal to null?\nexport default function isNull(obj) {\n  return obj === null;\n}\n","// Is a given variable undefined?\nexport default function isUndefined(obj) {\n  return obj === void 0;\n}\n","import { toString } from './_setup.js';\n\n// Is a given value a boolean?\nexport default function isBoolean(obj) {\n  return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n}\n","// Is a given value a DOM element?\nexport default function isElement(obj) {\n  return !!(obj && obj.nodeType === 1);\n}\n","import { toString } from './_setup.js';\n\n// Internal function for creating a `toString`-based type tester.\nexport default function tagTester(name) {\n  var tag = '[object ' + name + ']';\n  return function(obj) {\n    return toString.call(obj) === tag;\n  };\n}\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('String');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Number');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Date');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('RegExp');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Error');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Symbol');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('ArrayBuffer');\n","import tagTester from './_tagTester.js';\nimport { root } from './_setup.js';\n\nvar isFunction = tagTester('Function');\n\n// Optimize `isFunction` if appropriate. Work around some `typeof` bugs in old\n// v8, IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\nvar nodelist = root.document && root.document.childNodes;\nif (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n  isFunction = function(obj) {\n    return typeof obj == 'function' || false;\n  };\n}\n\nexport default isFunction;\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Object');\n","import { supportsDataView } from './_setup.js';\nimport hasObjectTag from './_hasObjectTag.js';\n\n// In IE 10 - Edge 13, `DataView` has string tag `'[object Object]'`.\n// In IE 11, the most common among them, this problem also applies to\n// `Map`, `WeakMap` and `Set`.\nexport var hasStringTagBug = (\n      supportsDataView && hasObjectTag(new DataView(new ArrayBuffer(8)))\n    ),\n    isIE11 = (typeof Map !== 'undefined' && hasObjectTag(new Map));\n","import tagTester from './_tagTester.js';\nimport isFunction from './isFunction.js';\nimport isArrayBuffer from './isArrayBuffer.js';\nimport { hasStringTagBug } from './_stringTagBug.js';\n\nvar isDataView = tagTester('DataView');\n\n// In IE 10 - Edge 13, we need a different heuristic\n// to determine whether an object is a `DataView`.\nfunction ie10IsDataView(obj) {\n  return obj != null && isFunction(obj.getInt8) && isArrayBuffer(obj.buffer);\n}\n\nexport default (hasStringTagBug ? ie10IsDataView : isDataView);\n","import { nativeIsArray } from './_setup.js';\nimport tagTester from './_tagTester.js';\n\n// Is a given value an array?\n// Delegates to ECMA5's native `Array.isArray`.\nexport default nativeIsArray || tagTester('Array');\n","import { hasOwnProperty } from './_setup.js';\n\n// Internal function to check whether `key` is an own property name of `obj`.\nexport default function has(obj, key) {\n  return obj != null && hasOwnProperty.call(obj, key);\n}\n","import tagTester from './_tagTester.js';\nimport has from './_has.js';\n\nvar isArguments = tagTester('Arguments');\n\n// Define a fallback version of the method in browsers (ahem, IE < 9), where\n// there isn't any inspectable \"Arguments\" type.\n(function() {\n  if (!isArguments(arguments)) {\n    isArguments = function(obj) {\n      return has(obj, 'callee');\n    };\n  }\n}());\n\nexport default isArguments;\n","import { _isFinite } from './_setup.js';\nimport isSymbol from './isSymbol.js';\n\n// Is a given object a finite number?\nexport default function isFinite(obj) {\n  return !isSymbol(obj) && _isFinite(obj) && !isNaN(parseFloat(obj));\n}\n","import { _isNaN } from './_setup.js';\nimport isNumber from './isNumber.js';\n\n// Is the given value `NaN`?\nexport default function isNaN(obj) {\n  return isNumber(obj) && _isNaN(obj);\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function constant(value) {\n  return function() {\n    return value;\n  };\n}\n","import { MAX_ARRAY_INDEX } from './_setup.js';\n\n// Common internal logic for `isArrayLike` and `isBufferLike`.\nexport default function createSizePropertyCheck(getSizeProperty) {\n  return function(collection) {\n    var sizeProperty = getSizeProperty(collection);\n    return typeof sizeProperty == 'number' && sizeProperty >= 0 && sizeProperty <= MAX_ARRAY_INDEX;\n  }\n}\n","// Internal helper to generate a function to obtain property `key` from `obj`.\nexport default function shallowProperty(key) {\n  return function(obj) {\n    return obj == null ? void 0 : obj[key];\n  };\n}\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `byteLength` property of an object.\nexport default shallowProperty('byteLength');\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getByteLength from './_getByteLength.js';\n\n// Internal helper to determine whether we should spend extensive checks against\n// `ArrayBuffer` et al.\nexport default createSizePropertyCheck(getByteLength);\n","import { supportsArrayBuffer, nativeIsView, toString } from './_setup.js';\nimport isDataView from './isDataView.js';\nimport constant from './constant.js';\nimport isBufferLike from './_isBufferLike.js';\n\n// Is a given value a typed array?\nvar typedArrayPattern = /\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\]/;\nfunction isTypedArray(obj) {\n  // `ArrayBuffer.isView` is the most future-proof, so use it when available.\n  // Otherwise, fall back on the above regular expression.\n  return nativeIsView ? (nativeIsView(obj) && !isDataView(obj)) :\n                isBufferLike(obj) && typedArrayPattern.test(toString.call(obj));\n}\n\nexport default supportsArrayBuffer ? isTypedArray : constant(false);\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `length` property of an object.\nexport default shallowProperty('length');\n","import { nonEnumerableProps, ObjProto } from './_setup.js';\nimport isFunction from './isFunction.js';\nimport has from './_has.js';\n\n// Internal helper to create a simple lookup structure.\n// `collectNonEnumProps` used to depend on `_.contains`, but this led to\n// circular imports. `emulatedSet` is a one-off solution that only works for\n// arrays of strings.\nfunction emulatedSet(keys) {\n  var hash = {};\n  for (var l = keys.length, i = 0; i < l; ++i) hash[keys[i]] = true;\n  return {\n    contains: function(key) { return hash[key] === true; },\n    push: function(key) {\n      hash[key] = true;\n      return keys.push(key);\n    }\n  };\n}\n\n// Internal helper. Checks `keys` for the presence of keys in IE < 9 that won't\n// be iterated by `for key in ...` and thus missed. Extends `keys` in place if\n// needed.\nexport default function collectNonEnumProps(obj, keys) {\n  keys = emulatedSet(keys);\n  var nonEnumIdx = nonEnumerableProps.length;\n  var constructor = obj.constructor;\n  var proto = (isFunction(constructor) && constructor.prototype) || ObjProto;\n\n  // Constructor is a special case.\n  var prop = 'constructor';\n  if (has(obj, prop) && !keys.contains(prop)) keys.push(prop);\n\n  while (nonEnumIdx--) {\n    prop = nonEnumerableProps[nonEnumIdx];\n    if (prop in obj && obj[prop] !== proto[prop] && !keys.contains(prop)) {\n      keys.push(prop);\n    }\n  }\n}\n","import isObject from './isObject.js';\nimport { nativeKeys, hasEnumBug } from './_setup.js';\nimport has from './_has.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve the names of an object's own properties.\n// Delegates to **ECMAScript 5**'s native `Object.keys`.\nexport default function keys(obj) {\n  if (!isObject(obj)) return [];\n  if (nativeKeys) return nativeKeys(obj);\n  var keys = [];\n  for (var key in obj) if (has(obj, key)) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isArray from './isArray.js';\nimport isString from './isString.js';\nimport isArguments from './isArguments.js';\nimport keys from './keys.js';\n\n// Is a given array, string, or object empty?\n// An \"empty\" object has no enumerable own-properties.\nexport default function isEmpty(obj) {\n  if (obj == null) return true;\n  // Skip the more expensive `toString`-based type checks if `obj` has no\n  // `.length`.\n  var length = getLength(obj);\n  if (typeof length == 'number' && (\n    isArray(obj) || isString(obj) || isArguments(obj)\n  )) return length === 0;\n  return getLength(keys(obj)) === 0;\n}\n","import keys from './keys.js';\n\n// Returns whether an object has a given set of `key:value` pairs.\nexport default function isMatch(object, attrs) {\n  var _keys = keys(attrs), length = _keys.length;\n  if (object == null) return !length;\n  var obj = Object(object);\n  for (var i = 0; i < length; i++) {\n    var key = _keys[i];\n    if (attrs[key] !== obj[key] || !(key in obj)) return false;\n  }\n  return true;\n}\n","import { VERSION } from './_setup.js';\n\n// If Underscore is called as a function, it returns a wrapped object that can\n// be used OO-style. This wrapper holds altered versions of all functions added\n// through `_.mixin`. Wrapped objects may be chained.\nexport default function _(obj) {\n  if (obj instanceof _) return obj;\n  if (!(this instanceof _)) return new _(obj);\n  this._wrapped = obj;\n}\n\n_.VERSION = VERSION;\n\n// Extracts the result from a wrapped and chained object.\n_.prototype.value = function() {\n  return this._wrapped;\n};\n\n// Provide unwrapping proxies for some methods used in engine operations\n// such as arithmetic and JSON stringification.\n_.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n_.prototype.toString = function() {\n  return String(this._wrapped);\n};\n","import getByteLength from './_getByteLength.js';\n\n// Internal function to wrap or shallow-copy an ArrayBuffer,\n// typed array or DataView to a new view, reusing the buffer.\nexport default function toBufferView(bufferSource) {\n  return new Uint8Array(\n    bufferSource.buffer || bufferSource,\n    bufferSource.byteOffset || 0,\n    getByteLength(bufferSource)\n  );\n}\n","import _ from './underscore.js';\nimport { toString, SymbolProto } from './_setup.js';\nimport getByteLength from './_getByteLength.js';\nimport isTypedArray from './isTypedArray.js';\nimport isFunction from './isFunction.js';\nimport { hasStringTagBug }  from './_stringTagBug.js';\nimport isDataView from './isDataView.js';\nimport keys from './keys.js';\nimport has from './_has.js';\nimport toBufferView from './_toBufferView.js';\n\n// We use this string twice, so give it a name for minification.\nvar tagDataView = '[object DataView]';\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction eq(a, b, aStack, bStack) {\n  // Identical objects are equal. `0 === -0`, but they aren't identical.\n  // See the [Harmony `egal` proposal](https://wiki.ecmascript.org/doku.php?id=harmony:egal).\n  if (a === b) return a !== 0 || 1 / a === 1 / b;\n  // `null` or `undefined` only equal to itself (strict comparison).\n  if (a == null || b == null) return false;\n  // `NaN`s are equivalent, but non-reflexive.\n  if (a !== a) return b !== b;\n  // Exhaust primitive checks\n  var type = typeof a;\n  if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n  return deepEq(a, b, aStack, bStack);\n}\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction deepEq(a, b, aStack, bStack) {\n  // Unwrap any wrapped objects.\n  if (a instanceof _) a = a._wrapped;\n  if (b instanceof _) b = b._wrapped;\n  // Compare `[[Class]]` names.\n  var className = toString.call(a);\n  if (className !== toString.call(b)) return false;\n  // Work around a bug in IE 10 - Edge 13.\n  if (hasStringTagBug && className == '[object Object]' && isDataView(a)) {\n    if (!isDataView(b)) return false;\n    className = tagDataView;\n  }\n  switch (className) {\n    // These types are compared by value.\n    case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n    case '[object String]':\n      // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n      // equivalent to `new String(\"5\")`.\n      return '' + a === '' + b;\n    case '[object Number]':\n      // `NaN`s are equivalent, but non-reflexive.\n      // Object(NaN) is equivalent to NaN.\n      if (+a !== +a) return +b !== +b;\n      // An `egal` comparison is performed for other numeric values.\n      return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n    case '[object Date]':\n    case '[object Boolean]':\n      // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n      // millisecond representations. Note that invalid dates with millisecond representations\n      // of `NaN` are not equivalent.\n      return +a === +b;\n    case '[object Symbol]':\n      return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    case '[object ArrayBuffer]':\n    case tagDataView:\n      // Coerce to typed array so we can fall through.\n      return deepEq(toBufferView(a), toBufferView(b), aStack, bStack);\n  }\n\n  var areArrays = className === '[object Array]';\n  if (!areArrays && isTypedArray(a)) {\n      var byteLength = getByteLength(a);\n      if (byteLength !== getByteLength(b)) return false;\n      if (a.buffer === b.buffer && a.byteOffset === b.byteOffset) return true;\n      areArrays = true;\n  }\n  if (!areArrays) {\n    if (typeof a != 'object' || typeof b != 'object') return false;\n\n    // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(isFunction(aCtor) && aCtor instanceof aCtor &&\n                             isFunction(bCtor) && bCtor instanceof bCtor)\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n  }\n  // Assume equality for cyclic structures. The algorithm for detecting cyclic\n  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n  // Initializing stack of traversed objects.\n  // It's done here since we only need them for objects and arrays comparison.\n  aStack = aStack || [];\n  bStack = bStack || [];\n  var length = aStack.length;\n  while (length--) {\n    // Linear search. Performance is inversely proportional to the number of\n    // unique nested structures.\n    if (aStack[length] === a) return bStack[length] === b;\n  }\n\n  // Add the first object to the stack of traversed objects.\n  aStack.push(a);\n  bStack.push(b);\n\n  // Recursively compare objects and arrays.\n  if (areArrays) {\n    // Compare array lengths to determine if a deep comparison is necessary.\n    length = a.length;\n    if (length !== b.length) return false;\n    // Deep compare the contents, ignoring non-numeric properties.\n    while (length--) {\n      if (!eq(a[length], b[length], aStack, bStack)) return false;\n    }\n  } else {\n    // Deep compare objects.\n    var _keys = keys(a), key;\n    length = _keys.length;\n    // Ensure that both objects contain the same number of properties before comparing deep equality.\n    if (keys(b).length !== length) return false;\n    while (length--) {\n      // Deep compare each member\n      key = _keys[length];\n      if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n    }\n  }\n  // Remove the first object from the stack of traversed objects.\n  aStack.pop();\n  bStack.pop();\n  return true;\n}\n\n// Perform a deep comparison to check if two objects are equal.\nexport default function isEqual(a, b) {\n  return eq(a, b);\n}\n","import isObject from './isObject.js';\nimport { hasEnumBug } from './_setup.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve all the enumerable property names of an object.\nexport default function allKeys(obj) {\n  if (!isObject(obj)) return [];\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isFunction from './isFunction.js';\nimport allKeys from './allKeys.js';\n\n// Since the regular `Object.prototype.toString` type tests don't work for\n// some types in IE 11, we use a fingerprinting heuristic instead, based\n// on the methods. It's not great, but it's the best we got.\n// The fingerprint method lists are defined below.\nexport function ie11fingerprint(methods) {\n  var length = getLength(methods);\n  return function(obj) {\n    if (obj == null) return false;\n    // `Map`, `WeakMap` and `Set` have no enumerable keys.\n    var keys = allKeys(obj);\n    if (getLength(keys)) return false;\n    for (var i = 0; i < length; i++) {\n      if (!isFunction(obj[methods[i]])) return false;\n    }\n    // If we are testing against `WeakMap`, we need to ensure that\n    // `obj` doesn't have a `forEach` method in order to distinguish\n    // it from a regular `Map`.\n    return methods !== weakMapMethods || !isFunction(obj[forEachName]);\n  };\n}\n\n// In the interest of compact minification, we write\n// each string in the fingerprints only once.\nvar forEachName = 'forEach',\n    hasName = 'has',\n    commonInit = ['clear', 'delete'],\n    mapTail = ['get', hasName, 'set'];\n\n// `Map`, `WeakMap` and `Set` each have slightly different\n// combinations of the above sublists.\nexport var mapMethods = commonInit.concat(forEachName, mapTail),\n    weakMapMethods = commonInit.concat(mapTail),\n    setMethods = ['add'].concat(commonInit, forEachName, hasName);\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, mapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(mapMethods) : tagTester('Map');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, weakMapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(weakMapMethods) : tagTester('WeakMap');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, setMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(setMethods) : tagTester('Set');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('WeakSet');\n","import keys from './keys.js';\n\n// Retrieve the values of an object's properties.\nexport default function values(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var values = Array(length);\n  for (var i = 0; i < length; i++) {\n    values[i] = obj[_keys[i]];\n  }\n  return values;\n}\n","import keys from './keys.js';\n\n// Convert an object into a list of `[key, value]` pairs.\n// The opposite of `_.object` with one argument.\nexport default function pairs(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var pairs = Array(length);\n  for (var i = 0; i < length; i++) {\n    pairs[i] = [_keys[i], obj[_keys[i]]];\n  }\n  return pairs;\n}\n","import keys from './keys.js';\n\n// Invert the keys and values of an object. The values must be serializable.\nexport default function invert(obj) {\n  var result = {};\n  var _keys = keys(obj);\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    result[obj[_keys[i]]] = _keys[i];\n  }\n  return result;\n}\n","import isFunction from './isFunction.js';\n\n// Return a sorted list of the function names available on the object.\nexport default function functions(obj) {\n  var names = [];\n  for (var key in obj) {\n    if (isFunction(obj[key])) names.push(key);\n  }\n  return names.sort();\n}\n","// An internal function for creating assigner functions.\nexport default function createAssigner(keysFunc, defaults) {\n  return function(obj) {\n    var length = arguments.length;\n    if (defaults) obj = Object(obj);\n    if (length < 2 || obj == null) return obj;\n    for (var index = 1; index < length; index++) {\n      var source = arguments[index],\n          keys = keysFunc(source),\n          l = keys.length;\n      for (var i = 0; i < l; i++) {\n        var key = keys[i];\n        if (!defaults || obj[key] === void 0) obj[key] = source[key];\n      }\n    }\n    return obj;\n  };\n}\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Extend a given object with all the properties in passed-in object(s).\nexport default createAssigner(allKeys);\n","import createAssigner from './_createAssigner.js';\nimport keys from './keys.js';\n\n// Assigns a given object with all the own properties in the passed-in\n// object(s).\n// (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\nexport default createAssigner(keys);\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Fill in a given object with default properties.\nexport default createAssigner(allKeys, true);\n","import isObject from './isObject.js';\nimport { nativeCreate } from './_setup.js';\n\n// Create a naked function reference for surrogate-prototype-swapping.\nfunction ctor() {\n  return function(){};\n}\n\n// An internal function for creating a new object that inherits from another.\nexport default function baseCreate(prototype) {\n  if (!isObject(prototype)) return {};\n  if (nativeCreate) return nativeCreate(prototype);\n  var Ctor = ctor();\n  Ctor.prototype = prototype;\n  var result = new Ctor;\n  Ctor.prototype = null;\n  return result;\n}\n","import baseCreate from './_baseCreate.js';\nimport extendOwn from './extendOwn.js';\n\n// Creates an object that inherits from the given prototype object.\n// If additional properties are provided then they will be added to the\n// created object.\nexport default function create(prototype, props) {\n  var result = baseCreate(prototype);\n  if (props) extendOwn(result, props);\n  return result;\n}\n","import isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport extend from './extend.js';\n\n// Create a (shallow-cloned) duplicate of an object.\nexport default function clone(obj) {\n  if (!isObject(obj)) return obj;\n  return isArray(obj) ? obj.slice() : extend({}, obj);\n}\n","// Invokes `interceptor` with the `obj` and then returns `obj`.\n// The primary purpose of this method is to \"tap into\" a method chain, in\n// order to perform operations on intermediate results within the chain.\nexport default function tap(obj, interceptor) {\n  interceptor(obj);\n  return obj;\n}\n","import _ from './underscore.js';\nimport isArray from './isArray.js';\n\n// Normalize a (deep) property `path` to array.\n// Like `_.iteratee`, this function can be customized.\nexport default function toPath(path) {\n  return isArray(path) ? path : [path];\n}\n_.toPath = toPath;\n","import _ from './underscore.js';\nimport './toPath.js';\n\n// Internal wrapper for `_.toPath` to enable minification.\n// Similar to `cb` for `_.iteratee`.\nexport default function toPath(path) {\n  return _.toPath(path);\n}\n","// Internal function to obtain a nested property in `obj` along `path`.\nexport default function deepGet(obj, path) {\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    if (obj == null) return void 0;\n    obj = obj[path[i]];\n  }\n  return length ? obj : void 0;\n}\n","import toPath from './_toPath.js';\nimport deepGet from './_deepGet.js';\nimport isUndefined from './isUndefined.js';\n\n// Get the value of the (deep) property on `path` from `object`.\n// If any property in `path` does not exist or if the value is\n// `undefined`, return `defaultValue` instead.\n// The `path` is normalized through `_.toPath`.\nexport default function get(object, path, defaultValue) {\n  var value = deepGet(object, toPath(path));\n  return isUndefined(value) ? defaultValue : value;\n}\n","import _has from './_has.js';\nimport toPath from './_toPath.js';\n\n// Shortcut function for checking if an object has a given property directly on\n// itself (in other words, not on a prototype). Unlike the internal `has`\n// function, this public version can also traverse nested properties.\nexport default function has(obj, path) {\n  path = toPath(path);\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    var key = path[i];\n    if (!_has(obj, key)) return false;\n    obj = obj[key];\n  }\n  return !!length;\n}\n","// Keep the identity function around for default iteratees.\nexport default function identity(value) {\n  return value;\n}\n","import extendOwn from './extendOwn.js';\nimport isMatch from './isMatch.js';\n\n// Returns a predicate for checking whether an object has a given set of\n// `key:value` pairs.\nexport default function matcher(attrs) {\n  attrs = extendOwn({}, attrs);\n  return function(obj) {\n    return isMatch(obj, attrs);\n  };\n}\n","import deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Creates a function that, when passed an object, will traverse that object’s\n// properties down the given `path`, specified as an array of keys or indices.\nexport default function property(path) {\n  path = toPath(path);\n  return function(obj) {\n    return deepGet(obj, path);\n  };\n}\n","// Internal function that returns an efficient (for current engines) version\n// of the passed-in callback, to be repeatedly applied in other Underscore\n// functions.\nexport default function optimizeCb(func, context, argCount) {\n  if (context === void 0) return func;\n  switch (argCount == null ? 3 : argCount) {\n    case 1: return function(value) {\n      return func.call(context, value);\n    };\n    // The 2-argument case is omitted because we’re not using it.\n    case 3: return function(value, index, collection) {\n      return func.call(context, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(context, accumulator, value, index, collection);\n    };\n  }\n  return function() {\n    return func.apply(context, arguments);\n  };\n}\n","import identity from './identity.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport matcher from './matcher.js';\nimport property from './property.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// An internal function to generate callbacks that can be applied to each\n// element in a collection, returning the desired result — either `_.identity`,\n// an arbitrary callback, a property matcher, or a property accessor.\nexport default function baseIteratee(value, context, argCount) {\n  if (value == null) return identity;\n  if (isFunction(value)) return optimizeCb(value, context, argCount);\n  if (isObject(value) && !isArray(value)) return matcher(value);\n  return property(value);\n}\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\n\n// External wrapper for our callback generator. Users may customize\n// `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n// This abstraction hides the internal-only `argCount` argument.\nexport default function iteratee(value, context) {\n  return baseIteratee(value, context, Infinity);\n}\n_.iteratee = iteratee;\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\nimport iteratee from './iteratee.js';\n\n// The function we call internally to generate a callback. It invokes\n// `_.iteratee` if overridden, otherwise `baseIteratee`.\nexport default function cb(value, context, argCount) {\n  if (_.iteratee !== iteratee) return _.iteratee(value, context);\n  return baseIteratee(value, context, argCount);\n}\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the results of applying the `iteratee` to each element of `obj`.\n// In contrast to `_.map` it returns an object.\nexport default function mapObject(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = keys(obj),\n      length = _keys.length,\n      results = {};\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys[index];\n    results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function noop(){}\n","import noop from './noop.js';\nimport get from './get.js';\n\n// Generates a function for a given object that returns a given property.\nexport default function propertyOf(obj) {\n  if (obj == null) return noop;\n  return function(path) {\n    return get(obj, path);\n  };\n}\n","import optimizeCb from './_optimizeCb.js';\n\n// Run a function **n** times.\nexport default function times(n, iteratee, context) {\n  var accum = Array(Math.max(0, n));\n  iteratee = optimizeCb(iteratee, context, 1);\n  for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n  return accum;\n}\n","// Return a random integer between `min` and `max` (inclusive).\nexport default function random(min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  return min + Math.floor(Math.random() * (max - min + 1));\n}\n","// A (possibly faster) way to get the current timestamp as an integer.\nexport default Date.now || function() {\n  return new Date().getTime();\n};\n","import keys from './keys.js';\n\n// Internal helper to generate functions for escaping and unescaping strings\n// to/from HTML interpolation.\nexport default function createEscaper(map) {\n  var escaper = function(match) {\n    return map[match];\n  };\n  // Regexes for identifying a key that needs to be escaped.\n  var source = '(?:' + keys(map).join('|') + ')';\n  var testRegexp = RegExp(source);\n  var replaceRegexp = RegExp(source, 'g');\n  return function(string) {\n    string = string == null ? '' : '' + string;\n    return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n  };\n}\n","// Internal list of HTML entities for escaping.\nexport default {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;'\n};\n","import createEscaper from './_createEscaper.js';\nimport escapeMap from './_escapeMap.js';\n\n// Function for escaping strings to HTML interpolation.\nexport default createEscaper(escapeMap);\n","import createEscaper from './_createEscaper.js';\nimport unescapeMap from './_unescapeMap.js';\n\n// Function for unescaping strings from HTML interpolation.\nexport default createEscaper(unescapeMap);\n","import invert from './invert.js';\nimport escapeMap from './_escapeMap.js';\n\n// Internal list of HTML entities for unescaping.\nexport default invert(escapeMap);\n","import _ from './underscore.js';\n\n// By default, Underscore uses ERB-style template delimiters. Change the\n// following template settings to use alternative delimiters.\nexport default _.templateSettings = {\n  evaluate: /<%([\\s\\S]+?)%>/g,\n  interpolate: /<%=([\\s\\S]+?)%>/g,\n  escape: /<%-([\\s\\S]+?)%>/g\n};\n","import defaults from './defaults.js';\nimport _ from './underscore.js';\nimport './templateSettings.js';\n\n// When customizing `_.templateSettings`, if you don't want to define an\n// interpolation, evaluation or escaping regex, we need one that is\n// guaranteed not to match.\nvar noMatch = /(.)^/;\n\n// Certain characters need to be escaped so that they can be put into a\n// string literal.\nvar escapes = {\n  \"'\": \"'\",\n  '\\\\': '\\\\',\n  '\\r': 'r',\n  '\\n': 'n',\n  '\\u2028': 'u2028',\n  '\\u2029': 'u2029'\n};\n\nvar escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\nfunction escapeChar(match) {\n  return '\\\\' + escapes[match];\n}\n\n// In order to prevent third-party code injection through\n// `_.templateSettings.variable`, we test it against the following regular\n// expression. It is intentionally a bit more liberal than just matching valid\n// identifiers, but still prevents possible loopholes through defaults or\n// destructuring assignment.\nvar bareIdentifier = /^\\s*(\\w|\\$)+\\s*$/;\n\n// JavaScript micro-templating, similar to John Resig's implementation.\n// Underscore templating handles arbitrary delimiters, preserves whitespace,\n// and correctly escapes quotes within interpolated code.\n// NB: `oldSettings` only exists for backwards compatibility.\nexport default function template(text, settings, oldSettings) {\n  if (!settings && oldSettings) settings = oldSettings;\n  settings = defaults({}, settings, _.templateSettings);\n\n  // Combine delimiters into one regular expression via alternation.\n  var matcher = RegExp([\n    (settings.escape || noMatch).source,\n    (settings.interpolate || noMatch).source,\n    (settings.evaluate || noMatch).source\n  ].join('|') + '|$', 'g');\n\n  // Compile the template source, escaping string literals appropriately.\n  var index = 0;\n  var source = \"__p+='\";\n  text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n    source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n    index = offset + match.length;\n\n    if (escape) {\n      source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n    } else if (interpolate) {\n      source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n    } else if (evaluate) {\n      source += \"';\\n\" + evaluate + \"\\n__p+='\";\n    }\n\n    // Adobe VMs need the match returned to produce the correct offset.\n    return match;\n  });\n  source += \"';\\n\";\n\n  var argument = settings.variable;\n  if (argument) {\n    // Insure against third-party code injection. (CVE-2021-23358)\n    if (!bareIdentifier.test(argument)) throw new Error(\n      'variable is not a bare identifier: ' + argument\n    );\n  } else {\n    // If a variable is not specified, place data values in local scope.\n    source = 'with(obj||{}){\\n' + source + '}\\n';\n    argument = 'obj';\n  }\n\n  source = \"var __t,__p='',__j=Array.prototype.join,\" +\n    \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n    source + 'return __p;\\n';\n\n  var render;\n  try {\n    render = new Function(argument, '_', source);\n  } catch (e) {\n    e.source = source;\n    throw e;\n  }\n\n  var template = function(data) {\n    return render.call(this, data, _);\n  };\n\n  // Provide the compiled source as a convenience for precompilation.\n  template.source = 'function(' + argument + '){\\n' + source + '}';\n\n  return template;\n}\n","import isFunction from './isFunction.js';\nimport toPath from './_toPath.js';\n\n// Traverses the children of `obj` along `path`. If a child is a function, it\n// is invoked with its parent as context. Returns the value of the final\n// child, or `fallback` if any child is undefined.\nexport default function result(obj, path, fallback) {\n  path = toPath(path);\n  var length = path.length;\n  if (!length) {\n    return isFunction(fallback) ? fallback.call(obj) : fallback;\n  }\n  for (var i = 0; i < length; i++) {\n    var prop = obj == null ? void 0 : obj[path[i]];\n    if (prop === void 0) {\n      prop = fallback;\n      i = length; // Ensure we don't continue iterating.\n    }\n    obj = isFunction(prop) ? prop.call(obj) : prop;\n  }\n  return obj;\n}\n","// Generate a unique integer id (unique within the entire client session).\n// Useful for temporary DOM ids.\nvar idCounter = 0;\nexport default function uniqueId(prefix) {\n  var id = ++idCounter + '';\n  return prefix ? prefix + id : id;\n}\n","import _ from './underscore.js';\n\n// Start chaining a wrapped Underscore object.\nexport default function chain(obj) {\n  var instance = _(obj);\n  instance._chain = true;\n  return instance;\n}\n","import baseCreate from './_baseCreate.js';\nimport isObject from './isObject.js';\n\n// Internal function to execute `sourceFunc` bound to `context` with optional\n// `args`. Determines whether to execute a function as a constructor or as a\n// normal function.\nexport default function executeBound(sourceFunc, boundFunc, context, callingContext, args) {\n  if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n  var self = baseCreate(sourceFunc.prototype);\n  var result = sourceFunc.apply(self, args);\n  if (isObject(result)) return result;\n  return self;\n}\n","import restArguments from './restArguments.js';\nimport executeBound from './_executeBound.js';\nimport _ from './underscore.js';\n\n// Partially apply a function by creating a version that has had some of its\n// arguments pre-filled, without changing its dynamic `this` context. `_` acts\n// as a placeholder by default, allowing any combination of arguments to be\n// pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\nvar partial = restArguments(function(func, boundArgs) {\n  var placeholder = partial.placeholder;\n  var bound = function() {\n    var position = 0, length = boundArgs.length;\n    var args = Array(length);\n    for (var i = 0; i < length; i++) {\n      args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n    }\n    while (position < arguments.length) args.push(arguments[position++]);\n    return executeBound(func, bound, this, this, args);\n  };\n  return bound;\n});\n\npartial.placeholder = _;\nexport default partial;\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport executeBound from './_executeBound.js';\n\n// Create a function bound to a given object (assigning `this`, and arguments,\n// optionally).\nexport default restArguments(function(func, context, args) {\n  if (!isFunction(func)) throw new TypeError('Bind must be called on a function');\n  var bound = restArguments(function(callArgs) {\n    return executeBound(func, bound, context, this, args.concat(callArgs));\n  });\n  return bound;\n});\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getLength from './_getLength.js';\n\n// Internal helper for collection methods to determine whether a collection\n// should be iterated as an array or as an object.\n// Related: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n// Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\nexport default createSizePropertyCheck(getLength);\n","import getLength from './_getLength.js';\nimport isArrayLike from './_isArrayLike.js';\nimport isArray from './isArray.js';\nimport isArguments from './isArguments.js';\n\n// Internal implementation of a recursive `flatten` function.\nexport default function flatten(input, depth, strict, output) {\n  output = output || [];\n  if (!depth && depth !== 0) {\n    depth = Infinity;\n  } else if (depth <= 0) {\n    return output.concat(input);\n  }\n  var idx = output.length;\n  for (var i = 0, length = getLength(input); i < length; i++) {\n    var value = input[i];\n    if (isArrayLike(value) && (isArray(value) || isArguments(value))) {\n      // Flatten current level of array or arguments object.\n      if (depth > 1) {\n        flatten(value, depth - 1, strict, output);\n        idx = output.length;\n      } else {\n        var j = 0, len = value.length;\n        while (j < len) output[idx++] = value[j++];\n      }\n    } else if (!strict) {\n      output[idx++] = value;\n    }\n  }\n  return output;\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport bind from './bind.js';\n\n// Bind a number of an object's methods to that object. Remaining arguments\n// are the method names to be bound. Useful for ensuring that all callbacks\n// defined on an object belong to it.\nexport default restArguments(function(obj, keys) {\n  keys = flatten(keys, false, false);\n  var index = keys.length;\n  if (index < 1) throw new Error('bindAll must be passed function names');\n  while (index--) {\n    var key = keys[index];\n    obj[key] = bind(obj[key], obj);\n  }\n  return obj;\n});\n","import has from './_has.js';\n\n// Memoize an expensive function by storing its results.\nexport default function memoize(func, hasher) {\n  var memoize = function(key) {\n    var cache = memoize.cache;\n    var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n    if (!has(cache, address)) cache[address] = func.apply(this, arguments);\n    return cache[address];\n  };\n  memoize.cache = {};\n  return memoize;\n}\n","import restArguments from './restArguments.js';\n\n// Delays a function for the given number of milliseconds, and then calls\n// it with the arguments supplied.\nexport default restArguments(function(func, wait, args) {\n  return setTimeout(function() {\n    return func.apply(null, args);\n  }, wait);\n});\n","import partial from './partial.js';\nimport delay from './delay.js';\nimport _ from './underscore.js';\n\n// Defers a function, scheduling it to run after the current call stack has\n// cleared.\nexport default partial(delay, _, 1);\n","import now from './now.js';\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nexport default function throttle(func, wait, options) {\n  var timeout, context, args, result;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function() {\n    previous = options.leading === false ? 0 : now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  var throttled = function() {\n    var _now = now();\n    if (!previous && options.leading === false) previous = _now;\n    var remaining = wait - (_now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = _now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function() {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n}\n","import restArguments from './restArguments.js';\nimport now from './now.js';\n\n// When a sequence of calls of the returned function ends, the argument\n// function is triggered. The end of a sequence is defined by the `wait`\n// parameter. If `immediate` is passed, the argument function will be\n// triggered at the beginning of the sequence instead of at the end.\nexport default function debounce(func, wait, immediate) {\n  var timeout, previous, args, result, context;\n\n  var later = function() {\n    var passed = now() - previous;\n    if (wait > passed) {\n      timeout = setTimeout(later, wait - passed);\n    } else {\n      timeout = null;\n      if (!immediate) result = func.apply(context, args);\n      // This check is needed because `func` can recursively invoke `debounced`.\n      if (!timeout) args = context = null;\n    }\n  };\n\n  var debounced = restArguments(function(_args) {\n    context = this;\n    args = _args;\n    previous = now();\n    if (!timeout) {\n      timeout = setTimeout(later, wait);\n      if (immediate) result = func.apply(context, args);\n    }\n    return result;\n  });\n\n  debounced.cancel = function() {\n    clearTimeout(timeout);\n    timeout = args = context = null;\n  };\n\n  return debounced;\n}\n","import partial from './partial.js';\n\n// Returns the first function passed as an argument to the second,\n// allowing you to adjust arguments, run code before and after, and\n// conditionally execute the original function.\nexport default function wrap(func, wrapper) {\n  return partial(wrapper, func);\n}\n","// Returns a negated version of the passed-in predicate.\nexport default function negate(predicate) {\n  return function() {\n    return !predicate.apply(this, arguments);\n  };\n}\n","// Returns a function that is the composition of a list of functions, each\n// consuming the return value of the function that follows.\nexport default function compose() {\n  var args = arguments;\n  var start = args.length - 1;\n  return function() {\n    var i = start;\n    var result = args[start].apply(this, arguments);\n    while (i--) result = args[i].call(this, result);\n    return result;\n  };\n}\n","// Returns a function that will only be executed on and after the Nth call.\nexport default function after(times, func) {\n  return function() {\n    if (--times < 1) {\n      return func.apply(this, arguments);\n    }\n  };\n}\n","// Returns a function that will only be executed up to (but not including) the\n// Nth call.\nexport default function before(times, func) {\n  var memo;\n  return function() {\n    if (--times > 0) {\n      memo = func.apply(this, arguments);\n    }\n    if (times <= 1) func = null;\n    return memo;\n  };\n}\n","import partial from './partial.js';\nimport before from './before.js';\n\n// Returns a function that will be executed at most one time, no matter how\n// often you call it. Useful for lazy initialization.\nexport default partial(before, 2);\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the first key on an object that passes a truth test.\nexport default function findKey(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = keys(obj), key;\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    key = _keys[i];\n    if (predicate(obj[key], key, obj)) return key;\n  }\n}\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Internal function to generate `_.findIndex` and `_.findLastIndex`.\nexport default function createPredicateIndexFinder(dir) {\n  return function(array, predicate, context) {\n    predicate = cb(predicate, context);\n    var length = getLength(array);\n    var index = dir > 0 ? 0 : length - 1;\n    for (; index >= 0 && index < length; index += dir) {\n      if (predicate(array[index], index, array)) return index;\n    }\n    return -1;\n  };\n}\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the first index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(1);\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the last index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(-1);\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Use a comparator function to figure out the smallest index at which\n// an object should be inserted so as to maintain order. Uses binary search.\nexport default function sortedIndex(array, obj, iteratee, context) {\n  iteratee = cb(iteratee, context, 1);\n  var value = iteratee(obj);\n  var low = 0, high = getLength(array);\n  while (low < high) {\n    var mid = Math.floor((low + high) / 2);\n    if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n  }\n  return low;\n}\n","import getLength from './_getLength.js';\nimport { slice } from './_setup.js';\nimport isNaN from './isNaN.js';\n\n// Internal function to generate the `_.indexOf` and `_.lastIndexOf` functions.\nexport default function createIndexFinder(dir, predicateFind, sortedIndex) {\n  return function(array, item, idx) {\n    var i = 0, length = getLength(array);\n    if (typeof idx == 'number') {\n      if (dir > 0) {\n        i = idx >= 0 ? idx : Math.max(idx + length, i);\n      } else {\n        length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n      }\n    } else if (sortedIndex && idx && length) {\n      idx = sortedIndex(array, item);\n      return array[idx] === item ? idx : -1;\n    }\n    if (item !== item) {\n      idx = predicateFind(slice.call(array, i, length), isNaN);\n      return idx >= 0 ? idx + i : -1;\n    }\n    for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n      if (array[idx] === item) return idx;\n    }\n    return -1;\n  };\n}\n","import sortedIndex from './sortedIndex.js';\nimport findIndex from './findIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the first occurrence of an item in an array,\n// or -1 if the item is not included in the array.\n// If the array is large and already in sort order, pass `true`\n// for **isSorted** to use binary search.\nexport default createIndexFinder(1, findIndex, sortedIndex);\n","import findLastIndex from './findLastIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the last occurrence of an item in an array,\n// or -1 if the item is not included in the array.\nexport default createIndexFinder(-1, findLastIndex);\n","import isArrayLike from './_isArrayLike.js';\nimport findIndex from './findIndex.js';\nimport findKey from './findKey.js';\n\n// Return the first value which passes a truth test.\nexport default function find(obj, predicate, context) {\n  var keyFinder = isArrayLike(obj) ? findIndex : findKey;\n  var key = keyFinder(obj, predicate, context);\n  if (key !== void 0 && key !== -1) return obj[key];\n}\n","import find from './find.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.find`: getting the first\n// object containing specific `key:value` pairs.\nexport default function findWhere(obj, attrs) {\n  return find(obj, matcher(attrs));\n}\n","import optimizeCb from './_optimizeCb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// The cornerstone for collection functions, an `each`\n// implementation, aka `forEach`.\n// Handles raw objects in addition to array-likes. Treats all\n// sparse array-likes as if they were dense.\nexport default function each(obj, iteratee, context) {\n  iteratee = optimizeCb(iteratee, context);\n  var i, length;\n  if (isArrayLike(obj)) {\n    for (i = 0, length = obj.length; i < length; i++) {\n      iteratee(obj[i], i, obj);\n    }\n  } else {\n    var _keys = keys(obj);\n    for (i = 0, length = _keys.length; i < length; i++) {\n      iteratee(obj[_keys[i]], _keys[i], obj);\n    }\n  }\n  return obj;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the results of applying the iteratee to each element.\nexport default function map(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length,\n      results = Array(length);\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    results[index] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// Internal helper to create a reducing function, iterating left or right.\nexport default function createReduce(dir) {\n  // Wrap code that reassigns argument variables in a separate function than\n  // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n  var reducer = function(obj, iteratee, memo, initial) {\n    var _keys = !isArrayLike(obj) && keys(obj),\n        length = (_keys || obj).length,\n        index = dir > 0 ? 0 : length - 1;\n    if (!initial) {\n      memo = obj[_keys ? _keys[index] : index];\n      index += dir;\n    }\n    for (; index >= 0 && index < length; index += dir) {\n      var currentKey = _keys ? _keys[index] : index;\n      memo = iteratee(memo, obj[currentKey], currentKey, obj);\n    }\n    return memo;\n  };\n\n  return function(obj, iteratee, memo, context) {\n    var initial = arguments.length >= 3;\n    return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n  };\n}\n","import createReduce from './_createReduce.js';\n\n// **Reduce** builds up a single result from a list of values, aka `inject`,\n// or `foldl`.\nexport default createReduce(1);\n","import createReduce from './_createReduce.js';\n\n// The right-associative version of reduce, also known as `foldr`.\nexport default createReduce(-1);\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// Return all the elements that pass a truth test.\nexport default function filter(obj, predicate, context) {\n  var results = [];\n  predicate = cb(predicate, context);\n  each(obj, function(value, index, list) {\n    if (predicate(value, index, list)) results.push(value);\n  });\n  return results;\n}\n","import filter from './filter.js';\nimport negate from './negate.js';\nimport cb from './_cb.js';\n\n// Return all the elements for which a truth test fails.\nexport default function reject(obj, predicate, context) {\n  return filter(obj, negate(cb(predicate)), context);\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine whether all of the elements pass a truth test.\nexport default function every(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (!predicate(obj[currentKey], currentKey, obj)) return false;\n  }\n  return true;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine if at least one element in the object passes a truth test.\nexport default function some(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (predicate(obj[currentKey], currentKey, obj)) return true;\n  }\n  return false;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport indexOf from './indexOf.js';\n\n// Determine if the array or object contains a given item (using `===`).\nexport default function contains(obj, item, fromIndex, guard) {\n  if (!isArrayLike(obj)) obj = values(obj);\n  if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n  return indexOf(obj, item, fromIndex) >= 0;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport map from './map.js';\nimport deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Invoke a method (with arguments) on every item in a collection.\nexport default restArguments(function(obj, path, args) {\n  var contextPath, func;\n  if (isFunction(path)) {\n    func = path;\n  } else {\n    path = toPath(path);\n    contextPath = path.slice(0, -1);\n    path = path[path.length - 1];\n  }\n  return map(obj, function(context) {\n    var method = func;\n    if (!method) {\n      if (contextPath && contextPath.length) {\n        context = deepGet(context, contextPath);\n      }\n      if (context == null) return void 0;\n      method = context[path];\n    }\n    return method == null ? method : method.apply(context, args);\n  });\n});\n","import map from './map.js';\nimport property from './property.js';\n\n// Convenience version of a common use case of `_.map`: fetching a property.\nexport default function pluck(obj, key) {\n  return map(obj, property(key));\n}\n","import filter from './filter.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.filter`: selecting only\n// objects containing specific `key:value` pairs.\nexport default function where(obj, attrs) {\n  return filter(obj, matcher(attrs));\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the maximum element (or element-based computation).\nexport default function max(obj, iteratee, context) {\n  var result = -Infinity, lastComputed = -Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value > result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed > lastComputed || (computed === -Infinity && result === -Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the minimum element (or element-based computation).\nexport default function min(obj, iteratee, context) {\n  var result = Infinity, lastComputed = Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value < result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed < lastComputed || (computed === Infinity && result === Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArray from './isArray.js';\nimport { slice } from './_setup.js';\nimport isString from './isString.js';\nimport isArrayLike from './_isArrayLike.js';\nimport map from './map.js';\nimport identity from './identity.js';\nimport values from './values.js';\n\n// Safely create a real, live array from anything iterable.\nvar reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\nexport default function toArray(obj) {\n  if (!obj) return [];\n  if (isArray(obj)) return slice.call(obj);\n  if (isString(obj)) {\n    // Keep surrogate pair characters together.\n    return obj.match(reStrSymbol);\n  }\n  if (isArrayLike(obj)) return map(obj, identity);\n  return values(obj);\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport getLength from './_getLength.js';\nimport random from './random.js';\nimport toArray from './toArray.js';\n\n// Sample **n** random values from a collection using the modern version of the\n// [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n// If **n** is not specified, returns a single random element.\n// The internal `guard` argument allows it to work with `_.map`.\nexport default function sample(obj, n, guard) {\n  if (n == null || guard) {\n    if (!isArrayLike(obj)) obj = values(obj);\n    return obj[random(obj.length - 1)];\n  }\n  var sample = toArray(obj);\n  var length = getLength(sample);\n  n = Math.max(Math.min(n, length), 0);\n  var last = length - 1;\n  for (var index = 0; index < n; index++) {\n    var rand = random(index, last);\n    var temp = sample[index];\n    sample[index] = sample[rand];\n    sample[rand] = temp;\n  }\n  return sample.slice(0, n);\n}\n","import sample from './sample.js';\n\n// Shuffle a collection.\nexport default function shuffle(obj) {\n  return sample(obj, Infinity);\n}\n","import cb from './_cb.js';\nimport pluck from './pluck.js';\nimport map from './map.js';\n\n// Sort the object's values by a criterion produced by an iteratee.\nexport default function sortBy(obj, iteratee, context) {\n  var index = 0;\n  iteratee = cb(iteratee, context);\n  return pluck(map(obj, function(value, key, list) {\n    return {\n      value: value,\n      index: index++,\n      criteria: iteratee(value, key, list)\n    };\n  }).sort(function(left, right) {\n    var a = left.criteria;\n    var b = right.criteria;\n    if (a !== b) {\n      if (a > b || a === void 0) return 1;\n      if (a < b || b === void 0) return -1;\n    }\n    return left.index - right.index;\n  }), 'value');\n}\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// An internal function used for aggregate \"group by\" operations.\nexport default function group(behavior, partition) {\n  return function(obj, iteratee, context) {\n    var result = partition ? [[], []] : {};\n    iteratee = cb(iteratee, context);\n    each(obj, function(value, index) {\n      var key = iteratee(value, index, obj);\n      behavior(result, value, key);\n    });\n    return result;\n  };\n}\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Groups the object's values by a criterion. Pass either a string attribute\n// to group by, or a function that returns the criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key].push(value); else result[key] = [value];\n});\n","import group from './_group.js';\n\n// Indexes the object's values by a criterion, similar to `_.groupBy`, but for\n// when you know that your index values will be unique.\nexport default group(function(result, value, key) {\n  result[key] = value;\n});\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Counts instances of an object that group by a certain criterion. Pass\n// either a string attribute to count by, or a function that returns the\n// criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key]++; else result[key] = 1;\n});\n","import group from './_group.js';\n\n// Split a collection into two arrays: one whose elements all pass the given\n// truth test, and one whose elements all do not pass the truth test.\nexport default group(function(result, value, pass) {\n  result[pass ? 0 : 1].push(value);\n}, true);\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the number of elements in a collection.\nexport default function size(obj) {\n  if (obj == null) return 0;\n  return isArrayLike(obj) ? obj.length : keys(obj).length;\n}\n","// Internal `_.pick` helper function to determine whether `key` is an enumerable\n// property name of `obj`.\nexport default function keyInObj(value, key, obj) {\n  return key in obj;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport optimizeCb from './_optimizeCb.js';\nimport allKeys from './allKeys.js';\nimport keyInObj from './_keyInObj.js';\nimport flatten from './_flatten.js';\n\n// Return a copy of the object only containing the allowed properties.\nexport default restArguments(function(obj, keys) {\n  var result = {}, iteratee = keys[0];\n  if (obj == null) return result;\n  if (isFunction(iteratee)) {\n    if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n    keys = allKeys(obj);\n  } else {\n    iteratee = keyInObj;\n    keys = flatten(keys, false, false);\n    obj = Object(obj);\n  }\n  for (var i = 0, length = keys.length; i < length; i++) {\n    var key = keys[i];\n    var value = obj[key];\n    if (iteratee(value, key, obj)) result[key] = value;\n  }\n  return result;\n});\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport negate from './negate.js';\nimport map from './map.js';\nimport flatten from './_flatten.js';\nimport contains from './contains.js';\nimport pick from './pick.js';\n\n// Return a copy of the object without the disallowed properties.\nexport default restArguments(function(obj, keys) {\n  var iteratee = keys[0], context;\n  if (isFunction(iteratee)) {\n    iteratee = negate(iteratee);\n    if (keys.length > 1) context = keys[1];\n  } else {\n    keys = map(flatten(keys, false, false), String);\n    iteratee = function(value, key) {\n      return !contains(keys, key);\n    };\n  }\n  return pick(obj, iteratee, context);\n});\n","import { slice } from './_setup.js';\n\n// Returns everything but the last entry of the array. Especially useful on\n// the arguments object. Passing **n** will return all the values in\n// the array, excluding the last N.\nexport default function initial(array, n, guard) {\n  return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n}\n","import initial from './initial.js';\n\n// Get the first element of an array. Passing **n** will return the first N\n// values in the array. The **guard** check allows it to work with `_.map`.\nexport default function first(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[0];\n  return initial(array, array.length - n);\n}\n","import { slice } from './_setup.js';\n\n// Returns everything but the first entry of the `array`. Especially useful on\n// the `arguments` object. Passing an **n** will return the rest N values in the\n// `array`.\nexport default function rest(array, n, guard) {\n  return slice.call(array, n == null || guard ? 1 : n);\n}\n","import rest from './rest.js';\n\n// Get the last element of an array. Passing **n** will return the last N\n// values in the array.\nexport default function last(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[array.length - 1];\n  return rest(array, Math.max(0, array.length - n));\n}\n","import filter from './filter.js';\n\n// Trim out all falsy values from an array.\nexport default function compact(array) {\n  return filter(array, Boolean);\n}\n","import _flatten from './_flatten.js';\n\n// Flatten out an array, either recursively (by default), or up to `depth`.\n// Passing `true` or `false` as `depth` means `1` or `Infinity`, respectively.\nexport default function flatten(array, depth) {\n  return _flatten(array, depth, false);\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport filter from './filter.js';\nimport contains from './contains.js';\n\n// Take the difference between one array and a number of other arrays.\n// Only the elements present in just the first array will remain.\nexport default restArguments(function(array, rest) {\n  rest = flatten(rest, true, true);\n  return filter(array, function(value){\n    return !contains(rest, value);\n  });\n});\n","import restArguments from './restArguments.js';\nimport difference from './difference.js';\n\n// Return a version of the array that does not contain the specified value(s).\nexport default restArguments(function(array, otherArrays) {\n  return difference(array, otherArrays);\n});\n","import isBoolean from './isBoolean.js';\nimport cb from './_cb.js';\nimport getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce a duplicate-free version of the array. If the array has already\n// been sorted, you have the option of using a faster algorithm.\n// The faster algorithm will not work with an iteratee if the iteratee\n// is not a one-to-one function, so providing an iteratee will disable\n// the faster algorithm.\nexport default function uniq(array, isSorted, iteratee, context) {\n  if (!isBoolean(isSorted)) {\n    context = iteratee;\n    iteratee = isSorted;\n    isSorted = false;\n  }\n  if (iteratee != null) iteratee = cb(iteratee, context);\n  var result = [];\n  var seen = [];\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var value = array[i],\n        computed = iteratee ? iteratee(value, i, array) : value;\n    if (isSorted && !iteratee) {\n      if (!i || seen !== computed) result.push(value);\n      seen = computed;\n    } else if (iteratee) {\n      if (!contains(seen, computed)) {\n        seen.push(computed);\n        result.push(value);\n      }\n    } else if (!contains(result, value)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport uniq from './uniq.js';\nimport flatten from './_flatten.js';\n\n// Produce an array that contains the union: each distinct element from all of\n// the passed-in arrays.\nexport default restArguments(function(arrays) {\n  return uniq(flatten(arrays, true, true));\n});\n","import getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce an array that contains every item shared between all the\n// passed-in arrays.\nexport default function intersection(array) {\n  var result = [];\n  var argsLength = arguments.length;\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var item = array[i];\n    if (contains(result, item)) continue;\n    var j;\n    for (j = 1; j < argsLength; j++) {\n      if (!contains(arguments[j], item)) break;\n    }\n    if (j === argsLength) result.push(item);\n  }\n  return result;\n}\n","import max from './max.js';\nimport getLength from './_getLength.js';\nimport pluck from './pluck.js';\n\n// Complement of zip. Unzip accepts an array of arrays and groups\n// each array's elements on shared indices.\nexport default function unzip(array) {\n  var length = (array && max(array, getLength).length) || 0;\n  var result = Array(length);\n\n  for (var index = 0; index < length; index++) {\n    result[index] = pluck(array, index);\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport unzip from './unzip.js';\n\n// Zip together multiple lists into a single array -- elements that share\n// an index go together.\nexport default restArguments(unzip);\n","import getLength  from './_getLength.js';\n\n// Converts lists into objects. Pass either a single array of `[key, value]`\n// pairs, or two parallel arrays of the same length -- one of keys, and one of\n// the corresponding values. Passing by pairs is the reverse of `_.pairs`.\nexport default function object(list, values) {\n  var result = {};\n  for (var i = 0, length = getLength(list); i < length; i++) {\n    if (values) {\n      result[list[i]] = values[i];\n    } else {\n      result[list[i][0]] = list[i][1];\n    }\n  }\n  return result;\n}\n","// Generate an integer Array containing an arithmetic progression. A port of\n// the native Python `range()` function. See\n// [the Python documentation](https://docs.python.org/library/functions.html#range).\nexport default function range(start, stop, step) {\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (!step) {\n    step = stop < start ? -1 : 1;\n  }\n\n  var length = Math.max(Math.ceil((stop - start) / step), 0);\n  var range = Array(length);\n\n  for (var idx = 0; idx < length; idx++, start += step) {\n    range[idx] = start;\n  }\n\n  return range;\n}\n","import { slice } from './_setup.js';\n\n// Chunk a single array into multiple arrays, each containing `count` or fewer\n// items.\nexport default function chunk(array, count) {\n  if (count == null || count < 1) return [];\n  var result = [];\n  var i = 0, length = array.length;\n  while (i < length) {\n    result.push(slice.call(array, i, i += count));\n  }\n  return result;\n}\n","import _ from './underscore.js';\n\n// Helper function to continue chaining intermediate results.\nexport default function chainResult(instance, obj) {\n  return instance._chain ? _(obj).chain() : obj;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport functions from './functions.js';\nimport { push } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add your own custom functions to the Underscore object.\nexport default function mixin(obj) {\n  each(functions(obj), function(name) {\n    var func = _[name] = obj[name];\n    _.prototype[name] = function() {\n      var args = [this._wrapped];\n      push.apply(args, arguments);\n      return chainResult(this, func.apply(_, args));\n    };\n  });\n  return _;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport { ArrayProto } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add all mutator `Array` functions to the wrapper.\neach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) {\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) {\n        delete obj[0];\n      }\n    }\n    return chainResult(this, obj);\n  };\n});\n\n// Add all accessor `Array` functions to the wrapper.\neach(['concat', 'join', 'slice'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) obj = method.apply(obj, arguments);\n    return chainResult(this, obj);\n  };\n});\n\nexport default _;\n","// Default Export\n// ==============\n// In this module, we mix our bundled exports into the `_` object and export\n// the result. This is analogous to setting `module.exports = _` in CommonJS.\n// Hence, this module is also the entry point of our UMD bundle and the package\n// entry point for CommonJS and AMD users. In other words, this is (the source\n// of) the module you are interfacing with when you do any of the following:\n//\n// ```js\n// // CommonJS\n// var _ = require('underscore');\n//\n// // AMD\n// define(['underscore'], function(_) {...});\n//\n// // UMD in the browser\n// // _ is available as a global variable\n// ```\nimport * as allExports from './index.js';\nimport { mixin } from './index.js';\n\n// Add all of the Underscore functions to the wrapper object.\nvar _ = mixin(allExports);\n// Legacy Node.js API.\n_._ = _;\n// Export the Underscore API.\nexport default _;\n"],"names":["loggers","register","handlers","debug","eventType","call","arguments","ShaderAttribute","constructor","dataColumn","opts","this","source","value","getValue","buffer","getBuffer","accessor","getAccessor","size","constantValue","length","Float32Array","index","elementOffset","i","getStride","stride","bytesPerElement","resolveShaderAttribute","baseAccessor","shaderAttributeOptions","offset","log","vertexOffset","EMPTY","FULL","Infinity","Attribute","gl","id","logicalType","type","doublePrecision","defaultValue","Number","isFinite","Array","fill","bufferType","isIndexed","defaultType","glType","Float64Array","Uint16Array","Uint32Array","Uint8ClampedArray","Int8Array","Int16Array","Int32Array","Error","glArrayFromType","shaderAttributes","fp64","BYTES_PER_ELEMENT","settings","state","externalBuffer","bufferAccessor","allocatedValue","constant","_buffer","setData","target","byteOffset","delete","getShaderAttributes","options","isBuffer64Bit","doubleShaderAttributeDefs","resolvedOptions","high","low","resolveDoublePrecisionShaderAttributes","concat","shaderAttributeDef","ArrayBuffer","isView","_normalizeValue","normalized","_normalizeConstant","_areValuesEqual","_checkExternalBuffer","requiredBufferSize","byteLength","reallocate","setAccessor","subData","data","updateSubBuffer","startOffset","endOffset","startIndex","endIndex","subarray","allocate","numInstances","copy","oldValue","ArrayType","illegalArrayType","name","map","x","out","start","value1","value2","super","transition","noAlloc","update","transform","startIndices","Object","assign","_autoUpdater","lastExternalBuffer","binaryValue","binaryAccessor","needsUpdate","needsRedraw","updateRanges","seal","_validateAttributeUpdaters","layout","clearChangedFlags","getUpdateTriggers","supportsTransition","Boolean","getTransitionSetting","layerSettings","userSettings","isArray","find","a","setNeedsUpdate","reason","dataRange","setNeedsRedraw","startRow","endRow","rangeList","range","newRangeList","len","insertPosition","range0","push","Math","min","max","splice","clearNeedsUpdate","updateBuffer","props","context","updated","getVertexOffset","_checkAttributeArray","setConstantValue","undefined","setExternalBuffer","setBinaryValue","assert","needsNormalize","nested","row","shaderAttributeDefs","shaderAttributeName","attribute","accessorFunc","iterable","objectInfo","object","objectValue","numVertices","item","set","count","limit","valid","TRANSITION_TYPES","interpolation","timeline","attributeInTransition","currentStartIndices","currentLength","attributeType","vs","defines","ATTRIBUTE_TYPE","varyings","getTransform","bufferOpts","usage","buffers","inProgress","transitionSettings","duration","cancel","padBufferOpts","fromLength","fromStartIndices","getData","enter","elementCount","floor","sourceBuffers","aFrom","aTo","feedbackBuffers","vCurrent","time","easing","t","run","uniforms","pop","spring","texture","Uint8Array","format","border","mipmaps","dataFormat","width","height","getTexture","framebuffer","attachments","getFramebuffer","fs","aPrev","aCur","vNext","discard","clearRenderTarget","stiffness","damping","parameters","depthTest","blend","viewport","blendFunc","blendEquation","end","AttributeTransitionManager","transitions","isSupported","finalize","attributeName","_removeTransition","attributes","_updateAttribute","hasAttribute","getAttributes","animatedAttributes","isNew","TransitionType","TRACE_INVALIDATE","AttributeManager","stats","updateTriggers","accessors","userData","attributeTransitionManager","getNeedsRedraw","clearRedrawFlags","redraw","add","updaters","_add","addInstanced","instanced","remove","attributeNameArray","invalidate","triggerName","invalidatedAttributes","_invalidateTrigger","invalidateAll","get","timeStart","accessorName","timeEnd","updateTransition","transitionUpdated","getChangedAttributes","changedAttributes","excludeAttributes","getAccessors","extraProps","_createAttribute","_mapUpdateTriggersToAttributes","elements","divisor","triggers","forEach","padArrayChunk","sourceLength","targetLength","datum","j","DEFAULT_TRANSITION_SETTINGS","normalizeTransitionSettings","getSourceBufferAttribute","getAttributeTypeFromSize","cycleBuffers","shift","getAttributeBufferLength","multiplier","padBuffer","precisionMultiplier","toStartIndices","hasStartIndices","toLength","isConstant","toData","srcByteOffset","getter","chunk","getMissingData","sourceStartIndices","targetStartIndices","sourceIndex","targetIndex","getChunkData","n","nextSourceIndex","nextTargetIndex","padArray","COORDINATE_SYSTEM","DEFAULT","LNGLAT","METER_OFFSETS","LNGLAT_OFFSETS","CARTESIAN","defineProperty","PROJECTION_MODE","WEB_MERCATOR","GLOBE","WEB_MERCATOR_AUTO_OFFSET","IDENTITY","EVENTS","click","handler","panstart","panmove","panend","CPUInterpolationTransition","_value","_onUpdate","fromValue","toValue","EPSILON","updateSpringElement","prev","cur","dest","velocity","distance","distanceSquare","d","sqrt","abs","CPUSpringTransition","_currValue","_prevValue","nextValue","next","updateSpring","delta","UniformTransitionManager","Map","active","key","has","propsInTransition","clear","keys","lngLatZToWorldPosition","lngLatZ","offsetMode","p","projectPosition","longitude","latitude","z","distanceScales","getDistanceScales","unitsPerMeter","getWorldPosition","position","modelMatrix","coordinateSystem","coordinateOrigin","y","vec4","isGeospatial","DEFAULT_TEXTURE_PARAMETERS","internalTextures","TYPE_DEFINITIONS","boolean","validate","propType","equal","number","color","optional","arrayEqual","valueType","getTypeOf","array","compare","function","component","dataTransform","image","layer","specialTextureParameters","compressed","textureParameters","createTexture","release","array1","array2","parsePropType","propDef","normalizePropDefinition","COMPONENT","ASYNC_ORIGINAL","ASYNC_RESOLVED","ASYNC_DEFAULTS","createProps","propsPrototype","getPropsPrototype","propsInstance","create","freeze","componentClass","getOwnProperty","prototype","parentClass","getPrototypeOf","parentDefaultProps","componentPropDefs","propDefs","propTypes","defaultProps","deprecatedProps","propName","entries","deprecatedFor","parsePropTypes","parentProps","componentName","getComponentName","defineProperties","writable","createPropsPrototype","_propTypes","defaultValues","descriptors","async","getDescriptorForAsyncProp","addAsyncPropsToPropPrototype","_deprecatedProps","enumerable","newValue","nameStr","newPropName","join","addDeprecatedPropsToPropPrototype","_mergedDefaultProps","createPropsPrototypeAndTypes","Promise","internalState","hasAsyncProp","getAsyncProp","prop","hasOwnProperty","EMPTY_PROPS","ComponentState","asyncProps","onAsyncPropUpdated","oldProps","oldAsyncProps","asyncProp","resolvedValue","getOldProps","resetOldProps","freezeAsyncOldProps","isAsyncPropLoading","pendingLoadCount","resolvedLoadCount","reloadAsyncProp","_watchPromise","resolve","setAsyncProps","resolvedValues","originalValues","_createAsyncPropData","_updateAsyncProp","_didAsyncInputValueChange","_this$layer","fetch","url","_resolveAsyncIterable","_setPropValue","lastValue","_postProcessValue","_setAsyncPropValue","loadCount","promise","then","_this$layer2","onDataLoad","catch","error","_this$layer3","raiseError","_this$layer4","counter","Component","apply","lifecycle","parent","clone","newProps","_initState","LayerState","attributeManager","model","subLayers","usesPickingColorCache","MAX_PICKING_COLOR_CACHE_SIZE","EMPTY_ARRAY","areViewportsEqual","memoize","oldViewport","equals","pickingColorCache","dataComparator","_dataDiff","__diff","onError","loaders","loadOptions","signal","resourceManager","_loadOptions","getLoadOptions","inResourceManager","contains","resourceId","load","persistent","subscribe","onChange","consumerId","requestId","visible","pickable","opacity","onHover","onClick","onDragStart","onDrag","onDragEnd","wrapLongitude","positionFormat","colorFormat","extensions","getPolygonOffset","layerIndex","highlightedObjectIndex","autoHighlight","highlightColor","Layer","toString","className","layerName","message","_this$props$onError","_this$props","_this$context","_this$context$onError","setState","updateObject","setChangeFlags","stateChanged","layerManager","String","_getNeedsRedraw","hasUniformTransition","shouldUpdateState","_getUpdateParams","uniformTransitions","isLoaded","isPickable","getModels","models","getAttributeManager","getCurrentLayer","project","xyz","worldPosition","pixelProjectionMatrix","unproject","xy","params","fromCoordinateSystem","fromCoordinateOrigin","normalizedParams","normalizeParameters","geospatialOrigin","shaderCoordinateOrigin","positionCommonSpace","vec3","use64bitPositions","info","pickingEvent","nullPickingColor","encodePickingColor","decodePickingColor","i1","i2","i3","initializeState","getShaders","shaders","extension","changeFlags","propsOrDataChanged","updateState","dataChanged","neededPickingBuffer","needPickingBuffer","pickingColors","instancePickingColors","pickingColorsAttribute","finalizeState","unsubscribe","draw","getPickingInfo","mode","activateViewport","viewportChanged","isComposite","_update","invalidateAttribute","diffReason","updateAttributes","_setModelAttributes","_updateAttributes","getNumInstances","getStartIndices","ignoreUnknownAttributes","_updateAttributeTransition","_updateUniformTransition","calculateInstancePickingColors","cacheSize","maxCount","newCacheSize","pickingColor","setAttributes","disablePickingIndex","objectIndex","_disablePickingIndex","colors","restorePickingColors","container","isPlainObject","_initialize","propsChanged","extensionsChanged","_updateState","stateNeedsUpdate","currentProps","currentViewport","updateParams","oldModels","modelChanged","_updateModules","_renderLayers","setInstanceCount","clearChangeFlags","_finalize","drawLayer","moduleParameters","pow","setModuleParameters","offsets","polygonOffset","getChangeFlags","flags","flagChanged","updateTriggersChanged","somethingChanged","diffProps","transitionsChanged","validateProps","updateModuleSettings","updateAutoHighlight","_updateAutoHighlight","pickingModuleParameters","pickingSelectedColor","picked","pickingHighlightColor","forceUpdate","isInteger","attributeManagerNeedsRedraw","_getAttributeManager","_onAsyncPropUpdated","bind","_transferState","oldLayer","LIFECYCLE","NO_STATE","MATCHED","INITIALIZED","AWAITING_GC","AWAITING_FINALIZATION","FINALIZED","PROP_SYMBOLS","Symbol","for","getPropTypes","propsChangedReason","compareProps","ignoreProps","dataChangedReason","diffDataProps","updateTriggersChangedReason","diffUpdateTrigger","all","triggerChanged","diffUpdateTriggers","diffExtensions","diffTransitions","result","comparePropValues","changed","newProp","oldProp","oldExtensions","newTriggers","oldTriggers","LayerType","DEFAULT_MODULE_OPTIONS","pickingActive","pickingAttribute","inject","order","injection","getUniforms","selectedColor","slice","picking_uSelectedColorValid","picking_uSelectedColor","from","picking_uHighlightColor","picking_uActive","picking_uAttribute","COORDINATE_SYSTEM_GLSL_CONSTANTS","PROJECTION_MODE_GLSL_CONSTANTS","INITIAL_MODULE_OPTIONS","dependencies","ZERO_VECTOR","VECTOR_TO_POINT_MATRIX","IDENTITY_MATRIX","DEFAULT_PIXELS_PER_UNIT2","DEFAULT_COORDINATE_ORIGIN","getMemoizedViewportUniforms","devicePixelRatio","projectionCenter","viewProjectionMatrix","cameraPosCommon","viewMatrixUncentered","projectionMatrix","viewMatrix","cameraPosition","getOffsetOrigin","calculateMatrixAndOffset","viewportSize","focalDistance","project_uCoordinateSystem","project_uProjectionMode","projectionMode","project_uCoordinateOrigin","project_uCenter","project_uViewportSize","project_uDevicePixelRatio","project_uFocalDistance","project_uCommonUnitsPerMeter","project_uCommonUnitsPerWorldUnit","project_uCommonUnitsPerWorldUnit2","project_uScale","scale","project_uViewProjectionMatrix","project_uCameraPosition","distanceScalesAtOrigin","unitsPerMeter2","unitsPerDegree","unitsPerDegree2","fround","center","unprojectPosition","getUniformsFromViewport","autoWrapLongitude","project_uWrapLongitude","project_uModelMatrix","noop","DEFAULT_SETTINGS","onStart","onUpdate","onInterrupt","onEnd","Transition","_inProgress","_handle","removeChannel","addChannel","delay","getTime","isFinished","condition","flatten","filter","flattenArray","fillArray","total","copied","copyWithin","placeholderArray","createIterable","iterator","isAsyncIterable","asyncIterator","getAccessorFromBuffer","typedArray","elementStride","vertexCount","_","createMat4","getCameraPosition","viewMatrixInverse","getFrustumPlanes","planes","left","getFrustumPlane","right","bottom","top","near","far","scratchVector","b","c","L","normal","fp64LowPart","scratchArray","toDoublePrecisionArray","isEqual","compute","cachedResult","cachedArgs","args","mergeShaders","modules","some","module","findIndex","mergedInjection","_pool","overAlloc","poolSize","setProps","padding","initialize","Type","newSize","maxSize","newArray","_allocate","_release","sizeToAllocate","ceil","pool","DEGREES_TO_RADIANS","PI","DEFAULT_DISTANCE_SCALES","metersPerUnit","Viewport","displayName","_frustumPlanes","_initViewMatrix","_initProjectionMatrix","_initPixelMatrices","projectFlat","unprojectFlat","metersPerPixel","zoom","topLeft","coord","y2","targetZ","targetZWorld","pixelUnprojectionMatrix","X","Y","Z","getBounds","unprojectOption","topRight","bottomLeft","bottomRight","highPrecision","containsPixel","panByPosition","coords","pixel","getCameraDirection","cameraDirection","getCameraUp","cameraUp","_createProjectionMatrix","orthographic","fovyRadians","aspect","fovy","perspective","log2","meterOffset","transformVector","_getCenterInWorld","multiplyRight","translate","negate","commonPosition","vpm","viewportMatrix","WebMercatorViewport","pitch","bearing","nearZMultiplier","farZMultiplier","repeat","worldOffset","altitude","fov","multiplyLeft","_subViewports","subViewports","bounds","minOffset","maxOffset","offsetViewport","addMetersToLngLat","fromLocation","toLocation","newCenter","corners","fitBounds","channelHandles","animationHandles","Timeline","channels","animations","playing","lastEngineTime","POSITIVE_INFINITY","rate","handle","channel","_setChannelTime","animationHandle","animation","detachAnimation","setTime","values","animationData","play","pause","reset","attachAnimation","channelHandle","engineTime","offsetTime","Resource","_loadCount","_subscribers","Set","consumer","inUse","_error","reject","_content","_loader","_data","loader","subscriber","ResourceManager","protocol","_context","_resources","_consumers","_pruneRequest","startsWith","res","request","resource","prune","resources","replace","_track","setTimeout","_prune","consumers","DEFAULT_MODULES","SHADER_HOOKS","createProgramManager","programManager","shaderModule","addDefaultModule","shaderHook","addShaderHook","INITIAL_CONTEXT","deck","shaderCache","pickingFBO","mousePosition","LayerManager","lastRenderedLayers","layers","_nextLayers","_needsRedraw","_needsUpdate","_debug","_finalizeLayer","layerNeedsRedraw","getLayers","layerIds","layerId","indexOf","setLayers","newLayers","_updateLayers","updateLayers","_handleError","stage","oldLayers","oldLayerMap","generatedLayers","_updateSublayersRecursively","_finalizeOldLayers","newLayer","sublayers","_transferLayerState","_updateLayer","_initializeLayer","getSubLayers","err","deepEqual","aValue","bValue","ViewManager","views","viewState","controllers","_viewports","_viewportMap","_isUpdating","_eventManager","eventManager","_eventCallbacks","onViewStateChange","onInteractionStateChange","updateViewStates","viewId","controller","getViewports","rect","getViews","viewMap","view","getView","viewOrViewId","getViewState","getViewStateId","filterViewState","getViewport","viewports","_setViews","_setViewState","_setSize","_rebuildViewports","_diffViews","_onViewStateChange","event","_createController","Controller","onStateChange","makeViewport","_getViewport","_updateController","controllerProps","oldControllers","invalidateControllers","oldController","unshift","_buildViewportMap","newViews","oldViews","PERCENT_OR_PIXELS_REGEX","parsePosition","relative","match","parseFloat","getPosition","extent","round","View","viewportInstance","_parseDimensions","viewportDimensions","getDimensions","newViewState","_x","_y","_width","_height","_getControllerProps","defaultOpts","ViewportType","DEFAULT_PROPS","transitionEasing","transitionInterruption","onTransitionStart","onTransitionInterrupt","onTransitionEnd","TransitionManager","ControllerState","_onTransitionUpdate","getViewportInTransition","processViewStateChange","nextProps","transitionTriggered","_shouldIgnoreViewportChange","_isTransitionEnabled","interruption","endProps","startProps","_triggerTransition","transitionDuration","transitionInterpolator","_isUpdateDueToCurrentTransition","interpolator","arePropsEqual","startViewstate","endViewStateProps","shortestPathFrom","getDuration","initialProps","initializeProps","_onTransitionEnd","inTransition","callback","isZooming","isPanning","isRotating","interpolateProps","getViewportProps","oldViewState","DEFAULT_REQUIRED_PROPS","LinearInterpolator","extract","required","_propsToCompare","_propsToExtract","_requiredProps","startViewStateProps","_checkRequiredProps","transitionProps","around","startViewport","endViewport","aroundPosition","NO_TRANSITION_PROPS","LINEAR_TRANSITION_PROPS","INERTIA_EASING","EVENT_TYPES","MapState","_viewportProps","_applyConstraints","getState","_state","maxZoom","minZoom","maxPitch","minPitch","startPanLngLat","startZoomLngLat","startRotatePos","startBearing","startPitch","startZoom","normalize","panStart","pos","_getUpdatedState","_unproject","pan","startPos","panEnd","rotateStart","rotate","deltaAngleX","deltaAngleY","newRotation","_calculateNewPitchAndBearing","_getRotationParams","rotateEnd","zoomStart","_calculateNewZoom","zoomedViewport","zoomEnd","zoomIn","speed","_zoomFromCenter","zoomOut","moveLeft","_panFromCenter","moveRight","moveUp","moveDown","rotateLeft","rotateRight","rotateUp","rotateDown","fromProps","deltaScaleX","deltaScaleY","deltaX","deltaY","centerY","startY","MapController","controllerState","controllerStateProps","transitionManager","_onTransition","_setInteractionState","linearTransitionProps","_transition","_events","_interactionState","isDragging","_customEvents","handleEvent","events","customEvents","toggleEvents","eventName","off","eventStartBlocked","_eventStartBlocked","_onPanStart","_onPan","_onPanEnd","_onPinchStart","_onPinch","_onPinchEnd","_onTriplePanStart","_onTriplePan","_onTriplePanEnd","_onDoubleTap","_onWheel","_onKeyDown","getCenter","offsetCenter","isPointInBounds","handled","inside","stopPropagation","isFunctionKeyPressed","srcEvent","metaKey","altKey","ctrlKey","shiftKey","blockEvents","timeout","timer","dragMode","_getTransitionProps","inertia","scrollZoom","dragPan","dragRotate","doubleClickZoom","touchZoom","touchRotate","keyboard","isInteractive","eventNames","enabled","on","updateViewport","newControllerState","interactionState","newStates","alternateMode","rightButton","invertPan","_panMove","_onPanMove","_onPanRotate","_onPanMoveEnd","_onPanRotateEnd","endPos","velocityX","velocityY","preventDefault","smooth","exp","_startPinchRotation","rotation","_lastPinchEvent","velocityZ","deltaTime","endScale","isZoomOut","funcKey","zoomSpeed","moveSpeed","rotateSpeedX","rotateSpeedY","code","MapView","DEFAULT_LIGHT_COLOR","DEFAULT_LIGHT_INTENSITY","idCount","AmbientLight","intensity","DEFAULT_LIGHT_DIRECTION","DirectionalLight","direction","_shadow","toArray","shadow","getProjectedLight","Effect","preRender","getModuleParameters","cleanup","LayersPass","render","_drawLayers","onViewportActive","clearCanvas","pass","drawingBufferWidth","drawingBufferHeight","clearGLCanvas","renderStats","viewportOrDescriptor","drawLayerParams","_getDrawLayerParams","subViewport","_drawLayersInViewport","layerFilter","effects","indexResolver","layerIndexResolver","drawContext","isPicking","renderPass","shouldDrawLayer","_shouldDrawLayer","layerParam","layerRenderIndex","_getModuleParameters","layerParameters","getLayerParameters","glViewport","canvas","clientHeight","dimensions","pixelRatio","getGLViewport","clearOpts","depth","scissorTest","scissor","renderStatus","totalCount","visibleCount","compositeCount","pickableCount","filterSubLayer","overrides","effect","layerIndices","resolvers","resolveLayerIndex","isDrawn","indexOverride","_offset","parentId","resolver","ShadowPass","shadowMap","depthBuffer","fbo","depthRange","clearColor","resize","shadowEnabled","drawToShadowMap","getMemoizedViewportCenterPosition","invert","getMemoizedViewProjectionMatrices","shadowMatrices","projectionMatrices","farZ","screenToCommonSpace","shadowMatrix","positions","corner","ortho","DEFAULT_SHADOW_COLOR","shadowMaps","shadow_uDrawShadowMap","shadow_uUseShadowMap","shadow_uColor","shadowColor","shadow_uLightId","shadowLightId","shadow_uLightCount","projectCenters","viewProjectionMatrices","viewProjectionMatrixCentered","dummyShadowMap","createShadowUniforms","DEFAULT_AMBIENT_LIGHT_PROPS","DEFAULT_DIRECTIONAL_LIGHT_PROPS","LightingEffect","ambientLight","directionalLights","pointLights","shadowPasses","lightSource","_applyDefaultLights","light","_createLightMatrix","_createShadowPasses","lightSources","directionalLight","pointLight","shadowPass","removeDefaultModule","lightMatrices","lookAt","eye","DEFAULT_LIGHTING_EFFECT","EffectManager","_internalEffects","setEffects","getEffects","_createInternalEffects","DrawLayersPass","PICKING_PARAMETERS","PickLayersPass","useAlpha","_drawPickingBuffer","deviceRect","redrawReason","pickZ","depthMask","colorMask","pickParameters","blendColor","DeckRenderer","drawPickingColors","drawLayersPass","pickLayersPass","renderCount","renderBuffers","lastPostProcessEffect","renderLayers","layerPass","_preRender","outputBuffer","_postRender","postRender","_resizeRenderBuffers","inputBuffer","swapBuffer","NO_PICKED_OBJECT","pickedColor","pickedLayer","pickedObjectIndex","getClosestObject","pickedColors","deviceX","deviceY","deviceRadius","minSquareDistanceToCenter","closestPixelIndex","dy","dy2","col","dx","d2","pickedLayerIndex","pickedX","pickedY","getEmptyPickingInfo","pickInfo","getViewportFromCoordinates","v","coordinate","devicePixel","processPickInfo","lastPickedInfo","affectedLayers","lastPickedObjectIndex","lastPickedLayerId","pickedLayerId","lastPickedLayer","baseInfo","infos","getLayerPickingInfo","sourceLayer","DeckPicker","_pickable","depthFBO","pickObject","_pickClosestObject","pickObjects","_pickVisibleObjects","getLastPickedObject","lastPickedViewportId","l","_resizeBuffer","colorBufferFloat","attach","_getPickable","pickableLayers","radius","unproject3D","emptyInfo","devicePixelRange","_getPickingRect","deviceWidth","deviceHeight","_drawAndSample","maxObjects","leftTop","deviceLeft","deviceTop","rightBottom","deviceRight","deviceBottom","pickInfos","uniqueColors","colorKey","getUniqueObjects","uniqueInfos","isMaxObjects","sourceX","sourceY","sourceWidth","sourceHeight","defaultStyle","zIndex","pointerEvents","backgroundColor","display","Tooltip","canvasParent","parentElement","el","document","createElement","style","appendChild","isVisible","setTooltip","displayInfo","innerText","text","innerHTML","html","mimeTypes","testText","firstChar","lastChar","parseTextSync","JSON","parse","version","existingVersion","VERSION","_registerLoggers","imagebitmap","premultiplyAlpha","Query","static","webgl2","hasTimerQuery","supported","_queryPending","_pollingPromise","beginTimeElapsedQuery","begin","beginOcclusionQuery","conservative","beginTransformFeedbackQuery","gl2","beginQuery","endQuery","isResultAvailable","resultAvailable","getQueryParameter","isTimerDisjoint","getParameter","getResult","getTimerMilliseconds","createPoll","poll","requestAnimationFrame","_createHandle","createQuery","_deleteHandle","deleteQuery","cancelAnimationFrame","timerId","window","clearTimeout","isPage","statIdCounter","AnimationLoop","onCreateContext","onAddHTML","onInitialize","onRender","onFinalize","glOptions","createFramebuffer","autoResizeViewport","autoResizeDrawingBuffer","useDevicePixels","useDevicePixelRatio","cpuTime","gpuTime","frameRate","_initialized","_running","_animationFrameId","_nextFramePromise","_resolveNextFrame","_cpuStartTime","stop","_pageLoadPromise","_onMousemove","_onMouseleave","_setDisplay","startPromise","_getPageLoadPromise","_createWebGLContext","_createFramebuffer","_startEventHandling","_initializeCallbackData","_updateCallbackData","_resizeCanvasDrawingBuffer","_resizeViewport","_gpuTimeQuery","animationProps","appContext","_addCallbackData","_startLoop","isContextLost","_beginTimers","_setupFrame","_renderFrame","_clearNeedsRedraw","offScreen","commit","_endTimers","_finalizeCallbackData","attachTimeline","detachTimeline","waitForRender","toDataURL","getHTMLControlValue","element","getElementById","setViewParameters","renderFrame","_requestAnimationFrame","readyState","addEventListener","animationLoop","renderFrameCallback","_resizeFramebuffer","startTime","Date","now","tick","tock","_timeline","_loop","_animationLoop","_mousePosition","_getSizeAndAspect","_offScreen","OffscreenCanvas","_createInfoDiv","wrapperDiv","body","div","background","clientWidth","addTime","e","offsetX","offsetY","pickingRadius","touchAction","eventRecognizerOptions","_framebuffer","_animate","_typedArrayManagerProps","onWebGLInitialized","onResize","onBeforeRender","onAfterRender","onLoad","_onMetrics","getCursor","Deck","viewManager","effectManager","deckRenderer","deckPicker","_pickRequest","_lastPointerDownInfo","interactiveState","isHovering","_onEvent","_onPointerDown","_onPointerMove","initialViewState","_createCanvas","_createAnimationLoop","metrics","fps","setPropsTime","updateAttributesTime","framesRedrawn","pickTime","pickCount","gpuTimePerFrame","cpuTimePerFrame","bufferMemory","textureMemory","renderbufferMemory","gpuMemory","_metricsCounter","destroy","tooltip","removeChild","_setCanvasSize","resolvedProps","_getViews","_getViewState","viewManagerNeedsRedraw","layerManagerNeedsRedraw","effectManagerNeedsRedraw","deckRendererNeedsRedraw","force","incrementCount","_customRender","_pick","pickMultipleObjects","_addResources","_removeResources","resourceIds","method","statKey","_updateCanvasSize","_checkForCanvasSizeChange","newWidth","newHeight","onContextLost","_onContextLost","_setGLContext","_onRenderFrame","leftButton","_pickAndCallback","pickedInfo","getTooltip","_updateCursor","cursor","enable","copyState","polygonOffsetFill","depthFunc","recognizerOptions","pointerdown","pointermove","pointerleave","_onInteractionStateChange","renderOptions","_getFrameStats","_getMetrics","eventOptions","layerHandler","rootHandler","animationLoopStats","lastTiming","getHz","getAverageTime","memoryStats","PropTypes","string","oneOfType","func","arrayOf","instanceOf","bool","useLayoutEffect","useEffect","inheritsFrom","ParentType","wrapInView","node","children","MAP_STYLE","evaluateChildren","childProps","child","componentProps","mapStyle","isReactMap","cloneElement","deckGLViewProps","needsDeckGLViewProps","CANVAS_ONLY_STYLES","mixBlendMode","redrawDeck","thisRef","DeckGL","forwardRef","ref","useRef","current","setVersion","useState","containerRef","canvasRef","jsxProps","useMemo","reactChildren","jsxLayers","jsxViews","reactElement","ElementType","reactProps","createLayer","extractJSXLayers","inRender","handleViewStateChange","viewStateUpdateRequested","handleInteractionStateChange","interactionStateUpdateRequested","deckProps","forwardProps","lastRenderedViewports","createDeckInstance","useImperativeHandle","handles","getRefHandles","currentViewports","ContextProvider","containerStyle","canvasStyle","extractStyles","childrenUnderViews","defaultViewId","viewChildren","viewElement","contextValue","offsetParent","positionChildrenUnderViews","control","isFunction","isObject","isPureObject","isIterable","isResponse","Response","arrayBuffer","json","isBlob","Blob","isBuffer","isReadableStream","ReadableStream","tee","getReader","isReadableDOMStream","read","pipe","isBoolean","readable","isReadableNodeStream","self","g","process","browser","isMobile","orientation","matches","exec","workerURLCache","getLoadableWorkerURLFromSource","workerSource","blob","URL","createObjectURL","getTransferList","recursive","transfers","transfersSet","isTransferable","MessagePort","ImageBitmap","NOOP","WorkerThread","Worker","onMessage","console","worker","_createBrowserWorker","terminate","terminated","isRunning","postMessage","transferList","_getErrorFromErrorEvent","lineno","colno","_loadableURL","workerURL","getLoadableWorkerURL","onmessage","onerror","onmessageerror","WorkerJob","jobName","workerThread","_resolve","_reject","payload","done","WorkerPool","idleQueue","isDestroyed","maxConcurrency","maxMobileConcurrency","reuseWorkers","onDebug","job","jobQueue","_startQueuedJob","_getAvailableWorker","queuedJob","backlog","returnWorkerToQueue","_getMaxConcurrency","toLowerCase","WorkerFarm","_workerFarm","workerPools","workerPool","_getWorkerPoolProps","getWorkerPool","parseWithWorker","parseOnMainThread","workerOptions","workerFile","workerUrl","_workerType","versionTag","getWorkerURL","getWorkerFarm","stringify","startJob","input","warn","toArrayBuffer","TextEncoder","encode","_toArrayBuffer","makeStreamIterator","stream","reader","nextBatchPromise","currentBatchPromise","_streamReadAhead","releaseLock","makeBrowserStreamIterator","makeNodeStreamIterator","ERR_DATA","getArrayBufferOrStringFromData","isArrayBuffer","binary","TextDecoder","decode","getArrayBufferOrStringFromDataSync","response","chunkSize","textEncoder","chunkLength","makeStringIterator","chunkByteLength","sourceArray","makeArrayBufferIterator","makeBlobIterator","arrayBuffers","sources","sourceArrays","source2","reduce","concatenateArrayBuffers","concatenateArrayBuffersAsync","EXT_PATTERN","selectLoaderSync","validHTTPResponse","candidateLoaders","ignoreRegisteredLoaders","normalizeLoaders","testUrl","mimeType","findLoaderByMIMEType","loaderExtension","findLoaderByExtension","findLoaderByUrl","testDataAgainstText","testDataAgainstBinary","findLoaderByInitialBytes","fallbackMimeType","selectLoaderInternal","nothrow","getNoValidLoaderMessage","status","getMagicString","getFirstCharacters","includes","tests","test","arrayBuffer1","arrayBuffer2","compareArrayBuffers","testBinary","dataView","DataView","magic","fromCharCode","getUint8","contextLoaders","getLoadersFromContext","selectLoader","previousContext","resolvedContext","getLoaderContext","coreVersion","validateWorkerVersion","dataType","canParseWithWorker","parseText","parseSync","parseWithLoader","getGlobalLoaderRegistry","loaderRegistry","registerLoaders","normalizedLoader","registeredLoader","getRegisteredLoaders","isLoaderObject","normalizeLoader","_loader2","_loader3","fileAliases","fetchFile","filename","alias","replacement","resolvePath","fetchOptions","probeLog","NullLog","DEFAULT_LOADER_OPTIONS","CDN","_limitMB","batchSize","batchDebounceMs","metadata","transforms","REMOVED_LOADER_OPTIONS","throws","uri","headers","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","getGlobalLoaderState","getGlobalLoaderOptions","globalOptions","normalizeOptions","validateOptionsObject","idOptions","loaderOptions","deprecatedOptions","validateOptions","mergedOptions","baseUri","addUrlOptions","mergeNestedFields","normalizeOptionsInternal","getFetchFunction","defaultOptions","loaderName","prefix","isSubOptions","isBaseUriOption","isWorkerUrlOption","suggestion","findSimilarOption","optionKey","lowerCaseOptionKey","bestSuggestion","lowerCaseKey","DATA_URL_PATTERN","MIME_TYPE_PATTERN","parseMIMEType","mimeString","parseMIMETypeFromURL","QUERY_STRING_PATTERN","getResourceUrlAndType","stripQueryString","getResourceContentLength","makeResponse","contentLength","initialDataUrl","blobSlice","FileReader","onload","_event$target","readAsDataURL","bytes","btoa","arrayBufferToBase64","getInitialDataUrl","checkResponse","ok","contentType","statusText","getResponseError","globals","global","global_","isBrowser","_parseImageNode","IMAGE_SUPPORTED","Image","IMAGE_BITMAP_SUPPORTED","NODE_IMAGE_SUPPORTED","DATA_SUPPORTED","getImageType","getImageTypeOrNull","SVG_DATA_URL_PATTERN","SVG_URL_PATTERN","isSVG","getBlob","parseToImage","blobOrDataUrl","xmlText","getBlobOrSVGDataUrl","webkitURL","objectUrl","src","loadToImage","revokeObjectURL","EMPTY_OBJECT","imagebitmapOptionsSupported","BIG_ENDIAN","LITTLE_ENDIAN","getBinaryImageMetadata","binaryData","toDataView","getUint32","getPngMetadata","getUint16","tableMarkers","sofMarkers","getJpegMarkers","marker","getJpegMetadata","getGifMetadata","getBmpMetadata","ImageLoader","imageType","getDefaultImageType","isImageTypeSupported","getLoadableImageType","imagebitmapOptions","isEmptyObject","createImageBitmap","safeCreateImageBitmap","parseToImageBitmap","parseToNodeImage","getContext","drawImage","getImageData","DRAW_MODE","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","Geometry","drawMode","indices","_setAttributes","_calculateVertexCount","getVertexCount","_print","VertexArrayObject","constantAttributeZero","mockUserAgent","userAgent","navigator","isMSIE","isTrident","getBrowser","luma","defaultVertexArray","isDefaultArray","MAX_ATTRIBUTES","location","_setConstantFloatArray","_setConstantIntArray","_setConstantUintArray","program","bufferValue","getMaxAttributes","setElementBuffer","elementBuffer","bindBuffer","setBuffer","integer","vertexAttribIPointer","vertexAttribPointer","enableVertexAttribArray","vertexAttribDivisor","disableVertexAttribArray","getConstantBuffer","_normalizeConstantArrayValue","updateNeeded","_compareConstantArrayValues","getScratchArray","arrayValue","v1","v2","vertexAttrib1fv","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttribI1iv","vertexAttribI2iv","vertexAttribI3iv","vertexAttribI4iv","vertexAttribI1uiv","vertexAttribI2uiv","vertexAttribI3uiv","vertexAttribI4uiv","createVertexArray","deleteVertexArray","_bindHandle","bindVertexArray","_getParameter","pname","getVertexAttribOffset","getVertexAttrib","MULTI_LOCATION_ATTRIBUTE_REGEXP","DEPRECATIONS_V6","VertexArray","configuration","elementsAccessor","unused","drawParams","vertexArrayObject","bindOnUse","clearDrawParams","getDrawParams","_updateDrawParams","locationOrName","_setAttribute","appAccessor","_resolveLocationAndAccessor","setConstant","unbindBuffers","bindBuffers","bindForDraw","instanceCount","_setConstantAttributes","valueAccessor","INVALID_RESULT","_getAttributeIndex","accessInfo","_getAttributeInfo","currentAccessor","getAttributeInfo","multiLocation","locationOffset","getAttributeLocation","_setConstantAttributeZero","_setConstantAttribute","isInstanced","indexCount","_updateDrawParamsForLocation","getElementCount","indexType","indexOffset","setElements","formatValue","maxElts","terminator","formatArrayValue","toFixed","toPrecision","getDebugTableRow","vertexArray","header","verts","getDebugData","getGLSLDeclaration","typeAndName","getDebugTableForUniforms","undefinedOnly","PROJECT_MODULE_UNIFORM_REGEXP","uniformLocations","_uniformSetters","table","uniformNames","sort","uniformName","addUniformToTable","unusedCount","unusedTable","uniform","isDefined","isUniformDefined","attributeInfo","GLTF_TO_LUMA_ATTRIBUTE_MAP","POSITION","NORMAL","COLOR_0","TEXCOORD_0","TEXCOORD_1","TEXCOORD_2","mapAttributeName","attributeMap","inferAttributeAccessor","category","DRAW_PARAMS","Model","lastLogTime","animated","_programManagerState","_managedProgram","bufferMode","transpileToGLSL100","programProps","_programDirty","_attributes","_checkProgram","setUniforms","getModuleUniforms","moduleSettings","geometryBuffers","_setModelProps","geometry","_deleteGeometryBuffers","getDrawMode","getInstanceCount","getProgram","setProgram","setDrawMode","setVertexCount","setGeometry","remappedName","getBuffersFromGeometry","normalizedAttributes","transformFeedback","logPriority","_logDrawCallStart","vertexArrayInstanced","didDraw","_logDrawCallEnd","unbindModels","_setFeedbackBuffers","_feedbackBuffers","stateHash","_setAnimationProps","setBuffers","logLevel","logDrawTimeout","collapsed","attributeTable","ELEMENT_ARRAY_BUFFER","attributeLocation","rowHeader","getDebugTableForVertexArray","uniformTable","missingTable","missingCount","configTable","config","attributeInfos","glslDeclaration","varyingInfo","varyingInfos","getDebugTableForProgramConfiguration","ShaderModule","deprecations","vertexShader","fragmentShader","_parseDeprecationDefinitions","injections","hook","normalizeInjections","getModuleSource","moduleSource","toUpperCase","_defaultGetUniforms","getDefines","checkDeprecations","shaderSource","def","regex","deprecated","old","new","removed","RegExp","private","resolveModules","moduleMap","moduleDepth","getDependencyGraph","level","getShaderDependencies","instantiateModules","seen","WEBGL_FEATURES","GLSL_FRAG_DATA","GLSL_FRAG_DEPTH","GLSL_DERIVATIVES","GLSL_TEXTURE_LOD","FEATURES","compiledGlslExtensions","canCompileGLGSExtension","cap","feature","isOldIE","extensionName","behavior","shader","createShader","compileShader","canCompile","getShaderParameter","deleteShader","hasFeatures","features","every","WebGL2RenderingContext","_version","isWebGL2","getExtension","getFeature","testVariable","qualifier","ES300_REPLACEMENTS","ES300_VERTEX_REPLACEMENTS","ES300_FRAGMENT_REPLACEMENTS","ES100_REPLACEMENTS","ES100_VERTEX_REPLACEMENTS","ES100_FRAGMENT_REPLACEMENTS","ES100_FRAGMENT_OUTPUT_NAME","ES300_FRAGMENT_OUTPUT_REGEX","REGEX_START_OF_MAIN","convertShader","replacements","pattern","INJECT_SHADER_DECLARATIONS","SHADER_TYPE","assembleShader","hookFunctions","prologue","isVertex","sourceLines","split","glslVersion","versionLine","coreSource","allDefines","assembledSource","getShaderName","getShaderType","debugInfo","vendor","UNMASKED_VENDOR_WEBGL","renderer","UNMASKED_RENDERER_WEBGL","gpuVendor","identifyGPUVendor","shadingLanguageVersion","getContextInfo","getPlatformShaderDefines","isFragment","versionDefines","getVersionDefines","sourceText","define","getApplicationDefines","hookFunctionMap","trim","signature","normalizeHookFunctions","hookInjections","declInjections","mainInjections","hash","injectionType","hookName","hookFunction","footer","getHookFunctions","targetGLSLVersion","outputMatch","outputName","convertFragmentShaderTo300","convertFragmentShaderTo100","transpileShader","assembleGetUniforms","moduleUniforms","ProgramManager","defaultProgramManager","_programCache","_getUniforms","_registeredModules","_hookFunctions","_defaultModules","_hashes","_hashCounter","_useCounts","m","moduleName","_getModuleList","vsHash","_getHash","fsHash","moduleHashes","varyingHashes","defineKeys","injectKeys","defineHashes","injectHashes","assembled","assembleShaders","appModules","FS_GLES","FS300","getQualifierDetails","line","qualifiers","words","definition","getPassthroughFS","inputType","output","outputValue","variable","convertToVec4","BufferTransform","currentIndex","feedbackMap","bindings","setupResources","binding","_setupTransformFeedback","updateModelProps","getDrawOptions","swap","_getNextIndex","_setupBuffers","varyingName","bufferOrParams","_getFeedbackBuffers","sourceName","feedbackName","bufferName","bufferOrRef","sourceBuffer","_createNewBuffer","_updateBindings","_updateBinding","_swapBuffers","nextIndex","srcName","dstName","getShaderVersion","parseInt","SIZE_UNIFORM_PREFIX","VS_POS_VARIABLE","SRC_TEX_PARAMETER_OVERRIDES","TextureTransform","_swapTexture","targetTextureVarying","targetTextureType","samplerTextureMap","updatedModelProps","_processVertexShader","sourceTextures","targetTexture","hasSourceTextures","hasTargetTexture","transform_elementID","elementIDBuffer","sampler","textureName","_setSourceTextureParameters","sizeUniforms","sourceTextureMap","getSizeUniforms","_setupTextures","getTargetTexture","packed","pixels","channelCount","typeToChannelCount","packedPixels","packCount","ownTexture","_targetTextureVarying","_createTargetTexture","textureOrReference","refTexture","_targetRefTexName","_createNewTexture","_sourceTextures","_targetTexture","_updateElementIDBuffer","elementIds","_swapTextures","resizeAttachments","setParameters","pixelStore","sourceCount","updatedVs","finalInject","vsLines","updateVsLines","lines","textureMap","attributeData","getAttributeDefinition","updatedLine","samplerName","sizeName","uniformDeclerations","getSamplerDeclerations","typeToChannelSuffix","sampleInstruction","processAttributeDefinition","varying","qualaiferDetails","getVaryingType","updateForTextures","combinedInject","_fs","Transform","bufferTransform","textureTransform","updatedOpts","_updateDrawOptions","swapped","resourceTransforms","resourceTransform","_buildResourceTransforms","_updateModelProps","updatedProps","canCreateBufferTransform","canCreateTextureTransform","isWebGL","WebGLRenderingContext","getWebGL2Context","assertWebGLContext","assertWebGL2Context","glErrorShadow","WebGLVertexArrayObjectOES","ext","isAlive","hasBeenBound","elementArrayBuffer","attribs","maxVertexAttribs","attrib","VertexAttrib","maxAttrib","cached","recache","OESVertexArrayObject","f","getError","wrapGLError","original","VERTEX_ARRAY_BINDING_OES","currentVertexArrayObject","defaultVertexArrayObject","vao","currentArrayBuffer","indx","instrumentExtension","reset_","vertexArrayObjects","ii","bindVertexArrayOES","createVertexArrayOES","arrayObject","deleteVertexArrayOES","isVertexArrayOES","opt_msg","msg","oldVAO","newVAO","currentBinding","oldAttrib","bufferChanged","OES_element_index","WEBGL_draw_buffers","WEBGL_debug_renderer_info","getWebGL2ValueOrZero","WEBGL_PARAMETERS","GPU_DISJOINT_EXT","MAX_TEXTURE_MAX_ANISOTROPY_EXT","MAX_COLOR_ATTACHMENTS_WEBGL","MAX_DRAW_BUFFERS_WEBGL","ANGLE_instanced_arrays","WEBGL2_CONTEXT_POLYFILLS","meta","suffix","isVertexArray","drawElementsInstanced","drawArraysInstanced","drawBuffers","getQuery","getQueryObject","WEBGL2_CONTEXT_OVERRIDES","readBuffer","originalFunc","attachment","getExtensionData","getProgramParameter","getInternalformatParameter","getTexParameter","TEXTURE_MAX_ANISOTROPY_EXT","originalGetParameter","hint","polyfillExtension","target2","defaults","extKey","polyfill","polyfillContext","polyfilled","original_getSupportedExtensions","getSupportedExtensions","list","original_getExtension","__OESVertexArrayObject","polyfillVertexArrayObject","EXTENSIONS","initializeExtensions","polyfills","getOwnPropertyNames","installPolyfills","installOverrides","GL_PARAMETER_DEFAULTS","disable","pixelStorei","GL_PARAMETER_SETTERS","cullFace","clearDepth","bindFramebuffer","frontFace","lineWidth","clearStencil","stencilMaskSeparate","blendEquationSeparate","blendFuncSeparate","cull","dither","derivativeHint","mipmapHint","sampleCoverage","stencilTest","stencilMask","mask","backMask","stencilFunc","backFunc","backRef","stencilFuncSeparate","stencilOp","sfail","dpfail","dppass","backSfail","backDpfail","backDppass","stencilOpSeparate","glEnum","GL_COMPOSITE_PARAMETER_SETTERS","stencilFuncFront","stencilFuncBack","stencilOpFront","stencilOpBack","GL_HOOKED_SETTERS","capability","r","modeRGB","modeAlpha","dst","srcRGB","dstRGB","srcAlpha","dstAlpha","s","zNear","zFar","face","factor","units","fail","zfail","zpass","isEnabled","GL_PARAMETER_GETTERS","isObjectEmpty","deepArrayEqual","isArrayX","isArrayY","installGetterOverride","functionName","originalGetterFunc","configurable","installSetterSpy","setter","originalSetterFunc","valueChanged","_updateCache","GLState","stateStack","parameterKeys","getParameters","oldValues","trackContextState","originalUseProgram","useProgram","installProgramSpy","popContextState","compositeSetters","glConstant","compositeSetter","resetParameters","withParameters","nocatch","pushContextState","cssToDeviceRatio","canvasSizeInfo","cssToDevicePixels","cssPixel","yInvert","ratio","scaleX","scaleY","xHigh","yHigh","scalePixels","CONTEXT_DEFAULTS","webgl1","throwOnError","manageState","createGLContext","targetCanvas","insertBefore","firstChild","getCanvas","errorMessage","onCreateError","statusMessage","removeEventListener","onContextRestored","createBrowserContext","instrumentGLContext","webGL","vendorMasked","rendererMasked","getContextDebugInfo","driver","logInfo","_instrumented","getVersion","resizeGLContext","cachedSize","clampedPixelRatio","canvasWidth","canvasHeight","setDevicePixelRatio","windowRatio","getDevicePixelRatio","VERTEX_SHADER","FRAGMENT_SHADER","MODULE_INJECTORS","DECLARATION_INJECT_MARKER","REGEX_END_OF_MAIN","fragments","injectShader","injectStandardStubs","fragmentData","fragmentString","combineInjects","injects","DEFAULT_ACCESSOR_VALUES","PROP_CHECKS","Accessor","_assign","getBytesPerElement","BYTES_PER_VERTEX","getBytesPerVertex","DEPRECATED_PROPS","PROP_CHECKS_INITIALIZE","removedProps","replacedProps","PROP_CHECKS_SET_PROPS","Buffer","stubRemovedMethods","debugData","_setData","_setByteLength","bytesUsed","srcOffset","bufferSubData","_inferType","copyData","readOffset","writeOffset","copyBufferSubData","dstData","dstOffset","clamped","sourceAvailableElementCount","_getAvailableElementCount","dstElementOffset","dstAvailableElementCount","dstElementCount","copyElementCount","getBufferSubData","bindBufferRange","bindBufferBase","unbind","invalidateDebugData","_trackDeallocatedMemory","_getTarget","bufferData","_trackAllocatedMemory","sourceElementOffset","createBuffer","deleteBuffer","getBufferParameter","setByteLength","updateAccessor","ERR_ARGUMENTS","stencil","clearFlags","clearBuffer","drawBuffer","clearBufferiv","clearBufferuiv","clearBufferfv","clearBufferfi","glFormatToComponents","readPixelsToArray","sourceFormat","sourceAttachment","sourceType","deleteFramebuffer","pixelArray","getPixelArray","prevHandle","readPixels","readPixelsToBuffer","targetByteOffset","components","byteCount","glTypeToBytes","copyToDataUrl","targetMaxHeight","MAX_SAFE_INTEGER","imageData","createImageData","putImageData","copyToTexture","targetMipmaplevel","targetInternalFormat","targetX","targetY","isSubCopy","copyTexSubImage2D","copyTexSubImage3D","copyTexImage2D","ERR_MULTIPLE_RENDERTARGETS","Framebuffer","colorBufferHalfFloat","defaultFramebuffer","MAX_COLOR_ATTACHMENTS","MAX_DRAW_BUFFERS","ownResources","check","_createDefaultAttachments","clearAttachments","checkStatus","_setReadBuffer","_setDrawBuffers","attachmentPoint","newAttachments","descriptor","_attachRenderbuffer","renderbuffer","_attachTexture","_unattach","getStatus","STATUS","_getFrameBufferStatus","checkFramebufferStatus","copyToImage","blit","invalidateFramebuffer","getAttachmentParameter","_getAttachmentParameterFallback","getFramebufferAttachmentParameter","getAttachmentParameters","ATTACHMENT_PARAMETERS","attachmentName","show","open","defaultAttachments","oldAttachment","framebufferRenderbuffer","framebufferTexture2D","bindTexture","framebufferTextureLayer","mapIndexToCubeMapFace","drawBuffersWEBGL","caps","WEBGL2","EXT_sRGB","UNIFORM_SETTERS","getArraySetter","toFloatArray","setVectorUniform","toIntArray","setMatrixUniform","getSamplerSetter","toUIntArray","FLOAT_ARRAY","INT_ARRAY","UINT_ARRAY","toTypedArray","uniformLength","getUniformSetter","parseUniformName","checkUniformValue","checkLength","checkUniformArray","copyUniform","uniform1i","uniformSetter","cacheLength","defaultName","formatErrors","errors","segments","column","substring","padLeft","digits","Shader","shaderType","getTypeName","shaderName","_compile","getName","getSource","getShaderSource","getTranslatedSource","getTranslatedShaderSource","infoLog","getShaderInfoLog","warnings","errLog","errorStrings","shaderDescription","getShaderTypeName","errorString","isNaN","delim","maxDigits","lineNumber","addLineNumbers","parseGLSLCompilerError","_getOptsFromHandle","VertexShader","FragmentShader","ProgramConfiguration","attributeInfosByName","attributeInfosByLocation","varyingInfosByName","_readAttributesFromProgram","_readVaryingsFromProgram","getAttributeAccessor","getVaryingInfo","getVaryingIndex","getVaryingAccessor","getActiveAttrib","getAttribLocation","_addAttribute","getTransformFeedbackVarying","_addVarying","compositeType","_inferProperties","GL_SEPARATE_ATTRIBS","V6_DEPRECATED_METHODS","Program","_isCached","_setId","_textureUniforms","transformFeedbackVaryings","_compileAndLink","_readUniformLocationsFromLinkedProgram","samplers","fb","_areTexturesRenderable","primitiveMode","_bindTextures","drawRangeElements","drawElements","drawArrays","uniformMap","checkUniformValues","textureUpdate","textureIndex","_textureIndexCounter","texturesRenderable","loaded","createProgram","deleteProgram","_getOptionsFromHandle","shaderHandles","getAttachedShaders","shaderHandle","programName","_getName","attachShader","linkProgram","getProgramInfoLog","validateProgram","_uniformCount","getActiveUniform","getUniformLocation","getActiveUniforms","uniformIndices","getUniformBlockIndex","blockName","getActiveUniformBlockParameter","blockIndex","uniformBlockBinding","blockBinding","EXT_FLOAT_WEBGL2","bpp","Renderbuffer","formats","gl1","isFormatSupported","samples","bindRenderbuffer","renderbufferStorageMultisample","renderbufferStorage","createRenderbuffer","deleteRenderbuffer","_syncHandle","getRenderbufferParameter","ERR_RESOURCE_METHOD_UNDEFINED","_bound","_addStats","deleteChildren","_removeStats","funcOrHandle","parameter","PARAMETERS","isWebgl2","webgl1Default","webgl2Default","setParameter","_setParameter","methodNames","decrementCount","addCount","subtractCount","Texture2D","crossOrigin","TEXTURE_FORMATS","types","DATA_FORMAT_CHANNELS","TYPE_SIZES","isLinearFilteringSupported","NPOT_MIN_FILTERS","WebGLBuffer","Texture","linearFiltering","textureUnit","resolvedImageData","isVideo","HTMLVideoElement","HAVE_METADATA","_video","recreate","_deduceParameters","activeTexture","_isNPOT","_updateForNPOT","setImageData","generateMipmap","video","lastTime","HAVE_CURRENT_DATA","currentTime","setSubImageData","_getDataType","texImage2D","levelIndex","levelData","compressedTexImage2D","channelSize","ndarray","shape","compressedTexSubImage2D","texSubImage2D","copyFramebuffer","getActiveUnit","textureFormat","_deduceImageSize","ImageData","HTMLImageElement","naturalWidth","naturalHeight","HTMLCanvasElement","videoWidth","videoHeight","deleteTexture","param","_getNPOTParam","texParameterf","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TransformFeedback","_unbindBuffers","_getVaryingIndex","byteSize","_getBufferParams","_bindBuffer","bindTransformFeedback","_bindBuffers","beginTransformFeedback","endTransformFeedback","_getVaryingInfo","bufferIndex","createTransformFeedback","deleteTransformFeedback","hasFeature","isFeatureSupported","getFeatures","featureDefinition","queryFeature","VERTEX_ARRAY_OBJECT","TIMER_QUERY","INSTANCED_RENDERING","MULTIPLE_RENDER_TARGETS","ELEMENT_INDEX_UINT32","BLEND_EQUATION_MINMAX","FLOAT_BLEND","COLOR_ENCODING_SRGB","TEXTURE_DEPTH","TEXTURE_FLOAT","TEXTURE_HALF_FLOAT","TEXTURE_FILTER_LINEAR_FLOAT","TEXTURE_FILTER_LINEAR_HALF_FLOAT","TEXTURE_FILTER_ANISOTROPIC","COLOR_ATTACHMENT_RGBA32F","COLOR_ATTACHMENT_FLOAT","COLOR_ATTACHMENT_HALF_FLOAT","testTexture","testFb","lumaStats","nodeIO","checkProps","propChecks","replacementProp","instance","upgradeMessage","methodName","uidCounters","uid","isPowerOfTwo","obj","isEmpty","GL_FLOAT","GL_INT","GL_UNSIGNED_INT","COMPOSITE_GL_TYPES","getPrimitiveDrawMode","decomposeCompositeGLType","compositeGLType","typeAndSize","getCompositeGLType","compType","compComponents","getKeyValue","getKey","FACES","TextureCube","setCubeMapImageData","subImage","mipmapLevel","_subImage","imageDataMap","resolvedFaces","facePixels","lodLevel","setImageDataForFace","Texture3D","unpackFlipY","texImage3D","cloneTextureFrom","TextureType","toFramebuffer","getGLTypeFromTypedArray","arrayOrType","getTypedArrayFromGLType","flipRows","bytesPerPixel","temp","bytesPerRow","topOffset","bottomOffset","newData","MathArray","cls","ExtendableBuiltin","Reflect","construct","setPrototypeOf","__proto__","_extendableBuiltin","ELEMENTS","arrayOrObject","fromObject","fromArray","to","toObject","toTarget","toFloat32Array","formatString","printTypes","exactEquals","lerp","ai","vector","clamp","minVector","maxVector","vectors","subtract","multiply","sub","setScalar","addScalar","subScalar","multiplyScalar","scalar","divideScalar","clampScalar","multiplyByScalar","Matrix","RANK","getElementIndex","getElement","setElement","getColumn","columnIndex","firstIndex","setColumn","columnVector","ZERO","INDICES","COL0ROW0","COL0ROW1","COL0ROW2","COL0ROW3","COL1ROW0","COL1ROW1","COL1ROW2","COL1ROW3","COL2ROW0","COL2ROW1","COL2ROW2","COL2ROW3","COL3ROW0","COL3ROW1","COL3ROW2","COL3ROW3","constants","Matrix4","identity","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","setRowMajor","toRowMajor","fromQuaternion","q","mat4","frustum","_computeInfinitePerspectiveOffCenter","column0Row0","column1Row1","column2Row0","column2Row1","column3Row2","up","halfY","tan","determinant","getScale","getTranslation","getRotation","scaleResult","inverseScale0","inverseScale1","inverseScale2","getRotationMatrix3","transpose","rotateX","radians","rotateY","rotateZ","rotateXYZ","rx","ry","rz","rotateAxis","axis","vec","transformAsPoint","vec2","transformAsVector","makeRotationX","makeTranslation","transformPoint","transformDirection","Vector","lengthSquared","magnitude","magnitudeSquared","mathArray","distanceSquared","dist","dot","product","divide","lengthSq","distanceTo","distanceToSquared","getComponent","setComponent","addVectors","subVectors","multiplyVectors","addScaledVector","ORIGIN","Vector3","angle","cross","origin","matrix4","transformByMatrix3","matrix3","transformByMatrix2","matrix2","transformByQuaternion","quaternion","precision","epsilon","oldEpsilon","printDegrees","printRowMajor","vec2_transformMat4AsVector","w","vec3_transformMat4AsVector","vec3_transformMat2","checkNumber","checkVector","callerName","validateVector","getHiResTimestamp","timestamp","performance","hrtime","timeParts","Stat","sampleSize","setSampleSize","_count","_samples","_checkSampling","_time","_startTime","_timerPending","getSampleAverageCount","lastSampleCount","getSampleAverageTime","lastSampleTime","getSampleHz","getAverageCount","Stats","_initializeStats","_getOrCreate","fn","getTable","stat","average","hz","_interopRequireDefault","exports","_globals","_isBrowser","default","_isElectron","navigator_","chrome","safari","mozInnerScreenX","_typeof2","self_","window_","document_","process_","console_","_typeof","_getBrowser","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","__esModule","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","desc","isBrowserMainThread","versions","electron","realUserAgent","isElectron","__VERSION__","LocalStorage","defaultSettings","storage","setItem","removeItem","getStorage","_loadConfiguration","getConfiguration","setConfiguration","updateConfiguration","serialized","serializedConfiguration","getItem","formatImage","maxWidth","imageUrl","COLOR","BLACK","RED","GREEN","YELLOW","BLUE","MAGENTA","CYAN","WHITE","BRIGHT_BLACK","BRIGHT_RED","BRIGHT_GREEN","BRIGHT_YELLOW","BRIGHT_BLUE","BRIGHT_MAGENTA","BRIGHT_CYAN","BRIGHT_WHITE","getColor","originalConsole","ONCE","once","getTableHeader","title","Log","_startTs","_deltaTs","LOG_THROTTLE_TIMEOUT","_storage","timeStamp","predefined","proto","propNames","autobind","newLevel","setLevel","getLevel","getTotal","getDelta","priority","newPriority","getPriority","_getLogFunction","oldUsage","newUsage","probe","columns","tag","_shouldLog","img","nodeName","logImageInBrowser","asciify","fit","logImageInNode","setting","group","normalizeArguments","groupCollapsed","groupEnd","withGroup","trace","normalizeLogLevel","padLength","leftPad","ms","formatted","formatTime","decorateMessage","resolvedLevel","messageType","xs","Object_keys","defineProp","Context","Script","runInContext","TypeError","iframe","win","contentWindow","wEval","eval","wExecScript","execScript","winKeys","runInThisContext","runInNewContext","ctx","createContext","isContext","createScript","root","Function","ArrayProto","ObjProto","SymbolProto","supportsArrayBuffer","supportsDataView","nativeIsArray","nativeKeys","nativeCreate","nativeIsView","_isNaN","_isFinite","hasEnumBug","propertyIsEnumerable","nonEnumerableProps","MAX_ARRAY_INDEX","restArguments","rest","isNull","isUndefined","isElement","nodeType","tagTester","nodelist","childNodes","hasStringTagBug","isIE11","isDataView","getInt8","isArguments","isSymbol","isNumber","createSizePropertyCheck","getSizeProperty","collection","sizeProperty","shallowProperty","typedArrayPattern","collectNonEnumProps","emulatedSet","nonEnumIdx","isString","isMatch","attrs","_keys","_wrapped","toBufferView","bufferSource","valueOf","toJSON","tagDataView","eq","aStack","bStack","deepEq","areArrays","aCtor","bCtor","allKeys","ie11fingerprint","methods","weakMapMethods","forEachName","commonInit","mapTail","mapMethods","setMethods","pairs","functions","names","createAssigner","keysFunc","baseCreate","Ctor","extendOwn","extend","tap","interceptor","toPath","path","deepGet","matcher","property","optimizeCb","argCount","accumulator","baseIteratee","iteratee","cb","mapObject","results","currentKey","propertyOf","times","accum","random","createEscaper","escaper","testRegexp","replaceRegexp","templateSettings","evaluate","interpolate","escape","noMatch","escapes","escapeRegExp","escapeChar","bareIdentifier","template","oldSettings","argument","fallback","idCounter","uniqueId","chain","_chain","executeBound","sourceFunc","boundFunc","callingContext","partial","boundArgs","placeholder","bound","callArgs","strict","idx","hasher","address","wait","throttle","previous","later","leading","throttled","_now","remaining","trailing","debounce","immediate","passed","debounced","_args","wrap","wrapper","predicate","compose","after","before","memo","findKey","createPredicateIndexFinder","dir","sortedIndex","mid","createIndexFinder","predicateFind","findLastIndex","findWhere","each","createReduce","reducer","initial","fromIndex","guard","contextPath","pluck","where","computed","lastComputed","reStrSymbol","sample","last","rand","shuffle","sortBy","criteria","partition","keyInObj","pick","first","compact","otherArrays","difference","uniq","isSorted","arrays","intersection","argsLength","unzip","step","chainResult","mixin"],"sourceRoot":""}