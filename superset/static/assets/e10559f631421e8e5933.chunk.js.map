{"version":3,"file":"e10559f631421e8e5933.chunk.js","mappings":"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","sources":["webpack://superset/./plugins/legacy-plugin-chart-rose/src/Rose.js","webpack://superset/./plugins/legacy-plugin-chart-rose/src/ReactRose.jsx","webpack://superset/./packages/superset-ui-core/src/chart/components/reactify.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint no-use-before-define: [\"error\", { \"functions\": false }] */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable react/sort-prop-types */\nimport d3 from 'd3';\nimport PropTypes from 'prop-types';\nimport nv from 'nvd3-fork';\nimport {\n  getTimeFormatter,\n  getNumberFormatter,\n  CategoricalColorNamespace,\n} from '@superset-ui/core';\n\nconst propTypes = {\n  // Data is an object hashed by numeric value, perhaps timestamp\n  data: PropTypes.objectOf(\n    PropTypes.arrayOf(\n      PropTypes.shape({\n        key: PropTypes.arrayOf(PropTypes.string),\n        name: PropTypes.arrayOf(PropTypes.string),\n        time: PropTypes.number,\n        value: PropTypes.number,\n      }),\n    ),\n  ),\n  width: PropTypes.number,\n  height: PropTypes.number,\n  dateTimeFormat: PropTypes.string,\n  numberFormat: PropTypes.string,\n  useRichTooltip: PropTypes.bool,\n  useAreaProportions: PropTypes.bool,\n};\n\nfunction copyArc(d) {\n  return {\n    startAngle: d.startAngle,\n    endAngle: d.endAngle,\n    innerRadius: d.innerRadius,\n    outerRadius: d.outerRadius,\n  };\n}\n\nfunction sortValues(a, b) {\n  if (a.value === b.value) {\n    return a.name > b.name ? 1 : -1;\n  }\n\n  return b.value - a.value;\n}\n\nfunction Rose(element, props) {\n  const {\n    data,\n    width,\n    height,\n    colorScheme,\n    dateTimeFormat,\n    numberFormat,\n    useRichTooltip,\n    useAreaProportions,\n    sliceId,\n  } = props;\n\n  const div = d3.select(element);\n  div.classed('superset-legacy-chart-rose', true);\n\n  const datum = data;\n  const times = Object.keys(datum)\n    .map(t => parseInt(t, 10))\n    .sort((a, b) => a - b);\n  const numGrains = times.length;\n  const numGroups = datum[times[0]].length;\n  const format = getNumberFormatter(numberFormat);\n  const timeFormat = getTimeFormatter(dateTimeFormat);\n  const colorFn = CategoricalColorNamespace.getScale(colorScheme);\n\n  d3.select('.nvtooltip').remove();\n  div.selectAll('*').remove();\n\n  const arc = d3.svg.arc();\n  const legend = nv.models.legend();\n  const tooltip = nv.models.tooltip();\n  const state = { disabled: datum[times[0]].map(() => false) };\n\n  const svg = div.append('svg').attr('width', width).attr('height', height);\n\n  const g = svg.append('g').attr('class', 'rose').append('g');\n\n  const legendWrap = g.append('g').attr('class', 'legendWrap');\n\n  function legendData(adatum) {\n    return adatum[times[0]].map((v, i) => ({\n      disabled: state.disabled[i],\n      key: v.name,\n    }));\n  }\n\n  function tooltipData(d, i, adatum) {\n    const timeIndex = Math.floor(d.arcId / numGroups);\n    const series = useRichTooltip\n      ? adatum[times[timeIndex]]\n          .filter(v => !state.disabled[v.id % numGroups])\n          .map(v => ({\n            key: v.name,\n            value: v.value,\n            color: colorFn(v.name, sliceId),\n            highlight: v.id === d.arcId,\n          }))\n      : [{ key: d.name, value: d.val, color: colorFn(d.name, sliceId) }];\n\n    return {\n      key: 'Date',\n      value: d.time,\n      series,\n    };\n  }\n\n  legend.width(width).color(d => colorFn(d.key, sliceId));\n  legendWrap.datum(legendData(datum)).call(legend);\n\n  tooltip.headerFormatter(timeFormat).valueFormatter(format);\n  tooltip.classes('tooltip');\n\n  // Compute max radius, which the largest value will occupy\n  const roseHeight = height - legend.height();\n  const margin = { top: legend.height() };\n  const edgeMargin = 35; // space between outermost radius and slice edge\n  const maxRadius = Math.min(width, roseHeight) / 2 - edgeMargin;\n  const labelThreshold = 0.05;\n  const gro = 8; // mouseover radius growth in pixels\n  const mini = 0.075;\n\n  const centerTranslate = `translate(${width / 2},${\n    roseHeight / 2 + margin.top\n  })`;\n  const roseWrap = g\n    .append('g')\n    .attr('transform', centerTranslate)\n    .attr('class', 'roseWrap');\n\n  const labelsWrap = g\n    .append('g')\n    .attr('transform', centerTranslate)\n    .attr('class', 'labelsWrap');\n\n  const groupLabelsWrap = g\n    .append('g')\n    .attr('transform', centerTranslate)\n    .attr('class', 'groupLabelsWrap');\n\n  // Compute inner and outer angles for each data point\n  function computeArcStates(adatum) {\n    // Find the max sum of values across all time\n    let maxSum = 0;\n    let grain = 0;\n    const sums = [];\n    for (const t of times) {\n      const sum = datum[t].reduce(\n        (a, v, i) => a + (state.disabled[i] ? 0 : v.value),\n        0,\n      );\n      maxSum = sum > maxSum ? sum : maxSum;\n      sums[grain] = sum;\n      grain += 1;\n    }\n\n    // Compute angle occupied by each time grain\n    const dtheta = (Math.PI * 2) / numGrains;\n    const angles = [];\n    for (let i = 0; i <= numGrains; i += 1) {\n      angles.push(dtheta * i - Math.PI / 2);\n    }\n\n    // Compute proportion\n    const P = maxRadius / maxSum;\n    const Q = P * maxRadius;\n    const computeOuterRadius = (value, innerRadius) =>\n      useAreaProportions\n        ? Math.sqrt(Q * value + innerRadius * innerRadius)\n        : P * value + innerRadius;\n\n    const arcSt = {\n      data: [],\n      extend: {},\n      push: {},\n      pieStart: {},\n      pie: {},\n      pieOver: {},\n      mini: {},\n      labels: [],\n      groupLabels: [],\n    };\n    let arcId = 0;\n    for (let i = 0; i < numGrains; i += 1) {\n      const t = times[i];\n      const startAngle = angles[i];\n      const endAngle = angles[i + 1];\n      const G = (2 * Math.PI) / sums[i];\n      let innerRadius = 0;\n      let outerRadius;\n      let pieStartAngle = 0;\n      let pieEndAngle;\n      for (const v of adatum[t]) {\n        const val = state.disabled[arcId % numGroups] ? 0 : v.value;\n        const { name, time } = v;\n        v.id = arcId;\n        outerRadius = computeOuterRadius(val, innerRadius);\n        arcSt.data.push({\n          startAngle,\n          endAngle,\n          innerRadius,\n          outerRadius,\n          name,\n          arcId,\n          val,\n          time,\n        });\n        arcSt.extend[arcId] = {\n          startAngle,\n          endAngle,\n          innerRadius,\n          name,\n          outerRadius: outerRadius + gro,\n        };\n        arcSt.push[arcId] = {\n          startAngle,\n          endAngle,\n          innerRadius: innerRadius + gro,\n          outerRadius: outerRadius + gro,\n        };\n        arcSt.pieStart[arcId] = {\n          startAngle,\n          endAngle,\n          innerRadius: mini * maxRadius,\n          outerRadius: maxRadius,\n        };\n        arcSt.mini[arcId] = {\n          startAngle,\n          endAngle,\n          innerRadius: innerRadius * mini,\n          outerRadius: outerRadius * mini,\n        };\n        arcId += 1;\n        innerRadius = outerRadius;\n      }\n      const labelArc = { ...arcSt.data[i * numGroups] };\n      labelArc.outerRadius = maxRadius + 20;\n      labelArc.innerRadius = maxRadius + 15;\n      arcSt.labels.push(labelArc);\n      for (const v of adatum[t].concat().sort(sortValues)) {\n        const val = state.disabled[v.id % numGroups] ? 0 : v.value;\n        pieEndAngle = G * val + pieStartAngle;\n        arcSt.pie[v.id] = {\n          startAngle: pieStartAngle,\n          endAngle: pieEndAngle,\n          innerRadius: maxRadius * mini,\n          outerRadius: maxRadius,\n          percent: v.value / sums[i],\n        };\n        arcSt.pieOver[v.id] = {\n          startAngle: pieStartAngle,\n          endAngle: pieEndAngle,\n          innerRadius: maxRadius * mini,\n          outerRadius: maxRadius + gro,\n        };\n        pieStartAngle = pieEndAngle;\n      }\n    }\n    arcSt.groupLabels = arcSt.data.slice(0, numGroups);\n\n    return arcSt;\n  }\n\n  let arcSt = computeArcStates(datum);\n\n  function tween(target, resFunc) {\n    return function doTween(d) {\n      const interpolate = d3.interpolate(copyArc(d), copyArc(target));\n\n      return t => resFunc(Object.assign(d, interpolate(t)));\n    };\n  }\n\n  function arcTween(target) {\n    return tween(target, d => arc(d));\n  }\n\n  function translateTween(target) {\n    return tween(target, d => `translate(${arc.centroid(d)})`);\n  }\n\n  // Grab the ID range of segments stand between\n  // this segment and the edge of the circle\n  const segmentsToEdgeCache = {};\n  function getSegmentsToEdge(arcId) {\n    if (segmentsToEdgeCache[arcId]) {\n      return segmentsToEdgeCache[arcId];\n    }\n    const timeIndex = Math.floor(arcId / numGroups);\n    segmentsToEdgeCache[arcId] = [arcId + 1, numGroups * (timeIndex + 1) - 1];\n\n    return segmentsToEdgeCache[arcId];\n  }\n\n  // Get the IDs of all segments in a timeIndex\n  const segmentsInTimeCache = {};\n  function getSegmentsInTime(arcId) {\n    if (segmentsInTimeCache[arcId]) {\n      return segmentsInTimeCache[arcId];\n    }\n    const timeIndex = Math.floor(arcId / numGroups);\n    segmentsInTimeCache[arcId] = [\n      timeIndex * numGroups,\n      (timeIndex + 1) * numGroups - 1,\n    ];\n\n    return segmentsInTimeCache[arcId];\n  }\n\n  let clickId = -1;\n  let inTransition = false;\n  const ae = roseWrap\n    .selectAll('g')\n    .data(JSON.parse(JSON.stringify(arcSt.data))) // deep copy data state\n    .enter()\n    .append('g')\n    .attr('class', 'segment')\n    .classed('clickable', true)\n    .on('mouseover', mouseover)\n    .on('mouseout', mouseout)\n    .on('mousemove', mousemove)\n    .on('click', click);\n\n  const labels = labelsWrap\n    .selectAll('g')\n    .data(JSON.parse(JSON.stringify(arcSt.labels)))\n    .enter()\n    .append('g')\n    .attr('class', 'roseLabel')\n    .attr('transform', d => `translate(${arc.centroid(d)})`);\n\n  labels\n    .append('text')\n    .style('text-anchor', 'middle')\n    .style('fill', '#000')\n    .text(d => timeFormat(d.time));\n\n  const groupLabels = groupLabelsWrap\n    .selectAll('g')\n    .data(JSON.parse(JSON.stringify(arcSt.groupLabels)))\n    .enter()\n    .append('g');\n\n  groupLabels\n    .style('opacity', 0)\n    .attr('class', 'roseGroupLabels')\n    .append('text')\n    .style('text-anchor', 'middle')\n    .style('fill', '#000')\n    .text(d => d.name);\n\n  const arcs = ae\n    .append('path')\n    .attr('class', 'arc')\n    .attr('fill', d => colorFn(d.name, sliceId))\n    .attr('d', arc);\n\n  function mousemove() {\n    tooltip();\n  }\n\n  function mouseover(b, i) {\n    tooltip.data(tooltipData(b, i, datum)).hidden(false);\n    const $this = d3.select(this);\n    $this.classed('hover', true);\n    if (clickId < 0 && !inTransition) {\n      $this\n        .select('path')\n        .interrupt()\n        .transition()\n        .duration(180)\n        .attrTween('d', arcTween(arcSt.extend[i]));\n      const edge = getSegmentsToEdge(i);\n      arcs\n        .filter(d => edge[0] <= d.arcId && d.arcId <= edge[1])\n        .interrupt()\n        .transition()\n        .duration(180)\n        .attrTween('d', d => arcTween(arcSt.push[d.arcId])(d));\n    } else if (!inTransition) {\n      const segments = getSegmentsInTime(clickId);\n      if (segments[0] <= b.arcId && b.arcId <= segments[1]) {\n        $this\n          .select('path')\n          .interrupt()\n          .transition()\n          .duration(180)\n          .attrTween('d', arcTween(arcSt.pieOver[i]));\n      }\n    }\n  }\n\n  function mouseout(b, i) {\n    tooltip.hidden(true);\n    const $this = d3.select(this);\n    $this.classed('hover', false);\n    if (clickId < 0 && !inTransition) {\n      $this\n        .select('path')\n        .interrupt()\n        .transition()\n        .duration(180)\n        .attrTween('d', arcTween(arcSt.data[i]));\n      const edge = getSegmentsToEdge(i);\n      arcs\n        .filter(d => edge[0] <= d.arcId && d.arcId <= edge[1])\n        .interrupt()\n        .transition()\n        .duration(180)\n        .attrTween('d', d => arcTween(arcSt.data[d.arcId])(d));\n    } else if (!inTransition) {\n      const segments = getSegmentsInTime(clickId);\n      if (segments[0] <= b.arcId && b.arcId <= segments[1]) {\n        $this\n          .select('path')\n          .interrupt()\n          .transition()\n          .duration(180)\n          .attrTween('d', arcTween(arcSt.pie[i]));\n      }\n    }\n  }\n\n  function click(b, i) {\n    if (inTransition) {\n      return;\n    }\n    const delay = d3.event.altKey ? 3750 : 375;\n    const segments = getSegmentsInTime(i);\n    if (clickId < 0) {\n      inTransition = true;\n      clickId = i;\n      labels\n        .interrupt()\n        .transition()\n        .duration(delay)\n        .attrTween('transform', d =>\n          translateTween({\n            outerRadius: 0,\n            innerRadius: 0,\n            startAngle: d.startAngle,\n            endAngle: d.endAngle,\n          })(d),\n        )\n        .style('opacity', 0);\n      groupLabels\n        .attr(\n          'transform',\n          `translate(${arc.centroid({\n            outerRadius: maxRadius + 20,\n            innerRadius: maxRadius + 15,\n            startAngle: arcSt.data[i].startAngle,\n            endAngle: arcSt.data[i].endAngle,\n          })})`,\n        )\n        .interrupt()\n        .transition()\n        .delay(delay)\n        .duration(delay)\n        .attrTween('transform', d =>\n          translateTween({\n            outerRadius: maxRadius + 20,\n            innerRadius: maxRadius + 15,\n            startAngle: arcSt.pie[segments[0] + d.arcId].startAngle,\n            endAngle: arcSt.pie[segments[0] + d.arcId].endAngle,\n          })(d),\n        )\n        .style('opacity', d =>\n          state.disabled[d.arcId] ||\n          arcSt.pie[segments[0] + d.arcId].percent < labelThreshold\n            ? 0\n            : 1,\n        );\n      ae.classed(\n        'clickable',\n        d => segments[0] > d.arcId || d.arcId > segments[1],\n      );\n      arcs\n        .filter(d => segments[0] <= d.arcId && d.arcId <= segments[1])\n        .interrupt()\n        .transition()\n        .duration(delay)\n        .attrTween('d', d => arcTween(arcSt.pieStart[d.arcId])(d))\n        .transition()\n        .duration(delay)\n        .attrTween('d', d => arcTween(arcSt.pie[d.arcId])(d))\n        .each('end', () => {\n          inTransition = false;\n        });\n      arcs\n        .filter(d => segments[0] > d.arcId || d.arcId > segments[1])\n        .interrupt()\n        .transition()\n        .duration(delay)\n        .attrTween('d', d => arcTween(arcSt.mini[d.arcId])(d));\n    } else if (clickId < segments[0] || segments[1] < clickId) {\n      inTransition = true;\n      const clickSegments = getSegmentsInTime(clickId);\n      labels\n        .interrupt()\n        .transition()\n        .delay(delay)\n        .duration(delay)\n        .attrTween('transform', d =>\n          translateTween(arcSt.labels[d.arcId / numGroups])(d),\n        )\n        .style('opacity', 1);\n      groupLabels\n        .interrupt()\n        .transition()\n        .duration(delay)\n        .attrTween(\n          'transform',\n          translateTween({\n            outerRadius: maxRadius + 20,\n            innerRadius: maxRadius + 15,\n            startAngle: arcSt.data[clickId].startAngle,\n            endAngle: arcSt.data[clickId].endAngle,\n          }),\n        )\n        .style('opacity', 0);\n      ae.classed('clickable', true);\n      arcs\n        .filter(d => clickSegments[0] <= d.arcId && d.arcId <= clickSegments[1])\n        .interrupt()\n        .transition()\n        .duration(delay)\n        .attrTween('d', d => arcTween(arcSt.pieStart[d.arcId])(d))\n        .transition()\n        .duration(delay)\n        .attrTween('d', d => arcTween(arcSt.data[d.arcId])(d))\n        .each('end', () => {\n          clickId = -1;\n          inTransition = false;\n        });\n      arcs\n        .filter(d => clickSegments[0] > d.arcId || d.arcId > clickSegments[1])\n        .interrupt()\n        .transition()\n        .delay(delay)\n        .duration(delay)\n        .attrTween('d', d => arcTween(arcSt.data[d.arcId])(d));\n    }\n  }\n\n  function updateActive() {\n    const delay = d3.event.altKey ? 3000 : 300;\n    legendWrap.datum(legendData(datum)).call(legend);\n    const nArcSt = computeArcStates(datum);\n    inTransition = true;\n    if (clickId < 0) {\n      arcs\n        .style('opacity', 1)\n        .interrupt()\n        .transition()\n        .duration(delay)\n        .attrTween('d', d => arcTween(nArcSt.data[d.arcId])(d))\n        .each('end', () => {\n          inTransition = false;\n          arcSt = nArcSt;\n        })\n        .transition()\n        .duration(0)\n        .style('opacity', d => (state.disabled[d.arcId % numGroups] ? 0 : 1));\n    } else {\n      const segments = getSegmentsInTime(clickId);\n      arcs\n        .style('opacity', 1)\n        .interrupt()\n        .transition()\n        .duration(delay)\n        .attrTween('d', d =>\n          segments[0] <= d.arcId && d.arcId <= segments[1]\n            ? arcTween(nArcSt.pie[d.arcId])(d)\n            : arcTween(nArcSt.mini[d.arcId])(d),\n        )\n        .each('end', () => {\n          inTransition = false;\n          arcSt = nArcSt;\n        })\n        .transition()\n        .duration(0)\n        .style('opacity', d => (state.disabled[d.arcId % numGroups] ? 0 : 1));\n      groupLabels\n        .interrupt()\n        .transition()\n        .duration(delay)\n        .attrTween('transform', d =>\n          translateTween({\n            outerRadius: maxRadius + 20,\n            innerRadius: maxRadius + 15,\n            startAngle: nArcSt.pie[segments[0] + d.arcId].startAngle,\n            endAngle: nArcSt.pie[segments[0] + d.arcId].endAngle,\n          })(d),\n        )\n        .style('opacity', d =>\n          state.disabled[d.arcId] ||\n          arcSt.pie[segments[0] + d.arcId].percent < labelThreshold\n            ? 0\n            : 1,\n        );\n    }\n  }\n\n  legend.dispatch.on('stateChange', newState => {\n    if (state.disabled !== newState.disabled) {\n      state.disabled = newState.disabled;\n      updateActive();\n    }\n  });\n}\n\nRose.displayName = 'Rose';\nRose.propTypes = propTypes;\n\nexport default Rose;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { reactify, styled, css } from '@superset-ui/core';\nimport { Global } from '@emotion/react';\nimport Component from './Rose';\n\nconst ReactComponent = reactify(Component);\n\nconst Rose = ({ className, ...otherProps }) => (\n  <div className={className}>\n    <Global\n      styles={theme => css`\n        .tooltip {\n          line-height: 1;\n          padding: ${theme.gridUnit * 3}px;\n          background: ${theme.colors.grayscale.dark2};\n          color: ${theme.colors.grayscale.light5};\n          border-radius: 4px;\n          pointer-events: none;\n          z-index: 1000;\n          font-size: ${theme.typography.sizes.s}px;\n        }\n      `}\n    />\n    <ReactComponent {...otherProps} />\n  </div>\n);\n\nexport default styled(Rose)`\n  ${({ theme }) => `\n    .superset-legacy-chart-rose path {\n        transition: fill-opacity 180ms linear;\n        stroke: ${theme.colors.grayscale.light5};\n        stroke-width: 1px;\n        stroke-opacity: 1;\n        fill-opacity: 0.75;\n    }\n\n    .superset-legacy-chart-rose text {\n        font-weight: ${theme.typography.weights.normal};\n        font-size: ${theme.typography.sizes.s}px;\n        font-family: ${theme.typography.families.sansSerif};\n        pointer-events: none;\n    }\n\n    .superset-legacy-chart-rose .clickable path {\n        cursor: pointer;\n    }\n\n    .superset-legacy-chart-rose .hover path {\n        fill-opacity: 1;\n    }\n\n    .nv-legend .nv-series {\n        cursor: pointer;\n    }\n  `}\n`;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\n\n// TODO: Note that id and className can collide between Props and ReactifyProps\n// leading to (likely) unexpected behaviors. We should either require Props to not\n// contain an id/className, or not combine them (via intersection), instead preferring\n// wrapping (composition). As an example:\n// interface MyProps {\n//   id: number;\n// }\n// function myRender(container: HTMLDivElement, props: Readonly<MyProps>): void {\n//   props.id // unusable: id is string & number\n// }\n// new (reactify(myRender))({ id: 5 }); // error: id has to be string & number\n\nexport type ReactifyProps = {\n  id?: string;\n  className?: string;\n};\n\n// TODO: add more React lifecycle callbacks as needed\nexport type LifeCycleCallbacks = {\n  componentWillUnmount?: () => void;\n};\n\nexport interface RenderFuncType<Props> {\n  (container: HTMLDivElement, props: Readonly<Props & ReactifyProps>): void;\n  displayName?: string;\n  defaultProps?: Partial<Props & ReactifyProps>;\n  propTypes?: React.WeakValidationMap<Props & ReactifyProps>;\n}\n\nexport default function reactify<Props extends object>(\n  renderFn: RenderFuncType<Props>,\n  callbacks?: LifeCycleCallbacks,\n): React.ComponentClass<Props & ReactifyProps> {\n  class ReactifiedComponent extends React.Component<Props & ReactifyProps> {\n    container?: HTMLDivElement;\n\n    constructor(props: Props & ReactifyProps) {\n      super(props);\n      this.setContainerRef = this.setContainerRef.bind(this);\n    }\n\n    componentDidMount() {\n      this.execute();\n    }\n\n    componentDidUpdate() {\n      this.execute();\n    }\n\n    componentWillUnmount() {\n      this.container = undefined;\n      if (callbacks?.componentWillUnmount) {\n        callbacks.componentWillUnmount.bind(this)();\n      }\n    }\n\n    setContainerRef(ref: HTMLDivElement) {\n      this.container = ref;\n    }\n\n    execute() {\n      if (this.container) {\n        renderFn(this.container, this.props);\n      }\n    }\n\n    render() {\n      const { id, className } = this.props;\n\n      return <div ref={this.setContainerRef} id={id} className={className} />;\n    }\n  }\n\n  const ReactifiedClass: React.ComponentClass<Props & ReactifyProps> =\n    ReactifiedComponent;\n\n  if (renderFn.displayName) {\n    ReactifiedClass.displayName = renderFn.displayName;\n  }\n  // eslint-disable-next-line react/forbid-foreign-prop-types\n  if (renderFn.propTypes) {\n    ReactifiedClass.propTypes = {\n      ...ReactifiedClass.propTypes,\n      ...renderFn.propTypes,\n    };\n  }\n  if (renderFn.defaultProps) {\n    ReactifiedClass.defaultProps = renderFn.defaultProps;\n  }\n\n  return ReactifiedComponent;\n}\n"],"names":["propTypes","data","PropTypes","key","name","time","value","width","height","dateTimeFormat","numberFormat","useRichTooltip","useAreaProportions","copyArc","d","startAngle","endAngle","innerRadius","outerRadius","sortValues","a","b","Rose","element","props","colorScheme","sliceId","div","d3","classed","datum","times","Object","keys","map","t","parseInt","sort","numGrains","length","numGroups","format","getNumberFormatter","timeFormat","getTimeFormatter","colorFn","CategoricalColorNamespace","getScale","remove","selectAll","arc","legend","nv","tooltip","state","disabled","g","append","attr","legendWrap","legendData","adatum","v","i","color","call","headerFormatter","valueFormatter","classes","roseHeight","margin","maxRadius","Math","min","mini","centerTranslate","roseWrap","labelsWrap","groupLabelsWrap","computeArcStates","maxSum","grain","sums","sum","reduce","dtheta","PI","angles","push","P","Q","computeOuterRadius","sqrt","arcSt","extend","pieStart","pie","pieOver","labels","groupLabels","arcId","G","pieEndAngle","pieStartAngle","val","id","labelArc","concat","percent","slice","tween","target","resFunc","interpolate","assign","arcTween","translateTween","centroid","segmentsToEdgeCache","getSegmentsToEdge","timeIndex","floor","segmentsInTimeCache","getSegmentsInTime","clickId","inTransition","ae","JSON","parse","stringify","enter","on","series","filter","highlight","tooltipData","hidden","$this","this","select","interrupt","transition","duration","attrTween","edge","arcs","segments","delay","style","each","clickSegments","text","dispatch","newState","nArcSt","updateActive","displayName","ReactComponent","reactify","Component","styled","className","otherProps","styles","theme","css","gridUnit","colors","grayscale","dark2","light5","typography","sizes","s","weights","normal","families","sansSerif","renderFn","callbacks","ReactifiedComponent","React","constructor","super","container","setContainerRef","bind","componentDidMount","execute","componentDidUpdate","componentWillUnmount","undefined","ref","render","ReactifiedClass","defaultProps"],"sourceRoot":""}