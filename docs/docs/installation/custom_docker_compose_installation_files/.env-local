# Environment Variables for Superset Docker Compose
# These are common across all of the containers in Superset.
# Note that the variables configured here override those in superset/docker/.env file.

# Core Superset options.
SUPERSET_ENV=production
DEV_MODE=false
FLASK_DEBUG=false

# Secret key. Used for database encryption. Generate with "openssl rand -base64 42".
SUPERSET_SECRET_KEY=""

# Testing.
ENABLE_PLAYWRIGHT=false

# GUnicorn overrides.
# Refer to the gunicorn documentation.
# https://docs.gunicorn.org/en/stable/settings.html#
# These variables are used as Flags at the gunicorn startup.
# https://github.com/apache/superset/blob/master/docker/run-server.sh#L22

# Extend timeout to allow long running queries.
GUNICORN_TIMEOUT=300
GUNICORN_KEEPALIVE=10

# Increase the gunicorn worker amount, can improve performance drastically.
# See: https://docs.gunicorn.org/en/stable/design.html#how-many-workers
SERVER_WORKER_AMOUNT=12
SERVER_THREADS_AMOUNT=24

# Workers should recycle after 1000 requests.
WORKER_MAX_REQUESTS=1000
WORKER_MAX_REQUESTS_JITTER=100

# Celery Workers.
CELERYD_CONCURRENCY=8
