# Apache Superset 项目结构

## 1. 顶层目录结构

```
superset/
├── superset/                  # Python 后端核心代码
├── superset-frontend/         # React 前端代码
├── superset-core/            # 共享核心库 (Python)
├── superset-websocket/        # WebSocket 服务 (TypeScript)
├── superset-embedded-sdk/     # 嵌入式 SDK
├── superset-extensions-cli/   # 扩展管理 CLI
├── docker/                   # Docker 相关配置
├── helm/                     # Kubernetes Helm Charts
├── requirements/              # Python 依赖管理
├── scripts/                  # 辅助脚本
├── tests/                    # 测试文件
├── docs/                     # 官方文档源码
├── config.py                 # Superset 配置文件
├── setup.py                  # Python 包配置
├── docker-compose.yml         # Docker Compose 配置
├── Dockerfile                # Docker 镜像构建
└── pyproject.toml           # Python 项目配置
```

## 2. 后端目录详解 (superset/)

### 2.1 核心模块

```
superset/
├── __init__.py              # 包初始化
├── app.py                   # Flask 应用入口
├── config.py                # 配置文件
├── constants.py             # 常量定义
├── dataframe.py            # DataFrame 工具
├── custom_database_errors.py # 自定义数据库错误
└── utils/                 # 工具函数
    ├── core.py            # 核心工具函数
    ├── database.py        # 数据库工具
    ├── dates.py          # 日期处理
    ├── json.py           # JSON 处理
    └── logging.py       # 日志工具
```

### 2.2 数据模型 (models/)

```
superset/models/
├── __init__.py              # 模型导出
├── core.py                  # 核心模型
│   ├── Database            # 数据库连接模型
│   ├── Slice               # 图表模型
│   ├── Dashboard           # 仪表板模型
│   ├── Log                # 日志模型
│   └── Url               # URL 模型
├── dashboard.py            # 仪表板详细模型
├── slice.py               # 图表详细模型
├── sql_lab.py            # SQL Lab 模型
├── annotations.py         # 注释层模型
├── cache.py              # 缓存模型
├── user_attributes.py    # 用户属性模型
├── embedded_dashboard.py # 嵌入式仪表板模型
├── dynamic_plugins.py    # 动态插件模型
├── helpers.py           # 模型辅助函数
└── sql_types/           # SQL 类型定义
    ├── __init__.py
    ├── mssql_sql_types.py
    └── presto_sql_types.py
```

### 2.3 视图和 API (views/)

```
superset/views/
├── __init__.py              # 视图导出
├── api.py                  # 基础 API 视图
├── users/                  # 用户管理视图
│   ├── api.py             # 用户 API
│   └── ...
├── log/                    # 日志视图
│   └── api.py
├── charts/                 # 图表视图
│   └── api.py            # 图表 API
├── dashboards/             # 仪表板视图
│   ├── api.py            # 仪表板 API
│   ├── permalink/        # 永久链接
│   └── filter_state/    # 过滤器状态
├── explore/               # 探索视图
│   ├── api.py           # 探索 API
│   └── permalink/       # 永久链接
├── databases/            # 数据库视图
│   └── api.py
├── datasets/             # 数据集视图
│   ├── api.py
│   ├── columns/         # 列管理
│   └── metrics/        # 指标管理
├── sqllab/              # SQL Lab 视图
│   ├── api.py
│   └── permalink/
├── reports/              # 报告视图
│   ├── api.py
│   └── logs/
├── security/             # 安全视图
│   └── api.py
├── tags/                # 标签视图
│   └── api.py
├── themes/              # 主题视图
│   └── api.py
└── embedded/            # 嵌入视图
    └── api.py
```

### 2.4 命令模式 (commands/)

```
superset/commands/
├── __init__.py              # 命令导出
├── base.py                 # 基础命令类
├── exceptions.py           # 命令异常
├── utils.py               # 命令工具
├── chart/                # 图表命令
│   ├── create.py        # 创建图表
│   ├── update.py        # 更新图表
│   ├── delete.py        # 删除图表
│   ├── export.py        # 导出图表
│   ├── fave.py         # 收藏图表
│   ├── unfave.py       # 取消收藏
│   └── warm_up_cache.py # 预热缓存
├── dashboard/           # 仪表板命令
│   ├── create.py
│   ├── update.py
│   ├── delete.py
│   ├── copy.py
│   ├── export.py
│   ├── fave.py
│   ├── unfave.py
│   └── permalink/
│       └── create.py
├── explore/             # 探索命令
│   ├── get.py
│   ├── form_data/
│   │   ├── get.py
│   │   └── state.py
│   └── permalink/
│       └── get.py
├── database/            # 数据库命令
│   ├── create.py
│   ├── update.py
│   ├── delete.py
│   ├── export.py
│   ├── validate.py
│   └── uploaders/
│       └── base.py
├── dataset/             # 数据集命令
│   ├── create.py
│   ├── update.py
│   ├── delete.py
│   ├── duplicate.py
│   ├── export.py
│   ├── refresh.py
│   ├── warm_up_cache.py
│   ├── columns/
│   │   └── delete.py
│   ├── metrics/
│   │   └── delete.py
│   └── importers/
│       └── v0.py
├── query/               # 查询命令
│   ├── delete.py
│   └── export.py
├── report/              # 报告命令
│   ├── create.py
│   ├── update.py
│   ├── delete.py
│   ├── execute.py
│   └── alert.py
├── security/            # 安全命令
│   ├── create.py
│   ├── update.py
│   ├── delete.py
│   └── reset.py
├── tag/                # 标签命令
│   ├── create.py
│   ├── update.py
│   ├── delete.py
│   └── export.py
├── theme/               # 主题命令
│   ├── create.py
│   ├── update.py
│   ├── delete.py
│   ├── export.py
│   ├── import_themes.py
│   ├── seed.py
│   └── set_system_theme.py
├── css/                 # CSS 模板命令
│   └── delete.py
├── logs/                # 日志命令
│   └── prune.py
├── export/              # 导出命令
│   ├── assets.py
│   └── models.py
├── importers/           # 导入命令
│   ├── __init__.py
│   ├── exceptions.py
│   └── v1/
│       ├── assets.py
│       ├── examples.py
│       └── utils.py
├── distributed_lock/    # 分布式锁命令
│   ├── create.py
│   ├── delete.py
│   └── get.py
├── temporary_cache/    # 临时缓存命令
│   ├── create.py
│   ├── delete.py
│   ├── entry.py
│   ├── get.py
│   └── update.py
└── streaming_export/    # 流式导出命令
    └── base.py
```

### 2.5 业务逻辑模块

```
superset/
├── charts/                 # 图表模块
│   ├── __init__.py
│   ├── api.py            # 图表 API
│   ├── filters.py        # 图表过滤器
│   ├── schemas.py        # 图表 Schema
│   ├── data/            # 图表数据 API
│   │   └── api.py
│   └── client_processing.py # 客户端处理
├── dashboards/            # 仪表板模块
│   ├── __init__.py
│   ├── api.py
│   ├── filters.py
│   ├── schemas.py
│   ├── permalink/
│   │   ├── api.py
│   │   ├── exceptions.py
│   │   ├── schemas.py
│   │   └── types.py
│   └── filter_state/
│       └── api.py
├── datasets/              # 数据集模块
│   ├── __init__.py
│   ├── api.py
│   ├── filters.py
│   ├── schemas.py
│   ├── columns/
│   │   └── api.py
│   └── metrics/
│       └── api.py
├── databases/             # 数据库模块
│   ├── __init__.py
│   ├── api.py
│   ├── decorators.py
│   ├── filters.py
│   ├── schemas.py
│   ├── types.py
│   ├── utils.py
│   └── ssh_tunnel/
│       ├── __init__.py
│       └── models.py
├── explore/              # 探索模块
│   ├── __init__.py
│   ├── api.py
│   ├── permalink/
│   │   ├── base.py
│   │   └── get.py
│   └── form_data/
│       └── api.py
├── sqllab/               # SQL Lab 模块
│   ├── __init__.py
│   ├── api.py
│   ├── permalink/
│   │   ├── base.py
│   │   └── get.py
│   └── ...
├── reports/              # 报告模块
│   ├── __init__.py
│   ├── api.py
│   ├── schemas.py
│   ├── models.py
│   └── logs/
│       └── api.py
├── security/             # 安全模块
│   ├── __init__.py
│   ├── api.py
│   └── ...
├── tags/                # 标签模块
│   ├── __init__.py
│   ├── api.py
│   ├── models.py
│   └── schemas.py
├── themes/              # 主题模块
│   ├── __init__.py
│   ├── api.py
│   └── ...
├── annotation_layers/    # 注释层模块
│   ├── __init__.py
│   ├── api.py
│   ├── filters.py
│   └── schemas.py
├── async_events/         # 异步事件模块
│   ├── __init__.py
│   ├── api.py
│   └── cache_backend.py
├── cachekeys/            # 缓存键模块
│   ├── __init__.py
│   ├── api.py
│   └── schemas.py
├── available_domains/    # 可用域模块
│   ├── __init__.py
│   └── api.py
├── advanced_data_type/   # 高级数据类型
│   ├── __init__.py
│   ├── api.py
│   ├── schemas.py
│   └── types.py
├── css_templates/        # CSS 模板
│   ├── __init__.py
│   ├── api.py
│   ├── filters.py
│   └── schemas.py
├── datasource/           # 数据源模块
│   └── api.py
├── embedded/             # 嵌入模块
│   └── api.py
├── importexport/         # 导入导出
│   └── api.py
├── queries/              # 查询模块
│   ├── __init__.py
│   └── api.py
├── row_level_security/   # 行级安全
│   └── ...
└── temporary_cache/      # 临时缓存
    └── api.py
```

### 2.6 数据访问层 (daos/)

```
superset/daos/
├── __init__.py              # DAO 导出
├── base.py                 # 基础 DAO
├── chart.py               # 图表 DAO
├── dashboard.py           # 仪表板 DAO
├── database.py           # 数据库 DAO
├── dataset.py            # 数据集 DAO
├── datasource.py        # 数据源 DAO
├── log.py              # 日志 DAO
├── query.py            # 查询 DAO
├── report.py          # 报告 DAO
├── security.py        # 安全 DAO
├── tag.py            # 标签 DAO
├── theme.py          # 主题 DAO
├── user.py           # 用户 DAO
├── annotation_layer.py # 注释层 DAO
├── cache.py          # 缓存 DAO
├── key_value.py      # 键值 DAO
└── exceptions.py     # DAO 异常
```

### 2.7 通用模块 (common/)

```
superset/common/
├── __init__.py
├── chart_data.py           # 图表数据处理
├── db_query_status.py     # 数据库查询状态
├── not_authorized_object.py # 未授权对象
├── query_actions.py       # 查询动作
├── query_context.py       # 查询上下文
├── query_context_factory.py # 查询上下文工厂
├── query_context_processor.py # 查询上下文处理器
├── query_object.py        # 查询对象
├── query_object_factory.py # 查询对象工厂
└── tags.py              # 标签工具
```

### 2.8 数据库引擎规范 (db_engine_specs/)

```
superset/db_engine_specs/
├── __init__.py              # 引擎规范导出
├── base.py                 # 基础引擎规范
├── ascend.py              # Ascend 引擎
├── athena.py             # Athena 引擎
├── aurora.py             # Aurora 引擎
├── bigquery.py           # BigQuery 引擎
├── clickhouse.py         # ClickHouse 引擎
├── cockroachdb.py        # CockroachDB 引擎
├── couchbase.py          # Couchbase 引擎
├── crate.py             # Crate 引擎
├── databend.py          # Databend 引擎
├── databricks.py         # Databricks 引擎
├── db2.py               # DB2 引擎
├── denodo.py            # Denodo 引擎
├── doris.py             # Doris 引擎
├── dremio.py            # Dremio 引擎
├── drill.py             # Drill 引擎
├── druid.py             # Druid 引擎
├── duckdb.py            # DuckDB 引擎
├── dynamodb.py          # DynamoDB 引擎
├── elasticsearch.py     # Elasticsearch 引擎
├── exasol.py            # Exasol 引擎
├── exceptions.py        # 引擎异常
├── firebird.py          # Firebird 引擎
├── firebolt.py          # Firebolt 引擎
├── gsheets.py          # Google Sheets 引擎
├── hana.py             # SAP HANA 引擎
├── hive.py             # Hive 引擎
├── ibmi.py             # IBM i 引擎
├── impala.py           # Impala 引擎
├── kusto.py            # Kusto 引擎
├── kylin.py            # Kylin 引擎
├── lib.py              # 引擎库
├── mariadb.py          # MariaDB 引擎
├── mssql.py            # SQL Server 引擎
├── mysql.py            # MySQL 引擎
├── netezza.py          # Netezza 引擎
├── oracle.py           # Oracle 引擎
├── pinot.py            # Apache Pinot 引擎
├── postgres.py         # PostgreSQL 引擎
├── presto.py          # Presto 引擎
├── redshift.py         # Redshift 引擎
├── snowflake.py        # Snowflake 引擎
├── sqlite.py           # SQLite 引擎
├── starrocks.py        # StarRocks 引擎
├── teradata.py         # Teradata 引擎
├── timescale.py        # TimescaleDB 引擎
├── trino.py           # Trino 引擎
├── vertica.py          # Vertica 引擎
└── yugabyte.py        # YugabyteDB 引擎
```

### 2.9 扩展和工具

```
superset/
├── extensions/             # 扩展模块
│   ├── __init__.py
│   ├── api.py            # 扩展 API
│   ├── celery.py         # Celery 配置
│   ├── db_engine_specs.py # 数据库引擎规范扩展
│   ├── encrypted_field_factory.py # 加密字段工厂
│   ├── machine_auth_provider_factory.py # 机器认证工厂
│   ├── security_manager.py # 安全管理器
│   └── ...
├── connectors/           # 连接器
│   ├── __init__.py
│   └── sqla/           # SQLAlchemy 连接器
│       ├── __init__.py
│       ├── models.py
│       └── utils.py
├── core/                # 核心模块
│   ├── __init__.py
│   ├── api/
│   │   └── core_api_injection.py
│   └── mcp/
│       └── core_mcp_injection.py
├── cli/                 # 命令行工具
│   ├── __init__.py
│   ├── main.py          # 主入口
│   ├── examples.py      # 示例数据
│   ├── importexport.py  # 导入导出
│   ├── reset.py        # 重置命令
│   ├── test.py         # 测试命令
│   ├── test_db.py      # 数据库测试
│   ├── thumbnails.py   # 缩略图生成
│   ├── update.py       # 更新命令
│   └── viz_migrations.py # 可视化迁移
├── columns/             # 列模块
│   └── __init__.py
├── key_value/           # 键值存储
│   ├── __init__.py
│   └── types.py
├── result_set/          # 结果集
│   └── __init__.py
├── sql/                 # SQL 处理
│   └── ...
├── tasks/               # 异步任务
│   └── ...
├── utils/               # 工具函数
│   └── ...
└── websocket/            # WebSocket
    └── ...
```

## 3. 前端目录详解 (superset-frontend/)

### 3.1 源码结构 (src/)

```
superset-frontend/src/
├── preamble.ts             # 前言文件
├── theme.ts              # 主题配置
├── views/                # 视图组件
│   ├── App.tsx          # 应用主组件
│   ├── routes.tsx       # 路由配置
│   ├── store.ts         # Redux Store
│   └── ...
├── setup/                # 初始化配置
│   ├── setupApp.ts      # 应用初始化
│   ├── setupPlugins.ts  # 插件初始化
│   ├── setupClient.ts   # 客户端初始化
│   ├── setupFormatters.ts # 格式化器
│   ├── setupErrorMessages.ts # 错误消息
│   ├── setupCodeOverrides.ts # 代码覆盖
│   ├── setupDashboardComponents.ts # 仪表板组件
│   ├── setupColors.ts   # 颜色配置
│   └── setupPluginsExtra.ts # 额外插件
├── explore/              # 探索模块
│   ├── exploreUtils/    # 探索工具
│   ├── controlUtils/    # 控制工具
│   ├── controlPanels/   # 控制面板
│   ├── components/     # 探索组件
│   ├── reducers/       # Redux Reducers
│   ├── store.ts        # 探索 Store
│   ├── types.ts        # 类型定义
│   ├── controls.tsx    # 控制器
│   └── constants.ts   # 常量
├── dashboard/           # 仪表板模块
│   ├── actions/        # Redux Actions
│   ├── components/     # 仪表板组件
│   ├── reducers/       # Redux Reducers
│   ├── util/          # 工具函数
│   └── ...
├── SqlLab/              # SQL Lab 模块
│   ├── actions/        # Redux Actions
│   ├── components/     # SQL Lab 组件
│   ├── reducers/       # Redux Reducers
│   ├── utils/          # 工具函数
│   └── ...
├── chart/               # 图表模块
│   ├── actions/        # Redux Actions
│   ├── components/     # 图表组件
│   ├── reducers/       # Redux Reducers
│   └── ...
├── components/          # 通用组件
│   ├── Chart/          # 图表组件
│   ├── Datasource/     # 数据源组件
│   ├── ErrorBoundary/   # 错误边界
│   ├── GridTable/      # 网格表格
│   └── ...
├── features/           # 功能模块
│   ├── home/          # 首页
│   ├── dashboard/     # 仪表板功能
│   └── ...
├── pages/              # 页面组件
│   ├── Home.tsx       # 首页
│   ├── ChartCreation.tsx # 图表创建
│   ├── Dashboard.tsx   # 仪表板
│   ├── ChartList.tsx   # 图表列表
│   ├── DashboardList.tsx # 仪表板列表
│   ├── DatabaseList.tsx # 数据库列表
│   ├── DatasetList.tsx  # 数据集列表
│   └── ...
├── utils/              # 工具函数
│   ├── common.ts       # 通用工具
│   ├── api.ts         # API 工具
│   ├── getBootstrapData.ts # 引导数据
│   └── ...
├── logger/             # 日志模块
│   ├── LogUtils.ts    # 日志工具
│   └── actions.ts    # 日志 Actions
├── middleware/         # 中间件
├── sagas/             # Redux Sagas
├── selectors/         # Redux Selectors
├── types/             # 类型定义
└── assets/            # 静态资源
    ├── branding/      # 品牌资源
    ├── images/        # 图片资源
    └── staticPages/   # 静态页面
```

### 3.2 插件目录 (plugins/)

```
superset-frontend/plugins/
├── plugin-chart-echarts/           # ECharts 图表插件
│   ├── src/
│   │   ├── controls.tsx           # 控制器
│   │   ├── components/           # 组件
│   │   │   ├── Echart.tsx      # ECharts 组件
│   │   │   └── ExtraControls.tsx # 额外控制
│   │   └── ...                 # 各种图表类型
│   │       ├── Timeseries/       # 时间序列
│   │       ├── Pie/            # 饼图
│   │       ├── Bar/            # 柱状图
│   │       ├── Line/           # 折线图
│   │       ├── Area/           # 面积图
│   │       ├── Heatmap/        # 热力图
│   │       ├── Histogram/      # 直方图
│   │       ├── BoxPlot/        # 箱线图
│   │       ├── Gauge/          # 仪表盘
│   │       ├── Funnel/         # 漏斗图
│   │       ├── Radar/          # 雷达图
│   │       ├── Sankey/         # 桑基图
│   │       ├── Treemap/        # 树图
│   │       ├── Sunburst/       # 旭日图
│   │       ├── Graph/          # 关系图
│   │       ├── Tree/           # 树图
│   │       ├── Gantt/          # 甘特图
│   │       ├── Waterfall/      # 瀑布图
│   │       ├── Bubble/         # 气泡图
│   │       └── MixedTimeseries/ # 混合时间序列
│   ├── package.json
│   └── ...
├── plugin-chart-table/            # 表格图表插件
│   ├── src/
│   │   ├── controlPanel.tsx      # 控制面板
│   │   ├── TableChart.tsx        # 表格图表
│   │   ├── Styles.tsx           # 样式
│   │   └── DataTable/           # 数据表格
│   │       ├── DataTable.tsx
│   │       ├── components/       # 表格组件
│   │       └── hooks/           # 表格 Hooks
│   ├── package.json
│   └── ...
├── plugin-chart-pivot-table/      # 透视表插件
│   ├── src/
│   │   ├── controlPanel.tsx
│   │   ├── PivotTableChart.tsx
│   │   └── ...
│   ├── package.json
│   └── ...
├── plugin-chart-ag-grid-table/     # AG Grid 表格插件
│   ├── src/
│   │   ├── controlPanel.tsx
│   │   ├── AgGridTableChart.tsx
│   │   ├── AgGridTable/
│   │   │   ├── index.tsx
│   │   │   └── components/     # AG Grid 组件
│   │   └── renderers/         # 渲染器
│   ├── package.json
│   └── ...
├── plugin-chart-handlebars/        # Handlebars 模板插件
│   ├── src/
│   │   ├── Handlebars.tsx
│   │   ├── plugin/
│   │   │   ├── controlPanel.tsx
│   │   │   └── controls/       # Handlebars 控制
│   │   └── components/         # 组件
│   │       ├── Handlebars/
│   │       └── CodeEditor/
│   ├── package.json
│   └── ...
├── plugin-chart-word-cloud/        # 词云插件
│   ├── src/
│   │   ├── chart/
│   │   │   └── WordCloud.tsx
│   │   ├── plugin/
│   │   │   ├── controlPanel.tsx
│   │   │   └── controls/       # 词云控制
│   │   │       ├── RotationControl.tsx
│   │   │       └── ColorSchemeControl/
│   │   └── ...
│   ├── package.json
│   └── ...
├── plugin-chart-cartodiagram/      # 地图插件
│   ├── src/
│   │   ├── CartodiagramPlugin.tsx
│   │   ├── components/
│   │   │   ├── ChartWrapper.tsx
│   │   │   ├── ChartLayer.tsx
│   │   │   └── OlChartMap.tsx
│   │   └── util/               # 地图工具
│   ├── package.json
│   └── ...
├── legacy-plugin-chart-calendar/    # 日历图表（旧版）
├── legacy-plugin-chart-chord/      # 弦图（旧版）
├── legacy-plugin-chart-country-map/ # 国家地图（旧版）
├── legacy-plugin-chart-horizon/   # 地平线图（旧版）
├── legacy-plugin-chart-map-box/    # Mapbox 地图（旧版）
├── legacy-plugin-chart-paired-t-test/ # T 检验图（旧版）
├── legacy-plugin-chart-parallel-coordinates/ # 平行坐标图（旧版）
├── legacy-plugin-chart-partition/   # 分区图（旧版）
├── legacy-plugin-chart-rose/       # 玫瑰图（旧版）
├── legacy-plugin-chart-world-map/  # 世界地图（旧版）
├── legacy-preset-chart-deckgl/    # Deck.GL 图表预设（旧版）
│   └── src/
│       └── ...                 # 各种地图图表
└── legacy-preset-chart-nvd3/      # NVD3 图表预设（旧版）
    └── src/
        └── ...                 # 各种 NVD3 图表
```

### 3.3 包目录 (packages/)

```
superset-frontend/packages/
├── superset-ui-core/            # 核心 UI 组件
│   ├── src/
│   │   ├── components/        # 组件
│   │   ├── hooks/           # Hooks
│   │   ├── utils/           # 工具
│   │   └── ...
│   ├── package.json
│   └── ...
├── superset-ui-chart-controls/ # 图表控制组件
│   ├── src/
│   │   ├── components/        # 控制组件
│   │   └── ...
│   ├── package.json
│   └── ...
└── superset-ui-switchboard/     # 开关板组件
    ├── src/
    │   └── ...
    ├── package.json
    └── ...
```

### 3.4 配置文件

```
superset-frontend/
├── package.json              # NPM 包配置
├── tsconfig.json            # TypeScript 配置
├── .eslintrc.js            # ESLint 配置
├── .eslintignore           # ESLint 忽略文件
├── jest.config.js          # Jest 测试配置
├── webpack.config.js        # Webpack 配置
├── babel.config.js         # Babel 配置
├── .prettierrc            # Prettier 配置
├── lerna.json             # Lerna 配置
├── oxlint.json            # Oxlint 配置
└── js_build.sh            # 构建脚本
```

## 4. 配置和部署文件

### 4.1 Docker 配置

```
docker/
├── README.md               # Docker 说明
├── apt-install.sh          # APT 包安装
├── docker-bootstrap.sh     # Docker 启动脚本
├── docker-ci.sh           # CI 脚本
├── docker-frontend.sh     # 前端脚本
├── docker-healthcheck.sh  # 健康检查
├── docker-init.sh         # 初始化脚本
├── frontend-mem-nag.sh    # 前端内存警告
├── pip-install.sh         # Pip 安装
├── tag_latest_release.sh  # 标记最新版本
├── nginx/
│   └── nginx.conf        # Nginx 配置
├── entrypoints/
│   ├── docker-ci.sh      # CI 入口
│   └── run-server.sh    # 服务器运行
└── pythonpath_dev/
    └── .gitignore
```

### 4.2 Helm Charts

```
helm/superset/
├── Chart.yaml              # Helm Chart 定义
├── Chart.lock             # Chart 锁定文件
├── values.yaml            # 默认值配置
├── README.md             # 说明文档
├── .helmignore          # Helm 忽略文件
├── .gitignore
└── templates/           # Kubernetes 模板
    ├── NOTES.txt        # 安装说明
    └── pdb.yaml        # Pod 中断预算
```

### 4.3 Python 依赖

```
requirements/
├── README.md              # 依赖说明
├── base.in               # 基础依赖（源）
├── base.txt              # 基础依赖（编译）
├── development.in         # 开发依赖（源）
├── development.txt        # 开发依赖（编译）
├── translations.in      # 翻译依赖（源）
└── translations.txt     # 翻译依赖（编译）
```

### 4.4 脚本文件

```
scripts/
├── benchmark_migration.py   # 迁移基准测试
├── change_detector.py      # 变更检测
├── check-custom-rules.sh  # 检查自定义规则
├── check-env.py          # 检查环境
├── check-type.js         # 检查类型
├── check_license.sh      # 检查许可证
├── cypress_run.py        # Cypress 测试运行
├── docker-compose-up.sh  # Docker Compose 启动
├── eslint.sh            # ESLint 检查
├── fossa.sh             # FOSSA 检查
├── oxlint.sh            # Oxlint 检查
├── permissions_cleanup.py # 权限清理
├── python_tests.sh      # Python 测试
├── sign.sh              # 签名
├── tag_latest_release.sh # 标记最新版本
└── uv-pip-compile.sh   # UV Pip 编译
```

## 5. 测试文件

```
tests/
├── README.md              # 测试说明
├── unit_tests/           # 单元测试
├── integration_tests/     # 集成测试
├── e2e_tests/          # 端到端测试
└── fixtures/            # 测试固件
```

## 6. 文档目录

```
docs/
├── README.md             # 文档说明
├── src/                 # 文档源码
│   ├── components/       # 文档组件
│   ├── pages/          # 文档页面
│   ├── styles/         # 文档样式
│   └── ...
├── static/              # 静态资源
├── docusaurus.config.ts # Docusaurus 配置
├── sidebars.js         # 侧边栏配置
└── package.json        # NPM 配置
```

## 7. 关键文件说明

### 7.1 后端关键文件

| 文件路径 | 说明 |
|---------|------|
| [superset/app.py](../superset/app.py) | Flask 应用入口，创建和初始化应用 |
| [superset/config.py](../superset/config.py) | 主配置文件，包含所有配置项 |
| [superset/initialization/__init__.py](../superset/initialization/__init__.py) | 应用初始化逻辑 |
| [superset/models/core.py](../superset/models/core.py) | 核心数据模型定义 |
| [superset/common/query_context.py](../superset/common/query_context.py) | 查询上下文处理 |
| [superset/db_engine_specs/base.py](../superset/db_engine_specs/base.py) | 数据库引擎基类 |
| [superset/charts/api.py](../superset/charts/api.py) | 图表 API 端点 |
| [superset/dashboards/api.py](../superset/dashboards/api.py) | 仪表板 API 端点 |
| [superset/explore/api.py](../superset/explore/api.py) | 探索 API 端点 |

### 7.2 前端关键文件

| 文件路径 | 说明 |
|---------|------|
| [superset-frontend/src/views/App.tsx](../superset-frontend/src/views/App.tsx) | React 应用主组件 |
| [superset-frontend/src/views/routes.tsx](../superset-frontend/src/views/routes.tsx) | 路由配置 |
| [superset-frontend/src/explore/](../superset-frontend/src/explore/) | 图表探索模块 |
| [superset-frontend/src/dashboard/](../superset-frontend/src/dashboard/) | 仪表板模块 |
| [superset-frontend/src/setup/setupPlugins.ts](../superset-frontend/src/setup/setupPlugins.ts) | 插件初始化 |
| [superset-frontend/src/setup/setupApp.ts](../superset-frontend/src/setup/setupApp.ts) | 应用初始化 |
| [superset-frontend/package.json](../superset-frontend/package.json) | NPM 包配置 |

## 8. 目录组织原则

### 8.1 后端组织原则

1. **按功能模块划分**: charts, dashboards, databases, datasets 等
2. **分层架构**: views (API), commands (业务逻辑), models (数据层), daos (数据访问)
3. **命令模式**: 使用 commands 目录实现业务逻辑
4. **插件化**: db_engine_specs 支持多种数据库

### 8.2 前端组织原则

1. **按页面/功能划分**: views, pages, features
2. **组件化**: components 目录存放可复用组件
3. **插件化**: plugins 目录存放图表插件
4. **状态管理**: 使用 Redux 管理应用状态
5. **类型安全**: 全面使用 TypeScript

## 9. 下一步

阅读完本文档后，建议继续学习：

1. [技术栈](./03-技术栈.md) - 了解技术选型
2. [后端架构](./04-后端架构.md) - 学习后端实现
3. [前端架构](./08-前端架构.md) - 学习前端实现
