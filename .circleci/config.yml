# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1

orbs: 
  docker: circleci/docker@2.1.2
  azure-acr: circleci/azure-acr@0.2.0 # Use the Azure ACR orb in your config
  azure-aks: circleci/azure-aks@0.3.0 # Use the Azure AKS orb in your config
  kubernetes: circleci/kubernetes@1.3.0 # Use the kubernetes orb in your config

# Define a job to be invoked later in a workflow.
# See: https://circleci.com/docs/2.0/configuration-reference/#jobs
jobs:
  build-image:
    machine: true
    steps:
      - azure-acr/build-and-push-image:
          login-server-name: letocontainer.azurecr.io
          registry-name: letosuperset
          repo: artemisplatform
          tag: ${CIRCLE_SHA1}

# Invoke jobs via workflows
# See: https://circleci.com/docs/2.0/configuration-reference/#workflows
workflows:
  say-hello-workflow:
    jobs:
      - build-image
