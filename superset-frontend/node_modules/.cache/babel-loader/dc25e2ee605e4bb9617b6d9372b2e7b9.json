{"ast":null,"code":"import \"core-js/modules/es.promise\";import \"core-js/modules/web.dom-collections.iterator\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _findInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/find\";import _Object$assign from \"@babel/runtime-corejs3/core-js-stable/object/assign\";import _taggedTemplateLiteralLoose from \"@babel/runtime-corejs3/helpers/taggedTemplateLiteralLoose\";var _jsxFileName = \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/ListView/Filters.tsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _templateObject3() {const data = _taggedTemplateLiteralLoose([\"\\n  padding: 24px 16px 8px;\\n\"]);_templateObject3 = function _templateObject3() {return data;};return data;}function _templateObject2() {const data = _taggedTemplateLiteralLoose([\"\\n  font-weight: bold;\\n  line-height: 27px;\\n  margin: 0 0.4em 0 0;\\n\"]);_templateObject2 = function _templateObject2() {return data;};return data;}function _templateObject() {const data = _taggedTemplateLiteralLoose([\"\\n  display: inline-flex;\\n  margin-right: 2em;\\n\"]);_templateObject = function _templateObject() {return data;};return data;}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  */\nimport React, { useState } from 'react';\nimport styled from '@superset-ui/style';\nimport { withTheme } from 'emotion-theming';\nimport { Select, PaginatedSelect } from 'src/components/Select';\nimport SearchInput from 'src/components/SearchInput';import { jsx as ___EmotionJSX } from \"@emotion/core\";\nconst FilterContainer = styled.div(_templateObject());\n\n\n\nconst FilterTitle = styled.label(_templateObject2());\n\n\n\n\nconst filterSelectTheme = {\n  spacing: {\n    baseUnit: 2,\n    minWidth: '5em' } };\n\n\nconst filterSelectStyles = {\n  container: (provider, { getValue }) => _Object$assign({},\n  provider, {\n    // dynamic width based on label string length\n    minWidth: Math.min(12, Math.max(5, 3 + getValue()[0].label.length / 2)) + \"em\" }),\n\n  control: provider => _Object$assign({},\n  provider, {\n    borderWidth: 0,\n    boxShadow: 'none' }) };\n\n\nconst CLEAR_SELECT_FILTER_VALUE = 'CLEAR_SELECT_FILTER_VALUE';\nfunction SelectFilter({ Header, selects = [], emptyLabel = 'None', initialValue, onSelect, fetchSelects, paginate = false }) {\n  const clearFilterSelect = {\n    label: emptyLabel,\n    value: CLEAR_SELECT_FILTER_VALUE };\n\n  const options = [clearFilterSelect, ...selects];\n  const [selectedOption, setSelectedOption] = useState(clearFilterSelect);\n  const onChange = selected => {\n    if (selected === null)\n    return;\n    onSelect(selected.value === CLEAR_SELECT_FILTER_VALUE ? undefined : selected.value);\n    setSelectedOption(selected);\n  };\n  const fetchAndFormatSelects = async (inputValue, loadedOptions, { page }) => {\n    // only include clear filter when filter value does not exist\n    let result = inputValue || page > 0 ? [] : [clearFilterSelect];\n    let hasMore = paginate;\n    if (fetchSelects) {\n      const selectValues = await fetchSelects(inputValue, page);\n      // update matching option at initial load\n      const matchingOption = _findInstanceProperty(result).call(result, x => x.value === initialValue);\n      if (matchingOption) {\n        setSelectedOption(matchingOption);\n      }\n      if (!selectValues.length) {\n        hasMore = false;\n      }\n      result = [...result, ...selectValues];\n    }\n    return {\n      options: result,\n      hasMore,\n      additional: {\n        page: page + 1 } };\n\n\n  };\n  return ___EmotionJSX(FilterContainer, { __source: { fileName: _jsxFileName, lineNumber: 89 }, __self: this },\n  ___EmotionJSX(FilterTitle, { __source: { fileName: _jsxFileName, lineNumber: 90 }, __self: this }, Header),\n  fetchSelects ? ___EmotionJSX(PaginatedSelect, { \"data-test\": \"filters-select\", themeConfig: filterSelectTheme, stylesConfig: filterSelectStyles, value: selectedOption, onChange: onChange, loadOptions: fetchAndFormatSelects, placeholder: emptyLabel, loadingMessage: () => 'Loading...', clearable: false, additional: {\n      page: 0 }, __source: { fileName: _jsxFileName, lineNumber: 91 }, __self: this }) :\n  ___EmotionJSX(Select, { \"data-test\": \"filters-select\", themeConfig: filterSelectTheme, stylesConfig: filterSelectStyles, value: selectedOption, options: options, onChange: onChange, clearable: false, __source: { fileName: _jsxFileName, lineNumber: 93 }, __self: this }));\n\n}__signature__(SelectFilter, \"useState{[selectedOption, setSelectedOption](clearFilterSelect)}\");\nfunction SearchFilter({ Header, initialValue, onSubmit }) {\n  const [value, setValue] = useState(initialValue || '');\n  const handleSubmit = () => onSubmit(value);\n  const onClear = () => {\n    setValue('');\n    onSubmit('');\n  };\n  return ___EmotionJSX(FilterContainer, { __source: { fileName: _jsxFileName, lineNumber: 103 }, __self: this },\n  ___EmotionJSX(SearchInput, { \"data-test\": \"filters-search\", placeholder: Header, value: value, onChange: e => {\n      setValue(e.currentTarget.value);\n    }, onSubmit: handleSubmit, onClear: onClear, __source: { fileName: _jsxFileName, lineNumber: 104 }, __self: this }));\n\n}__signature__(SearchFilter, \"useState{[value, setValue](initialValue || '')}\");\nconst FilterWrapper = styled.div(_templateObject3());\n\n\nfunction UIFilters({ filters, internalFilters = [], updateFilterValue }) {\n  return ___EmotionJSX(FilterWrapper, { __source: { fileName: _jsxFileName, lineNumber: 113 }, __self: this },\n  _mapInstanceProperty(filters).call(filters, ({ Header, id, input, selects, unfilteredLabel, fetchSelects, paginate }, index) => {\n    const initialValue = internalFilters[index] && internalFilters[index].value;\n    if (input === 'select') {\n      return ___EmotionJSX(SelectFilter, { key: id, name: id, Header: Header, selects: selects, emptyLabel: unfilteredLabel, initialValue: initialValue, fetchSelects: fetchSelects, paginate: paginate, onSelect: value => updateFilterValue(index, value), __source: { fileName: _jsxFileName, lineNumber: 117 }, __self: this });\n    }\n    if (input === 'search') {\n      return ___EmotionJSX(SearchFilter, { key: id, Header: Header, initialValue: initialValue, onSubmit: value => updateFilterValue(index, value), __source: { fileName: _jsxFileName, lineNumber: 120 }, __self: this });\n    }\n    return null;\n  }));\n\n}const _default =\nwithTheme(UIFilters);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(FilterContainer, \"FilterContainer\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/ListView/Filters.tsx\");reactHotLoader.register(FilterTitle, \"FilterTitle\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/ListView/Filters.tsx\");reactHotLoader.register(filterSelectTheme, \"filterSelectTheme\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/ListView/Filters.tsx\");reactHotLoader.register(filterSelectStyles, \"filterSelectStyles\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/ListView/Filters.tsx\");reactHotLoader.register(CLEAR_SELECT_FILTER_VALUE, \"CLEAR_SELECT_FILTER_VALUE\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/ListView/Filters.tsx\");reactHotLoader.register(SelectFilter, \"SelectFilter\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/ListView/Filters.tsx\");reactHotLoader.register(SearchFilter, \"SearchFilter\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/ListView/Filters.tsx\");reactHotLoader.register(FilterWrapper, \"FilterWrapper\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/ListView/Filters.tsx\");reactHotLoader.register(UIFilters, \"UIFilters\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/ListView/Filters.tsx\");reactHotLoader.register(_default, \"default\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/ListView/Filters.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/ListView/Filters.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport styled from '@superset-ui/style';\nimport { withTheme } from 'emotion-theming';\n\nimport {\n  Select,\n  PaginatedSelect,\n  PartialThemeConfig,\n  PartialStylesConfig,\n} from 'src/components/Select';\n\nimport SearchInput from 'src/components/SearchInput';\nimport {\n  Filter,\n  Filters,\n  FilterValue,\n  InternalFilter,\n  SelectOption,\n} from './types';\n\ninterface BaseFilter {\n  Header: string;\n  initialValue: any;\n}\ninterface SelectFilterProps extends BaseFilter {\n  name?: string;\n  onSelect: (selected: any) => any;\n  selects: Filter['selects'];\n  emptyLabel?: string;\n  fetchSelects?: Filter['fetchSelects'];\n  paginate?: boolean;\n}\n\nconst FilterContainer = styled.div`\n  display: inline-flex;\n  margin-right: 2em;\n`;\n\nconst FilterTitle = styled.label`\n  font-weight: bold;\n  line-height: 27px;\n  margin: 0 0.4em 0 0;\n`;\n\nconst filterSelectTheme: PartialThemeConfig = {\n  spacing: {\n    baseUnit: 2,\n    minWidth: '5em',\n  },\n};\n\nconst filterSelectStyles: PartialStylesConfig = {\n  container: (provider, { getValue }) => ({\n    ...provider,\n    // dynamic width based on label string length\n    minWidth: `${Math.min(\n      12,\n      Math.max(5, 3 + getValue()[0].label.length / 2),\n    )}em`,\n  }),\n  control: provider => ({\n    ...provider,\n    borderWidth: 0,\n    boxShadow: 'none',\n  }),\n};\n\nconst CLEAR_SELECT_FILTER_VALUE = 'CLEAR_SELECT_FILTER_VALUE';\n\nfunction SelectFilter({\n  Header,\n  selects = [],\n  emptyLabel = 'None',\n  initialValue,\n  onSelect,\n  fetchSelects,\n  paginate = false,\n}: SelectFilterProps) {\n  const clearFilterSelect = {\n    label: emptyLabel,\n    value: CLEAR_SELECT_FILTER_VALUE,\n  };\n\n  const options = [clearFilterSelect, ...selects];\n\n  const [selectedOption, setSelectedOption] = useState(clearFilterSelect);\n  const onChange = (selected: SelectOption | null) => {\n    if (selected === null) return;\n    onSelect(\n      selected.value === CLEAR_SELECT_FILTER_VALUE ? undefined : selected.value,\n    );\n    setSelectedOption(selected);\n  };\n  const fetchAndFormatSelects = async (\n    inputValue: string,\n    loadedOptions: SelectOption[],\n    { page }: { page: number },\n  ) => {\n    // only include clear filter when filter value does not exist\n    let result = inputValue || page > 0 ? [] : [clearFilterSelect];\n    let hasMore = paginate;\n    if (fetchSelects) {\n      const selectValues = await fetchSelects(inputValue, page);\n      // update matching option at initial load\n      const matchingOption = result.find(x => x.value === initialValue);\n      if (matchingOption) {\n        setSelectedOption(matchingOption);\n      }\n      if (!selectValues.length) {\n        hasMore = false;\n      }\n      result = [...result, ...selectValues];\n    }\n    return {\n      options: result,\n      hasMore,\n      additional: {\n        page: page + 1,\n      },\n    };\n  };\n\n  return (\n    <FilterContainer>\n      <FilterTitle>{Header}</FilterTitle>\n      {fetchSelects ? (\n        <PaginatedSelect\n          data-test=\"filters-select\"\n          themeConfig={filterSelectTheme}\n          stylesConfig={filterSelectStyles}\n          value={selectedOption}\n          onChange={onChange}\n          loadOptions={fetchAndFormatSelects}\n          placeholder={emptyLabel}\n          loadingMessage={() => 'Loading...'}\n          clearable={false}\n          additional={{\n            page: 0,\n          }}\n        />\n      ) : (\n        <Select\n          data-test=\"filters-select\"\n          themeConfig={filterSelectTheme}\n          stylesConfig={filterSelectStyles}\n          value={selectedOption}\n          options={options}\n          onChange={onChange}\n          clearable={false}\n        />\n      )}\n    </FilterContainer>\n  );\n}\n\ninterface SearchHeaderProps extends BaseFilter {\n  Header: string;\n  onSubmit: (val: string) => void;\n}\n\nfunction SearchFilter({ Header, initialValue, onSubmit }: SearchHeaderProps) {\n  const [value, setValue] = useState(initialValue || '');\n  const handleSubmit = () => onSubmit(value);\n  const onClear = () => {\n    setValue('');\n    onSubmit('');\n  };\n\n  return (\n    <FilterContainer>\n      <SearchInput\n        data-test=\"filters-search\"\n        placeholder={Header}\n        value={value}\n        onChange={e => {\n          setValue(e.currentTarget.value);\n        }}\n        onSubmit={handleSubmit}\n        onClear={onClear}\n      />\n    </FilterContainer>\n  );\n}\n\ninterface UIFiltersProps {\n  filters: Filters;\n  internalFilters: InternalFilter[];\n  updateFilterValue: (id: number, value: FilterValue['value']) => void;\n}\n\nconst FilterWrapper = styled.div`\n  padding: 24px 16px 8px;\n`;\n\nfunction UIFilters({\n  filters,\n  internalFilters = [],\n  updateFilterValue,\n}: UIFiltersProps) {\n  return (\n    <FilterWrapper>\n      {filters.map(\n        (\n          {\n            Header,\n            id,\n            input,\n            selects,\n            unfilteredLabel,\n            fetchSelects,\n            paginate,\n          },\n          index,\n        ) => {\n          const initialValue =\n            internalFilters[index] && internalFilters[index].value;\n          if (input === 'select') {\n            return (\n              <SelectFilter\n                key={id}\n                name={id}\n                Header={Header}\n                selects={selects}\n                emptyLabel={unfilteredLabel}\n                initialValue={initialValue}\n                fetchSelects={fetchSelects}\n                paginate={paginate}\n                onSelect={(value: any) => updateFilterValue(index, value)}\n              />\n            );\n          }\n          if (input === 'search') {\n            return (\n              <SearchFilter\n                key={id}\n                Header={Header}\n                initialValue={initialValue}\n                onSubmit={(value: string) => updateFilterValue(index, value)}\n              />\n            );\n          }\n          return null;\n        },\n      )}\n    </FilterWrapper>\n  );\n}\n\nexport default withTheme(UIFilters);\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}