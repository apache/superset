{"ast":null,"code":"import _indexOfInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/index-of\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";var _jsxFileName = \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/TimeSeriesColumnControl.jsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {\nRow,\nCol,\nFormControl,\nOverlayTrigger,\nPopover } from\n'react-bootstrap';\nimport Select from 'src/components/Select';\nimport { t } from '@superset-ui/translation';\n\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport BoundsControl from './BoundsControl';\nimport CheckboxControl from './CheckboxControl';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  label: PropTypes.string,\n  tooltip: PropTypes.string,\n  colType: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string,\n  timeLag: PropTypes.string,\n  timeRatio: PropTypes.string,\n  comparisonType: PropTypes.string,\n  showYAxis: PropTypes.bool,\n  yAxisBounds: PropTypes.array,\n  bounds: PropTypes.array,\n  d3format: PropTypes.string,\n  dateFormat: PropTypes.string,\n  onChange: PropTypes.func };\n\n\nconst defaultProps = {\n  label: t('Time Series Columns'),\n  tooltip: '',\n  colType: '',\n  width: '',\n  height: '',\n  timeLag: '',\n  timeRatio: '',\n  comparisonType: '',\n  showYAxis: false,\n  yAxisBounds: [null, null],\n  bounds: [null, null],\n  d3format: '',\n  dateFormat: '',\n  onChange: () => {} };\n\n\nconst comparisonTypeOptions = [\n{ value: 'value', label: 'Actual value' },\n{ value: 'diff', label: 'Difference' },\n{ value: 'perc', label: 'Percentage' },\n{ value: 'perc_change', label: 'Percentage Change' }];\n\n\nconst colTypeOptions = [\n{ value: 'time', label: 'Time Comparison' },\n{ value: 'contrib', label: 'Contribution' },\n{ value: 'spark', label: 'Sparkline' },\n{ value: 'avg', label: 'Period Average' }];\n\n\nexport default class TimeSeriesColumnControl extends React.Component {\n  constructor(props) {var _context;\n    super(props);\n    const state = {\n      label: this.props.label,\n      tooltip: this.props.tooltip,\n      colType: this.props.colType,\n      width: this.props.width,\n      height: this.props.height,\n      timeLag: this.props.timeLag || 0,\n      timeRatio: this.props.timeRatio,\n      comparisonType: this.props.comparisonType,\n      showYAxis: this.props.showYAxis,\n      yAxisBounds: this.props.yAxisBounds,\n      bounds: this.props.bounds,\n      d3format: this.props.d3format,\n      dateFormat: this.props.dateFormat };\n\n    delete state.onChange;\n    this.state = state;\n    this.onChange = _bindInstanceProperty(_context = this.onChange).call(_context, this);\n  }\n  onChange() {\n    this.props.onChange(this.state);\n  }\n  onSelectChange(attr, opt) {\n    this.setState({ [attr]: opt.value }, this.onChange);\n  }\n  onTextInputChange(attr, event) {\n    this.setState({ [attr]: event.target.value }, this.onChange);\n  }\n  onCheckboxChange(attr, value) {\n    this.setState({ [attr]: value }, this.onChange);\n  }\n  onBoundsChange(bounds) {\n    this.setState({ bounds }, this.onChange);\n  }\n  onYAxisBoundsChange(yAxisBounds) {\n    this.setState({ yAxisBounds }, this.onChange);\n  }\n  setType() {}\n  textSummary() {\n    return \"\" + this.state.label;\n  }\n  edit() {}\n  formRow(label, tooltip, ttLabel, control) {\n    return (\n      ___EmotionJSX(Row, { style: { marginTop: '5px' }, __source: { fileName: _jsxFileName, lineNumber: 130 }, __self: this },\n      ___EmotionJSX(Col, { md: 5, __source: { fileName: _jsxFileName, lineNumber: 131 }, __self: this },\n      label + \" \",\n      ___EmotionJSX(InfoTooltipWithTrigger, {\n        placement: \"top\",\n        tooltip: tooltip,\n        label: ttLabel, __source: { fileName: _jsxFileName, lineNumber: 133 }, __self: this })),\n\n\n      ___EmotionJSX(Col, { md: 7, __source: { fileName: _jsxFileName, lineNumber: 139 }, __self: this }, control)));\n\n\n  }\n  renderPopover() {var _context2, _context3, _context4, _context5, _context6, _context7, _context8, _context9, _context10, _context11, _context12, _context13, _context14, _context15, _context16;\n    return (\n      ___EmotionJSX(Popover, { id: \"ts-col-popo\", title: \"Column Configuration\", __source: { fileName: _jsxFileName, lineNumber: 145 }, __self: this },\n      ___EmotionJSX(\"div\", { style: { width: 300 }, __source: { fileName: _jsxFileName, lineNumber: 146 }, __self: this },\n      this.formRow(\n      'Label',\n      'The column header label',\n      'time-lag',\n      ___EmotionJSX(FormControl, {\n        value: this.state.label,\n        onChange: _bindInstanceProperty(_context2 = this.onTextInputChange).call(_context2, this, 'label'),\n        bsSize: \"small\",\n        placeholder: \"Label\", __source: { fileName: _jsxFileName, lineNumber: 151 }, __self: this })),\n\n\n      this.formRow(\n      'Tooltip',\n      'Column header tooltip',\n      'col-tooltip',\n      ___EmotionJSX(FormControl, {\n        value: this.state.tooltip,\n        onChange: _bindInstanceProperty(_context3 = this.onTextInputChange).call(_context3, this, 'tooltip'),\n        bsSize: \"small\",\n        placeholder: \"Tooltip\", __source: { fileName: _jsxFileName, lineNumber: 162 }, __self: this })),\n\n\n      this.formRow(\n      'Type',\n      'Type of comparison, value difference or percentage',\n      'col-type',\n      ___EmotionJSX(Select, {\n        value: this.state.colType,\n        clearable: false,\n        onChange: _bindInstanceProperty(_context4 = this.onSelectChange).call(_context4, this, 'colType'),\n        options: colTypeOptions, __source: { fileName: _jsxFileName, lineNumber: 173 }, __self: this })),\n\n\n      ___EmotionJSX(\"hr\", { __source: { fileName: _jsxFileName, lineNumber: 180 }, __self: this }),\n      this.state.colType === 'spark' &&\n      this.formRow(\n      'Width',\n      'Width of the sparkline',\n      'spark-width',\n      ___EmotionJSX(FormControl, {\n        value: this.state.width,\n        onChange: _bindInstanceProperty(_context5 = this.onTextInputChange).call(_context5, this, 'width'),\n        bsSize: \"small\",\n        placeholder: \"Width\", __source: { fileName: _jsxFileName, lineNumber: 186 }, __self: this })),\n\n\n      this.state.colType === 'spark' &&\n      this.formRow(\n      'Height',\n      'Height of the sparkline',\n      'spark-width',\n      ___EmotionJSX(FormControl, {\n        value: this.state.height,\n        onChange: _bindInstanceProperty(_context6 = this.onTextInputChange).call(_context6, this, 'height'),\n        bsSize: \"small\",\n        placeholder: \"height\", __source: { fileName: _jsxFileName, lineNumber: 198 }, __self: this })),\n\n\n      _indexOfInstanceProperty(_context7 = ['time', 'avg']).call(_context7, this.state.colType) >= 0 &&\n      this.formRow(\n      'Time Lag',\n      'Number of periods to compare against',\n      'time-lag',\n      ___EmotionJSX(FormControl, {\n        value: this.state.timeLag,\n        onChange: _bindInstanceProperty(_context8 = this.onTextInputChange).call(_context8, this, 'timeLag'),\n        bsSize: \"small\",\n        placeholder: \"Time Lag\", __source: { fileName: _jsxFileName, lineNumber: 210 }, __self: this })),\n\n\n      _indexOfInstanceProperty(_context9 = ['spark']).call(_context9, this.state.colType) >= 0 &&\n      this.formRow(\n      'Time Ratio',\n      'Number of periods to ratio against',\n      'time-ratio',\n      ___EmotionJSX(FormControl, {\n        value: this.state.timeRatio,\n        onChange: _bindInstanceProperty(_context10 = this.onTextInputChange).call(_context10, this, 'timeRatio'),\n        bsSize: \"small\",\n        placeholder: \"Time Ratio\", __source: { fileName: _jsxFileName, lineNumber: 222 }, __self: this })),\n\n\n      this.state.colType === 'time' &&\n      this.formRow(\n      'Type',\n      'Type of comparison, value difference or percentage',\n      'comp-type',\n      ___EmotionJSX(Select, {\n        value: this.state.comparisonType,\n        clearable: false,\n        onChange: _bindInstanceProperty(_context11 = this.onSelectChange).call(_context11, this, 'comparisonType'),\n        options: comparisonTypeOptions, __source: { fileName: _jsxFileName, lineNumber: 234 }, __self: this })),\n\n\n      this.state.colType === 'spark' &&\n      this.formRow(\n      'Show Y-axis',\n      'Show Y-axis on the sparkline. Will display the manually set min/max if set or min/max values in the data otherwise.',\n      'show-y-axis-bounds',\n      ___EmotionJSX(CheckboxControl, {\n        value: this.state.showYAxis,\n        onChange: _bindInstanceProperty(_context12 = this.onCheckboxChange).call(_context12, this, 'showYAxis'), __source: { fileName: _jsxFileName, lineNumber: 246 }, __self: this })),\n\n\n      this.state.colType === 'spark' &&\n      this.formRow(\n      'Y-axis bounds',\n      'Manually set min/max values for the y-axis.',\n      'y-axis-bounds',\n      ___EmotionJSX(BoundsControl, {\n        value: this.state.yAxisBounds,\n        onChange: _bindInstanceProperty(_context13 = this.onYAxisBoundsChange).call(_context13, this), __source: { fileName: _jsxFileName, lineNumber: 256 }, __self: this })),\n\n\n      this.state.colType !== 'spark' &&\n      this.formRow(\n      'Color bounds', \"Number bounds used for color encoding from red to blue.\\n              Reverse the numbers for blue to red. To get pure red or blue,\\n              you can enter either only min or max.\",\n\n\n\n      'bounds',\n      ___EmotionJSX(BoundsControl, {\n        value: this.state.bounds,\n        onChange: _bindInstanceProperty(_context14 = this.onBoundsChange).call(_context14, this), __source: { fileName: _jsxFileName, lineNumber: 268 }, __self: this })),\n\n\n      this.formRow(\n      'Number format',\n      'Optional d3 number format string',\n      'd3-format',\n      ___EmotionJSX(FormControl, {\n        value: this.state.d3format,\n        onChange: _bindInstanceProperty(_context15 = this.onTextInputChange).call(_context15, this, 'd3format'),\n        bsSize: \"small\",\n        placeholder: \"Number format string\", __source: { fileName: _jsxFileName, lineNumber: 277 }, __self: this })),\n\n\n      this.state.colType === 'spark' &&\n      this.formRow(\n      'Date format',\n      'Optional d3 date format string',\n      'date-format',\n      ___EmotionJSX(FormControl, {\n        value: this.state.dateFormat,\n        onChange: _bindInstanceProperty(_context16 = this.onTextInputChange).call(_context16, this, 'dateFormat'),\n        bsSize: \"small\",\n        placeholder: \"Date format string\", __source: { fileName: _jsxFileName, lineNumber: 289 }, __self: this })))));\n\n\n\n\n\n  }\n  render() {var _context17;\n    return (\n      ___EmotionJSX(\"span\", { __source: { fileName: _jsxFileName, lineNumber: 302 }, __self: this },\n      this.textSummary(), ' ',\n      ___EmotionJSX(OverlayTrigger, {\n        container: document.body,\n        trigger: \"click\",\n        rootClose: true,\n        ref: \"trigger\",\n        placement: \"right\",\n        overlay: this.renderPopover(), __source: { fileName: _jsxFileName, lineNumber: 304 }, __self: this },\n\n      ___EmotionJSX(InfoTooltipWithTrigger, {\n        icon: \"edit\",\n        className: \"text-primary\",\n        onClick: _bindInstanceProperty(_context17 = this.edit).call(_context17, this),\n        label: \"edit-ts-column\", __source: { fileName: _jsxFileName, lineNumber: 312 }, __self: this }))));\n\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nTimeSeriesColumnControl.propTypes = propTypes;\nTimeSeriesColumnControl.defaultProps = defaultProps;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/TimeSeriesColumnControl.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/TimeSeriesColumnControl.jsx\");reactHotLoader.register(comparisonTypeOptions, \"comparisonTypeOptions\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/TimeSeriesColumnControl.jsx\");reactHotLoader.register(colTypeOptions, \"colTypeOptions\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/TimeSeriesColumnControl.jsx\");reactHotLoader.register(TimeSeriesColumnControl, \"TimeSeriesColumnControl\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/TimeSeriesColumnControl.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/TimeSeriesColumnControl.jsx"],"names":["React","PropTypes","Row","Col","FormControl","OverlayTrigger","Popover","Select","t","InfoTooltipWithTrigger","BoundsControl","CheckboxControl","propTypes","label","string","tooltip","colType","width","height","timeLag","timeRatio","comparisonType","showYAxis","bool","yAxisBounds","array","bounds","d3format","dateFormat","onChange","func","defaultProps","comparisonTypeOptions","value","colTypeOptions","TimeSeriesColumnControl","Component","constructor","props","state","onSelectChange","attr","opt","setState","onTextInputChange","event","target","onCheckboxChange","onBoundsChange","onYAxisBoundsChange","setType","textSummary","edit","formRow","ttLabel","control","marginTop","renderPopover","render","document","body"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Row,\n  Col,\n  FormControl,\n  OverlayTrigger,\n  Popover,\n} from 'react-bootstrap';\nimport Select from 'src/components/Select';\nimport { t } from '@superset-ui/translation';\n\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport BoundsControl from './BoundsControl';\nimport CheckboxControl from './CheckboxControl';\n\nconst propTypes = {\n  label: PropTypes.string,\n  tooltip: PropTypes.string,\n  colType: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string,\n  timeLag: PropTypes.string,\n  timeRatio: PropTypes.string,\n  comparisonType: PropTypes.string,\n  showYAxis: PropTypes.bool,\n  yAxisBounds: PropTypes.array,\n  bounds: PropTypes.array,\n  d3format: PropTypes.string,\n  dateFormat: PropTypes.string,\n  onChange: PropTypes.func,\n};\n\nconst defaultProps = {\n  label: t('Time Series Columns'),\n  tooltip: '',\n  colType: '',\n  width: '',\n  height: '',\n  timeLag: '',\n  timeRatio: '',\n  comparisonType: '',\n  showYAxis: false,\n  yAxisBounds: [null, null],\n  bounds: [null, null],\n  d3format: '',\n  dateFormat: '',\n  onChange: () => {},\n};\n\nconst comparisonTypeOptions = [\n  { value: 'value', label: 'Actual value' },\n  { value: 'diff', label: 'Difference' },\n  { value: 'perc', label: 'Percentage' },\n  { value: 'perc_change', label: 'Percentage Change' },\n];\n\nconst colTypeOptions = [\n  { value: 'time', label: 'Time Comparison' },\n  { value: 'contrib', label: 'Contribution' },\n  { value: 'spark', label: 'Sparkline' },\n  { value: 'avg', label: 'Period Average' },\n];\n\nexport default class TimeSeriesColumnControl extends React.Component {\n  constructor(props) {\n    super(props);\n    const state = {\n      label: this.props.label,\n      tooltip: this.props.tooltip,\n      colType: this.props.colType,\n      width: this.props.width,\n      height: this.props.height,\n      timeLag: this.props.timeLag || 0,\n      timeRatio: this.props.timeRatio,\n      comparisonType: this.props.comparisonType,\n      showYAxis: this.props.showYAxis,\n      yAxisBounds: this.props.yAxisBounds,\n      bounds: this.props.bounds,\n      d3format: this.props.d3format,\n      dateFormat: this.props.dateFormat,\n    };\n    delete state.onChange;\n    this.state = state;\n    this.onChange = this.onChange.bind(this);\n  }\n  onChange() {\n    this.props.onChange(this.state);\n  }\n  onSelectChange(attr, opt) {\n    this.setState({ [attr]: opt.value }, this.onChange);\n  }\n  onTextInputChange(attr, event) {\n    this.setState({ [attr]: event.target.value }, this.onChange);\n  }\n  onCheckboxChange(attr, value) {\n    this.setState({ [attr]: value }, this.onChange);\n  }\n  onBoundsChange(bounds) {\n    this.setState({ bounds }, this.onChange);\n  }\n  onYAxisBoundsChange(yAxisBounds) {\n    this.setState({ yAxisBounds }, this.onChange);\n  }\n  setType() {}\n  textSummary() {\n    return `${this.state.label}`;\n  }\n  edit() {}\n  formRow(label, tooltip, ttLabel, control) {\n    return (\n      <Row style={{ marginTop: '5px' }}>\n        <Col md={5}>\n          {`${label} `}\n          <InfoTooltipWithTrigger\n            placement=\"top\"\n            tooltip={tooltip}\n            label={ttLabel}\n          />\n        </Col>\n        <Col md={7}>{control}</Col>\n      </Row>\n    );\n  }\n  renderPopover() {\n    return (\n      <Popover id=\"ts-col-popo\" title=\"Column Configuration\">\n        <div style={{ width: 300 }}>\n          {this.formRow(\n            'Label',\n            'The column header label',\n            'time-lag',\n            <FormControl\n              value={this.state.label}\n              onChange={this.onTextInputChange.bind(this, 'label')}\n              bsSize=\"small\"\n              placeholder=\"Label\"\n            />,\n          )}\n          {this.formRow(\n            'Tooltip',\n            'Column header tooltip',\n            'col-tooltip',\n            <FormControl\n              value={this.state.tooltip}\n              onChange={this.onTextInputChange.bind(this, 'tooltip')}\n              bsSize=\"small\"\n              placeholder=\"Tooltip\"\n            />,\n          )}\n          {this.formRow(\n            'Type',\n            'Type of comparison, value difference or percentage',\n            'col-type',\n            <Select\n              value={this.state.colType}\n              clearable={false}\n              onChange={this.onSelectChange.bind(this, 'colType')}\n              options={colTypeOptions}\n            />,\n          )}\n          <hr />\n          {this.state.colType === 'spark' &&\n            this.formRow(\n              'Width',\n              'Width of the sparkline',\n              'spark-width',\n              <FormControl\n                value={this.state.width}\n                onChange={this.onTextInputChange.bind(this, 'width')}\n                bsSize=\"small\"\n                placeholder=\"Width\"\n              />,\n            )}\n          {this.state.colType === 'spark' &&\n            this.formRow(\n              'Height',\n              'Height of the sparkline',\n              'spark-width',\n              <FormControl\n                value={this.state.height}\n                onChange={this.onTextInputChange.bind(this, 'height')}\n                bsSize=\"small\"\n                placeholder=\"height\"\n              />,\n            )}\n          {['time', 'avg'].indexOf(this.state.colType) >= 0 &&\n            this.formRow(\n              'Time Lag',\n              'Number of periods to compare against',\n              'time-lag',\n              <FormControl\n                value={this.state.timeLag}\n                onChange={this.onTextInputChange.bind(this, 'timeLag')}\n                bsSize=\"small\"\n                placeholder=\"Time Lag\"\n              />,\n            )}\n          {['spark'].indexOf(this.state.colType) >= 0 &&\n            this.formRow(\n              'Time Ratio',\n              'Number of periods to ratio against',\n              'time-ratio',\n              <FormControl\n                value={this.state.timeRatio}\n                onChange={this.onTextInputChange.bind(this, 'timeRatio')}\n                bsSize=\"small\"\n                placeholder=\"Time Ratio\"\n              />,\n            )}\n          {this.state.colType === 'time' &&\n            this.formRow(\n              'Type',\n              'Type of comparison, value difference or percentage',\n              'comp-type',\n              <Select\n                value={this.state.comparisonType}\n                clearable={false}\n                onChange={this.onSelectChange.bind(this, 'comparisonType')}\n                options={comparisonTypeOptions}\n              />,\n            )}\n          {this.state.colType === 'spark' &&\n            this.formRow(\n              'Show Y-axis',\n              'Show Y-axis on the sparkline. Will display the manually set min/max if set or min/max values in the data otherwise.',\n              'show-y-axis-bounds',\n              <CheckboxControl\n                value={this.state.showYAxis}\n                onChange={this.onCheckboxChange.bind(this, 'showYAxis')}\n              />,\n            )}\n          {this.state.colType === 'spark' &&\n            this.formRow(\n              'Y-axis bounds',\n              'Manually set min/max values for the y-axis.',\n              'y-axis-bounds',\n              <BoundsControl\n                value={this.state.yAxisBounds}\n                onChange={this.onYAxisBoundsChange.bind(this)}\n              />,\n            )}\n          {this.state.colType !== 'spark' &&\n            this.formRow(\n              'Color bounds',\n              `Number bounds used for color encoding from red to blue.\n              Reverse the numbers for blue to red. To get pure red or blue,\n              you can enter either only min or max.`,\n              'bounds',\n              <BoundsControl\n                value={this.state.bounds}\n                onChange={this.onBoundsChange.bind(this)}\n              />,\n            )}\n          {this.formRow(\n            'Number format',\n            'Optional d3 number format string',\n            'd3-format',\n            <FormControl\n              value={this.state.d3format}\n              onChange={this.onTextInputChange.bind(this, 'd3format')}\n              bsSize=\"small\"\n              placeholder=\"Number format string\"\n            />,\n          )}\n          {this.state.colType === 'spark' &&\n            this.formRow(\n              'Date format',\n              'Optional d3 date format string',\n              'date-format',\n              <FormControl\n                value={this.state.dateFormat}\n                onChange={this.onTextInputChange.bind(this, 'dateFormat')}\n                bsSize=\"small\"\n                placeholder=\"Date format string\"\n              />,\n            )}\n        </div>\n      </Popover>\n    );\n  }\n  render() {\n    return (\n      <span>\n        {this.textSummary()}{' '}\n        <OverlayTrigger\n          container={document.body}\n          trigger=\"click\"\n          rootClose\n          ref=\"trigger\"\n          placement=\"right\"\n          overlay={this.renderPopover()}\n        >\n          <InfoTooltipWithTrigger\n            icon=\"edit\"\n            className=\"text-primary\"\n            onClick={this.edit.bind(this)}\n            label=\"edit-ts-column\"\n          />\n        </OverlayTrigger>\n      </span>\n    );\n  }\n}\n\nTimeSeriesColumnControl.propTypes = propTypes;\nTimeSeriesColumnControl.defaultProps = defaultProps;\n"]},"metadata":{},"sourceType":"module"}