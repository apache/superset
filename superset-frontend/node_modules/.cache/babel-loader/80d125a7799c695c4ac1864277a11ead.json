{"ast":null,"code":"import _trimInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/trim\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";var _jsxFileName = \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/EditableTitle.jsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { t } from '@superset-ui/translation';\nimport TooltipWrapper from './TooltipWrapper';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  title: PropTypes.string,\n  canEdit: PropTypes.bool,\n  multiLine: PropTypes.bool,\n  onSaveTitle: PropTypes.func,\n  noPermitTooltip: PropTypes.string,\n  showTooltip: PropTypes.bool,\n  emptyText: PropTypes.node,\n  style: PropTypes.object,\n  extraClasses: PropTypes.oneOfType([\n  PropTypes.arrayOf(PropTypes.string),\n  PropTypes.string]) };\n\n\nconst defaultProps = {\n  title: t('Title'),\n  canEdit: false,\n  multiLine: false,\n  showTooltip: true,\n  onSaveTitle: () => {},\n  emptyText: '<empty>',\n  style: null,\n  extraClasses: null };\n\n\nexport default class EditableTitle extends React.PureComponent {\n  constructor(props) {var _context, _context2, _context3, _context4;\n    super(props);\n    this.state = {\n      isEditing: false,\n      title: this.props.title,\n      lastTitle: this.props.title };\n\n    this.handleClick = _bindInstanceProperty(_context = this.handleClick).call(_context, this);\n    this.handleBlur = _bindInstanceProperty(_context2 = this.handleBlur).call(_context2, this);\n    this.handleChange = _bindInstanceProperty(_context3 = this.handleChange).call(_context3, this);\n    this.handleKeyPress = _bindInstanceProperty(_context4 = this.handleKeyPress).call(_context4, this);\n\n    // Used so we can access the DOM element if a user clicks on this component.\n    this.contentRef = React.createRef();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.title !== this.state.title) {\n      this.setState({\n        lastTitle: this.state.title,\n        title: nextProps.title });\n\n    }\n  }\n\n  handleClick() {\n    if (!this.props.canEdit || this.state.isEditing) {\n      return;\n    }\n\n    // For multi-line values, save the actual rendered size of the displayed text.\n    // Later, if a textarea is constructed for editing the value, we'll need this.\n    const contentBoundingRect = this.contentRef.current ?\n    this.contentRef.current.getBoundingClientRect() :\n    null;\n\n    this.setState({ isEditing: true, contentBoundingRect });\n  }\n\n  handleBlur() {var _context5;\n    const title = _trimInstanceProperty(_context5 = this.state.title).call(_context5);\n\n    if (!this.props.canEdit) {\n      return;\n    }\n\n    this.setState({\n      isEditing: false });\n\n\n    if (!title.length) {\n      this.setState({\n        title: this.state.lastTitle });\n\n\n      return;\n    }\n\n    if (this.state.lastTitle !== title) {\n      this.setState({\n        lastTitle: title });\n\n    }\n\n    if (this.props.title !== title) {\n      this.props.onSaveTitle(title);\n    }\n  }\n\n  // this entire method exists to support using EditableTitle as the title of a\n  // react-bootstrap Tab, as a workaround for this line in react-bootstrap https://goo.gl/ZVLmv4\n  //\n  // tl;dr when a Tab EditableTitle is being edited, typically the Tab it's within has been\n  // clicked and is focused/active. for accessibility, when focused the Tab <a /> intercepts\n  // the ' ' key (among others, including all arrows) and onChange() doesn't fire. somehow\n  // keydown is still called so we can detect this and manually add a ' ' to the current title\n  handleKeyDown(event) {\n    if (event.key === ' ') {\n      event.stopPropagation();\n    }\n  }\n\n  handleChange(ev) {\n    if (!this.props.canEdit) {\n      return;\n    }\n    this.setState({\n      title: ev.target.value });\n\n  }\n\n  handleKeyPress(ev) {\n    if (ev.key === 'Enter') {\n      ev.preventDefault();\n      this.handleBlur();\n    }\n  }\n\n  render() {\n    const { isEditing, title, contentBoundingRect } = this.state;\n    const {\n      emptyText,\n      multiLine,\n      showTooltip,\n      canEdit,\n      noPermitTooltip,\n      style,\n      extraClasses } =\n    this.props;\n\n    let value;\n    if (title) {\n      value = title;\n    } else if (!isEditing) {\n      value = emptyText;\n    }\n\n    // Construct an inline style based on previously-saved height of the rendered label. Only\n    // used in multi-line contexts.\n    const editStyle =\n    isEditing && contentBoundingRect ?\n    { height: contentBoundingRect.height + \"px\" } :\n    null;\n\n    // Create a textarea when we're editing a multi-line value, otherwise create an input (which may\n    // be text or a button).\n    let input =\n    multiLine && isEditing ?\n    ___EmotionJSX(\"textarea\", {\n      ref: this.contentRef,\n      required: true,\n      value: value,\n      className: !title ? 'text-muted' : null,\n      onKeyDown: this.handleKeyDown,\n      onChange: this.handleChange,\n      onBlur: this.handleBlur,\n      onClick: this.handleClick,\n      onKeyPress: this.handleKeyPress,\n      style: editStyle, __source: { fileName: _jsxFileName, lineNumber: 179 }, __self: this }) :\n\n\n    ___EmotionJSX(\"input\", {\n      ref: this.contentRef,\n      required: true,\n      type: isEditing ? 'text' : 'button',\n      value: value,\n      className: !title ? 'text-muted' : null,\n      onKeyDown: this.handleKeyDown,\n      onChange: this.handleChange,\n      onBlur: this.handleBlur,\n      onClick: this.handleClick,\n      onKeyPress: this.handleKeyPress, __source: { fileName: _jsxFileName, lineNumber: 192 }, __self: this });\n\n\n    if (showTooltip && !isEditing) {\n      input =\n      ___EmotionJSX(TooltipWrapper, {\n        label: \"title\",\n        tooltip:\n        canEdit ?\n        t('click to edit') :\n        noPermitTooltip ||\n        t(\"You don't have the rights to alter this title.\"), __source: { fileName: _jsxFileName, lineNumber: 207 }, __self: this },\n\n\n      input);\n\n\n    }\n    return (\n      ___EmotionJSX(\"span\", {\n        className: cx(\n        'editable-title',\n        extraClasses,\n        canEdit && 'editable-title--editable',\n        isEditing && 'editable-title--editing'),\n\n        style: style, __source: { fileName: _jsxFileName, lineNumber: 221 }, __self: this },\n\n      input));\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}EditableTitle.propTypes = propTypes;\nEditableTitle.defaultProps = defaultProps;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/EditableTitle.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/EditableTitle.jsx\");reactHotLoader.register(EditableTitle, \"EditableTitle\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/EditableTitle.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/EditableTitle.jsx"],"names":["React","PropTypes","cx","t","TooltipWrapper","propTypes","title","string","canEdit","bool","multiLine","onSaveTitle","func","noPermitTooltip","showTooltip","emptyText","node","style","object","extraClasses","oneOfType","arrayOf","defaultProps","EditableTitle","PureComponent","constructor","props","state","isEditing","lastTitle","handleClick","handleBlur","handleChange","handleKeyPress","contentRef","createRef","UNSAFE_componentWillReceiveProps","nextProps","setState","contentBoundingRect","current","getBoundingClientRect","length","handleKeyDown","event","key","stopPropagation","ev","target","value","preventDefault","render","editStyle","height","input"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { t } from '@superset-ui/translation';\nimport TooltipWrapper from './TooltipWrapper';\n\nconst propTypes = {\n  title: PropTypes.string,\n  canEdit: PropTypes.bool,\n  multiLine: PropTypes.bool,\n  onSaveTitle: PropTypes.func,\n  noPermitTooltip: PropTypes.string,\n  showTooltip: PropTypes.bool,\n  emptyText: PropTypes.node,\n  style: PropTypes.object,\n  extraClasses: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.string),\n    PropTypes.string,\n  ]),\n};\nconst defaultProps = {\n  title: t('Title'),\n  canEdit: false,\n  multiLine: false,\n  showTooltip: true,\n  onSaveTitle: () => {},\n  emptyText: '<empty>',\n  style: null,\n  extraClasses: null,\n};\n\nexport default class EditableTitle extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditing: false,\n      title: this.props.title,\n      lastTitle: this.props.title,\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleKeyPress = this.handleKeyPress.bind(this);\n\n    // Used so we can access the DOM element if a user clicks on this component.\n    this.contentRef = React.createRef();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.title !== this.state.title) {\n      this.setState({\n        lastTitle: this.state.title,\n        title: nextProps.title,\n      });\n    }\n  }\n\n  handleClick() {\n    if (!this.props.canEdit || this.state.isEditing) {\n      return;\n    }\n\n    // For multi-line values, save the actual rendered size of the displayed text.\n    // Later, if a textarea is constructed for editing the value, we'll need this.\n    const contentBoundingRect = this.contentRef.current\n      ? this.contentRef.current.getBoundingClientRect()\n      : null;\n\n    this.setState({ isEditing: true, contentBoundingRect });\n  }\n\n  handleBlur() {\n    const title = this.state.title.trim();\n\n    if (!this.props.canEdit) {\n      return;\n    }\n\n    this.setState({\n      isEditing: false,\n    });\n\n    if (!title.length) {\n      this.setState({\n        title: this.state.lastTitle,\n      });\n\n      return;\n    }\n\n    if (this.state.lastTitle !== title) {\n      this.setState({\n        lastTitle: title,\n      });\n    }\n\n    if (this.props.title !== title) {\n      this.props.onSaveTitle(title);\n    }\n  }\n\n  // this entire method exists to support using EditableTitle as the title of a\n  // react-bootstrap Tab, as a workaround for this line in react-bootstrap https://goo.gl/ZVLmv4\n  //\n  // tl;dr when a Tab EditableTitle is being edited, typically the Tab it's within has been\n  // clicked and is focused/active. for accessibility, when focused the Tab <a /> intercepts\n  // the ' ' key (among others, including all arrows) and onChange() doesn't fire. somehow\n  // keydown is still called so we can detect this and manually add a ' ' to the current title\n  handleKeyDown(event) {\n    if (event.key === ' ') {\n      event.stopPropagation();\n    }\n  }\n\n  handleChange(ev) {\n    if (!this.props.canEdit) {\n      return;\n    }\n    this.setState({\n      title: ev.target.value,\n    });\n  }\n\n  handleKeyPress(ev) {\n    if (ev.key === 'Enter') {\n      ev.preventDefault();\n      this.handleBlur();\n    }\n  }\n\n  render() {\n    const { isEditing, title, contentBoundingRect } = this.state;\n    const {\n      emptyText,\n      multiLine,\n      showTooltip,\n      canEdit,\n      noPermitTooltip,\n      style,\n      extraClasses,\n    } = this.props;\n\n    let value;\n    if (title) {\n      value = title;\n    } else if (!isEditing) {\n      value = emptyText;\n    }\n\n    // Construct an inline style based on previously-saved height of the rendered label. Only\n    // used in multi-line contexts.\n    const editStyle =\n      isEditing && contentBoundingRect\n        ? { height: `${contentBoundingRect.height}px` }\n        : null;\n\n    // Create a textarea when we're editing a multi-line value, otherwise create an input (which may\n    // be text or a button).\n    let input =\n      multiLine && isEditing ? (\n        <textarea\n          ref={this.contentRef}\n          required\n          value={value}\n          className={!title ? 'text-muted' : null}\n          onKeyDown={this.handleKeyDown}\n          onChange={this.handleChange}\n          onBlur={this.handleBlur}\n          onClick={this.handleClick}\n          onKeyPress={this.handleKeyPress}\n          style={editStyle}\n        />\n      ) : (\n        <input\n          ref={this.contentRef}\n          required\n          type={isEditing ? 'text' : 'button'}\n          value={value}\n          className={!title ? 'text-muted' : null}\n          onKeyDown={this.handleKeyDown}\n          onChange={this.handleChange}\n          onBlur={this.handleBlur}\n          onClick={this.handleClick}\n          onKeyPress={this.handleKeyPress}\n        />\n      );\n    if (showTooltip && !isEditing) {\n      input = (\n        <TooltipWrapper\n          label=\"title\"\n          tooltip={\n            canEdit\n              ? t('click to edit')\n              : noPermitTooltip ||\n                t(\"You don't have the rights to alter this title.\")\n          }\n        >\n          {input}\n        </TooltipWrapper>\n      );\n    }\n    return (\n      <span\n        className={cx(\n          'editable-title',\n          extraClasses,\n          canEdit && 'editable-title--editable',\n          isEditing && 'editable-title--editing',\n        )}\n        style={style}\n      >\n        {input}\n      </span>\n    );\n  }\n}\nEditableTitle.propTypes = propTypes;\nEditableTitle.defaultProps = defaultProps;\n"]},"metadata":{},"sourceType":"module"}