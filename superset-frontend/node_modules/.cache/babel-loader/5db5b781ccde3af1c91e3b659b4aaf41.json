{"ast":null,"code":"import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";var _context,_jsxFileName = \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/components/RefreshIntervalModal.jsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'src/components/Select';\nimport { t } from '@superset-ui/translation';\nimport { Alert, Button } from 'react-bootstrap';\n\nimport ModalTrigger from '../../components/ModalTrigger';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  triggerNode: PropTypes.node.isRequired,\n  refreshFrequency: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  refreshLimit: PropTypes.number,\n  refreshWarning: PropTypes.string };\n\n\nconst defaultProps = {\n  refreshLimit: 0,\n  refreshWarning: null };\n\n\nexport const options = _mapInstanceProperty(_context = [\n[0, t(\"Don't refresh\")],\n[10, t('10 seconds')],\n[30, t('30 seconds')],\n[60, t('1 minute')],\n[300, t('5 minutes')],\n[1800, t('30 minutes')],\n[3600, t('1 hour')],\n[21600, t('6 hours')],\n[43200, t('12 hours')],\n[86400, t('24 hours')]]).call(_context,\no => ({ value: o[0], label: o[1] }));\n\nclass RefreshIntervalModal extends React.PureComponent {\n  constructor(props) {var _context2, _context3, _context4;\n    super(props);\n    this.modalRef = React.createRef();\n    this.state = {\n      refreshFrequency: props.refreshFrequency };\n\n    this.handleFrequencyChange = _bindInstanceProperty(_context2 = this.handleFrequencyChange).call(_context2, this);\n    this.onSave = _bindInstanceProperty(_context3 = this.onSave).call(_context3, this);\n    this.onCancel = _bindInstanceProperty(_context4 = this.onCancel).call(_context4, this);\n  }\n\n  onSave() {\n    this.props.onChange(this.state.refreshFrequency, this.props.editMode);\n    this.modalRef.current.close();\n  }\n\n  onCancel() {\n    this.setState({\n      refreshFrequency: this.props.refreshFrequency });\n\n    this.modalRef.current.close();\n  }\n\n  handleFrequencyChange(opt) {\n    const value = opt ? opt.value : options[0].value;\n    this.setState({\n      refreshFrequency: value });\n\n  }\n\n  render() {\n    const { refreshLimit = 0, refreshWarning, editMode } = this.props;\n    const { refreshFrequency = 0 } = this.state;\n    const showRefreshWarning =\n    !!refreshFrequency && !!refreshWarning && refreshFrequency < refreshLimit;\n\n    return (\n      ___EmotionJSX(ModalTrigger, {\n        ref: this.modalRef,\n        triggerNode: this.props.triggerNode,\n        isMenuItem: true,\n        modalTitle: t('Refresh Interval'),\n        modalBody:\n        ___EmotionJSX(\"div\", { __source: { fileName: _jsxFileName, lineNumber: 98 }, __self: this },\n        t('Choose the refresh frequency for this dashboard'),\n        ___EmotionJSX(Select, {\n          options: options,\n          value: this.state.refreshFrequency,\n          onChange: this.handleFrequencyChange, __source: { fileName: _jsxFileName, lineNumber: 100 }, __self: this }),\n\n        showRefreshWarning &&\n        ___EmotionJSX(\"div\", { className: \"refresh-warning-container\", __source: { fileName: _jsxFileName, lineNumber: 106 }, __self: this },\n        ___EmotionJSX(Alert, { bsStyle: \"warning\", __source: { fileName: _jsxFileName, lineNumber: 107 }, __self: this },\n        ___EmotionJSX(\"div\", { __source: { fileName: _jsxFileName, lineNumber: 108 }, __self: this }, refreshWarning),\n        ___EmotionJSX(\"br\", { __source: { fileName: _jsxFileName, lineNumber: 109 }, __self: this }),\n        ___EmotionJSX(\"strong\", { __source: { fileName: _jsxFileName, lineNumber: 110 }, __self: this }, t('Are you sure you want to proceed?'))))),\n\n\n\n\n\n        modalFooter:\n        ___EmotionJSX(React.Fragment, null,\n        ___EmotionJSX(Button, { bsStyle: \"primary\", onClick: this.onSave, __source: { fileName: _jsxFileName, lineNumber: 118 }, __self: this },\n        editMode ? t('Save') : t('Save for this session')),\n\n        ___EmotionJSX(Button, { onClick: this.onCancel, __source: { fileName: _jsxFileName, lineNumber: 121 }, __self: this }, t('Cancel'))), __source: { fileName: _jsxFileName, lineNumber: 92 }, __self: this }));\n\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}RefreshIntervalModal.propTypes = propTypes;\nRefreshIntervalModal.defaultProps = defaultProps;const _default =\n\nRefreshIntervalModal;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/components/RefreshIntervalModal.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/components/RefreshIntervalModal.jsx\");reactHotLoader.register(options, \"options\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/components/RefreshIntervalModal.jsx\");reactHotLoader.register(RefreshIntervalModal, \"RefreshIntervalModal\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/components/RefreshIntervalModal.jsx\");reactHotLoader.register(_default, \"default\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/components/RefreshIntervalModal.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/components/RefreshIntervalModal.jsx"],"names":["React","PropTypes","Select","t","Alert","Button","ModalTrigger","propTypes","triggerNode","node","isRequired","refreshFrequency","number","onChange","func","editMode","bool","refreshLimit","refreshWarning","string","defaultProps","options","o","value","label","RefreshIntervalModal","PureComponent","constructor","props","modalRef","createRef","state","handleFrequencyChange","onSave","onCancel","current","close","setState","opt","render","showRefreshWarning"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'src/components/Select';\nimport { t } from '@superset-ui/translation';\nimport { Alert, Button } from 'react-bootstrap';\n\nimport ModalTrigger from '../../components/ModalTrigger';\n\nconst propTypes = {\n  triggerNode: PropTypes.node.isRequired,\n  refreshFrequency: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  refreshLimit: PropTypes.number,\n  refreshWarning: PropTypes.string,\n};\n\nconst defaultProps = {\n  refreshLimit: 0,\n  refreshWarning: null,\n};\n\nexport const options = [\n  [0, t(\"Don't refresh\")],\n  [10, t('10 seconds')],\n  [30, t('30 seconds')],\n  [60, t('1 minute')],\n  [300, t('5 minutes')],\n  [1800, t('30 minutes')],\n  [3600, t('1 hour')],\n  [21600, t('6 hours')],\n  [43200, t('12 hours')],\n  [86400, t('24 hours')],\n].map(o => ({ value: o[0], label: o[1] }));\n\nclass RefreshIntervalModal extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.modalRef = React.createRef();\n    this.state = {\n      refreshFrequency: props.refreshFrequency,\n    };\n    this.handleFrequencyChange = this.handleFrequencyChange.bind(this);\n    this.onSave = this.onSave.bind(this);\n    this.onCancel = this.onCancel.bind(this);\n  }\n\n  onSave() {\n    this.props.onChange(this.state.refreshFrequency, this.props.editMode);\n    this.modalRef.current.close();\n  }\n\n  onCancel() {\n    this.setState({\n      refreshFrequency: this.props.refreshFrequency,\n    });\n    this.modalRef.current.close();\n  }\n\n  handleFrequencyChange(opt) {\n    const value = opt ? opt.value : options[0].value;\n    this.setState({\n      refreshFrequency: value,\n    });\n  }\n\n  render() {\n    const { refreshLimit = 0, refreshWarning, editMode } = this.props;\n    const { refreshFrequency = 0 } = this.state;\n    const showRefreshWarning =\n      !!refreshFrequency && !!refreshWarning && refreshFrequency < refreshLimit;\n\n    return (\n      <ModalTrigger\n        ref={this.modalRef}\n        triggerNode={this.props.triggerNode}\n        isMenuItem\n        modalTitle={t('Refresh Interval')}\n        modalBody={\n          <div>\n            {t('Choose the refresh frequency for this dashboard')}\n            <Select\n              options={options}\n              value={this.state.refreshFrequency}\n              onChange={this.handleFrequencyChange}\n            />\n            {showRefreshWarning && (\n              <div className=\"refresh-warning-container\">\n                <Alert bsStyle=\"warning\">\n                  <div>{refreshWarning}</div>\n                  <br />\n                  <strong>{t('Are you sure you want to proceed?')}</strong>\n                </Alert>\n              </div>\n            )}\n          </div>\n        }\n        modalFooter={\n          <>\n            <Button bsStyle=\"primary\" onClick={this.onSave}>\n              {editMode ? t('Save') : t('Save for this session')}\n            </Button>\n            <Button onClick={this.onCancel}>{t('Cancel')}</Button>\n          </>\n        }\n      />\n    );\n  }\n}\nRefreshIntervalModal.propTypes = propTypes;\nRefreshIntervalModal.defaultProps = defaultProps;\n\nexport default RefreshIntervalModal;\n"]},"metadata":{},"sourceType":"module"}