{"ast":null,"code":"import \"core-js/modules/es.regexp.to-string\";import _Number$isNaN from \"@babel/runtime-corejs3/core-js-stable/number/is-nan\";import _parseInt from \"@babel/runtime-corejs3/core-js-stable/parse-int\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {\nButton,\nLabel,\nFormGroup,\nFormControl,\nOverlay,\nPopover } from\n'react-bootstrap';\nimport { t } from '@superset-ui/translation';\n\nimport ControlHeader from '../../explore/components/ControlHeader';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  value: PropTypes.number,\n  defaultQueryLimit: PropTypes.number.isRequired,\n  maxRow: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired };\n\n\nexport default class LimitControl extends React.PureComponent {\n  constructor(props) {var _context, _context2, _context3;\n    super(props);\n    const { value, defaultQueryLimit } = props;\n    this.state = {\n      textValue: (value || defaultQueryLimit).toString(),\n      showOverlay: false };\n\n    this.handleHide = _bindInstanceProperty(_context = this.handleHide).call(_context, this);\n    this.handleToggle = _bindInstanceProperty(_context2 = this.handleToggle).call(_context2, this);\n    this.submitAndClose = _bindInstanceProperty(_context3 = this.submitAndClose).call(_context3, this);\n  }\n\n  setValueAndClose(val) {\n    this.setState({ textValue: val }, this.submitAndClose);\n  }\n\n  submitAndClose() {\n    const value =\n    _parseInt(this.state.textValue, 10) || this.props.defaultQueryLimit;\n    this.props.onChange(value);\n    this.setState({ showOverlay: false });\n  }\n\n  isValidLimit(limit) {\n    const value = _parseInt(limit, 10);\n    return !(\n    _Number$isNaN(value) ||\n    value <= 0 ||\n    this.props.maxRow && value > this.props.maxRow);\n\n  }\n\n  handleToggle() {\n    this.setState({ showOverlay: !this.state.showOverlay });\n  }\n\n  handleHide() {\n    this.setState({ showOverlay: false });\n  }\n\n  renderPopover() {var _context4;\n    const textValue = this.state.textValue;\n    const isValid = this.isValidLimit(textValue);\n    const errorMsg =\n    t('Row limit must be positive integer') + (\n    this.props.maxRow ?\n    t(' and not greater than %s', this.props.maxRow) :\n    '');\n    return (\n      ___EmotionJSX(Popover, { id: \"sqllab-limit-results\" },\n      ___EmotionJSX(\"div\", { style: { width: '100px' } },\n      ___EmotionJSX(ControlHeader, {\n        label: t('Row limit'),\n        validationErrors: !isValid ? [t(errorMsg)] : [] }),\n\n      ___EmotionJSX(FormGroup, null,\n      ___EmotionJSX(FormControl, {\n        type: \"text\",\n        value: textValue,\n        placeholder: t(\"Max: \" + this.props.maxRow),\n        bsSize: \"small\",\n        onChange: e => this.setState({ textValue: e.target.value }) })),\n\n\n      ___EmotionJSX(\"div\", { className: \"clearfix\" },\n      ___EmotionJSX(Button, {\n        bsSize: \"small\",\n        bsStyle: \"primary\",\n        className: \"float-left ok\",\n        disabled: !isValid,\n        onClick: this.submitAndClose }, \"Ok\"),\n\n\n\n      ___EmotionJSX(Button, {\n        bsSize: \"small\",\n        className: \"float-right reset\",\n        onClick: _bindInstanceProperty(_context4 = this.setValueAndClose).call(_context4,\n        this,\n        this.props.defaultQueryLimit.toString()) }, \"Reset\")))));\n\n\n\n\n\n\n\n\n  }\n\n  render() {\n    return (\n      ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(Label, { style: { cursor: 'pointer' }, onClick: this.handleToggle }, \"LIMIT \",\n      this.props.value || this.props.maxRow),\n\n      ___EmotionJSX(Overlay, {\n        rootClose: true,\n        show: this.state.showOverlay,\n        onHide: this.handleHide,\n        trigger: \"click\",\n        placement: \"right\",\n        target: this },\n\n      this.renderPopover())));\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nLimitControl.propTypes = propTypes;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/LimitControl.jsx\");reactHotLoader.register(LimitControl, \"LimitControl\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/LimitControl.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":null,"metadata":{},"sourceType":"module"}