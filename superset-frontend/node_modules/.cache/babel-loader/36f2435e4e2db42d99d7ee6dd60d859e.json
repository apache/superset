{"ast":null,"code":"import \"core-js/modules/es.string.split\";import _JSON$stringify from \"@babel/runtime-corejs3/core-js-stable/json/stringify\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";var _jsxFileName = \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/addSlice/AddSliceContainer.tsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  */\nimport React from 'react';\nimport { Button, Panel } from 'react-bootstrap';\nimport Select from 'src/components/Select';\nimport { t } from '@superset-ui/translation';\nimport VizTypeControl from '../explore/components/controls/VizTypeControl';import { jsx as ___EmotionJSX } from \"@emotion/core\";\nconst styleSelectWidth = { width: 600 };\nexport default class AddSliceContainer extends React.PureComponent {\n  constructor(props) {var _context, _context2, _context3;\n    super(props);\n    this.state = {\n      visType: 'table' };\n\n    this.changeDatasource = _bindInstanceProperty(_context = this.changeDatasource).call(_context, this);\n    this.changeVisType = _bindInstanceProperty(_context2 = this.changeVisType).call(_context2, this);\n    this.gotoSlice = _bindInstanceProperty(_context3 = this.gotoSlice).call(_context3, this);\n  }\n  exploreUrl() {\n    const formData = encodeURIComponent(_JSON$stringify({\n      viz_type: this.state.visType,\n      datasource: this.state.datasourceValue }));\n\n    return \"/superset/explore/?form_data=\" + formData;\n  }\n  gotoSlice() {\n    window.location.href = this.exploreUrl();\n  }\n  changeDatasource(option) {\n    this.setState({\n      datasourceValue: option.value,\n      datasourceId: option.value.split('__')[0],\n      datasourceType: option.value.split('__')[1] });\n\n  }\n  changeVisType(visType) {\n    this.setState({ visType });\n  }\n  isBtnDisabled() {\n    return !(this.state.datasourceId && this.state.visType);\n  }\n  render() {\n    return ___EmotionJSX(\"div\", { className: \"container\", __source: { fileName: _jsxFileName, lineNumber: 59 }, __self: this },\n    ___EmotionJSX(Panel, { __source: { fileName: _jsxFileName, lineNumber: 60 }, __self: this },\n    ___EmotionJSX(Panel.Heading, { __source: { fileName: _jsxFileName, lineNumber: 61 }, __self: this },\n    ___EmotionJSX(\"h3\", { __source: { fileName: _jsxFileName, lineNumber: 62 }, __self: this }, t('Create a new chart'))),\n\n    ___EmotionJSX(Panel.Body, { __source: { fileName: _jsxFileName, lineNumber: 64 }, __self: this },\n    ___EmotionJSX(\"div\", { __source: { fileName: _jsxFileName, lineNumber: 65 }, __self: this },\n    ___EmotionJSX(\"p\", { __source: { fileName: _jsxFileName, lineNumber: 66 }, __self: this }, t('Choose a datasource')),\n    ___EmotionJSX(\"p\", { __source: { fileName: _jsxFileName, lineNumber: 67 }, __self: this },\n    ___EmotionJSX(\"div\", { style: styleSelectWidth, __source: { fileName: _jsxFileName, lineNumber: 68 }, __self: this },\n    ___EmotionJSX(Select, { clearable: false, ignoreAccents: false, name: \"select-datasource\", onChange: this.changeDatasource, options: this.props.datasources, placeholder: t('Choose a datasource'), style: styleSelectWidth, value: this.state.datasourceValue ?\n      {\n        value: this.state.datasourceValue } :\n\n      undefined, width: 600, __source: { fileName: _jsxFileName, lineNumber: 69 }, __self: this }))),\n\n\n    ___EmotionJSX(\"span\", { className: \"text-muted\", __source: { fileName: _jsxFileName, lineNumber: 76 }, __self: this },\n    t('If the datasource you are looking for is not available in the list, follow the instructions on how to add it in the Superset tutorial.'), ' ',\n    ___EmotionJSX(\"a\", { href: \"https://superset.apache.org/tutorial.html#adding-a-new-table\", rel: \"noopener noreferrer\", target: \"_blank\", __source: { fileName: _jsxFileName, lineNumber: 78 }, __self: this },\n    ___EmotionJSX(\"i\", { className: \"fa fa-external-link\", __source: { fileName: _jsxFileName, lineNumber: 79 }, __self: this })))),\n\n\n\n    ___EmotionJSX(\"br\", { __source: { fileName: _jsxFileName, lineNumber: 83 }, __self: this }),\n    ___EmotionJSX(\"div\", { __source: { fileName: _jsxFileName, lineNumber: 84 }, __self: this },\n    ___EmotionJSX(\"p\", { __source: { fileName: _jsxFileName, lineNumber: 85 }, __self: this }, t('Choose a visualization type')),\n    ___EmotionJSX(VizTypeControl, { name: \"select-vis-type\", onChange: this.changeVisType, value: this.state.visType, __source: { fileName: _jsxFileName, lineNumber: 86 }, __self: this })),\n\n    ___EmotionJSX(\"br\", { __source: { fileName: _jsxFileName, lineNumber: 88 }, __self: this }),\n    ___EmotionJSX(\"hr\", { __source: { fileName: _jsxFileName, lineNumber: 89 }, __self: this }),\n    ___EmotionJSX(Button, { bsStyle: \"primary\", disabled: this.isBtnDisabled(), onClick: this.gotoSlice, __source: { fileName: _jsxFileName, lineNumber: 90 }, __self: this },\n    t('Create new chart')),\n\n    ___EmotionJSX(\"br\", { __source: { fileName: _jsxFileName, lineNumber: 93 }, __self: this }),\n    ___EmotionJSX(\"br\", { __source: { fileName: _jsxFileName, lineNumber: 94 }, __self: this }))));\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(styleSelectWidth, \"styleSelectWidth\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/addSlice/AddSliceContainer.tsx\");reactHotLoader.register(AddSliceContainer, \"AddSliceContainer\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/addSlice/AddSliceContainer.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/addSlice/AddSliceContainer.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { Button, Panel } from 'react-bootstrap';\nimport Select from 'src/components/Select';\nimport { t } from '@superset-ui/translation';\n\nimport VizTypeControl from '../explore/components/controls/VizTypeControl';\n\ninterface Datasource {\n  label: string;\n  value: string;\n}\n\nexport type AddSliceContainerProps = {\n  datasources: Datasource[];\n};\n\nexport type AddSliceContainerState = {\n  datasourceId?: string;\n  datasourceType?: string;\n  datasourceValue?: string;\n  visType: string;\n};\n\nconst styleSelectWidth = { width: 600 };\n\nexport default class AddSliceContainer extends React.PureComponent<\n  AddSliceContainerProps,\n  AddSliceContainerState\n> {\n  constructor(props: AddSliceContainerProps) {\n    super(props);\n    this.state = {\n      visType: 'table',\n    };\n\n    this.changeDatasource = this.changeDatasource.bind(this);\n    this.changeVisType = this.changeVisType.bind(this);\n    this.gotoSlice = this.gotoSlice.bind(this);\n  }\n\n  exploreUrl() {\n    const formData = encodeURIComponent(\n      JSON.stringify({\n        viz_type: this.state.visType,\n        datasource: this.state.datasourceValue,\n      }),\n    );\n    return `/superset/explore/?form_data=${formData}`;\n  }\n\n  gotoSlice() {\n    window.location.href = this.exploreUrl();\n  }\n\n  changeDatasource(option: { value: string }) {\n    this.setState({\n      datasourceValue: option.value,\n      datasourceId: option.value.split('__')[0],\n      datasourceType: option.value.split('__')[1],\n    });\n  }\n\n  changeVisType(visType: string) {\n    this.setState({ visType });\n  }\n\n  isBtnDisabled() {\n    return !(this.state.datasourceId && this.state.visType);\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <Panel>\n          <Panel.Heading>\n            <h3>{t('Create a new chart')}</h3>\n          </Panel.Heading>\n          <Panel.Body>\n            <div>\n              <p>{t('Choose a datasource')}</p>\n              <p>\n                <div style={styleSelectWidth}>\n                  <Select\n                    clearable={false}\n                    ignoreAccents={false}\n                    name=\"select-datasource\"\n                    onChange={this.changeDatasource}\n                    options={this.props.datasources}\n                    placeholder={t('Choose a datasource')}\n                    style={styleSelectWidth}\n                    value={\n                      this.state.datasourceValue\n                        ? {\n                            value: this.state.datasourceValue,\n                          }\n                        : undefined\n                    }\n                    width={600}\n                  />\n                </div>\n              </p>\n              <span className=\"text-muted\">\n                {t(\n                  'If the datasource you are looking for is not available in the list, follow the instructions on how to add it in the Superset tutorial.',\n                )}{' '}\n                <a\n                  href=\"https://superset.apache.org/tutorial.html#adding-a-new-table\"\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                >\n                  <i className=\"fa fa-external-link\" />\n                </a>\n              </span>\n            </div>\n            <br />\n            <div>\n              <p>{t('Choose a visualization type')}</p>\n              <VizTypeControl\n                name=\"select-vis-type\"\n                onChange={this.changeVisType}\n                value={this.state.visType}\n              />\n            </div>\n            <br />\n            <hr />\n            <Button\n              bsStyle=\"primary\"\n              disabled={this.isBtnDisabled()}\n              onClick={this.gotoSlice}\n            >\n              {t('Create new chart')}\n            </Button>\n            <br />\n            <br />\n          </Panel.Body>\n        </Panel>\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}