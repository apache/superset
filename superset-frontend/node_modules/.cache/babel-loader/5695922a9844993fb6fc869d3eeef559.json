{"ast":null,"code":"import \"core-js/modules/es.string.split\";import _sliceInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/slice\";import _indexOfInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/index-of\";import _parseInt from \"@babel/runtime-corejs3/core-js-stable/parse-int\";var _jsxFileName = \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/ExploreChartPanel.jsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Panel } from 'react-bootstrap';\nimport { ParentSize } from '@vx/responsive';\nimport { chartPropShape } from '../../dashboard/util/propShapes';\nimport ChartContainer from '../../chart/ChartContainer';\nimport ExploreChartHeader from './ExploreChartHeader';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  actions: PropTypes.object.isRequired,\n  addHistory: PropTypes.func,\n  onQuery: PropTypes.func,\n  can_overwrite: PropTypes.bool.isRequired,\n  can_download: PropTypes.bool.isRequired,\n  datasource: PropTypes.object,\n  column_formats: PropTypes.object,\n  containerId: PropTypes.string.isRequired,\n  height: PropTypes.string.isRequired,\n  width: PropTypes.string.isRequired,\n  isStarred: PropTypes.bool.isRequired,\n  slice: PropTypes.object,\n  sliceName: PropTypes.string,\n  table_name: PropTypes.string,\n  vizType: PropTypes.string.isRequired,\n  form_data: PropTypes.object,\n  standalone: PropTypes.bool,\n  timeout: PropTypes.number,\n  refreshOverlayVisible: PropTypes.bool,\n  chart: chartPropShape,\n  errorMessage: PropTypes.node,\n  triggerRender: PropTypes.bool };\n\n\nclass ExploreChartPanel extends React.PureComponent {\n  renderChart() {\n    const { chart } = this.props;\n    const headerHeight = this.props.standalone ? 0 : 80;\n\n    return (\n      ___EmotionJSX(ParentSize, { __source: { fileName: _jsxFileName, lineNumber: 58 }, __self: this },\n      ({ width, height }) =>\n      width > 0 &&\n      height > 0 &&\n      ___EmotionJSX(ChartContainer, {\n        width: Math.floor(width),\n        height: _parseInt(this.props.height, 10) - headerHeight,\n        annotationData: chart.annotationData,\n        chartAlert: chart.chartAlert,\n        chartStackTrace: chart.chartStackTrace,\n        chartId: chart.id,\n        chartStatus: chart.chartStatus,\n        triggerRender: this.props.triggerRender,\n        datasource: this.props.datasource,\n        errorMessage: this.props.errorMessage,\n        formData: this.props.form_data,\n        onQuery: this.props.onQuery,\n        queryResponse: chart.queryResponse,\n        refreshOverlayVisible: this.props.refreshOverlayVisible,\n        setControlValue: this.props.actions.setControlValue,\n        timeout: this.props.timeout,\n        triggerQuery: chart.triggerQuery,\n        vizType: this.props.vizType, __source: { fileName: _jsxFileName, lineNumber: 62 }, __self: this })));\n\n\n\n\n\n  }\n\n  render() {\n    if (this.props.standalone) {\n      // dom manipulation hack to get rid of the boostrap theme's body background\n      const standaloneClass = 'background-transparent';\n      const bodyClasses = document.body.className.split(' ');\n      if (_indexOfInstanceProperty(bodyClasses).call(bodyClasses, standaloneClass) === -1) {\n        document.body.className += \" \" + standaloneClass;\n      }\n      return this.renderChart();\n    }\n\n    const header =\n    ___EmotionJSX(ExploreChartHeader, {\n      actions: this.props.actions,\n      addHistory: this.props.addHistory,\n      can_overwrite: this.props.can_overwrite,\n      can_download: this.props.can_download,\n      isStarred: this.props.isStarred,\n      slice: _sliceInstanceProperty(this.props),\n      sliceName: this.props.sliceName,\n      table_name: this.props.table_name,\n      form_data: this.props.form_data,\n      timeout: this.props.timeout,\n      chart: this.props.chart, __source: { fileName: _jsxFileName, lineNumber: 100 }, __self: this });\n\n\n    return (\n      ___EmotionJSX(\"div\", { className: \"chart-container\", __source: { fileName: _jsxFileName, lineNumber: 115 }, __self: this },\n      ___EmotionJSX(Panel, { style: { height: this.props.height }, __source: { fileName: _jsxFileName, lineNumber: 116 }, __self: this },\n      ___EmotionJSX(Panel.Heading, { __source: { fileName: _jsxFileName, lineNumber: 117 }, __self: this }, header),\n      ___EmotionJSX(Panel.Body, { __source: { fileName: _jsxFileName, lineNumber: 118 }, __self: this }, this.renderChart()))));\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nExploreChartPanel.propTypes = propTypes;const _default =\n\nExploreChartPanel;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/ExploreChartPanel.jsx\");reactHotLoader.register(ExploreChartPanel, \"ExploreChartPanel\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/ExploreChartPanel.jsx\");reactHotLoader.register(_default, \"default\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/ExploreChartPanel.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/ExploreChartPanel.jsx"],"names":["React","PropTypes","Panel","ParentSize","chartPropShape","ChartContainer","ExploreChartHeader","propTypes","actions","object","isRequired","addHistory","func","onQuery","can_overwrite","bool","can_download","datasource","column_formats","containerId","string","height","width","isStarred","slice","sliceName","table_name","vizType","form_data","standalone","timeout","number","refreshOverlayVisible","chart","errorMessage","node","triggerRender","ExploreChartPanel","PureComponent","renderChart","props","headerHeight","Math","floor","annotationData","chartAlert","chartStackTrace","id","chartStatus","queryResponse","setControlValue","triggerQuery","render","standaloneClass","bodyClasses","document","body","className","split","header"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Panel } from 'react-bootstrap';\nimport { ParentSize } from '@vx/responsive';\nimport { chartPropShape } from '../../dashboard/util/propShapes';\nimport ChartContainer from '../../chart/ChartContainer';\nimport ExploreChartHeader from './ExploreChartHeader';\n\nconst propTypes = {\n  actions: PropTypes.object.isRequired,\n  addHistory: PropTypes.func,\n  onQuery: PropTypes.func,\n  can_overwrite: PropTypes.bool.isRequired,\n  can_download: PropTypes.bool.isRequired,\n  datasource: PropTypes.object,\n  column_formats: PropTypes.object,\n  containerId: PropTypes.string.isRequired,\n  height: PropTypes.string.isRequired,\n  width: PropTypes.string.isRequired,\n  isStarred: PropTypes.bool.isRequired,\n  slice: PropTypes.object,\n  sliceName: PropTypes.string,\n  table_name: PropTypes.string,\n  vizType: PropTypes.string.isRequired,\n  form_data: PropTypes.object,\n  standalone: PropTypes.bool,\n  timeout: PropTypes.number,\n  refreshOverlayVisible: PropTypes.bool,\n  chart: chartPropShape,\n  errorMessage: PropTypes.node,\n  triggerRender: PropTypes.bool,\n};\n\nclass ExploreChartPanel extends React.PureComponent {\n  renderChart() {\n    const { chart } = this.props;\n    const headerHeight = this.props.standalone ? 0 : 80;\n\n    return (\n      <ParentSize>\n        {({ width, height }) =>\n          width > 0 &&\n          height > 0 && (\n            <ChartContainer\n              width={Math.floor(width)}\n              height={parseInt(this.props.height, 10) - headerHeight}\n              annotationData={chart.annotationData}\n              chartAlert={chart.chartAlert}\n              chartStackTrace={chart.chartStackTrace}\n              chartId={chart.id}\n              chartStatus={chart.chartStatus}\n              triggerRender={this.props.triggerRender}\n              datasource={this.props.datasource}\n              errorMessage={this.props.errorMessage}\n              formData={this.props.form_data}\n              onQuery={this.props.onQuery}\n              queryResponse={chart.queryResponse}\n              refreshOverlayVisible={this.props.refreshOverlayVisible}\n              setControlValue={this.props.actions.setControlValue}\n              timeout={this.props.timeout}\n              triggerQuery={chart.triggerQuery}\n              vizType={this.props.vizType}\n            />\n          )\n        }\n      </ParentSize>\n    );\n  }\n\n  render() {\n    if (this.props.standalone) {\n      // dom manipulation hack to get rid of the boostrap theme's body background\n      const standaloneClass = 'background-transparent';\n      const bodyClasses = document.body.className.split(' ');\n      if (bodyClasses.indexOf(standaloneClass) === -1) {\n        document.body.className += ` ${standaloneClass}`;\n      }\n      return this.renderChart();\n    }\n\n    const header = (\n      <ExploreChartHeader\n        actions={this.props.actions}\n        addHistory={this.props.addHistory}\n        can_overwrite={this.props.can_overwrite}\n        can_download={this.props.can_download}\n        isStarred={this.props.isStarred}\n        slice={this.props.slice}\n        sliceName={this.props.sliceName}\n        table_name={this.props.table_name}\n        form_data={this.props.form_data}\n        timeout={this.props.timeout}\n        chart={this.props.chart}\n      />\n    );\n    return (\n      <div className=\"chart-container\">\n        <Panel style={{ height: this.props.height }}>\n          <Panel.Heading>{header}</Panel.Heading>\n          <Panel.Body>{this.renderChart()}</Panel.Body>\n        </Panel>\n      </div>\n    );\n  }\n}\n\nExploreChartPanel.propTypes = propTypes;\n\nexport default ExploreChartPanel;\n"]},"metadata":{},"sourceType":"module"}